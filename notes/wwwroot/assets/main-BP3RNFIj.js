const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/angular-html-LfdN0zeE.js","assets/html-C2L_23MC.js","assets/javascript-ySlJ1b_l.js","assets/css-BPhBrDlE.js","assets/angular-ts-CKsD7JZE.js","assets/scss-C31hgJw-.js","assets/apl-BBq3IX1j.js","assets/xml-e3z08dGr.js","assets/java-xI-RfyKK.js","assets/json-BQoSv7ci.js","assets/astro-CqkE3fuf.js","assets/typescript-Dj6nwHGl.js","assets/postcss-B3ZDOciz.js","assets/blade-a8OxSdnT.js","assets/sql-COK4E0Yg.js","assets/bsl-Dgyn0ogV.js","assets/sdbl-BLhTXw86.js","assets/cairo--RitsXJZ.js","assets/python-DhUJRlN_.js","assets/cobol-PTqiYgYu.js","assets/coffee-dyiR41kL.js","assets/cpp-BksuvNSY.js","assets/regexp-DWJ3fJO_.js","assets/glsl-DBO2IWDn.js","assets/c-C3t2pwGQ.js","assets/crystal-DtDmRg-F.js","assets/shellscript-atvbtKCR.js","assets/edge-D5gP-w-T.js","assets/html-derivative-CSfWNPLT.js","assets/elixir-CLiX3zqd.js","assets/elm-CmHSxxaM.js","assets/erb-BYTLMnw6.js","assets/ruby-DeZ3UC14.js","assets/haml-B2EZWmdv.js","assets/graphql-cDcHW_If.js","assets/jsx-BAng5TT0.js","assets/tsx-B6W0miNI.js","assets/lua-CvWAzNxB.js","assets/yaml-CVw76BM1.js","assets/fortran-fixed-form-TqA4NnZg.js","assets/fortran-free-form-DKXYxT9g.js","assets/fsharp-XplgxFYe.js","assets/markdown-UIAJJxZW.js","assets/gdresource-BHYsBjWJ.js","assets/gdshader-SKMF96pI.js","assets/gdscript-DfxzS6Rs.js","assets/git-commit-i4q6IMui.js","assets/diff-BgYniUM_.js","assets/git-rebase-B-v9cOL2.js","assets/glimmer-js-D-cwc0-E.js","assets/glimmer-ts-pgjy16dm.js","assets/hack-D1yCygmZ.js","assets/handlebars-BQGss363.js","assets/http-FRrOvY1W.js","assets/hxml-TIA70rKU.js","assets/haxe-C5wWYbrZ.js","assets/imba-bv_oIlVt.js","assets/jinja-DGy0s7-h.js","assets/jison-BqZprYcd.js","assets/julia-BBuGR-5E.js","assets/r-CwjWoCRV.js","assets/latex-C-cWTeAZ.js","assets/tex-rYs2v40G.js","assets/liquid-D3W5UaiH.js","assets/marko-z0MBrx5-.js","assets/less-BfCpw3nA.js","assets/mdc-DB_EDNY_.js","assets/nginx-D_VnBJ67.js","assets/nim-ZlGxZxc3.js","assets/perl-CHQXSrWU.js","assets/php-B5ebYQev.js","assets/pug-CM9l7STV.js","assets/qml-D8XfuvdV.js","assets/razor-CNLDkMZG.js","assets/csharp-D9R-vmeu.js","assets/rst-4NLicBqY.js","assets/cmake-DbXoA79R.js","assets/sas-BmTFh92c.js","assets/shaderlab-B7qAK45m.js","assets/hlsl-ifBTmRxC.js","assets/shellsession-C_rIy8kc.js","assets/soy-C-lX7w71.js","assets/sparql-bYkjHRlG.js","assets/turtle-BMR_PYu6.js","assets/stata-DorPZHa4.js","assets/svelte-MSaWC3Je.js","assets/templ-dwX3ZSMB.js","assets/go-B1SYOhNW.js","assets/ts-tags-CipyTH0X.js","assets/twig-NC5TFiHP.js","assets/vue-BuYVFjOK.js","assets/vue-html-xdeiXROB.js","assets/xsl-Dd0NUgwM.js","assets/index-C6vzxoEx.js","assets/index-Ds8toNUW.js","assets/index-DP9TtJwO.js","assets/index-8KiAwkKR.js","assets/index-Ch_qCilz.js","assets/index-CR_sUmWB.js","assets/index-C4H34dfw.js","assets/index-vY-h4J_N.js","assets/index-BSAZhzZx.js","assets/index-C_aolqmU.js","assets/index-BPI5n_yu.js","assets/index-CvBTqz6Y.js","assets/index-Dwteuxnt.js","assets/list-item-xb9BgIlX.js","assets/index-D7TIu75F.js","assets/index-BSyA59RR.js","assets/index-D0Zq5UJG.js","assets/index-BOaxcqHz.js"])))=>i.map(i=>d[i]);
var Xee=Object.defineProperty;var Jee=(t,e,n)=>e in t?Xee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ee=(t,e,n)=>Jee(t,typeof e!="symbol"?e+"":e,n);function Zee(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in t)){const s=Object.getOwnPropertyDescriptor(r,o);s&&Object.defineProperty(t,o,s.get?s:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var ep=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var C7={exports:{}},nC={},E7={exports:{}},Rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var av=Symbol.for("react.element"),ete=Symbol.for("react.portal"),tte=Symbol.for("react.fragment"),nte=Symbol.for("react.strict_mode"),rte=Symbol.for("react.profiler"),ote=Symbol.for("react.provider"),ste=Symbol.for("react.context"),ite=Symbol.for("react.forward_ref"),ate=Symbol.for("react.suspense"),lte=Symbol.for("react.memo"),cte=Symbol.for("react.lazy"),wM=Symbol.iterator;function ute(t){return t===null||typeof t!="object"?null:(t=wM&&t[wM]||t["@@iterator"],typeof t=="function"?t:null)}var k7={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S7=Object.assign,T7={};function km(t,e,n){this.props=t,this.context=e,this.refs=T7,this.updater=n||k7}km.prototype.isReactComponent={};km.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};km.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function N7(){}N7.prototype=km.prototype;function qR(t,e,n){this.props=t,this.context=e,this.refs=T7,this.updater=n||k7}var KR=qR.prototype=new N7;KR.constructor=qR;S7(KR,km.prototype);KR.isPureReactComponent=!0;var bM=Array.isArray,I7=Object.prototype.hasOwnProperty,YR={current:null},R7={key:!0,ref:!0,__self:!0,__source:!0};function A7(t,e,n){var r,o={},s=null,i=null;if(e!=null)for(r in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(s=""+e.key),e)I7.call(e,r)&&!R7.hasOwnProperty(r)&&(o[r]=e[r]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];o.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:av,type:t,key:s,ref:i,props:o,_owner:YR.current}}function dte(t,e){return{$$typeof:av,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function QR(t){return typeof t=="object"&&t!==null&&t.$$typeof===av}function fte(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var xM=/\/+/g;function V2(t,e){return typeof t=="object"&&t!==null&&t.key!=null?fte(""+t.key):e.toString(36)}function V0(t,e,n,r,o){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case av:case ete:i=!0}}if(i)return i=t,o=o(i),t=r===""?"."+V2(i,0):r,bM(o)?(n="",t!=null&&(n=t.replace(xM,"$&/")+"/"),V0(o,e,n,"",function(c){return c})):o!=null&&(QR(o)&&(o=dte(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(xM,"$&/")+"/")+t)),e.push(o)),1;if(i=0,r=r===""?".":r+":",bM(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+V2(s,a);i+=V0(s,e,n,l,o)}else if(l=ute(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+V2(s,a++),i+=V0(s,e,n,l,o);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function Rw(t,e,n){if(t==null)return t;var r=[],o=0;return V0(t,r,"","",function(s){return e.call(n,s,o++)}),r}function hte(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Do={current:null},$0={transition:null},pte={ReactCurrentDispatcher:Do,ReactCurrentBatchConfig:$0,ReactCurrentOwner:YR};function P7(){throw Error("act(...) is not supported in production builds of React.")}Rt.Children={map:Rw,forEach:function(t,e,n){Rw(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Rw(t,function(){e++}),e},toArray:function(t){return Rw(t,function(e){return e})||[]},only:function(t){if(!QR(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Rt.Component=km;Rt.Fragment=tte;Rt.Profiler=rte;Rt.PureComponent=qR;Rt.StrictMode=nte;Rt.Suspense=ate;Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pte;Rt.act=P7;Rt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=S7({},t.props),o=t.key,s=t.ref,i=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,i=YR.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)I7.call(e,l)&&!R7.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:av,type:t.type,key:o,ref:s,props:r,_owner:i}};Rt.createContext=function(t){return t={$$typeof:ste,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ote,_context:t},t.Consumer=t};Rt.createElement=A7;Rt.createFactory=function(t){var e=A7.bind(null,t);return e.type=t,e};Rt.createRef=function(){return{current:null}};Rt.forwardRef=function(t){return{$$typeof:ite,render:t}};Rt.isValidElement=QR;Rt.lazy=function(t){return{$$typeof:cte,_payload:{_status:-1,_result:t},_init:hte}};Rt.memo=function(t,e){return{$$typeof:lte,type:t,compare:e===void 0?null:e}};Rt.startTransition=function(t){var e=$0.transition;$0.transition={};try{t()}finally{$0.transition=e}};Rt.unstable_act=P7;Rt.useCallback=function(t,e){return Do.current.useCallback(t,e)};Rt.useContext=function(t){return Do.current.useContext(t)};Rt.useDebugValue=function(){};Rt.useDeferredValue=function(t){return Do.current.useDeferredValue(t)};Rt.useEffect=function(t,e){return Do.current.useEffect(t,e)};Rt.useId=function(){return Do.current.useId()};Rt.useImperativeHandle=function(t,e,n){return Do.current.useImperativeHandle(t,e,n)};Rt.useInsertionEffect=function(t,e){return Do.current.useInsertionEffect(t,e)};Rt.useLayoutEffect=function(t,e){return Do.current.useLayoutEffect(t,e)};Rt.useMemo=function(t,e){return Do.current.useMemo(t,e)};Rt.useReducer=function(t,e,n){return Do.current.useReducer(t,e,n)};Rt.useRef=function(t){return Do.current.useRef(t)};Rt.useState=function(t){return Do.current.useState(t)};Rt.useSyncExternalStore=function(t,e,n){return Do.current.useSyncExternalStore(t,e,n)};Rt.useTransition=function(){return Do.current.useTransition()};Rt.version="18.3.1";E7.exports=Rt;var g=E7.exports;const dt=tC(g),XR=Zee({__proto__:null,default:dt},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mte=g,gte=Symbol.for("react.element"),yte=Symbol.for("react.fragment"),vte=Object.prototype.hasOwnProperty,wte=mte.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bte={key:!0,ref:!0,__self:!0,__source:!0};function M7(t,e,n){var r,o={},s=null,i=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(i=e.ref);for(r in e)vte.call(e,r)&&!bte.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:gte,type:t,key:s,ref:i,props:o,_owner:wte.current}}nC.Fragment=yte;nC.jsx=M7;nC.jsxs=M7;C7.exports=nC;var d=C7.exports,D7={exports:{}},Ls={},O7={exports:{}},L7={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,Y){var ue=H.length;H.push(Y);e:for(;0<ue;){var W=ue-1>>>1,G=H[W];if(0<o(G,Y))H[W]=Y,H[ue]=G,ue=W;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var Y=H[0],ue=H.pop();if(ue!==Y){H[0]=ue;e:for(var W=0,G=H.length,ie=G>>>1;W<ie;){var ye=2*(W+1)-1,he=H[ye],we=ye+1,ve=H[we];if(0>o(he,ue))we<G&&0>o(ve,he)?(H[W]=ve,H[we]=ue,W=we):(H[W]=he,H[ye]=ue,W=ye);else if(we<G&&0>o(ve,ue))H[W]=ve,H[we]=ue,W=we;else break e}}return Y}function o(H,Y){var ue=H.sortIndex-Y.sortIndex;return ue!==0?ue:H.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var i=Date,a=i.now();t.unstable_now=function(){return i.now()-a}}var l=[],c=[],u=1,f=null,h=3,p=!1,m=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(H){for(var Y=n(c);Y!==null;){if(Y.callback===null)r(c);else if(Y.startTime<=H)r(c),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(c)}}function R(H){if(y=!1,E(H),!m)if(n(l)!==null)m=!0,le(D);else{var Y=n(c);Y!==null&&Q(R,Y.startTime-H)}}function D(H,Y){m=!1,y&&(y=!1,b(I),I=-1),p=!0;var ue=h;try{for(E(Y),f=n(l);f!==null&&(!(f.expirationTime>Y)||H&&!$());){var W=f.callback;if(typeof W=="function"){f.callback=null,h=f.priorityLevel;var G=W(f.expirationTime<=Y);Y=t.unstable_now(),typeof G=="function"?f.callback=G:f===n(l)&&r(l),E(Y)}else r(l);f=n(l)}if(f!==null)var ie=!0;else{var ye=n(c);ye!==null&&Q(R,ye.startTime-Y),ie=!1}return ie}finally{f=null,h=ue,p=!1}}var O=!1,T=null,I=-1,P=5,L=-1;function $(){return!(t.unstable_now()-L<P)}function F(){if(T!==null){var H=t.unstable_now();L=H;var Y=!0;try{Y=T(!0,H)}finally{Y?V():(O=!1,T=null)}}else O=!1}var V;if(typeof C=="function")V=function(){C(F)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,ge=be.port2;be.port1.onmessage=F,V=function(){ge.postMessage(null)}}else V=function(){x(F,0)};function le(H){T=H,O||(O=!0,V())}function Q(H,Y){I=x(function(){H(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,le(D))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(H){switch(h){case 1:case 2:case 3:var Y=3;break;default:Y=h}var ue=h;h=Y;try{return H()}finally{h=ue}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,Y){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ue=h;h=H;try{return Y()}finally{h=ue}},t.unstable_scheduleCallback=function(H,Y,ue){var W=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?W+ue:W):ue=W,H){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ue+G,H={id:u++,callback:Y,priorityLevel:H,startTime:ue,expirationTime:G,sortIndex:-1},ue>W?(H.sortIndex=ue,e(c,H),n(l)===null&&H===n(c)&&(y?(b(I),I=-1):y=!0,Q(R,ue-W))):(H.sortIndex=G,e(l,H),m||p||(m=!0,le(D))),H},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(H){var Y=h;return function(){var ue=h;h=Y;try{return H.apply(this,arguments)}finally{h=ue}}}})(L7);O7.exports=L7;var xte=O7.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _te=g,Ns=xte;function Me(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var j7=new Set,Yy={};function Wf(t,e){Wp(t,e),Wp(t+"Capture",e)}function Wp(t,e){for(Yy[t]=e,t=0;t<e.length;t++)j7.add(e[t])}var uc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bT=Object.prototype.hasOwnProperty,Cte=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_M={},CM={};function Ete(t){return bT.call(CM,t)?!0:bT.call(_M,t)?!1:Cte.test(t)?CM[t]=!0:(_M[t]=!0,!1)}function kte(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Ste(t,e,n,r){if(e===null||typeof e>"u"||kte(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Oo(t,e,n,r,o,s,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=i}var Kr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Kr[t]=new Oo(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Kr[e]=new Oo(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Kr[t]=new Oo(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Kr[t]=new Oo(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Kr[t]=new Oo(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Kr[t]=new Oo(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Kr[t]=new Oo(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Kr[t]=new Oo(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Kr[t]=new Oo(t,5,!1,t.toLowerCase(),null,!1,!1)});var JR=/[\-:]([a-z])/g;function ZR(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(JR,ZR);Kr[e]=new Oo(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(JR,ZR);Kr[e]=new Oo(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(JR,ZR);Kr[e]=new Oo(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Kr[t]=new Oo(t,1,!1,t.toLowerCase(),null,!1,!1)});Kr.xlinkHref=new Oo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Kr[t]=new Oo(t,1,!1,t.toLowerCase(),null,!0,!0)});function eA(t,e,n,r){var o=Kr.hasOwnProperty(e)?Kr[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ste(e,n,o,r)&&(n=null),r||o===null?Ete(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,r=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var kc=_te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Aw=Symbol.for("react.element"),tp=Symbol.for("react.portal"),np=Symbol.for("react.fragment"),tA=Symbol.for("react.strict_mode"),xT=Symbol.for("react.profiler"),V7=Symbol.for("react.provider"),$7=Symbol.for("react.context"),nA=Symbol.for("react.forward_ref"),_T=Symbol.for("react.suspense"),CT=Symbol.for("react.suspense_list"),rA=Symbol.for("react.memo"),Xc=Symbol.for("react.lazy"),B7=Symbol.for("react.offscreen"),EM=Symbol.iterator;function Tg(t){return t===null||typeof t!="object"?null:(t=EM&&t[EM]||t["@@iterator"],typeof t=="function"?t:null)}var $n=Object.assign,$2;function Jg(t){if($2===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);$2=e&&e[1]||""}return`
`+$2+t}var B2=!1;function F2(t,e){if(!t||B2)return"";B2=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),s=r.stack.split(`
`),i=o.length-1,a=s.length-1;1<=i&&0<=a&&o[i]!==s[a];)a--;for(;1<=i&&0<=a;i--,a--)if(o[i]!==s[a]){if(i!==1||a!==1)do if(i--,a--,0>a||o[i]!==s[a]){var l=`
`+o[i].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=i&&0<=a);break}}}finally{B2=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Jg(t):""}function Tte(t){switch(t.tag){case 5:return Jg(t.type);case 16:return Jg("Lazy");case 13:return Jg("Suspense");case 19:return Jg("SuspenseList");case 0:case 2:case 15:return t=F2(t.type,!1),t;case 11:return t=F2(t.type.render,!1),t;case 1:return t=F2(t.type,!0),t;default:return""}}function ET(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case np:return"Fragment";case tp:return"Portal";case xT:return"Profiler";case tA:return"StrictMode";case _T:return"Suspense";case CT:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case $7:return(t.displayName||"Context")+".Consumer";case V7:return(t._context.displayName||"Context")+".Provider";case nA:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case rA:return e=t.displayName||null,e!==null?e:ET(t.type)||"Memo";case Xc:e=t._payload,t=t._init;try{return ET(t(e))}catch{}}return null}function Nte(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ET(e);case 8:return e===tA?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $u(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function F7(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ite(t){var e=F7(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Pw(t){t._valueTracker||(t._valueTracker=Ite(t))}function U7(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=F7(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Rb(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function kT(t,e){var n=e.checked;return $n({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function kM(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=$u(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function H7(t,e){e=e.checked,e!=null&&eA(t,"checked",e,!1)}function ST(t,e){H7(t,e);var n=$u(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?TT(t,e.type,n):e.hasOwnProperty("defaultValue")&&TT(t,e.type,$u(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function SM(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function TT(t,e,n){(e!=="number"||Rb(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Zg=Array.isArray;function yp(t,e,n,r){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&r&&(t[n].defaultSelected=!0)}else{for(n=""+$u(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function NT(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Me(91));return $n({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function TM(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Me(92));if(Zg(n)){if(1<n.length)throw Error(Me(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:$u(n)}}function z7(t,e){var n=$u(e.value),r=$u(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function NM(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function W7(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function IT(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?W7(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Mw,G7=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Mw=Mw||document.createElement("div"),Mw.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Mw.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Qy(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var yy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rte=["Webkit","ms","Moz","O"];Object.keys(yy).forEach(function(t){Rte.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),yy[e]=yy[t]})});function q7(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||yy.hasOwnProperty(t)&&yy[t]?(""+e).trim():e+"px"}function K7(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=q7(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,o):t[n]=o}}var Ate=$n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function RT(t,e){if(e){if(Ate[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Me(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Me(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Me(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Me(62))}}function AT(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var PT=null;function oA(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var MT=null,vp=null,wp=null;function IM(t){if(t=uv(t)){if(typeof MT!="function")throw Error(Me(280));var e=t.stateNode;e&&(e=aC(e),MT(t.stateNode,t.type,e))}}function Y7(t){vp?wp?wp.push(t):wp=[t]:vp=t}function Q7(){if(vp){var t=vp,e=wp;if(wp=vp=null,IM(t),e)for(t=0;t<e.length;t++)IM(e[t])}}function X7(t,e){return t(e)}function J7(){}var U2=!1;function Z7(t,e,n){if(U2)return t(e,n);U2=!0;try{return X7(t,e,n)}finally{U2=!1,(vp!==null||wp!==null)&&(J7(),Q7())}}function Xy(t,e){var n=t.stateNode;if(n===null)return null;var r=aC(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Me(231,e,typeof n));return n}var DT=!1;if(uc)try{var Ng={};Object.defineProperty(Ng,"passive",{get:function(){DT=!0}}),window.addEventListener("test",Ng,Ng),window.removeEventListener("test",Ng,Ng)}catch{DT=!1}function Pte(t,e,n,r,o,s,i,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var vy=!1,Ab=null,Pb=!1,OT=null,Mte={onError:function(t){vy=!0,Ab=t}};function Dte(t,e,n,r,o,s,i,a,l){vy=!1,Ab=null,Pte.apply(Mte,arguments)}function Ote(t,e,n,r,o,s,i,a,l){if(Dte.apply(this,arguments),vy){if(vy){var c=Ab;vy=!1,Ab=null}else throw Error(Me(198));Pb||(Pb=!0,OT=c)}}function Gf(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function eV(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function RM(t){if(Gf(t)!==t)throw Error(Me(188))}function Lte(t){var e=t.alternate;if(!e){if(e=Gf(t),e===null)throw Error(Me(188));return e!==t?null:t}for(var n=t,r=e;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return RM(o),t;if(s===r)return RM(o),e;s=s.sibling}throw Error(Me(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,a=o.child;a;){if(a===n){i=!0,n=o,r=s;break}if(a===r){i=!0,r=o,n=s;break}a=a.sibling}if(!i){for(a=s.child;a;){if(a===n){i=!0,n=s,r=o;break}if(a===r){i=!0,r=s,n=o;break}a=a.sibling}if(!i)throw Error(Me(189))}}if(n.alternate!==r)throw Error(Me(190))}if(n.tag!==3)throw Error(Me(188));return n.stateNode.current===n?t:e}function tV(t){return t=Lte(t),t!==null?nV(t):null}function nV(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=nV(t);if(e!==null)return e;t=t.sibling}return null}var rV=Ns.unstable_scheduleCallback,AM=Ns.unstable_cancelCallback,jte=Ns.unstable_shouldYield,Vte=Ns.unstable_requestPaint,Qn=Ns.unstable_now,$te=Ns.unstable_getCurrentPriorityLevel,sA=Ns.unstable_ImmediatePriority,oV=Ns.unstable_UserBlockingPriority,Mb=Ns.unstable_NormalPriority,Bte=Ns.unstable_LowPriority,sV=Ns.unstable_IdlePriority,rC=null,Fa=null;function Fte(t){if(Fa&&typeof Fa.onCommitFiberRoot=="function")try{Fa.onCommitFiberRoot(rC,t,void 0,(t.current.flags&128)===128)}catch{}}var Gi=Math.clz32?Math.clz32:zte,Ute=Math.log,Hte=Math.LN2;function zte(t){return t>>>=0,t===0?32:31-(Ute(t)/Hte|0)|0}var Dw=64,Ow=4194304;function ey(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Db(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,o=t.suspendedLanes,s=t.pingedLanes,i=n&268435455;if(i!==0){var a=i&~o;a!==0?r=ey(a):(s&=i,s!==0&&(r=ey(s)))}else i=n&~o,i!==0?r=ey(i):s!==0&&(r=ey(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&o)&&(o=r&-r,s=e&-e,o>=s||o===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Gi(e),o=1<<n,r|=t[n],e&=~o;return r}function Wte(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gte(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var i=31-Gi(s),a=1<<i,l=o[i];l===-1?(!(a&n)||a&r)&&(o[i]=Wte(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function LT(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function iV(){var t=Dw;return Dw<<=1,!(Dw&4194240)&&(Dw=64),t}function H2(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function lv(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Gi(e),t[e]=n}function qte(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-Gi(n),s=1<<o;e[o]=0,r[o]=-1,t[o]=-1,n&=~s}}function iA(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Gi(n),o=1<<r;o&e|t[r]&e&&(t[r]|=e),n&=~o}}var nn=0;function aV(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var lV,aA,cV,uV,dV,jT=!1,Lw=[],wu=null,bu=null,xu=null,Jy=new Map,Zy=new Map,ru=[],Kte="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function PM(t,e){switch(t){case"focusin":case"focusout":wu=null;break;case"dragenter":case"dragleave":bu=null;break;case"mouseover":case"mouseout":xu=null;break;case"pointerover":case"pointerout":Jy.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zy.delete(e.pointerId)}}function Ig(t,e,n,r,o,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},e!==null&&(e=uv(e),e!==null&&aA(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function Yte(t,e,n,r,o){switch(e){case"focusin":return wu=Ig(wu,t,e,n,r,o),!0;case"dragenter":return bu=Ig(bu,t,e,n,r,o),!0;case"mouseover":return xu=Ig(xu,t,e,n,r,o),!0;case"pointerover":var s=o.pointerId;return Jy.set(s,Ig(Jy.get(s)||null,t,e,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,Zy.set(s,Ig(Zy.get(s)||null,t,e,n,r,o)),!0}return!1}function fV(t){var e=qd(t.target);if(e!==null){var n=Gf(e);if(n!==null){if(e=n.tag,e===13){if(e=eV(n),e!==null){t.blockedOn=e,dV(t.priority,function(){cV(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function B0(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=VT(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);PT=r,n.target.dispatchEvent(r),PT=null}else return e=uv(n),e!==null&&aA(e),t.blockedOn=n,!1;e.shift()}return!0}function MM(t,e,n){B0(t)&&n.delete(e)}function Qte(){jT=!1,wu!==null&&B0(wu)&&(wu=null),bu!==null&&B0(bu)&&(bu=null),xu!==null&&B0(xu)&&(xu=null),Jy.forEach(MM),Zy.forEach(MM)}function Rg(t,e){t.blockedOn===e&&(t.blockedOn=null,jT||(jT=!0,Ns.unstable_scheduleCallback(Ns.unstable_NormalPriority,Qte)))}function e1(t){function e(o){return Rg(o,t)}if(0<Lw.length){Rg(Lw[0],t);for(var n=1;n<Lw.length;n++){var r=Lw[n];r.blockedOn===t&&(r.blockedOn=null)}}for(wu!==null&&Rg(wu,t),bu!==null&&Rg(bu,t),xu!==null&&Rg(xu,t),Jy.forEach(e),Zy.forEach(e),n=0;n<ru.length;n++)r=ru[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ru.length&&(n=ru[0],n.blockedOn===null);)fV(n),n.blockedOn===null&&ru.shift()}var bp=kc.ReactCurrentBatchConfig,Ob=!0;function Xte(t,e,n,r){var o=nn,s=bp.transition;bp.transition=null;try{nn=1,lA(t,e,n,r)}finally{nn=o,bp.transition=s}}function Jte(t,e,n,r){var o=nn,s=bp.transition;bp.transition=null;try{nn=4,lA(t,e,n,r)}finally{nn=o,bp.transition=s}}function lA(t,e,n,r){if(Ob){var o=VT(t,e,n,r);if(o===null)Z2(t,e,r,Lb,n),PM(t,r);else if(Yte(o,t,e,n,r))r.stopPropagation();else if(PM(t,r),e&4&&-1<Kte.indexOf(t)){for(;o!==null;){var s=uv(o);if(s!==null&&lV(s),s=VT(t,e,n,r),s===null&&Z2(t,e,r,Lb,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else Z2(t,e,r,null,n)}}var Lb=null;function VT(t,e,n,r){if(Lb=null,t=oA(r),t=qd(t),t!==null)if(e=Gf(t),e===null)t=null;else if(n=e.tag,n===13){if(t=eV(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Lb=t,null}function hV(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($te()){case sA:return 1;case oV:return 4;case Mb:case Bte:return 16;case sV:return 536870912;default:return 16}default:return 16}}var du=null,cA=null,F0=null;function pV(){if(F0)return F0;var t,e=cA,n=e.length,r,o="value"in du?du.value:du.textContent,s=o.length;for(t=0;t<n&&e[t]===o[t];t++);var i=n-t;for(r=1;r<=i&&e[n-r]===o[s-r];r++);return F0=o.slice(t,1<r?1-r:void 0)}function U0(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jw(){return!0}function DM(){return!1}function js(t){function e(n,r,o,s,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?jw:DM,this.isPropagationStopped=DM,this}return $n(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jw)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jw)},persist:function(){},isPersistent:jw}),e}var Sm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uA=js(Sm),cv=$n({},Sm,{view:0,detail:0}),Zte=js(cv),z2,W2,Ag,oC=$n({},cv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dA,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ag&&(Ag&&t.type==="mousemove"?(z2=t.screenX-Ag.screenX,W2=t.screenY-Ag.screenY):W2=z2=0,Ag=t),z2)},movementY:function(t){return"movementY"in t?t.movementY:W2}}),OM=js(oC),ene=$n({},oC,{dataTransfer:0}),tne=js(ene),nne=$n({},cv,{relatedTarget:0}),G2=js(nne),rne=$n({},Sm,{animationName:0,elapsedTime:0,pseudoElement:0}),one=js(rne),sne=$n({},Sm,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ine=js(sne),ane=$n({},Sm,{data:0}),LM=js(ane),lne={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cne={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},une={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dne(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=une[t])?!!e[t]:!1}function dA(){return dne}var fne=$n({},cv,{key:function(t){if(t.key){var e=lne[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=U0(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cne[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dA,charCode:function(t){return t.type==="keypress"?U0(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?U0(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),hne=js(fne),pne=$n({},oC,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jM=js(pne),mne=$n({},cv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dA}),gne=js(mne),yne=$n({},Sm,{propertyName:0,elapsedTime:0,pseudoElement:0}),vne=js(yne),wne=$n({},oC,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),bne=js(wne),xne=[9,13,27,32],fA=uc&&"CompositionEvent"in window,wy=null;uc&&"documentMode"in document&&(wy=document.documentMode);var _ne=uc&&"TextEvent"in window&&!wy,mV=uc&&(!fA||wy&&8<wy&&11>=wy),VM=" ",$M=!1;function gV(t,e){switch(t){case"keyup":return xne.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yV(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var rp=!1;function Cne(t,e){switch(t){case"compositionend":return yV(e);case"keypress":return e.which!==32?null:($M=!0,VM);case"textInput":return t=e.data,t===VM&&$M?null:t;default:return null}}function Ene(t,e){if(rp)return t==="compositionend"||!fA&&gV(t,e)?(t=pV(),F0=cA=du=null,rp=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mV&&e.locale!=="ko"?null:e.data;default:return null}}var kne={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function BM(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!kne[t.type]:e==="textarea"}function vV(t,e,n,r){Y7(r),e=jb(e,"onChange"),0<e.length&&(n=new uA("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var by=null,t1=null;function Sne(t){IV(t,0)}function sC(t){var e=ip(t);if(U7(e))return t}function Tne(t,e){if(t==="change")return e}var wV=!1;if(uc){var q2;if(uc){var K2="oninput"in document;if(!K2){var FM=document.createElement("div");FM.setAttribute("oninput","return;"),K2=typeof FM.oninput=="function"}q2=K2}else q2=!1;wV=q2&&(!document.documentMode||9<document.documentMode)}function UM(){by&&(by.detachEvent("onpropertychange",bV),t1=by=null)}function bV(t){if(t.propertyName==="value"&&sC(t1)){var e=[];vV(e,t1,t,oA(t)),Z7(Sne,e)}}function Nne(t,e,n){t==="focusin"?(UM(),by=e,t1=n,by.attachEvent("onpropertychange",bV)):t==="focusout"&&UM()}function Ine(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sC(t1)}function Rne(t,e){if(t==="click")return sC(e)}function Ane(t,e){if(t==="input"||t==="change")return sC(e)}function Pne(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qi=typeof Object.is=="function"?Object.is:Pne;function n1(t,e){if(Qi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!bT.call(e,o)||!Qi(t[o],e[o]))return!1}return!0}function HM(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zM(t,e){var n=HM(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=HM(n)}}function xV(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?xV(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function _V(){for(var t=window,e=Rb();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Rb(t.document)}return e}function hA(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Mne(t){var e=_V(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&xV(n.ownerDocument.documentElement,n)){if(r!==null&&hA(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,s=Math.min(r.start,o);r=r.end===void 0?s:Math.min(r.end,o),!t.extend&&s>r&&(o=r,r=s,s=o),o=zM(n,s);var i=zM(n,r);o&&i&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Dne=uc&&"documentMode"in document&&11>=document.documentMode,op=null,$T=null,xy=null,BT=!1;function WM(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;BT||op==null||op!==Rb(r)||(r=op,"selectionStart"in r&&hA(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xy&&n1(xy,r)||(xy=r,r=jb($T,"onSelect"),0<r.length&&(e=new uA("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=op)))}function Vw(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var sp={animationend:Vw("Animation","AnimationEnd"),animationiteration:Vw("Animation","AnimationIteration"),animationstart:Vw("Animation","AnimationStart"),transitionend:Vw("Transition","TransitionEnd")},Y2={},CV={};uc&&(CV=document.createElement("div").style,"AnimationEvent"in window||(delete sp.animationend.animation,delete sp.animationiteration.animation,delete sp.animationstart.animation),"TransitionEvent"in window||delete sp.transitionend.transition);function iC(t){if(Y2[t])return Y2[t];if(!sp[t])return t;var e=sp[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in CV)return Y2[t]=e[n];return t}var EV=iC("animationend"),kV=iC("animationiteration"),SV=iC("animationstart"),TV=iC("transitionend"),NV=new Map,GM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nd(t,e){NV.set(t,e),Wf(e,[t])}for(var Q2=0;Q2<GM.length;Q2++){var X2=GM[Q2],One=X2.toLowerCase(),Lne=X2[0].toUpperCase()+X2.slice(1);nd(One,"on"+Lne)}nd(EV,"onAnimationEnd");nd(kV,"onAnimationIteration");nd(SV,"onAnimationStart");nd("dblclick","onDoubleClick");nd("focusin","onFocus");nd("focusout","onBlur");nd(TV,"onTransitionEnd");Wp("onMouseEnter",["mouseout","mouseover"]);Wp("onMouseLeave",["mouseout","mouseover"]);Wp("onPointerEnter",["pointerout","pointerover"]);Wp("onPointerLeave",["pointerout","pointerover"]);Wf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wf("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ty="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jne=new Set("cancel close invalid load scroll toggle".split(" ").concat(ty));function qM(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Ote(r,e,void 0,t),t.currentTarget=null}function IV(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],o=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var i=r.length-1;0<=i;i--){var a=r[i],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&o.isPropagationStopped())break e;qM(o,a,c),s=l}else for(i=0;i<r.length;i++){if(a=r[i],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&o.isPropagationStopped())break e;qM(o,a,c),s=l}}}if(Pb)throw t=OT,Pb=!1,OT=null,t}function _n(t,e){var n=e[WT];n===void 0&&(n=e[WT]=new Set);var r=t+"__bubble";n.has(r)||(RV(e,t,2,!1),n.add(r))}function J2(t,e,n){var r=0;e&&(r|=4),RV(n,t,r,e)}var $w="_reactListening"+Math.random().toString(36).slice(2);function r1(t){if(!t[$w]){t[$w]=!0,j7.forEach(function(n){n!=="selectionchange"&&(jne.has(n)||J2(n,!1,t),J2(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$w]||(e[$w]=!0,J2("selectionchange",!1,e))}}function RV(t,e,n,r){switch(hV(e)){case 1:var o=Xte;break;case 4:o=Jte;break;default:o=lA}n=o.bind(null,e,n,t),o=void 0,!DT||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function Z2(t,e,n,r,o){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var l=i.tag;if((l===3||l===4)&&(l=i.stateNode.containerInfo,l===o||l.nodeType===8&&l.parentNode===o))return;i=i.return}for(;a!==null;){if(i=qd(a),i===null)return;if(l=i.tag,l===5||l===6){r=s=i;continue e}a=a.parentNode}}r=r.return}Z7(function(){var c=s,u=oA(n),f=[];e:{var h=NV.get(t);if(h!==void 0){var p=uA,m=t;switch(t){case"keypress":if(U0(n)===0)break e;case"keydown":case"keyup":p=hne;break;case"focusin":m="focus",p=G2;break;case"focusout":m="blur",p=G2;break;case"beforeblur":case"afterblur":p=G2;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=OM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=tne;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=gne;break;case EV:case kV:case SV:p=one;break;case TV:p=vne;break;case"scroll":p=Zte;break;case"wheel":p=bne;break;case"copy":case"cut":case"paste":p=ine;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=jM}var y=(e&4)!==0,x=!y&&t==="scroll",b=y?h!==null?h+"Capture":null:h;y=[];for(var C=c,E;C!==null;){E=C;var R=E.stateNode;if(E.tag===5&&R!==null&&(E=R,b!==null&&(R=Xy(C,b),R!=null&&y.push(o1(C,R,E)))),x)break;C=C.return}0<y.length&&(h=new p(h,m,null,n,u),f.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&n!==PT&&(m=n.relatedTarget||n.fromElement)&&(qd(m)||m[dc]))break e;if((p||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=c,m=m?qd(m):null,m!==null&&(x=Gf(m),m!==x||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(y=OM,R="onMouseLeave",b="onMouseEnter",C="mouse",(t==="pointerout"||t==="pointerover")&&(y=jM,R="onPointerLeave",b="onPointerEnter",C="pointer"),x=p==null?h:ip(p),E=m==null?h:ip(m),h=new y(R,C+"leave",p,n,u),h.target=x,h.relatedTarget=E,R=null,qd(u)===c&&(y=new y(b,C+"enter",m,n,u),y.target=E,y.relatedTarget=x,R=y),x=R,p&&m)t:{for(y=p,b=m,C=0,E=y;E;E=Ph(E))C++;for(E=0,R=b;R;R=Ph(R))E++;for(;0<C-E;)y=Ph(y),C--;for(;0<E-C;)b=Ph(b),E--;for(;C--;){if(y===b||b!==null&&y===b.alternate)break t;y=Ph(y),b=Ph(b)}y=null}else y=null;p!==null&&KM(f,h,p,y,!1),m!==null&&x!==null&&KM(f,x,m,y,!0)}}e:{if(h=c?ip(c):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var D=Tne;else if(BM(h))if(wV)D=Ane;else{D=Ine;var O=Nne}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(D=Rne);if(D&&(D=D(t,c))){vV(f,D,n,u);break e}O&&O(t,h,c),t==="focusout"&&(O=h._wrapperState)&&O.controlled&&h.type==="number"&&TT(h,"number",h.value)}switch(O=c?ip(c):window,t){case"focusin":(BM(O)||O.contentEditable==="true")&&(op=O,$T=c,xy=null);break;case"focusout":xy=$T=op=null;break;case"mousedown":BT=!0;break;case"contextmenu":case"mouseup":case"dragend":BT=!1,WM(f,n,u);break;case"selectionchange":if(Dne)break;case"keydown":case"keyup":WM(f,n,u)}var T;if(fA)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else rp?gV(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(mV&&n.locale!=="ko"&&(rp||I!=="onCompositionStart"?I==="onCompositionEnd"&&rp&&(T=pV()):(du=u,cA="value"in du?du.value:du.textContent,rp=!0)),O=jb(c,I),0<O.length&&(I=new LM(I,t,null,n,u),f.push({event:I,listeners:O}),T?I.data=T:(T=yV(n),T!==null&&(I.data=T)))),(T=_ne?Cne(t,n):Ene(t,n))&&(c=jb(c,"onBeforeInput"),0<c.length&&(u=new LM("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=T))}IV(f,e)})}function o1(t,e,n){return{instance:t,listener:e,currentTarget:n}}function jb(t,e){for(var n=e+"Capture",r=[];t!==null;){var o=t,s=o.stateNode;o.tag===5&&s!==null&&(o=s,s=Xy(t,n),s!=null&&r.unshift(o1(t,s,o)),s=Xy(t,e),s!=null&&r.push(o1(t,s,o))),t=t.return}return r}function Ph(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function KM(t,e,n,r,o){for(var s=e._reactName,i=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,o?(l=Xy(n,s),l!=null&&i.unshift(o1(n,l,a))):o||(l=Xy(n,s),l!=null&&i.push(o1(n,l,a)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var Vne=/\r\n?/g,$ne=/\u0000|\uFFFD/g;function YM(t){return(typeof t=="string"?t:""+t).replace(Vne,`
`).replace($ne,"")}function Bw(t,e,n){if(e=YM(e),YM(t)!==e&&n)throw Error(Me(425))}function Vb(){}var FT=null,UT=null;function HT(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zT=typeof setTimeout=="function"?setTimeout:void 0,Bne=typeof clearTimeout=="function"?clearTimeout:void 0,QM=typeof Promise=="function"?Promise:void 0,Fne=typeof queueMicrotask=="function"?queueMicrotask:typeof QM<"u"?function(t){return QM.resolve(null).then(t).catch(Une)}:zT;function Une(t){setTimeout(function(){throw t})}function ek(t,e){var n=e,r=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){t.removeChild(o),e1(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);e1(e)}function _u(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function XM(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Tm=Math.random().toString(36).slice(2),Da="__reactFiber$"+Tm,s1="__reactProps$"+Tm,dc="__reactContainer$"+Tm,WT="__reactEvents$"+Tm,Hne="__reactListeners$"+Tm,zne="__reactHandles$"+Tm;function qd(t){var e=t[Da];if(e)return e;for(var n=t.parentNode;n;){if(e=n[dc]||n[Da]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=XM(t);t!==null;){if(n=t[Da])return n;t=XM(t)}return e}t=n,n=t.parentNode}return null}function uv(t){return t=t[Da]||t[dc],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ip(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Me(33))}function aC(t){return t[s1]||null}var GT=[],ap=-1;function rd(t){return{current:t}}function Sn(t){0>ap||(t.current=GT[ap],GT[ap]=null,ap--)}function vn(t,e){ap++,GT[ap]=t.current,t.current=e}var Bu={},go=rd(Bu),Ko=rd(!1),yf=Bu;function Gp(t,e){var n=t.type.contextTypes;if(!n)return Bu;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Yo(t){return t=t.childContextTypes,t!=null}function $b(){Sn(Ko),Sn(go)}function JM(t,e,n){if(go.current!==Bu)throw Error(Me(168));vn(go,e),vn(Ko,n)}function AV(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(Me(108,Nte(t)||"Unknown",o));return $n({},n,r)}function Bb(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Bu,yf=go.current,vn(go,t),vn(Ko,Ko.current),!0}function ZM(t,e,n){var r=t.stateNode;if(!r)throw Error(Me(169));n?(t=AV(t,e,yf),r.__reactInternalMemoizedMergedChildContext=t,Sn(Ko),Sn(go),vn(go,t)):Sn(Ko),vn(Ko,n)}var Bl=null,lC=!1,tk=!1;function PV(t){Bl===null?Bl=[t]:Bl.push(t)}function Wne(t){lC=!0,PV(t)}function od(){if(!tk&&Bl!==null){tk=!0;var t=0,e=nn;try{var n=Bl;for(nn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Bl=null,lC=!1}catch(o){throw Bl!==null&&(Bl=Bl.slice(t+1)),rV(sA,od),o}finally{nn=e,tk=!1}}return null}var lp=[],cp=0,Fb=null,Ub=0,Js=[],Zs=0,vf=null,zl=1,Wl="";function Vd(t,e){lp[cp++]=Ub,lp[cp++]=Fb,Fb=t,Ub=e}function MV(t,e,n){Js[Zs++]=zl,Js[Zs++]=Wl,Js[Zs++]=vf,vf=t;var r=zl;t=Wl;var o=32-Gi(r)-1;r&=~(1<<o),n+=1;var s=32-Gi(e)+o;if(30<s){var i=o-o%5;s=(r&(1<<i)-1).toString(32),r>>=i,o-=i,zl=1<<32-Gi(e)+o|n<<o|r,Wl=s+t}else zl=1<<s|n<<o|r,Wl=t}function pA(t){t.return!==null&&(Vd(t,1),MV(t,1,0))}function mA(t){for(;t===Fb;)Fb=lp[--cp],lp[cp]=null,Ub=lp[--cp],lp[cp]=null;for(;t===vf;)vf=Js[--Zs],Js[Zs]=null,Wl=Js[--Zs],Js[Zs]=null,zl=Js[--Zs],Js[Zs]=null}var bs=null,ys=null,An=!1,Fi=null;function DV(t,e){var n=ri(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function e9(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bs=t,ys=_u(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bs=t,ys=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=vf!==null?{id:zl,overflow:Wl}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ri(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,bs=t,ys=null,!0):!1;default:return!1}}function qT(t){return(t.mode&1)!==0&&(t.flags&128)===0}function KT(t){if(An){var e=ys;if(e){var n=e;if(!e9(t,e)){if(qT(t))throw Error(Me(418));e=_u(n.nextSibling);var r=bs;e&&e9(t,e)?DV(r,n):(t.flags=t.flags&-4097|2,An=!1,bs=t)}}else{if(qT(t))throw Error(Me(418));t.flags=t.flags&-4097|2,An=!1,bs=t}}}function t9(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bs=t}function Fw(t){if(t!==bs)return!1;if(!An)return t9(t),An=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!HT(t.type,t.memoizedProps)),e&&(e=ys)){if(qT(t))throw OV(),Error(Me(418));for(;e;)DV(t,e),e=_u(e.nextSibling)}if(t9(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Me(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ys=_u(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ys=null}}else ys=bs?_u(t.stateNode.nextSibling):null;return!0}function OV(){for(var t=ys;t;)t=_u(t.nextSibling)}function qp(){ys=bs=null,An=!1}function gA(t){Fi===null?Fi=[t]:Fi.push(t)}var Gne=kc.ReactCurrentBatchConfig;function Pg(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Me(309));var r=n.stateNode}if(!r)throw Error(Me(147,t));var o=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(i){var a=o.refs;i===null?delete a[s]:a[s]=i},e._stringRef=s,e)}if(typeof t!="string")throw Error(Me(284));if(!n._owner)throw Error(Me(290,t))}return t}function Uw(t,e){throw t=Object.prototype.toString.call(e),Error(Me(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function n9(t){var e=t._init;return e(t._payload)}function LV(t){function e(b,C){if(t){var E=b.deletions;E===null?(b.deletions=[C],b.flags|=16):E.push(C)}}function n(b,C){if(!t)return null;for(;C!==null;)e(b,C),C=C.sibling;return null}function r(b,C){for(b=new Map;C!==null;)C.key!==null?b.set(C.key,C):b.set(C.index,C),C=C.sibling;return b}function o(b,C){return b=Su(b,C),b.index=0,b.sibling=null,b}function s(b,C,E){return b.index=E,t?(E=b.alternate,E!==null?(E=E.index,E<C?(b.flags|=2,C):E):(b.flags|=2,C)):(b.flags|=1048576,C)}function i(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,C,E,R){return C===null||C.tag!==6?(C=lk(E,b.mode,R),C.return=b,C):(C=o(C,E),C.return=b,C)}function l(b,C,E,R){var D=E.type;return D===np?u(b,C,E.props.children,R,E.key):C!==null&&(C.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Xc&&n9(D)===C.type)?(R=o(C,E.props),R.ref=Pg(b,C,E),R.return=b,R):(R=Y0(E.type,E.key,E.props,null,b.mode,R),R.ref=Pg(b,C,E),R.return=b,R)}function c(b,C,E,R){return C===null||C.tag!==4||C.stateNode.containerInfo!==E.containerInfo||C.stateNode.implementation!==E.implementation?(C=ck(E,b.mode,R),C.return=b,C):(C=o(C,E.children||[]),C.return=b,C)}function u(b,C,E,R,D){return C===null||C.tag!==7?(C=cf(E,b.mode,R,D),C.return=b,C):(C=o(C,E),C.return=b,C)}function f(b,C,E){if(typeof C=="string"&&C!==""||typeof C=="number")return C=lk(""+C,b.mode,E),C.return=b,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Aw:return E=Y0(C.type,C.key,C.props,null,b.mode,E),E.ref=Pg(b,null,C),E.return=b,E;case tp:return C=ck(C,b.mode,E),C.return=b,C;case Xc:var R=C._init;return f(b,R(C._payload),E)}if(Zg(C)||Tg(C))return C=cf(C,b.mode,E,null),C.return=b,C;Uw(b,C)}return null}function h(b,C,E,R){var D=C!==null?C.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return D!==null?null:a(b,C,""+E,R);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Aw:return E.key===D?l(b,C,E,R):null;case tp:return E.key===D?c(b,C,E,R):null;case Xc:return D=E._init,h(b,C,D(E._payload),R)}if(Zg(E)||Tg(E))return D!==null?null:u(b,C,E,R,null);Uw(b,E)}return null}function p(b,C,E,R,D){if(typeof R=="string"&&R!==""||typeof R=="number")return b=b.get(E)||null,a(C,b,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Aw:return b=b.get(R.key===null?E:R.key)||null,l(C,b,R,D);case tp:return b=b.get(R.key===null?E:R.key)||null,c(C,b,R,D);case Xc:var O=R._init;return p(b,C,E,O(R._payload),D)}if(Zg(R)||Tg(R))return b=b.get(E)||null,u(C,b,R,D,null);Uw(C,R)}return null}function m(b,C,E,R){for(var D=null,O=null,T=C,I=C=0,P=null;T!==null&&I<E.length;I++){T.index>I?(P=T,T=null):P=T.sibling;var L=h(b,T,E[I],R);if(L===null){T===null&&(T=P);break}t&&T&&L.alternate===null&&e(b,T),C=s(L,C,I),O===null?D=L:O.sibling=L,O=L,T=P}if(I===E.length)return n(b,T),An&&Vd(b,I),D;if(T===null){for(;I<E.length;I++)T=f(b,E[I],R),T!==null&&(C=s(T,C,I),O===null?D=T:O.sibling=T,O=T);return An&&Vd(b,I),D}for(T=r(b,T);I<E.length;I++)P=p(T,b,I,E[I],R),P!==null&&(t&&P.alternate!==null&&T.delete(P.key===null?I:P.key),C=s(P,C,I),O===null?D=P:O.sibling=P,O=P);return t&&T.forEach(function($){return e(b,$)}),An&&Vd(b,I),D}function y(b,C,E,R){var D=Tg(E);if(typeof D!="function")throw Error(Me(150));if(E=D.call(E),E==null)throw Error(Me(151));for(var O=D=null,T=C,I=C=0,P=null,L=E.next();T!==null&&!L.done;I++,L=E.next()){T.index>I?(P=T,T=null):P=T.sibling;var $=h(b,T,L.value,R);if($===null){T===null&&(T=P);break}t&&T&&$.alternate===null&&e(b,T),C=s($,C,I),O===null?D=$:O.sibling=$,O=$,T=P}if(L.done)return n(b,T),An&&Vd(b,I),D;if(T===null){for(;!L.done;I++,L=E.next())L=f(b,L.value,R),L!==null&&(C=s(L,C,I),O===null?D=L:O.sibling=L,O=L);return An&&Vd(b,I),D}for(T=r(b,T);!L.done;I++,L=E.next())L=p(T,b,I,L.value,R),L!==null&&(t&&L.alternate!==null&&T.delete(L.key===null?I:L.key),C=s(L,C,I),O===null?D=L:O.sibling=L,O=L);return t&&T.forEach(function(F){return e(b,F)}),An&&Vd(b,I),D}function x(b,C,E,R){if(typeof E=="object"&&E!==null&&E.type===np&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Aw:e:{for(var D=E.key,O=C;O!==null;){if(O.key===D){if(D=E.type,D===np){if(O.tag===7){n(b,O.sibling),C=o(O,E.props.children),C.return=b,b=C;break e}}else if(O.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Xc&&n9(D)===O.type){n(b,O.sibling),C=o(O,E.props),C.ref=Pg(b,O,E),C.return=b,b=C;break e}n(b,O);break}else e(b,O);O=O.sibling}E.type===np?(C=cf(E.props.children,b.mode,R,E.key),C.return=b,b=C):(R=Y0(E.type,E.key,E.props,null,b.mode,R),R.ref=Pg(b,C,E),R.return=b,b=R)}return i(b);case tp:e:{for(O=E.key;C!==null;){if(C.key===O)if(C.tag===4&&C.stateNode.containerInfo===E.containerInfo&&C.stateNode.implementation===E.implementation){n(b,C.sibling),C=o(C,E.children||[]),C.return=b,b=C;break e}else{n(b,C);break}else e(b,C);C=C.sibling}C=ck(E,b.mode,R),C.return=b,b=C}return i(b);case Xc:return O=E._init,x(b,C,O(E._payload),R)}if(Zg(E))return m(b,C,E,R);if(Tg(E))return y(b,C,E,R);Uw(b,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,C!==null&&C.tag===6?(n(b,C.sibling),C=o(C,E),C.return=b,b=C):(n(b,C),C=lk(E,b.mode,R),C.return=b,b=C),i(b)):n(b,C)}return x}var Kp=LV(!0),jV=LV(!1),Hb=rd(null),zb=null,up=null,yA=null;function vA(){yA=up=zb=null}function wA(t){var e=Hb.current;Sn(Hb),t._currentValue=e}function YT(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function xp(t,e){zb=t,yA=up=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(qo=!0),t.firstContext=null)}function fi(t){var e=t._currentValue;if(yA!==t)if(t={context:t,memoizedValue:e,next:null},up===null){if(zb===null)throw Error(Me(308));up=t,zb.dependencies={lanes:0,firstContext:t}}else up=up.next=t;return e}var Kd=null;function bA(t){Kd===null?Kd=[t]:Kd.push(t)}function VV(t,e,n,r){var o=e.interleaved;return o===null?(n.next=n,bA(e)):(n.next=o.next,o.next=n),e.interleaved=n,fc(t,r)}function fc(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Jc=!1;function xA(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $V(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zl(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Cu(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,$t&2){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,fc(t,n)}return o=r.interleaved,o===null?(e.next=e,bA(r)):(e.next=o.next,o.next=e),r.interleaved=e,fc(t,n)}function H0(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,iA(t,n)}}function r9(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?o=s=e:s=s.next=e}else o=s=e;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Wb(t,e,n,r){var o=t.updateQueue;Jc=!1;var s=o.firstBaseUpdate,i=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var l=a,c=l.next;l.next=null,i===null?s=c:i.next=c,i=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==i&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=o.baseState;i=0,u=c=l=null,a=s;do{var h=a.lane,p=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,y=a;switch(h=e,p=n,y.tag){case 1:if(m=y.payload,typeof m=="function"){f=m.call(p,f,h);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,h=typeof m=="function"?m.call(p,f,h):m,h==null)break e;f=$n({},f,h);break e;case 2:Jc=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=o.effects,h===null?o.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=f):u=u.next=p,i|=h;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;h=a,a=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(!0);if(u===null&&(l=f),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,e=o.shared.interleaved,e!==null){o=e;do i|=o.lane,o=o.next;while(o!==e)}else s===null&&(o.shared.lanes=0);bf|=i,t.lanes=i,t.memoizedState=f}}function o9(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(Me(191,o));o.call(r)}}}var dv={},Ua=rd(dv),i1=rd(dv),a1=rd(dv);function Yd(t){if(t===dv)throw Error(Me(174));return t}function _A(t,e){switch(vn(a1,e),vn(i1,t),vn(Ua,dv),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:IT(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=IT(e,t)}Sn(Ua),vn(Ua,e)}function Yp(){Sn(Ua),Sn(i1),Sn(a1)}function BV(t){Yd(a1.current);var e=Yd(Ua.current),n=IT(e,t.type);e!==n&&(vn(i1,t),vn(Ua,n))}function CA(t){i1.current===t&&(Sn(Ua),Sn(i1))}var On=rd(0);function Gb(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var nk=[];function EA(){for(var t=0;t<nk.length;t++)nk[t]._workInProgressVersionPrimary=null;nk.length=0}var z0=kc.ReactCurrentDispatcher,rk=kc.ReactCurrentBatchConfig,wf=0,Vn=null,gr=null,Ar=null,qb=!1,_y=!1,l1=0,qne=0;function Zr(){throw Error(Me(321))}function kA(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Qi(t[n],e[n]))return!1;return!0}function SA(t,e,n,r,o,s){if(wf=s,Vn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,z0.current=t===null||t.memoizedState===null?Xne:Jne,t=n(r,o),_y){s=0;do{if(_y=!1,l1=0,25<=s)throw Error(Me(301));s+=1,Ar=gr=null,e.updateQueue=null,z0.current=Zne,t=n(r,o)}while(_y)}if(z0.current=Kb,e=gr!==null&&gr.next!==null,wf=0,Ar=gr=Vn=null,qb=!1,e)throw Error(Me(300));return t}function TA(){var t=l1!==0;return l1=0,t}function Na(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ar===null?Vn.memoizedState=Ar=t:Ar=Ar.next=t,Ar}function hi(){if(gr===null){var t=Vn.alternate;t=t!==null?t.memoizedState:null}else t=gr.next;var e=Ar===null?Vn.memoizedState:Ar.next;if(e!==null)Ar=e,gr=t;else{if(t===null)throw Error(Me(310));gr=t,t={memoizedState:gr.memoizedState,baseState:gr.baseState,baseQueue:gr.baseQueue,queue:gr.queue,next:null},Ar===null?Vn.memoizedState=Ar=t:Ar=Ar.next=t}return Ar}function c1(t,e){return typeof e=="function"?e(t):e}function ok(t){var e=hi(),n=e.queue;if(n===null)throw Error(Me(311));n.lastRenderedReducer=t;var r=gr,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var i=o.next;o.next=s.next,s.next=i}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var a=i=null,l=null,c=s;do{var u=c.lane;if((wf&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,i=r):l=l.next=f,Vn.lanes|=u,bf|=u}c=c.next}while(c!==null&&c!==s);l===null?i=r:l.next=a,Qi(r,e.memoizedState)||(qo=!0),e.memoizedState=r,e.baseState=i,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){o=t;do s=o.lane,Vn.lanes|=s,bf|=s,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function sk(t){var e=hi(),n=e.queue;if(n===null)throw Error(Me(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,s=e.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do s=t(s,i.action),i=i.next;while(i!==o);Qi(s,e.memoizedState)||(qo=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function FV(){}function UV(t,e){var n=Vn,r=hi(),o=e(),s=!Qi(r.memoizedState,o);if(s&&(r.memoizedState=o,qo=!0),r=r.queue,NA(WV.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ar!==null&&Ar.memoizedState.tag&1){if(n.flags|=2048,u1(9,zV.bind(null,n,r,o,e),void 0,null),Dr===null)throw Error(Me(349));wf&30||HV(n,e,o)}return o}function HV(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Vn.updateQueue,e===null?(e={lastEffect:null,stores:null},Vn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function zV(t,e,n,r){e.value=n,e.getSnapshot=r,GV(e)&&qV(t)}function WV(t,e,n){return n(function(){GV(e)&&qV(t)})}function GV(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Qi(t,n)}catch{return!0}}function qV(t){var e=fc(t,1);e!==null&&qi(e,t,1,-1)}function s9(t){var e=Na();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c1,lastRenderedState:t},e.queue=t,t=t.dispatch=Qne.bind(null,Vn,t),[e.memoizedState,t]}function u1(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Vn.updateQueue,e===null?(e={lastEffect:null,stores:null},Vn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function KV(){return hi().memoizedState}function W0(t,e,n,r){var o=Na();Vn.flags|=t,o.memoizedState=u1(1|e,n,void 0,r===void 0?null:r)}function cC(t,e,n,r){var o=hi();r=r===void 0?null:r;var s=void 0;if(gr!==null){var i=gr.memoizedState;if(s=i.destroy,r!==null&&kA(r,i.deps)){o.memoizedState=u1(e,n,s,r);return}}Vn.flags|=t,o.memoizedState=u1(1|e,n,s,r)}function i9(t,e){return W0(8390656,8,t,e)}function NA(t,e){return cC(2048,8,t,e)}function YV(t,e){return cC(4,2,t,e)}function QV(t,e){return cC(4,4,t,e)}function XV(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function JV(t,e,n){return n=n!=null?n.concat([t]):null,cC(4,4,XV.bind(null,e,t),n)}function IA(){}function ZV(t,e){var n=hi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kA(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function e$(t,e){var n=hi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kA(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function t$(t,e,n){return wf&21?(Qi(n,e)||(n=iV(),Vn.lanes|=n,bf|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,qo=!0),t.memoizedState=n)}function Kne(t,e){var n=nn;nn=n!==0&&4>n?n:4,t(!0);var r=rk.transition;rk.transition={};try{t(!1),e()}finally{nn=n,rk.transition=r}}function n$(){return hi().memoizedState}function Yne(t,e,n){var r=ku(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},r$(t))o$(e,n);else if(n=VV(t,e,n,r),n!==null){var o=Io();qi(n,t,r,o),s$(n,e,r)}}function Qne(t,e,n){var r=ku(t),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(r$(t))o$(e,o);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var i=e.lastRenderedState,a=s(i,n);if(o.hasEagerState=!0,o.eagerState=a,Qi(a,i)){var l=e.interleaved;l===null?(o.next=o,bA(e)):(o.next=l.next,l.next=o),e.interleaved=o;return}}catch{}finally{}n=VV(t,e,o,r),n!==null&&(o=Io(),qi(n,t,r,o),s$(n,e,r))}}function r$(t){var e=t.alternate;return t===Vn||e!==null&&e===Vn}function o$(t,e){_y=qb=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function s$(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,iA(t,n)}}var Kb={readContext:fi,useCallback:Zr,useContext:Zr,useEffect:Zr,useImperativeHandle:Zr,useInsertionEffect:Zr,useLayoutEffect:Zr,useMemo:Zr,useReducer:Zr,useRef:Zr,useState:Zr,useDebugValue:Zr,useDeferredValue:Zr,useTransition:Zr,useMutableSource:Zr,useSyncExternalStore:Zr,useId:Zr,unstable_isNewReconciler:!1},Xne={readContext:fi,useCallback:function(t,e){return Na().memoizedState=[t,e===void 0?null:e],t},useContext:fi,useEffect:i9,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,W0(4194308,4,XV.bind(null,e,t),n)},useLayoutEffect:function(t,e){return W0(4194308,4,t,e)},useInsertionEffect:function(t,e){return W0(4,2,t,e)},useMemo:function(t,e){var n=Na();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Na();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Yne.bind(null,Vn,t),[r.memoizedState,t]},useRef:function(t){var e=Na();return t={current:t},e.memoizedState=t},useState:s9,useDebugValue:IA,useDeferredValue:function(t){return Na().memoizedState=t},useTransition:function(){var t=s9(!1),e=t[0];return t=Kne.bind(null,t[1]),Na().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Vn,o=Na();if(An){if(n===void 0)throw Error(Me(407));n=n()}else{if(n=e(),Dr===null)throw Error(Me(349));wf&30||HV(r,e,n)}o.memoizedState=n;var s={value:n,getSnapshot:e};return o.queue=s,i9(WV.bind(null,r,s,t),[t]),r.flags|=2048,u1(9,zV.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Na(),e=Dr.identifierPrefix;if(An){var n=Wl,r=zl;n=(r&~(1<<32-Gi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=l1++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=qne++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Jne={readContext:fi,useCallback:ZV,useContext:fi,useEffect:NA,useImperativeHandle:JV,useInsertionEffect:YV,useLayoutEffect:QV,useMemo:e$,useReducer:ok,useRef:KV,useState:function(){return ok(c1)},useDebugValue:IA,useDeferredValue:function(t){var e=hi();return t$(e,gr.memoizedState,t)},useTransition:function(){var t=ok(c1)[0],e=hi().memoizedState;return[t,e]},useMutableSource:FV,useSyncExternalStore:UV,useId:n$,unstable_isNewReconciler:!1},Zne={readContext:fi,useCallback:ZV,useContext:fi,useEffect:NA,useImperativeHandle:JV,useInsertionEffect:YV,useLayoutEffect:QV,useMemo:e$,useReducer:sk,useRef:KV,useState:function(){return sk(c1)},useDebugValue:IA,useDeferredValue:function(t){var e=hi();return gr===null?e.memoizedState=t:t$(e,gr.memoizedState,t)},useTransition:function(){var t=sk(c1)[0],e=hi().memoizedState;return[t,e]},useMutableSource:FV,useSyncExternalStore:UV,useId:n$,unstable_isNewReconciler:!1};function $i(t,e){if(t&&t.defaultProps){e=$n({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function QT(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:$n({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var uC={isMounted:function(t){return(t=t._reactInternals)?Gf(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Io(),o=ku(t),s=Zl(r,o);s.payload=e,n!=null&&(s.callback=n),e=Cu(t,s,o),e!==null&&(qi(e,t,o,r),H0(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Io(),o=ku(t),s=Zl(r,o);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Cu(t,s,o),e!==null&&(qi(e,t,o,r),H0(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Io(),r=ku(t),o=Zl(n,r);o.tag=2,e!=null&&(o.callback=e),e=Cu(t,o,r),e!==null&&(qi(e,t,r,n),H0(e,t,r))}};function a9(t,e,n,r,o,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,i):e.prototype&&e.prototype.isPureReactComponent?!n1(n,r)||!n1(o,s):!0}function i$(t,e,n){var r=!1,o=Bu,s=e.contextType;return typeof s=="object"&&s!==null?s=fi(s):(o=Yo(e)?yf:go.current,r=e.contextTypes,s=(r=r!=null)?Gp(t,o):Bu),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uC,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=s),e}function l9(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&uC.enqueueReplaceState(e,e.state,null)}function XT(t,e,n,r){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},xA(t);var s=e.contextType;typeof s=="object"&&s!==null?o.context=fi(s):(s=Yo(e)?yf:go.current,o.context=Gp(t,s)),o.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(QT(t,e,s,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&uC.enqueueReplaceState(o,o.state,null),Wb(t,n,o,r),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function Qp(t,e){try{var n="",r=e;do n+=Tte(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:o,digest:null}}function ik(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function JT(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ere=typeof WeakMap=="function"?WeakMap:Map;function a$(t,e,n){n=Zl(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Qb||(Qb=!0,lN=r),JT(t,e)},n}function l$(t,e,n){n=Zl(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;n.payload=function(){return r(o)},n.callback=function(){JT(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){JT(t,e),typeof r!="function"&&(Eu===null?Eu=new Set([this]):Eu.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),n}function c9(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ere;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(n)||(o.add(n),t=pre.bind(null,t,e,n),e.then(t,t))}function u9(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function d9(t,e,n,r,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zl(-1,1),e.tag=2,Cu(n,e,1))),n.lanes|=1),t)}var tre=kc.ReactCurrentOwner,qo=!1;function Eo(t,e,n,r){e.child=t===null?jV(e,null,n,r):Kp(e,t.child,n,r)}function f9(t,e,n,r,o){n=n.render;var s=e.ref;return xp(e,o),r=SA(t,e,n,r,s,o),n=TA(),t!==null&&!qo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,hc(t,e,o)):(An&&n&&pA(e),e.flags|=1,Eo(t,e,r,o),e.child)}function h9(t,e,n,r,o){if(t===null){var s=n.type;return typeof s=="function"&&!jA(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,c$(t,e,s,r,o)):(t=Y0(n.type,null,r,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&o)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:n1,n(i,r)&&t.ref===e.ref)return hc(t,e,o)}return e.flags|=1,t=Su(s,r),t.ref=e.ref,t.return=e,e.child=t}function c$(t,e,n,r,o){if(t!==null){var s=t.memoizedProps;if(n1(s,r)&&t.ref===e.ref)if(qo=!1,e.pendingProps=r=s,(t.lanes&o)!==0)t.flags&131072&&(qo=!0);else return e.lanes=t.lanes,hc(t,e,o)}return ZT(t,e,n,r,o)}function u$(t,e,n){var r=e.pendingProps,o=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},vn(fp,ps),ps|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,vn(fp,ps),ps|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,vn(fp,ps),ps|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,vn(fp,ps),ps|=r;return Eo(t,e,o,n),e.child}function d$(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ZT(t,e,n,r,o){var s=Yo(n)?yf:go.current;return s=Gp(e,s),xp(e,o),n=SA(t,e,n,r,s,o),r=TA(),t!==null&&!qo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,hc(t,e,o)):(An&&r&&pA(e),e.flags|=1,Eo(t,e,n,o),e.child)}function p9(t,e,n,r,o){if(Yo(n)){var s=!0;Bb(e)}else s=!1;if(xp(e,o),e.stateNode===null)G0(t,e),i$(e,n,r),XT(e,n,r,o),r=!0;else if(t===null){var i=e.stateNode,a=e.memoizedProps;i.props=a;var l=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=fi(c):(c=Yo(n)?yf:go.current,c=Gp(e,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||l!==c)&&l9(e,i,r,c),Jc=!1;var h=e.memoizedState;i.state=h,Wb(e,r,i,o),l=e.memoizedState,a!==r||h!==l||Ko.current||Jc?(typeof u=="function"&&(QT(e,n,u,r),l=e.memoizedState),(a=Jc||a9(e,n,a,r,h,l,c))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),i.props=r,i.state=l,i.context=c,r=a):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{i=e.stateNode,$V(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:$i(e.type,a),i.props=c,f=e.pendingProps,h=i.context,l=n.contextType,typeof l=="object"&&l!==null?l=fi(l):(l=Yo(n)?yf:go.current,l=Gp(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==f||h!==l)&&l9(e,i,r,l),Jc=!1,h=e.memoizedState,i.state=h,Wb(e,r,i,o);var m=e.memoizedState;a!==f||h!==m||Ko.current||Jc?(typeof p=="function"&&(QT(e,n,p,r),m=e.memoizedState),(c=Jc||a9(e,n,c,r,h,m,l)||!1)?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,m,l),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,m,l)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),i.props=r,i.state=m,i.context=l,r=c):(typeof i.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return eN(t,e,n,r,s,o)}function eN(t,e,n,r,o,s){d$(t,e);var i=(e.flags&128)!==0;if(!r&&!i)return o&&ZM(e,n,!1),hc(t,e,s);r=e.stateNode,tre.current=e;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&i?(e.child=Kp(e,t.child,null,s),e.child=Kp(e,null,a,s)):Eo(t,e,a,s),e.memoizedState=r.state,o&&ZM(e,n,!0),e.child}function f$(t){var e=t.stateNode;e.pendingContext?JM(t,e.pendingContext,e.pendingContext!==e.context):e.context&&JM(t,e.context,!1),_A(t,e.containerInfo)}function m9(t,e,n,r,o){return qp(),gA(o),e.flags|=256,Eo(t,e,n,r),e.child}var tN={dehydrated:null,treeContext:null,retryLane:0};function nN(t){return{baseLanes:t,cachePool:null,transitions:null}}function h$(t,e,n){var r=e.pendingProps,o=On.current,s=!1,i=(e.flags&128)!==0,a;if((a=i)||(a=t!==null&&t.memoizedState===null?!1:(o&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),vn(On,o&1),t===null)return KT(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(i=r.children,t=r.fallback,s?(r=e.mode,s=e.child,i={mode:"hidden",children:i},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=i):s=hC(i,r,0,null),t=cf(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=nN(n),e.memoizedState=tN,t):RA(e,i));if(o=t.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return nre(t,e,i,r,a,o,n);if(s){s=r.fallback,i=e.mode,o=t.child,a=o.sibling;var l={mode:"hidden",children:r.children};return!(i&1)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Su(o,l),r.subtreeFlags=o.subtreeFlags&14680064),a!==null?s=Su(a,s):(s=cf(s,i,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,i=t.child.memoizedState,i=i===null?nN(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},s.memoizedState=i,s.childLanes=t.childLanes&~n,e.memoizedState=tN,r}return s=t.child,t=s.sibling,r=Su(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function RA(t,e){return e=hC({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Hw(t,e,n,r){return r!==null&&gA(r),Kp(e,t.child,null,n),t=RA(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function nre(t,e,n,r,o,s,i){if(n)return e.flags&256?(e.flags&=-257,r=ik(Error(Me(422))),Hw(t,e,i,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,o=e.mode,r=hC({mode:"visible",children:r.children},o,0,null),s=cf(s,o,i,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Kp(e,t.child,null,i),e.child.memoizedState=nN(i),e.memoizedState=tN,s);if(!(e.mode&1))return Hw(t,e,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Me(419)),r=ik(s,r,void 0),Hw(t,e,i,r)}if(a=(i&t.childLanes)!==0,qo||a){if(r=Dr,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==s.retryLane&&(s.retryLane=o,fc(t,o),qi(r,t,o,-1))}return LA(),r=ik(Error(Me(421))),Hw(t,e,i,r)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=mre.bind(null,t),o._reactRetry=e,null):(t=s.treeContext,ys=_u(o.nextSibling),bs=e,An=!0,Fi=null,t!==null&&(Js[Zs++]=zl,Js[Zs++]=Wl,Js[Zs++]=vf,zl=t.id,Wl=t.overflow,vf=e),e=RA(e,r.children),e.flags|=4096,e)}function g9(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),YT(t.return,e,n)}function ak(t,e,n,r,o){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function p$(t,e,n){var r=e.pendingProps,o=r.revealOrder,s=r.tail;if(Eo(t,e,r.children,n),r=On.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&g9(t,n,e);else if(t.tag===19)g9(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(vn(On,r),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&Gb(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),ak(e,!1,o,n,s);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&Gb(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}ak(e,!0,n,null,s);break;case"together":ak(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function G0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function hc(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),bf|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Me(153));if(e.child!==null){for(t=e.child,n=Su(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Su(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function rre(t,e,n){switch(e.tag){case 3:f$(e),qp();break;case 5:BV(e);break;case 1:Yo(e.type)&&Bb(e);break;case 4:_A(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;vn(Hb,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(vn(On,On.current&1),e.flags|=128,null):n&e.child.childLanes?h$(t,e,n):(vn(On,On.current&1),t=hc(t,e,n),t!==null?t.sibling:null);vn(On,On.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return p$(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),vn(On,On.current),r)break;return null;case 22:case 23:return e.lanes=0,u$(t,e,n)}return hc(t,e,n)}var m$,rN,g$,y$;m$=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rN=function(){};g$=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,Yd(Ua.current);var s=null;switch(n){case"input":o=kT(t,o),r=kT(t,r),s=[];break;case"select":o=$n({},o,{value:void 0}),r=$n({},r,{value:void 0}),s=[];break;case"textarea":o=NT(t,o),r=NT(t,r),s=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Vb)}RT(n,r);var i;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var a=o[c];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Yy.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(i in a)!a.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&a[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Yy.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&_n("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};y$=function(t,e,n,r){n!==r&&(e.flags|=4)};function Mg(t,e){if(!An)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function eo(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ore(t,e,n){var r=e.pendingProps;switch(mA(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return eo(e),null;case 1:return Yo(e.type)&&$b(),eo(e),null;case 3:return r=e.stateNode,Yp(),Sn(Ko),Sn(go),EA(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Fw(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Fi!==null&&(dN(Fi),Fi=null))),rN(t,e),eo(e),null;case 5:CA(e);var o=Yd(a1.current);if(n=e.type,t!==null&&e.stateNode!=null)g$(t,e,n,r,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Me(166));return eo(e),null}if(t=Yd(Ua.current),Fw(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Da]=e,r[s1]=s,t=(e.mode&1)!==0,n){case"dialog":_n("cancel",r),_n("close",r);break;case"iframe":case"object":case"embed":_n("load",r);break;case"video":case"audio":for(o=0;o<ty.length;o++)_n(ty[o],r);break;case"source":_n("error",r);break;case"img":case"image":case"link":_n("error",r),_n("load",r);break;case"details":_n("toggle",r);break;case"input":kM(r,s),_n("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},_n("invalid",r);break;case"textarea":TM(r,s),_n("invalid",r)}RT(n,s),o=null;for(var i in s)if(s.hasOwnProperty(i)){var a=s[i];i==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Bw(r.textContent,a,t),o=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Bw(r.textContent,a,t),o=["children",""+a]):Yy.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&_n("scroll",r)}switch(n){case"input":Pw(r),SM(r,s,!0);break;case"textarea":Pw(r),NM(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Vb)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=W7(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[Da]=e,t[s1]=r,m$(t,e,!1,!1),e.stateNode=t;e:{switch(i=AT(n,r),n){case"dialog":_n("cancel",t),_n("close",t),o=r;break;case"iframe":case"object":case"embed":_n("load",t),o=r;break;case"video":case"audio":for(o=0;o<ty.length;o++)_n(ty[o],t);o=r;break;case"source":_n("error",t),o=r;break;case"img":case"image":case"link":_n("error",t),_n("load",t),o=r;break;case"details":_n("toggle",t),o=r;break;case"input":kM(t,r),o=kT(t,r),_n("invalid",t);break;case"option":o=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=$n({},r,{value:void 0}),_n("invalid",t);break;case"textarea":TM(t,r),o=NT(t,r),_n("invalid",t);break;default:o=r}RT(n,o),a=o;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?K7(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&G7(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Qy(t,l):typeof l=="number"&&Qy(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Yy.hasOwnProperty(s)?l!=null&&s==="onScroll"&&_n("scroll",t):l!=null&&eA(t,s,l,i))}switch(n){case"input":Pw(t),SM(t,r,!1);break;case"textarea":Pw(t),NM(t);break;case"option":r.value!=null&&t.setAttribute("value",""+$u(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?yp(t,!!r.multiple,s,!1):r.defaultValue!=null&&yp(t,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=Vb)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return eo(e),null;case 6:if(t&&e.stateNode!=null)y$(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Me(166));if(n=Yd(a1.current),Yd(Ua.current),Fw(e)){if(r=e.stateNode,n=e.memoizedProps,r[Da]=e,(s=r.nodeValue!==n)&&(t=bs,t!==null))switch(t.tag){case 3:Bw(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Bw(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Da]=e,e.stateNode=r}return eo(e),null;case 13:if(Sn(On),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(An&&ys!==null&&e.mode&1&&!(e.flags&128))OV(),qp(),e.flags|=98560,s=!1;else if(s=Fw(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Me(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Me(317));s[Da]=e}else qp(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;eo(e),s=!1}else Fi!==null&&(dN(Fi),Fi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||On.current&1?wr===0&&(wr=3):LA())),e.updateQueue!==null&&(e.flags|=4),eo(e),null);case 4:return Yp(),rN(t,e),t===null&&r1(e.stateNode.containerInfo),eo(e),null;case 10:return wA(e.type._context),eo(e),null;case 17:return Yo(e.type)&&$b(),eo(e),null;case 19:if(Sn(On),s=e.memoizedState,s===null)return eo(e),null;if(r=(e.flags&128)!==0,i=s.rendering,i===null)if(r)Mg(s,!1);else{if(wr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(i=Gb(t),i!==null){for(e.flags|=128,Mg(s,!1),r=i.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,i=s.alternate,i===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,t=i.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return vn(On,On.current&1|2),e.child}t=t.sibling}s.tail!==null&&Qn()>Xp&&(e.flags|=128,r=!0,Mg(s,!1),e.lanes=4194304)}else{if(!r)if(t=Gb(i),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Mg(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!An)return eo(e),null}else 2*Qn()-s.renderingStartTime>Xp&&n!==1073741824&&(e.flags|=128,r=!0,Mg(s,!1),e.lanes=4194304);s.isBackwards?(i.sibling=e.child,e.child=i):(n=s.last,n!==null?n.sibling=i:e.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Qn(),e.sibling=null,n=On.current,vn(On,r?n&1|2:n&1),e):(eo(e),null);case 22:case 23:return OA(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ps&1073741824&&(eo(e),e.subtreeFlags&6&&(e.flags|=8192)):eo(e),null;case 24:return null;case 25:return null}throw Error(Me(156,e.tag))}function sre(t,e){switch(mA(e),e.tag){case 1:return Yo(e.type)&&$b(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Yp(),Sn(Ko),Sn(go),EA(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return CA(e),null;case 13:if(Sn(On),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Me(340));qp()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Sn(On),null;case 4:return Yp(),null;case 10:return wA(e.type._context),null;case 22:case 23:return OA(),null;case 24:return null;default:return null}}var zw=!1,io=!1,ire=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function dp(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Hn(t,e,r)}else n.current=null}function oN(t,e,n){try{n()}catch(r){Hn(t,e,r)}}var y9=!1;function are(t,e){if(FT=Ob,t=_V(),hA(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,a=-1,l=-1,c=0,u=0,f=t,h=null;t:for(;;){for(var p;f!==n||o!==0&&f.nodeType!==3||(a=i+o),f!==s||r!==0&&f.nodeType!==3||(l=i+r),f.nodeType===3&&(i+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===t)break t;if(h===n&&++c===o&&(a=i),h===s&&++u===r&&(l=i),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(UT={focusedElem:t,selectionRange:n},Ob=!1,Ke=e;Ke!==null;)if(e=Ke,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ke=t;else for(;Ke!==null;){e=Ke;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,x=m.memoizedState,b=e.stateNode,C=b.getSnapshotBeforeUpdate(e.elementType===e.type?y:$i(e.type,y),x);b.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Me(163))}}catch(R){Hn(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,Ke=t;break}Ke=e.return}return m=y9,y9=!1,m}function Cy(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var s=o.destroy;o.destroy=void 0,s!==void 0&&oN(e,n,s)}o=o.next}while(o!==r)}}function dC(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function sN(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function v$(t){var e=t.alternate;e!==null&&(t.alternate=null,v$(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Da],delete e[s1],delete e[WT],delete e[Hne],delete e[zne])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function w$(t){return t.tag===5||t.tag===3||t.tag===4}function v9(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||w$(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function iN(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Vb));else if(r!==4&&(t=t.child,t!==null))for(iN(t,e,n),t=t.sibling;t!==null;)iN(t,e,n),t=t.sibling}function aN(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(aN(t,e,n),t=t.sibling;t!==null;)aN(t,e,n),t=t.sibling}var Br=null,Bi=!1;function Fc(t,e,n){for(n=n.child;n!==null;)b$(t,e,n),n=n.sibling}function b$(t,e,n){if(Fa&&typeof Fa.onCommitFiberUnmount=="function")try{Fa.onCommitFiberUnmount(rC,n)}catch{}switch(n.tag){case 5:io||dp(n,e);case 6:var r=Br,o=Bi;Br=null,Fc(t,e,n),Br=r,Bi=o,Br!==null&&(Bi?(t=Br,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Br.removeChild(n.stateNode));break;case 18:Br!==null&&(Bi?(t=Br,n=n.stateNode,t.nodeType===8?ek(t.parentNode,n):t.nodeType===1&&ek(t,n),e1(t)):ek(Br,n.stateNode));break;case 4:r=Br,o=Bi,Br=n.stateNode.containerInfo,Bi=!0,Fc(t,e,n),Br=r,Bi=o;break;case 0:case 11:case 14:case 15:if(!io&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var s=o,i=s.destroy;s=s.tag,i!==void 0&&(s&2||s&4)&&oN(n,e,i),o=o.next}while(o!==r)}Fc(t,e,n);break;case 1:if(!io&&(dp(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Hn(n,e,a)}Fc(t,e,n);break;case 21:Fc(t,e,n);break;case 22:n.mode&1?(io=(r=io)||n.memoizedState!==null,Fc(t,e,n),io=r):Fc(t,e,n);break;default:Fc(t,e,n)}}function w9(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ire),e.forEach(function(r){var o=gre.bind(null,t,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Li(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=t,i=e,a=i;e:for(;a!==null;){switch(a.tag){case 5:Br=a.stateNode,Bi=!1;break e;case 3:Br=a.stateNode.containerInfo,Bi=!0;break e;case 4:Br=a.stateNode.containerInfo,Bi=!0;break e}a=a.return}if(Br===null)throw Error(Me(160));b$(s,i,o),Br=null,Bi=!1;var l=o.alternate;l!==null&&(l.return=null),o.return=null}catch(c){Hn(o,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)x$(e,t),e=e.sibling}function x$(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Li(e,t),Ea(t),r&4){try{Cy(3,t,t.return),dC(3,t)}catch(y){Hn(t,t.return,y)}try{Cy(5,t,t.return)}catch(y){Hn(t,t.return,y)}}break;case 1:Li(e,t),Ea(t),r&512&&n!==null&&dp(n,n.return);break;case 5:if(Li(e,t),Ea(t),r&512&&n!==null&&dp(n,n.return),t.flags&32){var o=t.stateNode;try{Qy(o,"")}catch(y){Hn(t,t.return,y)}}if(r&4&&(o=t.stateNode,o!=null)){var s=t.memoizedProps,i=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&H7(o,s),AT(a,i);var c=AT(a,s);for(i=0;i<l.length;i+=2){var u=l[i],f=l[i+1];u==="style"?K7(o,f):u==="dangerouslySetInnerHTML"?G7(o,f):u==="children"?Qy(o,f):eA(o,u,f,c)}switch(a){case"input":ST(o,s);break;case"textarea":z7(o,s);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?yp(o,!!s.multiple,p,!1):h!==!!s.multiple&&(s.defaultValue!=null?yp(o,!!s.multiple,s.defaultValue,!0):yp(o,!!s.multiple,s.multiple?[]:"",!1))}o[s1]=s}catch(y){Hn(t,t.return,y)}}break;case 6:if(Li(e,t),Ea(t),r&4){if(t.stateNode===null)throw Error(Me(162));o=t.stateNode,s=t.memoizedProps;try{o.nodeValue=s}catch(y){Hn(t,t.return,y)}}break;case 3:if(Li(e,t),Ea(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{e1(e.containerInfo)}catch(y){Hn(t,t.return,y)}break;case 4:Li(e,t),Ea(t);break;case 13:Li(e,t),Ea(t),o=t.child,o.flags&8192&&(s=o.memoizedState!==null,o.stateNode.isHidden=s,!s||o.alternate!==null&&o.alternate.memoizedState!==null||(MA=Qn())),r&4&&w9(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(io=(c=io)||u,Li(e,t),io=c):Li(e,t),Ea(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Ke=t,u=t.child;u!==null;){for(f=Ke=u;Ke!==null;){switch(h=Ke,p=h.child,h.tag){case 0:case 11:case 14:case 15:Cy(4,h,h.return);break;case 1:dp(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){Hn(r,n,y)}}break;case 5:dp(h,h.return);break;case 22:if(h.memoizedState!==null){x9(f);continue}}p!==null?(p.return=h,Ke=p):x9(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{o=f.stateNode,c?(s=o.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,i=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=q7("display",i))}catch(y){Hn(t,t.return,y)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(y){Hn(t,t.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Li(e,t),Ea(t),r&4&&w9(t);break;case 21:break;default:Li(e,t),Ea(t)}}function Ea(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(w$(n)){var r=n;break e}n=n.return}throw Error(Me(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Qy(o,""),r.flags&=-33);var s=v9(t);aN(t,s,o);break;case 3:case 4:var i=r.stateNode.containerInfo,a=v9(t);iN(t,a,i);break;default:throw Error(Me(161))}}catch(l){Hn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function lre(t,e,n){Ke=t,_$(t)}function _$(t,e,n){for(var r=(t.mode&1)!==0;Ke!==null;){var o=Ke,s=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||zw;if(!i){var a=o.alternate,l=a!==null&&a.memoizedState!==null||io;a=zw;var c=io;if(zw=i,(io=l)&&!c)for(Ke=o;Ke!==null;)i=Ke,l=i.child,i.tag===22&&i.memoizedState!==null?_9(o):l!==null?(l.return=i,Ke=l):_9(o);for(;s!==null;)Ke=s,_$(s),s=s.sibling;Ke=o,zw=a,io=c}b9(t)}else o.subtreeFlags&8772&&s!==null?(s.return=o,Ke=s):b9(t)}}function b9(t){for(;Ke!==null;){var e=Ke;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:io||dC(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!io)if(n===null)r.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:$i(e.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&o9(e,s,r);break;case 3:var i=e.updateQueue;if(i!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}o9(e,i,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&e1(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Me(163))}io||e.flags&512&&sN(e)}catch(h){Hn(e,e.return,h)}}if(e===t){Ke=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ke=n;break}Ke=e.return}}function x9(t){for(;Ke!==null;){var e=Ke;if(e===t){Ke=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ke=n;break}Ke=e.return}}function _9(t){for(;Ke!==null;){var e=Ke;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{dC(4,e)}catch(l){Hn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(l){Hn(e,o,l)}}var s=e.return;try{sN(e)}catch(l){Hn(e,s,l)}break;case 5:var i=e.return;try{sN(e)}catch(l){Hn(e,i,l)}}}catch(l){Hn(e,e.return,l)}if(e===t){Ke=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ke=a;break}Ke=e.return}}var cre=Math.ceil,Yb=kc.ReactCurrentDispatcher,AA=kc.ReactCurrentOwner,si=kc.ReactCurrentBatchConfig,$t=0,Dr=null,ar=null,Gr=0,ps=0,fp=rd(0),wr=0,d1=null,bf=0,fC=0,PA=0,Ey=null,Ho=null,MA=0,Xp=1/0,Vl=null,Qb=!1,lN=null,Eu=null,Ww=!1,fu=null,Xb=0,ky=0,cN=null,q0=-1,K0=0;function Io(){return $t&6?Qn():q0!==-1?q0:q0=Qn()}function ku(t){return t.mode&1?$t&2&&Gr!==0?Gr&-Gr:Gne.transition!==null?(K0===0&&(K0=iV()),K0):(t=nn,t!==0||(t=window.event,t=t===void 0?16:hV(t.type)),t):1}function qi(t,e,n,r){if(50<ky)throw ky=0,cN=null,Error(Me(185));lv(t,n,r),(!($t&2)||t!==Dr)&&(t===Dr&&(!($t&2)&&(fC|=n),wr===4&&ou(t,Gr)),Qo(t,r),n===1&&$t===0&&!(e.mode&1)&&(Xp=Qn()+500,lC&&od()))}function Qo(t,e){var n=t.callbackNode;Gte(t,e);var r=Db(t,t===Dr?Gr:0);if(r===0)n!==null&&AM(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&AM(n),e===1)t.tag===0?Wne(C9.bind(null,t)):PV(C9.bind(null,t)),Fne(function(){!($t&6)&&od()}),n=null;else{switch(aV(r)){case 1:n=sA;break;case 4:n=oV;break;case 16:n=Mb;break;case 536870912:n=sV;break;default:n=Mb}n=R$(n,C$.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function C$(t,e){if(q0=-1,K0=0,$t&6)throw Error(Me(327));var n=t.callbackNode;if(_p()&&t.callbackNode!==n)return null;var r=Db(t,t===Dr?Gr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Jb(t,r);else{e=r;var o=$t;$t|=2;var s=k$();(Dr!==t||Gr!==e)&&(Vl=null,Xp=Qn()+500,lf(t,e));do try{fre();break}catch(a){E$(t,a)}while(!0);vA(),Yb.current=s,$t=o,ar!==null?e=0:(Dr=null,Gr=0,e=wr)}if(e!==0){if(e===2&&(o=LT(t),o!==0&&(r=o,e=uN(t,o))),e===1)throw n=d1,lf(t,0),ou(t,r),Qo(t,Qn()),n;if(e===6)ou(t,r);else{if(o=t.current.alternate,!(r&30)&&!ure(o)&&(e=Jb(t,r),e===2&&(s=LT(t),s!==0&&(r=s,e=uN(t,s))),e===1))throw n=d1,lf(t,0),ou(t,r),Qo(t,Qn()),n;switch(t.finishedWork=o,t.finishedLanes=r,e){case 0:case 1:throw Error(Me(345));case 2:$d(t,Ho,Vl);break;case 3:if(ou(t,r),(r&130023424)===r&&(e=MA+500-Qn(),10<e)){if(Db(t,0)!==0)break;if(o=t.suspendedLanes,(o&r)!==r){Io(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=zT($d.bind(null,t,Ho,Vl),e);break}$d(t,Ho,Vl);break;case 4:if(ou(t,r),(r&4194240)===r)break;for(e=t.eventTimes,o=-1;0<r;){var i=31-Gi(r);s=1<<i,i=e[i],i>o&&(o=i),r&=~s}if(r=o,r=Qn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*cre(r/1960))-r,10<r){t.timeoutHandle=zT($d.bind(null,t,Ho,Vl),r);break}$d(t,Ho,Vl);break;case 5:$d(t,Ho,Vl);break;default:throw Error(Me(329))}}}return Qo(t,Qn()),t.callbackNode===n?C$.bind(null,t):null}function uN(t,e){var n=Ey;return t.current.memoizedState.isDehydrated&&(lf(t,e).flags|=256),t=Jb(t,e),t!==2&&(e=Ho,Ho=n,e!==null&&dN(e)),t}function dN(t){Ho===null?Ho=t:Ho.push.apply(Ho,t)}function ure(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!Qi(s(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ou(t,e){for(e&=~PA,e&=~fC,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Gi(e),r=1<<n;t[n]=-1,e&=~r}}function C9(t){if($t&6)throw Error(Me(327));_p();var e=Db(t,0);if(!(e&1))return Qo(t,Qn()),null;var n=Jb(t,e);if(t.tag!==0&&n===2){var r=LT(t);r!==0&&(e=r,n=uN(t,r))}if(n===1)throw n=d1,lf(t,0),ou(t,e),Qo(t,Qn()),n;if(n===6)throw Error(Me(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$d(t,Ho,Vl),Qo(t,Qn()),null}function DA(t,e){var n=$t;$t|=1;try{return t(e)}finally{$t=n,$t===0&&(Xp=Qn()+500,lC&&od())}}function xf(t){fu!==null&&fu.tag===0&&!($t&6)&&_p();var e=$t;$t|=1;var n=si.transition,r=nn;try{if(si.transition=null,nn=1,t)return t()}finally{nn=r,si.transition=n,$t=e,!($t&6)&&od()}}function OA(){ps=fp.current,Sn(fp)}function lf(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Bne(n)),ar!==null)for(n=ar.return;n!==null;){var r=n;switch(mA(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$b();break;case 3:Yp(),Sn(Ko),Sn(go),EA();break;case 5:CA(r);break;case 4:Yp();break;case 13:Sn(On);break;case 19:Sn(On);break;case 10:wA(r.type._context);break;case 22:case 23:OA()}n=n.return}if(Dr=t,ar=t=Su(t.current,null),Gr=ps=e,wr=0,d1=null,PA=fC=bf=0,Ho=Ey=null,Kd!==null){for(e=0;e<Kd.length;e++)if(n=Kd[e],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var i=s.next;s.next=o,r.next=i}n.pending=r}Kd=null}return t}function E$(t,e){do{var n=ar;try{if(vA(),z0.current=Kb,qb){for(var r=Vn.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}qb=!1}if(wf=0,Ar=gr=Vn=null,_y=!1,l1=0,AA.current=null,n===null||n.return===null){wr=1,d1=e,ar=null;break}e:{var s=t,i=n.return,a=n,l=e;if(e=Gr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=u9(i);if(p!==null){p.flags&=-257,d9(p,i,a,s,e),p.mode&1&&c9(s,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var y=new Set;y.add(l),e.updateQueue=y}else m.add(l);break e}else{if(!(e&1)){c9(s,c,e),LA();break e}l=Error(Me(426))}}else if(An&&a.mode&1){var x=u9(i);if(x!==null){!(x.flags&65536)&&(x.flags|=256),d9(x,i,a,s,e),gA(Qp(l,a));break e}}s=l=Qp(l,a),wr!==4&&(wr=2),Ey===null?Ey=[s]:Ey.push(s),s=i;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var b=a$(s,l,e);r9(s,b);break e;case 1:a=l;var C=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof C.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Eu===null||!Eu.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var R=l$(s,a,e);r9(s,R);break e}}s=s.return}while(s!==null)}T$(n)}catch(D){e=D,ar===n&&n!==null&&(ar=n=n.return);continue}break}while(!0)}function k$(){var t=Yb.current;return Yb.current=Kb,t===null?Kb:t}function LA(){(wr===0||wr===3||wr===2)&&(wr=4),Dr===null||!(bf&268435455)&&!(fC&268435455)||ou(Dr,Gr)}function Jb(t,e){var n=$t;$t|=2;var r=k$();(Dr!==t||Gr!==e)&&(Vl=null,lf(t,e));do try{dre();break}catch(o){E$(t,o)}while(!0);if(vA(),$t=n,Yb.current=r,ar!==null)throw Error(Me(261));return Dr=null,Gr=0,wr}function dre(){for(;ar!==null;)S$(ar)}function fre(){for(;ar!==null&&!jte();)S$(ar)}function S$(t){var e=I$(t.alternate,t,ps);t.memoizedProps=t.pendingProps,e===null?T$(t):ar=e,AA.current=null}function T$(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=sre(n,e),n!==null){n.flags&=32767,ar=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{wr=6,ar=null;return}}else if(n=ore(n,e,ps),n!==null){ar=n;return}if(e=e.sibling,e!==null){ar=e;return}ar=e=t}while(e!==null);wr===0&&(wr=5)}function $d(t,e,n){var r=nn,o=si.transition;try{si.transition=null,nn=1,hre(t,e,n,r)}finally{si.transition=o,nn=r}return null}function hre(t,e,n,r){do _p();while(fu!==null);if($t&6)throw Error(Me(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Me(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(qte(t,s),t===Dr&&(ar=Dr=null,Gr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ww||(Ww=!0,R$(Mb,function(){return _p(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=si.transition,si.transition=null;var i=nn;nn=1;var a=$t;$t|=4,AA.current=null,are(t,n),x$(n,t),Mne(UT),Ob=!!FT,UT=FT=null,t.current=n,lre(n),Vte(),$t=a,nn=i,si.transition=s}else t.current=n;if(Ww&&(Ww=!1,fu=t,Xb=o),s=t.pendingLanes,s===0&&(Eu=null),Fte(n.stateNode),Qo(t,Qn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Qb)throw Qb=!1,t=lN,lN=null,t;return Xb&1&&t.tag!==0&&_p(),s=t.pendingLanes,s&1?t===cN?ky++:(ky=0,cN=t):ky=0,od(),null}function _p(){if(fu!==null){var t=aV(Xb),e=si.transition,n=nn;try{if(si.transition=null,nn=16>t?16:t,fu===null)var r=!1;else{if(t=fu,fu=null,Xb=0,$t&6)throw Error(Me(331));var o=$t;for($t|=4,Ke=t.current;Ke!==null;){var s=Ke,i=s.child;if(Ke.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ke=c;Ke!==null;){var u=Ke;switch(u.tag){case 0:case 11:case 15:Cy(8,u,s)}var f=u.child;if(f!==null)f.return=u,Ke=f;else for(;Ke!==null;){u=Ke;var h=u.sibling,p=u.return;if(v$(u),u===c){Ke=null;break}if(h!==null){h.return=p,Ke=h;break}Ke=p}}}var m=s.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}Ke=s}}if(s.subtreeFlags&2064&&i!==null)i.return=s,Ke=i;else e:for(;Ke!==null;){if(s=Ke,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Cy(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,Ke=b;break e}Ke=s.return}}var C=t.current;for(Ke=C;Ke!==null;){i=Ke;var E=i.child;if(i.subtreeFlags&2064&&E!==null)E.return=i,Ke=E;else e:for(i=C;Ke!==null;){if(a=Ke,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:dC(9,a)}}catch(D){Hn(a,a.return,D)}if(a===i){Ke=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,Ke=R;break e}Ke=a.return}}if($t=o,od(),Fa&&typeof Fa.onPostCommitFiberRoot=="function")try{Fa.onPostCommitFiberRoot(rC,t)}catch{}r=!0}return r}finally{nn=n,si.transition=e}}return!1}function E9(t,e,n){e=Qp(n,e),e=a$(t,e,1),t=Cu(t,e,1),e=Io(),t!==null&&(lv(t,1,e),Qo(t,e))}function Hn(t,e,n){if(t.tag===3)E9(t,t,n);else for(;e!==null;){if(e.tag===3){E9(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Eu===null||!Eu.has(r))){t=Qp(n,t),t=l$(e,t,1),e=Cu(e,t,1),t=Io(),e!==null&&(lv(e,1,t),Qo(e,t));break}}e=e.return}}function pre(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Io(),t.pingedLanes|=t.suspendedLanes&n,Dr===t&&(Gr&n)===n&&(wr===4||wr===3&&(Gr&130023424)===Gr&&500>Qn()-MA?lf(t,0):PA|=n),Qo(t,e)}function N$(t,e){e===0&&(t.mode&1?(e=Ow,Ow<<=1,!(Ow&130023424)&&(Ow=4194304)):e=1);var n=Io();t=fc(t,e),t!==null&&(lv(t,e,n),Qo(t,n))}function mre(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),N$(t,n)}function gre(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Me(314))}r!==null&&r.delete(e),N$(t,n)}var I$;I$=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ko.current)qo=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return qo=!1,rre(t,e,n);qo=!!(t.flags&131072)}else qo=!1,An&&e.flags&1048576&&MV(e,Ub,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;G0(t,e),t=e.pendingProps;var o=Gp(e,go.current);xp(e,n),o=SA(null,e,r,t,o,n);var s=TA();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yo(r)?(s=!0,Bb(e)):s=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,xA(e),o.updater=uC,e.stateNode=o,o._reactInternals=e,XT(e,r,t,n),e=eN(null,e,r,!0,s,n)):(e.tag=0,An&&s&&pA(e),Eo(null,e,o,n),e=e.child),e;case 16:r=e.elementType;e:{switch(G0(t,e),t=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=vre(r),t=$i(r,t),o){case 0:e=ZT(null,e,r,t,n);break e;case 1:e=p9(null,e,r,t,n);break e;case 11:e=f9(null,e,r,t,n);break e;case 14:e=h9(null,e,r,$i(r.type,t),n);break e}throw Error(Me(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:$i(r,o),ZT(t,e,r,o,n);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:$i(r,o),p9(t,e,r,o,n);case 3:e:{if(f$(e),t===null)throw Error(Me(387));r=e.pendingProps,s=e.memoizedState,o=s.element,$V(t,e),Wb(e,r,null,n);var i=e.memoizedState;if(r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){o=Qp(Error(Me(423)),e),e=m9(t,e,r,n,o);break e}else if(r!==o){o=Qp(Error(Me(424)),e),e=m9(t,e,r,n,o);break e}else for(ys=_u(e.stateNode.containerInfo.firstChild),bs=e,An=!0,Fi=null,n=jV(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(qp(),r===o){e=hc(t,e,n);break e}Eo(t,e,r,n)}e=e.child}return e;case 5:return BV(e),t===null&&KT(e),r=e.type,o=e.pendingProps,s=t!==null?t.memoizedProps:null,i=o.children,HT(r,o)?i=null:s!==null&&HT(r,s)&&(e.flags|=32),d$(t,e),Eo(t,e,i,n),e.child;case 6:return t===null&&KT(e),null;case 13:return h$(t,e,n);case 4:return _A(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Kp(e,null,r,n):Eo(t,e,r,n),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:$i(r,o),f9(t,e,r,o,n);case 7:return Eo(t,e,e.pendingProps,n),e.child;case 8:return Eo(t,e,e.pendingProps.children,n),e.child;case 12:return Eo(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,s=e.memoizedProps,i=o.value,vn(Hb,r._currentValue),r._currentValue=i,s!==null)if(Qi(s.value,i)){if(s.children===o.children&&!Ko.current){e=hc(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){i=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Zl(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),YT(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)i=s.type===e.type?null:s.child;else if(s.tag===18){if(i=s.return,i===null)throw Error(Me(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),YT(i,n,e),i=s.sibling}else i=s.child;if(i!==null)i.return=s;else for(i=s;i!==null;){if(i===e){i=null;break}if(s=i.sibling,s!==null){s.return=i.return,i=s;break}i=i.return}s=i}Eo(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,xp(e,n),o=fi(o),r=r(o),e.flags|=1,Eo(t,e,r,n),e.child;case 14:return r=e.type,o=$i(r,e.pendingProps),o=$i(r.type,o),h9(t,e,r,o,n);case 15:return c$(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:$i(r,o),G0(t,e),e.tag=1,Yo(r)?(t=!0,Bb(e)):t=!1,xp(e,n),i$(e,r,o),XT(e,r,o,n),eN(null,e,r,!0,t,n);case 19:return p$(t,e,n);case 22:return u$(t,e,n)}throw Error(Me(156,e.tag))};function R$(t,e){return rV(t,e)}function yre(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ri(t,e,n,r){return new yre(t,e,n,r)}function jA(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vre(t){if(typeof t=="function")return jA(t)?1:0;if(t!=null){if(t=t.$$typeof,t===nA)return 11;if(t===rA)return 14}return 2}function Su(t,e){var n=t.alternate;return n===null?(n=ri(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Y0(t,e,n,r,o,s){var i=2;if(r=t,typeof t=="function")jA(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case np:return cf(n.children,o,s,e);case tA:i=8,o|=8;break;case xT:return t=ri(12,n,e,o|2),t.elementType=xT,t.lanes=s,t;case _T:return t=ri(13,n,e,o),t.elementType=_T,t.lanes=s,t;case CT:return t=ri(19,n,e,o),t.elementType=CT,t.lanes=s,t;case B7:return hC(n,o,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case V7:i=10;break e;case $7:i=9;break e;case nA:i=11;break e;case rA:i=14;break e;case Xc:i=16,r=null;break e}throw Error(Me(130,t==null?t:typeof t,""))}return e=ri(i,n,e,o),e.elementType=t,e.type=r,e.lanes=s,e}function cf(t,e,n,r){return t=ri(7,t,r,e),t.lanes=n,t}function hC(t,e,n,r){return t=ri(22,t,r,e),t.elementType=B7,t.lanes=n,t.stateNode={isHidden:!1},t}function lk(t,e,n){return t=ri(6,t,null,e),t.lanes=n,t}function ck(t,e,n){return e=ri(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function wre(t,e,n,r,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=H2(0),this.expirationTimes=H2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=H2(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function VA(t,e,n,r,o,s,i,a,l){return t=new wre(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ri(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xA(s),t}function bre(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tp,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function A$(t){if(!t)return Bu;t=t._reactInternals;e:{if(Gf(t)!==t||t.tag!==1)throw Error(Me(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yo(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Me(171))}if(t.tag===1){var n=t.type;if(Yo(n))return AV(t,n,e)}return e}function P$(t,e,n,r,o,s,i,a,l){return t=VA(n,r,!0,t,o,s,i,a,l),t.context=A$(null),n=t.current,r=Io(),o=ku(n),s=Zl(r,o),s.callback=e??null,Cu(n,s,o),t.current.lanes=o,lv(t,o,r),Qo(t,r),t}function pC(t,e,n,r){var o=e.current,s=Io(),i=ku(o);return n=A$(n),e.context===null?e.context=n:e.pendingContext=n,e=Zl(s,i),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Cu(o,e,i),t!==null&&(qi(t,o,i,s),H0(t,o,i)),i}function Zb(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function k9(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $A(t,e){k9(t,e),(t=t.alternate)&&k9(t,e)}var M$=typeof reportError=="function"?reportError:function(t){console.error(t)};function BA(t){this._internalRoot=t}mC.prototype.render=BA.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Me(409));pC(t,e,null,null)};mC.prototype.unmount=BA.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xf(function(){pC(null,t,null,null)}),e[dc]=null}};function mC(t){this._internalRoot=t}mC.prototype.unstable_scheduleHydration=function(t){if(t){var e=uV();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ru.length&&e!==0&&e<ru[n].priority;n++);ru.splice(n,0,t),n===0&&fV(t)}};function FA(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function S9(){}function xre(t,e,n,r,o){if(o){if(typeof r=="function"){var s=r;r=function(){var c=Zb(i);s.call(c)}}var i=P$(e,r,t,0,null,!1,!1,"",S9);return t._reactRootContainer=i,t[dc]=i.current,r1(t.nodeType===8?t.parentNode:t),xf(),i}for(;o=t.lastChild;)t.removeChild(o);if(typeof r=="function"){var a=r;r=function(){var c=Zb(l);a.call(c)}}var l=VA(t,0,!1,null,null,!1,!1,"",S9);return t._reactRootContainer=l,t[dc]=l.current,r1(t.nodeType===8?t.parentNode:t),xf(function(){pC(e,l,n,r)}),l}function yC(t,e,n,r,o){var s=n._reactRootContainer;if(s){var i=s;if(typeof o=="function"){var a=o;o=function(){var l=Zb(i);a.call(l)}}pC(e,i,t,o)}else i=xre(n,e,t,o,r);return Zb(i)}lV=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ey(e.pendingLanes);n!==0&&(iA(e,n|1),Qo(e,Qn()),!($t&6)&&(Xp=Qn()+500,od()))}break;case 13:xf(function(){var r=fc(t,1);if(r!==null){var o=Io();qi(r,t,1,o)}}),$A(t,1)}};aA=function(t){if(t.tag===13){var e=fc(t,134217728);if(e!==null){var n=Io();qi(e,t,134217728,n)}$A(t,134217728)}};cV=function(t){if(t.tag===13){var e=ku(t),n=fc(t,e);if(n!==null){var r=Io();qi(n,t,e,r)}$A(t,e)}};uV=function(){return nn};dV=function(t,e){var n=nn;try{return nn=t,e()}finally{nn=n}};MT=function(t,e,n){switch(e){case"input":if(ST(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=aC(r);if(!o)throw Error(Me(90));U7(r),ST(r,o)}}}break;case"textarea":z7(t,n);break;case"select":e=n.value,e!=null&&yp(t,!!n.multiple,e,!1)}};X7=DA;J7=xf;var _re={usingClientEntryPoint:!1,Events:[uv,ip,aC,Y7,Q7,DA]},Dg={findFiberByHostInstance:qd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Cre={bundleType:Dg.bundleType,version:Dg.version,rendererPackageName:Dg.rendererPackageName,rendererConfig:Dg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:kc.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=tV(t),t===null?null:t.stateNode},findFiberByHostInstance:Dg.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gw.isDisabled&&Gw.supportsFiber)try{rC=Gw.inject(Cre),Fa=Gw}catch{}}Ls.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_re;Ls.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!FA(e))throw Error(Me(200));return bre(t,e,null,n)};Ls.createRoot=function(t,e){if(!FA(t))throw Error(Me(299));var n=!1,r="",o=M$;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=VA(t,1,!1,null,null,n,!1,r,o),t[dc]=e.current,r1(t.nodeType===8?t.parentNode:t),new BA(e)};Ls.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Me(188)):(t=Object.keys(t).join(","),Error(Me(268,t)));return t=tV(e),t=t===null?null:t.stateNode,t};Ls.flushSync=function(t){return xf(t)};Ls.hydrate=function(t,e,n){if(!gC(e))throw Error(Me(200));return yC(null,t,e,!0,n)};Ls.hydrateRoot=function(t,e,n){if(!FA(t))throw Error(Me(405));var r=n!=null&&n.hydratedSources||null,o=!1,s="",i=M$;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),e=P$(e,null,t,1,n??null,o,!1,s,i),t[dc]=e.current,r1(t),r)for(t=0;t<r.length;t++)n=r[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new mC(e)};Ls.render=function(t,e,n){if(!gC(e))throw Error(Me(200));return yC(null,t,e,!1,n)};Ls.unmountComponentAtNode=function(t){if(!gC(t))throw Error(Me(40));return t._reactRootContainer?(xf(function(){yC(null,null,t,!1,function(){t._reactRootContainer=null,t[dc]=null})}),!0):!1};Ls.unstable_batchedUpdates=DA;Ls.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!gC(n))throw Error(Me(200));if(t==null||t._reactInternals===void 0)throw Error(Me(38));return yC(t,e,n,!1,r)};Ls.version="18.3.1-next-f1338f8080-20240426";function D$(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(D$)}catch(t){console.error(t)}}D$(),D7.exports=Ls;var yo=D7.exports;const fv=tC(yo);var O$,T9=yo;O$=T9.createRoot,T9.hydrateRoot;var UA={};Object.defineProperty(UA,"__esModule",{value:!0});UA.parse=Rre;UA.serialize=Are;const Ere=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,kre=/^[\u0021-\u003A\u003C-\u007E]*$/,Sre=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,Tre=/^[\u0020-\u003A\u003D-\u007E]*$/,Nre=Object.prototype.toString,Ire=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function Rre(t,e){const n=new Ire,r=t.length;if(r<2)return n;const o=(e==null?void 0:e.decode)||Pre;let s=0;do{const i=t.indexOf("=",s);if(i===-1)break;const a=t.indexOf(";",s),l=a===-1?r:a;if(i>l){s=t.lastIndexOf(";",i-1)+1;continue}const c=N9(t,s,i),u=I9(t,i,c),f=t.slice(c,u);if(n[f]===void 0){let h=N9(t,i+1,l),p=I9(t,l,h);const m=o(t.slice(h,p));n[f]=m}s=l+1}while(s<r);return n}function N9(t,e,n){do{const r=t.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<n);return n}function I9(t,e,n){for(;e>n;){const r=t.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return n}function Are(t,e,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!Ere.test(t))throw new TypeError(`argument name is invalid: ${t}`);const o=r(e);if(!kre.test(o))throw new TypeError(`argument val is invalid: ${e}`);let s=t+"="+o;if(!n)return s;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);s+="; Max-Age="+n.maxAge}if(n.domain){if(!Sre.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);s+="; Domain="+n.domain}if(n.path){if(!Tre.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);s+="; Path="+n.path}if(n.expires){if(!Mre(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);s+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(s+="; HttpOnly"),n.secure&&(s+="; Secure"),n.partitioned&&(s+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"none":s+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return s}function Pre(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function Mre(t){return Nre.call(t)==="[object Date]"}/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var R9="popstate";function Dre(t={}){function e(r,o){let{pathname:s,search:i,hash:a}=r.location;return fN("",{pathname:s,search:i,hash:a},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:f1(o)}return Lre(e,n,null,t)}function Dn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Xi(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ore(){return Math.random().toString(36).substring(2,10)}function A9(t,e){return{usr:t.state,key:t.key,idx:e}}function fN(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Nm(e):e,state:n,key:e&&e.key||r||Ore()}}function f1({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Nm(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function Lre(t,e,n,r={}){let{window:o=document.defaultView,v5Compat:s=!1}=r,i=o.history,a="POP",l=null,c=u();c==null&&(c=0,i.replaceState({...i.state,idx:c},""));function u(){return(i.state||{idx:null}).idx}function f(){a="POP";let x=u(),b=x==null?null:x-c;c=x,l&&l({action:a,location:y.location,delta:b})}function h(x,b){a="PUSH";let C=fN(y.location,x,b);c=u()+1;let E=A9(C,c),R=y.createHref(C);try{i.pushState(E,"",R)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;o.location.assign(R)}s&&l&&l({action:a,location:y.location,delta:1})}function p(x,b){a="REPLACE";let C=fN(y.location,x,b);c=u();let E=A9(C,c),R=y.createHref(C);i.replaceState(E,"",R),s&&l&&l({action:a,location:y.location,delta:0})}function m(x){let b=o.location.origin!=="null"?o.location.origin:o.location.href,C=typeof x=="string"?x:f1(x);return C=C.replace(/ $/,"%20"),Dn(b,`No window.location.(origin|href) available to create URL for href: ${C}`),new URL(C,b)}let y={get action(){return a},get location(){return t(o,i)},listen(x){if(l)throw new Error("A history only accepts one active listener");return o.addEventListener(R9,f),l=x,()=>{o.removeEventListener(R9,f),l=null}},createHref(x){return e(o,x)},createURL:m,encodeLocation(x){let b=m(x);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:h,replace:p,go(x){return i.go(x)}};return y}function L$(t,e,n="/"){return jre(t,e,n,!1)}function jre(t,e,n,r){let o=typeof e=="string"?Nm(e):e,s=Fu(o.pathname||"/",n);if(s==null)return null;let i=j$(t);Vre(i);let a=null;for(let l=0;a==null&&l<i.length;++l){let c=Yre(s);a=qre(i[l],c,r)}return a}function j$(t,e=[],n=[],r=""){let o=(s,i,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:i,route:s};l.relativePath.startsWith("/")&&(Dn(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let c=ec([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(Dn(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),j$(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:Wre(c,s.index),routesMeta:u})};return t.forEach((s,i)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))o(s,i);else for(let l of V$(s.path))o(s,i,l)}),e}function V$(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,o=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return o?[s,""]:[s];let i=V$(r.join("/")),a=[];return a.push(...i.map(l=>l===""?s:[s,l].join("/"))),o&&a.push(...i),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Vre(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Gre(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var $re=/^:[\w-]+$/,Bre=3,Fre=2,Ure=1,Hre=10,zre=-2,P9=t=>t==="*";function Wre(t,e){let n=t.split("/"),r=n.length;return n.some(P9)&&(r+=zre),e&&(r+=Fre),n.filter(o=>!P9(o)).reduce((o,s)=>o+($re.test(s)?Bre:s===""?Ure:Hre),r)}function Gre(t,e){return t.length===e.length&&t.slice(0,-1).every((r,o)=>r===e[o])?t[t.length-1]-e[e.length-1]:0}function qre(t,e,n=!1){let{routesMeta:r}=t,o={},s="/",i=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",f=ex({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!f&&c&&n&&!r[r.length-1].route.index&&(f=ex({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!f)return null;Object.assign(o,f.params),i.push({params:o,pathname:ec([s,f.pathname]),pathnameBase:Zre(ec([s,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(s=ec([s,f.pathnameBase]))}return i}function ex(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Kre(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let s=o[0],i=s.replace(/(.)\/+$/,"$1"),a=o.slice(1);return{params:r.reduce((c,{paramName:u,isOptional:f},h)=>{if(u==="*"){let m=a[h]||"";i=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[h];return f&&!p?c[u]=void 0:c[u]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:i,pattern:t}}function Kre(t,e=!1,n=!0){Xi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function Yre(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Xi(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Fu(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Qre(t,e="/"){let{pathname:n,search:r="",hash:o=""}=typeof t=="string"?Nm(t):t;return{pathname:n?n.startsWith("/")?n:Xre(n,e):e,search:eoe(r),hash:toe(o)}}function Xre(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function uk(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Jre(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function HA(t){let e=Jre(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function zA(t,e,n,r=!1){let o;typeof t=="string"?o=Nm(t):(o={...t},Dn(!o.pathname||!o.pathname.includes("?"),uk("?","pathname","search",o)),Dn(!o.pathname||!o.pathname.includes("#"),uk("#","pathname","hash",o)),Dn(!o.search||!o.search.includes("#"),uk("#","search","hash",o)));let s=t===""||o.pathname==="",i=s?"/":o.pathname,a;if(i==null)a=n;else{let f=e.length-1;if(!r&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),f-=1;o.pathname=h.join("/")}a=f>=0?e[f]:"/"}let l=Qre(o,a),c=i&&i!=="/"&&i.endsWith("/"),u=(s||i===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var ec=t=>t.join("/").replace(/\/\/+/g,"/"),Zre=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),eoe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,toe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function noe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var $$=["POST","PUT","PATCH","DELETE"];new Set($$);var roe=["GET",...$$];new Set(roe);var Im=g.createContext(null);Im.displayName="DataRouter";var vC=g.createContext(null);vC.displayName="DataRouterState";var B$=g.createContext({isTransitioning:!1});B$.displayName="ViewTransition";var ooe=g.createContext(new Map);ooe.displayName="Fetchers";var soe=g.createContext(null);soe.displayName="Await";var aa=g.createContext(null);aa.displayName="Navigation";var hv=g.createContext(null);hv.displayName="Location";var la=g.createContext({outlet:null,matches:[],isDataRoute:!1});la.displayName="Route";var WA=g.createContext(null);WA.displayName="RouteError";function ioe(t,{relative:e}={}){Dn(Rm(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=g.useContext(aa),{hash:o,pathname:s,search:i}=pv(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:ec([n,s])),r.createHref({pathname:a,search:i,hash:o})}function Rm(){return g.useContext(hv)!=null}function Sc(){return Dn(Rm(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(hv).location}var F$="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function U$(t){g.useContext(aa).static||g.useLayoutEffect(t)}function yi(){let{isDataRoute:t}=g.useContext(la);return t?boe():aoe()}function aoe(){Dn(Rm(),"useNavigate() may be used only in the context of a <Router> component.");let t=g.useContext(Im),{basename:e,navigator:n}=g.useContext(aa),{matches:r}=g.useContext(la),{pathname:o}=Sc(),s=JSON.stringify(HA(r)),i=g.useRef(!1);return U$(()=>{i.current=!0}),g.useCallback((l,c={})=>{if(Xi(i.current,F$),!i.current)return;if(typeof l=="number"){n.go(l);return}let u=zA(l,JSON.parse(s),o,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:ec([e,u.pathname])),(c.replace?n.replace:n.push)(u,c.state,c)},[e,n,s,o,t])}g.createContext(null);function loe(){let{matches:t}=g.useContext(la),e=t[t.length-1];return e?e.params:{}}function pv(t,{relative:e}={}){let{matches:n}=g.useContext(la),{pathname:r}=Sc(),o=JSON.stringify(HA(n));return g.useMemo(()=>zA(t,JSON.parse(o),r,e==="path"),[t,o,r,e])}function coe(t,e){return H$(t,e)}function H$(t,e,n,r){var b;Dn(Rm(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=g.useContext(aa),{matches:s}=g.useContext(la),i=s[s.length-1],a=i?i.params:{},l=i?i.pathname:"/",c=i?i.pathnameBase:"/",u=i&&i.route;{let C=u&&u.path||"";z$(l,!u||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let f=Sc(),h;if(e){let C=typeof e=="string"?Nm(e):e;Dn(c==="/"||((b=C.pathname)==null?void 0:b.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${C.pathname}" was given in the \`location\` prop.`),h=C}else h=f;let p=h.pathname||"/",m=p;if(c!=="/"){let C=c.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(C.length).join("/")}let y=L$(t,{pathname:m});Xi(u||y!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),Xi(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=poe(y&&y.map(C=>Object.assign({},C,{params:Object.assign({},a,C.params),pathname:ec([c,o.encodeLocation?o.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?c:ec([c,o.encodeLocation?o.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),s,n,r);return e&&x?g.createElement(hv.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},x):x}function uoe(){let t=woe(),e=noe(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},i=null;return console.error("Error handled by React Router default ErrorBoundary:",t),i=g.createElement(g.Fragment,null,g.createElement("p",null,"💿 Hey developer 👋"),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:s},"ErrorBoundary")," or"," ",g.createElement("code",{style:s},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),n?g.createElement("pre",{style:o},n):null,i)}var doe=g.createElement(uoe,null),foe=class extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?g.createElement(la.Provider,{value:this.props.routeContext},g.createElement(WA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function hoe({routeContext:t,match:e,children:n}){let r=g.useContext(Im);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),g.createElement(la.Provider,{value:t},n)}function poe(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,s=n==null?void 0:n.errors;if(s!=null){let l=o.findIndex(c=>c.route.id&&(s==null?void 0:s[c.route.id])!==void 0);Dn(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),o=o.slice(0,Math.min(o.length,l+1))}let i=!1,a=-1;if(n)for(let l=0;l<o.length;l++){let c=o[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:u,errors:f}=n,h=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!f||f[c.route.id]===void 0);if(c.route.lazy||h){i=!0,a>=0?o=o.slice(0,a+1):o=[o[0]];break}}}return o.reduceRight((l,c,u)=>{let f,h=!1,p=null,m=null;n&&(f=s&&c.route.id?s[c.route.id]:void 0,p=c.route.errorElement||doe,i&&(a<0&&u===0?(z$("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,m=null):a===u&&(h=!0,m=c.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,u+1)),x=()=>{let b;return f?b=p:h?b=m:c.route.Component?b=g.createElement(c.route.Component,null):c.route.element?b=c.route.element:b=l,g.createElement(hoe,{match:c,routeContext:{outlet:l,matches:y,isDataRoute:n!=null},children:b})};return n&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?g.createElement(foe,{location:n.location,revalidation:n.revalidation,component:p,error:f,children:x(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):x()},null)}function GA(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function moe(t){let e=g.useContext(Im);return Dn(e,GA(t)),e}function goe(t){let e=g.useContext(vC);return Dn(e,GA(t)),e}function yoe(t){let e=g.useContext(la);return Dn(e,GA(t)),e}function qA(t){let e=yoe(t),n=e.matches[e.matches.length-1];return Dn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function voe(){return qA("useRouteId")}function woe(){var r;let t=g.useContext(WA),e=goe("useRouteError"),n=qA("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function boe(){let{router:t}=moe("useNavigate"),e=qA("useNavigate"),n=g.useRef(!1);return U$(()=>{n.current=!0}),g.useCallback(async(o,s={})=>{Xi(n.current,F$),n.current&&(typeof o=="number"?t.navigate(o):await t.navigate(o,{fromRouteId:e,...s}))},[t,e])}var M9={};function z$(t,e,n){!e&&!M9[t]&&(M9[t]=!0,Xi(!1,n))}g.memo(xoe);function xoe({routes:t,future:e,state:n}){return H$(t,void 0,n,e)}function _oe({to:t,replace:e,state:n,relative:r}){Dn(Rm(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=g.useContext(aa);Xi(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=g.useContext(la),{pathname:i}=Sc(),a=yi(),l=zA(t,HA(s),i,r==="path"),c=JSON.stringify(l);return g.useEffect(()=>{a(JSON.parse(c),{replace:e,state:n,relative:r})},[a,c,r,e,n]),null}function ji(t){Dn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Coe({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:o,static:s=!1}){Dn(!Rm(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=t.replace(/^\/*/,"/"),a=g.useMemo(()=>({basename:i,navigator:o,static:s,future:{}}),[i,o,s]);typeof n=="string"&&(n=Nm(n));let{pathname:l="/",search:c="",hash:u="",state:f=null,key:h="default"}=n,p=g.useMemo(()=>{let m=Fu(l,i);return m==null?null:{location:{pathname:m,search:c,hash:u,state:f,key:h},navigationType:r}},[i,l,c,u,f,h,r]);return Xi(p!=null,`<Router basename="${i}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:g.createElement(aa.Provider,{value:a},g.createElement(hv.Provider,{children:e,value:p}))}function Eoe({children:t,location:e}){return coe(hN(t),e)}function hN(t,e=[]){let n=[];return g.Children.forEach(t,(r,o)=>{if(!g.isValidElement(r))return;let s=[...e,o];if(r.type===g.Fragment){n.push.apply(n,hN(r.props.children,s));return}Dn(r.type===ji,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Dn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let i={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=hN(r.props.children,s)),n.push(i)}),n}var Q0="get",X0="application/x-www-form-urlencoded";function wC(t){return t!=null&&typeof t.tagName=="string"}function koe(t){return wC(t)&&t.tagName.toLowerCase()==="button"}function Soe(t){return wC(t)&&t.tagName.toLowerCase()==="form"}function Toe(t){return wC(t)&&t.tagName.toLowerCase()==="input"}function Noe(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Ioe(t,e){return t.button===0&&(!e||e==="_self")&&!Noe(t)}var qw=null;function Roe(){if(qw===null)try{new FormData(document.createElement("form"),0),qw=!1}catch{qw=!0}return qw}var Aoe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function dk(t){return t!=null&&!Aoe.has(t)?(Xi(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${X0}"`),null):t}function Poe(t,e){let n,r,o,s,i;if(Soe(t)){let a=t.getAttribute("action");r=a?Fu(a,e):null,n=t.getAttribute("method")||Q0,o=dk(t.getAttribute("enctype"))||X0,s=new FormData(t)}else if(koe(t)||Toe(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?Fu(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||Q0,o=dk(t.getAttribute("formenctype"))||dk(a.getAttribute("enctype"))||X0,s=new FormData(a,t),!Roe()){let{name:c,type:u,value:f}=t;if(u==="image"){let h=c?`${c}.`:"";s.append(`${h}x`,"0"),s.append(`${h}y`,"0")}else c&&s.append(c,f)}}else{if(wC(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Q0,r=null,o=X0,i=t}return s&&o==="text/plain"&&(i=s,s=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:s,body:i}}function KA(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function Moe(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Doe(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Ooe(t,e,n){let r=await Promise.all(t.map(async o=>{let s=e.routes[o.route.id];if(s){let i=await Moe(s,n);return i.links?i.links():[]}return[]}));return $oe(r.flat(1).filter(Doe).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function D9(t,e,n,r,o,s){let i=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var u;return n[c].pathname!==l.pathname||((u=n[c].route.path)==null?void 0:u.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>i(l,c)||a(l,c)):s==="data"?e.filter((l,c)=>{var f;let u=r.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(i(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function Loe(t,e){return joe(t.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let o=[r.module];return r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function joe(t){return[...new Set(t)]}function Voe(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function $oe(t,e){let n=new Set;return new Set(e),t.reduce((r,o)=>{let s=JSON.stringify(Voe(o));return n.has(s)||(n.add(s),r.push({key:s,link:o})),r},[])}function Boe(t){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function Foe(){let t=g.useContext(Im);return KA(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Uoe(){let t=g.useContext(vC);return KA(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var YA=g.createContext(void 0);YA.displayName="FrameworkContext";function W$(){let t=g.useContext(YA);return KA(t,"You must render this element inside a <HydratedRouter> element"),t}function Hoe(t,e){let n=g.useContext(YA),[r,o]=g.useState(!1),[s,i]=g.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:f}=e,h=g.useRef(null);g.useEffect(()=>{if(t==="render"&&i(!0),t==="viewport"){let y=b=>{b.forEach(C=>{i(C.isIntersecting)})},x=new IntersectionObserver(y,{threshold:.5});return h.current&&x.observe(h.current),()=>{x.disconnect()}}},[t]),g.useEffect(()=>{if(r){let y=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(y)}}},[r]);let p=()=>{o(!0)},m=()=>{o(!1),i(!1)};return n?t!=="intent"?[s,h,{}]:[s,h,{onFocus:Og(a,p),onBlur:Og(l,m),onMouseEnter:Og(c,p),onMouseLeave:Og(u,m),onTouchStart:Og(f,p)}]:[!1,h,{}]}function Og(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function zoe({page:t,...e}){let{router:n}=Foe(),r=g.useMemo(()=>L$(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?g.createElement(Goe,{page:t,matches:r,...e}):null}function Woe(t){let{manifest:e,routeModules:n}=W$(),[r,o]=g.useState([]);return g.useEffect(()=>{let s=!1;return Ooe(t,e,n).then(i=>{s||o(i)}),()=>{s=!0}},[t,e,n]),r}function Goe({page:t,matches:e,...n}){let r=Sc(),{manifest:o,routeModules:s}=W$(),{loaderData:i,matches:a}=Uoe(),l=g.useMemo(()=>D9(t,e,a,o,r,"data"),[t,e,a,o,r]),c=g.useMemo(()=>D9(t,e,a,o,r,"assets"),[t,e,a,o,r]),u=g.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let p=new Set,m=!1;if(e.forEach(x=>{var C;let b=o.routes[x.route.id];!b||!b.hasLoader||(!l.some(E=>E.route.id===x.route.id)&&x.route.id in i&&((C=s[x.route.id])!=null&&C.shouldRevalidate)||b.hasClientLoader?m=!0:p.add(x.route.id))}),p.size===0)return[];let y=Boe(t);return m&&p.size>0&&y.searchParams.set("_routes",e.filter(x=>p.has(x.route.id)).map(x=>x.route.id).join(",")),[y.pathname+y.search]},[i,r,o,l,e,t,s]),f=g.useMemo(()=>Loe(c,o),[c,o]),h=Woe(c);return g.createElement(g.Fragment,null,u.map(p=>g.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),f.map(p=>g.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),h.map(({key:p,link:m})=>g.createElement("link",{key:p,...m})))}function qoe(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var G$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{G$&&(window.__reactRouterVersion="7.1.3")}catch{}function Koe({basename:t,children:e,window:n}){let r=g.useRef();r.current==null&&(r.current=Dre({window:n,v5Compat:!0}));let o=r.current,[s,i]=g.useState({action:o.action,location:o.location}),a=g.useCallback(l=>{g.startTransition(()=>i(l))},[i]);return g.useLayoutEffect(()=>o.listen(a),[o,a]),g.createElement(Coe,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:o})}var q$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tu=g.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:o,reloadDocument:s,replace:i,state:a,target:l,to:c,preventScrollReset:u,viewTransition:f,...h},p){let{basename:m}=g.useContext(aa),y=typeof c=="string"&&q$.test(c),x,b=!1;if(typeof c=="string"&&y&&(x=c,G$))try{let P=new URL(window.location.href),L=c.startsWith("//")?new URL(P.protocol+c):new URL(c),$=Fu(L.pathname,m);L.origin===P.origin&&$!=null?c=$+L.search+L.hash:b=!0}catch{Xi(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=ioe(c,{relative:o}),[E,R,D]=Hoe(r,h),O=Joe(c,{replace:i,state:a,target:l,preventScrollReset:u,relative:o,viewTransition:f});function T(P){e&&e(P),P.defaultPrevented||O(P)}let I=g.createElement("a",{...h,...D,href:x||C,onClick:b||s?e:T,ref:qoe(p,R),target:l,"data-discover":!y&&n==="render"?"true":void 0});return E&&!y?g.createElement(g.Fragment,null,I,g.createElement(zoe,{page:C})):I});Tu.displayName="Link";var Yoe=g.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:o=!1,style:s,to:i,viewTransition:a,children:l,...c},u){let f=pv(i,{relative:c.relative}),h=Sc(),p=g.useContext(vC),{navigator:m,basename:y}=g.useContext(aa),x=p!=null&&rse(f)&&a===!0,b=m.encodeLocation?m.encodeLocation(f).pathname:f.pathname,C=h.pathname,E=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(C=C.toLowerCase(),E=E?E.toLowerCase():null,b=b.toLowerCase()),E&&y&&(E=Fu(E,y)||E);const R=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let D=C===b||!o&&C.startsWith(b)&&C.charAt(R)==="/",O=E!=null&&(E===b||!o&&E.startsWith(b)&&E.charAt(b.length)==="/"),T={isActive:D,isPending:O,isTransitioning:x},I=D?e:void 0,P;typeof r=="function"?P=r(T):P=[r,D?"active":null,O?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let L=typeof s=="function"?s(T):s;return g.createElement(Tu,{...c,"aria-current":I,className:P,ref:u,style:L,to:i,viewTransition:a},typeof l=="function"?l(T):l)});Yoe.displayName="NavLink";var Qoe=g.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:o,state:s,method:i=Q0,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:f,...h},p)=>{let m=tse(),y=nse(a,{relative:c}),x=i.toLowerCase()==="get"?"get":"post",b=typeof a=="string"&&q$.test(a),C=E=>{if(l&&l(E),E.defaultPrevented)return;E.preventDefault();let R=E.nativeEvent.submitter,D=(R==null?void 0:R.getAttribute("formmethod"))||i;m(R||E.currentTarget,{fetcherKey:e,method:D,navigate:n,replace:o,state:s,relative:c,preventScrollReset:u,viewTransition:f})};return g.createElement("form",{ref:p,method:x,action:y,onSubmit:r?l:C,...h,"data-discover":!b&&t==="render"?"true":void 0})});Qoe.displayName="Form";function Xoe(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function K$(t){let e=g.useContext(Im);return Dn(e,Xoe(t)),e}function Joe(t,{target:e,replace:n,state:r,preventScrollReset:o,relative:s,viewTransition:i}={}){let a=yi(),l=Sc(),c=pv(t,{relative:s});return g.useCallback(u=>{if(Ioe(u,e)){u.preventDefault();let f=n!==void 0?n:f1(l)===f1(c);a(t,{replace:f,state:r,preventScrollReset:o,relative:s,viewTransition:i})}},[l,a,c,n,r,e,t,o,s,i])}var Zoe=0,ese=()=>`__${String(++Zoe)}__`;function tse(){let{router:t}=K$("useSubmit"),{basename:e}=g.useContext(aa),n=voe();return g.useCallback(async(r,o={})=>{let{action:s,method:i,encType:a,formData:l,body:c}=Poe(r,e);if(o.navigate===!1){let u=o.fetcherKey||ese();await t.fetch(u,n,o.action||s,{preventScrollReset:o.preventScrollReset,formData:l,body:c,formMethod:o.method||i,formEncType:o.encType||a,flushSync:o.flushSync})}else await t.navigate(o.action||s,{preventScrollReset:o.preventScrollReset,formData:l,body:c,formMethod:o.method||i,formEncType:o.encType||a,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[t,e,n])}function nse(t,{relative:e}={}){let{basename:n}=g.useContext(aa),r=g.useContext(la);Dn(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),s={...pv(t||".",{relative:e})},i=Sc();if(t==null){s.search=i.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let u=a.toString();s.search=u?`?${u}`:""}}return(!t||t===".")&&o.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:ec([n,s.pathname])),f1(s)}function rse(t,e={}){let n=g.useContext(B$);Dn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=K$("useViewTransitionState"),o=pv(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Fu(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=Fu(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ex(o.pathname,i)!=null||ex(o.pathname,s)!=null}new TextEncoder;function O9(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function bC(...t){return e=>{let n=!1;const r=t.map(o=>{const s=O9(o,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let o=0;o<r.length;o++){const s=r[o];typeof s=="function"?s():O9(t[o],null)}}}}function bt(...t){return g.useCallback(bC(...t),t)}var pc=g.forwardRef((t,e)=>{const{children:n,...r}=t,o=g.Children.toArray(n),s=o.find(sse);if(s){const i=s.props.children,a=o.map(l=>l===s?g.Children.count(i)>1?g.Children.only(null):g.isValidElement(i)?i.props.children:null:l);return d.jsx(pN,{...r,ref:e,children:g.isValidElement(i)?g.cloneElement(i,void 0,a):null})}return d.jsx(pN,{...r,ref:e,children:n})});pc.displayName="Slot";var pN=g.forwardRef((t,e)=>{const{children:n,...r}=t;if(g.isValidElement(n)){const o=ase(n);return g.cloneElement(n,{...ise(r,n.props),ref:e?bC(e,o):o})}return g.Children.count(n)>1?g.Children.only(null):null});pN.displayName="SlotClone";var ose=({children:t})=>d.jsx(d.Fragment,{children:t});function sse(t){return g.isValidElement(t)&&t.type===ose}function ise(t,e){const n={...e};for(const r in e){const o=t[r],s=e[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...a)=>{s(...a),o(...a)}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...t,...n}}function ase(t){var r,o;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Y$(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=Y$(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function ca(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=Y$(t))&&(r&&(r+=" "),r+=e);return r}const L9=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,j9=ca,xC=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return j9(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:o,defaultVariants:s}=e,i=Object.keys(o).map(c=>{const u=n==null?void 0:n[c],f=s==null?void 0:s[c];if(u===null)return null;const h=L9(u)||L9(f);return o[c][h]}),a=n&&Object.entries(n).reduce((c,u)=>{let[f,h]=u;return h===void 0||(c[f]=h),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:f,className:h,...p}=u;return Object.entries(p).every(m=>{let[y,x]=m;return Array.isArray(x)?x.includes({...s,...a}[y]):{...s,...a}[y]===x})?[...c,f,h]:c},[]);return j9(t,i,l,n==null?void 0:n.class,n==null?void 0:n.className)},QA="-",lse=t=>{const e=use(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:i=>{const a=i.split(QA);return a[0]===""&&a.length!==1&&a.shift(),Q$(a,e)||cse(i)},getConflictingClassGroupIds:(i,a)=>{const l=n[i]||[];return a&&r[i]?[...l,...r[i]]:l}}},Q$=(t,e)=>{var i;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),o=r?Q$(t.slice(1),r):void 0;if(o)return o;if(e.validators.length===0)return;const s=t.join(QA);return(i=e.validators.find(({validator:a})=>a(s)))==null?void 0:i.classGroupId},V9=/^\[(.+)\]$/,cse=t=>{if(V9.test(t)){const e=V9.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},use=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return fse(Object.entries(t.classGroups),n).forEach(([s,i])=>{mN(i,r,s,e)}),r},mN=(t,e,n,r)=>{t.forEach(o=>{if(typeof o=="string"){const s=o===""?e:$9(e,o);s.classGroupId=n;return}if(typeof o=="function"){if(dse(o)){mN(o(r),e,n,r);return}e.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([s,i])=>{mN(i,$9(e,s),n,r)})})},$9=(t,e)=>{let n=t;return e.split(QA).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},dse=t=>t.isThemeGetter,fse=(t,e)=>e?t.map(([n,r])=>{const o=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([i,a])=>[e+i,a])):s);return[n,o]}):t,hse=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const o=(s,i)=>{n.set(s,i),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let i=n.get(s);if(i!==void 0)return i;if((i=r.get(s))!==void 0)return o(s,i),i},set(s,i){n.has(s)?n.set(s,i):o(s,i)}}},X$="!",pse=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,o=e[0],s=e.length,i=a=>{const l=[];let c=0,u=0,f;for(let x=0;x<a.length;x++){let b=a[x];if(c===0){if(b===o&&(r||a.slice(x,x+s)===e)){l.push(a.slice(u,x)),u=x+s;continue}if(b==="/"){f=x;continue}}b==="["?c++:b==="]"&&c--}const h=l.length===0?a:a.substring(u),p=h.startsWith(X$),m=p?h.substring(1):h,y=f&&f>u?f-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:y}};return n?a=>n({className:a,parseClassName:i}):i},mse=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},gse=t=>({cache:hse(t.cacheSize),parseClassName:pse(t),...lse(t)}),yse=/\s+/,vse=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o}=e,s=[],i=t.trim().split(yse);let a="";for(let l=i.length-1;l>=0;l-=1){const c=i[l],{modifiers:u,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:p}=n(c);let m=!!p,y=r(m?h.substring(0,p):h);if(!y){if(!m){a=c+(a.length>0?" "+a:a);continue}if(y=r(h),!y){a=c+(a.length>0?" "+a:a);continue}m=!1}const x=mse(u).join(":"),b=f?x+X$:x,C=b+y;if(s.includes(C))continue;s.push(C);const E=o(y,m);for(let R=0;R<E.length;++R){const D=E[R];s.push(b+D)}a=c+(a.length>0?" "+a:a)}return a};function wse(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=J$(e))&&(r&&(r+=" "),r+=n);return r}const J$=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=J$(t[r]))&&(n&&(n+=" "),n+=e);return n};function bse(t,...e){let n,r,o,s=i;function i(l){const c=e.reduce((u,f)=>f(u),t());return n=gse(c),r=n.cache.get,o=n.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=vse(l,n);return o(l,u),u}return function(){return s(wse.apply(null,arguments))}}const xn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},Z$=/^\[(?:([a-z-]+):)?(.+)\]$/i,xse=/^\d+\/\d+$/,_se=new Set(["px","full","screen"]),Cse=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ese=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,kse=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Sse=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Tse=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Rl=t=>Cp(t)||_se.has(t)||xse.test(t),Uc=t=>Am(t,"length",Ose),Cp=t=>!!t&&!Number.isNaN(Number(t)),fk=t=>Am(t,"number",Cp),Lg=t=>!!t&&Number.isInteger(Number(t)),Nse=t=>t.endsWith("%")&&Cp(t.slice(0,-1)),gt=t=>Z$.test(t),Hc=t=>Cse.test(t),Ise=new Set(["length","size","percentage"]),Rse=t=>Am(t,Ise,eB),Ase=t=>Am(t,"position",eB),Pse=new Set(["image","url"]),Mse=t=>Am(t,Pse,jse),Dse=t=>Am(t,"",Lse),jg=()=>!0,Am=(t,e,n)=>{const r=Z$.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},Ose=t=>Ese.test(t)&&!kse.test(t),eB=()=>!1,Lse=t=>Sse.test(t),jse=t=>Tse.test(t),Vse=()=>{const t=xn("colors"),e=xn("spacing"),n=xn("blur"),r=xn("brightness"),o=xn("borderColor"),s=xn("borderRadius"),i=xn("borderSpacing"),a=xn("borderWidth"),l=xn("contrast"),c=xn("grayscale"),u=xn("hueRotate"),f=xn("invert"),h=xn("gap"),p=xn("gradientColorStops"),m=xn("gradientColorStopPositions"),y=xn("inset"),x=xn("margin"),b=xn("opacity"),C=xn("padding"),E=xn("saturate"),R=xn("scale"),D=xn("sepia"),O=xn("skew"),T=xn("space"),I=xn("translate"),P=()=>["auto","contain","none"],L=()=>["auto","hidden","clip","visible","scroll"],$=()=>["auto",gt,e],F=()=>[gt,e],V=()=>["",Rl,Uc],be=()=>["auto",Cp,gt],ge=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],le=()=>["solid","dashed","dotted","double","none"],Q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],H=()=>["start","end","center","between","around","evenly","stretch"],Y=()=>["","0",gt],ue=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[Cp,gt];return{cacheSize:500,separator:":",theme:{colors:[jg],spacing:[Rl,Uc],blur:["none","",Hc,gt],brightness:W(),borderColor:[t],borderRadius:["none","","full",Hc,gt],borderSpacing:F(),borderWidth:V(),contrast:W(),grayscale:Y(),hueRotate:W(),invert:Y(),gap:F(),gradientColorStops:[t],gradientColorStopPositions:[Nse,Uc],inset:$(),margin:$(),opacity:W(),padding:F(),saturate:W(),scale:W(),sepia:Y(),skew:W(),space:F(),translate:F()},classGroups:{aspect:[{aspect:["auto","square","video",gt]}],container:["container"],columns:[{columns:[Hc]}],"break-after":[{"break-after":ue()}],"break-before":[{"break-before":ue()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ge(),gt]}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Lg,gt]}],basis:[{basis:$()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",gt]}],grow:[{grow:Y()}],shrink:[{shrink:Y()}],order:[{order:["first","last","none",Lg,gt]}],"grid-cols":[{"grid-cols":[jg]}],"col-start-end":[{col:["auto",{span:["full",Lg,gt]},gt]}],"col-start":[{"col-start":be()}],"col-end":[{"col-end":be()}],"grid-rows":[{"grid-rows":[jg]}],"row-start-end":[{row:["auto",{span:[Lg,gt]},gt]}],"row-start":[{"row-start":be()}],"row-end":[{"row-end":be()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",gt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",gt]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...H()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...H(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...H(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[C]}],px:[{px:[C]}],py:[{py:[C]}],ps:[{ps:[C]}],pe:[{pe:[C]}],pt:[{pt:[C]}],pr:[{pr:[C]}],pb:[{pb:[C]}],pl:[{pl:[C]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",gt,e]}],"min-w":[{"min-w":[gt,e,"min","max","fit"]}],"max-w":[{"max-w":[gt,e,"none","full","min","max","fit","prose",{screen:[Hc]},Hc]}],h:[{h:[gt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[gt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[gt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[gt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Hc,Uc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",fk]}],"font-family":[{font:[jg]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",gt]}],"line-clamp":[{"line-clamp":["none",Cp,fk]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Rl,gt]}],"list-image":[{"list-image":["none",gt]}],"list-style-type":[{list:["none","disc","decimal",gt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...le(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Rl,Uc]}],"underline-offset":[{"underline-offset":["auto",Rl,gt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",gt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",gt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ge(),Ase]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Rse]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Mse]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...le(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:le()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...le()]}],"outline-offset":[{"outline-offset":[Rl,gt]}],"outline-w":[{outline:[Rl,Uc]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[Rl,Uc]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Hc,Dse]}],"shadow-color":[{shadow:[jg]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...Q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Q()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Hc,gt]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[f]}],saturate:[{saturate:[E]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",gt]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",gt]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",gt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[Lg,gt]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",gt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",gt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",gt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Rl,Uc,fk]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},$se=bse(Vse);function Ve(...t){return $se(ca(t))}const gN=xC("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Ne=g.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...o},s)=>{const i=r?pc:"button";return d.jsx(i,{className:Ve(gN({variant:e,size:n,className:t})),ref:s,...o})});Ne.displayName="Button";var B9={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let o=t.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Bse=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const o=t[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const s=t[n++];e[r++]=String.fromCharCode((o&31)<<6|s&63)}else if(o>239&&o<365){const s=t[n++],i=t[n++],a=t[n++],l=((o&7)<<18|(s&63)<<12|(i&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],i=t[n++];e[r++]=String.fromCharCode((o&15)<<12|(s&63)<<6|i&63)}}return e.join("")},nB={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<t.length;o+=3){const s=t[o],i=o+1<t.length,a=i?t[o+1]:0,l=o+2<t.length,c=l?t[o+2]:0,u=s>>2,f=(s&3)<<4|a>>4;let h=(a&15)<<2|c>>6,p=c&63;l||(p=64,i||(h=64)),r.push(n[u],n[f],n[h],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(tB(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Bse(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<t.length;){const s=n[t.charAt(o++)],a=o<t.length?n[t.charAt(o)]:0;++o;const c=o<t.length?n[t.charAt(o)]:64;++o;const f=o<t.length?n[t.charAt(o)]:64;if(++o,s==null||a==null||c==null||f==null)throw new Fse;const h=s<<2|a>>4;if(r.push(h),c!==64){const p=a<<4&240|c>>2;if(r.push(p),f!==64){const m=c<<6&192|f;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Fse extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Use=function(t){const e=tB(t);return nB.encodeByteArray(e,!0)},tx=function(t){return Use(t).replace(/\./g,"")},rB=function(t){try{return nB.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hse(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zse=()=>Hse().__FIREBASE_DEFAULTS__,Wse=()=>{if(typeof process>"u"||typeof B9>"u")return;const t=B9.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Gse=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&rB(t[1]);return e&&JSON.parse(e)},_C=()=>{try{return zse()||Wse()||Gse()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},oB=t=>{var e,n;return(n=(e=_C())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},qse=t=>{const e=oB(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},sB=()=>{var t;return(t=_C())===null||t===void 0?void 0:t.config},iB=t=>{var e;return(e=_C())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kse{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yse(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[tx(JSON.stringify(n)),tx(JSON.stringify(i)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Qse(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vo())}function Xse(){var t;const e=(t=_C())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Jse(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aB(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Zse(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eie(){const t=vo();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function tie(){return!Xse()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lB(){try{return typeof indexedDB=="object"}catch{return!1}}function cB(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var s;e(((s=o.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function nie(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rie="FirebaseError";class ua extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=rie,Object.setPrototypeOf(this,ua.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qf.prototype.create)}}class qf{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,s=this.errors[e],i=s?oie(s,r):"Error",a=`${this.serviceName}: ${i} (${o}).`;return new ua(o,a,r)}}function oie(t,e){return t.replace(sie,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const sie=/\{\$([^}]+)}/g;function iie(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function h1(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const s=t[o],i=e[o];if(F9(s)&&F9(i)){if(!h1(s,i))return!1}else if(s!==i)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function F9(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ny(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,s]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(s)}}),e}function ry(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function aie(t,e){const n=new lie(t,e);return n.subscribe.bind(n)}class lie{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");cie(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=hk),o.error===void 0&&(o.error=hk),o.complete===void 0&&(o.complete=hk);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cie(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function hk(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uie=1e3,die=2,fie=4*60*60*1e3,hie=.5;function U9(t,e=uie,n=die){const r=e*Math.pow(n,t),o=Math.round(hie*r*(Math.random()-.5)*2);return Math.min(fie,r+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(t){return t&&t._delegate?t._delegate:t}class Ji{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pie{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Kse;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(o)return null;throw s}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gie(e))try{this.getOrInitializeService({instanceIdentifier:Bd})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:o});r.resolve(s)}catch{}}}}clearInstance(e=Bd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bd){return this.instances.has(e)}getOptions(e=Bd){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&i.resolve(o)}return o}onInit(e,n){var r;const o=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(o,s);const i=this.instances.get(o);return i&&e(i,o),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mie(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Bd){return this.component?this.component.multipleInstances?e:Bd:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mie(t){return t===Bd?void 0:t}function gie(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yie{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new pie(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(At||(At={}));const vie={debug:At.DEBUG,verbose:At.VERBOSE,info:At.INFO,warn:At.WARN,error:At.ERROR,silent:At.SILENT},wie=At.INFO,bie={[At.DEBUG]:"log",[At.VERBOSE]:"log",[At.INFO]:"info",[At.WARN]:"warn",[At.ERROR]:"error"},xie=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),o=bie[e];if(o)console[o](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class CC{constructor(e){this.name=e,this._logLevel=wie,this._logHandler=xie,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in At))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vie[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,At.DEBUG,...e),this._logHandler(this,At.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,At.VERBOSE,...e),this._logHandler(this,At.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,At.INFO,...e),this._logHandler(this,At.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,At.WARN,...e),this._logHandler(this,At.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,At.ERROR,...e),this._logHandler(this,At.ERROR,...e)}}const _ie=(t,e)=>e.some(n=>t instanceof n);let H9,z9;function Cie(){return H9||(H9=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Eie(){return z9||(z9=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uB=new WeakMap,yN=new WeakMap,dB=new WeakMap,pk=new WeakMap,XA=new WeakMap;function kie(t){const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{n(Nu(t.result)),o()},i=()=>{r(t.error),o()};t.addEventListener("success",s),t.addEventListener("error",i)});return e.then(n=>{n instanceof IDBCursor&&uB.set(n,t)}).catch(()=>{}),XA.set(e,t),e}function Sie(t){if(yN.has(t))return;const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{n(),o()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});yN.set(t,e)}let vN={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return yN.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dB.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nu(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Tie(t){vN=t(vN)}function Nie(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(mk(this),e,...n);return dB.set(r,e.sort?e.sort():[e]),Nu(r)}:Eie().includes(t)?function(...e){return t.apply(mk(this),e),Nu(uB.get(this))}:function(...e){return Nu(t.apply(mk(this),e))}}function Iie(t){return typeof t=="function"?Nie(t):(t instanceof IDBTransaction&&Sie(t),_ie(t,Cie())?new Proxy(t,vN):t)}function Nu(t){if(t instanceof IDBRequest)return kie(t);if(pk.has(t))return pk.get(t);const e=Iie(t);return e!==t&&(pk.set(t,e),XA.set(e,t)),e}const mk=t=>XA.get(t);function fB(t,e,{blocked:n,upgrade:r,blocking:o,terminated:s}={}){const i=indexedDB.open(t,e),a=Nu(i);return r&&i.addEventListener("upgradeneeded",l=>{r(Nu(i.result),l.oldVersion,l.newVersion,Nu(i.transaction),l)}),n&&i.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),o&&l.addEventListener("versionchange",c=>o(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Rie=["get","getKey","getAll","getAllKeys","count"],Aie=["put","add","delete","clear"],gk=new Map;function W9(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gk.get(e))return gk.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=Aie.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||Rie.includes(n)))return;const s=async function(i,...a){const l=this.transaction(i,o?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),o&&l.done]))[0]};return gk.set(e,s),s}Tie(t=>({...t,get:(e,n,r)=>W9(e,n)||t.get(e,n,r),has:(e,n)=>!!W9(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pie{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Mie(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Mie(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const wN="@firebase/app",G9="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=new CC("@firebase/app"),Die="@firebase/app-compat",Oie="@firebase/analytics-compat",Lie="@firebase/analytics",jie="@firebase/app-check-compat",Vie="@firebase/app-check",$ie="@firebase/auth",Bie="@firebase/auth-compat",Fie="@firebase/database",Uie="@firebase/data-connect",Hie="@firebase/database-compat",zie="@firebase/functions",Wie="@firebase/functions-compat",Gie="@firebase/installations",qie="@firebase/installations-compat",Kie="@firebase/messaging",Yie="@firebase/messaging-compat",Qie="@firebase/performance",Xie="@firebase/performance-compat",Jie="@firebase/remote-config",Zie="@firebase/remote-config-compat",eae="@firebase/storage",tae="@firebase/storage-compat",nae="@firebase/firestore",rae="@firebase/vertexai",oae="@firebase/firestore-compat",sae="firebase",iae="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN="[DEFAULT]",aae={[wN]:"fire-core",[Die]:"fire-core-compat",[Lie]:"fire-analytics",[Oie]:"fire-analytics-compat",[Vie]:"fire-app-check",[jie]:"fire-app-check-compat",[$ie]:"fire-auth",[Bie]:"fire-auth-compat",[Fie]:"fire-rtdb",[Uie]:"fire-data-connect",[Hie]:"fire-rtdb-compat",[zie]:"fire-fn",[Wie]:"fire-fn-compat",[Gie]:"fire-iid",[qie]:"fire-iid-compat",[Kie]:"fire-fcm",[Yie]:"fire-fcm-compat",[Qie]:"fire-perf",[Xie]:"fire-perf-compat",[Jie]:"fire-rc",[Zie]:"fire-rc-compat",[eae]:"fire-gcs",[tae]:"fire-gcs-compat",[nae]:"fire-fst",[oae]:"fire-fst-compat",[rae]:"fire-vertex","fire-js":"fire-js",[sae]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx=new Map,lae=new Map,xN=new Map;function q9(t,e){try{t.container.addComponent(e)}catch(n){mc.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ya(t){const e=t.name;if(xN.has(e))return mc.debug(`There were multiple attempts to register component ${e}.`),!1;xN.set(e,t);for(const n of nx.values())q9(n,t);for(const n of lae.values())q9(n,t);return!0}function Kf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function oi(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cae={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Iu=new qf("app","Firebase",cae);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uae{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ji("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Iu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm=iae;function hB(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:bN,automaticDataCollectionEnabled:!1},e),o=r.name;if(typeof o!="string"||!o)throw Iu.create("bad-app-name",{appName:String(o)});if(n||(n=sB()),!n)throw Iu.create("no-options");const s=nx.get(o);if(s){if(h1(n,s.options)&&h1(r,s.config))return s;throw Iu.create("duplicate-app",{appName:o})}const i=new yie(o);for(const l of xN.values())i.addComponent(l);const a=new uae(n,r,i);return nx.set(o,a),a}function JA(t=bN){const e=nx.get(t);if(!e&&t===bN&&sB())return hB();if(!e)throw Iu.create("no-app",{appName:t});return e}function ii(t,e,n){var r;let o=(r=aae[t])!==null&&r!==void 0?r:t;n&&(o+=`-${n}`);const s=o.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${o}" with version "${e}":`];s&&a.push(`library name "${o}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mc.warn(a.join(" "));return}Ya(new Ji(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dae="firebase-heartbeat-database",fae=1,p1="firebase-heartbeat-store";let yk=null;function pB(){return yk||(yk=fB(dae,fae,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(p1)}catch(n){console.warn(n)}}}}).catch(t=>{throw Iu.create("idb-open",{originalErrorMessage:t.message})})),yk}async function hae(t){try{const n=(await pB()).transaction(p1),r=await n.objectStore(p1).get(mB(t));return await n.done,r}catch(e){if(e instanceof ua)mc.warn(e.message);else{const n=Iu.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});mc.warn(n.message)}}}async function K9(t,e){try{const r=(await pB()).transaction(p1,"readwrite");await r.objectStore(p1).put(e,mB(t)),await r.done}catch(n){if(n instanceof ua)mc.warn(n.message);else{const r=Iu.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});mc.warn(r.message)}}}function mB(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pae=1024,mae=30*24*60*60*1e3;class gae{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vae(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Y9();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const a=new Date(i.date).valueOf();return Date.now()-a<=mae}),this._storage.overwrite(this._heartbeatsCache))}catch(r){mc.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Y9(),{heartbeatsToSend:r,unsentEntries:o}=yae(this._heartbeatsCache.heartbeats),s=tx(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return mc.warn(n),""}}}function Y9(){return new Date().toISOString().substring(0,10)}function yae(t,e=pae){const n=[];let r=t.slice();for(const o of t){const s=n.find(i=>i.agent===o.agent);if(s){if(s.dates.push(o.date),Q9(n)>e){s.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Q9(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class vae{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lB()?cB().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await hae(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return K9(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return K9(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Q9(t){return tx(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wae(t){Ya(new Ji("platform-logger",e=>new Pie(e),"PRIVATE")),Ya(new Ji("heartbeat",e=>new gae(e),"PRIVATE")),ii(wN,G9,t),ii(wN,G9,"esm2017"),ii("fire-js","")}wae("");var bae="firebase",xae="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ii(bae,xae,"app");var co=function(){return co=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},co.apply(this,arguments)};function Mm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function gB(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,s;r<o;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function yB(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _ae=yB,vB=new qf("auth","Firebase",yB());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=new CC("@firebase/auth");function Cae(t,...e){rx.logLevel<=At.WARN&&rx.warn(`Auth (${Pm}): ${t}`,...e)}function J0(t,...e){rx.logLevel<=At.ERROR&&rx.error(`Auth (${Pm}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(t,...e){throw e4(t,...e)}function Ki(t,...e){return e4(t,...e)}function ZA(t,e,n){const r=Object.assign(Object.assign({},_ae()),{[e]:n});return new qf("auth","Firebase",r).create(e,{appName:t.name})}function Ha(t){return ZA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Eae(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&pi(t,"argument-error"),ZA(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function e4(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return vB.create(t,...e)}function it(t,e,...n){if(!t)throw e4(e,...n)}function Gl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw J0(e),new Error(e)}function gc(t,e){t||Gl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function kae(){return X9()==="http:"||X9()==="https:"}function X9(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sae(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kae()||aB()||"connection"in navigator)?navigator.onLine:!0}function Tae(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(e,n){this.shortDelay=e,this.longDelay=n,gc(n>e,"Short delay should be less than long delay!"),this.isMobile=Qse()||Zse()}get(){return Sae()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(t,e){gc(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wB{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nae={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iae=new gv(3e4,6e4);function sd(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function il(t,e,n,r,o={}){return bB(t,o,async()=>{let s={},i={};r&&(e==="GET"?i=r:s={body:JSON.stringify(r)});const a=mv(Object.assign({key:t.config.apiKey},i)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return Jse()||(c.referrerPolicy="no-referrer"),wB.fetch()(xB(t,t.config.apiHost,n,a),c)})}async function bB(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Nae),e);try{const o=new Aae(t),s=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw Kw(t,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const a=s.ok?i.errorMessage:i.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kw(t,"credential-already-in-use",i);if(l==="EMAIL_EXISTS")throw Kw(t,"email-already-in-use",i);if(l==="USER_DISABLED")throw Kw(t,"user-disabled",i);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw ZA(t,u,c);pi(t,u)}}catch(o){if(o instanceof ua)throw o;pi(t,"network-request-failed",{message:String(o)})}}async function yv(t,e,n,r,o={}){const s=await il(t,e,n,r,o);return"mfaPendingCredential"in s&&pi(t,"multi-factor-auth-required",{_serverResponse:s}),s}function xB(t,e,n,r){const o=`${e}${n}?${r}`;return t.config.emulator?t4(t.config,o):`${t.config.apiScheme}://${o}`}function Rae(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Aae{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ki(this.auth,"network-request-failed")),Iae.get())})}}function Kw(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=Ki(t,e,r);return o.customData._tokenResponse=n,o}function J9(t){return t!==void 0&&t.enterprise!==void 0}class Pae{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Rae(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Mae(t,e){return il(t,"GET","/v2/recaptchaConfig",sd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dae(t,e){return il(t,"POST","/v1/accounts:delete",e)}async function _B(t,e){return il(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Oae(t,e=!1){const n=Bn(t),r=await n.getIdToken(e),o=n4(r);it(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const s=typeof o.firebase=="object"?o.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:o,token:r,authTime:Sy(vk(o.auth_time)),issuedAtTime:Sy(vk(o.iat)),expirationTime:Sy(vk(o.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function vk(t){return Number(t)*1e3}function n4(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return J0("JWT malformed, contained fewer than 3 sections"),null;try{const o=rB(n);return o?JSON.parse(o):(J0("Failed to decode base64 JWT payload"),null)}catch(o){return J0("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Z9(t){const e=n4(t);return it(e,"internal-error"),it(typeof e.exp<"u","internal-error"),it(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _f(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ua&&Lae(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Lae({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jae{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sy(this.lastLoginAt),this.creationTime=Sy(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ox(t){var e;const n=t.auth,r=await t.getIdToken(),o=await _f(t,_B(n,{idToken:r}));it(o==null?void 0:o.users.length,n,"internal-error");const s=o.users[0];t._notifyReloadListener(s);const i=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?CB(s.providerUserInfo):[],a=$ae(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new CN(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function Vae(t){const e=Bn(t);await ox(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $ae(t,e){return[...t.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function CB(t){return t.map(e=>{var{providerId:n}=e,r=Mm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bae(t,e){const n=await bB(t,{},async()=>{const r=mv({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:s}=t.config,i=xB(t,o,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",wB.fetch()(i,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Fae(t,e){return il(t,"POST","/v2/accounts:revokeToken",sd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){it(e.idToken,"internal-error"),it(typeof e.idToken<"u","internal-error"),it(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Z9(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){it(e.length!==0,"internal-error");const n=Z9(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(it(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:s}=await Bae(e,n);this.updateTokensAndExpiration(r,o,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:s}=n,i=new Ep;return r&&(it(typeof r=="string","internal-error",{appName:e}),i.refreshToken=r),o&&(it(typeof o=="string","internal-error",{appName:e}),i.accessToken=o),s&&(it(typeof s=="number","internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ep,this.toJSON())}_performRefresh(){return Gl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(t,e){it(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ql{constructor(e){var{uid:n,auth:r,stsTokenManager:o}=e,s=Mm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jae(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new CN(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await _f(this,this.stsTokenManager.getToken(this.auth,e));return it(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Oae(this,e)}reload(){return Vae(this)}_assign(e){this!==e&&(it(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ql(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){it(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ox(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(oi(this.auth.app))return Promise.reject(Ha(this.auth));const e=await this.getIdToken();return await _f(this,Dae(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,o,s,i,a,l,c,u;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(o=n.email)!==null&&o!==void 0?o:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,m=(i=n.photoURL)!==null&&i!==void 0?i:void 0,y=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,b=(c=n.createdAt)!==null&&c!==void 0?c:void 0,C=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:E,emailVerified:R,isAnonymous:D,providerData:O,stsTokenManager:T}=n;it(E&&T,e,"internal-error");const I=Ep.fromJSON(this.name,T);it(typeof E=="string",e,"internal-error"),zc(f,e.name),zc(h,e.name),it(typeof R=="boolean",e,"internal-error"),it(typeof D=="boolean",e,"internal-error"),zc(p,e.name),zc(m,e.name),zc(y,e.name),zc(x,e.name),zc(b,e.name),zc(C,e.name);const P=new ql({uid:E,auth:e,email:h,emailVerified:R,displayName:f,isAnonymous:D,photoURL:m,phoneNumber:p,tenantId:y,stsTokenManager:I,createdAt:b,lastLoginAt:C});return O&&Array.isArray(O)&&(P.providerData=O.map(L=>Object.assign({},L))),x&&(P._redirectEventId=x),P}static async _fromIdTokenResponse(e,n,r=!1){const o=new Ep;o.updateFromServerResponse(n);const s=new ql({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await ox(s),s}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];it(o.localId!==void 0,"internal-error");const s=o.providerUserInfo!==void 0?CB(o.providerUserInfo):[],i=!(o.email&&o.passwordHash)&&!(s!=null&&s.length),a=new Ep;a.updateFromIdToken(r);const l=new ql({uid:o.localId,auth:e,stsTokenManager:a,isAnonymous:i}),c={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new CN(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=new Map;function Kl(t){gc(t instanceof Function,"Expected a class definition");let e=eD.get(t);return e?(gc(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,eD.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EB{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}EB.type="NONE";const tD=EB;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(t,e,n){return`firebase:${t}:${e}:${n}`}class kp{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:s}=this.auth;this.fullUserKey=Z0(this.userKey,o.apiKey,s),this.fullPersistenceKey=Z0("persistence",o.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ql._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new kp(Kl(tD),e,r);const o=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=o[0]||Kl(tD);const i=Z0(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(i);if(u){const f=ql._fromJSON(e,u);c!==s&&(a=f),s=c;break}}catch{}const l=o.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new kp(s,e,r):(s=l[0],a&&await s._set(i,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(i)}catch{}})),new kp(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NB(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kB(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RB(e))return"Blackberry";if(AB(e))return"Webos";if(SB(e))return"Safari";if((e.includes("chrome/")||TB(e))&&!e.includes("edge/"))return"Chrome";if(IB(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function kB(t=vo()){return/firefox\//i.test(t)}function SB(t=vo()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TB(t=vo()){return/crios\//i.test(t)}function NB(t=vo()){return/iemobile/i.test(t)}function IB(t=vo()){return/android/i.test(t)}function RB(t=vo()){return/blackberry/i.test(t)}function AB(t=vo()){return/webos/i.test(t)}function r4(t=vo()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Uae(t=vo()){var e;return r4(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Hae(){return eie()&&document.documentMode===10}function PB(t=vo()){return r4(t)||IB(t)||AB(t)||RB(t)||/windows phone/i.test(t)||NB(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MB(t,e=[]){let n;switch(t){case"Browser":n=nD(vo());break;case"Worker":n=`${nD(vo())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Pm}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zae{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((i,a)=>{try{const l=e(s);i(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wae(t,e={}){return il(t,"GET","/v2/passwordPolicy",sd(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gae=6;class qae{constructor(e){var n,r,o,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=i.minPasswordLength)!==null&&n!==void 0?n:Gae,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,o,s,i,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(o=l.containsLowercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsNumericCharacter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kae{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rD(this),this.idTokenSubscription=new rD(this),this.beforeStateQueue=new zae(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vB,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Kl(n)),this._initializationPromise=this.queue(async()=>{var r,o;if(!this._deleted&&(this.persistenceManager=await kp.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await _B(this,{idToken:e}),r=await ql._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(oi(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=o==null?void 0:o._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===a)&&(l!=null&&l.user)&&(o=l.user,s=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(o)}catch(i){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return it(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ox(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Tae()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(oi(this.app))return Promise.reject(Ha(this));const n=e?Bn(e):null;return n&&it(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&it(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return oi(this.app)?Promise.reject(Ha(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return oi(this.app)?Promise.reject(Ha(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Kl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Wae(this),n=new qae(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new qf("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Fae(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Kl(e)||this._popupRedirectResolver;it(n,this,"argument-error"),this.redirectPersistenceManager=await kp.create(this,[Kl(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(it(a,this,"internal-error"),a.then(()=>{i||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,o);return()=>{i=!0,l()}}else{const l=e.addObserver(n);return()=>{i=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return it(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=MB(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Cae(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function id(t){return Bn(t)}class rD{constructor(e){this.auth=e,this.observer=null,this.addObserver=aie(n=>this.observer=n)}get next(){return it(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EC={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Yae(t){EC=t}function DB(t){return EC.loadJS(t)}function Qae(){return EC.recaptchaEnterpriseScript}function Xae(){return EC.gapiScript}function Jae(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Zae{constructor(){this.enterprise=new ele}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class ele{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const tle="recaptcha-enterprise",OB="NO_RECAPTCHA";class nle{constructor(e){this.type=tle,this.auth=id(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,a)=>{Mae(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new Pae(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,i(c.siteKey)}}).catch(l=>{a(l)})})}function o(s,i,a){const l=window.grecaptcha;J9(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{i(c)}).catch(()=>{i(OB)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Zae().execute("siteKey",{action:"verify"}):new Promise((s,i)=>{r(this.auth).then(a=>{if(!n&&J9(window.grecaptcha))o(a,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Qae();l.length!==0&&(l+=a),DB(l).then(()=>{o(a,s,i)}).catch(c=>{i(c)})}}).catch(a=>{i(a)})})}}async function oD(t,e,n,r=!1,o=!1){const s=new nle(t);let i;if(o)i=OB;else try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function EN(t,e,n,r,o){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await oD(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await oD(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rle(t,e){const n=Kf(t,"auth");if(n.isInitialized()){const o=n.getImmediate(),s=n.getOptions();if(h1(s,e??{}))return o;pi(o,"already-initialized")}return n.initialize({options:e})}function ole(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Kl);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function sle(t,e,n){const r=id(t);it(r._canInitEmulator,r,"emulator-config-failed"),it(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,s=LB(e),{host:i,port:a}=ile(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${i}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:i,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:o})}),ale()}function LB(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ile(t){const e=LB(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const s=o[1];return{host:s,port:sD(r.substr(s.length+1))}}else{const[s,i]=r.split(":");return{host:s,port:sD(i)}}}function sD(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function ale(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Gl("not implemented")}_getIdTokenResponse(e){return Gl("not implemented")}_linkToIdToken(e,n){return Gl("not implemented")}_getReauthenticationResolver(e){return Gl("not implemented")}}async function lle(t,e){return il(t,"POST","/v1/accounts:update",e)}async function cle(t,e){return il(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ule(t,e){return yv(t,"POST","/v1/accounts:signInWithPassword",sd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dle(t,e){return yv(t,"POST","/v1/accounts:signInWithEmailLink",sd(t,e))}async function fle(t,e){return yv(t,"POST","/v1/accounts:signInWithEmailLink",sd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1 extends o4{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new m1(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new m1(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return EN(e,n,"signInWithPassword",ule);case"emailLink":return dle(e,{email:this._email,oobCode:this._password});default:pi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return EN(e,r,"signUpPassword",cle);case"emailLink":return fle(e,{idToken:n,email:this._email,oobCode:this._password});default:pi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sp(t,e){return yv(t,"POST","/v1/accounts:signInWithIdp",sd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hle="http://localhost";class Cf extends o4{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Cf(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):pi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=n,s=Mm(n,["providerId","signInMethod"]);if(!r||!o)return null;const i=new Cf(r,o);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){const n=this.buildRequest();return Sp(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Sp(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Sp(e,n)}buildRequest(){const e={requestUri:hle,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=mv(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ple(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mle(t){const e=ny(ry(t)).link,n=e?ny(ry(e)).deep_link_id:null,r=ny(ry(t)).deep_link_id;return(r?ny(ry(r)).link:null)||r||n||e||t}class s4{constructor(e){var n,r,o,s,i,a;const l=ny(ry(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,f=ple((o=l.mode)!==null&&o!==void 0?o:null);it(c&&u&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(i=l.languageCode)!==null&&i!==void 0?i:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=mle(e);try{return new s4(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(){this.providerId=Dm.PROVIDER_ID}static credential(e,n){return m1._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=s4.parseLink(n);return it(r,"argument-error"),m1._fromEmailAndCode(e,r.code,r.tenantId)}}Dm.PROVIDER_ID="password";Dm.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Dm.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv extends i4{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends vv{constructor(){super("facebook.com")}static credential(e){return Cf._fromParams({providerId:su.PROVIDER_ID,signInMethod:su.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return su.credentialFromTaggedObject(e)}static credentialFromError(e){return su.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return su.credential(e.oauthAccessToken)}catch{return null}}}su.FACEBOOK_SIGN_IN_METHOD="facebook.com";su.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl extends vv{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Cf._fromParams({providerId:Fl.PROVIDER_ID,signInMethod:Fl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Fl.credentialFromTaggedObject(e)}static credentialFromError(e){return Fl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Fl.credential(n,r)}catch{return null}}}Fl.GOOGLE_SIGN_IN_METHOD="google.com";Fl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu extends vv{constructor(){super("github.com")}static credential(e){return Cf._fromParams({providerId:iu.PROVIDER_ID,signInMethod:iu.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return iu.credentialFromTaggedObject(e)}static credentialFromError(e){return iu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return iu.credential(e.oauthAccessToken)}catch{return null}}}iu.GITHUB_SIGN_IN_METHOD="github.com";iu.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au extends vv{constructor(){super("twitter.com")}static credential(e,n){return Cf._fromParams({providerId:au.PROVIDER_ID,signInMethod:au.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return au.credentialFromTaggedObject(e)}static credentialFromError(e){return au.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return au.credential(n,r)}catch{return null}}}au.TWITTER_SIGN_IN_METHOD="twitter.com";au.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gle(t,e){return yv(t,"POST","/v1/accounts:signUp",sd(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const s=await ql._fromIdTokenResponse(e,r,o),i=iD(r);return new Ef({user:s,providerId:i,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=iD(r);return new Ef({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function iD(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx extends ua{constructor(e,n,r,o){var s;super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,sx.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new sx(e,n,r,o)}}function jB(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?sx._fromErrorAndOperation(t,s,e,r):s})}async function yle(t,e,n=!1){const r=await _f(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ef._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vle(t,e,n=!1){const{auth:r}=t;if(oi(r.app))return Promise.reject(Ha(r));const o="reauthenticate";try{const s=await _f(t,jB(r,o,e,t),n);it(s.idToken,r,"internal-error");const i=n4(s.idToken);it(i,r,"internal-error");const{sub:a}=i;return it(t.uid===a,r,"user-mismatch"),Ef._forOperation(t,o,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&pi(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VB(t,e,n=!1){if(oi(t.app))return Promise.reject(Ha(t));const r="signIn",o=await jB(t,r,e),s=await Ef._fromIdTokenResponse(t,r,o);return n||await t._updateCurrentUser(s.user),s}async function wle(t,e){return VB(id(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $B(t){const e=id(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ble(t,e,n){if(oi(t.app))return Promise.reject(Ha(t));const r=id(t),i=await EN(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gle).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&$B(t),l}),a=await Ef._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(a.user),a}function xle(t,e,n){return oi(t.app)?Promise.reject(Ha(t)):wle(Bn(t),Dm.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&$B(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _le(t,e){return il(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cle(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Bn(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},i=await _f(r,_le(r.auth,s));r.displayName=i.displayName||null,r.photoURL=i.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(i)}function Ele(t,e){const n=Bn(t);return oi(n.auth.app)?Promise.reject(Ha(n.auth)):BB(n,e,null)}function kle(t,e){return BB(Bn(t),null,e)}async function BB(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const i=await _f(t,lle(r,s));await t._updateTokensIfNecessary(i,!0)}function Sle(t,e,n,r){return Bn(t).onIdTokenChanged(e,n,r)}function Tle(t,e,n){return Bn(t).beforeAuthStateChanged(e,n)}function Nle(t,e,n,r){return Bn(t).onAuthStateChanged(e,n,r)}const ix="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ix,"1"),this.storage.removeItem(ix),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ile=1e3,Rle=10;class UB extends FB{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=PB(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((i,a,l)=>{this.notifyListeners(i,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const i=this.storage.getItem(r);!n&&this.localCache[r]===i||this.notifyListeners(r,i)},s=this.storage.getItem(r);Hae()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Rle):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Ile)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}UB.type="LOCAL";const Ale=UB;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HB extends FB{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}HB.type="SESSION";const zB=HB;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ple(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new kC(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:s}=n.data,i=this.handlersMap[o];if(!(i!=null&&i.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const a=Array.from(i).map(async c=>c(n.origin,s)),l=await Ple(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kC.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mle{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let s,i;return new Promise((a,l)=>{const c=a4("",20);o.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);i={messageChannel:o,onMessage(f){const h=f;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(i),o.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[o.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(){return window}function Dle(t){za().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WB(){return typeof za().WorkerGlobalScope<"u"&&typeof za().importScripts=="function"}async function Ole(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Lle(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function jle(){return WB()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GB="firebaseLocalStorageDb",Vle=1,ax="firebaseLocalStorage",qB="fbase_key";class wv{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function SC(t,e){return t.transaction([ax],e?"readwrite":"readonly").objectStore(ax)}function $le(){const t=indexedDB.deleteDatabase(GB);return new wv(t).toPromise()}function kN(){const t=indexedDB.open(GB,Vle);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ax,{keyPath:qB})}catch(o){n(o)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ax)?e(r):(r.close(),await $le(),e(await kN()))})})}async function aD(t,e,n){const r=SC(t,!0).put({[qB]:e,value:n});return new wv(r).toPromise()}async function Ble(t,e){const n=SC(t,!1).get(e),r=await new wv(n).toPromise();return r===void 0?null:r.value}function lD(t,e){const n=SC(t,!0).delete(e);return new wv(n).toPromise()}const Fle=800,Ule=3;class KB{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kN(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Ule)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return WB()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kC._getInstance(jle()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Ole(),!this.activeServiceWorker)return;this.sender=new Mle(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Lle()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kN();return await aD(e,ix,"1"),await lD(e,ix),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>aD(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Ble(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>lD(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const s=SC(o,!1).getAll();return new wv(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:s}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Fle)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}KB.type="LOCAL";const Hle=KB;new gv(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YB(t,e){return e?Kl(e):(it(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4 extends o4{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Sp(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Sp(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Sp(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function zle(t){return VB(t.auth,new l4(t),t.bypassAuthState)}function Wle(t){const{auth:e,user:n}=t;return it(n,e,"internal-error"),vle(n,new l4(t),t.bypassAuthState)}async function Gle(t){const{auth:e,user:n}=t;return it(n,e,"internal-error"),yle(n,new l4(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QB{constructor(e,n,r,o,s=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:s,error:i,type:a}=e;if(i){this.reject(i);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zle;case"linkViaPopup":case"linkViaRedirect":return Gle;case"reauthViaPopup":case"reauthViaRedirect":return Wle;default:pi(this.auth,"internal-error")}}resolve(e){gc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qle=new gv(2e3,1e4);async function XB(t,e,n){if(oi(t.app))return Promise.reject(Ki(t,"operation-not-supported-in-this-environment"));const r=id(t);Eae(t,e,i4);const o=YB(r,n);return new Qd(r,"signInViaPopup",e,o).executeNotNull()}class Qd extends QB{constructor(e,n,r,o,s){super(e,n,o,s),this.provider=r,this.authWindow=null,this.pollId=null,Qd.currentPopupAction&&Qd.currentPopupAction.cancel(),Qd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return it(e,this.auth,"internal-error"),e}async onExecution(){gc(this.filter.length===1,"Popup operations only handle one event");const e=a4();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ki(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ki(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ki(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qle.get())};e()}}Qd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kle="pendingRedirect",eb=new Map;class Yle extends QB{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=eb.get(this.auth._key());if(!e){try{const r=await Qle(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}eb.set(this.auth._key(),e)}return this.bypassAuthState||eb.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Qle(t,e){const n=Zle(e),r=Jle(t);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function Xle(t,e){eb.set(t._key(),e)}function Jle(t){return Kl(t._redirectPersistence)}function Zle(t){return Z0(Kle,t.config.apiKey,t.name)}async function ece(t,e,n=!1){if(oi(t.app))return Promise.reject(Ha(t));const r=id(t),o=YB(r,e),i=await new Yle(r,o,n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tce=10*60*1e3;class nce{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rce(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!JB(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ki(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tce&&this.cachedEventUids.clear(),this.cachedEventUids.has(cD(e))}saveEventToCache(e){this.cachedEventUids.add(cD(e)),this.lastProcessedEventTime=Date.now()}}function cD(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function JB({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rce(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return JB(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oce(t,e={}){return il(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sce=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ice=/^https?/;async function ace(t){if(t.config.emulator)return;const{authorizedDomains:e}=await oce(t);for(const n of e)try{if(lce(n))return}catch{}pi(t,"unauthorized-domain")}function lce(t){const e=_N(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&i.hostname===r}if(!ice.test(n))return!1;if(sce.test(t))return r===t;const o=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cce=new gv(3e4,6e4);function uD(){const t=za().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function uce(t){return new Promise((e,n)=>{var r,o,s;function i(){uD(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uD(),n(Ki(t,"network-request-failed"))},timeout:cce.get()})}if(!((o=(r=za().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((s=za().gapi)===null||s===void 0)&&s.load)i();else{const a=Jae("iframefcb");return za()[a]=()=>{gapi.load?i():n(Ki(t,"network-request-failed"))},DB(`${Xae()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw tb=null,e})}let tb=null;function dce(t){return tb=tb||uce(t),tb}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fce=new gv(5e3,15e3),hce="__/auth/iframe",pce="emulator/auth/iframe",mce={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gce=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yce(t){const e=t.config;it(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?t4(e,pce):`https://${t.config.authDomain}/${hce}`,r={apiKey:e.apiKey,appName:t.name,v:Pm},o=gce.get(t.config.apiHost);o&&(r.eid=o);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${mv(r).slice(1)}`}async function vce(t){const e=await dce(t),n=za().gapi;return it(n,t,"internal-error"),e.open({where:document.body,url:yce(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mce,dontclear:!0},r=>new Promise(async(o,s)=>{await r.restyle({setHideOnLeave:!1});const i=Ki(t,"network-request-failed"),a=za().setTimeout(()=>{s(i)},fce.get());function l(){za().clearTimeout(a),o(r)}r.ping(l).then(l,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wce={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bce=500,xce=600,_ce="_blank",Cce="http://localhost";class dD{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ece(t,e,n,r=bce,o=xce){const s=Math.max((window.screen.availHeight-o)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},wce),{width:r.toString(),height:o.toString(),top:s,left:i}),c=vo().toLowerCase();n&&(a=TB(c)?_ce:n),kB(c)&&(e=e||Cce,l.scrollbars="yes");const u=Object.entries(l).reduce((h,[p,m])=>`${h}${p}=${m},`,"");if(Uae(c)&&a!=="_self")return kce(e||"",a),new dD(null);const f=window.open(e||"",a,u);it(f,t,"popup-blocked");try{f.focus()}catch{}return new dD(f)}function kce(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sce="__/auth/handler",Tce="emulator/auth/handler",Nce=encodeURIComponent("fac");async function fD(t,e,n,r,o,s){it(t.config.authDomain,t,"auth-domain-config-required"),it(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Pm,eventId:o};if(e instanceof i4){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",iie(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,f]of Object.entries({}))i[u]=f}if(e instanceof vv){const u=e.getScopes().filter(f=>f!=="");u.length>0&&(i.scopes=u.join(","))}t.tenantId&&(i.tid=t.tenantId);const a=i;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${Nce}=${encodeURIComponent(l)}`:"";return`${Ice(t)}?${mv(a).slice(1)}${c}`}function Ice({config:t}){return t.emulator?t4(t,Tce):`https://${t.authDomain}/${Sce}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk="webStorageSupport";class Rce{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zB,this._completeRedirectFn=ece,this._overrideRedirectResult=Xle}async _openPopup(e,n,r,o){var s;gc((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const i=await fD(e,n,r,_N(),o);return Ece(e,i,a4())}async _openRedirect(e,n,r,o){await this._originValidation(e);const s=await fD(e,n,r,_N(),o);return Dle(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:s}=this.eventManagers[n];return o?Promise.resolve(o):(gc(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await vce(e),r=new nce(e);return n.register("authEvent",o=>(it(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wk,{type:wk},o=>{var s;const i=(s=o==null?void 0:o[0])===null||s===void 0?void 0:s[wk];i!==void 0&&n(!!i),pi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ace(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return PB()||SB()||r4()}}const Ace=Rce;var hD="@firebase/auth",pD="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pce{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){it(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mce(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Dce(t){Ya(new Ji("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:i,authDomain:a}=r.options;it(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:i,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:MB(t)},c=new Kae(r,o,s,l);return ole(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ya(new Ji("auth-internal",e=>{const n=id(e.getProvider("auth").getImmediate());return(r=>new Pce(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ii(hD,pD,Mce(t)),ii(hD,pD,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oce=5*60,Lce=iB("authIdTokenMaxAge")||Oce;let mD=null;const jce=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Lce)return;const o=n==null?void 0:n.token;mD!==o&&(mD=o,await fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Vce(t=JA()){const e=Kf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=rle(t,{popupRedirectResolver:Ace,persistence:[Hle,Ale,zB]}),r=iB("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const i=jce(s.toString());Tle(n,i,()=>i(n.currentUser)),Sle(n,a=>i(a))}}const o=oB("auth");return o&&sle(n,`http://${o}`),n}function $ce(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Yae({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=o=>{const s=Ki("internal-error");s.customData=o,n(s)},r.type="text/javascript",r.charset="UTF-8",$ce().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Dce("Browser");var gD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ru,ZB;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,I){function P(){}P.prototype=I.prototype,T.D=I.prototype,T.prototype=new P,T.prototype.constructor=T,T.C=function(L,$,F){for(var V=Array(arguments.length-2),be=2;be<arguments.length;be++)V[be-2]=arguments[be];return I.prototype[$].apply(L,V)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(T,I,P){P||(P=0);var L=Array(16);if(typeof I=="string")for(var $=0;16>$;++$)L[$]=I.charCodeAt(P++)|I.charCodeAt(P++)<<8|I.charCodeAt(P++)<<16|I.charCodeAt(P++)<<24;else for($=0;16>$;++$)L[$]=I[P++]|I[P++]<<8|I[P++]<<16|I[P++]<<24;I=T.g[0],P=T.g[1],$=T.g[2];var F=T.g[3],V=I+(F^P&($^F))+L[0]+3614090360&4294967295;I=P+(V<<7&4294967295|V>>>25),V=F+($^I&(P^$))+L[1]+3905402710&4294967295,F=I+(V<<12&4294967295|V>>>20),V=$+(P^F&(I^P))+L[2]+606105819&4294967295,$=F+(V<<17&4294967295|V>>>15),V=P+(I^$&(F^I))+L[3]+3250441966&4294967295,P=$+(V<<22&4294967295|V>>>10),V=I+(F^P&($^F))+L[4]+4118548399&4294967295,I=P+(V<<7&4294967295|V>>>25),V=F+($^I&(P^$))+L[5]+1200080426&4294967295,F=I+(V<<12&4294967295|V>>>20),V=$+(P^F&(I^P))+L[6]+2821735955&4294967295,$=F+(V<<17&4294967295|V>>>15),V=P+(I^$&(F^I))+L[7]+4249261313&4294967295,P=$+(V<<22&4294967295|V>>>10),V=I+(F^P&($^F))+L[8]+1770035416&4294967295,I=P+(V<<7&4294967295|V>>>25),V=F+($^I&(P^$))+L[9]+2336552879&4294967295,F=I+(V<<12&4294967295|V>>>20),V=$+(P^F&(I^P))+L[10]+4294925233&4294967295,$=F+(V<<17&4294967295|V>>>15),V=P+(I^$&(F^I))+L[11]+2304563134&4294967295,P=$+(V<<22&4294967295|V>>>10),V=I+(F^P&($^F))+L[12]+1804603682&4294967295,I=P+(V<<7&4294967295|V>>>25),V=F+($^I&(P^$))+L[13]+4254626195&4294967295,F=I+(V<<12&4294967295|V>>>20),V=$+(P^F&(I^P))+L[14]+2792965006&4294967295,$=F+(V<<17&4294967295|V>>>15),V=P+(I^$&(F^I))+L[15]+1236535329&4294967295,P=$+(V<<22&4294967295|V>>>10),V=I+($^F&(P^$))+L[1]+4129170786&4294967295,I=P+(V<<5&4294967295|V>>>27),V=F+(P^$&(I^P))+L[6]+3225465664&4294967295,F=I+(V<<9&4294967295|V>>>23),V=$+(I^P&(F^I))+L[11]+643717713&4294967295,$=F+(V<<14&4294967295|V>>>18),V=P+(F^I&($^F))+L[0]+3921069994&4294967295,P=$+(V<<20&4294967295|V>>>12),V=I+($^F&(P^$))+L[5]+3593408605&4294967295,I=P+(V<<5&4294967295|V>>>27),V=F+(P^$&(I^P))+L[10]+38016083&4294967295,F=I+(V<<9&4294967295|V>>>23),V=$+(I^P&(F^I))+L[15]+3634488961&4294967295,$=F+(V<<14&4294967295|V>>>18),V=P+(F^I&($^F))+L[4]+3889429448&4294967295,P=$+(V<<20&4294967295|V>>>12),V=I+($^F&(P^$))+L[9]+568446438&4294967295,I=P+(V<<5&4294967295|V>>>27),V=F+(P^$&(I^P))+L[14]+3275163606&4294967295,F=I+(V<<9&4294967295|V>>>23),V=$+(I^P&(F^I))+L[3]+4107603335&4294967295,$=F+(V<<14&4294967295|V>>>18),V=P+(F^I&($^F))+L[8]+1163531501&4294967295,P=$+(V<<20&4294967295|V>>>12),V=I+($^F&(P^$))+L[13]+2850285829&4294967295,I=P+(V<<5&4294967295|V>>>27),V=F+(P^$&(I^P))+L[2]+4243563512&4294967295,F=I+(V<<9&4294967295|V>>>23),V=$+(I^P&(F^I))+L[7]+1735328473&4294967295,$=F+(V<<14&4294967295|V>>>18),V=P+(F^I&($^F))+L[12]+2368359562&4294967295,P=$+(V<<20&4294967295|V>>>12),V=I+(P^$^F)+L[5]+4294588738&4294967295,I=P+(V<<4&4294967295|V>>>28),V=F+(I^P^$)+L[8]+2272392833&4294967295,F=I+(V<<11&4294967295|V>>>21),V=$+(F^I^P)+L[11]+1839030562&4294967295,$=F+(V<<16&4294967295|V>>>16),V=P+($^F^I)+L[14]+4259657740&4294967295,P=$+(V<<23&4294967295|V>>>9),V=I+(P^$^F)+L[1]+2763975236&4294967295,I=P+(V<<4&4294967295|V>>>28),V=F+(I^P^$)+L[4]+1272893353&4294967295,F=I+(V<<11&4294967295|V>>>21),V=$+(F^I^P)+L[7]+4139469664&4294967295,$=F+(V<<16&4294967295|V>>>16),V=P+($^F^I)+L[10]+3200236656&4294967295,P=$+(V<<23&4294967295|V>>>9),V=I+(P^$^F)+L[13]+681279174&4294967295,I=P+(V<<4&4294967295|V>>>28),V=F+(I^P^$)+L[0]+3936430074&4294967295,F=I+(V<<11&4294967295|V>>>21),V=$+(F^I^P)+L[3]+3572445317&4294967295,$=F+(V<<16&4294967295|V>>>16),V=P+($^F^I)+L[6]+76029189&4294967295,P=$+(V<<23&4294967295|V>>>9),V=I+(P^$^F)+L[9]+3654602809&4294967295,I=P+(V<<4&4294967295|V>>>28),V=F+(I^P^$)+L[12]+3873151461&4294967295,F=I+(V<<11&4294967295|V>>>21),V=$+(F^I^P)+L[15]+530742520&4294967295,$=F+(V<<16&4294967295|V>>>16),V=P+($^F^I)+L[2]+3299628645&4294967295,P=$+(V<<23&4294967295|V>>>9),V=I+($^(P|~F))+L[0]+4096336452&4294967295,I=P+(V<<6&4294967295|V>>>26),V=F+(P^(I|~$))+L[7]+1126891415&4294967295,F=I+(V<<10&4294967295|V>>>22),V=$+(I^(F|~P))+L[14]+2878612391&4294967295,$=F+(V<<15&4294967295|V>>>17),V=P+(F^($|~I))+L[5]+4237533241&4294967295,P=$+(V<<21&4294967295|V>>>11),V=I+($^(P|~F))+L[12]+1700485571&4294967295,I=P+(V<<6&4294967295|V>>>26),V=F+(P^(I|~$))+L[3]+2399980690&4294967295,F=I+(V<<10&4294967295|V>>>22),V=$+(I^(F|~P))+L[10]+4293915773&4294967295,$=F+(V<<15&4294967295|V>>>17),V=P+(F^($|~I))+L[1]+2240044497&4294967295,P=$+(V<<21&4294967295|V>>>11),V=I+($^(P|~F))+L[8]+1873313359&4294967295,I=P+(V<<6&4294967295|V>>>26),V=F+(P^(I|~$))+L[15]+4264355552&4294967295,F=I+(V<<10&4294967295|V>>>22),V=$+(I^(F|~P))+L[6]+2734768916&4294967295,$=F+(V<<15&4294967295|V>>>17),V=P+(F^($|~I))+L[13]+1309151649&4294967295,P=$+(V<<21&4294967295|V>>>11),V=I+($^(P|~F))+L[4]+4149444226&4294967295,I=P+(V<<6&4294967295|V>>>26),V=F+(P^(I|~$))+L[11]+3174756917&4294967295,F=I+(V<<10&4294967295|V>>>22),V=$+(I^(F|~P))+L[2]+718787259&4294967295,$=F+(V<<15&4294967295|V>>>17),V=P+(F^($|~I))+L[9]+3951481745&4294967295,T.g[0]=T.g[0]+I&4294967295,T.g[1]=T.g[1]+($+(V<<21&4294967295|V>>>11))&4294967295,T.g[2]=T.g[2]+$&4294967295,T.g[3]=T.g[3]+F&4294967295}r.prototype.u=function(T,I){I===void 0&&(I=T.length);for(var P=I-this.blockSize,L=this.B,$=this.h,F=0;F<I;){if($==0)for(;F<=P;)o(this,T,F),F+=this.blockSize;if(typeof T=="string"){for(;F<I;)if(L[$++]=T.charCodeAt(F++),$==this.blockSize){o(this,L),$=0;break}}else for(;F<I;)if(L[$++]=T[F++],$==this.blockSize){o(this,L),$=0;break}}this.h=$,this.o+=I},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var I=1;I<T.length-8;++I)T[I]=0;var P=8*this.o;for(I=T.length-8;I<T.length;++I)T[I]=P&255,P/=256;for(this.u(T),T=Array(16),I=P=0;4>I;++I)for(var L=0;32>L;L+=8)T[P++]=this.g[I]>>>L&255;return T};function s(T,I){var P=a;return Object.prototype.hasOwnProperty.call(P,T)?P[T]:P[T]=I(T)}function i(T,I){this.h=I;for(var P=[],L=!0,$=T.length-1;0<=$;$--){var F=T[$]|0;L&&F==I||(P[$]=F,L=!1)}this.g=P}var a={};function l(T){return-128<=T&&128>T?s(T,function(I){return new i([I|0],0>I?-1:0)}):new i([T|0],0>T?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return x(c(-T));for(var I=[],P=1,L=0;T>=P;L++)I[L]=T/P|0,P*=4294967296;return new i(I,0)}function u(T,I){if(T.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(T.charAt(0)=="-")return x(u(T.substring(1),I));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=c(Math.pow(I,8)),L=f,$=0;$<T.length;$+=8){var F=Math.min(8,T.length-$),V=parseInt(T.substring($,$+F),I);8>F?(F=c(Math.pow(I,F)),L=L.j(F).add(c(V))):(L=L.j(P),L=L.add(c(V)))}return L}var f=l(0),h=l(1),p=l(16777216);t=i.prototype,t.m=function(){if(y(this))return-x(this).m();for(var T=0,I=1,P=0;P<this.g.length;P++){var L=this.i(P);T+=(0<=L?L:4294967296+L)*I,I*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(m(this))return"0";if(y(this))return"-"+x(this).toString(T);for(var I=c(Math.pow(T,6)),P=this,L="";;){var $=R(P,I).g;P=b(P,$.j(I));var F=((0<P.g.length?P.g[0]:P.h)>>>0).toString(T);if(P=$,m(P))return F+L;for(;6>F.length;)F="0"+F;L=F+L}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function m(T){if(T.h!=0)return!1;for(var I=0;I<T.g.length;I++)if(T.g[I]!=0)return!1;return!0}function y(T){return T.h==-1}t.l=function(T){return T=b(this,T),y(T)?-1:m(T)?0:1};function x(T){for(var I=T.g.length,P=[],L=0;L<I;L++)P[L]=~T.g[L];return new i(P,~T.h).add(h)}t.abs=function(){return y(this)?x(this):this},t.add=function(T){for(var I=Math.max(this.g.length,T.g.length),P=[],L=0,$=0;$<=I;$++){var F=L+(this.i($)&65535)+(T.i($)&65535),V=(F>>>16)+(this.i($)>>>16)+(T.i($)>>>16);L=V>>>16,F&=65535,V&=65535,P[$]=V<<16|F}return new i(P,P[P.length-1]&-2147483648?-1:0)};function b(T,I){return T.add(x(I))}t.j=function(T){if(m(this)||m(T))return f;if(y(this))return y(T)?x(this).j(x(T)):x(x(this).j(T));if(y(T))return x(this.j(x(T)));if(0>this.l(p)&&0>T.l(p))return c(this.m()*T.m());for(var I=this.g.length+T.g.length,P=[],L=0;L<2*I;L++)P[L]=0;for(L=0;L<this.g.length;L++)for(var $=0;$<T.g.length;$++){var F=this.i(L)>>>16,V=this.i(L)&65535,be=T.i($)>>>16,ge=T.i($)&65535;P[2*L+2*$]+=V*ge,C(P,2*L+2*$),P[2*L+2*$+1]+=F*ge,C(P,2*L+2*$+1),P[2*L+2*$+1]+=V*be,C(P,2*L+2*$+1),P[2*L+2*$+2]+=F*be,C(P,2*L+2*$+2)}for(L=0;L<I;L++)P[L]=P[2*L+1]<<16|P[2*L];for(L=I;L<2*I;L++)P[L]=0;return new i(P,0)};function C(T,I){for(;(T[I]&65535)!=T[I];)T[I+1]+=T[I]>>>16,T[I]&=65535,I++}function E(T,I){this.g=T,this.h=I}function R(T,I){if(m(I))throw Error("division by zero");if(m(T))return new E(f,f);if(y(T))return I=R(x(T),I),new E(x(I.g),x(I.h));if(y(I))return I=R(T,x(I)),new E(x(I.g),I.h);if(30<T.g.length){if(y(T)||y(I))throw Error("slowDivide_ only works with positive integers.");for(var P=h,L=I;0>=L.l(T);)P=D(P),L=D(L);var $=O(P,1),F=O(L,1);for(L=O(L,2),P=O(P,2);!m(L);){var V=F.add(L);0>=V.l(T)&&($=$.add(P),F=V),L=O(L,1),P=O(P,1)}return I=b(T,$.j(I)),new E($,I)}for($=f;0<=T.l(I);){for(P=Math.max(1,Math.floor(T.m()/I.m())),L=Math.ceil(Math.log(P)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),F=c(P),V=F.j(I);y(V)||0<V.l(T);)P-=L,F=c(P),V=F.j(I);m(F)&&(F=h),$=$.add(F),T=b(T,V)}return new E($,T)}t.A=function(T){return R(this,T).h},t.and=function(T){for(var I=Math.max(this.g.length,T.g.length),P=[],L=0;L<I;L++)P[L]=this.i(L)&T.i(L);return new i(P,this.h&T.h)},t.or=function(T){for(var I=Math.max(this.g.length,T.g.length),P=[],L=0;L<I;L++)P[L]=this.i(L)|T.i(L);return new i(P,this.h|T.h)},t.xor=function(T){for(var I=Math.max(this.g.length,T.g.length),P=[],L=0;L<I;L++)P[L]=this.i(L)^T.i(L);return new i(P,this.h^T.h)};function D(T){for(var I=T.g.length+1,P=[],L=0;L<I;L++)P[L]=T.i(L)<<1|T.i(L-1)>>>31;return new i(P,T.h)}function O(T,I){var P=I>>5;I%=32;for(var L=T.g.length-P,$=[],F=0;F<L;F++)$[F]=0<I?T.i(F+P)>>>I|T.i(F+P+1)<<32-I:T.i(F+P);return new i($,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ZB=r,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=c,i.fromString=u,Ru=i}).apply(typeof gD<"u"?gD:typeof self<"u"?self:typeof window<"u"?window:{});var Yw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eF,oy,tF,nb,SN,nF,rF,oF;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(v,S,A){return v==Array.prototype||v==Object.prototype||(v[S]=A.value),v};function n(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yw=="object"&&Yw];for(var S=0;S<v.length;++S){var A=v[S];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var r=n(this);function o(v,S){if(S)e:{var A=r;v=v.split(".");for(var B=0;B<v.length-1;B++){var se=v[B];if(!(se in A))break e;A=A[se]}v=v[v.length-1],B=A[v],S=S(B),S!=B&&S!=null&&e(A,v,{configurable:!0,writable:!0,value:S})}}function s(v,S){v instanceof String&&(v+="");var A=0,B=!1,se={next:function(){if(!B&&A<v.length){var me=A++;return{value:S(me,v[me]),done:!1}}return B=!0,{done:!0,value:void 0}}};return se[Symbol.iterator]=function(){return se},se}o("Array.prototype.values",function(v){return v||function(){return s(this,function(S,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function l(v){var S=typeof v;return S=S!="object"?S:v?Array.isArray(v)?"array":S:"null",S=="array"||S=="object"&&typeof v.length=="number"}function c(v){var S=typeof v;return S=="object"&&v!=null||S=="function"}function u(v,S,A){return v.call.apply(v.bind,arguments)}function f(v,S,A){if(!v)throw Error();if(2<arguments.length){var B=Array.prototype.slice.call(arguments,2);return function(){var se=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(se,B),v.apply(S,se)}}return function(){return v.apply(S,arguments)}}function h(v,S,A){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,h.apply(null,arguments)}function p(v,S){var A=Array.prototype.slice.call(arguments,1);return function(){var B=A.slice();return B.push.apply(B,arguments),v.apply(this,B)}}function m(v,S){function A(){}A.prototype=S.prototype,v.aa=S.prototype,v.prototype=new A,v.prototype.constructor=v,v.Qb=function(B,se,me){for(var Be=Array(arguments.length-2),Yt=2;Yt<arguments.length;Yt++)Be[Yt-2]=arguments[Yt];return S.prototype[se].apply(B,Be)}}function y(v){const S=v.length;if(0<S){const A=Array(S);for(let B=0;B<S;B++)A[B]=v[B];return A}return[]}function x(v,S){for(let A=1;A<arguments.length;A++){const B=arguments[A];if(l(B)){const se=v.length||0,me=B.length||0;v.length=se+me;for(let Be=0;Be<me;Be++)v[se+Be]=B[Be]}else v.push(B)}}class b{constructor(S,A){this.i=S,this.j=A,this.h=0,this.g=null}get(){let S;return 0<this.h?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function C(v){return/^[\s\xa0]*$/.test(v)}function E(){var v=a.navigator;return v&&(v=v.userAgent)?v:""}function R(v){return R[" "](v),v}R[" "]=function(){};var D=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function O(v,S,A){for(const B in v)S.call(A,v[B],B,v)}function T(v,S){for(const A in v)S.call(void 0,v[A],A,v)}function I(v){const S={};for(const A in v)S[A]=v[A];return S}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(v,S){let A,B;for(let se=1;se<arguments.length;se++){B=arguments[se];for(A in B)v[A]=B[A];for(let me=0;me<P.length;me++)A=P[me],Object.prototype.hasOwnProperty.call(B,A)&&(v[A]=B[A])}}function $(v){var S=1;v=v.split(":");const A=[];for(;0<S&&v.length;)A.push(v.shift()),S--;return v.length&&A.push(v.join(":")),A}function F(v){a.setTimeout(()=>{throw v},0)}function V(){var v=Y;let S=null;return v.g&&(S=v.g,v.g=v.g.next,v.g||(v.h=null),S.next=null),S}class be{constructor(){this.h=this.g=null}add(S,A){const B=ge.get();B.set(S,A),this.h?this.h.next=B:this.g=B,this.h=B}}var ge=new b(()=>new le,v=>v.reset());class le{constructor(){this.next=this.g=this.h=null}set(S,A){this.h=S,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,H=!1,Y=new be,ue=()=>{const v=a.Promise.resolve(void 0);Q=()=>{v.then(W)}};var W=()=>{for(var v;v=V();){try{v.h.call(v.g)}catch(A){F(A)}var S=ge;S.j(v),100>S.h&&(S.h++,v.next=S.g,S.g=v)}H=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(v,S){this.type=v,this.g=this.target=S,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var ye=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var v=!1,S=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const A=()=>{};a.addEventListener("test",A,S),a.removeEventListener("test",A,S)}catch{}return v}();function he(v,S){if(ie.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v){var A=this.type=v.type,B=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;if(this.target=v.target||v.srcElement,this.g=S,S=v.relatedTarget){if(D){e:{try{R(S.nodeName);var se=!0;break e}catch{}se=!1}se||(S=null)}}else A=="mouseover"?S=v.fromElement:A=="mouseout"&&(S=v.toElement);this.relatedTarget=S,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=typeof v.pointerType=="string"?v.pointerType:we[v.pointerType]||"",this.state=v.state,this.i=v,v.defaultPrevented&&he.aa.h.call(this)}}m(he,ie);var we={2:"touch",3:"pen",4:"mouse"};he.prototype.h=function(){he.aa.h.call(this);var v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var ve="closure_listenable_"+(1e6*Math.random()|0),Te=0;function xe(v,S,A,B,se){this.listener=v,this.proxy=null,this.src=S,this.type=A,this.capture=!!B,this.ha=se,this.key=++Te,this.da=this.fa=!1}function ae(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function Ie(v){this.src=v,this.g={},this.h=0}Ie.prototype.add=function(v,S,A,B,se){var me=v.toString();v=this.g[me],v||(v=this.g[me]=[],this.h++);var Be=at(v,S,B,se);return-1<Be?(S=v[Be],A||(S.fa=!1)):(S=new xe(S,this.src,me,!!B,se),S.fa=A,v.push(S)),S};function Re(v,S){var A=S.type;if(A in v.g){var B=v.g[A],se=Array.prototype.indexOf.call(B,S,void 0),me;(me=0<=se)&&Array.prototype.splice.call(B,se,1),me&&(ae(S),v.g[A].length==0&&(delete v.g[A],v.h--))}}function at(v,S,A,B){for(var se=0;se<v.length;++se){var me=v[se];if(!me.da&&me.listener==S&&me.capture==!!A&&me.ha==B)return se}return-1}var Nt="closure_lm_"+(1e6*Math.random()|0),Ft={};function Gn(v,S,A,B,se){if(Array.isArray(S)){for(var me=0;me<S.length;me++)Gn(v,S[me],A,B,se);return null}return A=Si(A),v&&v[ve]?v.K(S,A,c(B)?!!B.capture:!1,se):kr(v,S,A,!1,B,se)}function kr(v,S,A,B,se,me){if(!S)throw Error("Invalid event type");var Be=c(se)?!!se.capture:!!se,Yt=ki(v);if(Yt||(v[Nt]=Yt=new Ie(v)),A=Yt.add(S,A,B,Be,me),A.proxy)return A;if(B=rs(),A.proxy=B,B.src=v,B.listener=A,v.addEventListener)ye||(se=Be),se===void 0&&(se=!1),v.addEventListener(S.toString(),B,se);else if(v.attachEvent)v.attachEvent(xo(S.toString()),B);else if(v.addListener&&v.removeListener)v.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return A}function rs(){function v(A){return S.call(v.src,v.listener,A)}const S=ch;return v}function Jt(v,S,A,B,se){if(Array.isArray(S))for(var me=0;me<S.length;me++)Jt(v,S[me],A,B,se);else B=c(B)?!!B.capture:!!B,A=Si(A),v&&v[ve]?(v=v.i,S=String(S).toString(),S in v.g&&(me=v.g[S],A=at(me,A,B,se),-1<A&&(ae(me[A]),Array.prototype.splice.call(me,A,1),me.length==0&&(delete v.g[S],v.h--)))):v&&(v=ki(v))&&(S=v.g[S.toString()],v=-1,S&&(v=at(S,A,B,se)),(A=-1<v?S[v]:null)&&pa(A))}function pa(v){if(typeof v!="number"&&v&&!v.da){var S=v.src;if(S&&S[ve])Re(S.i,v);else{var A=v.type,B=v.proxy;S.removeEventListener?S.removeEventListener(A,B,v.capture):S.detachEvent?S.detachEvent(xo(A),B):S.addListener&&S.removeListener&&S.removeListener(B),(A=ki(S))?(Re(A,v),A.h==0&&(A.src=null,S[Nt]=null)):ae(v)}}}function xo(v){return v in Ft?Ft[v]:Ft[v]="on"+v}function ch(v,S){if(v.da)v=!0;else{S=new he(S,this);var A=v.listener,B=v.ha||v.src;v.fa&&pa(v),v=A.call(B,S)}return v}function ki(v){return v=v[Nt],v instanceof Ie?v:null}var dl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Si(v){return typeof v=="function"?v:(v[dl]||(v[dl]=function(S){return v.handleEvent(S)}),v[dl])}function ln(){G.call(this),this.i=new Ie(this),this.M=this,this.F=null}m(ln,G),ln.prototype[ve]=!0,ln.prototype.removeEventListener=function(v,S,A,B){Jt(this,v,S,A,B)};function pn(v,S){var A,B=v.F;if(B)for(A=[];B;B=B.F)A.push(B);if(v=v.M,B=S.type||S,typeof S=="string")S=new ie(S,v);else if(S instanceof ie)S.target=S.target||v;else{var se=S;S=new ie(B,v),L(S,se)}if(se=!0,A)for(var me=A.length-1;0<=me;me--){var Be=S.g=A[me];se=Ti(Be,B,!0,S)&&se}if(Be=S.g=v,se=Ti(Be,B,!0,S)&&se,se=Ti(Be,B,!1,S)&&se,A)for(me=0;me<A.length;me++)Be=S.g=A[me],se=Ti(Be,B,!1,S)&&se}ln.prototype.N=function(){if(ln.aa.N.call(this),this.i){var v=this.i,S;for(S in v.g){for(var A=v.g[S],B=0;B<A.length;B++)ae(A[B]);delete v.g[S],v.h--}}this.F=null},ln.prototype.K=function(v,S,A,B){return this.i.add(String(v),S,!1,A,B)},ln.prototype.L=function(v,S,A,B){return this.i.add(String(v),S,!0,A,B)};function Ti(v,S,A,B){if(S=v.i.g[String(S)],!S)return!0;S=S.concat();for(var se=!0,me=0;me<S.length;++me){var Be=S[me];if(Be&&!Be.da&&Be.capture==A){var Yt=Be.listener,rr=Be.ha||Be.src;Be.fa&&Re(v.i,Be),se=Yt.call(rr,B)!==!1&&se}}return se&&!B.defaultPrevented}function Ni(v,S,A){if(typeof v=="function")A&&(v=h(v,A));else if(v&&typeof v.handleEvent=="function")v=h(v.handleEvent,v);else throw Error("Invalid listener argument");return 2147483647<Number(S)?-1:a.setTimeout(v,S||0)}function nr(v){v.g=Ni(()=>{v.g=null,v.i&&(v.i=!1,nr(v))},v.l);const S=v.h;v.h=null,v.m.apply(null,S)}class uh extends G{constructor(S,A){super(),this.m=S,this.l=A,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:nr(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ss(v){G.call(this),this.h=v,this.g={}}m(ss,G);var vd=[];function dh(v){O(v.g,function(S,A){this.g.hasOwnProperty(A)&&pa(S)},v),v.g={}}ss.prototype.N=function(){ss.aa.N.call(this),dh(this)},ss.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $s=a.JSON.stringify,Xe=a.JSON.parse,wd=class{stringify(v){return a.JSON.stringify(v,void 0)}parse(v){return a.JSON.parse(v,void 0)}};function Ii(){}Ii.prototype.h=null;function bd(v){return v.h||(v.h=v.i())}function We(){}var fl={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fh(){ie.call(this,"d")}m(fh,ie);function xd(){ie.call(this,"c")}m(xd,ie);var ma={},hh=null;function ph(){return hh=hh||new ln}ma.La="serverreachability";function ww(v){ie.call(this,ma.La,v)}m(ww,ie);function Bs(v){const S=ph();pn(S,new ww(S))}ma.STAT_EVENT="statevent";function hl(v,S){ie.call(this,ma.STAT_EVENT,v),this.stat=S}m(hl,ie);function fr(v){const S=ph();pn(S,new hl(S,v))}ma.Ma="timingevent";function _d(v,S){ie.call(this,ma.Ma,v),this.size=S}m(_d,ie);function Kt(v,S){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){v()},S)}function Nn(){this.g=!0}Nn.prototype.xa=function(){this.g=!1};function A2(v,S,A,B,se,me){v.info(function(){if(v.g)if(me)for(var Be="",Yt=me.split("&"),rr=0;rr<Yt.length;rr++){var Ot=Yt[rr].split("=");if(1<Ot.length){var pr=Ot[0];Ot=Ot[1];var or=pr.split("_");Be=2<=or.length&&or[1]=="type"?Be+(pr+"="+Ot+"&"):Be+(pr+"=redacted&")}}else Be=null;else Be=me;return"XMLHTTP REQ ("+B+") [attempt "+se+"]: "+S+`
`+A+`
`+Be})}function mh(v,S,A,B,se,me,Be){v.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+se+"]: "+S+`
`+A+`
`+me+" "+Be})}function Ri(v,S,A,B){v.info(function(){return"XMLHTTP TEXT ("+S+"): "+P2(v,A)+(B?" "+B:"")})}function gh(v,S){v.info(function(){return"TIMEOUT: "+S})}Nn.prototype.info=function(){};function P2(v,S){if(!v.g)return S;if(!S)return null;try{var A=JSON.parse(S);if(A){for(v=0;v<A.length;v++)if(Array.isArray(A[v])){var B=A[v];if(!(2>B.length)){var se=B[1];if(Array.isArray(se)&&!(1>se.length)){var me=se[0];if(me!="noop"&&me!="stop"&&me!="close")for(var Be=1;Be<se.length;Be++)se[Be]=""}}}}return $s(A)}catch{return S}}var is={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},pl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fs;function ml(){}m(ml,Ii),ml.prototype.g=function(){return new XMLHttpRequest},ml.prototype.i=function(){return{}},Fs=new ml;function ga(v,S,A,B){this.j=v,this.i=S,this.l=A,this.R=B||1,this.U=new ss(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ai}function Ai(){this.i=null,this.g="",this.h=!1}var cg={},Pi={};function yh(v,S,A){v.L=1,v.v=Td(Vo(S)),v.m=A,v.P=!0,vh(v,null)}function vh(v,S){v.F=Date.now(),jo(v),v.A=Vo(v.v);var A=v.A,B=v.R;Array.isArray(B)||(B=[String(B)]),as(A.i,"t",B),v.C=0,A=v.j.J,v.h=new Ai,v.g=Nh(v.j,A?S:null,!v.m),0<v.O&&(v.M=new uh(h(v.Y,v,v.g),v.O)),S=v.U,A=v.g,B=v.ca;var se="readystatechange";Array.isArray(se)||(se&&(vd[0]=se.toString()),se=vd);for(var me=0;me<se.length;me++){var Be=Gn(A,se[me],B||S.handleEvent,!1,S.h||S);if(!Be)break;S.g[Be.key]=Be}S=v.H?I(v.H):{},v.m?(v.u||(v.u="POST"),S["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.A,v.u,v.m,S)):(v.u="GET",v.g.ea(v.A,v.u,null,S)),Bs(),A2(v.i,v.u,v.A,v.l,v.R,v.m)}ga.prototype.ca=function(v){v=v.target;const S=this.M;S&&ls(v)==3?S.j():this.Y(v)},ga.prototype.Y=function(v){try{if(v==this.g)e:{const or=ls(this.g);var S=this.g.Ba();const Nl=this.g.Z();if(!(3>or)&&(or!=3||this.g&&(this.h.h||this.g.oa()||Eh(this.g)))){this.J||or!=4||S==7||(S==8||0>=Nl?Bs(3):Bs(2)),ya(this);var A=this.g.Z();this.X=A;t:if(In(this)){var B=Eh(this.g);v="";var se=B.length,me=ls(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Mi(this),va(this);var Be="";break t}this.h.i=new a.TextDecoder}for(S=0;S<se;S++)this.h.h=!0,v+=this.h.i.decode(B[S],{stream:!(me&&S==se-1)});B.length=0,this.h.g+=v,this.C=0,Be=this.h.g}else Be=this.g.oa();if(this.o=A==200,mh(this.i,this.u,this.A,this.l,this.R,or,A),this.o){if(this.T&&!this.K){t:{if(this.g){var Yt,rr=this.g;if((Yt=rr.g?rr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(Yt)){var Ot=Yt;break t}}Ot=null}if(A=Ot)Ri(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cd(this,A);else{this.o=!1,this.s=3,fr(12),Mi(this),va(this);break e}}if(this.P){A=!0;let Bo;for(;!this.J&&this.C<Be.length;)if(Bo=gl(this,Be),Bo==Pi){or==4&&(this.s=4,fr(14),A=!1),Ri(this.i,this.l,null,"[Incomplete Response]");break}else if(Bo==cg){this.s=4,fr(15),Ri(this.i,this.l,Be,"[Invalid Chunk]"),A=!1;break}else Ri(this.i,this.l,Bo,null),Cd(this,Bo);if(In(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),or!=4||Be.length!=0||this.h.h||(this.s=1,fr(16),A=!1),this.o=this.o&&A,!A)Ri(this.i,this.l,Be,"[Invalid Chunked Response]"),Mi(this),va(this);else if(0<Be.length&&!this.W){this.W=!0;var pr=this.j;pr.g==this&&pr.ba&&!pr.M&&(pr.j.info("Great, no buffering proxy detected. Bytes received: "+Be.length),kl(pr),pr.M=!0,fr(11))}}else Ri(this.i,this.l,Be,null),Cd(this,Be);or==4&&Mi(this),this.o&&!this.J&&(or==4?Cg(this.j,this):(this.o=!1,jo(this)))}else Ew(this.g),A==400&&0<Be.indexOf("Unknown SID")?(this.s=3,fr(12)):(this.s=0,fr(13)),Mi(this),va(this)}}}catch{}finally{}};function In(v){return v.g?v.u=="GET"&&v.L!=2&&v.j.Ca:!1}function gl(v,S){var A=v.C,B=S.indexOf(`
`,A);return B==-1?Pi:(A=Number(S.substring(A,B)),isNaN(A)?cg:(B+=1,B+A>S.length?Pi:(S=S.slice(B,B+A),v.C=B+A,S)))}ga.prototype.cancel=function(){this.J=!0,Mi(this)};function jo(v){v.S=Date.now()+v.I,ug(v,v.I)}function ug(v,S){if(v.B!=null)throw Error("WatchDog timer not null");v.B=Kt(h(v.ba,v),S)}function ya(v){v.B&&(a.clearTimeout(v.B),v.B=null)}ga.prototype.ba=function(){this.B=null;const v=Date.now();0<=v-this.S?(gh(this.i,this.A),this.L!=2&&(Bs(),fr(17)),Mi(this),this.s=2,va(this)):ug(this,this.S-v)};function va(v){v.j.G==0||v.J||Cg(v.j,v)}function Mi(v){ya(v);var S=v.M;S&&typeof S.ma=="function"&&S.ma(),v.M=null,dh(v.U),v.g&&(S=v.g,v.g=null,S.abort(),S.ma())}function Cd(v,S){try{var A=v.j;if(A.G!=0&&(A.g==v||wt(A.h,v))){if(!v.K&&wt(A.h,v)&&A.G==3){try{var B=A.Da.g.parse(S)}catch{B=null}if(Array.isArray(B)&&B.length==3){var se=B;if(se[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<v.F)Sl(A),Md(A);else break e;El(A),fr(18)}}else A.za=se[1],0<A.za-A.T&&37500>se[2]&&A.F&&A.v==0&&!A.C&&(A.C=Kt(h(A.Za,A),6e3));if(1>=fg(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else zs(A,11)}else if((v.K||A.g==v)&&Sl(A),!C(S))for(se=A.Da.g.parse(S),S=0;S<se.length;S++){let Ot=se[S];if(A.T=Ot[0],Ot=Ot[1],A.G==2)if(Ot[0]=="c"){A.K=Ot[1],A.ia=Ot[2];const pr=Ot[3];pr!=null&&(A.la=pr,A.j.info("VER="+A.la));const or=Ot[4];or!=null&&(A.Aa=or,A.j.info("SVER="+A.Aa));const Nl=Ot[5];Nl!=null&&typeof Nl=="number"&&0<Nl&&(B=1.5*Nl,A.L=B,A.j.info("backChannelRequestTimeoutMs_="+B)),B=A;const Bo=v.g;if(Bo){const Rh=Bo.g?Bo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rh){var me=B.h;me.g||Rh.indexOf("spdy")==-1&&Rh.indexOf("quic")==-1&&Rh.indexOf("h2")==-1||(me.j=me.l,me.g=new Set,me.h&&(wh(me,me.h),me.h=null))}if(B.D){const Sg=Bo.g?Bo.g.getResponseHeader("X-HTTP-Session-Id"):null;Sg&&(B.ya=Sg,Wt(B.I,B.D,Sg))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-v.F,A.j.info("Handshake RTT: "+A.R+"ms")),B=A;var Be=v;if(B.qa=_a(B,B.J?B.ia:null,B.W),Be.K){hg(B.h,Be);var Yt=Be,rr=B.L;rr&&(Yt.I=rr),Yt.B&&(ya(Yt),jo(Yt)),B.g=Be}else hr(B);0<A.i.length&&_l(A)}else Ot[0]!="stop"&&Ot[0]!="close"||zs(A,7);else A.G==3&&(Ot[0]=="stop"||Ot[0]=="close"?Ot[0]=="stop"?zs(A,7):$c(A):Ot[0]!="noop"&&A.l&&A.l.ta(Ot),A.v=0)}}Bs(4)}catch{}}var yl=class{constructor(v,S){this.g=v,this.map=S}};function dg(v){this.l=v||10,a.PerformanceNavigationTiming?(v=a.performance.getEntriesByType("navigation"),v=0<v.length&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ed(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function fg(v){return v.h?1:v.g?v.g.size:0}function wt(v,S){return v.h?v.h==S:v.g?v.g.has(S):!1}function wh(v,S){v.g?v.g.add(S):v.h=S}function hg(v,S){v.h&&v.h==S?v.h=null:v.g&&v.g.has(S)&&v.g.delete(S)}dg.prototype.cancel=function(){if(this.i=pg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function pg(v){if(v.h!=null)return v.i.concat(v.h.D);if(v.g!=null&&v.g.size!==0){let S=v.i;for(const A of v.g.values())S=S.concat(A.D);return S}return y(v.i)}function cn(v){if(v.V&&typeof v.V=="function")return v.V();if(typeof Map<"u"&&v instanceof Map||typeof Set<"u"&&v instanceof Set)return Array.from(v.values());if(typeof v=="string")return v.split("");if(l(v)){for(var S=[],A=v.length,B=0;B<A;B++)S.push(v[B]);return S}S=[],A=0;for(B in v)S[A++]=v[B];return S}function kd(v){if(v.na&&typeof v.na=="function")return v.na();if(!v.V||typeof v.V!="function"){if(typeof Map<"u"&&v instanceof Map)return Array.from(v.keys());if(!(typeof Set<"u"&&v instanceof Set)){if(l(v)||typeof v=="string"){var S=[];v=v.length;for(var A=0;A<v;A++)S.push(A);return S}S=[],A=0;for(const B in v)S[A++]=B;return S}}}function Dc(v,S){if(v.forEach&&typeof v.forEach=="function")v.forEach(S,void 0);else if(l(v)||typeof v=="string")Array.prototype.forEach.call(v,S,void 0);else for(var A=kd(v),B=cn(v),se=B.length,me=0;me<se;me++)S.call(void 0,B[me],A&&A[me],v)}var vl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mg(v,S){if(v){v=v.split("&");for(var A=0;A<v.length;A++){var B=v[A].indexOf("="),se=null;if(0<=B){var me=v[A].substring(0,B);se=v[A].substring(B+1)}else me=v[A];S(me,se?decodeURIComponent(se.replace(/\+/g," ")):"")}}}function Di(v){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,v instanceof Di){this.h=v.h,Sd(this,v.j),this.o=v.o,this.g=v.g,wl(this,v.s),this.l=v.l;var S=v.i,A=new $o;A.i=S.i,S.g&&(A.g=new Map(S.g),A.h=S.h),gg(this,A),this.m=v.m}else v&&(S=String(v).match(vl))?(this.h=!1,Sd(this,S[1]||"",!0),this.o=Nd(S[2]||""),this.g=Nd(S[3]||"",!0),wl(this,S[4]),this.l=Nd(S[5]||"",!0),gg(this,S[6]||"",!0),this.m=Nd(S[7]||"")):(this.h=!1,this.i=new $o(null,this.h))}Di.prototype.toString=function(){var v=[],S=this.j;S&&v.push(xt(S,bw,!0),":");var A=this.g;return(A||S=="file")&&(v.push("//"),(S=this.o)&&v.push(xt(S,bw,!0),"@"),v.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&v.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&v.push("/"),v.push(xt(A,A.charAt(0)=="/"?_o:M2,!0))),(A=this.i.toString())&&v.push("?",A),(A=this.m)&&v.push("#",xt(A,bh)),v.join("")};function Vo(v){return new Di(v)}function Sd(v,S,A){v.j=A?Nd(S,!0):S,v.j&&(v.j=v.j.replace(/:$/,""))}function wl(v,S){if(S){if(S=Number(S),isNaN(S)||0>S)throw Error("Bad port number "+S);v.s=S}else v.s=null}function gg(v,S,A){S instanceof $o?(v.i=S,Id(v.i,v.h)):(A||(S=xt(S,Oc)),v.i=new $o(S,v.h))}function Wt(v,S,A){v.i.set(S,A)}function Td(v){return Wt(v,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),v}function Nd(v,S){return v?S?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function xt(v,S,A){return typeof v=="string"?(v=encodeURI(v).replace(S,yg),A&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function yg(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var bw=/[#\/\?@]/g,M2=/[#\?:]/g,_o=/[#\?]/g,Oc=/[#\?@]/g,bh=/#/g;function $o(v,S){this.h=this.g=null,this.i=v||null,this.j=!!S}function Oi(v){v.g||(v.g=new Map,v.h=0,v.i&&mg(v.i,function(S,A){v.add(decodeURIComponent(S.replace(/\+/g," ")),A)}))}t=$o.prototype,t.add=function(v,S){Oi(this),this.i=null,v=Us(this,v);var A=this.g.get(v);return A||this.g.set(v,A=[]),A.push(S),this.h+=1,this};function vg(v,S){Oi(v),S=Us(v,S),v.g.has(S)&&(v.i=null,v.h-=v.g.get(S).length,v.g.delete(S))}function qn(v,S){return Oi(v),S=Us(v,S),v.g.has(S)}t.forEach=function(v,S){Oi(this),this.g.forEach(function(A,B){A.forEach(function(se){v.call(S,se,B,this)},this)},this)},t.na=function(){Oi(this);const v=Array.from(this.g.values()),S=Array.from(this.g.keys()),A=[];for(let B=0;B<S.length;B++){const se=v[B];for(let me=0;me<se.length;me++)A.push(S[B])}return A},t.V=function(v){Oi(this);let S=[];if(typeof v=="string")qn(this,v)&&(S=S.concat(this.g.get(Us(this,v))));else{v=Array.from(this.g.values());for(let A=0;A<v.length;A++)S=S.concat(v[A])}return S},t.set=function(v,S){return Oi(this),this.i=null,v=Us(this,v),qn(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[S]),this.h+=1,this},t.get=function(v,S){return v?(v=this.V(v),0<v.length?String(v[0]):S):S};function as(v,S,A){vg(v,S),0<A.length&&(v.i=null,v.g.set(Us(v,S),y(A)),v.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],S=Array.from(this.g.keys());for(var A=0;A<S.length;A++){var B=S[A];const me=encodeURIComponent(String(B)),Be=this.V(B);for(B=0;B<Be.length;B++){var se=me;Be[B]!==""&&(se+="="+encodeURIComponent(String(Be[B]))),v.push(se)}}return this.i=v.join("&")};function Us(v,S){return S=String(S),v.j&&(S=S.toLowerCase()),S}function Id(v,S){S&&!v.j&&(Oi(v),v.i=null,v.g.forEach(function(A,B){var se=B.toLowerCase();B!=se&&(vg(this,B),as(this,se,A))},v)),v.j=S}function wg(v,S){const A=new Nn;if(a.Image){const B=new Image;B.onload=p(ba,A,"TestLoadImage: loaded",!0,S,B),B.onerror=p(ba,A,"TestLoadImage: error",!1,S,B),B.onabort=p(ba,A,"TestLoadImage: abort",!1,S,B),B.ontimeout=p(ba,A,"TestLoadImage: timeout",!1,S,B),a.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=v}else S(!1)}function wa(v,S){const A=new Nn,B=new AbortController,se=setTimeout(()=>{B.abort(),ba(A,"TestPingServer: timeout",!1,S)},1e4);fetch(v,{signal:B.signal}).then(me=>{clearTimeout(se),me.ok?ba(A,"TestPingServer: ok",!0,S):ba(A,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(se),ba(A,"TestPingServer: error",!1,S)})}function ba(v,S,A,B,se){try{se&&(se.onload=null,se.onerror=null,se.onabort=null,se.ontimeout=null),B(A)}catch{}}function Hs(){this.g=new wd}function bg(v,S,A){const B=A||"";try{Dc(v,function(se,me){let Be=se;c(se)&&(Be=$s(se)),S.push(B+me+"="+encodeURIComponent(Be))})}catch(se){throw S.push(B+"type="+encodeURIComponent("_badmap")),se}}function Rd(v){this.l=v.Ub||null,this.j=v.eb||!1}m(Rd,Ii),Rd.prototype.g=function(){return new Lc(this.l,this.j)},Rd.prototype.i=function(v){return function(){return v}}({});function Lc(v,S){ln.call(this),this.D=v,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(Lc,ln),t=Lc.prototype,t.open=function(v,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=v,this.A=S,this.readyState=1,Vc(this)},t.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const S={headers:this.u,method:this.B,credentials:this.m,cache:void 0};v&&(S.body=v),(this.D||a).fetch(new Request(this.A,S)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,bl(this)),this.readyState=0},t.Sa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,Vc(this)),this.g&&(this.readyState=3,Vc(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jc(this)}else v.text().then(this.Ra.bind(this),this.ga.bind(this))};function jc(v){v.j.read().then(v.Pa.bind(v)).catch(v.ga.bind(v))}t.Pa=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var S=v.value?v.value:new Uint8Array(0);(S=this.v.decode(S,{stream:!v.done}))&&(this.response=this.responseText+=S)}v.done?bl(this):Vc(this),this.readyState==3&&jc(this)}},t.Ra=function(v){this.g&&(this.response=this.responseText=v,bl(this))},t.Qa=function(v){this.g&&(this.response=v,bl(this))},t.ga=function(){this.g&&bl(this)};function bl(v){v.readyState=4,v.l=null,v.j=null,v.v=null,Vc(v)}t.setRequestHeader=function(v,S){this.u.append(v,S)},t.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],S=this.h.entries();for(var A=S.next();!A.done;)A=A.value,v.push(A[0]+": "+A[1]),A=S.next();return v.join(`\r
`)};function Vc(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(Lc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function xw(v){let S="";return O(v,function(A,B){S+=B,S+=":",S+=A,S+=`\r
`}),S}function xl(v,S,A){e:{for(B in A){var B=!1;break e}B=!0}B||(A=xw(A),typeof v=="string"?A!=null&&encodeURIComponent(String(A)):Wt(v,S,A))}function Rn(v){ln.call(this),this.headers=new Map,this.o=v||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(Rn,ln);var D2=/^https?$/i,xh=["POST","PUT"];t=Rn.prototype,t.Ha=function(v){this.J=v},t.ea=function(v,S,A,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);S=S?S.toUpperCase():"GET",this.D=v,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fs.g(),this.v=this.o?bd(this.o):bd(Fs),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(S,String(v),!0),this.B=!1}catch(me){Ad(this,me);return}if(v=A||"",A=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var se in B)A.set(se,B[se]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const me of B.keys())A.set(me,B.get(me));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(A.keys()).find(me=>me.toLowerCase()=="content-type"),se=a.FormData&&v instanceof a.FormData,!(0<=Array.prototype.indexOf.call(xh,S,void 0))||B||se||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[me,Be]of A)this.g.setRequestHeader(me,Be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cw(this),this.u=!0,this.g.send(v),this.u=!1}catch(me){Ad(this,me)}};function Ad(v,S){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=S,v.m=5,_h(v),Ch(v)}function _h(v){v.A||(v.A=!0,pn(v,"complete"),pn(v,"error"))}t.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=v||7,pn(this,"complete"),pn(this,"abort"),Ch(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ch(this,!0)),Rn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?_w(this):this.bb())},t.bb=function(){_w(this)};function _w(v){if(v.h&&typeof i<"u"&&(!v.v[1]||ls(v)!=4||v.Z()!=2)){if(v.u&&ls(v)==4)Ni(v.Ea,0,v);else if(pn(v,"readystatechange"),ls(v)==4){v.h=!1;try{const Be=v.Z();e:switch(Be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var A;if(!(A=S)){var B;if(B=Be===0){var se=String(v.D).match(vl)[1]||null;!se&&a.self&&a.self.location&&(se=a.self.location.protocol.slice(0,-1)),B=!D2.test(se?se.toLowerCase():"")}A=B}if(A)pn(v,"complete"),pn(v,"success");else{v.m=6;try{var me=2<ls(v)?v.g.statusText:""}catch{me=""}v.l=me+" ["+v.Z()+"]",_h(v)}}finally{Ch(v)}}}}function Ch(v,S){if(v.g){Cw(v);const A=v.g,B=v.v[0]?()=>{}:null;v.g=null,v.v=null,S||pn(v,"ready");try{A.onreadystatechange=B}catch{}}}function Cw(v){v.I&&(a.clearTimeout(v.I),v.I=null)}t.isActive=function(){return!!this.g};function ls(v){return v.g?v.g.readyState:0}t.Z=function(){try{return 2<ls(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(v){if(this.g){var S=this.g.responseText;return v&&S.indexOf(v)==0&&(S=S.substring(v.length)),Xe(S)}};function Eh(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.H){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function Ew(v){const S={};v=(v.g&&2<=ls(v)&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<v.length;B++){if(C(v[B]))continue;var A=$(v[B]);const se=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const me=S[se]||[];S[se]=me,me.push(A)}T(S,function(B){return B.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xa(v,S,A){return A&&A.internalChannelParams&&A.internalChannelParams[v]||S}function Pd(v){this.Aa=0,this.i=[],this.j=new Nn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xa("failFast",!1,v),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xa("baseRetryDelayMs",5e3,v),this.cb=xa("retryDelaySeedMs",1e4,v),this.Wa=xa("forwardChannelMaxRetries",2,v),this.wa=xa("forwardChannelRequestTimeoutMs",2e4,v),this.pa=v&&v.xmlHttpFactory||void 0,this.Xa=v&&v.Tb||void 0,this.Ca=v&&v.useFetchStreams||!1,this.L=void 0,this.J=v&&v.supportsCrossDomainXhr||!1,this.K="",this.h=new dg(v&&v.concurrentRequestLimit),this.Da=new Hs,this.P=v&&v.fastHandshake||!1,this.O=v&&v.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=v&&v.Rb||!1,v&&v.xa&&this.j.xa(),v&&v.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&v&&v.detectBufferingProxy||!1,this.ja=void 0,v&&v.longPollingTimeout&&0<v.longPollingTimeout&&(this.ja=v.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Pd.prototype,t.la=8,t.G=1,t.connect=function(v,S,A,B){fr(0),this.W=v,this.H=S||{},A&&B!==void 0&&(this.H.OSID=A,this.H.OAID=B),this.F=this.X,this.I=_a(this,null,this.W),_l(this)};function $c(v){if(kw(v),v.G==3){var S=v.U++,A=Vo(v.I);if(Wt(A,"SID",v.K),Wt(A,"RID",S),Wt(A,"TYPE","terminate"),Cl(v,A),S=new ga(v,v.j,S),S.L=2,S.v=Td(Vo(A)),A=!1,a.navigator&&a.navigator.sendBeacon)try{A=a.navigator.sendBeacon(S.v.toString(),"")}catch{}!A&&a.Image&&(new Image().src=S.v,A=!0),A||(S.g=Nh(S.j,null),S.g.ea(S.v)),S.F=Date.now(),jo(S)}Th(v)}function Md(v){v.g&&(kl(v),v.g.cancel(),v.g=null)}function kw(v){Md(v),v.u&&(a.clearTimeout(v.u),v.u=null),Sl(v),v.h.cancel(),v.s&&(typeof v.s=="number"&&a.clearTimeout(v.s),v.s=null)}function _l(v){if(!Ed(v.h)&&!v.s){v.s=!0;var S=v.Ga;Q||ue(),H||(Q(),H=!0),Y.add(S,v),v.B=0}}function xg(v,S){return fg(v.h)>=v.h.j-(v.s?1:0)?!1:v.s?(v.i=S.D.concat(v.i),!0):v.G==1||v.G==2||v.B>=(v.Va?0:v.Wa)?!1:(v.s=Kt(h(v.Ga,v,S),Eg(v,v.B)),v.B++,!0)}t.Ga=function(v){if(this.s)if(this.s=null,this.G==1){if(!v){this.U=Math.floor(1e5*Math.random()),v=this.U++;const se=new ga(this,this.j,v);let me=this.o;if(this.S&&(me?(me=I(me),L(me,this.S)):me=this.S),this.m!==null||this.O||(se.H=me,me=null),this.P)e:{for(var S=0,A=0;A<this.i.length;A++){t:{var B=this.i[A];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(S+=B,4096<S){S=A;break e}if(S===4096||A===this.i.length-1){S=A+1;break e}}S=1e3}else S=1e3;S=Sh(this,se,S),A=Vo(this.I),Wt(A,"RID",v),Wt(A,"CVER",22),this.D&&Wt(A,"X-HTTP-Session-Id",this.D),Cl(this,A),me&&(this.O?S="headers="+encodeURIComponent(String(xw(me)))+"&"+S:this.m&&xl(A,this.m,me)),wh(this.h,se),this.Ua&&Wt(A,"TYPE","init"),this.P?(Wt(A,"$req",S),Wt(A,"SID","null"),se.T=!0,yh(se,A,null)):yh(se,A,S),this.G=2}}else this.G==3&&(v?kh(this,v):this.i.length==0||Ed(this.h)||kh(this))};function kh(v,S){var A;S?A=S.l:A=v.U++;const B=Vo(v.I);Wt(B,"SID",v.K),Wt(B,"RID",A),Wt(B,"AID",v.T),Cl(v,B),v.m&&v.o&&xl(B,v.m,v.o),A=new ga(v,v.j,A,v.B+1),v.m===null&&(A.H=v.o),S&&(v.i=S.D.concat(v.i)),S=Sh(v,A,1e3),A.I=Math.round(.5*v.wa)+Math.round(.5*v.wa*Math.random()),wh(v.h,A),yh(A,B,S)}function Cl(v,S){v.H&&O(v.H,function(A,B){Wt(S,B,A)}),v.l&&Dc({},function(A,B){Wt(S,B,A)})}function Sh(v,S,A){A=Math.min(v.i.length,A);var B=v.l?h(v.l.Na,v.l,v):null;e:{var se=v.i;let me=-1;for(;;){const Be=["count="+A];me==-1?0<A?(me=se[0].g,Be.push("ofs="+me)):me=0:Be.push("ofs="+me);let Yt=!0;for(let rr=0;rr<A;rr++){let Ot=se[rr].g;const pr=se[rr].map;if(Ot-=me,0>Ot)me=Math.max(0,se[rr].g-100),Yt=!1;else try{bg(pr,Be,"req"+Ot+"_")}catch{B&&B(pr)}}if(Yt){B=Be.join("&");break e}}}return v=v.i.splice(0,A),S.D=v,B}function hr(v){if(!v.g&&!v.u){v.Y=1;var S=v.Fa;Q||ue(),H||(Q(),H=!0),Y.add(S,v),v.v=0}}function El(v){return v.g||v.u||3<=v.v?!1:(v.Y++,v.u=Kt(h(v.Fa,v),Eg(v,v.v)),v.v++,!0)}t.Fa=function(){if(this.u=null,_g(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var v=2*this.R;this.j.info("BP detection timer enabled: "+v),this.A=Kt(h(this.ab,this),v)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,fr(10),Md(this),_g(this))};function kl(v){v.A!=null&&(a.clearTimeout(v.A),v.A=null)}function _g(v){v.g=new ga(v,v.j,"rpc",v.Y),v.m===null&&(v.g.H=v.o),v.g.O=0;var S=Vo(v.qa);Wt(S,"RID","rpc"),Wt(S,"SID",v.K),Wt(S,"AID",v.T),Wt(S,"CI",v.F?"0":"1"),!v.F&&v.ja&&Wt(S,"TO",v.ja),Wt(S,"TYPE","xmlhttp"),Cl(v,S),v.m&&v.o&&xl(S,v.m,v.o),v.L&&(v.g.I=v.L);var A=v.g;v=v.ia,A.L=1,A.v=Td(Vo(S)),A.m=null,A.P=!0,vh(A,v)}t.Za=function(){this.C!=null&&(this.C=null,Md(this),El(this),fr(19))};function Sl(v){v.C!=null&&(a.clearTimeout(v.C),v.C=null)}function Cg(v,S){var A=null;if(v.g==S){Sl(v),kl(v),v.g=null;var B=2}else if(wt(v.h,S))A=S.D,hg(v.h,S),B=1;else return;if(v.G!=0){if(S.o)if(B==1){A=S.m?S.m.length:0,S=Date.now()-S.F;var se=v.B;B=ph(),pn(B,new _d(B,A)),_l(v)}else hr(v);else if(se=S.s,se==3||se==0&&0<S.X||!(B==1&&xg(v,S)||B==2&&El(v)))switch(A&&0<A.length&&(S=v.h,S.i=S.i.concat(A)),se){case 1:zs(v,5);break;case 4:zs(v,10);break;case 3:zs(v,6);break;default:zs(v,2)}}}function Eg(v,S){let A=v.Ta+Math.floor(Math.random()*v.cb);return v.isActive()||(A*=2),A*S}function zs(v,S){if(v.j.info("Error code "+S),S==2){var A=h(v.fb,v),B=v.Xa;const se=!B;B=new Di(B||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Sd(B,"https"),Td(B),se?wg(B.toString(),A):wa(B.toString(),A)}else fr(2);v.G=0,v.l&&v.l.sa(S),Th(v),kw(v)}t.fb=function(v){v?(this.j.info("Successfully pinged google.com"),fr(2)):(this.j.info("Failed to ping google.com"),fr(1))};function Th(v){if(v.G=0,v.ka=[],v.l){const S=pg(v.h);(S.length!=0||v.i.length!=0)&&(x(v.ka,S),x(v.ka,v.i),v.h.i.length=0,y(v.i),v.i.length=0),v.l.ra()}}function _a(v,S,A){var B=A instanceof Di?Vo(A):new Di(A);if(B.g!="")S&&(B.g=S+"."+B.g),wl(B,B.s);else{var se=a.location;B=se.protocol,S=S?S+"."+se.hostname:se.hostname,se=+se.port;var me=new Di(null);B&&Sd(me,B),S&&(me.g=S),se&&wl(me,se),A&&(me.l=A),B=me}return A=v.D,S=v.ya,A&&S&&Wt(B,A,S),Wt(B,"VER",v.la),Cl(v,B),B}function Nh(v,S,A){if(S&&!v.J)throw Error("Can't create secondary domain capable XhrIo object.");return S=v.Ca&&!v.pa?new Rn(new Rd({eb:A})):new Rn(v.pa),S.Ha(v.J),S}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ih(){}t=Ih.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Tl(){}Tl.prototype.g=function(v,S){return new Vr(v,S)};function Vr(v,S){ln.call(this),this.g=new Pd(S),this.l=v,this.h=S&&S.messageUrlParams||null,v=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(v?v["X-WebChannel-Content-Type"]=S.messageContentType:v={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.va&&(v?v["X-WebChannel-Client-Profile"]=S.va:v={"X-WebChannel-Client-Profile":S.va}),this.g.S=v,(v=S&&S.Sb)&&!C(v)&&(this.g.m=v),this.v=S&&S.supportsCrossDomainXhr||!1,this.u=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!C(S)&&(this.g.D=S,v=this.h,v!==null&&S in v&&(v=this.h,S in v&&delete v[S])),this.j=new Ca(this)}m(Vr,ln),Vr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vr.prototype.close=function(){$c(this.g)},Vr.prototype.o=function(v){var S=this.g;if(typeof v=="string"){var A={};A.__data__=v,v=A}else this.u&&(A={},A.__data__=$s(v),v=A);S.i.push(new yl(S.Ya++,v)),S.G==3&&_l(S)},Vr.prototype.N=function(){this.g.l=null,delete this.j,$c(this.g),delete this.g,Vr.aa.N.call(this)};function kg(v){fh.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var S=v.__sm__;if(S){e:{for(const A in S){v=A;break e}v=void 0}(this.i=v)&&(v=this.i,S=S!==null&&v in S?S[v]:void 0),this.data=S}else this.data=v}m(kg,fh);function Sw(){xd.call(this),this.status=1}m(Sw,xd);function Ca(v){this.g=v}m(Ca,Ih),Ca.prototype.ua=function(){pn(this.g,"a")},Ca.prototype.ta=function(v){pn(this.g,new kg(v))},Ca.prototype.sa=function(v){pn(this.g,new Sw)},Ca.prototype.ra=function(){pn(this.g,"b")},Tl.prototype.createWebChannel=Tl.prototype.g,Vr.prototype.send=Vr.prototype.o,Vr.prototype.open=Vr.prototype.m,Vr.prototype.close=Vr.prototype.close,oF=function(){return new Tl},rF=function(){return ph()},nF=ma,SN={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},is.NO_ERROR=0,is.TIMEOUT=8,is.HTTP_ERROR=6,nb=is,pl.COMPLETE="complete",tF=pl,We.EventType=fl,fl.OPEN="a",fl.CLOSE="b",fl.ERROR="c",fl.MESSAGE="d",ln.prototype.listen=ln.prototype.K,oy=We,Rn.prototype.listenOnce=Rn.prototype.L,Rn.prototype.getLastError=Rn.prototype.Ka,Rn.prototype.getLastErrorCode=Rn.prototype.Ba,Rn.prototype.getStatus=Rn.prototype.Z,Rn.prototype.getResponseJson=Rn.prototype.Oa,Rn.prototype.getResponseText=Rn.prototype.oa,Rn.prototype.send=Rn.prototype.ea,Rn.prototype.setWithCredentials=Rn.prototype.Ha,eF=Rn}).apply(typeof Yw<"u"?Yw:typeof self<"u"?self:typeof window<"u"?window:{});const yD="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let so=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};so.UNAUTHENTICATED=new so(null),so.GOOGLE_CREDENTIALS=new so("google-credentials-uid"),so.FIRST_PARTY=new so("first-party-uid"),so.MOCK_USER=new so("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Om="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf=new CC("@firebase/firestore");function Wh(){return kf.logLevel}function Ge(t,...e){if(kf.logLevel<=At.DEBUG){const n=e.map(c4);kf.debug(`Firestore (${Om}): ${t}`,...n)}}function yc(t,...e){if(kf.logLevel<=At.ERROR){const n=e.map(c4);kf.error(`Firestore (${Om}): ${t}`,...n)}}function Jp(t,...e){if(kf.logLevel<=At.WARN){const n=e.map(c4);kf.warn(`Firestore (${Om}): ${t}`,...n)}}function c4(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(t="Unexpected state"){const e=`FIRESTORE (${Om}) INTERNAL ASSERTION FAILED: `+t;throw yc(e),new Error(e)}function Qt(t,e){t||lt()}function ft(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ye extends ua{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Bce{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(so.UNAUTHENTICATED))}shutdown(){}}class Fce{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Uce{constructor(e){this.t=e,this.currentUser=so.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Qt(this.o===void 0);let r=this.i;const o=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new tc;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new tc,e.enqueueRetryable(()=>o(this.currentUser))};const i=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await o(this.currentUser)})},a=l=>{Ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new tc)}},0),i()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qt(typeof r.accessToken=="string"),new sF(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qt(e===null||typeof e=="string"),new so(e)}}class Hce{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=so.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class zce{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Hce(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(so.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wce{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Gce{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Qt(this.o===void 0);const r=s=>{s.error!=null&&Ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.R;return this.R=s.token,Ge("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const o=s=>{Ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>o(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?o(s):Ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Qt(typeof n.token=="string"),this.R=n.token,new Wce(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qce(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=qce(40);for(let s=0;s<o.length;++s)r.length<20&&o[s]<n&&(r+=e.charAt(o[s]%e.length))}return r}}function Dt(t,e){return t<e?-1:t>e?1:0}function Zp(t,e,n){return t.length===e.length&&t.every((r,o)=>n(r,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{static now(){return br.fromMillis(Date.now())}static fromDate(e){return br.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new br(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ye(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ye(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ye(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ye(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Dt(this.nanoseconds,e.nanoseconds):Dt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{static fromTimestamp(e){return new ut(e)}static min(){return new ut(new br(0,0))}static max(){return new ut(new br(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,n,r){n===void 0?n=0:n>e.length&&lt(),r===void 0?r=e.length-n:r>e.length-n&&lt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ma.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ma?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const s=Ma.compareSegments(e.get(o),n.get(o));if(s!==0)return s}return Math.sign(e.length-n.length)}static compareSegments(e,n){const r=Ma.isNumericId(e),o=Ma.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?Ma.extractNumericId(e).compare(Ma.extractNumericId(n)):e<n?-1:e>n?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ru.fromString(e.substring(4,e.length-2))}}class kn extends Ma{construct(e,n,r){return new kn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ye(Se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(o=>o.length>0))}return new kn(n)}static emptyPath(){return new kn([])}}const Kce=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wr extends Ma{construct(e,n,r){return new Wr(e,n,r)}static isValidIdentifier(e){return Kce.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Wr(["__name__"])}static fromServerFormat(e){const n=[];let r="",o=0;const s=()=>{if(r.length===0)throw new Ye(Se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let i=!1;for(;o<e.length;){const a=e[o];if(a==="\\"){if(o+1===e.length)throw new Ye(Se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[o+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ye(Se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,o+=2}else a==="`"?(i=!i,o++):a!=="."||i?(r+=a,o++):(s(),o++)}if(s(),i)throw new Ye(Se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wr(n)}static emptyPath(){return new Wr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.path=e}static fromPath(e){return new tt(kn.fromString(e))}static fromName(e){return new tt(kn.fromString(e).popFirst(5))}static empty(){return new tt(kn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&kn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return kn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tt(new kn(e.slice()))}}function Yce(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,o=ut.fromTimestamp(r===1e9?new br(n+1,0):new br(n,r));return new Uu(o,tt.empty(),e)}function Qce(t){return new Uu(t.readTime,t.key,-1)}class Uu{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Uu(ut.min(),tt.empty(),-1)}static max(){return new Uu(ut.max(),tt.empty(),-1)}}function Xce(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=tt.comparator(t.documentKey,e.documentKey),n!==0?n:Dt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jce="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Zce{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lm(t){if(t.code!==Se.FAILED_PRECONDITION||t.message!==Jce)throw t;Ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ke((r,o)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,o)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ke?n:ke.resolve(n)}catch(n){return ke.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ke.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ke.reject(n)}static resolve(e){return new ke((n,r)=>{n(e)})}static reject(e){return new ke((n,r)=>{r(e)})}static waitFor(e){return new ke((n,r)=>{let o=0,s=0,i=!1;e.forEach(a=>{++o,a.next(()=>{++s,i&&s===o&&n()},l=>r(l))}),i=!0,s===o&&n()})}static or(e){let n=ke.resolve(!1);for(const r of e)n=n.next(o=>o?ke.resolve(o):r());return n}static forEach(e,n){const r=[];return e.forEach((o,s)=>{r.push(n.call(this,o,s))}),this.waitFor(r)}static mapArray(e,n){return new ke((r,o)=>{const s=e.length,i=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{i[c]=u,++a,a===s&&r(i)},u=>o(u))}})}static doWhile(e,n){return new ke((r,o)=>{const s=()=>{e()===!0?n().next(()=>{s()},o):r()};s()})}}function eue(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function jm(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}TC.oe=-1;function NC(t){return t==null}function lx(t){return t===0&&1/t==-1/0}function tue(t){return typeof t=="number"&&Number.isInteger(t)&&!lx(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nue(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=vD(e)),e=rue(t.get(n),e);return vD(e)}function rue(t,e){let n=e;const r=t.length;for(let o=0;o<r;o++){const s=t.charAt(o);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function vD(t){return t+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ad(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function aF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e,n){this.comparator=e,this.root=n||Ur.EMPTY}insert(e,n){return new Fn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ur.BLACK,null,null))}remove(e){return new Fn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ur.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qw(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qw(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qw(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qw(this.root,e,this.comparator,!0)}}class Qw{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&o&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ur{constructor(e,n,r,o,s){this.key=e,this.value=n,this.color=r??Ur.RED,this.left=o??Ur.EMPTY,this.right=s??Ur.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,s){return new Ur(e??this.key,n??this.value,r??this.color,o??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const s=r(e,o.key);return o=s<0?o.copy(null,null,null,o.left.insert(e,n,r),null):s===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ur.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Ur.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ur.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ur.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lt();const e=this.left.check();if(e!==this.right.check())throw lt();return e+(this.isRed()?0:1)}}Ur.EMPTY=null,Ur.RED=!0,Ur.BLACK=!1;Ur.EMPTY=new class{constructor(){this.size=0}get key(){throw lt()}get value(){throw lt()}get color(){throw lt()}get left(){throw lt()}get right(){throw lt()}copy(e,n,r,o,s){return this}insert(e,n,r){return new Ur(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e){this.comparator=e,this.data=new Fn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new bD(this.data.getIterator())}getIteratorFrom(e){return new bD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof xr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,s=r.getNext().key;if(this.comparator(o,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new xr(this.comparator);return n.data=e,n}}class bD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this.fields=e,e.sort(Wr.comparator)}static empty(){return new vs([])}unionWith(e){let n=new xr(Wr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new vs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Zp(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new lF("Invalid base64 string: "+s):s}}(e);return new Yr(n)}static fromUint8Array(e){const n=function(o){let s="";for(let i=0;i<o.length;++i)s+=String.fromCharCode(o[i]);return s}(e);return new Yr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Dt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yr.EMPTY_BYTE_STRING=new Yr("");const oue=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hu(t){if(Qt(!!t),typeof t=="string"){let e=0;const n=oue.exec(t);if(Qt(!!n),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Yn(t.seconds),nanos:Yn(t.nanos)}}function Yn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zu(t){return typeof t=="string"?Yr.fromBase64String(t):Yr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u4(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function IC(t){const e=t.mapValue.fields.__previous_value__;return u4(e)?IC(e):e}function g1(t){const e=Hu(t.mapValue.fields.__local_write_time__.timestampValue);return new br(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sue{constructor(e,n,r,o,s,i,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class y1{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new y1("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof y1&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Wu(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?u4(t)?4:aue(t)?9007199254740991:iue(t)?10:11:lt()}function Qa(t,e){if(t===e)return!0;const n=Wu(t);if(n!==Wu(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return g1(t).isEqual(g1(e));case 3:return function(o,s){if(typeof o.timestampValue=="string"&&typeof s.timestampValue=="string"&&o.timestampValue.length===s.timestampValue.length)return o.timestampValue===s.timestampValue;const i=Hu(o.timestampValue),a=Hu(s.timestampValue);return i.seconds===a.seconds&&i.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(o,s){return zu(o.bytesValue).isEqual(zu(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(o,s){return Yn(o.geoPointValue.latitude)===Yn(s.geoPointValue.latitude)&&Yn(o.geoPointValue.longitude)===Yn(s.geoPointValue.longitude)}(t,e);case 2:return function(o,s){if("integerValue"in o&&"integerValue"in s)return Yn(o.integerValue)===Yn(s.integerValue);if("doubleValue"in o&&"doubleValue"in s){const i=Yn(o.doubleValue),a=Yn(s.doubleValue);return i===a?lx(i)===lx(a):isNaN(i)&&isNaN(a)}return!1}(t,e);case 9:return Zp(t.arrayValue.values||[],e.arrayValue.values||[],Qa);case 10:case 11:return function(o,s){const i=o.mapValue.fields||{},a=s.mapValue.fields||{};if(wD(i)!==wD(a))return!1;for(const l in i)if(i.hasOwnProperty(l)&&(a[l]===void 0||!Qa(i[l],a[l])))return!1;return!0}(t,e);default:return lt()}}function v1(t,e){return(t.values||[]).find(n=>Qa(n,e))!==void 0}function em(t,e){if(t===e)return 0;const n=Wu(t),r=Wu(e);if(n!==r)return Dt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Dt(t.booleanValue,e.booleanValue);case 2:return function(s,i){const a=Yn(s.integerValue||s.doubleValue),l=Yn(i.integerValue||i.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return xD(t.timestampValue,e.timestampValue);case 4:return xD(g1(t),g1(e));case 5:return Dt(t.stringValue,e.stringValue);case 6:return function(s,i){const a=zu(s),l=zu(i);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const a=s.split("/"),l=i.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Dt(a[c],l[c]);if(u!==0)return u}return Dt(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const a=Dt(Yn(s.latitude),Yn(i.latitude));return a!==0?a:Dt(Yn(s.longitude),Yn(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return _D(t.arrayValue,e.arrayValue);case 10:return function(s,i){var a,l,c,u;const f=s.fields||{},h=i.fields||{},p=(a=f.value)===null||a===void 0?void 0:a.arrayValue,m=(l=h.value)===null||l===void 0?void 0:l.arrayValue,y=Dt(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0);return y!==0?y:_D(p,m)}(t.mapValue,e.mapValue);case 11:return function(s,i){if(s===Xw.mapValue&&i===Xw.mapValue)return 0;if(s===Xw.mapValue)return 1;if(i===Xw.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=i.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const h=Dt(l[f],u[f]);if(h!==0)return h;const p=em(a[l[f]],c[u[f]]);if(p!==0)return p}return Dt(l.length,u.length)}(t.mapValue,e.mapValue);default:throw lt()}}function xD(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Dt(t,e);const n=Hu(t),r=Hu(e),o=Dt(n.seconds,r.seconds);return o!==0?o:Dt(n.nanos,r.nanos)}function _D(t,e){const n=t.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const s=em(n[o],r[o]);if(s)return s}return Dt(n.length,r.length)}function tm(t){return TN(t)}function TN(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Hu(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return zu(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return tt.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",o=!0;for(const s of n.values||[])o?o=!1:r+=",",r+=TN(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let o="{",s=!0;for(const i of r)s?s=!1:o+=",",o+=`${i}:${TN(n.fields[i])}`;return o+"}"}(t.mapValue):lt()}function rb(t){switch(Wu(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=IC(t);return e?16+rb(e):16;case 5:return 2*t.stringValue.length;case 6:return zu(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,s)=>o+rb(s),0)}(t.arrayValue);case 10:case 11:return function(r){let o=0;return ad(r.fields,(s,i)=>{o+=s.length+rb(i)}),o}(t.mapValue);default:throw lt()}}function CD(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function NN(t){return!!t&&"integerValue"in t}function d4(t){return!!t&&"arrayValue"in t}function ED(t){return!!t&&"nullValue"in t}function kD(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ob(t){return!!t&&"mapValue"in t}function iue(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ty(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ad(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ty(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ty(t.arrayValue.values[n]);return e}return Object.assign({},t)}function aue(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this.value=e}static empty(){return new Wo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ob(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ty(n)}setAll(e){let n=Wr.emptyPath(),r={},o=[];e.forEach((i,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,o),r={},o=[],n=a.popLast()}i?r[a.lastSegment()]=Ty(i):o.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,o)}delete(e){const n=this.field(e.popLast());ob(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qa(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];ob(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){ad(n,(o,s)=>e[o]=s);for(const o of r)delete e[o]}clone(){return new Wo(Ty(this.value))}}function cF(t){const e=[];return ad(t.fields,(n,r)=>{const o=new Wr([n]);if(ob(r)){const s=cF(r.mapValue).fields;if(s.length===0)e.push(o);else for(const i of s)e.push(o.child(i))}else e.push(o)}),new vs(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,n,r,o,s,i,a){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new ao(e,0,ut.min(),ut.min(),ut.min(),Wo.empty(),0)}static newFoundDocument(e,n,r,o){return new ao(e,1,n,ut.min(),r,o,0)}static newNoDocument(e,n){return new ao(e,2,n,ut.min(),ut.min(),Wo.empty(),0)}static newUnknownDocument(e,n){return new ao(e,3,n,ut.min(),ut.min(),Wo.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ut.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ao&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ao(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,n){this.position=e,this.inclusive=n}}function SD(t,e,n){let r=0;for(let o=0;o<t.position.length;o++){const s=e[o],i=t.position[o];if(s.field.isKeyField()?r=tt.comparator(tt.fromName(i.referenceValue),n.key):r=em(i,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function TD(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qa(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,n="asc"){this.field=e,this.dir=n}}function lue(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{}class lr extends uF{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new uue(e,n,r):n==="array-contains"?new hue(e,r):n==="in"?new pue(e,r):n==="not-in"?new mue(e,r):n==="array-contains-any"?new gue(e,r):new lr(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new due(e,r):new fue(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(em(n,this.value)):n!==null&&Wu(this.value)===Wu(n)&&this.matchesComparison(em(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return lt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zi extends uF{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Zi(e,n)}matches(e){return dF(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function dF(t){return t.op==="and"}function fF(t){return cue(t)&&dF(t)}function cue(t){for(const e of t.filters)if(e instanceof Zi)return!1;return!0}function IN(t){if(t instanceof lr)return t.field.canonicalString()+t.op.toString()+tm(t.value);if(fF(t))return t.filters.map(e=>IN(e)).join(",");{const e=t.filters.map(n=>IN(n)).join(",");return`${t.op}(${e})`}}function hF(t,e){return t instanceof lr?function(r,o){return o instanceof lr&&r.op===o.op&&r.field.isEqual(o.field)&&Qa(r.value,o.value)}(t,e):t instanceof Zi?function(r,o){return o instanceof Zi&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((s,i,a)=>s&&hF(i,o.filters[a]),!0):!1}(t,e):void lt()}function pF(t){return t instanceof lr?function(n){return`${n.field.canonicalString()} ${n.op} ${tm(n.value)}`}(t):t instanceof Zi?function(n){return n.op.toString()+" {"+n.getFilters().map(pF).join(" ,")+"}"}(t):"Filter"}class uue extends lr{constructor(e,n,r){super(e,n,r),this.key=tt.fromName(r.referenceValue)}matches(e){const n=tt.comparator(e.key,this.key);return this.matchesComparison(n)}}class due extends lr{constructor(e,n){super(e,"in",n),this.keys=mF("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class fue extends lr{constructor(e,n){super(e,"not-in",n),this.keys=mF("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function mF(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>tt.fromName(r.referenceValue))}class hue extends lr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return d4(n)&&v1(n.arrayValue,this.value)}}class pue extends lr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&v1(this.value.arrayValue,n)}}class mue extends lr{constructor(e,n){super(e,"not-in",n)}matches(e){if(v1(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!v1(this.value.arrayValue,n)}}class gue extends lr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!d4(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>v1(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yue{constructor(e,n=null,r=[],o=[],s=null,i=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=s,this.startAt=i,this.endAt=a,this.ue=null}}function ND(t,e=null,n=[],r=[],o=null,s=null,i=null){return new yue(t,e,n,r,o,s,i)}function f4(t){const e=ft(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>IN(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),NC(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>tm(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>tm(r)).join(",")),e.ue=n}return e.ue}function h4(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!lue(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!hF(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!TD(t.startAt,e.startAt)&&TD(t.endAt,e.endAt)}function RN(t){return tt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e,n=null,r=[],o=[],s=null,i="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function vue(t,e,n,r,o,s,i,a){return new bv(t,e,n,r,o,s,i,a)}function RC(t){return new bv(t)}function ID(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function gF(t){return t.collectionGroup!==null}function Ny(t){const e=ft(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let a=new xr(Wr.comparator);return i.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ux(s,r))}),n.has(Wr.keyField().canonicalString())||e.ce.push(new ux(Wr.keyField(),r))}return e.ce}function Wa(t){const e=ft(t);return e.le||(e.le=wue(e,Ny(t))),e.le}function wue(t,e){if(t.limitType==="F")return ND(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(o=>{const s=o.dir==="desc"?"asc":"desc";return new ux(o.field,s)});const n=t.endAt?new cx(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new cx(t.startAt.position,t.startAt.inclusive):null;return ND(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function AN(t,e){const n=t.filters.concat([e]);return new bv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function PN(t,e,n){return new bv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function AC(t,e){return h4(Wa(t),Wa(e))&&t.limitType===e.limitType}function yF(t){return`${f4(Wa(t))}|lt:${t.limitType}`}function Gh(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(o=>pF(o)).join(", ")}]`),NC(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(o=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(o)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(o=>tm(o)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(o=>tm(o)).join(",")),`Target(${r})`}(Wa(t))}; limitType=${t.limitType})`}function PC(t,e){return e.isFoundDocument()&&function(r,o){const s=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):tt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,o){for(const s of Ny(r))if(!s.field.isKeyField()&&o.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,o){for(const s of r.filters)if(!s.matches(o))return!1;return!0}(t,e)&&function(r,o){return!(r.startAt&&!function(i,a,l){const c=SD(i,a,l);return i.inclusive?c<=0:c<0}(r.startAt,Ny(r),o)||r.endAt&&!function(i,a,l){const c=SD(i,a,l);return i.inclusive?c>=0:c>0}(r.endAt,Ny(r),o))}(t,e)}function bue(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function vF(t){return(e,n)=>{let r=!1;for(const o of Ny(t)){const s=xue(o,e,n);if(s!==0)return s;r=r||o.field.isKeyField()}return 0}}function xue(t,e,n){const r=t.field.isKeyField()?tt.comparator(e.key,n.key):function(s,i,a){const l=i.data.field(s),c=a.data.field(s);return l!==null&&c!==null?em(l,c):lt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return lt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,s]of r)if(this.equalsFn(o,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<o.length;s++)if(this.equalsFn(o[s][0],e))return void(o[s]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ad(this.inner,(n,r)=>{for(const[o,s]of r)e(o,s)})}isEmpty(){return aF(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ue=new Fn(tt.comparator);function vc(){return _ue}const wF=new Fn(tt.comparator);function sy(...t){let e=wF;for(const n of t)e=e.insert(n.key,n);return e}function bF(t){let e=wF;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Xd(){return Iy()}function xF(){return Iy()}function Iy(){return new Yf(t=>t.toString(),(t,e)=>t.isEqual(e))}const Cue=new Fn(tt.comparator),Eue=new xr(tt.comparator);function Pt(...t){let e=Eue;for(const n of t)e=e.add(n);return e}const kue=new xr(Dt);function Sue(){return kue}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p4(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lx(e)?"-0":e}}function _F(t){return{integerValue:""+t}}function Tue(t,e){return tue(e)?_F(e):p4(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(){this._=void 0}}function Nue(t,e,n){return t instanceof dx?function(o,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return s&&u4(s)&&(s=IC(s)),s&&(i.fields.__previous_value__=s),{mapValue:i}}(n,e):t instanceof w1?EF(t,e):t instanceof b1?kF(t,e):function(o,s){const i=CF(o,s),a=RD(i)+RD(o.Pe);return NN(i)&&NN(o.Pe)?_F(a):p4(o.serializer,a)}(t,e)}function Iue(t,e,n){return t instanceof w1?EF(t,e):t instanceof b1?kF(t,e):n}function CF(t,e){return t instanceof fx?function(r){return NN(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class dx extends MC{}class w1 extends MC{constructor(e){super(),this.elements=e}}function EF(t,e){const n=SF(e);for(const r of t.elements)n.some(o=>Qa(o,r))||n.push(r);return{arrayValue:{values:n}}}class b1 extends MC{constructor(e){super(),this.elements=e}}function kF(t,e){let n=SF(e);for(const r of t.elements)n=n.filter(o=>!Qa(o,r));return{arrayValue:{values:n}}}class fx extends MC{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function RD(t){return Yn(t.integerValue||t.doubleValue)}function SF(t){return d4(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Rue(t,e){return t.field.isEqual(e.field)&&function(r,o){return r instanceof w1&&o instanceof w1||r instanceof b1&&o instanceof b1?Zp(r.elements,o.elements,Qa):r instanceof fx&&o instanceof fx?Qa(r.Pe,o.Pe):r instanceof dx&&o instanceof dx}(t.transform,e.transform)}class Aue{constructor(e,n){this.version=e,this.transformResults=n}}class ai{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ai}static exists(e){return new ai(void 0,e)}static updateTime(e){return new ai(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sb(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class DC{}function TF(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new m4(t.key,ai.none()):new xv(t.key,t.data,ai.none());{const n=t.data,r=Wo.empty();let o=new xr(Wr.comparator);for(let s of e.fields)if(!o.has(s)){let i=n.field(s);i===null&&s.length>1&&(s=s.popLast(),i=n.field(s)),i===null?r.delete(s):r.set(s,i),o=o.add(s)}return new ld(t.key,r,new vs(o.toArray()),ai.none())}}function Pue(t,e,n){t instanceof xv?function(o,s,i){const a=o.value.clone(),l=PD(o.fieldTransforms,s,i.transformResults);a.setAll(l),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ld?function(o,s,i){if(!sb(o.precondition,s))return void s.convertToUnknownDocument(i.version);const a=PD(o.fieldTransforms,s,i.transformResults),l=s.data;l.setAll(NF(o)),l.setAll(a),s.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(t,e,n):function(o,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function Ry(t,e,n,r){return t instanceof xv?function(s,i,a,l){if(!sb(s.precondition,i))return a;const c=s.value.clone(),u=MD(s.fieldTransforms,l,i);return c.setAll(u),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ld?function(s,i,a,l){if(!sb(s.precondition,i))return a;const c=MD(s.fieldTransforms,l,i),u=i.data;return u.setAll(NF(s)),u.setAll(c),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,i,a){return sb(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):a}(t,e,n)}function Mue(t,e){let n=null;for(const r of t.fieldTransforms){const o=e.data.field(r.field),s=CF(r.transform,o||null);s!=null&&(n===null&&(n=Wo.empty()),n.set(r.field,s))}return n||null}function AD(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Zp(r,o,(s,i)=>Rue(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class xv extends DC{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ld extends DC{constructor(e,n,r,o,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function NF(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function PD(t,e,n){const r=new Map;Qt(t.length===n.length);for(let o=0;o<n.length;o++){const s=t[o],i=s.transform,a=e.data.field(s.field);r.set(s.field,Iue(i,a,n[o]))}return r}function MD(t,e,n){const r=new Map;for(const o of t){const s=o.transform,i=n.data.field(o.field);r.set(o.field,Nue(s,i,e))}return r}class m4 extends DC{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Due extends DC{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oue{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const s=this.mutations[o];s.key.isEqual(e.key)&&Pue(s,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ry(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ry(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=xF();return this.mutations.forEach(o=>{const s=e.get(o.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=n.has(o.key)?null:a;const l=TF(i,a);l!==null&&r.set(o.key,l),i.isValidDocument()||i.convertToNoDocument(ut.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pt())}isEqual(e){return this.batchId===e.batchId&&Zp(this.mutations,e.mutations,(n,r)=>AD(n,r))&&Zp(this.baseMutations,e.baseMutations,(n,r)=>AD(n,r))}}class g4{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){Qt(e.mutations.length===r.length);let o=function(){return Cue}();const s=e.mutations;for(let i=0;i<s.length;i++)o=o.insert(s[i].key,r[i].version);return new g4(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lue=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jue{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sr,Lt;function Vue(t){switch(t){default:return lt();case Se.CANCELLED:case Se.UNKNOWN:case Se.DEADLINE_EXCEEDED:case Se.RESOURCE_EXHAUSTED:case Se.INTERNAL:case Se.UNAVAILABLE:case Se.UNAUTHENTICATED:return!1;case Se.INVALID_ARGUMENT:case Se.NOT_FOUND:case Se.ALREADY_EXISTS:case Se.PERMISSION_DENIED:case Se.FAILED_PRECONDITION:case Se.ABORTED:case Se.OUT_OF_RANGE:case Se.UNIMPLEMENTED:case Se.DATA_LOSS:return!0}}function IF(t){if(t===void 0)return yc("GRPC error has no .code"),Se.UNKNOWN;switch(t){case sr.OK:return Se.OK;case sr.CANCELLED:return Se.CANCELLED;case sr.UNKNOWN:return Se.UNKNOWN;case sr.DEADLINE_EXCEEDED:return Se.DEADLINE_EXCEEDED;case sr.RESOURCE_EXHAUSTED:return Se.RESOURCE_EXHAUSTED;case sr.INTERNAL:return Se.INTERNAL;case sr.UNAVAILABLE:return Se.UNAVAILABLE;case sr.UNAUTHENTICATED:return Se.UNAUTHENTICATED;case sr.INVALID_ARGUMENT:return Se.INVALID_ARGUMENT;case sr.NOT_FOUND:return Se.NOT_FOUND;case sr.ALREADY_EXISTS:return Se.ALREADY_EXISTS;case sr.PERMISSION_DENIED:return Se.PERMISSION_DENIED;case sr.FAILED_PRECONDITION:return Se.FAILED_PRECONDITION;case sr.ABORTED:return Se.ABORTED;case sr.OUT_OF_RANGE:return Se.OUT_OF_RANGE;case sr.UNIMPLEMENTED:return Se.UNIMPLEMENTED;case sr.DATA_LOSS:return Se.DATA_LOSS;default:return lt()}}(Lt=sr||(sr={}))[Lt.OK=0]="OK",Lt[Lt.CANCELLED=1]="CANCELLED",Lt[Lt.UNKNOWN=2]="UNKNOWN",Lt[Lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lt[Lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lt[Lt.NOT_FOUND=5]="NOT_FOUND",Lt[Lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lt[Lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lt[Lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lt[Lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lt[Lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lt[Lt.ABORTED=10]="ABORTED",Lt[Lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lt[Lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lt[Lt.INTERNAL=13]="INTERNAL",Lt[Lt.UNAVAILABLE=14]="UNAVAILABLE",Lt[Lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $ue(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bue=new Ru([4294967295,4294967295],0);function DD(t){const e=$ue().encode(t),n=new ZB;return n.update(e),new Uint8Array(n.digest())}function OD(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ru([n,r],0),new Ru([o,s],0)]}class y4{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new iy(`Invalid padding: ${n}`);if(r<0)throw new iy(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new iy(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new iy(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=Ru.fromNumber(this.Te)}de(e,n,r){let o=e.add(n.multiply(Ru.fromNumber(r)));return o.compare(Bue)===1&&(o=new Ru([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=DD(e),[r,o]=OD(n);for(let s=0;s<this.hashCount;s++){const i=this.de(r,o,s);if(!this.Ee(i))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new y4(s,o,n);return r.forEach(a=>i.insert(a)),i}insert(e){if(this.Te===0)return;const n=DD(e),[r,o]=OD(n);for(let s=0;s<this.hashCount;s++){const i=this.de(r,o,s);this.Ae(i)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class iy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,n,r,o,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,_v.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new OC(ut.min(),o,new Fn(Dt),vc(),Pt())}}class _v{constructor(e,n,r,o,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new _v(r,n,Pt(),Pt(),Pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e,n,r,o){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=o}}class RF{constructor(e,n){this.targetId=e,this.me=n}}class AF{constructor(e,n,r=Yr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class LD{constructor(){this.fe=0,this.ge=jD(),this.pe=Yr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Pt(),n=Pt(),r=Pt();return this.ge.forEach((o,s)=>{switch(s){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:lt()}}),new _v(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=jD()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Qt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Fue{constructor(e){this.Be=e,this.Le=new Map,this.ke=vc(),this.qe=Jw(),this.Qe=Jw(),this.Ke=new Fn(Dt)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(e.resumeToken));break;default:lt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Le.forEach((r,o)=>{this.je(o)&&n(o)})}Je(e){const n=e.targetId,r=e.me.count,o=this.Ye(n);if(o){const s=o.target;if(RN(s))if(r===0){const i=new tt(s.path);this.We(n,i,ao.newNoDocument(i,ut.min()))}else Qt(r===1);else{const i=this.Ze(n);if(i!==r){const a=this.Xe(e),l=a?this.et(a,e,i):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:s=0}=n;let i,a;try{i=zu(r).toUint8Array()}catch(l){if(l instanceof lF)return Jp("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new y4(i,o,s)}catch(l){return Jp(l instanceof iy?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.me.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Be.getRemoteKeysForTarget(n);let o=0;return r.forEach(s=>{const i=this.Be.nt(),a=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),o++)}),o}it(e){const n=new Map;this.Le.forEach((s,i)=>{const a=this.Ye(i);if(a){if(s.current&&RN(a.target)){const l=new tt(a.target.path);this.st(l).has(i)||this.ot(i,l)||this.We(i,l,ao.newNoDocument(l,e))}s.be&&(n.set(i,s.ve()),s.Ce())}});let r=Pt();this.Qe.forEach((s,i)=>{let a=!0;i.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,i)=>i.setReadTime(e));const o=new OC(e,n,this.Ke,this.ke,r);return this.ke=vc(),this.qe=Jw(),this.Qe=Jw(),this.Ke=new Fn(Dt),o}Ue(e,n){if(!this.je(e))return;const r=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const o=this.ze(e);this.ot(e,n)?o.Fe(n,1):o.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Le.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Le.get(e);return n||(n=new LD,this.Le.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new xr(Dt),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new xr(Dt),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||Ge("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Le.get(e);return n&&n.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new LD),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function Jw(){return new Fn(tt.comparator)}function jD(){return new Fn(tt.comparator)}const Uue={asc:"ASCENDING",desc:"DESCENDING"},Hue={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zue={and:"AND",or:"OR"};class Wue{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function MN(t,e){return t.useProto3Json||NC(e)?e:{value:e}}function hx(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Gue(t,e){return hx(t,e.toTimestamp())}function Ga(t){return Qt(!!t),ut.fromTimestamp(function(n){const r=Hu(n);return new br(r.seconds,r.nanos)}(t))}function v4(t,e){return DN(t,e).canonicalString()}function DN(t,e){const n=function(o){return new kn(["projects",o.projectId,"databases",o.database])}(t).child("documents");return e===void 0?n:n.child(e)}function MF(t){const e=kn.fromString(t);return Qt(VF(e)),e}function ON(t,e){return v4(t.databaseId,e.path)}function bk(t,e){const n=MF(e);if(n.get(1)!==t.databaseId.projectId)throw new Ye(Se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ye(Se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new tt(OF(n))}function DF(t,e){return v4(t.databaseId,e)}function que(t){const e=MF(t);return e.length===4?kn.emptyPath():OF(e)}function LN(t){return new kn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function OF(t){return Qt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function VD(t,e,n){return{name:ON(t,e),fields:n.value.mapValue.fields}}function Kue(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:lt()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Qt(u===void 0||typeof u=="string"),Yr.fromBase64String(u||"")):(Qt(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Yr.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,a=i&&function(c){const u=c.code===void 0?Se.UNKNOWN:IF(c.code);return new Ye(u,c.message||"")}(i);n=new AF(r,o,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=bk(t,r.document.name),s=Ga(r.document.updateTime),i=r.document.createTime?Ga(r.document.createTime):ut.min(),a=new Wo({mapValue:{fields:r.document.fields}}),l=ao.newFoundDocument(o,s,i,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new ib(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=bk(t,r.document),s=r.readTime?Ga(r.readTime):ut.min(),i=ao.newNoDocument(o,s),a=r.removedTargetIds||[];n=new ib([],a,i.key,i)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=bk(t,r.document),s=r.removedTargetIds||[];n=new ib([],s,o,null)}else{if(!("filter"in e))return lt();{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:s}=r,i=new jue(o,s),a=r.targetId;n=new RF(a,i)}}return n}function Yue(t,e){let n;if(e instanceof xv)n={update:VD(t,e.key,e.value)};else if(e instanceof m4)n={delete:ON(t,e.key)};else if(e instanceof ld)n={update:VD(t,e.key,e.data),updateMask:ode(e.fieldMask)};else{if(!(e instanceof Due))return lt();n={verify:ON(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,i){const a=i.transform;if(a instanceof dx)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof w1)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof b1)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof fx)return{fieldPath:i.field.canonicalString(),increment:a.Pe};throw lt()}(0,r))),e.precondition.isNone||(n.currentDocument=function(o,s){return s.updateTime!==void 0?{updateTime:Gue(o,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:lt()}(t,e.precondition)),n}function Que(t,e){return t&&t.length>0?(Qt(e!==void 0),t.map(n=>function(o,s){let i=o.updateTime?Ga(o.updateTime):Ga(s);return i.isEqual(ut.min())&&(i=Ga(s)),new Aue(i,o.transformResults||[])}(n,e))):[]}function Xue(t,e){return{documents:[DF(t,e.path)]}}function Jue(t,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=DF(t,o);const s=function(c){if(c.length!==0)return jF(Zi.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(c){if(c.length!==0)return c.map(u=>function(h){return{field:qh(h.field),direction:tde(h.dir)}}(u))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const a=MN(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ct:n,parent:o}}function Zue(t){let e=que(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){Qt(r===1);const u=n.from[0];u.allDescendants?o=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(f){const h=LF(f);return h instanceof Zi&&fF(h)?h.getFilters():[h]}(n.where));let i=[];n.orderBy&&(i=function(f){return f.map(h=>function(m){return new ux(Kh(m.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(f){let h;return h=typeof f=="object"?f.value:f,NC(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(f){const h=!!f.before,p=f.values||[];return new cx(p,h)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const h=!f.before,p=f.values||[];return new cx(p,h)}(n.endAt)),vue(e,o,i,s,a,"F",l,c)}function ede(t,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lt()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function LF(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Kh(n.unaryFilter.field);return lr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Kh(n.unaryFilter.field);return lr.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Kh(n.unaryFilter.field);return lr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Kh(n.unaryFilter.field);return lr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return lt()}}(t):t.fieldFilter!==void 0?function(n){return lr.create(Kh(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lt()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Zi.create(n.compositeFilter.filters.map(r=>LF(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return lt()}}(n.compositeFilter.op))}(t):lt()}function tde(t){return Uue[t]}function nde(t){return Hue[t]}function rde(t){return zue[t]}function qh(t){return{fieldPath:t.canonicalString()}}function Kh(t){return Wr.fromServerFormat(t.fieldPath)}function jF(t){return t instanceof lr?function(n){if(n.op==="=="){if(kD(n.value))return{unaryFilter:{field:qh(n.field),op:"IS_NAN"}};if(ED(n.value))return{unaryFilter:{field:qh(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(kD(n.value))return{unaryFilter:{field:qh(n.field),op:"IS_NOT_NAN"}};if(ED(n.value))return{unaryFilter:{field:qh(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qh(n.field),op:nde(n.op),value:n.value}}}(t):t instanceof Zi?function(n){const r=n.getFilters().map(o=>jF(o));return r.length===1?r[0]:{compositeFilter:{op:rde(n.op),filters:r}}}(t):lt()}function ode(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function VF(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n,r,o,s=ut.min(),i=ut.min(),a=Yr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new hu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new hu(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sde{constructor(e){this.ht=e}}function ide(t){const e=Zue({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?PN(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ade{constructor(){this.ln=new lde}addToCollectionParentIndex(e,n){return this.ln.add(n),ke.resolve()}getCollectionParents(e,n){return ke.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return ke.resolve()}deleteFieldIndex(e,n){return ke.resolve()}deleteAllFieldIndexes(e){return ke.resolve()}createTargetIndexes(e,n){return ke.resolve()}getDocumentsMatchingTarget(e,n){return ke.resolve(null)}getIndexType(e,n){return ke.resolve(0)}getFieldIndexes(e,n){return ke.resolve([])}getNextCollectionGroupToUpdate(e){return ke.resolve(null)}getMinOffset(e,n){return ke.resolve(Uu.min())}getMinOffsetFromCollectionGroup(e,n){return ke.resolve(Uu.min())}updateCollectionGroup(e,n,r){return ke.resolve()}updateIndexEntries(e,n){return ke.resolve()}}class lde{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new xr(kn.comparator),s=!o.has(r);return this.index[n]=o.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new xr(kn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Fo{static withCacheSize(e){return new Fo(e,Fo.DEFAULT_COLLECTION_PERCENTILE,Fo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fo.DEFAULT_COLLECTION_PERCENTILE=10,Fo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fo.DEFAULT=new Fo(41943040,Fo.DEFAULT_COLLECTION_PERCENTILE,Fo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fo.DISABLED=new Fo(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new nm(0)}static Qn(){return new nm(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD([t,e],[n,r]){const o=Dt(t,n);return o===0?Dt(e,r):o}class cde{constructor(e){this.Gn=e,this.buffer=new xr(BD),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();BD(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ude{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){Ge("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){jm(n)?Ge("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Lm(n)}await this.Yn(3e5)})}}class dde{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return ke.resolve(TC.oe);const r=new cde(n);return this.Zn.forEachTarget(e,o=>r.Hn(o.sequenceNumber)).next(()=>this.Zn.er(e,o=>r.Hn(o))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ge("LruGarbageCollector","Garbage collection skipped; disabled"),ke.resolve($D)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$D):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let r,o,s,i,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),o=this.params.maximumSequenceNumbersToCollect):o=f,i=Date.now(),this.nthSequenceNumber(e,o))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),Wh()<=At.DEBUG&&Ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-u}ms
	Determined least recently used ${o} in `+(a-i)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),ke.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:s,documentsRemoved:f})))}}function fde(t,e){return new dde(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hde{constructor(){this.changes=new Yf(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ao.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ke.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pde{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mde{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(r!==null&&Ry(r.mutation,o,vs.empty(),br.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Pt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Pt()){const o=Xd();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,r).next(s=>{let i=sy();return s.forEach((a,l)=>{i=i.insert(a,l.overlayedDocument)}),i}))}getOverlayedDocuments(e,n){const r=Xd();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Pt()))}populateOverlays(e,n,r){const o=[];return r.forEach(s=>{n.has(s)||o.push(s)}),this.documentOverlayCache.getOverlays(e,o).next(s=>{s.forEach((i,a)=>{n.set(i,a)})})}computeViews(e,n,r,o){let s=vc();const i=Iy(),a=function(){return Iy()}();return n.forEach((l,c)=>{const u=r.get(c.key);o.has(c.key)&&(u===void 0||u.mutation instanceof ld)?s=s.insert(c.key,c):u!==void 0?(i.set(c.key,u.mutation.getFieldMask()),Ry(u.mutation,c,u.mutation.getFieldMask(),br.now())):i.set(c.key,vs.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>i.set(c,u)),n.forEach((c,u)=>{var f;return a.set(c,new pde(u,(f=i.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Iy();let o=new Fn((i,a)=>i-a),s=Pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(i=>{for(const a of i)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||vs.empty();u=a.applyToLocalView(c,u),r.set(l,u);const f=(o.get(a.batchId)||Pt()).add(l);o=o.insert(a.batchId,f)})}).next(()=>{const i=[],a=o.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,f=xF();u.forEach(h=>{if(!s.has(h)){const p=TF(n.get(h),r.get(h));p!==null&&f.set(h,p),s=s.add(h)}}),i.push(this.documentOverlayCache.saveOverlays(e,c,f))}return ke.waitFor(i)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,o){return function(i){return tt.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gF(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next(s=>{const i=o-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-s.size):ke.resolve(Xd());let a=-1,l=s;return i.next(c=>ke.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(u)?ke.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Pt())).next(u=>({batchId:a,changes:bF(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new tt(n)).next(r=>{let o=sy();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const s=n.collectionGroup;let i=sy();return this.indexManager.getCollectionParents(e,s).next(a=>ke.forEach(a,l=>{const c=function(f,h){return new bv(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,o).next(u=>{u.forEach((f,h)=>{i=i.insert(f,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r,o){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,o))).next(i=>{s.forEach((l,c)=>{const u=c.getKey();i.get(u)===null&&(i=i.insert(u,ao.newInvalidDocument(u)))});let a=sy();return i.forEach((l,c)=>{const u=s.get(l);u!==void 0&&Ry(u.mutation,c,vs.empty(),br.now()),PC(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gde{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return ke.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:Ga(o.createTime)}}(n)),ke.resolve()}getNamedQuery(e,n){return ke.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(o){return{name:o.name,query:ide(o.bundledQuery),readTime:Ga(o.readTime)}}(n)),ke.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yde{constructor(){this.overlays=new Fn(tt.comparator),this.dr=new Map}getOverlay(e,n){return ke.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Xd();return ke.forEach(n,o=>this.getOverlay(e,o).next(s=>{s!==null&&r.set(o,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((o,s)=>{this.Tt(e,n,s)}),ke.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.dr.get(r);return o!==void 0&&(o.forEach(s=>this.overlays=this.overlays.remove(s)),this.dr.delete(r)),ke.resolve()}getOverlaysForCollection(e,n,r){const o=Xd(),s=n.length+1,i=new tt(n.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&o.set(l.getKey(),l)}return ke.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let s=new Fn((c,u)=>c-u);const i=this.overlays.getIterator();for(;i.hasNext();){const c=i.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=Xd(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Xd(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=o)););return ke.resolve(a)}Tt(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const i=this.dr.get(o.largestBatchId).delete(r.key);this.dr.set(o.largestBatchId,i)}this.overlays=this.overlays.insert(r.key,new Lue(n,r));let s=this.dr.get(n);s===void 0&&(s=Pt(),this.dr.set(n,s)),this.dr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vde{constructor(){this.sessionToken=Yr.EMPTY_BYTE_STRING}getSessionToken(e){return ke.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ke.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(){this.Er=new xr(Rr.Ar),this.Rr=new xr(Rr.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,n){const r=new Rr(e,n);this.Er=this.Er.add(r),this.Rr=this.Rr.add(r)}mr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.gr(new Rr(e,n))}pr(e,n){e.forEach(r=>this.removeReference(r,n))}yr(e){const n=new tt(new kn([])),r=new Rr(n,e),o=new Rr(n,e+1),s=[];return this.Rr.forEachInRange([r,o],i=>{this.gr(i),s.push(i.key)}),s}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new tt(new kn([])),r=new Rr(n,e),o=new Rr(n,e+1);let s=Pt();return this.Rr.forEachInRange([r,o],i=>{s=s.add(i.key)}),s}containsKey(e){const n=new Rr(e,0),r=this.Er.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Rr{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return tt.comparator(e.key,n.key)||Dt(e.br,n.br)}static Vr(e,n){return Dt(e.br,n.br)||tt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wde{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new xr(Rr.Ar)}checkEmpty(e){return ke.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Oue(s,n,r,o);this.mutationQueue.push(i);for(const a of o)this.vr=this.vr.add(new Rr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ke.resolve(i)}lookupMutationBatch(e,n){return ke.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.Fr(r),s=o<0?0:o;return ke.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ke.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Rr(n,0),o=new Rr(n,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,o],i=>{const a=this.Cr(i.br);s.push(a)}),ke.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new xr(Dt);return n.forEach(o=>{const s=new Rr(o,0),i=new Rr(o,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,i],a=>{r=r.add(a.br)})}),ke.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let s=r;tt.isDocumentKey(s)||(s=s.child(""));const i=new Rr(new tt(s),0);let a=new xr(Dt);return this.vr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===o&&(a=a.add(l.br)),!0)},i),ke.resolve(this.Mr(a))}Mr(e){const n=[];return e.forEach(r=>{const o=this.Cr(r);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){Qt(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return ke.forEach(n.mutations,o=>{const s=new Rr(o.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.vr=r})}Bn(e){}containsKey(e,n){const r=new Rr(n,0),o=this.vr.firstAfterOrEqual(r);return ke.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ke.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bde{constructor(e){this.Nr=e,this.docs=function(){return new Fn(tt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),s=o?o.size:0,i=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ke.resolve(r?r.document.mutableCopy():ao.newInvalidDocument(n))}getEntries(e,n){let r=vc();return n.forEach(o=>{const s=this.docs.get(o);r=r.insert(o,s?s.document.mutableCopy():ao.newInvalidDocument(o))}),ke.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let s=vc();const i=n.path,a=new tt(i.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||Xce(Qce(u),r)<=0||(o.has(u.key)||PC(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return ke.resolve(s)}getAllFromCollectionGroup(e,n,r,o){lt()}Br(e,n){return ke.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new xde(this)}getSize(e){return ke.resolve(this.size)}}class xde extends hde{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?n.push(this.hr.addEntry(e,o)):this.hr.removeEntry(r)}),ke.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _de{constructor(e){this.persistence=e,this.Lr=new Yf(n=>f4(n),h4),this.lastRemoteSnapshotVersion=ut.min(),this.highestTargetId=0,this.kr=0,this.qr=new w4,this.targetCount=0,this.Qr=nm.qn()}forEachTarget(e,n){return this.Lr.forEach((r,o)=>n(o)),ke.resolve()}getLastRemoteSnapshotVersion(e){return ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ke.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),ke.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),ke.resolve()}Un(e){this.Lr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new nm(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,ke.resolve()}updateTargetData(e,n){return this.Un(n),ke.resolve()}removeTargetData(e,n){return this.Lr.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,ke.resolve()}removeTargets(e,n,r){let o=0;const s=[];return this.Lr.forEach((i,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Lr.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),o++)}),ke.waitFor(s).next(()=>o)}getTargetCount(e){return ke.resolve(this.targetCount)}getTargetData(e,n){const r=this.Lr.get(n)||null;return ke.resolve(r)}addMatchingKeys(e,n,r){return this.qr.mr(n,r),ke.resolve()}removeMatchingKeys(e,n,r){this.qr.pr(n,r);const o=this.persistence.referenceDelegate,s=[];return o&&n.forEach(i=>{s.push(o.markPotentiallyOrphaned(e,i))}),ke.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),ke.resolve()}getMatchingKeysForTargetId(e,n){const r=this.qr.Sr(n);return ke.resolve(r)}containsKey(e,n){return ke.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(e,n){this.Kr={},this.overlays={},this.$r=new TC(0),this.Ur=!1,this.Ur=!0,this.Wr=new vde,this.referenceDelegate=e(this),this.Gr=new _de(this),this.indexManager=new ade,this.remoteDocumentCache=function(o){return new bde(o)}(r=>this.referenceDelegate.zr(r)),this.serializer=new sde(n),this.jr=new gde(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new yde,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Kr[e.toKey()];return r||(r=new wde(n,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,r){Ge("MemoryPersistence","Starting transaction:",e);const o=new Cde(this.$r.next());return this.referenceDelegate.Hr(),r(o).next(s=>this.referenceDelegate.Jr(o).next(()=>s)).toPromise().then(s=>(o.raiseOnCommittedEvent(),s))}Yr(e,n){return ke.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,n)))}}class Cde extends Zce{constructor(e){super(),this.currentSequenceNumber=e}}class b4{constructor(e){this.persistence=e,this.Zr=new w4,this.Xr=null}static ei(e){return new b4(e)}get ti(){if(this.Xr)return this.Xr;throw lt()}addReference(e,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),ke.resolve()}removeReference(e,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),ke.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),ke.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(o=>this.ti.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ke.forEach(this.ti,r=>{const o=tt.fromPath(r);return this.ni(e,o).next(s=>{s||n.removeEntry(o,ut.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return ke.or([()=>ke.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class px{constructor(e,n){this.persistence=e,this.ri=new Yf(r=>nue(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=fde(this,n)}static ei(e,n){return new px(e,n)}Hr(){}Jr(e){return ke.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(o=>r+o))}nr(e){let n=0;return this.er(e,r=>{n++}).next(()=>n)}er(e,n){return ke.forEach(this.ri,(r,o)=>this.ir(e,r,o).next(s=>s?ke.resolve():n(o)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),s=o.newChangeBuffer();return o.Br(e,i=>this.ir(e,i,n).next(a=>{a||(r++,s.removeEntry(i,ut.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),ke.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),ke.resolve()}removeReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),ke.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),ke.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=rb(e.data.value)),n}ir(e,n,r){return ke.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.ri.get(n);return ke.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Wi=r,this.Gi=o}static zi(e,n){let r=Pt(),o=Pt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:o=o.add(s.doc.key)}return new x4(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ede{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kde{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return tie()?8:eue(vo())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,r,o){const s={result:null};return this.Xi(e,n).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.es(e,n,o,r).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new Ede;return this.ts(e,n,i).next(a=>{if(s.result=a,this.Hi)return this.ns(e,n,i,a.size)})}).next(()=>s.result)}ns(e,n,r,o){return r.documentReadCount<this.Ji?(Wh()<=At.DEBUG&&Ge("QueryEngine","SDK will not create cache indexes for query:",Gh(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),ke.resolve()):(Wh()<=At.DEBUG&&Ge("QueryEngine","Query:",Gh(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.Yi*o?(Wh()<=At.DEBUG&&Ge("QueryEngine","The SDK decides to create cache indexes for query:",Gh(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wa(n))):ke.resolve())}Xi(e,n){if(ID(n))return ke.resolve(null);let r=Wa(n);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=PN(n,null,"F"),r=Wa(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const i=Pt(...s);return this.Zi.getDocuments(e,i).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.rs(n,a);return this.ss(n,c,i,l.readTime)?this.Xi(e,PN(n,null,"F")):this.os(e,c,n,l)}))})))}es(e,n,r,o){return ID(n)||o.isEqual(ut.min())?ke.resolve(null):this.Zi.getDocuments(e,r).next(s=>{const i=this.rs(n,s);return this.ss(n,i,r,o)?ke.resolve(null):(Wh()<=At.DEBUG&&Ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Gh(n)),this.os(e,i,n,Yce(o,-1)).next(a=>a))})}rs(e,n){let r=new xr(vF(e));return n.forEach((o,s)=>{PC(e,s)&&(r=r.add(s))}),r}ss(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(o)>0)}ts(e,n,r){return Wh()<=At.DEBUG&&Ge("QueryEngine","Using full collection scan to execute query:",Gh(n)),this.Zi.getDocumentsMatchingQuery(e,n,Uu.min(),r)}os(e,n,r,o){return this.Zi.getDocumentsMatchingQuery(e,r,o).next(s=>(n.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sde{constructor(e,n,r,o){this.persistence=e,this._s=n,this.serializer=o,this.us=new Fn(Dt),this.cs=new Yf(s=>f4(s),h4),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mde(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function Tde(t,e,n,r){return new Sde(t,e,n,r)}async function BF(t,e){const n=ft(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next(s=>(o=s,n.Ps(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const i=[],a=[];let l=Pt();for(const c of o){i.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ts:c,removedBatchIds:i,addedBatchIds:a}))})})}function Nde(t,e){const n=ft(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),s=n.hs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const f=c.batch,h=f.keys();let p=ke.resolve();return h.forEach(m=>{p=p.next(()=>u.getEntry(l,m)).next(y=>{const x=c.docVersions.get(m);Qt(x!==null),y.version.compareTo(x)<0&&(f.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),u.addEntry(y)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Pt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,o))})}function FF(t){const e=ft(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function Ide(t,e){const n=ft(t),r=e.snapshotVersion;let o=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=n.hs.newChangeBuffer({trackRemovals:!0});o=n.us;const a=[];e.targetChanges.forEach((u,f)=>{const h=o.get(f);if(!h)return;a.push(n.Gr.removeMatchingKeys(s,u.removedDocuments,f).next(()=>n.Gr.addMatchingKeys(s,u.addedDocuments,f)));let p=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?p=p.withResumeToken(Yr.EMPTY_BYTE_STRING,ut.min()).withLastLimboFreeSnapshotVersion(ut.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),o=o.insert(f,p),function(y,x,b){return y.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(h,p,u)&&a.push(n.Gr.updateTargetData(s,p))});let l=vc(),c=Pt();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(Rde(s,i,e.documentUpdates).next(u=>{l=u.Is,c=u.ds})),!r.isEqual(ut.min())){const u=n.Gr.getLastRemoteSnapshotVersion(s).next(f=>n.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return ke.waitFor(a).next(()=>i.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.us=o,s))}function Rde(t,e,n){let r=Pt(),o=Pt();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let i=vc();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(o=o.add(a)),l.isNoDocument()&&l.version.isEqual(ut.min())?(e.removeEntry(a,l.readTime),i=i.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),i=i.insert(a,l)):Ge("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Is:i,ds:o}})}function Ade(t,e){const n=ft(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Pde(t,e){const n=ft(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return n.Gr.getTargetData(r,e).next(s=>s?(o=s,ke.resolve(o)):n.Gr.allocateTargetId(r).next(i=>(o=new hu(e,i,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=n.us.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(e,r.targetId)),r})}async function jN(t,e,n){const r=ft(t),o=r.us.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,i=>r.persistence.referenceDelegate.removeTarget(i,o))}catch(i){if(!jm(i))throw i;Ge("LocalStore",`Failed to update sequence numbers for target ${e}: ${i}`)}r.us=r.us.remove(e),r.cs.delete(o.target)}function FD(t,e,n){const r=ft(t);let o=ut.min(),s=Pt();return r.persistence.runTransaction("Execute query","readwrite",i=>function(l,c,u){const f=ft(l),h=f.cs.get(u);return h!==void 0?ke.resolve(f.us.get(h)):f.Gr.getTargetData(c,u)}(r,i,Wa(e)).next(a=>{if(a)return o=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(i,a.targetId).next(l=>{s=l})}).next(()=>r._s.getDocumentsMatchingQuery(i,e,n?o:ut.min(),n?s:Pt())).next(a=>(Mde(r,bue(e),a),{documents:a,Es:s})))}function Mde(t,e,n){let r=t.ls.get(e)||ut.min();n.forEach((o,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ls.set(e,r)}class UD{constructor(){this.activeTargetIds=Sue()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Dde{constructor(){this._o=new UD,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,r){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new UD,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ode{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){Ge("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){Ge("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zw=null;function xk(){return Zw===null?Zw=function(){return 268435456+Math.round(2147483648*Math.random())}():Zw++,"0x"+Zw.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lde={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jde{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to="WebChannelConnection";class Vde extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${o}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${s}`}Oo(n,r,o,s,i){const a=xk(),l=this.No(n,r.toUriEncodedString());Ge("RestConnection",`Sending RPC '${n}' ${a}:`,l,o);const c={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(c,s,i),this.Lo(n,l,c,o).then(u=>(Ge("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Jp("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",o),u})}ko(n,r,o,s,i,a){return this.Oo(n,r,o,s,i)}Bo(n,r,o){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Om}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,i)=>n[i]=s),o&&o.headers.forEach((s,i)=>n[i]=s)}No(n,r){const o=Lde[n];return`${this.Fo}/v1/${r}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,n,r,o){const s=xk();return new Promise((i,a)=>{const l=new eF;l.setWithCredentials(!0),l.listenOnce(tF.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case nb.NO_ERROR:const u=l.getResponseJson();Ge(to,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),i(u);break;case nb.TIMEOUT:Ge(to,`RPC '${e}' ${s} timed out`),a(new Ye(Se.DEADLINE_EXCEEDED,"Request time out"));break;case nb.HTTP_ERROR:const f=l.getStatus();if(Ge(to,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const p=h==null?void 0:h.error;if(p&&p.status&&p.message){const m=function(x){const b=x.toLowerCase().replace(/_/g,"-");return Object.values(Se).indexOf(b)>=0?b:Se.UNKNOWN}(p.status);a(new Ye(m,p.message))}else a(new Ye(Se.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Ye(Se.UNAVAILABLE,"Connection failed."));break;default:lt()}}finally{Ge(to,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(o);Ge(to,`RPC '${e}' ${s} sending request:`,o),l.send(n,"POST",c,r,15)})}qo(e,n,r){const o=xk(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=oF(),a=rF(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Bo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");Ge(to,`Creating RPC '${e}' stream ${o}: ${u}`,l);const f=i.createWebChannel(u,l);let h=!1,p=!1;const m=new jde({Eo:x=>{p?Ge(to,`Not sending because RPC '${e}' stream ${o} is closed:`,x):(h||(Ge(to,`Opening RPC '${e}' stream ${o} transport.`),f.open(),h=!0),Ge(to,`RPC '${e}' stream ${o} sending:`,x),f.send(x))},Ao:()=>f.close()}),y=(x,b,C)=>{x.listen(b,E=>{try{C(E)}catch(R){setTimeout(()=>{throw R},0)}})};return y(f,oy.EventType.OPEN,()=>{p||(Ge(to,`RPC '${e}' stream ${o} transport opened.`),m.So())}),y(f,oy.EventType.CLOSE,()=>{p||(p=!0,Ge(to,`RPC '${e}' stream ${o} transport closed`),m.Do())}),y(f,oy.EventType.ERROR,x=>{p||(p=!0,Jp(to,`RPC '${e}' stream ${o} transport errored:`,x),m.Do(new Ye(Se.UNAVAILABLE,"The operation could not be completed")))}),y(f,oy.EventType.MESSAGE,x=>{var b;if(!p){const C=x.data[0];Qt(!!C);const E=C,R=(E==null?void 0:E.error)||((b=E[0])===null||b===void 0?void 0:b.error);if(R){Ge(to,`RPC '${e}' stream ${o} received error:`,R);const D=R.status;let O=function(P){const L=sr[P];if(L!==void 0)return IF(L)}(D),T=R.message;O===void 0&&(O=Se.INTERNAL,T="Unknown error status: "+D+" with message "+R.message),p=!0,m.Do(new Ye(O,T)),f.close()}else Ge(to,`RPC '${e}' stream ${o} received:`,C),m.vo(C)}}),y(a,nF.STAT_EVENT,x=>{x.stat===SN.PROXY?Ge(to,`RPC '${e}' stream ${o} detected buffering proxy`):x.stat===SN.NOPROXY&&Ge(to,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{m.bo()},0),m}}function _k(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(t){return new Wue(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(e,n,r=1e3,o=1.5,s=6e4){this.li=e,this.timerId=n,this.Qo=r,this.Ko=o,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),o=Math.max(0,n-r);o>0&&Ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,o,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(e,n,r,o,s,i,a,l){this.li=e,this.Yo=r,this.Zo=o,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new UF(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===Se.RESOURCE_EXHAUSTED?(yc(n.toString()),yc("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===Se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Xo===n&&this.I_(r,o)},r=>{e(()=>{const o=new Ye(Se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.d_(o)})})}I_(e,n){const r=this.T_(this.Xo);this.stream=this.E_(e,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(o=>{r(()=>this.d_(o))}),this.stream.onMessage(o=>{r(()=>++this.n_==1?this.A_(o):this.onNext(o))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(e){return Ge("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(Ge("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $de extends HF{constructor(e,n,r,o,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,i),this.serializer=s}E_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=Kue(this.serializer,e),r=function(s){if(!("targetChange"in s))return ut.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?ut.min():i.readTime?Ga(i.readTime):ut.min()}(e);return this.listener.R_(n,r)}V_(e){const n={};n.database=LN(this.serializer),n.addTarget=function(s,i){let a;const l=i.target;if(a=RN(l)?{documents:Xue(s,l)}:{query:Jue(s,l).ct},a.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){a.resumeToken=PF(s,i.resumeToken);const c=MN(s,i.expectedCount);c!==null&&(a.expectedCount=c)}else if(i.snapshotVersion.compareTo(ut.min())>0){a.readTime=hx(s,i.snapshotVersion.toTimestamp());const c=MN(s,i.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=ede(this.serializer,e);r&&(n.labels=r),this.c_(n)}m_(e){const n={};n.database=LN(this.serializer),n.removeTarget=e,this.c_(n)}}class Bde extends HF{constructor(e,n,r,o,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,i),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,n){return this.connection.qo("Write",e,n)}A_(e){return Qt(!!e.streamToken),this.lastStreamToken=e.streamToken,Qt(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Qt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=Que(e.writeResults,e.commitTime),r=Ga(e.commitTime);return this.listener.y_(r,n)}w_(){const e={};e.database=LN(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Yue(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fde extends class{}{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.S_=!1}b_(){if(this.S_)throw new Ye(Se.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,r,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Oo(e,DN(n,r),o,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ye(Se.UNKNOWN,s.toString())})}ko(e,n,r,o,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.ko(e,DN(n,r),o,i,a,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ye(Se.UNKNOWN,i.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class Ude{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(yc(n),this.C_=!1):Ge("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hde{constructor(e,n,r,o,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(i=>{r.enqueueAndForget(async()=>{Qf(this)&&(Ge("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ft(l);c.k_.add(4),await Cv(c),c.K_.set("Unknown"),c.k_.delete(4),await jC(c)}(this))})}),this.K_=new Ude(r,o)}}async function jC(t){if(Qf(t))for(const e of t.q_)await e(!0)}async function Cv(t){for(const e of t.q_)await e(!1)}function zF(t,e){const n=ft(t);n.L_.has(e.targetId)||(n.L_.set(e.targetId,e),k4(n)?E4(n):Vm(n).s_()&&C4(n,e))}function _4(t,e){const n=ft(t),r=Vm(n);n.L_.delete(e),r.s_()&&WF(n,e),n.L_.size===0&&(r.s_()?r.a_():Qf(n)&&n.K_.set("Unknown"))}function C4(t,e){if(t.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ut.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Vm(t).V_(e)}function WF(t,e){t.U_.xe(e),Vm(t).m_(e)}function E4(t){t.U_=new Fue({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.L_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Vm(t).start(),t.K_.F_()}function k4(t){return Qf(t)&&!Vm(t).i_()&&t.L_.size>0}function Qf(t){return ft(t).k_.size===0}function GF(t){t.U_=void 0}async function zde(t){t.K_.set("Online")}async function Wde(t){t.L_.forEach((e,n)=>{C4(t,e)})}async function Gde(t,e){GF(t),k4(t)?(t.K_.O_(e),E4(t)):t.K_.set("Unknown")}async function qde(t,e,n){if(t.K_.set("Online"),e instanceof AF&&e.state===2&&e.cause)try{await async function(o,s){const i=s.cause;for(const a of s.targetIds)o.L_.has(a)&&(await o.remoteSyncer.rejectListen(a,i),o.L_.delete(a),o.U_.removeTarget(a))}(t,e)}catch(r){Ge("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await mx(t,r)}else if(e instanceof ib?t.U_.$e(e):e instanceof RF?t.U_.Je(e):t.U_.Ge(e),!n.isEqual(ut.min()))try{const r=await FF(t.localStore);n.compareTo(r)>=0&&await function(s,i){const a=s.U_.it(i);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.L_.get(c);u&&s.L_.set(c,u.withResumeToken(l.resumeToken,i))}}),a.targetMismatches.forEach((l,c)=>{const u=s.L_.get(l);if(!u)return;s.L_.set(l,u.withResumeToken(Yr.EMPTY_BYTE_STRING,u.snapshotVersion)),WF(s,l);const f=new hu(u.target,l,c,u.sequenceNumber);C4(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Ge("RemoteStore","Failed to raise snapshot:",r),await mx(t,r)}}async function mx(t,e,n){if(!jm(e))throw e;t.k_.add(1),await Cv(t),t.K_.set("Offline"),n||(n=()=>FF(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ge("RemoteStore","Retrying IndexedDB access"),await n(),t.k_.delete(1),await jC(t)})}function qF(t,e){return e().catch(n=>mx(t,n,e))}async function VC(t){const e=ft(t),n=Gu(e);let r=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;Kde(e);)try{const o=await Ade(e.localStore,r);if(o===null){e.B_.length===0&&n.a_();break}r=o.batchId,Yde(e,o)}catch(o){await mx(e,o)}KF(e)&&YF(e)}function Kde(t){return Qf(t)&&t.B_.length<10}function Yde(t,e){t.B_.push(e);const n=Gu(t);n.s_()&&n.f_&&n.g_(e.mutations)}function KF(t){return Qf(t)&&!Gu(t).i_()&&t.B_.length>0}function YF(t){Gu(t).start()}async function Qde(t){Gu(t).w_()}async function Xde(t){const e=Gu(t);for(const n of t.B_)e.g_(n.mutations)}async function Jde(t,e,n){const r=t.B_.shift(),o=g4.from(r,e,n);await qF(t,()=>t.remoteSyncer.applySuccessfulWrite(o)),await VC(t)}async function Zde(t,e){e&&Gu(t).f_&&await async function(r,o){if(function(i){return Vue(i)&&i!==Se.ABORTED}(o.code)){const s=r.B_.shift();Gu(r).__(),await qF(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,o)),await VC(r)}}(t,e),KF(t)&&YF(t)}async function zD(t,e){const n=ft(t);n.asyncQueue.verifyOperationInProgress(),Ge("RemoteStore","RemoteStore received new credentials");const r=Qf(n);n.k_.add(3),await Cv(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await jC(n)}async function efe(t,e){const n=ft(t);e?(n.k_.delete(2),await jC(n)):e||(n.k_.add(2),await Cv(n),n.K_.set("Unknown"))}function Vm(t){return t.W_||(t.W_=function(n,r,o){const s=ft(n);return s.b_(),new $de(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,o)}(t.datastore,t.asyncQueue,{Ro:zde.bind(null,t),mo:Wde.bind(null,t),po:Gde.bind(null,t),R_:qde.bind(null,t)}),t.q_.push(async e=>{e?(t.W_.__(),k4(t)?E4(t):t.K_.set("Unknown")):(await t.W_.stop(),GF(t))})),t.W_}function Gu(t){return t.G_||(t.G_=function(n,r,o){const s=ft(n);return s.b_(),new Bde(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,o)}(t.datastore,t.asyncQueue,{Ro:()=>Promise.resolve(),mo:Qde.bind(null,t),po:Zde.bind(null,t),p_:Xde.bind(null,t),y_:Jde.bind(null,t)}),t.q_.push(async e=>{e?(t.G_.__(),await VC(t)):(await t.G_.stop(),t.B_.length>0&&(Ge("RemoteStore",`Stopping write stream with ${t.B_.length} pending writes`),t.B_=[]))})),t.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e,n,r,o,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=s,this.deferred=new tc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,s){const i=Date.now()+r,a=new S4(e,n,i,o,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ye(Se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function T4(t,e){if(yc("AsyncQueue",`${e}: ${t}`),jm(t))return new Ye(Se.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{static emptySet(e){return new Tp(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||tt.comparator(n.key,r.key):(n,r)=>tt.comparator(n.key,r.key),this.keyedMap=sy(),this.sortedSet=new Fn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Tp)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,s=r.getNext().key;if(!o.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Tp;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(){this.z_=new Fn(tt.comparator)}track(e){const n=e.doc.key,r=this.z_.get(n);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(n,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(n):e.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):lt():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class rm{constructor(e,n,r,o,s,i,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,o,s){const i=[];return n.forEach(a=>{i.push({type:0,doc:a})}),new rm(e,n,Tp.emptySet(n),i,r,o,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&AC(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tfe{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class nfe{constructor(){this.queries=GD(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const o=ft(n),s=o.queries;o.queries=GD(),s.forEach((i,a)=>{for(const l of a.J_)l.onError(r)})})(this,new Ye(Se.ABORTED,"Firestore shutting down"))}}function GD(){return new Yf(t=>yF(t),AC)}async function N4(t,e){const n=ft(t);let r=3;const o=e.query;let s=n.queries.get(o);s?!s.Y_()&&e.Z_()&&(r=2):(s=new tfe,r=e.Z_()?0:1);try{switch(r){case 0:s.H_=await n.onListen(o,!0);break;case 1:s.H_=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(i){const a=T4(i,`Initialization of query '${Gh(e.query)}' failed`);return void e.onError(a)}n.queries.set(o,s),s.J_.push(e),e.ea(n.onlineState),s.H_&&e.ta(s.H_)&&R4(n)}async function I4(t,e){const n=ft(t),r=e.query;let o=3;const s=n.queries.get(r);if(s){const i=s.J_.indexOf(e);i>=0&&(s.J_.splice(i,1),s.J_.length===0?o=e.Z_()?0:1:!s.Y_()&&e.Z_()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function rfe(t,e){const n=ft(t);let r=!1;for(const o of e){const s=o.query,i=n.queries.get(s);if(i){for(const a of i.J_)a.ta(o)&&(r=!0);i.H_=o}}r&&R4(n)}function ofe(t,e,n){const r=ft(t),o=r.queries.get(e);if(o)for(const s of o.J_)s.onError(n);r.queries.delete(e)}function R4(t){t.X_.forEach(e=>{e.next()})}var VN,qD;(qD=VN||(VN={})).na="default",qD.Cache="cache";class A4{constructor(e,n,r){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new rm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=rm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==VN.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(e){this.key=e}}class XF{constructor(e){this.key=e}}class sfe{constructor(e,n){this.query=e,this.Ea=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Pt(),this.mutatedKeys=Pt(),this.Va=vF(e),this.ma=new Tp(this.Va)}get fa(){return this.Ea}ga(e,n){const r=n?n.pa:new WD,o=n?n.ma:this.ma;let s=n?n.mutatedKeys:this.mutatedKeys,i=o,a=!1;const l=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,c=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((u,f)=>{const h=o.get(u),p=PC(this.query,f)?f:null,m=!!h&&this.mutatedKeys.has(h.key),y=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let x=!1;h&&p?h.data.isEqual(p.data)?m!==y&&(r.track({type:3,doc:p}),x=!0):this.ya(h,p)||(r.track({type:2,doc:p}),x=!0,(l&&this.Va(p,l)>0||c&&this.Va(p,c)<0)&&(a=!0)):!h&&p?(r.track({type:0,doc:p}),x=!0):h&&!p&&(r.track({type:1,doc:h}),x=!0,(l||c)&&(a=!0)),x&&(p?(i=i.add(p),s=y?s.add(u):s.delete(u)):(i=i.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const u=this.query.limitType==="F"?i.last():i.first();i=i.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{ma:i,pa:r,ss:a,mutatedKeys:s}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const s=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const i=e.pa.j_();i.sort((u,f)=>function(p,m){const y=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt()}};return y(p)-y(m)}(u.type,f.type)||this.Va(u.doc,f.doc)),this.wa(r),o=o!=null&&o;const a=n&&!o?this.Sa():[],l=this.Ra.size===0&&this.current&&!o?1:0,c=l!==this.Aa;return this.Aa=l,i.length!==0||c?{snapshot:new rm(this.query,e.ma,s,i,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new WD,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.Ea=this.Ea.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ea=this.Ea.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Pt(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return e.forEach(r=>{this.Ra.has(r)||n.push(new XF(r))}),this.Ra.forEach(r=>{e.has(r)||n.push(new QF(r))}),n}va(e){this.Ea=e.Es,this.Ra=Pt();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return rm.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class ife{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class afe{constructor(e){this.key=e,this.Fa=!1}}class lfe{constructor(e,n,r,o,s,i){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Ma={},this.xa=new Yf(a=>yF(a),AC),this.Oa=new Map,this.Na=new Set,this.Ba=new Fn(tt.comparator),this.La=new Map,this.ka=new w4,this.qa={},this.Qa=new Map,this.Ka=nm.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function cfe(t,e,n=!0){const r=rU(t);let o;const s=r.xa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),o=s.view.Ca()):o=await JF(r,e,n,!0),o}async function ufe(t,e){const n=rU(t);await JF(n,e,!0,!1)}async function JF(t,e,n,r){const o=await Pde(t.localStore,Wa(e)),s=o.targetId,i=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await dfe(t,e,s,i==="current",o.resumeToken)),t.isPrimaryClient&&n&&zF(t.remoteStore,o),a}async function dfe(t,e,n,r,o){t.Ua=(f,h,p)=>async function(y,x,b,C){let E=x.view.ga(b);E.ss&&(E=await FD(y.localStore,x.query,!1).then(({documents:T})=>x.view.ga(T,E)));const R=C&&C.targetChanges.get(x.targetId),D=C&&C.targetMismatches.get(x.targetId)!=null,O=x.view.applyChanges(E,y.isPrimaryClient,R,D);return YD(y,x.targetId,O.ba),O.snapshot}(t,f,h,p);const s=await FD(t.localStore,e,!0),i=new sfe(e,s.Es),a=i.ga(s.documents),l=_v.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",o),c=i.applyChanges(a,t.isPrimaryClient,l);YD(t,n,c.ba);const u=new ife(e,n,i);return t.xa.set(e,u),t.Oa.has(n)?t.Oa.get(n).push(e):t.Oa.set(n,[e]),c.snapshot}async function ffe(t,e,n){const r=ft(t),o=r.xa.get(e),s=r.Oa.get(o.targetId);if(s.length>1)return r.Oa.set(o.targetId,s.filter(i=>!AC(i,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await jN(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),n&&_4(r.remoteStore,o.targetId),$N(r,o.targetId)}).catch(Lm)):($N(r,o.targetId),await jN(r.localStore,o.targetId,!0))}async function hfe(t,e){const n=ft(t),r=n.xa.get(e),o=n.Oa.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),_4(n.remoteStore,r.targetId))}async function pfe(t,e,n){const r=xfe(t);try{const o=await function(i,a){const l=ft(i),c=br.now(),u=a.reduce((p,m)=>p.add(m.key),Pt());let f,h;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=vc(),y=Pt();return l.hs.getEntries(p,u).next(x=>{m=x,m.forEach((b,C)=>{C.isValidDocument()||(y=y.add(b))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,m)).next(x=>{f=x;const b=[];for(const C of a){const E=Mue(C,f.get(C.key).overlayedDocument);E!=null&&b.push(new ld(C.key,E,cF(E.value.mapValue),ai.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,b,a)}).next(x=>{h=x;const b=x.applyToLocalDocumentSet(f,y);return l.documentOverlayCache.saveOverlays(p,x.batchId,b)})}).then(()=>({batchId:h.batchId,changes:bF(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(i,a,l){let c=i.qa[i.currentUser.toKey()];c||(c=new Fn(Dt)),c=c.insert(a,l),i.qa[i.currentUser.toKey()]=c}(r,o.batchId,n),await Ev(r,o.changes),await VC(r.remoteStore)}catch(o){const s=T4(o,"Failed to persist write");n.reject(s)}}async function ZF(t,e){const n=ft(t);try{const r=await Ide(n.localStore,e);e.targetChanges.forEach((o,s)=>{const i=n.La.get(s);i&&(Qt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?i.Fa=!0:o.modifiedDocuments.size>0?Qt(i.Fa):o.removedDocuments.size>0&&(Qt(i.Fa),i.Fa=!1))}),await Ev(n,r,e)}catch(r){await Lm(r)}}function KD(t,e,n){const r=ft(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.xa.forEach((s,i)=>{const a=i.view.ea(e);a.snapshot&&o.push(a.snapshot)}),function(i,a){const l=ft(i);l.onlineState=a;let c=!1;l.queries.forEach((u,f)=>{for(const h of f.J_)h.ea(a)&&(c=!0)}),c&&R4(l)}(r.eventManager,e),o.length&&r.Ma.R_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function mfe(t,e,n){const r=ft(t);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.La.get(e),s=o&&o.key;if(s){let i=new Fn(tt.comparator);i=i.insert(s,ao.newNoDocument(s,ut.min()));const a=Pt().add(s),l=new OC(ut.min(),new Map,new Fn(Dt),i,a);await ZF(r,l),r.Ba=r.Ba.remove(s),r.La.delete(e),P4(r)}else await jN(r.localStore,e,!1).then(()=>$N(r,e,n)).catch(Lm)}async function gfe(t,e){const n=ft(t),r=e.batch.batchId;try{const o=await Nde(n.localStore,e);tU(n,r,null),eU(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ev(n,o)}catch(o){await Lm(o)}}async function yfe(t,e,n){const r=ft(t);try{const o=await function(i,a){const l=ft(i);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(Qt(f!==null),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);tU(r,e,n),eU(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ev(r,o)}catch(o){await Lm(o)}}function eU(t,e){(t.Qa.get(e)||[]).forEach(n=>{n.resolve()}),t.Qa.delete(e)}function tU(t,e,n){const r=ft(t);let o=r.qa[r.currentUser.toKey()];if(o){const s=o.get(e);s&&(n?s.reject(n):s.resolve(),o=o.remove(e)),r.qa[r.currentUser.toKey()]=o}}function $N(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Oa.get(e))t.xa.delete(r),n&&t.Ma.Wa(r,n);t.Oa.delete(e),t.isPrimaryClient&&t.ka.yr(e).forEach(r=>{t.ka.containsKey(r)||nU(t,r)})}function nU(t,e){t.Na.delete(e.path.canonicalString());const n=t.Ba.get(e);n!==null&&(_4(t.remoteStore,n),t.Ba=t.Ba.remove(e),t.La.delete(n),P4(t))}function YD(t,e,n){for(const r of n)r instanceof QF?(t.ka.addReference(r.key,e),vfe(t,r)):r instanceof XF?(Ge("SyncEngine","Document no longer in limbo: "+r.key),t.ka.removeReference(r.key,e),t.ka.containsKey(r.key)||nU(t,r.key)):lt()}function vfe(t,e){const n=e.key,r=n.path.canonicalString();t.Ba.get(n)||t.Na.has(r)||(Ge("SyncEngine","New document in limbo: "+n),t.Na.add(r),P4(t))}function P4(t){for(;t.Na.size>0&&t.Ba.size<t.maxConcurrentLimboResolutions;){const e=t.Na.values().next().value;t.Na.delete(e);const n=new tt(kn.fromString(e)),r=t.Ka.next();t.La.set(r,new afe(n)),t.Ba=t.Ba.insert(n,r),zF(t.remoteStore,new hu(Wa(RC(n.path)),r,"TargetPurposeLimboResolution",TC.oe))}}async function Ev(t,e,n){const r=ft(t),o=[],s=[],i=[];r.xa.isEmpty()||(r.xa.forEach((a,l)=>{i.push(r.Ua(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){o.push(c);const f=x4.zi(l.targetId,c);s.push(f)}}))}),await Promise.all(i),r.Ma.R_(o),await async function(l,c){const u=ft(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>ke.forEach(c,h=>ke.forEach(h.Wi,p=>u.persistence.referenceDelegate.addReference(f,h.targetId,p)).next(()=>ke.forEach(h.Gi,p=>u.persistence.referenceDelegate.removeReference(f,h.targetId,p)))))}catch(f){if(!jm(f))throw f;Ge("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const h=f.targetId;if(!f.fromCache){const p=u.us.get(h),m=p.snapshotVersion,y=p.withLastLimboFreeSnapshotVersion(m);u.us=u.us.insert(h,y)}}}(r.localStore,s))}async function wfe(t,e){const n=ft(t);if(!n.currentUser.isEqual(e)){Ge("SyncEngine","User change. New user:",e.toKey());const r=await BF(n.localStore,e);n.currentUser=e,function(s,i){s.Qa.forEach(a=>{a.forEach(l=>{l.reject(new Ye(Se.CANCELLED,i))})}),s.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ev(n,r.Ts)}}function bfe(t,e){const n=ft(t),r=n.La.get(e);if(r&&r.Fa)return Pt().add(r.key);{let o=Pt();const s=n.Oa.get(e);if(!s)return o;for(const i of s){const a=n.xa.get(i);o=o.unionWith(a.view.fa)}return o}}function rU(t){const e=ft(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bfe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mfe.bind(null,e),e.Ma.R_=rfe.bind(null,e.eventManager),e.Ma.Wa=ofe.bind(null,e.eventManager),e}function xfe(t){const e=ft(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gfe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yfe.bind(null,e),e}class gx{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=LC(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return Tde(this.persistence,new kde,e.initialUser,this.serializer)}ja(e){return new $F(b4.ei,this.serializer)}za(e){return new Dde}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gx.provider={build:()=>new gx};class _fe extends gx{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){Qt(this.persistence.referenceDelegate instanceof px);const r=this.persistence.referenceDelegate.garbageCollector;return new ude(r,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?Fo.withCacheSize(this.cacheSizeBytes):Fo.DEFAULT;return new $F(r=>px.ei(r,n),this.serializer)}}class BN{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>KD(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wfe.bind(null,this.syncEngine),await efe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new nfe}()}createDatastore(e){const n=LC(e.databaseInfo.databaseId),r=function(s){return new Vde(s)}(e.databaseInfo);return function(s,i,a,l){return new Fde(s,i,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,o,s,i,a){return new Hde(r,o,s,i,a)}(this.localStore,this.datastore,e.asyncQueue,n=>KD(this.syncEngine,n,0),function(){return HD.p()?new HD:new Ode}())}createSyncEngine(e,n){return function(o,s,i,a,l,c,u){const f=new lfe(o,s,i,a,l,c);return u&&(f.$a=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const s=ft(o);Ge("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await Cv(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}BN.provider={build:()=>new BN};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):yc("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cfe{constructor(e,n,r,o,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=so.UNAUTHENTICATED,this.clientId=iF.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async i=>{Ge("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(Ge("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new tc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=T4(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ck(t,e){t.asyncQueue.verifyOperationInProgress(),Ge("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async o=>{r.isEqual(o)||(await BF(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function QD(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Efe(t);Ge("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>zD(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,o)=>zD(e.remoteStore,o)),t._onlineComponents=e}async function Efe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ge("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ck(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===Se.FAILED_PRECONDITION||o.code===Se.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;Jp("Error using user provided cache. Falling back to memory cache: "+n),await Ck(t,new gx)}}else Ge("FirestoreClient","Using default OfflineComponentProvider"),await Ck(t,new _fe(void 0));return t._offlineComponents}async function oU(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ge("FirestoreClient","Using user provided OnlineComponentProvider"),await QD(t,t._uninitializedComponentsProvider._online)):(Ge("FirestoreClient","Using default OnlineComponentProvider"),await QD(t,new BN))),t._onlineComponents}function kfe(t){return oU(t).then(e=>e.syncEngine)}async function yx(t){const e=await oU(t),n=e.eventManager;return n.onListen=cfe.bind(null,e.syncEngine),n.onUnlisten=ffe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ufe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=hfe.bind(null,e.syncEngine),n}function Sfe(t,e,n={}){const r=new tc;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,a,l,c){const u=new M4({next:h=>{u.eu(),i.enqueueAndForget(()=>I4(s,f));const p=h.docs.has(a);!p&&h.fromCache?c.reject(new Ye(Se.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&h.fromCache&&l&&l.source==="server"?c.reject(new Ye(Se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),f=new A4(RC(a.path),u,{includeMetadataChanges:!0,ua:!0});return N4(s,f)}(await yx(t),t.asyncQueue,e,n,r)),r.promise}function Tfe(t,e,n={}){const r=new tc;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,a,l,c){const u=new M4({next:h=>{u.eu(),i.enqueueAndForget(()=>I4(s,f)),h.fromCache&&l.source==="server"?c.reject(new Ye(Se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),f=new A4(a,u,{includeMetadataChanges:!0,ua:!0});return N4(s,f)}(await yx(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sU(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iU(t,e,n){if(!n)throw new Ye(Se.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Nfe(t,e,n,r){if(e===!0&&r===!0)throw new Ye(Se.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function JD(t){if(!tt.isDocumentKey(t))throw new Ye(Se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ZD(t){if(tt.isDocumentKey(t))throw new Ye(Se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function $C(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":lt()}function Xo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ye(Se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$C(t);throw new Ye(Se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ye(Se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ye(Se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Nfe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sU((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ye(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ye(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ye(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class BC{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eO({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ye(Se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ye(Se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eO(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Bce;switch(r.type){case"firstParty":return new zce(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ye(Se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=XD.get(n);r&&(Ge("ComponentProvider","Removing Datastore"),XD.delete(n),r.terminate())}(this),Promise.resolve()}}function Ife(t,e,n,r={}){var o;const s=(t=Xo(t,BC))._getSettings(),i=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==i&&Jp("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:i,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=so.MOCK_USER;else{a=Yse(r.mockUserToken,(o=t._app)===null||o===void 0?void 0:o.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Ye(Se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new so(c)}t._authCredentials=new Fce(new sF(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xf(this.firestore,e,this._query)}}class ho{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Au(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ho(this.firestore,e,this._key)}}class Au extends Xf{constructor(e,n,r){super(e,n,RC(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ho(this.firestore,null,new tt(e))}withConverter(e){return new Au(this.firestore,e,this._path)}}function mr(t,e,...n){if(t=Bn(t),iU("collection","path",e),t instanceof BC){const r=kn.fromString(e,...n);return ZD(r),new Au(t,null,r)}{if(!(t instanceof ho||t instanceof Au))throw new Ye(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(kn.fromString(e,...n));return ZD(r),new Au(t.firestore,null,r)}}function ro(t,e,...n){if(t=Bn(t),arguments.length===1&&(e=iF.newId()),iU("doc","path",e),t instanceof BC){const r=kn.fromString(e,...n);return JD(r),new ho(t,null,new tt(r))}{if(!(t instanceof ho||t instanceof Au))throw new Ye(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(kn.fromString(e,...n));return JD(r),new ho(t.firestore,t instanceof Au?t.converter:null,new tt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new UF(this,"async_queue_retry"),this.fu=()=>{const r=_k();r&&Ge("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const n=_k();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;const n=_k();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});const n=new tc;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!jm(e))throw e;Ge("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const o=function(i){let a=i.message||"";return i.stack&&(a=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),a}(r);throw yc("INTERNAL UNHANDLED ERROR: ",o),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(e,n,r){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const o=S4.createAndSchedule(this,e,n,r,s=>this.Su(s));return this.Eu.push(o),o}pu(){this.Au&&lt()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.Eu)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Eu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.Eu.indexOf(e);this.Eu.splice(n,1)}}function nO(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const o=n;for(const s of r)if(s in o&&typeof o[s]=="function")return!0;return!1}(t,["next","error","complete"])}class wc extends BC{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new tO,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new tO(e),this._firestoreClient=void 0,await e}}}function Rfe(t,e){const n=typeof t=="object"?t:JA(),r=typeof t=="string"?t:"(default)",o=Kf(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const s=qse("firestore");s&&Ife(o,...s)}return o}function FC(t){if(t._terminated)throw new Ye(Se.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Afe(t),t._firestoreClient}function Afe(t){var e,n,r;const o=t._freezeSettings(),s=function(a,l,c,u){return new sue(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,sU(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,o);t._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),t._firestoreClient=new Cfe(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e){this._byteString=e}static fromBase64String(e){try{return new om(Yr.fromBase64String(e))}catch(n){throw new Ye(Se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new om(Yr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ye(Se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function FN(){return new kv("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ye(Se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ye(Se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Dt(this._lat,e._lat)||Dt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==o[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pfe=/^__.*__$/;class Mfe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ld(e,this.data,this.fieldMask,n,this.fieldTransforms):new xv(e,this.data,n,this.fieldTransforms)}}class aU{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ld(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function lU(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt()}}class j4{constructor(e,n,r,o,s,i){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,s===void 0&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new j4(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.xu({path:r,Nu:!1});return o.Bu(e),o}Lu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.xu({path:r,Nu:!1});return o.Fu(),o}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return vx(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(lU(this.Mu)&&Pfe.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class Dfe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||LC(e)}$u(e,n,r,o=!1){return new j4({Mu:e,methodName:n,Ku:r,path:Wr.emptyPath(),Nu:!1,Qu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function UC(t){const e=t._freezeSettings(),n=LC(t._databaseId);return new Dfe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function cU(t,e,n,r,o,s={}){const i=t.$u(s.merge||s.mergeFields?2:0,e,n,o);V4("Data must be an object, but it was:",i,r);const a=uU(r,i);let l,c;if(s.merge)l=new vs(i.fieldMask),c=i.fieldTransforms;else if(s.mergeFields){const u=[];for(const f of s.mergeFields){const h=UN(e,f,n);if(!i.contains(h))throw new Ye(Se.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);fU(u,h)||u.push(h)}l=new vs(u),c=i.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=i.fieldTransforms;return new Mfe(new Wo(a),l,c)}class HC extends D4{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof HC}}function Ofe(t,e,n,r){const o=t.$u(1,e,n);V4("Data must be an object, but it was:",o,r);const s=[],i=Wo.empty();ad(r,(l,c)=>{const u=$4(e,l,n);c=Bn(c);const f=o.Lu(u);if(c instanceof HC)s.push(u);else{const h=Sv(c,f);h!=null&&(s.push(u),i.set(u,h))}});const a=new vs(s);return new aU(i,a,o.fieldTransforms)}function Lfe(t,e,n,r,o,s){const i=t.$u(1,e,n),a=[UN(e,r,n)],l=[o];if(s.length%2!=0)throw new Ye(Se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(UN(e,s[h])),l.push(s[h+1]);const c=[],u=Wo.empty();for(let h=a.length-1;h>=0;--h)if(!fU(c,a[h])){const p=a[h];let m=l[h];m=Bn(m);const y=i.Lu(p);if(m instanceof HC)c.push(p);else{const x=Sv(m,y);x!=null&&(c.push(p),u.set(p,x))}}const f=new vs(c);return new aU(u,f,i.fieldTransforms)}function jfe(t,e,n,r=!1){return Sv(n,t.$u(r?4:3,e))}function Sv(t,e){if(dU(t=Bn(t)))return V4("Unsupported field value:",e,t),uU(t,e);if(t instanceof D4)return function(r,o){if(!lU(o.Mu))throw o.qu(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.qu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(o);s&&o.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,o){const s=[];let i=0;for(const a of r){let l=Sv(a,o.ku(i));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),i++}return{arrayValue:{values:s}}}(t,e)}return function(r,o){if((r=Bn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Tue(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=br.fromDate(r);return{timestampValue:hx(o.serializer,s)}}if(r instanceof br){const s=new br(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hx(o.serializer,s)}}if(r instanceof O4)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof om)return{bytesValue:PF(o.serializer,r._byteString)};if(r instanceof ho){const s=o.databaseId,i=r.firestore._databaseId;if(!i.isEqual(s))throw o.qu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:v4(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof L4)return function(i,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:i.toArray().map(l=>{if(typeof l!="number")throw a.qu("VectorValues must only contain numeric values.");return p4(a.serializer,l)})}}}}}}(r,o);throw o.qu(`Unsupported field value: ${$C(r)}`)}(t,e)}function uU(t,e){const n={};return aF(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ad(t,(r,o)=>{const s=Sv(o,e.Ou(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function dU(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof br||t instanceof O4||t instanceof om||t instanceof ho||t instanceof D4||t instanceof L4)}function V4(t,e,n){if(!dU(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const r=$C(n);throw r==="an object"?e.qu(t+" a custom object"):e.qu(t+" "+r)}}function UN(t,e,n){if((e=Bn(e))instanceof kv)return e._internalPath;if(typeof e=="string")return $4(t,e);throw vx("Field path arguments must be of type string or ",t,!1,void 0,n)}const Vfe=new RegExp("[~\\*/\\[\\]]");function $4(t,e,n){if(e.search(Vfe)>=0)throw vx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new kv(...e.split("."))._internalPath}catch{throw vx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function vx(t,e,n,r,o){const s=r&&!r.isEmpty(),i=o!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||i)&&(l+=" (found",s&&(l+=` in field ${r}`),i&&(l+=` in document ${o}`),l+=")"),new Ye(Se.INVALID_ARGUMENT,a+t+l)}function fU(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(e,n,r,o,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ho(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $fe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(B4("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class $fe extends hU{data(){return super.data()}}function B4(t,e){return typeof e=="string"?$4(t,e):e instanceof kv?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ye(Se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class F4{}class Bfe extends F4{}function So(t,e,...n){let r=[];e instanceof F4&&r.push(e),r=r.concat(n),function(s){const i=s.filter(l=>l instanceof U4).length,a=s.filter(l=>l instanceof zC).length;if(i>1||i>0&&a>0)throw new Ye(Se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)t=o._apply(t);return t}class zC extends Bfe{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new zC(e,n,r)}_apply(e){const n=this._parse(e);return mU(e._query,n),new Xf(e.firestore,e.converter,AN(e._query,n))}_parse(e){const n=UC(e.firestore);return function(s,i,a,l,c,u,f){let h;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Ye(Se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){oO(f,u);const p=[];for(const m of f)p.push(rO(l,s,m));h={arrayValue:{values:p}}}else h=rO(l,s,f)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||oO(f,u),h=jfe(a,i,f,u==="in"||u==="not-in");return lr.create(c,u,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Nr(t,e,n){const r=e,o=B4("where",t);return zC._create(o,r,n)}class U4 extends F4{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new U4(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Zi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,s){let i=o;const a=s.getFlattenedFilters();for(const l of a)mU(i,l),i=AN(i,l)}(e._query,n),new Xf(e.firestore,e.converter,AN(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function rO(t,e,n){if(typeof(n=Bn(n))=="string"){if(n==="")throw new Ye(Se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gF(e)&&n.indexOf("/")!==-1)throw new Ye(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(kn.fromString(n));if(!tt.isDocumentKey(r))throw new Ye(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return CD(t,new tt(r))}if(n instanceof ho)return CD(t,n._key);throw new Ye(Se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$C(n)}.`)}function oO(t,e){if(!Array.isArray(t)||t.length===0)throw new Ye(Se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mU(t,e){const n=function(o,s){for(const i of o)for(const a of i.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ye(Se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ye(Se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Ffe{convertValue(e,n="none"){switch(Wu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw lt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ad(e,(o,s)=>{r[o]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,o;const s=(o=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(i=>Yn(i.doubleValue));return new L4(s)}convertGeoPoint(e){return new O4(Yn(e.latitude),Yn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=IC(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(g1(e));default:return null}}convertTimestamp(e){const n=Hu(e);return new br(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=kn.fromString(e);Qt(VF(r));const o=new y1(r.get(1),r.get(3)),s=new tt(r.popFirst(5));return o.isEqual(n)||yc(`Document ${s} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gU(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yU extends hU{constructor(e,n,r,o,s,i){super(e,n,r,o,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ab(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(B4("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ab extends yU{data(e={}){return super.data(e)}}class vU{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new ay(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ab(this._firestore,this._userDataWriter,r.key,r,new ay(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ye(Se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,s){if(o._snapshot.oldDocs.isEmpty()){let i=0;return o._snapshot.docChanges.map(a=>{const l=new ab(o._firestore,o._userDataWriter,a.doc.key,a.doc,new ay(o._snapshot.mutatedKeys.has(a.doc.key),o._snapshot.fromCache),o.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:i++}})}{let i=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new ab(o._firestore,o._userDataWriter,a.doc.key,a.doc,new ay(o._snapshot.mutatedKeys.has(a.doc.key),o._snapshot.fromCache),o.query.converter);let c=-1,u=-1;return a.type!==0&&(c=i.indexOf(a.doc.key),i=i.delete(a.doc.key)),a.type!==1&&(i=i.add(a.doc),u=i.indexOf(a.doc.key)),{type:Ufe(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Ufe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(t){t=Xo(t,ho);const e=Xo(t.firestore,wc);return Sfe(FC(e),t._key).then(n=>wU(e,t,n))}class H4 extends Ffe{constructor(e){super(),this.firestore=e}convertBytes(e){return new om(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ho(this.firestore,null,n)}}function ko(t){t=Xo(t,Xf);const e=Xo(t.firestore,wc),n=FC(e),r=new H4(e);return pU(t._query),Tfe(n,t._query).then(o=>new vU(e,r,t,o))}function Hfe(t,e,n){t=Xo(t,ho);const r=Xo(t.firestore,wc),o=gU(t.converter,e,n);return WC(r,[cU(UC(r),"setDoc",t._key,o,t.converter!==null,n).toMutation(t._key,ai.none())])}function Wc(t,e,n,...r){t=Xo(t,ho);const o=Xo(t.firestore,wc),s=UC(o);let i;return i=typeof(e=Bn(e))=="string"||e instanceof kv?Lfe(s,"updateDoc",t._key,e,n,r):Ofe(s,"updateDoc",t._key,e),WC(o,[i.toMutation(t._key,ai.exists(!0))])}function lb(t){return WC(Xo(t.firestore,wc),[new m4(t._key,ai.none())])}function Vg(t,e){const n=Xo(t.firestore,wc),r=ro(t),o=gU(t.converter,e);return WC(n,[cU(UC(t.firestore),"addDoc",r._key,o,t.converter!==null,{}).toMutation(r._key,ai.exists(!1))]).then(()=>r)}function HN(t,...e){var n,r,o;t=Bn(t);let s={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||nO(e[i])||(s=e[i],i++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(nO(e[i])){const f=e[i];e[i]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[i+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[i+2]=(o=f.complete)===null||o===void 0?void 0:o.bind(f)}let l,c,u;if(t instanceof ho)c=Xo(t.firestore,wc),u=RC(t._key.path),l={next:f=>{e[i]&&e[i](wU(c,t,f))},error:e[i+1],complete:e[i+2]};else{const f=Xo(t,Xf);c=Xo(f.firestore,wc),u=f._query;const h=new H4(c);l={next:p=>{e[i]&&e[i](new vU(c,h,f,p))},error:e[i+1],complete:e[i+2]},pU(t._query)}return function(h,p,m,y){const x=new M4(y),b=new A4(p,x,m);return h.asyncQueue.enqueueAndForget(async()=>N4(await yx(h),b)),()=>{x.eu(),h.asyncQueue.enqueueAndForget(async()=>I4(await yx(h),b))}}(FC(c),u,a,l)}function WC(t,e){return function(r,o){const s=new tc;return r.asyncQueue.enqueueAndForget(async()=>pfe(await kfe(r),o,s)),s.promise}(FC(t),e)}function wU(t,e,n){const r=n.docs.get(e._key),o=new H4(t);return new yU(t,o,e._key,r,new ay(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){Om=o})(Pm),Ya(new Ji("firestore",(r,{instanceIdentifier:o,options:s})=>{const i=r.getProvider("app").getImmediate(),a=new wc(new Uce(r.getProvider("auth-internal")),new Gce(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ye(Se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new y1(c.options.projectId,u)}(i,o),i);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ii(yD,"4.7.6",e),ii(yD,"4.7.6","esm2017")})();const bU="@firebase/installations",z4="0.6.12";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xU=1e4,_U=`w:${z4}`,CU="FIS_v2",zfe="https://firebaseinstallations.googleapis.com/v1",Wfe=60*60*1e3,Gfe="installations",qfe="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kfe={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Sf=new qf(Gfe,qfe,Kfe);function EU(t){return t instanceof ua&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kU({projectId:t}){return`${zfe}/projects/${t}/installations`}function SU(t){return{token:t.token,requestStatus:2,expiresIn:Qfe(t.expiresIn),creationTime:Date.now()}}async function TU(t,e){const r=(await e.json()).error;return Sf.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function NU({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Yfe(t,{refreshToken:e}){const n=NU(t);return n.append("Authorization",Xfe(e)),n}async function IU(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Qfe(t){return Number(t.replace("s","000"))}function Xfe(t){return`${CU} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jfe({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=kU(t),o=NU(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&o.append("x-firebase-client",c)}const i={fid:n,authVersion:CU,appId:t.appId,sdkVersion:_U},a={method:"POST",headers:o,body:JSON.stringify(i)},l=await IU(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:SU(c.authToken)}}else throw await TU("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RU(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zfe(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ehe=/^[cdef][\w-]{21}$/,zN="";function the(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=nhe(t);return ehe.test(n)?n:zN}catch{return zN}}function nhe(t){return Zfe(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AU=new Map;function PU(t,e){const n=GC(t);MU(n,e),rhe(n,e)}function MU(t,e){const n=AU.get(t);if(n)for(const r of n)r(e)}function rhe(t,e){const n=ohe();n&&n.postMessage({key:t,fid:e}),she()}let Jd=null;function ohe(){return!Jd&&"BroadcastChannel"in self&&(Jd=new BroadcastChannel("[Firebase] FID Change"),Jd.onmessage=t=>{MU(t.data.key,t.data.fid)}),Jd}function she(){AU.size===0&&Jd&&(Jd.close(),Jd=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ihe="firebase-installations-database",ahe=1,Tf="firebase-installations-store";let Ek=null;function W4(){return Ek||(Ek=fB(ihe,ahe,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Tf)}}})),Ek}async function wx(t,e){const n=GC(t),o=(await W4()).transaction(Tf,"readwrite"),s=o.objectStore(Tf),i=await s.get(n);return await s.put(e,n),await o.done,(!i||i.fid!==e.fid)&&PU(t,e.fid),e}async function DU(t){const e=GC(t),r=(await W4()).transaction(Tf,"readwrite");await r.objectStore(Tf).delete(e),await r.done}async function qC(t,e){const n=GC(t),o=(await W4()).transaction(Tf,"readwrite"),s=o.objectStore(Tf),i=await s.get(n),a=e(i);return a===void 0?await s.delete(n):await s.put(a,n),await o.done,a&&(!i||i.fid!==a.fid)&&PU(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G4(t){let e;const n=await qC(t.appConfig,r=>{const o=lhe(r),s=che(t,o);return e=s.registrationPromise,s.installationEntry});return n.fid===zN?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function lhe(t){const e=t||{fid:the(),registrationStatus:0};return OU(e)}function che(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(Sf.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=uhe(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:dhe(t)}:{installationEntry:e}}async function uhe(t,e){try{const n=await Jfe(t,e);return wx(t.appConfig,n)}catch(n){throw EU(n)&&n.customData.serverCode===409?await DU(t.appConfig):await wx(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function dhe(t){let e=await sO(t.appConfig);for(;e.registrationStatus===1;)await RU(100),e=await sO(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await G4(t);return r||n}return e}function sO(t){return qC(t,e=>{if(!e)throw Sf.create("installation-not-found");return OU(e)})}function OU(t){return fhe(t)?{fid:t.fid,registrationStatus:0}:t}function fhe(t){return t.registrationStatus===1&&t.registrationTime+xU<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hhe({appConfig:t,heartbeatServiceProvider:e},n){const r=phe(t,n),o=Yfe(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&o.append("x-firebase-client",c)}const i={installation:{sdkVersion:_U,appId:t.appId}},a={method:"POST",headers:o,body:JSON.stringify(i)},l=await IU(()=>fetch(r,a));if(l.ok){const c=await l.json();return SU(c)}else throw await TU("Generate Auth Token",l)}function phe(t,{fid:e}){return`${kU(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q4(t,e=!1){let n;const r=await qC(t.appConfig,s=>{if(!LU(s))throw Sf.create("not-registered");const i=s.authToken;if(!e&&yhe(i))return s;if(i.requestStatus===1)return n=mhe(t,e),s;{if(!navigator.onLine)throw Sf.create("app-offline");const a=whe(s);return n=ghe(t,a),a}});return n?await n:r.authToken}async function mhe(t,e){let n=await iO(t.appConfig);for(;n.authToken.requestStatus===1;)await RU(100),n=await iO(t.appConfig);const r=n.authToken;return r.requestStatus===0?q4(t,e):r}function iO(t){return qC(t,e=>{if(!LU(e))throw Sf.create("not-registered");const n=e.authToken;return bhe(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function ghe(t,e){try{const n=await hhe(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await wx(t.appConfig,r),n}catch(n){if(EU(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await DU(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await wx(t.appConfig,r)}throw n}}function LU(t){return t!==void 0&&t.registrationStatus===2}function yhe(t){return t.requestStatus===2&&!vhe(t)}function vhe(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Wfe}function whe(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function bhe(t){return t.requestStatus===1&&t.requestTime+xU<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xhe(t){const e=t,{installationEntry:n,registrationPromise:r}=await G4(e);return r?r.catch(console.error):q4(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _he(t,e=!1){const n=t;return await Che(n),(await q4(n,e)).token}async function Che(t){const{registrationPromise:e}=await G4(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ehe(t){if(!t||!t.options)throw kk("App Configuration");if(!t.name)throw kk("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw kk(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function kk(t){return Sf.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jU="installations",khe="installations-internal",She=t=>{const e=t.getProvider("app").getImmediate(),n=Ehe(e),r=Kf(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},The=t=>{const e=t.getProvider("app").getImmediate(),n=Kf(e,jU).getImmediate();return{getId:()=>xhe(n),getToken:o=>_he(n,o)}};function Nhe(){Ya(new Ji(jU,She,"PUBLIC")),Ya(new Ji(khe,The,"PRIVATE"))}Nhe();ii(bU,z4);ii(bU,z4,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="analytics",Ihe="firebase_id",Rhe="origin",Ahe=60*1e3,Phe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",K4="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=new CC("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mhe={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},xs=new qf("analytics","Analytics",Mhe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dhe(t){if(!t.startsWith(K4)){const e=xs.create("invalid-gtag-resource",{gtagURL:t});return Jo.warn(e.message),""}return t}function VU(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function Ohe(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function Lhe(t,e){const n=Ohe("firebase-js-sdk-policy",{createScriptURL:Dhe}),r=document.createElement("script"),o=`${K4}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(o):o,r.async=!0,document.head.appendChild(r)}function jhe(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Vhe(t,e,n,r,o,s){const i=r[o];try{if(i)await e[i];else{const l=(await VU(n)).find(c=>c.measurementId===o);l&&await e[l.appId]}}catch(a){Jo.error(a)}t("config",o,s)}async function $he(t,e,n,r,o){try{let s=[];if(o&&o.send_to){let i=o.send_to;Array.isArray(i)||(i=[i]);const a=await VU(n);for(const l of i){const c=a.find(f=>f.measurementId===l),u=c&&e[c.appId];if(u)s.push(u);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,o||{})}catch(s){Jo.error(s)}}function Bhe(t,e,n,r){async function o(s,...i){try{if(s==="event"){const[a,l]=i;await $he(t,e,n,a,l)}else if(s==="config"){const[a,l]=i;await Vhe(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=i;t("consent",a,l)}else if(s==="get"){const[a,l,c]=i;t("get",a,l,c)}else if(s==="set"){const[a]=i;t("set",a)}else t(s,...i)}catch(a){Jo.error(a)}}return o}function Fhe(t,e,n,r,o){let s=function(...i){window[r].push(arguments)};return window[o]&&typeof window[o]=="function"&&(s=window[o]),window[o]=Bhe(s,t,e,n),{gtagCore:s,wrappedGtag:window[o]}}function Uhe(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(K4)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hhe=30,zhe=1e3;class Whe{constructor(e={},n=zhe){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const $U=new Whe;function Ghe(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function qhe(t){var e;const{appId:n,apiKey:r}=t,o={method:"GET",headers:Ghe(r)},s=Phe.replace("{app-id}",n),i=await fetch(s,o);if(i.status!==200&&i.status!==304){let a="";try{const l=await i.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw xs.create("config-fetch-failed",{httpStatus:i.status,responseMessage:a})}return i.json()}async function Khe(t,e=$U,n){const{appId:r,apiKey:o,measurementId:s}=t.options;if(!r)throw xs.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:r};throw xs.create("no-api-key")}const i=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Xhe;return setTimeout(async()=>{a.abort()},Ahe),BU({appId:r,apiKey:o,measurementId:s},i,a,e)}async function BU(t,{throttleEndTimeMillis:e,backoffCount:n},r,o=$U){var s;const{appId:i,measurementId:a}=t;try{await Yhe(r,e)}catch(l){if(a)return Jo.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:i,measurementId:a};throw l}try{const l=await qhe(t);return o.deleteThrottleMetadata(i),l}catch(l){const c=l;if(!Qhe(c)){if(o.deleteThrottleMetadata(i),a)return Jo.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:i,measurementId:a};throw l}const u=Number((s=c==null?void 0:c.customData)===null||s===void 0?void 0:s.httpStatus)===503?U9(n,o.intervalMillis,Hhe):U9(n,o.intervalMillis),f={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return o.setThrottleMetadata(i,f),Jo.debug(`Calling attemptFetch again in ${u} millis`),BU(t,f,r,o)}}function Yhe(t,e){return new Promise((n,r)=>{const o=Math.max(e-Date.now(),0),s=setTimeout(n,o);t.addEventListener(()=>{clearTimeout(s),r(xs.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Qhe(t){if(!(t instanceof ua)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class Xhe{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Jhe(t,e,n,r,o){if(o&&o.global){t("event",n,r);return}else{const s=await e,i=Object.assign(Object.assign({},r),{send_to:s});t("event",n,i)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zhe(){if(lB())try{await cB()}catch(t){return Jo.warn(xs.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Jo.warn(xs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function epe(t,e,n,r,o,s,i){var a;const l=Khe(t);l.then(p=>{n[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&Jo.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>Jo.error(p)),e.push(l);const c=Zhe().then(p=>{if(p)return r.getId()}),[u,f]=await Promise.all([l,c]);Uhe(s)||Lhe(s,u.measurementId),o("js",new Date);const h=(a=i==null?void 0:i.config)!==null&&a!==void 0?a:{};return h[Rhe]="firebase",h.update=!0,f!=null&&(h[Ihe]=f),o("config",u.measurementId,h),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tpe{constructor(e){this.app=e}_delete(){return delete Ay[this.app.options.appId],Promise.resolve()}}let Ay={},aO=[];const lO={};let Sk="dataLayer",npe="gtag",cO,FU,uO=!1;function rpe(){const t=[];if(aB()&&t.push("This is a browser extension environment."),nie()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,o)=>`(${o+1}) ${r}`).join(" "),n=xs.create("invalid-analytics-context",{errorInfo:e});Jo.warn(n.message)}}function ope(t,e,n){rpe();const r=t.options.appId;if(!r)throw xs.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Jo.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw xs.create("no-api-key");if(Ay[r]!=null)throw xs.create("already-exists",{id:r});if(!uO){jhe(Sk);const{wrappedGtag:s,gtagCore:i}=Fhe(Ay,aO,lO,Sk,npe);FU=s,cO=i,uO=!0}return Ay[r]=epe(t,aO,lO,e,cO,Sk,n),new tpe(t)}function spe(t=JA()){t=Bn(t);const e=Kf(t,bx);return e.isInitialized()?e.getImmediate():ipe(t)}function ipe(t,e={}){const n=Kf(t,bx);if(n.isInitialized()){const o=n.getImmediate();if(h1(e,n.getOptions()))return o;throw xs.create("already-initialized")}return n.initialize({options:e})}function ape(t,e,n,r){t=Bn(t),Jhe(FU,Ay[t.app.options.appId],e,n,r).catch(o=>Jo.error(o))}const dO="@firebase/analytics",fO="0.10.11";function lpe(){Ya(new Ji(bx,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return ope(r,o,n)},"PUBLIC")),Ya(new Ji("analytics-internal",t,"PRIVATE")),ii(dO,fO),ii(dO,fO,"esm2017");function t(e){try{const n=e.getProvider(bx).getImmediate();return{logEvent:(r,o,s)=>ape(n,r,o,s)}}catch(n){throw xs.create("interop-component-reg-failed",{reason:n})}}}lpe();const cpe={apiKey:"AIzaSyDDFh43jvzgvbR50RhV4DxIZV8WprWff8I",authDomain:"note-769e9.firebaseapp.com",projectId:"note-769e9",storageBucket:"note-769e9.firebasestorage.app",messagingSenderId:"474269081545",appId:"1:474269081545:web:499e78d66b9a9eb1a41218",measurementId:"G-TC0VDZPZB2"},Y4=hB(cpe);typeof window<"u"&&spe(Y4);const Ut=Vce(Y4),jt=Rfe(Y4),UU=new Fl,HU=g.createContext({user:null,loading:!0,isGuest:!1,enableGuestMode:()=>{},disableGuestMode:()=>{}});function upe({children:t}){const[e,n]=g.useState(null),[r,o]=g.useState(!0),[s,i]=g.useState(()=>localStorage.getItem("guestMode")==="true");g.useEffect(()=>{const c=Nle(Ut,async u=>{var f;o(!0);try{if(u){const h=ro(jt,"users",u.uid),p={userId:u.uid,email:((f=u.email)==null?void 0:f.toLowerCase())||"",displayName:u.displayName||"",photoURL:u.photoURL||"",lastLoginAt:new Date,...!u.metadata.lastSignInTime&&{createdAt:new Date,updatedAt:new Date}};await Hfe(h,p,{merge:!0,mergeFields:["userId","email","displayName","photoURL","lastLoginAt"]}),i(!1),localStorage.removeItem("guestMode")}n(u)}catch(h){console.error("Error updating user document:",h),n(u)}finally{o(!1)}});return()=>c()},[]);const a=()=>{i(!0),localStorage.setItem("guestMode","true")},l=()=>{i(!1),localStorage.removeItem("guestMode")};return d.jsx(HU.Provider,{value:{user:e,loading:r,isGuest:s,enableGuestMode:a,disableGuestMode:l},children:t})}const vi=()=>g.useContext(HU);function Xt(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,s;for(s=0;s<r.length;s++)o=r[s],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}var dpe=["color"],WN=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Xt(t,dpe);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),g.createElement("path",{d:"M0.877014 7.49988C0.877014 3.84219 3.84216 0.877045 7.49985 0.877045C11.1575 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1575 14.1227 7.49985 14.1227C3.84216 14.1227 0.877014 11.1575 0.877014 7.49988ZM7.49985 1.82704C4.36683 1.82704 1.82701 4.36686 1.82701 7.49988C1.82701 8.97196 2.38774 10.3131 3.30727 11.3213C4.19074 9.94119 5.73818 9.02499 7.50023 9.02499C9.26206 9.02499 10.8093 9.94097 11.6929 11.3208C12.6121 10.3127 13.1727 8.97172 13.1727 7.49988C13.1727 4.36686 10.6328 1.82704 7.49985 1.82704ZM10.9818 11.9787C10.2839 10.7795 8.9857 9.97499 7.50023 9.97499C6.01458 9.97499 4.71624 10.7797 4.01845 11.9791C4.97952 12.7272 6.18765 13.1727 7.49985 13.1727C8.81227 13.1727 10.0206 12.727 10.9818 11.9787ZM5.14999 6.50487C5.14999 5.207 6.20212 4.15487 7.49999 4.15487C8.79786 4.15487 9.84999 5.207 9.84999 6.50487C9.84999 7.80274 8.79786 8.85487 7.49999 8.85487C6.20212 8.85487 5.14999 7.80274 5.14999 6.50487ZM7.49999 5.10487C6.72679 5.10487 6.09999 5.73167 6.09999 6.50487C6.09999 7.27807 6.72679 7.90487 7.49999 7.90487C8.27319 7.90487 8.89999 7.27807 8.89999 6.50487C8.89999 5.73167 8.27319 5.10487 7.49999 5.10487Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),fpe=["color"],hpe=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Xt(t,fpe);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),g.createElement("path",{d:"M8.60124 1.25086C8.60124 1.75459 8.26278 2.17927 7.80087 2.30989C10.1459 2.4647 12 4.41582 12 6.79999V10.25C12 11.0563 12.0329 11.7074 12.7236 12.0528C12.931 12.1565 13.0399 12.3892 12.9866 12.6149C12.9333 12.8406 12.7319 13 12.5 13H8.16144C8.36904 13.1832 8.49997 13.4513 8.49997 13.75C8.49997 14.3023 8.05226 14.75 7.49997 14.75C6.94769 14.75 6.49997 14.3023 6.49997 13.75C6.49997 13.4513 6.63091 13.1832 6.83851 13H2.49999C2.2681 13 2.06664 12.8406 2.01336 12.6149C1.96009 12.3892 2.06897 12.1565 2.27638 12.0528C2.96708 11.7074 2.99999 11.0563 2.99999 10.25V6.79999C2.99999 4.41537 4.85481 2.46396 7.20042 2.3098C6.73867 2.17908 6.40036 1.75448 6.40036 1.25086C6.40036 0.643104 6.89304 0.150421 7.5008 0.150421C8.10855 0.150421 8.60124 0.643104 8.60124 1.25086ZM7.49999 3.29999C5.56699 3.29999 3.99999 4.86699 3.99999 6.79999V10.25L4.00002 10.3009C4.0005 10.7463 4.00121 11.4084 3.69929 12H11.3007C10.9988 11.4084 10.9995 10.7463 11 10.3009L11 10.25V6.79999C11 4.86699 9.43299 3.29999 7.49999 3.29999Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),ppe=["color"],Np=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Xt(t,ppe);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),g.createElement("path",{d:"M4.5 1C4.77614 1 5 1.22386 5 1.5V2H10V1.5C10 1.22386 10.2239 1 10.5 1C10.7761 1 11 1.22386 11 1.5V2H12.5C13.3284 2 14 2.67157 14 3.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V3.5C1 2.67157 1.67157 2 2.5 2H4V1.5C4 1.22386 4.22386 1 4.5 1ZM10 3V3.5C10 3.77614 10.2239 4 10.5 4C10.7761 4 11 3.77614 11 3.5V3H12.5C12.7761 3 13 3.22386 13 3.5V5H2V3.5C2 3.22386 2.22386 3 2.5 3H4V3.5C4 3.77614 4.22386 4 4.5 4C4.77614 4 5 3.77614 5 3.5V3H10ZM2 6V12.5C2 12.7761 2.22386 13 2.5 13H12.5C12.7761 13 13 12.7761 13 12.5V6H2ZM7 7.5C7 7.22386 7.22386 7 7.5 7C7.77614 7 8 7.22386 8 7.5C8 7.77614 7.77614 8 7.5 8C7.22386 8 7 7.77614 7 7.5ZM9.5 7C9.22386 7 9 7.22386 9 7.5C9 7.77614 9.22386 8 9.5 8C9.77614 8 10 7.77614 10 7.5C10 7.22386 9.77614 7 9.5 7ZM11 7.5C11 7.22386 11.2239 7 11.5 7C11.7761 7 12 7.22386 12 7.5C12 7.77614 11.7761 8 11.5 8C11.2239 8 11 7.77614 11 7.5ZM11.5 9C11.2239 9 11 9.22386 11 9.5C11 9.77614 11.2239 10 11.5 10C11.7761 10 12 9.77614 12 9.5C12 9.22386 11.7761 9 11.5 9ZM9 9.5C9 9.22386 9.22386 9 9.5 9C9.77614 9 10 9.22386 10 9.5C10 9.77614 9.77614 10 9.5 10C9.22386 10 9 9.77614 9 9.5ZM7.5 9C7.22386 9 7 9.22386 7 9.5C7 9.77614 7.22386 10 7.5 10C7.77614 10 8 9.77614 8 9.5C8 9.22386 7.77614 9 7.5 9ZM5 9.5C5 9.22386 5.22386 9 5.5 9C5.77614 9 6 9.22386 6 9.5C6 9.77614 5.77614 10 5.5 10C5.22386 10 5 9.77614 5 9.5ZM3.5 9C3.22386 9 3 9.22386 3 9.5C3 9.77614 3.22386 10 3.5 10C3.77614 10 4 9.77614 4 9.5C4 9.22386 3.77614 9 3.5 9ZM3 11.5C3 11.2239 3.22386 11 3.5 11C3.77614 11 4 11.2239 4 11.5C4 11.7761 3.77614 12 3.5 12C3.22386 12 3 11.7761 3 11.5ZM5.5 11C5.22386 11 5 11.2239 5 11.5C5 11.7761 5.22386 12 5.5 12C5.77614 12 6 11.7761 6 11.5C6 11.2239 5.77614 11 5.5 11ZM7 11.5C7 11.2239 7.22386 11 7.5 11C7.77614 11 8 11.2239 8 11.5C8 11.7761 7.77614 12 7.5 12C7.22386 12 7 11.7761 7 11.5ZM9.5 11C9.22386 11 9 11.2239 9 11.5C9 11.7761 9.22386 12 9.5 12C9.77614 12 10 11.7761 10 11.5C10 11.2239 9.77614 11 9.5 11Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),mpe=["color"],GN=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Xt(t,mpe);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),g.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),gpe=["color"],ype=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Xt(t,gpe);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),g.createElement("path",{d:"M7.50009 0.877014C3.84241 0.877014 0.877258 3.84216 0.877258 7.49984C0.877258 11.1575 3.8424 14.1227 7.50009 14.1227C11.1578 14.1227 14.1229 11.1575 14.1229 7.49984C14.1229 3.84216 11.1577 0.877014 7.50009 0.877014ZM1.82726 7.49984C1.82726 4.36683 4.36708 1.82701 7.50009 1.82701C10.6331 1.82701 13.1729 4.36683 13.1729 7.49984C13.1729 10.6328 10.6331 13.1727 7.50009 13.1727C4.36708 13.1727 1.82726 10.6328 1.82726 7.49984ZM8 4.50001C8 4.22387 7.77614 4.00001 7.5 4.00001C7.22386 4.00001 7 4.22387 7 4.50001V7.50001C7 7.63262 7.05268 7.7598 7.14645 7.85357L9.14645 9.85357C9.34171 10.0488 9.65829 10.0488 9.85355 9.85357C10.0488 9.65831 10.0488 9.34172 9.85355 9.14646L8 7.29291V4.50001Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),vpe=["color"],wpe=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Xt(t,vpe);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),g.createElement("path",{d:"M9.96424 2.68571C10.0668 2.42931 9.94209 2.13833 9.6857 2.03577C9.4293 1.93322 9.13832 2.05792 9.03576 2.31432L5.03576 12.3143C4.9332 12.5707 5.05791 12.8617 5.3143 12.9642C5.5707 13.0668 5.86168 12.9421 5.96424 12.6857L9.96424 2.68571ZM3.85355 5.14646C4.04882 5.34172 4.04882 5.6583 3.85355 5.85356L2.20711 7.50001L3.85355 9.14646C4.04882 9.34172 4.04882 9.6583 3.85355 9.85356C3.65829 10.0488 3.34171 10.0488 3.14645 9.85356L1.14645 7.85356C0.951184 7.6583 0.951184 7.34172 1.14645 7.14646L3.14645 5.14646C3.34171 4.9512 3.65829 4.9512 3.85355 5.14646ZM11.1464 5.14646C11.3417 4.9512 11.6583 4.9512 11.8536 5.14646L13.8536 7.14646C14.0488 7.34172 14.0488 7.6583 13.8536 7.85356L11.8536 9.85356C11.6583 10.0488 11.3417 10.0488 11.1464 9.85356C10.9512 9.6583 10.9512 9.34172 11.1464 9.14646L12.7929 7.50001L11.1464 5.85356C10.9512 5.6583 10.9512 5.34172 11.1464 5.14646Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),bpe=["color"],xpe=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Xt(t,bpe);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),g.createElement("path",{d:"M10.3285 1.13607C10.1332 0.940809 9.81662 0.940808 9.62136 1.13607C9.42609 1.33133 9.42609 1.64792 9.62136 1.84318L10.2744 2.49619L5.42563 6.13274L4.31805 5.02516C4.12279 4.8299 3.80621 4.8299 3.61095 5.02516C3.41569 5.22042 3.41569 5.537 3.61095 5.73226L5.02516 7.14648L6.08582 8.20714L2.81545 11.4775C2.62019 11.6728 2.62019 11.9894 2.81545 12.1846C3.01072 12.3799 3.3273 12.3799 3.52256 12.1846L6.79293 8.91425L7.85359 9.97491L9.2678 11.3891C9.46306 11.5844 9.77965 11.5844 9.97491 11.3891C10.1702 11.1939 10.1702 10.8773 9.97491 10.682L8.86733 9.57443L12.5039 4.7257L13.1569 5.37871C13.3522 5.57397 13.6687 5.57397 13.864 5.37871C14.0593 5.18345 14.0593 4.86687 13.864 4.6716L12.8033 3.61094L11.3891 2.19673L10.3285 1.13607ZM6.13992 6.84702L10.9887 3.21047L11.7896 4.01142L8.15305 8.86015L6.13992 6.84702Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),_pe=["color"],Q4=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Xt(t,_pe);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),g.createElement("path",{d:"M4.5 1C4.22386 1 4 1.22386 4 1.5C4 1.77614 4.22386 2 4.5 2H12V13H4.5C4.22386 13 4 13.2239 4 13.5C4 13.7761 4.22386 14 4.5 14H12C12.5523 14 13 13.5523 13 13V2C13 1.44772 12.5523 1 12 1H4.5ZM6.60355 4.89645C6.40829 4.70118 6.09171 4.70118 5.89645 4.89645C5.70118 5.09171 5.70118 5.40829 5.89645 5.60355L7.29289 7H0.5C0.223858 7 0 7.22386 0 7.5C0 7.77614 0.223858 8 0.5 8H7.29289L5.89645 9.39645C5.70118 9.59171 5.70118 9.90829 5.89645 10.1036C6.09171 10.2988 6.40829 10.2988 6.60355 10.1036L8.85355 7.85355C9.04882 7.65829 9.04882 7.34171 8.85355 7.14645L6.60355 4.89645Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Cpe=["color"],zU=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Xt(t,Cpe);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),g.createElement("path",{d:"M3 1C2.44771 1 2 1.44772 2 2V13C2 13.5523 2.44772 14 3 14H10.5C10.7761 14 11 13.7761 11 13.5C11 13.2239 10.7761 13 10.5 13H3V2L10.5 2C10.7761 2 11 1.77614 11 1.5C11 1.22386 10.7761 1 10.5 1H3ZM12.6036 4.89645C12.4083 4.70118 12.0917 4.70118 11.8964 4.89645C11.7012 5.09171 11.7012 5.40829 11.8964 5.60355L13.2929 7H6.5C6.22386 7 6 7.22386 6 7.5C6 7.77614 6.22386 8 6.5 8H13.2929L11.8964 9.39645C11.7012 9.59171 11.7012 9.90829 11.8964 10.1036C12.0917 10.2988 12.4083 10.2988 12.6036 10.1036L14.8536 7.85355C15.0488 7.65829 15.0488 7.34171 14.8536 7.14645L12.6036 4.89645Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Epe=["color"],sm=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Xt(t,Epe);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),g.createElement("path",{d:"M3 2.5C3 2.22386 3.22386 2 3.5 2H9.08579C9.21839 2 9.34557 2.05268 9.43934 2.14645L11.8536 4.56066C11.9473 4.65443 12 4.78161 12 4.91421V12.5C12 12.7761 11.7761 13 11.5 13H3.5C3.22386 13 3 12.7761 3 12.5V2.5ZM3.5 1C2.67157 1 2 1.67157 2 2.5V12.5C2 13.3284 2.67157 14 3.5 14H11.5C12.3284 14 13 13.3284 13 12.5V4.91421C13 4.51639 12.842 4.13486 12.5607 3.85355L10.1464 1.43934C9.86514 1.15804 9.48361 1 9.08579 1H3.5ZM4.5 4C4.22386 4 4 4.22386 4 4.5C4 4.77614 4.22386 5 4.5 5H7.5C7.77614 5 8 4.77614 8 4.5C8 4.22386 7.77614 4 7.5 4H4.5ZM4.5 7C4.22386 7 4 7.22386 4 7.5C4 7.77614 4.22386 8 4.5 8H10.5C10.7761 8 11 7.77614 11 7.5C11 7.22386 10.7761 7 10.5 7H4.5ZM4.5 10C4.22386 10 4 10.2239 4 10.5C4 10.7761 4.22386 11 4.5 11H10.5C10.7761 11 11 10.7761 11 10.5C11 10.2239 10.7761 10 10.5 10H4.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),kpe=["color"],Spe=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Xt(t,kpe);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),g.createElement("path",{d:"M7.07095 0.650238C6.67391 0.650238 6.32977 0.925096 6.24198 1.31231L6.0039 2.36247C5.6249 2.47269 5.26335 2.62363 4.92436 2.81013L4.01335 2.23585C3.67748 2.02413 3.23978 2.07312 2.95903 2.35386L2.35294 2.95996C2.0722 3.2407 2.0232 3.6784 2.23493 4.01427L2.80942 4.92561C2.62307 5.2645 2.47227 5.62594 2.36216 6.00481L1.31209 6.24287C0.924883 6.33065 0.650024 6.6748 0.650024 7.07183V7.92897C0.650024 8.32601 0.924883 8.67015 1.31209 8.75794L2.36228 8.99603C2.47246 9.375 2.62335 9.73652 2.80979 10.0755L2.2354 10.9867C2.02367 11.3225 2.07267 11.7602 2.35341 12.041L2.95951 12.6471C3.24025 12.9278 3.67795 12.9768 4.01382 12.7651L4.92506 12.1907C5.26384 12.377 5.62516 12.5278 6.0039 12.6379L6.24198 13.6881C6.32977 14.0753 6.67391 14.3502 7.07095 14.3502H7.92809C8.32512 14.3502 8.66927 14.0753 8.75705 13.6881L8.99505 12.6383C9.37411 12.5282 9.73573 12.3773 10.0748 12.1909L10.986 12.7653C11.3218 12.977 11.7595 12.928 12.0403 12.6473L12.6464 12.0412C12.9271 11.7604 12.9761 11.3227 12.7644 10.9869L12.1902 10.076C12.3768 9.73688 12.5278 9.37515 12.638 8.99596L13.6879 8.75794C14.0751 8.67015 14.35 8.32601 14.35 7.92897V7.07183C14.35 6.6748 14.0751 6.33065 13.6879 6.24287L12.6381 6.00488C12.528 5.62578 12.3771 5.26414 12.1906 4.92507L12.7648 4.01407C12.9766 3.6782 12.9276 3.2405 12.6468 2.95975L12.0407 2.35366C11.76 2.07292 11.3223 2.02392 10.9864 2.23565L10.0755 2.80989C9.73622 2.62328 9.37437 2.47229 8.99505 2.36209L8.75705 1.31231C8.66927 0.925096 8.32512 0.650238 7.92809 0.650238H7.07095ZM4.92053 3.81251C5.44724 3.44339 6.05665 3.18424 6.71543 3.06839L7.07095 1.50024H7.92809L8.28355 3.06816C8.94267 3.18387 9.5524 3.44302 10.0794 3.81224L11.4397 2.9547L12.0458 3.56079L11.1882 4.92117C11.5573 5.44798 11.8164 6.0575 11.9321 6.71638L13.5 7.07183V7.92897L11.932 8.28444C11.8162 8.94342 11.557 9.55301 11.1878 10.0798L12.0453 11.4402L11.4392 12.0462L10.0787 11.1886C9.55192 11.5576 8.94241 11.8166 8.28355 11.9323L7.92809 13.5002H7.07095L6.71543 11.932C6.0569 11.8162 5.44772 11.5572 4.92116 11.1883L3.56055 12.046L2.95445 11.4399L3.81213 10.0794C3.4431 9.55266 3.18403 8.94326 3.06825 8.2845L1.50002 7.92897V7.07183L3.06818 6.71632C3.18388 6.05765 3.44283 5.44833 3.81171 4.92165L2.95398 3.561L3.56008 2.95491L4.92053 3.81251ZM9.02496 7.50008C9.02496 8.34226 8.34223 9.02499 7.50005 9.02499C6.65786 9.02499 5.97513 8.34226 5.97513 7.50008C5.97513 6.65789 6.65786 5.97516 7.50005 5.97516C8.34223 5.97516 9.02496 6.65789 9.02496 7.50008ZM9.92496 7.50008C9.92496 8.83932 8.83929 9.92499 7.50005 9.92499C6.1608 9.92499 5.07513 8.83932 5.07513 7.50008C5.07513 6.16084 6.1608 5.07516 7.50005 5.07516C8.83929 5.07516 9.92496 6.16084 9.92496 7.50008Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Tpe=["color"],WU=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Xt(t,Tpe);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),g.createElement("path",{d:"M7.49933 0.25C3.49635 0.25 0.25 3.49593 0.25 7.50024C0.25 10.703 2.32715 13.4206 5.2081 14.3797C5.57084 14.446 5.70302 14.2222 5.70302 14.0299C5.70302 13.8576 5.69679 13.4019 5.69323 12.797C3.67661 13.235 3.25112 11.825 3.25112 11.825C2.92132 10.9874 2.44599 10.7644 2.44599 10.7644C1.78773 10.3149 2.49584 10.3238 2.49584 10.3238C3.22353 10.375 3.60629 11.0711 3.60629 11.0711C4.25298 12.1788 5.30335 11.8588 5.71638 11.6732C5.78225 11.205 5.96962 10.8854 6.17658 10.7043C4.56675 10.5209 2.87415 9.89918 2.87415 7.12104C2.87415 6.32925 3.15677 5.68257 3.62053 5.17563C3.54576 4.99226 3.29697 4.25521 3.69174 3.25691C3.69174 3.25691 4.30015 3.06196 5.68522 3.99973C6.26337 3.83906 6.8838 3.75895 7.50022 3.75583C8.1162 3.75895 8.73619 3.83906 9.31523 3.99973C10.6994 3.06196 11.3069 3.25691 11.3069 3.25691C11.7026 4.25521 11.4538 4.99226 11.3795 5.17563C11.8441 5.68257 12.1245 6.32925 12.1245 7.12104C12.1245 9.9063 10.4292 10.5192 8.81452 10.6985C9.07444 10.9224 9.30633 11.3648 9.30633 12.0413C9.30633 13.0102 9.29742 13.7922 9.29742 14.0299C9.29742 14.2239 9.42828 14.4496 9.79591 14.3788C12.6746 13.4179 14.75 10.7025 14.75 7.50024C14.75 3.49593 11.5036 0.25 7.49933 0.25Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Npe=["color"],Ipe=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Xt(t,Npe);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),g.createElement("path",{d:"M7.49996 1.80002C4.35194 1.80002 1.79996 4.352 1.79996 7.50002C1.79996 10.648 4.35194 13.2 7.49996 13.2C10.648 13.2 13.2 10.648 13.2 7.50002C13.2 4.352 10.648 1.80002 7.49996 1.80002ZM0.899963 7.50002C0.899963 3.85494 3.85488 0.900024 7.49996 0.900024C11.145 0.900024 14.1 3.85494 14.1 7.50002C14.1 11.1451 11.145 14.1 7.49996 14.1C3.85488 14.1 0.899963 11.1451 0.899963 7.50002Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}),g.createElement("path",{d:"M13.4999 7.89998H1.49994V7.09998H13.4999V7.89998Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}),g.createElement("path",{d:"M7.09991 13.5V1.5H7.89991V13.5H7.09991zM10.375 7.49998C10.375 5.32724 9.59364 3.17778 8.06183 1.75656L8.53793 1.24341C10.2396 2.82218 11.075 5.17273 11.075 7.49998 11.075 9.82724 10.2396 12.1778 8.53793 13.7566L8.06183 13.2434C9.59364 11.8222 10.375 9.67273 10.375 7.49998zM3.99969 7.5C3.99969 5.17611 4.80786 2.82678 6.45768 1.24719L6.94177 1.75281C5.4582 3.17323 4.69969 5.32389 4.69969 7.5 4.6997 9.67611 5.45822 11.8268 6.94179 13.2472L6.45769 13.7528C4.80788 12.1732 3.9997 9.8239 3.99969 7.5z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}),g.createElement("path",{d:"M7.49996 3.95801C9.66928 3.95801 11.8753 4.35915 13.3706 5.19448 13.5394 5.28875 13.5998 5.50197 13.5055 5.67073 13.4113 5.83948 13.198 5.89987 13.0293 5.8056 11.6794 5.05155 9.60799 4.65801 7.49996 4.65801 5.39192 4.65801 3.32052 5.05155 1.97064 5.8056 1.80188 5.89987 1.58866 5.83948 1.49439 5.67073 1.40013 5.50197 1.46051 5.28875 1.62927 5.19448 3.12466 4.35915 5.33063 3.95801 7.49996 3.95801zM7.49996 10.85C9.66928 10.85 11.8753 10.4488 13.3706 9.6135 13.5394 9.51924 13.5998 9.30601 13.5055 9.13726 13.4113 8.9685 13.198 8.90812 13.0293 9.00238 11.6794 9.75643 9.60799 10.15 7.49996 10.15 5.39192 10.15 3.32052 9.75643 1.97064 9.00239 1.80188 8.90812 1.58866 8.9685 1.49439 9.13726 1.40013 9.30601 1.46051 9.51924 1.62927 9.6135 3.12466 10.4488 5.33063 10.85 7.49996 10.85z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Rpe=["color"],Ape=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Xt(t,Rpe);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),g.createElement("path",{d:"M1.5 3C1.22386 3 1 3.22386 1 3.5C1 3.77614 1.22386 4 1.5 4H13.5C13.7761 4 14 3.77614 14 3.5C14 3.22386 13.7761 3 13.5 3H1.5ZM1 7.5C1 7.22386 1.22386 7 1.5 7H13.5C13.7761 7 14 7.22386 14 7.5C14 7.77614 13.7761 8 13.5 8H1.5C1.22386 8 1 7.77614 1 7.5ZM1 11.5C1 11.2239 1.22386 11 1.5 11H13.5C13.7761 11 14 11.2239 14 11.5C14 11.7761 13.7761 12 13.5 12H1.5C1.22386 12 1 11.7761 1 11.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Ppe=["color"],X4=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Xt(t,Ppe);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),g.createElement("path",{d:"M7.07926 0.222253C7.31275 -0.007434 7.6873 -0.007434 7.92079 0.222253L14.6708 6.86227C14.907 7.09465 14.9101 7.47453 14.6778 7.71076C14.4454 7.947 14.0655 7.95012 13.8293 7.71773L13 6.90201V12.5C13 12.7761 12.7762 13 12.5 13H2.50002C2.22388 13 2.00002 12.7761 2.00002 12.5V6.90201L1.17079 7.71773C0.934558 7.95012 0.554672 7.947 0.32229 7.71076C0.0899079 7.47453 0.0930283 7.09465 0.32926 6.86227L7.07926 0.222253ZM7.50002 1.49163L12 5.91831V12H10V8.49999C10 8.22385 9.77617 7.99999 9.50002 7.99999H6.50002C6.22388 7.99999 6.00002 8.22385 6.00002 8.49999V12H3.00002V5.91831L7.50002 1.49163ZM7.00002 12H9.00002V8.99999H7.00002V12Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Mpe=["color"],Tk=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Xt(t,Mpe);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),g.createElement("path",{d:"M8.69667 0.0403541C8.90859 0.131038 9.03106 0.354857 8.99316 0.582235L8.0902 6.00001H12.5C12.6893 6.00001 12.8625 6.10701 12.9472 6.27641C13.0319 6.4458 13.0136 6.6485 12.8999 6.80001L6.89997 14.8C6.76167 14.9844 6.51521 15.0503 6.30328 14.9597C6.09135 14.869 5.96888 14.6452 6.00678 14.4178L6.90974 9H2.49999C2.31061 9 2.13748 8.893 2.05278 8.72361C1.96809 8.55422 1.98636 8.35151 2.09999 8.2L8.09997 0.200038C8.23828 0.0156255 8.48474 -0.0503301 8.69667 0.0403541ZM3.49999 8.00001H7.49997C7.64695 8.00001 7.78648 8.06467 7.88148 8.17682C7.97648 8.28896 8.01733 8.43723 7.99317 8.5822L7.33027 12.5596L11.5 7.00001H7.49997C7.353 7.00001 7.21347 6.93534 7.11846 6.8232C7.02346 6.71105 6.98261 6.56279 7.00678 6.41781L7.66968 2.44042L3.49999 8.00001Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Dpe=["color"],Ope=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Xt(t,Dpe);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),g.createElement("path",{d:"M2 1C1.44772 1 1 1.44772 1 2V13C1 13.5523 1.44772 14 2 14H13C13.5523 14 14 13.5523 14 13V2C14 1.44772 13.5523 1 13 1H2ZM3.05 6H4.95V12H3.05V6ZM5.075 4.005C5.075 4.59871 4.59371 5.08 4 5.08C3.4063 5.08 2.925 4.59871 2.925 4.005C2.925 3.41129 3.4063 2.93 4 2.93C4.59371 2.93 5.075 3.41129 5.075 4.005ZM12 8.35713C12 6.55208 10.8334 5.85033 9.67449 5.85033C9.29502 5.83163 8.91721 5.91119 8.57874 6.08107C8.32172 6.21007 8.05265 6.50523 7.84516 7.01853H7.79179V6.00044H6V12.0047H7.90616V8.8112C7.8786 8.48413 7.98327 8.06142 8.19741 7.80987C8.41156 7.55832 8.71789 7.49825 8.95015 7.46774H9.02258C9.62874 7.46774 10.0786 7.84301 10.0786 8.78868V12.0047H11.9847L12 8.35713Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Lpe=["color"],jpe=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Xt(t,Lpe);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),g.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Vpe=["color"],$pe=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Xt(t,Vpe);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),g.createElement("path",{d:"M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Bpe=["color"],Fpe=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Xt(t,Bpe);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),g.createElement("path",{d:"M2.14921 3.99996C2.14921 2.97778 2.97784 2.14915 4.00002 2.14915C5.02219 2.14915 5.85083 2.97778 5.85083 3.99996C5.85083 5.02213 5.02219 5.85077 4.00002 5.85077C2.97784 5.85077 2.14921 5.02213 2.14921 3.99996ZM4.00002 1.24915C2.48079 1.24915 1.24921 2.48073 1.24921 3.99996C1.24921 5.51919 2.48079 6.75077 4.00002 6.75077C5.51925 6.75077 6.75083 5.51919 6.75083 3.99996C6.75083 2.48073 5.51925 1.24915 4.00002 1.24915ZM5.82034 11.0001L2.49998 12.8369V9.16331L5.82034 11.0001ZM2.63883 8.21159C2.17228 7.9535 1.59998 8.29093 1.59998 8.82411V13.1761C1.59998 13.7093 2.17228 14.0467 2.63883 13.7886L6.57235 11.6126C7.05389 11.3462 7.05389 10.654 6.57235 10.3876L2.63883 8.21159ZM8.30001 9.00003C8.30001 8.61343 8.61341 8.30003 9.00001 8.30003H13C13.3866 8.30003 13.7 8.61343 13.7 9.00003V13C13.7 13.3866 13.3866 13.7 13 13.7H9.00001C8.61341 13.7 8.30001 13.3866 8.30001 13V9.00003ZM9.20001 9.20003V12.8H12.8V9.20003H9.20001ZM13.4432 2.19311C13.6189 2.01737 13.6189 1.73245 13.4432 1.55671C13.2675 1.38098 12.9826 1.38098 12.8068 1.55671L11 3.36353L9.19321 1.55674C9.01748 1.381 8.73255 1.381 8.55682 1.55674C8.38108 1.73247 8.38108 2.0174 8.55682 2.19313L10.3636 3.99992L8.55682 5.80671C8.38108 5.98245 8.38108 6.26737 8.55682 6.44311C8.73255 6.61885 9.01748 6.61885 9.19321 6.44311L11 4.63632L12.8068 6.44314C12.9826 6.61887 13.2675 6.61887 13.4432 6.44314C13.6189 6.2674 13.6189 5.98247 13.4432 5.80674L11.6364 3.99992L13.4432 2.19311Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Upe=["color"],J4=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Xt(t,Upe);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),g.createElement("path",{d:"M2.89998 0.499976C2.89998 0.279062 2.72089 0.0999756 2.49998 0.0999756C2.27906 0.0999756 2.09998 0.279062 2.09998 0.499976V1.09998H1.49998C1.27906 1.09998 1.09998 1.27906 1.09998 1.49998C1.09998 1.72089 1.27906 1.89998 1.49998 1.89998H2.09998V2.49998C2.09998 2.72089 2.27906 2.89998 2.49998 2.89998C2.72089 2.89998 2.89998 2.72089 2.89998 2.49998V1.89998H3.49998C3.72089 1.89998 3.89998 1.72089 3.89998 1.49998C3.89998 1.27906 3.72089 1.09998 3.49998 1.09998H2.89998V0.499976ZM5.89998 3.49998C5.89998 3.27906 5.72089 3.09998 5.49998 3.09998C5.27906 3.09998 5.09998 3.27906 5.09998 3.49998V4.09998H4.49998C4.27906 4.09998 4.09998 4.27906 4.09998 4.49998C4.09998 4.72089 4.27906 4.89998 4.49998 4.89998H5.09998V5.49998C5.09998 5.72089 5.27906 5.89998 5.49998 5.89998C5.72089 5.89998 5.89998 5.72089 5.89998 5.49998V4.89998H6.49998C6.72089 4.89998 6.89998 4.72089 6.89998 4.49998C6.89998 4.27906 6.72089 4.09998 6.49998 4.09998H5.89998V3.49998ZM1.89998 6.49998C1.89998 6.27906 1.72089 6.09998 1.49998 6.09998C1.27906 6.09998 1.09998 6.27906 1.09998 6.49998V7.09998H0.499976C0.279062 7.09998 0.0999756 7.27906 0.0999756 7.49998C0.0999756 7.72089 0.279062 7.89998 0.499976 7.89998H1.09998V8.49998C1.09998 8.72089 1.27906 8.89997 1.49998 8.89997C1.72089 8.89997 1.89998 8.72089 1.89998 8.49998V7.89998H2.49998C2.72089 7.89998 2.89998 7.72089 2.89998 7.49998C2.89998 7.27906 2.72089 7.09998 2.49998 7.09998H1.89998V6.49998ZM8.54406 0.98184L8.24618 0.941586C8.03275 0.917676 7.90692 1.1655 8.02936 1.34194C8.17013 1.54479 8.29981 1.75592 8.41754 1.97445C8.91878 2.90485 9.20322 3.96932 9.20322 5.10022C9.20322 8.37201 6.82247 11.0878 3.69887 11.6097C3.45736 11.65 3.20988 11.6772 2.96008 11.6906C2.74563 11.702 2.62729 11.9535 2.77721 12.1072C2.84551 12.1773 2.91535 12.2458 2.98667 12.3128L3.05883 12.3795L3.31883 12.6045L3.50684 12.7532L3.62796 12.8433L3.81491 12.9742L3.99079 13.089C4.11175 13.1651 4.23536 13.2375 4.36157 13.3059L4.62496 13.4412L4.88553 13.5607L5.18837 13.6828L5.43169 13.7686C5.56564 13.8128 5.70149 13.8529 5.83857 13.8885C5.94262 13.9155 6.04767 13.9401 6.15405 13.9622C6.27993 13.9883 6.40713 14.0109 6.53544 14.0298L6.85241 14.0685L7.11934 14.0892C7.24637 14.0965 7.37436 14.1002 7.50322 14.1002C11.1483 14.1002 14.1032 11.1453 14.1032 7.50023C14.1032 7.25044 14.0893 7.00389 14.0623 6.76131L14.0255 6.48407C13.991 6.26083 13.9453 6.04129 13.8891 5.82642C13.8213 5.56709 13.7382 5.31398 13.6409 5.06881L13.5279 4.80132L13.4507 4.63542L13.3766 4.48666C13.2178 4.17773 13.0353 3.88295 12.8312 3.60423L12.6782 3.40352L12.4793 3.16432L12.3157 2.98361L12.1961 2.85951L12.0355 2.70246L11.8134 2.50184L11.4925 2.24191L11.2483 2.06498L10.9562 1.87446L10.6346 1.68894L10.3073 1.52378L10.1938 1.47176L9.95488 1.3706L9.67791 1.2669L9.42566 1.1846L9.10075 1.09489L8.83599 1.03486L8.54406 0.98184ZM10.4032 5.30023C10.4032 4.27588 10.2002 3.29829 9.83244 2.40604C11.7623 3.28995 13.1032 5.23862 13.1032 7.50023C13.1032 10.593 10.596 13.1002 7.50322 13.1002C6.63646 13.1002 5.81597 12.9036 5.08355 12.5522C6.5419 12.0941 7.81081 11.2082 8.74322 10.0416C8.87963 10.2284 9.10028 10.3497 9.34928 10.3497C9.76349 10.3497 10.0993 10.0139 10.0993 9.59971C10.0993 9.24256 9.84965 8.94373 9.51535 8.86816C9.57741 8.75165 9.63653 8.63334 9.6926 8.51332C9.88358 8.63163 10.1088 8.69993 10.35 8.69993C11.0403 8.69993 11.6 8.14028 11.6 7.44993C11.6 6.75976 11.0406 6.20024 10.3505 6.19993C10.3853 5.90487 10.4032 5.60464 10.4032 5.30023Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Hpe=["color"],zpe=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Xt(t,Hpe);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),g.createElement("path",{d:"M12.1464 1.14645C12.3417 0.951184 12.6583 0.951184 12.8535 1.14645L14.8535 3.14645C15.0488 3.34171 15.0488 3.65829 14.8535 3.85355L10.9109 7.79618C10.8349 7.87218 10.7471 7.93543 10.651 7.9835L6.72359 9.94721C6.53109 10.0435 6.29861 10.0057 6.14643 9.85355C5.99425 9.70137 5.95652 9.46889 6.05277 9.27639L8.01648 5.34897C8.06455 5.25283 8.1278 5.16507 8.2038 5.08907L12.1464 1.14645ZM12.5 2.20711L8.91091 5.79618L7.87266 7.87267L8.12731 8.12732L10.2038 7.08907L13.7929 3.5L12.5 2.20711ZM9.99998 2L8.99998 3H4.9C4.47171 3 4.18056 3.00039 3.95552 3.01877C3.73631 3.03668 3.62421 3.06915 3.54601 3.10899C3.35785 3.20487 3.20487 3.35785 3.10899 3.54601C3.06915 3.62421 3.03669 3.73631 3.01878 3.95552C3.00039 4.18056 3 4.47171 3 4.9V11.1C3 11.5283 3.00039 11.8194 3.01878 12.0445C3.03669 12.2637 3.06915 12.3758 3.10899 12.454C3.20487 12.6422 3.35785 12.7951 3.54601 12.891C3.62421 12.9309 3.73631 12.9633 3.95552 12.9812C4.18056 12.9996 4.47171 13 4.9 13H11.1C11.5283 13 11.8194 12.9996 12.0445 12.9812C12.2637 12.9633 12.3758 12.9309 12.454 12.891C12.6422 12.7951 12.7951 12.6422 12.891 12.454C12.9309 12.3758 12.9633 12.2637 12.9812 12.0445C12.9996 11.8194 13 11.5283 13 11.1V6.99998L14 5.99998V11.1V11.1207C14 11.5231 14 11.8553 13.9779 12.1259C13.9549 12.407 13.9057 12.6653 13.782 12.908C13.5903 13.2843 13.2843 13.5903 12.908 13.782C12.6653 13.9057 12.407 13.9549 12.1259 13.9779C11.8553 14 11.5231 14 11.1207 14H11.1H4.9H4.87934C4.47686 14 4.14468 14 3.87409 13.9779C3.59304 13.9549 3.33469 13.9057 3.09202 13.782C2.7157 13.5903 2.40973 13.2843 2.21799 12.908C2.09434 12.6653 2.04506 12.407 2.0221 12.1259C1.99999 11.8553 1.99999 11.5231 2 11.1207V11.1206V11.1V4.9V4.87935V4.87932V4.87931C1.99999 4.47685 1.99999 4.14468 2.0221 3.87409C2.04506 3.59304 2.09434 3.33469 2.21799 3.09202C2.40973 2.71569 2.7157 2.40973 3.09202 2.21799C3.33469 2.09434 3.59304 2.04506 3.87409 2.0221C4.14468 1.99999 4.47685 1.99999 4.87932 2H4.87935H4.9H9.99998Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Wpe=["color"],GU=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Xt(t,Wpe);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),g.createElement("path",{d:"M7.5 0.875C5.49797 0.875 3.875 2.49797 3.875 4.5C3.875 6.15288 4.98124 7.54738 6.49373 7.98351C5.2997 8.12901 4.27557 8.55134 3.50407 9.31167C2.52216 10.2794 2.02502 11.72 2.02502 13.5999C2.02502 13.8623 2.23769 14.0749 2.50002 14.0749C2.76236 14.0749 2.97502 13.8623 2.97502 13.5999C2.97502 11.8799 3.42786 10.7206 4.17091 9.9883C4.91536 9.25463 6.02674 8.87499 7.49995 8.87499C8.97317 8.87499 10.0846 9.25463 10.8291 9.98831C11.5721 10.7206 12.025 11.8799 12.025 13.5999C12.025 13.8623 12.2376 14.0749 12.5 14.0749C12.7623 14.075 12.975 13.8623 12.975 13.6C12.975 11.72 12.4778 10.2794 11.4959 9.31166C10.7244 8.55135 9.70025 8.12903 8.50625 7.98352C10.0187 7.5474 11.125 6.15289 11.125 4.5C11.125 2.49797 9.50203 0.875 7.5 0.875ZM4.825 4.5C4.825 3.02264 6.02264 1.825 7.5 1.825C8.97736 1.825 10.175 3.02264 10.175 4.5C10.175 5.97736 8.97736 7.175 7.5 7.175C6.02264 7.175 4.825 5.97736 4.825 4.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Gpe=["color"],qpe=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Xt(t,Gpe);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),g.createElement("path",{d:"M8 2.75C8 2.47386 7.77614 2.25 7.5 2.25C7.22386 2.25 7 2.47386 7 2.75V7H2.75C2.47386 7 2.25 7.22386 2.25 7.5C2.25 7.77614 2.47386 8 2.75 8H7V12.25C7 12.5261 7.22386 12.75 7.5 12.75C7.77614 12.75 8 12.5261 8 12.25V8H12.25C12.5261 8 12.75 7.77614 12.75 7.5C12.75 7.22386 12.5261 7 12.25 7H8V2.75Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Kpe=["color"],Ype=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Xt(t,Kpe);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),g.createElement("path",{d:"M6.85357 3.85355L7.65355 3.05353C8.2981 2.40901 9.42858 1.96172 10.552 1.80125C11.1056 1.72217 11.6291 1.71725 12.0564 1.78124C12.4987 1.84748 12.7698 1.97696 12.8965 2.10357C13.0231 2.23018 13.1526 2.50125 13.2188 2.94357C13.2828 3.37086 13.2779 3.89439 13.1988 4.44801C13.0383 5.57139 12.591 6.70188 11.9464 7.34645L7.49999 11.7929L6.35354 10.6465C6.15827 10.4512 5.84169 10.4512 5.64643 10.6465C5.45117 10.8417 5.45117 11.1583 5.64643 11.3536L7.14644 12.8536C7.34171 13.0488 7.65829 13.0488 7.85355 12.8536L8.40073 12.3064L9.57124 14.2572C9.65046 14.3893 9.78608 14.4774 9.9389 14.4963C10.0917 14.5151 10.2447 14.4624 10.3535 14.3536L12.3535 12.3536C12.4648 12.2423 12.5172 12.0851 12.495 11.9293L12.0303 8.67679L12.6536 8.05355C13.509 7.19808 14.0117 5.82855 14.1887 4.58943C14.2784 3.9618 14.2891 3.33847 14.2078 2.79546C14.1287 2.26748 13.9519 1.74482 13.6035 1.39645C13.2552 1.04809 12.7325 0.871332 12.2045 0.792264C11.6615 0.710945 11.0382 0.721644 10.4105 0.8113C9.17143 0.988306 7.80189 1.491 6.94644 2.34642L6.32322 2.96968L3.07071 2.50504C2.91492 2.48278 2.75773 2.53517 2.64645 2.64646L0.646451 4.64645C0.537579 4.75533 0.484938 4.90829 0.50375 5.0611C0.522563 5.21391 0.61073 5.34954 0.742757 5.42876L2.69364 6.59928L2.14646 7.14645C2.0527 7.24022 2.00002 7.3674 2.00002 7.50001C2.00002 7.63261 2.0527 7.75979 2.14646 7.85356L3.64647 9.35356C3.84173 9.54883 4.15831 9.54883 4.35357 9.35356C4.54884 9.1583 4.54884 8.84172 4.35357 8.64646L3.20712 7.50001L3.85357 6.85356L6.85357 3.85355ZM10.0993 13.1936L9.12959 11.5775L11.1464 9.56067L11.4697 11.8232L10.0993 13.1936ZM3.42251 5.87041L5.43935 3.85356L3.17678 3.53034L1.80638 4.90074L3.42251 5.87041ZM2.35356 10.3535C2.54882 10.1583 2.54882 9.8417 2.35356 9.64644C2.1583 9.45118 1.84171 9.45118 1.64645 9.64644L0.646451 10.6464C0.451188 10.8417 0.451188 11.1583 0.646451 11.3535C0.841713 11.5488 1.1583 11.5488 1.35356 11.3535L2.35356 10.3535ZM3.85358 11.8536C4.04884 11.6583 4.04885 11.3417 3.85359 11.1465C3.65833 10.9512 3.34175 10.9512 3.14648 11.1465L1.14645 13.1464C0.95119 13.3417 0.951187 13.6583 1.14645 13.8535C1.34171 14.0488 1.65829 14.0488 1.85355 13.8536L3.85358 11.8536ZM5.35356 13.3535C5.54882 13.1583 5.54882 12.8417 5.35356 12.6464C5.1583 12.4512 4.84171 12.4512 4.64645 12.6464L3.64645 13.6464C3.45119 13.8417 3.45119 14.1583 3.64645 14.3535C3.84171 14.5488 4.1583 14.5488 4.35356 14.3535L5.35356 13.3535ZM9.49997 6.74881C10.1897 6.74881 10.7488 6.1897 10.7488 5.5C10.7488 4.8103 10.1897 4.25118 9.49997 4.25118C8.81026 4.25118 8.25115 4.8103 8.25115 5.5C8.25115 6.1897 8.81026 6.74881 9.49997 6.74881Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Qpe=["color"],qN=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Xt(t,Qpe);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),g.createElement("path",{d:"M3.5 5.00006C3.22386 5.00006 3 5.22392 3 5.50006L3 11.5001C3 11.7762 3.22386 12.0001 3.5 12.0001L11.5 12.0001C11.7761 12.0001 12 11.7762 12 11.5001L12 5.50006C12 5.22392 11.7761 5.00006 11.5 5.00006L10.25 5.00006C9.97386 5.00006 9.75 4.7762 9.75 4.50006C9.75 4.22392 9.97386 4.00006 10.25 4.00006L11.5 4.00006C12.3284 4.00006 13 4.67163 13 5.50006L13 11.5001C13 12.3285 12.3284 13.0001 11.5 13.0001L3.5 13.0001C2.67157 13.0001 2 12.3285 2 11.5001L2 5.50006C2 4.67163 2.67157 4.00006 3.5 4.00006L4.75 4.00006C5.02614 4.00006 5.25 4.22392 5.25 4.50006C5.25 4.7762 5.02614 5.00006 4.75 5.00006L3.5 5.00006ZM7 1.6364L5.5682 3.0682C5.39246 3.24393 5.10754 3.24393 4.9318 3.0682C4.75607 2.89246 4.75607 2.60754 4.9318 2.4318L7.1818 0.181802C7.26619 0.09741 7.38065 0.049999 7.5 0.049999C7.61935 0.049999 7.73381 0.09741 7.8182 0.181802L10.0682 2.4318C10.2439 2.60754 10.2439 2.89246 10.0682 3.0682C9.89246 3.24393 9.60754 3.24393 9.4318 3.0682L8 1.6364L8 8.5C8 8.77614 7.77614 9 7.5 9C7.22386 9 7 8.77614 7 8.5L7 1.6364Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Xpe=["color"],qU=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Xt(t,Xpe);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),g.createElement("path",{d:"M7.5 0C7.77614 0 8 0.223858 8 0.5V2.5C8 2.77614 7.77614 3 7.5 3C7.22386 3 7 2.77614 7 2.5V0.5C7 0.223858 7.22386 0 7.5 0ZM2.1967 2.1967C2.39196 2.00144 2.70854 2.00144 2.90381 2.1967L4.31802 3.61091C4.51328 3.80617 4.51328 4.12276 4.31802 4.31802C4.12276 4.51328 3.80617 4.51328 3.61091 4.31802L2.1967 2.90381C2.00144 2.70854 2.00144 2.39196 2.1967 2.1967ZM0.5 7C0.223858 7 0 7.22386 0 7.5C0 7.77614 0.223858 8 0.5 8H2.5C2.77614 8 3 7.77614 3 7.5C3 7.22386 2.77614 7 2.5 7H0.5ZM2.1967 12.8033C2.00144 12.608 2.00144 12.2915 2.1967 12.0962L3.61091 10.682C3.80617 10.4867 4.12276 10.4867 4.31802 10.682C4.51328 10.8772 4.51328 11.1938 4.31802 11.3891L2.90381 12.8033C2.70854 12.9986 2.39196 12.9986 2.1967 12.8033ZM12.5 7C12.2239 7 12 7.22386 12 7.5C12 7.77614 12.2239 8 12.5 8H14.5C14.7761 8 15 7.77614 15 7.5C15 7.22386 14.7761 7 14.5 7H12.5ZM10.682 4.31802C10.4867 4.12276 10.4867 3.80617 10.682 3.61091L12.0962 2.1967C12.2915 2.00144 12.608 2.00144 12.8033 2.1967C12.9986 2.39196 12.9986 2.70854 12.8033 2.90381L11.3891 4.31802C11.1938 4.51328 10.8772 4.51328 10.682 4.31802ZM8 12.5C8 12.2239 7.77614 12 7.5 12C7.22386 12 7 12.2239 7 12.5V14.5C7 14.7761 7.22386 15 7.5 15C7.77614 15 8 14.7761 8 14.5V12.5ZM10.682 10.682C10.8772 10.4867 11.1938 10.4867 11.3891 10.682L12.8033 12.0962C12.9986 12.2915 12.9986 12.608 12.8033 12.8033C12.608 12.9986 12.2915 12.9986 12.0962 12.8033L10.682 11.3891C10.4867 11.1938 10.4867 10.8772 10.682 10.682ZM5.5 7.5C5.5 6.39543 6.39543 5.5 7.5 5.5C8.60457 5.5 9.5 6.39543 9.5 7.5C9.5 8.60457 8.60457 9.5 7.5 9.5C6.39543 9.5 5.5 8.60457 5.5 7.5ZM7.5 4.5C5.84315 4.5 4.5 5.84315 4.5 7.5C4.5 9.15685 5.84315 10.5 7.5 10.5C9.15685 10.5 10.5 9.15685 10.5 7.5C10.5 5.84315 9.15685 4.5 7.5 4.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Jpe=["color"],Zpe=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Xt(t,Jpe);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),g.createElement("path",{d:"M5.5 1C5.22386 1 5 1.22386 5 1.5C5 1.77614 5.22386 2 5.5 2H9.5C9.77614 2 10 1.77614 10 1.5C10 1.22386 9.77614 1 9.5 1H5.5ZM3 3.5C3 3.22386 3.22386 3 3.5 3H5H10H11.5C11.7761 3 12 3.22386 12 3.5C12 3.77614 11.7761 4 11.5 4H11V12C11 12.5523 10.5523 13 10 13H5C4.44772 13 4 12.5523 4 12V4L3.5 4C3.22386 4 3 3.77614 3 3.5ZM5 4H10V12H5V4Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),eme=["color"],tme=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Xt(t,eme);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),g.createElement("path",{d:"M1.90321 7.29677C1.90321 10.341 4.11041 12.4147 6.58893 12.8439C6.87255 12.893 7.06266 13.1627 7.01355 13.4464C6.96444 13.73 6.69471 13.9201 6.41109 13.871C3.49942 13.3668 0.86084 10.9127 0.86084 7.29677C0.860839 5.76009 1.55996 4.55245 2.37639 3.63377C2.96124 2.97568 3.63034 2.44135 4.16846 2.03202L2.53205 2.03202C2.25591 2.03202 2.03205 1.80816 2.03205 1.53202C2.03205 1.25588 2.25591 1.03202 2.53205 1.03202L5.53205 1.03202C5.80819 1.03202 6.03205 1.25588 6.03205 1.53202L6.03205 4.53202C6.03205 4.80816 5.80819 5.03202 5.53205 5.03202C5.25591 5.03202 5.03205 4.80816 5.03205 4.53202L5.03205 2.68645L5.03054 2.68759L5.03045 2.68766L5.03044 2.68767L5.03043 2.68767C4.45896 3.11868 3.76059 3.64538 3.15554 4.3262C2.44102 5.13021 1.90321 6.10154 1.90321 7.29677ZM13.0109 7.70321C13.0109 4.69115 10.8505 2.6296 8.40384 2.17029C8.12093 2.11718 7.93465 1.84479 7.98776 1.56188C8.04087 1.27898 8.31326 1.0927 8.59616 1.14581C11.4704 1.68541 14.0532 4.12605 14.0532 7.70321C14.0532 9.23988 13.3541 10.4475 12.5377 11.3662C11.9528 12.0243 11.2837 12.5586 10.7456 12.968L12.3821 12.968C12.6582 12.968 12.8821 13.1918 12.8821 13.468C12.8821 13.7441 12.6582 13.968 12.3821 13.968L9.38205 13.968C9.10591 13.968 8.88205 13.7441 8.88205 13.468L8.88205 10.468C8.88205 10.1918 9.10591 9.96796 9.38205 9.96796C9.65819 9.96796 9.88205 10.1918 9.88205 10.468L9.88205 12.3135L9.88362 12.3123C10.4551 11.8813 11.1535 11.3546 11.7585 10.6738C12.4731 9.86976 13.0109 8.89844 13.0109 7.70321Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),nme=["color"],rme=g.forwardRef(function(t,e){var n=t.color,r=n===void 0?"currentColor":n,o=Xt(t,nme);return g.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:e}),g.createElement("path",{d:"M7.49998 1L6.92321 2.00307L1.17498 12L0.599976 13H1.7535H13.2464H14.4L13.825 12L8.07674 2.00307L7.49998 1ZM7.49998 3.00613L2.3285 12H12.6714L7.49998 3.00613Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))});function ome(t,e){const n=g.createContext(e),r=s=>{const{children:i,...a}=s,l=g.useMemo(()=>a,Object.values(a));return d.jsx(n.Provider,{value:l,children:i})};r.displayName=t+"Provider";function o(s){const i=g.useContext(n);if(i)return i;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,o]}function Lo(t,e=[]){let n=[];function r(s,i){const a=g.createContext(i),l=n.length;n=[...n,i];const c=f=>{var b;const{scope:h,children:p,...m}=f,y=((b=h==null?void 0:h[t])==null?void 0:b[l])||a,x=g.useMemo(()=>m,Object.values(m));return d.jsx(y.Provider,{value:x,children:p})};c.displayName=s+"Provider";function u(f,h){var y;const p=((y=h==null?void 0:h[t])==null?void 0:y[l])||a,m=g.useContext(p);if(m)return m;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${s}\``)}return[c,u]}const o=()=>{const s=n.map(i=>g.createContext(i));return function(a){const l=(a==null?void 0:a[t])||s;return g.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return o.scopeName=t,[r,sme(o,...e)]}function sme(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const i=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(s)[`__scope${c}`];return{...a,...f}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}function Xn(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}var Lr=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},ime=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],et=ime.reduce((t,e)=>{const n=g.forwardRef((r,o)=>{const{asChild:s,...i}=r,a=s?pc:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(a,{...i,ref:o})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function KU(t,e){t&&yo.flushSync(()=>t.dispatchEvent(e))}var Z4="Avatar",[ame,DBe]=Lo(Z4),[lme,YU]=ame(Z4),QU=g.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[o,s]=g.useState("idle");return d.jsx(lme,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:s,children:d.jsx(et.span,{...r,ref:e})})});QU.displayName=Z4;var XU="AvatarImage",JU=g.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:o=()=>{},...s}=t,i=YU(XU,n),a=cme(r,s.referrerPolicy),l=Xn(c=>{o(c),i.onImageLoadingStatusChange(c)});return Lr(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?d.jsx(et.img,{...s,ref:e,src:r}):null});JU.displayName=XU;var ZU="AvatarFallback",eH=g.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...o}=t,s=YU(ZU,n),[i,a]=g.useState(r===void 0);return g.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),i&&s.imageLoadingStatus!=="loaded"?d.jsx(et.span,{...o,ref:e}):null});eH.displayName=ZU;function cme(t,e){const[n,r]=g.useState("idle");return Lr(()=>{if(!t){r("error");return}let o=!0;const s=new window.Image,i=a=>()=>{o&&r(a)};return r("loading"),s.onload=i("loaded"),s.onerror=i("error"),s.src=t,e&&(s.referrerPolicy=e),()=>{o=!1}},[t,e]),n}var tH=QU,nH=JU,rH=eH;const KC=g.forwardRef(({className:t,...e},n)=>d.jsx(tH,{ref:n,className:Ve("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));KC.displayName=tH.displayName;const YC=g.forwardRef(({className:t,...e},n)=>d.jsx(nH,{ref:n,className:Ve("aspect-square h-full w-full",t),...e}));YC.displayName=nH.displayName;const QC=g.forwardRef(({className:t,...e},n)=>d.jsx(rH,{ref:n,className:Ve("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));QC.displayName=rH.displayName;function ze(t,e,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t==null||t(o),n===!1||!o.defaultPrevented)return e==null?void 0:e(o)}}function ea({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,o]=ume({defaultProp:e,onChange:n}),s=t!==void 0,i=s?t:r,a=Xn(n),l=g.useCallback(c=>{if(s){const f=typeof c=="function"?c(t):c;f!==t&&a(f)}else o(c)},[s,t,o,a]);return[i,l]}function ume({defaultProp:t,onChange:e}){const n=g.useState(t),[r]=n,o=g.useRef(r),s=Xn(e);return g.useEffect(()=>{o.current!==r&&(s(r),o.current=r)},[r,o,s]),n}function eP(t){const e=t+"CollectionProvider",[n,r]=Lo(e),[o,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),i=p=>{const{scope:m,children:y}=p,x=dt.useRef(null),b=dt.useRef(new Map).current;return d.jsx(o,{scope:m,itemMap:b,collectionRef:x,children:y})};i.displayName=e;const a=t+"CollectionSlot",l=dt.forwardRef((p,m)=>{const{scope:y,children:x}=p,b=s(a,y),C=bt(m,b.collectionRef);return d.jsx(pc,{ref:C,children:x})});l.displayName=a;const c=t+"CollectionItemSlot",u="data-radix-collection-item",f=dt.forwardRef((p,m)=>{const{scope:y,children:x,...b}=p,C=dt.useRef(null),E=bt(m,C),R=s(c,y);return dt.useEffect(()=>(R.itemMap.set(C,{ref:C,...b}),()=>void R.itemMap.delete(C))),d.jsx(pc,{[u]:"",ref:E,children:x})});f.displayName=c;function h(p){const m=s(t+"CollectionConsumer",p);return dt.useCallback(()=>{const x=m.collectionRef.current;if(!x)return[];const b=Array.from(x.querySelectorAll(`[${u}]`));return Array.from(m.itemMap.values()).sort((R,D)=>b.indexOf(R.ref.current)-b.indexOf(D.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:i,Slot:l,ItemSlot:f},h,r]}var dme=g.createContext(void 0);function $m(t){const e=g.useContext(dme);return t||e||"ltr"}function fme(t,e=globalThis==null?void 0:globalThis.document){const n=Xn(t);g.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var hme="DismissableLayer",KN="dismissableLayer.update",pme="dismissableLayer.pointerDownOutside",mme="dismissableLayer.focusOutside",hO,oH=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Tv=g.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:i,onDismiss:a,...l}=t,c=g.useContext(oH),[u,f]=g.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=g.useState({}),m=bt(e,T=>f(T)),y=Array.from(c.layers),[x]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),b=y.indexOf(x),C=u?y.indexOf(u):-1,E=c.layersWithOutsidePointerEventsDisabled.size>0,R=C>=b,D=vme(T=>{const I=T.target,P=[...c.branches].some(L=>L.contains(I));!R||P||(o==null||o(T),i==null||i(T),T.defaultPrevented||a==null||a())},h),O=wme(T=>{const I=T.target;[...c.branches].some(L=>L.contains(I))||(s==null||s(T),i==null||i(T),T.defaultPrevented||a==null||a())},h);return fme(T=>{C===c.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&a&&(T.preventDefault(),a()))},h),g.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(hO=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),pO(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=hO)}},[u,h,n,c]),g.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),pO())},[u,c]),g.useEffect(()=>{const T=()=>p({});return document.addEventListener(KN,T),()=>document.removeEventListener(KN,T)},[]),d.jsx(et.div,{...l,ref:m,style:{pointerEvents:E?R?"auto":"none":void 0,...t.style},onFocusCapture:ze(t.onFocusCapture,O.onFocusCapture),onBlurCapture:ze(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:ze(t.onPointerDownCapture,D.onPointerDownCapture)})});Tv.displayName=hme;var gme="DismissableLayerBranch",yme=g.forwardRef((t,e)=>{const n=g.useContext(oH),r=g.useRef(null),o=bt(e,r);return g.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),d.jsx(et.div,{...t,ref:o})});yme.displayName=gme;function vme(t,e=globalThis==null?void 0:globalThis.document){const n=Xn(t),r=g.useRef(!1),o=g.useRef(()=>{});return g.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){sH(pme,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=l,e.addEventListener("click",o.current,{once:!0})):l()}else e.removeEventListener("click",o.current);r.current=!1},i=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(i),e.removeEventListener("pointerdown",s),e.removeEventListener("click",o.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function wme(t,e=globalThis==null?void 0:globalThis.document){const n=Xn(t),r=g.useRef(!1);return g.useEffect(()=>{const o=s=>{s.target&&!r.current&&sH(mme,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function pO(){const t=new CustomEvent(KN);document.dispatchEvent(t)}function sH(t,e,n,{discrete:r}){const o=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),r?KU(o,s):o.dispatchEvent(s)}var Nk=0;function XC(){g.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??mO()),document.body.insertAdjacentElement("beforeend",t[1]??mO()),Nk++,()=>{Nk===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Nk--}},[])}function mO(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Ik="focusScope.autoFocusOnMount",Rk="focusScope.autoFocusOnUnmount",gO={bubbles:!1,cancelable:!0},bme="FocusScope",Nv=g.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:s,...i}=t,[a,l]=g.useState(null),c=Xn(o),u=Xn(s),f=g.useRef(null),h=bt(e,y=>l(y)),p=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let y=function(E){if(p.paused||!a)return;const R=E.target;a.contains(R)?f.current=R:Kc(f.current,{select:!0})},x=function(E){if(p.paused||!a)return;const R=E.relatedTarget;R!==null&&(a.contains(R)||Kc(f.current,{select:!0}))},b=function(E){if(document.activeElement===document.body)for(const D of E)D.removedNodes.length>0&&Kc(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",x);const C=new MutationObserver(b);return a&&C.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",x),C.disconnect()}}},[r,a,p.paused]),g.useEffect(()=>{if(a){vO.add(p);const y=document.activeElement;if(!a.contains(y)){const b=new CustomEvent(Ik,gO);a.addEventListener(Ik,c),a.dispatchEvent(b),b.defaultPrevented||(xme(Sme(iH(a)),{select:!0}),document.activeElement===y&&Kc(a))}return()=>{a.removeEventListener(Ik,c),setTimeout(()=>{const b=new CustomEvent(Rk,gO);a.addEventListener(Rk,u),a.dispatchEvent(b),b.defaultPrevented||Kc(y??document.body,{select:!0}),a.removeEventListener(Rk,u),vO.remove(p)},0)}}},[a,c,u,p]);const m=g.useCallback(y=>{if(!n&&!r||p.paused)return;const x=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,b=document.activeElement;if(x&&b){const C=y.currentTarget,[E,R]=_me(C);E&&R?!y.shiftKey&&b===R?(y.preventDefault(),n&&Kc(E,{select:!0})):y.shiftKey&&b===E&&(y.preventDefault(),n&&Kc(R,{select:!0})):b===C&&y.preventDefault()}},[n,r,p.paused]);return d.jsx(et.div,{tabIndex:-1,...i,ref:h,onKeyDown:m})});Nv.displayName=bme;function xme(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Kc(r,{select:e}),document.activeElement!==n)return}function _me(t){const e=iH(t),n=yO(e,t),r=yO(e.reverse(),t);return[n,r]}function iH(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function yO(t,e){for(const n of t)if(!Cme(n,{upTo:e}))return n}function Cme(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Eme(t){return t instanceof HTMLInputElement&&"select"in t}function Kc(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Eme(t)&&e&&t.select()}}var vO=kme();function kme(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=wO(t,e),t.unshift(e)},remove(e){var n;t=wO(t,e),(n=t[0])==null||n.resume()}}}function wO(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Sme(t){return t.filter(e=>e.tagName!=="A")}var Tme=XR.useId||(()=>{}),Nme=0;function _s(t){const[e,n]=g.useState(Tme());return Lr(()=>{t||n(r=>r??String(Nme++))},[t]),t||(e?`radix-${e}`:"")}const Ime=["top","right","bottom","left"],ta=Math.min,lo=Math.max,xx=Math.round,e0=Math.floor,qa=t=>({x:t,y:t}),Rme={left:"right",right:"left",bottom:"top",top:"bottom"},Ame={start:"end",end:"start"};function YN(t,e,n){return lo(t,ta(e,n))}function Xa(t,e){return typeof t=="function"?t(e):t}function na(t){return t.split("-")[0]}function Bm(t){return t.split("-")[1]}function tP(t){return t==="x"?"y":"x"}function nP(t){return t==="y"?"height":"width"}function bc(t){return["top","bottom"].includes(na(t))?"y":"x"}function rP(t){return tP(bc(t))}function Pme(t,e,n){n===void 0&&(n=!1);const r=Bm(t),o=rP(t),s=nP(o);let i=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(i=_x(i)),[i,_x(i)]}function Mme(t){const e=_x(t);return[QN(t),e,QN(e)]}function QN(t){return t.replace(/start|end/g,e=>Ame[e])}function Dme(t,e,n){const r=["left","right"],o=["right","left"],s=["top","bottom"],i=["bottom","top"];switch(t){case"top":case"bottom":return n?e?o:r:e?r:o;case"left":case"right":return e?s:i;default:return[]}}function Ome(t,e,n,r){const o=Bm(t);let s=Dme(na(t),n==="start",r);return o&&(s=s.map(i=>i+"-"+o),e&&(s=s.concat(s.map(QN)))),s}function _x(t){return t.replace(/left|right|bottom|top/g,e=>Rme[e])}function Lme(t){return{top:0,right:0,bottom:0,left:0,...t}}function oP(t){return typeof t!="number"?Lme(t):{top:t,right:t,bottom:t,left:t}}function im(t){const{x:e,y:n,width:r,height:o}=t;return{width:r,height:o,top:n,left:e,right:e+r,bottom:n+o,x:e,y:n}}function bO(t,e,n){let{reference:r,floating:o}=t;const s=bc(e),i=rP(e),a=nP(i),l=na(e),c=s==="y",u=r.x+r.width/2-o.width/2,f=r.y+r.height/2-o.height/2,h=r[a]/2-o[a]/2;let p;switch(l){case"top":p={x:u,y:r.y-o.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:f};break;case"left":p={x:r.x-o.width,y:f};break;default:p={x:r.x,y:r.y}}switch(Bm(e)){case"start":p[i]-=h*(n&&c?-1:1);break;case"end":p[i]+=h*(n&&c?-1:1);break}return p}const jme=async(t,e,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:s=[],platform:i}=n,a=s.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(e));let c=await i.getElementRects({reference:t,floating:e,strategy:o}),{x:u,y:f}=bO(c,r,l),h=r,p={},m=0;for(let y=0;y<a.length;y++){const{name:x,fn:b}=a[y],{x:C,y:E,data:R,reset:D}=await b({x:u,y:f,initialPlacement:r,placement:h,strategy:o,middlewareData:p,rects:c,platform:i,elements:{reference:t,floating:e}});u=C??u,f=E??f,p={...p,[x]:{...p[x],...R}},D&&m<=50&&(m++,typeof D=="object"&&(D.placement&&(h=D.placement),D.rects&&(c=D.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:o}):D.rects),{x:u,y:f}=bO(c,h,l)),y=-1)}return{x:u,y:f,placement:h,strategy:o,middlewareData:p}};async function x1(t,e){var n;e===void 0&&(e={});const{x:r,y:o,platform:s,rects:i,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:h=!1,padding:p=0}=Xa(e,t),m=oP(p),x=a[h?f==="floating"?"reference":"floating":f],b=im(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(x)))==null||n?x:x.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),C=f==="floating"?{x:r,y:o,width:i.floating.width,height:i.floating.height}:i.reference,E=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),R=await(s.isElement==null?void 0:s.isElement(E))?await(s.getScale==null?void 0:s.getScale(E))||{x:1,y:1}:{x:1,y:1},D=im(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:C,offsetParent:E,strategy:l}):C);return{top:(b.top-D.top+m.top)/R.y,bottom:(D.bottom-b.bottom+m.bottom)/R.y,left:(b.left-D.left+m.left)/R.x,right:(D.right-b.right+m.right)/R.x}}const Vme=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:o,rects:s,platform:i,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Xa(t,e)||{};if(c==null)return{};const f=oP(u),h={x:n,y:r},p=rP(o),m=nP(p),y=await i.getDimensions(c),x=p==="y",b=x?"top":"left",C=x?"bottom":"right",E=x?"clientHeight":"clientWidth",R=s.reference[m]+s.reference[p]-h[p]-s.floating[m],D=h[p]-s.reference[p],O=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c));let T=O?O[E]:0;(!T||!await(i.isElement==null?void 0:i.isElement(O)))&&(T=a.floating[E]||s.floating[m]);const I=R/2-D/2,P=T/2-y[m]/2-1,L=ta(f[b],P),$=ta(f[C],P),F=L,V=T-y[m]-$,be=T/2-y[m]/2+I,ge=YN(F,be,V),le=!l.arrow&&Bm(o)!=null&&be!==ge&&s.reference[m]/2-(be<F?L:$)-y[m]/2<0,Q=le?be<F?be-F:be-V:0;return{[p]:h[p]+Q,data:{[p]:ge,centerOffset:be-ge-Q,...le&&{alignmentOffset:Q}},reset:le}}}),$me=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:o,middlewareData:s,rects:i,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:y=!0,...x}=Xa(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const b=na(o),C=bc(a),E=na(a)===a,R=await(l.isRTL==null?void 0:l.isRTL(c.floating)),D=h||(E||!y?[_x(a)]:Mme(a)),O=m!=="none";!h&&O&&D.push(...Ome(a,y,m,R));const T=[a,...D],I=await x1(e,x),P=[];let L=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&P.push(I[b]),f){const be=Pme(o,i,R);P.push(I[be[0]],I[be[1]])}if(L=[...L,{placement:o,overflows:P}],!P.every(be=>be<=0)){var $,F;const be=((($=s.flip)==null?void 0:$.index)||0)+1,ge=T[be];if(ge)return{data:{index:be,overflows:L},reset:{placement:ge}};let le=(F=L.filter(Q=>Q.overflows[0]<=0).sort((Q,H)=>Q.overflows[1]-H.overflows[1])[0])==null?void 0:F.placement;if(!le)switch(p){case"bestFit":{var V;const Q=(V=L.filter(H=>{if(O){const Y=bc(H.placement);return Y===C||Y==="y"}return!0}).map(H=>[H.placement,H.overflows.filter(Y=>Y>0).reduce((Y,ue)=>Y+ue,0)]).sort((H,Y)=>H[1]-Y[1])[0])==null?void 0:V[0];Q&&(le=Q);break}case"initialPlacement":le=a;break}if(o!==le)return{reset:{placement:le}}}return{}}}};function xO(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function _O(t){return Ime.some(e=>t[e]>=0)}const Bme=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...o}=Xa(t,e);switch(r){case"referenceHidden":{const s=await x1(e,{...o,elementContext:"reference"}),i=xO(s,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:_O(i)}}}case"escaped":{const s=await x1(e,{...o,altBoundary:!0}),i=xO(s,n.floating);return{data:{escapedOffsets:i,escaped:_O(i)}}}default:return{}}}}};function aH(t){const e=ta(...t.map(s=>s.left)),n=ta(...t.map(s=>s.top)),r=lo(...t.map(s=>s.right)),o=lo(...t.map(s=>s.bottom));return{x:e,y:n,width:r-e,height:o-n}}function Fme(t){const e=t.slice().sort((o,s)=>o.y-s.y),n=[];let r=null;for(let o=0;o<e.length;o++){const s=e[o];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(o=>im(aH(o)))}const Ume=function(t){return t===void 0&&(t={}),{name:"inline",options:t,async fn(e){const{placement:n,elements:r,rects:o,platform:s,strategy:i}=e,{padding:a=2,x:l,y:c}=Xa(t,e),u=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=Fme(u),h=im(aH(u)),p=oP(a);function m(){if(f.length===2&&f[0].left>f[1].right&&l!=null&&c!=null)return f.find(x=>l>x.left-p.left&&l<x.right+p.right&&c>x.top-p.top&&c<x.bottom+p.bottom)||h;if(f.length>=2){if(bc(n)==="y"){const L=f[0],$=f[f.length-1],F=na(n)==="top",V=L.top,be=$.bottom,ge=F?L.left:$.left,le=F?L.right:$.right,Q=le-ge,H=be-V;return{top:V,bottom:be,left:ge,right:le,width:Q,height:H,x:ge,y:V}}const x=na(n)==="left",b=lo(...f.map(L=>L.right)),C=ta(...f.map(L=>L.left)),E=f.filter(L=>x?L.left===C:L.right===b),R=E[0].top,D=E[E.length-1].bottom,O=C,T=b,I=T-O,P=D-R;return{top:R,bottom:D,left:O,right:T,width:I,height:P,x:O,y:R}}return h}const y=await s.getElementRects({reference:{getBoundingClientRect:m},floating:r.floating,strategy:i});return o.reference.x!==y.reference.x||o.reference.y!==y.reference.y||o.reference.width!==y.reference.width||o.reference.height!==y.reference.height?{reset:{rects:y}}:{}}}};async function Hme(t,e){const{placement:n,platform:r,elements:o}=t,s=await(r.isRTL==null?void 0:r.isRTL(o.floating)),i=na(n),a=Bm(n),l=bc(n)==="y",c=["left","top"].includes(i)?-1:1,u=s&&l?-1:1,f=Xa(e,t);let{mainAxis:h,crossAxis:p,alignmentAxis:m}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof m=="number"&&(p=a==="end"?m*-1:m),l?{x:p*u,y:h*c}:{x:h*c,y:p*u}}const zme=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:o,y:s,placement:i,middlewareData:a}=e,l=await Hme(e,t);return i===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:o+l.x,y:s+l.y,data:{...l,placement:i}}}}},Wme=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:o}=e,{mainAxis:s=!0,crossAxis:i=!1,limiter:a={fn:x=>{let{x:b,y:C}=x;return{x:b,y:C}}},...l}=Xa(t,e),c={x:n,y:r},u=await x1(e,l),f=bc(na(o)),h=tP(f);let p=c[h],m=c[f];if(s){const x=h==="y"?"top":"left",b=h==="y"?"bottom":"right",C=p+u[x],E=p-u[b];p=YN(C,p,E)}if(i){const x=f==="y"?"top":"left",b=f==="y"?"bottom":"right",C=m+u[x],E=m-u[b];m=YN(C,m,E)}const y=a.fn({...e,[h]:p,[f]:m});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[h]:s,[f]:i}}}}}},Gme=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:o,rects:s,middlewareData:i}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Xa(t,e),u={x:n,y:r},f=bc(o),h=tP(f);let p=u[h],m=u[f];const y=Xa(a,e),x=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const E=h==="y"?"height":"width",R=s.reference[h]-s.floating[E]+x.mainAxis,D=s.reference[h]+s.reference[E]-x.mainAxis;p<R?p=R:p>D&&(p=D)}if(c){var b,C;const E=h==="y"?"width":"height",R=["top","left"].includes(na(o)),D=s.reference[f]-s.floating[E]+(R&&((b=i.offset)==null?void 0:b[f])||0)+(R?0:x.crossAxis),O=s.reference[f]+s.reference[E]+(R?0:((C=i.offset)==null?void 0:C[f])||0)-(R?x.crossAxis:0);m<D?m=D:m>O&&(m=O)}return{[h]:p,[f]:m}}}},qme=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:o,rects:s,platform:i,elements:a}=e,{apply:l=()=>{},...c}=Xa(t,e),u=await x1(e,c),f=na(o),h=Bm(o),p=bc(o)==="y",{width:m,height:y}=s.floating;let x,b;f==="top"||f==="bottom"?(x=f,b=h===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(b=f,x=h==="end"?"top":"bottom");const C=y-u.top-u.bottom,E=m-u.left-u.right,R=ta(y-u[x],C),D=ta(m-u[b],E),O=!e.middlewareData.shift;let T=R,I=D;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(I=E),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(T=C),O&&!h){const L=lo(u.left,0),$=lo(u.right,0),F=lo(u.top,0),V=lo(u.bottom,0);p?I=m-2*(L!==0||$!==0?L+$:lo(u.left,u.right)):T=y-2*(F!==0||V!==0?F+V:lo(u.top,u.bottom))}await l({...e,availableWidth:I,availableHeight:T});const P=await i.getDimensions(a.floating);return m!==P.width||y!==P.height?{reset:{rects:!0}}:{}}}};function JC(){return typeof window<"u"}function Fm(t){return lH(t)?(t.nodeName||"").toLowerCase():"#document"}function Zo(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function al(t){var e;return(e=(lH(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function lH(t){return JC()?t instanceof Node||t instanceof Zo(t).Node:!1}function yn(t){return JC()?t instanceof Element||t instanceof Zo(t).Element:!1}function Is(t){return JC()?t instanceof HTMLElement||t instanceof Zo(t).HTMLElement:!1}function XN(t){return!JC()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Zo(t).ShadowRoot}function Iv(t){const{overflow:e,overflowX:n,overflowY:r,display:o}=mi(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(o)}function Kme(t){return["table","td","th"].includes(Fm(t))}function ZC(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function sP(t){const e=eE(),n=yn(t)?mi(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Yme(t){let e=xc(t);for(;Is(e)&&!qu(e);){if(sP(e))return e;if(ZC(e))return null;e=xc(e)}return null}function eE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function qu(t){return["html","body","#document"].includes(Fm(t))}function mi(t){return Zo(t).getComputedStyle(t)}function tE(t){return yn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function xc(t){if(Fm(t)==="html")return t;const e=t.assignedSlot||t.parentNode||XN(t)&&t.host||al(t);return XN(e)?e.host:e}function cH(t){const e=xc(t);return qu(e)?t.ownerDocument?t.ownerDocument.body:t.body:Is(e)&&Iv(e)?e:cH(e)}function nc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const o=cH(t),s=o===((r=t.ownerDocument)==null?void 0:r.body),i=Zo(o);if(s){const a=JN(i);return e.concat(i,i.visualViewport||[],Iv(o)?o:[],a&&n?nc(a):[])}return e.concat(o,nc(o,[],n))}function JN(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function uH(t){const e=mi(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const o=Is(t),s=o?t.offsetWidth:n,i=o?t.offsetHeight:r,a=xx(n)!==s||xx(r)!==i;return a&&(n=s,r=i),{width:n,height:r,$:a}}function iP(t){return yn(t)?t:t.contextElement}function Ip(t){const e=iP(t);if(!Is(e))return qa(1);const n=e.getBoundingClientRect(),{width:r,height:o,$:s}=uH(e);let i=(s?xx(n.width):n.width)/r,a=(s?xx(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const Qme=qa(0);function dH(t){const e=Zo(t);return!eE()||!e.visualViewport?Qme:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Xme(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Zo(t)?!1:e}function Nf(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const o=t.getBoundingClientRect(),s=iP(t);let i=qa(1);e&&(r?yn(r)&&(i=Ip(r)):i=Ip(t));const a=Xme(s,n,r)?dH(s):qa(0);let l=(o.left+a.x)/i.x,c=(o.top+a.y)/i.y,u=o.width/i.x,f=o.height/i.y;if(s){const h=Zo(s),p=r&&yn(r)?Zo(r):r;let m=h,y=JN(m);for(;y&&r&&p!==m;){const x=Ip(y),b=y.getBoundingClientRect(),C=mi(y),E=b.left+(y.clientLeft+parseFloat(C.paddingLeft))*x.x,R=b.top+(y.clientTop+parseFloat(C.paddingTop))*x.y;l*=x.x,c*=x.y,u*=x.x,f*=x.y,l+=E,c+=R,m=Zo(y),y=JN(m)}}return im({width:u,height:f,x:l,y:c})}function aP(t,e){const n=tE(t).scrollLeft;return e?e.left+n:Nf(al(t)).left+n}function fH(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),o=r.left+e.scrollLeft-(n?0:aP(t,r)),s=r.top+e.scrollTop;return{x:o,y:s}}function Jme(t){let{elements:e,rect:n,offsetParent:r,strategy:o}=t;const s=o==="fixed",i=al(r),a=e?ZC(e.floating):!1;if(r===i||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=qa(1);const u=qa(0),f=Is(r);if((f||!f&&!s)&&((Fm(r)!=="body"||Iv(i))&&(l=tE(r)),Is(r))){const p=Nf(r);c=Ip(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}const h=i&&!f&&!s?fH(i,l,!0):qa(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}}function Zme(t){return Array.from(t.getClientRects())}function ege(t){const e=al(t),n=tE(t),r=t.ownerDocument.body,o=lo(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=lo(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+aP(t);const a=-n.scrollTop;return mi(r).direction==="rtl"&&(i+=lo(e.clientWidth,r.clientWidth)-o),{width:o,height:s,x:i,y:a}}function tge(t,e){const n=Zo(t),r=al(t),o=n.visualViewport;let s=r.clientWidth,i=r.clientHeight,a=0,l=0;if(o){s=o.width,i=o.height;const c=eE();(!c||c&&e==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:s,height:i,x:a,y:l}}function nge(t,e){const n=Nf(t,!0,e==="fixed"),r=n.top+t.clientTop,o=n.left+t.clientLeft,s=Is(t)?Ip(t):qa(1),i=t.clientWidth*s.x,a=t.clientHeight*s.y,l=o*s.x,c=r*s.y;return{width:i,height:a,x:l,y:c}}function CO(t,e,n){let r;if(e==="viewport")r=tge(t,n);else if(e==="document")r=ege(al(t));else if(yn(e))r=nge(e,n);else{const o=dH(t);r={x:e.x-o.x,y:e.y-o.y,width:e.width,height:e.height}}return im(r)}function hH(t,e){const n=xc(t);return n===e||!yn(n)||qu(n)?!1:mi(n).position==="fixed"||hH(n,e)}function rge(t,e){const n=e.get(t);if(n)return n;let r=nc(t,[],!1).filter(a=>yn(a)&&Fm(a)!=="body"),o=null;const s=mi(t).position==="fixed";let i=s?xc(t):t;for(;yn(i)&&!qu(i);){const a=mi(i),l=sP(i);!l&&a.position==="fixed"&&(o=null),(s?!l&&!o:!l&&a.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||Iv(i)&&!l&&hH(t,i))?r=r.filter(u=>u!==i):o=a,i=xc(i)}return e.set(t,r),r}function oge(t){let{element:e,boundary:n,rootBoundary:r,strategy:o}=t;const i=[...n==="clippingAncestors"?ZC(e)?[]:rge(e,this._c):[].concat(n),r],a=i[0],l=i.reduce((c,u)=>{const f=CO(e,u,o);return c.top=lo(f.top,c.top),c.right=ta(f.right,c.right),c.bottom=ta(f.bottom,c.bottom),c.left=lo(f.left,c.left),c},CO(e,a,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function sge(t){const{width:e,height:n}=uH(t);return{width:e,height:n}}function ige(t,e,n){const r=Is(e),o=al(e),s=n==="fixed",i=Nf(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=qa(0);if(r||!r&&!s)if((Fm(e)!=="body"||Iv(o))&&(a=tE(e)),r){const h=Nf(e,!0,s,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else o&&(l.x=aP(o));const c=o&&!r&&!s?fH(o,a):qa(0),u=i.left+a.scrollLeft-l.x-c.x,f=i.top+a.scrollTop-l.y-c.y;return{x:u,y:f,width:i.width,height:i.height}}function Ak(t){return mi(t).position==="static"}function EO(t,e){if(!Is(t)||mi(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return al(t)===n&&(n=n.ownerDocument.body),n}function pH(t,e){const n=Zo(t);if(ZC(t))return n;if(!Is(t)){let o=xc(t);for(;o&&!qu(o);){if(yn(o)&&!Ak(o))return o;o=xc(o)}return n}let r=EO(t,e);for(;r&&Kme(r)&&Ak(r);)r=EO(r,e);return r&&qu(r)&&Ak(r)&&!sP(r)?n:r||Yme(t)||n}const age=async function(t){const e=this.getOffsetParent||pH,n=this.getDimensions,r=await n(t.floating);return{reference:ige(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function lge(t){return mi(t).direction==="rtl"}const cge={convertOffsetParentRelativeRectToViewportRelativeRect:Jme,getDocumentElement:al,getClippingRect:oge,getOffsetParent:pH,getElementRects:age,getClientRects:Zme,getDimensions:sge,getScale:Ip,isElement:yn,isRTL:lge};function mH(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function uge(t,e){let n=null,r;const o=al(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function i(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:f,width:h,height:p}=c;if(a||e(),!h||!p)return;const m=e0(f),y=e0(o.clientWidth-(u+h)),x=e0(o.clientHeight-(f+p)),b=e0(u),E={rootMargin:-m+"px "+-y+"px "+-x+"px "+-b+"px",threshold:lo(0,ta(1,l))||1};let R=!0;function D(O){const T=O[0].intersectionRatio;if(T!==l){if(!R)return i();T?i(!1,T):r=setTimeout(()=>{i(!1,1e-7)},1e3)}T===1&&!mH(c,t.getBoundingClientRect())&&i(),R=!1}try{n=new IntersectionObserver(D,{...E,root:o.ownerDocument})}catch{n=new IntersectionObserver(D,E)}n.observe(t)}return i(!0),s}function gH(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=iP(t),u=o||s?[...c?nc(c):[],...nc(e)]:[];u.forEach(b=>{o&&b.addEventListener("scroll",n,{passive:!0}),s&&b.addEventListener("resize",n)});const f=c&&a?uge(c,n):null;let h=-1,p=null;i&&(p=new ResizeObserver(b=>{let[C]=b;C&&C.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var E;(E=p)==null||E.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let m,y=l?Nf(t):null;l&&x();function x(){const b=Nf(t);y&&!mH(y,b)&&n(),y=b,m=requestAnimationFrame(x)}return n(),()=>{var b;u.forEach(C=>{o&&C.removeEventListener("scroll",n),s&&C.removeEventListener("resize",n)}),f==null||f(),(b=p)==null||b.disconnect(),p=null,l&&cancelAnimationFrame(m)}}const dge=zme,fge=Wme,hge=$me,pge=qme,mge=Bme,kO=Vme,gge=Ume,yge=Gme,vge=(t,e,n)=>{const r=new Map,o={platform:cge,...n},s={...o.platform,_c:r};return jme(t,e,{...o,platform:s})};var cb=typeof document<"u"?g.useLayoutEffect:g.useEffect;function Cx(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,o;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Cx(t[r],e[r]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,o[r]))return!1;for(r=n;r--!==0;){const s=o[r];if(!(s==="_owner"&&t.$$typeof)&&!Cx(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function yH(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function SO(t,e){const n=yH(t);return Math.round(e*n)/n}function Pk(t){const e=g.useRef(t);return cb(()=>{e.current=t}),e}function vH(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:s,floating:i}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,f]=g.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,p]=g.useState(r);Cx(h,r)||p(r);const[m,y]=g.useState(null),[x,b]=g.useState(null),C=g.useCallback(H=>{H!==O.current&&(O.current=H,y(H))},[]),E=g.useCallback(H=>{H!==T.current&&(T.current=H,b(H))},[]),R=s||m,D=i||x,O=g.useRef(null),T=g.useRef(null),I=g.useRef(u),P=l!=null,L=Pk(l),$=Pk(o),F=Pk(c),V=g.useCallback(()=>{if(!O.current||!T.current)return;const H={placement:e,strategy:n,middleware:h};$.current&&(H.platform=$.current),vge(O.current,T.current,H).then(Y=>{const ue={...Y,isPositioned:F.current!==!1};be.current&&!Cx(I.current,ue)&&(I.current=ue,yo.flushSync(()=>{f(ue)}))})},[h,e,n,$,F]);cb(()=>{c===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,f(H=>({...H,isPositioned:!1})))},[c]);const be=g.useRef(!1);cb(()=>(be.current=!0,()=>{be.current=!1}),[]),cb(()=>{if(R&&(O.current=R),D&&(T.current=D),R&&D){if(L.current)return L.current(R,D,V);V()}},[R,D,V,L,P]);const ge=g.useMemo(()=>({reference:O,floating:T,setReference:C,setFloating:E}),[C,E]),le=g.useMemo(()=>({reference:R,floating:D}),[R,D]),Q=g.useMemo(()=>{const H={position:n,left:0,top:0};if(!le.floating)return H;const Y=SO(le.floating,u.x),ue=SO(le.floating,u.y);return a?{...H,transform:"translate("+Y+"px, "+ue+"px)",...yH(le.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Y,top:ue}},[n,a,le.floating,u.x,u.y]);return g.useMemo(()=>({...u,update:V,refs:ge,elements:le,floatingStyles:Q}),[u,V,ge,le,Q])}const wge=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:o}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?kO({element:r.current,padding:o}).fn(n):{}:r?kO({element:r,padding:o}).fn(n):{}}}},Tc=(t,e)=>({...dge(t),options:[t,e]}),Um=(t,e)=>({...fge(t),options:[t,e]}),ZN=(t,e)=>({...yge(t),options:[t,e]}),Ja=(t,e)=>({...hge(t),options:[t,e]}),Rv=(t,e)=>({...pge(t),options:[t,e]}),bge=(t,e)=>({...mge(t),options:[t,e]}),Py=(t,e)=>({...gge(t),options:[t,e]}),lP=(t,e)=>({...wge(t),options:[t,e]});var xge="Arrow",wH=g.forwardRef((t,e)=>{const{children:n,width:r=10,height:o=5,...s}=t;return d.jsx(et.svg,{...s,ref:e,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:d.jsx("polygon",{points:"0,0 30,0 15,10"})})});wH.displayName=xge;var _ge=wH;function nE(t){const[e,n]=g.useState(void 0);return Lr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const s=o[0];let i,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;i=c.inlineSize,a=c.blockSize}else i=t.offsetWidth,a=t.offsetHeight;n({width:i,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var cP="Popper",[bH,Hm]=Lo(cP),[Cge,xH]=bH(cP),_H=t=>{const{__scopePopper:e,children:n}=t,[r,o]=g.useState(null);return d.jsx(Cge,{scope:e,anchor:r,onAnchorChange:o,children:n})};_H.displayName=cP;var CH="PopperAnchor",EH=g.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...o}=t,s=xH(CH,n),i=g.useRef(null),a=bt(e,i);return g.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:d.jsx(et.div,{...o,ref:a})});EH.displayName=CH;var uP="PopperContent",[Ege,kge]=bH(uP),kH=g.forwardRef((t,e)=>{var ve,Te,xe,ae,Ie,Re;const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:s="center",alignOffset:i=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:m,...y}=t,x=xH(uP,n),[b,C]=g.useState(null),E=bt(e,at=>C(at)),[R,D]=g.useState(null),O=nE(R),T=(O==null?void 0:O.width)??0,I=(O==null?void 0:O.height)??0,P=r+(s!=="center"?"-"+s:""),L=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},$=Array.isArray(c)?c:[c],F=$.length>0,V={padding:L,boundary:$.filter(Tge),altBoundary:F},{refs:be,floatingStyles:ge,placement:le,isPositioned:Q,middlewareData:H}=vH({strategy:"fixed",placement:P,whileElementsMounted:(...at)=>gH(...at,{animationFrame:p==="always"}),elements:{reference:x.anchor},middleware:[Tc({mainAxis:o+I,alignmentAxis:i}),l&&Um({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?ZN():void 0,...V}),l&&Ja({...V}),Rv({...V,apply:({elements:at,rects:Nt,availableWidth:Ft,availableHeight:Gn})=>{const{width:kr,height:rs}=Nt.reference,Jt=at.floating.style;Jt.setProperty("--radix-popper-available-width",`${Ft}px`),Jt.setProperty("--radix-popper-available-height",`${Gn}px`),Jt.setProperty("--radix-popper-anchor-width",`${kr}px`),Jt.setProperty("--radix-popper-anchor-height",`${rs}px`)}}),R&&lP({element:R,padding:a}),Nge({arrowWidth:T,arrowHeight:I}),h&&bge({strategy:"referenceHidden",...V})]}),[Y,ue]=NH(le),W=Xn(m);Lr(()=>{Q&&(W==null||W())},[Q,W]);const G=(ve=H.arrow)==null?void 0:ve.x,ie=(Te=H.arrow)==null?void 0:Te.y,ye=((xe=H.arrow)==null?void 0:xe.centerOffset)!==0,[he,we]=g.useState();return Lr(()=>{b&&we(window.getComputedStyle(b).zIndex)},[b]),d.jsx("div",{ref:be.setFloating,"data-radix-popper-content-wrapper":"",style:{...ge,transform:Q?ge.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:he,"--radix-popper-transform-origin":[(ae=H.transformOrigin)==null?void 0:ae.x,(Ie=H.transformOrigin)==null?void 0:Ie.y].join(" "),...((Re=H.hide)==null?void 0:Re.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:d.jsx(Ege,{scope:n,placedSide:Y,onArrowChange:D,arrowX:G,arrowY:ie,shouldHideArrow:ye,children:d.jsx(et.div,{"data-side":Y,"data-align":ue,...y,ref:E,style:{...y.style,animation:Q?void 0:"none"}})})})});kH.displayName=uP;var SH="PopperArrow",Sge={top:"bottom",right:"left",bottom:"top",left:"right"},TH=g.forwardRef(function(e,n){const{__scopePopper:r,...o}=e,s=kge(SH,r),i=Sge[s.placedSide];return d.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:d.jsx(_ge,{...o,ref:n,style:{...o.style,display:"block"}})})});TH.displayName=SH;function Tge(t){return t!==null}var Nge=t=>({name:"transformOrigin",options:t,fn(e){var x,b,C;const{placement:n,rects:r,middlewareData:o}=e,i=((x=o.arrow)==null?void 0:x.centerOffset)!==0,a=i?0:t.arrowWidth,l=i?0:t.arrowHeight,[c,u]=NH(n),f={start:"0%",center:"50%",end:"100%"}[u],h=(((b=o.arrow)==null?void 0:b.x)??0)+a/2,p=(((C=o.arrow)==null?void 0:C.y)??0)+l/2;let m="",y="";return c==="bottom"?(m=i?f:`${h}px`,y=`${-l}px`):c==="top"?(m=i?f:`${h}px`,y=`${r.floating.height+l}px`):c==="right"?(m=`${-l}px`,y=i?f:`${p}px`):c==="left"&&(m=`${r.floating.width+l}px`,y=i?f:`${p}px`),{data:{x:m,y}}}});function NH(t){const[e,n="center"]=t.split("-");return[e,n]}var rE=_H,oE=EH,dP=kH,fP=TH,Ige="Portal",Av=g.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[o,s]=g.useState(!1);Lr(()=>s(!0),[]);const i=n||o&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return i?fv.createPortal(d.jsx(et.div,{...r,ref:e}),i):null});Av.displayName=Ige;function Rge(t,e){return g.useReducer((n,r)=>e[n][r]??n,t)}var Qr=t=>{const{present:e,children:n}=t,r=Age(e),o=typeof n=="function"?n({present:r.isPresent}):g.Children.only(n),s=bt(r.ref,Pge(o));return typeof n=="function"||r.isPresent?g.cloneElement(o,{ref:s}):null};Qr.displayName="Presence";function Age(t){const[e,n]=g.useState(),r=g.useRef({}),o=g.useRef(t),s=g.useRef("none"),i=t?"mounted":"unmounted",[a,l]=Rge(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const c=t0(r.current);s.current=a==="mounted"?c:"none"},[a]),Lr(()=>{const c=r.current,u=o.current;if(u!==t){const h=s.current,p=t0(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==p?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,l]),Lr(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,f=p=>{const y=t0(r.current).includes(p.animationName);if(p.target===e&&y&&(l("ANIMATION_END"),!o.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},h=p=>{p.target===e&&(s.current=t0(r.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:g.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function t0(t){return(t==null?void 0:t.animationName)||"none"}function Pge(t){var r,o;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Mk="rovingFocusGroup.onEntryFocus",Mge={bubbles:!1,cancelable:!0},sE="RovingFocusGroup",[eI,IH,Dge]=eP(sE),[Oge,zm]=Lo(sE,[Dge]),[Lge,jge]=Oge(sE),RH=g.forwardRef((t,e)=>d.jsx(eI.Provider,{scope:t.__scopeRovingFocusGroup,children:d.jsx(eI.Slot,{scope:t.__scopeRovingFocusGroup,children:d.jsx(Vge,{...t,ref:e})})}));RH.displayName=sE;var Vge=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:s,currentTabStopId:i,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...f}=t,h=g.useRef(null),p=bt(e,h),m=$m(s),[y=null,x]=ea({prop:i,defaultProp:a,onChange:l}),[b,C]=g.useState(!1),E=Xn(c),R=IH(n),D=g.useRef(!1),[O,T]=g.useState(0);return g.useEffect(()=>{const I=h.current;if(I)return I.addEventListener(Mk,E),()=>I.removeEventListener(Mk,E)},[E]),d.jsx(Lge,{scope:n,orientation:r,dir:m,loop:o,currentTabStopId:y,onItemFocus:g.useCallback(I=>x(I),[x]),onItemShiftTab:g.useCallback(()=>C(!0),[]),onFocusableItemAdd:g.useCallback(()=>T(I=>I+1),[]),onFocusableItemRemove:g.useCallback(()=>T(I=>I-1),[]),children:d.jsx(et.div,{tabIndex:b||O===0?-1:0,"data-orientation":r,...f,ref:p,style:{outline:"none",...t.style},onMouseDown:ze(t.onMouseDown,()=>{D.current=!0}),onFocus:ze(t.onFocus,I=>{const P=!D.current;if(I.target===I.currentTarget&&P&&!b){const L=new CustomEvent(Mk,Mge);if(I.currentTarget.dispatchEvent(L),!L.defaultPrevented){const $=R().filter(le=>le.focusable),F=$.find(le=>le.active),V=$.find(le=>le.id===y),ge=[F,V,...$].filter(Boolean).map(le=>le.ref.current);MH(ge,u)}}D.current=!1}),onBlur:ze(t.onBlur,()=>C(!1))})})}),AH="RovingFocusGroupItem",PH=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:s,...i}=t,a=_s(),l=s||a,c=jge(AH,n),u=c.currentTabStopId===l,f=IH(n),{onFocusableItemAdd:h,onFocusableItemRemove:p}=c;return g.useEffect(()=>{if(r)return h(),()=>p()},[r,h,p]),d.jsx(eI.ItemSlot,{scope:n,id:l,focusable:r,active:o,children:d.jsx(et.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...i,ref:e,onMouseDown:ze(t.onMouseDown,m=>{r?c.onItemFocus(l):m.preventDefault()}),onFocus:ze(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:ze(t.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){c.onItemShiftTab();return}if(m.target!==m.currentTarget)return;const y=Fge(m,c.orientation,c.dir);if(y!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let b=f().filter(C=>C.focusable).map(C=>C.ref.current);if(y==="last")b.reverse();else if(y==="prev"||y==="next"){y==="prev"&&b.reverse();const C=b.indexOf(m.currentTarget);b=c.loop?Uge(b,C+1):b.slice(C+1)}setTimeout(()=>MH(b))}})})})});PH.displayName=AH;var $ge={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Bge(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Fge(t,e,n){const r=Bge(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return $ge[r]}function MH(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Uge(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var hP=RH,pP=PH,Hge=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Mh=new WeakMap,n0=new WeakMap,r0={},Dk=0,DH=function(t){return t&&(t.host||DH(t.parentNode))},zge=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=DH(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Wge=function(t,e,n,r){var o=zge(e,Array.isArray(t)?t:[t]);r0[n]||(r0[n]=new WeakMap);var s=r0[n],i=[],a=new Set,l=new Set(o),c=function(f){!f||a.has(f)||(a.add(f),c(f.parentNode))};o.forEach(c);var u=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(h){if(a.has(h))u(h);else try{var p=h.getAttribute(r),m=p!==null&&p!=="false",y=(Mh.get(h)||0)+1,x=(s.get(h)||0)+1;Mh.set(h,y),s.set(h,x),i.push(h),y===1&&m&&n0.set(h,!0),x===1&&h.setAttribute(n,"true"),m||h.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",h,b)}})};return u(e),a.clear(),Dk++,function(){i.forEach(function(f){var h=Mh.get(f)-1,p=s.get(f)-1;Mh.set(f,h),s.set(f,p),h||(n0.has(f)||f.removeAttribute(r),n0.delete(f)),p||f.removeAttribute(n)}),Dk--,Dk||(Mh=new WeakMap,Mh=new WeakMap,n0=new WeakMap,r0={})}},Pv=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),o=Hge(t);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live]"))),Wge(r,o,n,"aria-hidden")):function(){return null}},My="right-scroll-bar-position",Dy="width-before-scroll-bar",Gge="with-scroll-bars-hidden",qge="--removed-body-scroll-bar-size";function Ok(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Kge(t,e){var n=g.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=e,n.facade}var Yge=typeof window<"u"?g.useLayoutEffect:g.useEffect,TO=new WeakMap;function OH(t,e){var n=Kge(null,function(r){return t.forEach(function(o){return Ok(o,r)})});return Yge(function(){var r=TO.get(n);if(r){var o=new Set(r),s=new Set(t),i=n.current;o.forEach(function(a){s.has(a)||Ok(a,null)}),s.forEach(function(a){o.has(a)||Ok(a,i)})}TO.set(n,t)},[t]),n}function Qge(t){return t}function Xge(t,e){e===void 0&&(e=Qge);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var i=e(s,r);return n.push(i),function(){n=n.filter(function(a){return a!==i})}},assignSyncMedium:function(s){for(r=!0;n.length;){var i=n;n=[],i.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var i=[];if(n.length){var a=n;n=[],a.forEach(s),i=n}var l=function(){var u=i;i=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){i.push(u),c()},filter:function(u){return i=i.filter(u),n}}}};return o}function LH(t){t===void 0&&(t={});var e=Xge(null);return e.options=co({async:!0,ssr:!1},t),e}var jH=function(t){var e=t.sideCar,n=Mm(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return g.createElement(r,co({},n))};jH.isSideCarExport=!0;function VH(t,e){return t.useMedium(e),jH}var $H=LH(),Lk=function(){},iE=g.forwardRef(function(t,e){var n=g.useRef(null),r=g.useState({onScrollCapture:Lk,onWheelCapture:Lk,onTouchMoveCapture:Lk}),o=r[0],s=r[1],i=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,f=t.shards,h=t.sideCar,p=t.noIsolation,m=t.inert,y=t.allowPinchZoom,x=t.as,b=x===void 0?"div":x,C=t.gapMode,E=Mm(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=h,D=OH([n,e]),O=co(co({},E),o);return g.createElement(g.Fragment,null,u&&g.createElement(R,{sideCar:$H,removeScrollBar:c,shards:f,noIsolation:p,inert:m,setCallbacks:s,allowPinchZoom:!!y,lockRef:n,gapMode:C}),i?g.cloneElement(g.Children.only(a),co(co({},O),{ref:D})):g.createElement(b,co({},O,{className:l,ref:D}),a))});iE.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};iE.classNames={fullWidth:Dy,zeroRight:My};var Jge=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Zge(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Jge();return e&&t.setAttribute("nonce",e),t}function eye(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function tye(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var nye=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Zge())&&(eye(e,n),tye(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},rye=function(){var t=nye();return function(e,n){g.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},mP=function(){var t=rye(),e=function(n){var r=n.styles,o=n.dynamic;return t(r,o),null};return e},oye={left:0,top:0,right:0,gap:0},jk=function(t){return parseInt(t||"",10)||0},sye=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],o=e[t==="padding"?"paddingRight":"marginRight"];return[jk(n),jk(r),jk(o)]},iye=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return oye;var e=sye(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},aye=mP(),Rp="data-scroll-locked",lye=function(t,e,n,r){var o=t.left,s=t.top,i=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Gge,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Rp,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(My,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Dy,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(My," .").concat(My,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Dy," .").concat(Dy,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Rp,`] {
    `).concat(qge,": ").concat(a,`px;
  }
`)},NO=function(){var t=parseInt(document.body.getAttribute(Rp)||"0",10);return isFinite(t)?t:0},cye=function(){g.useEffect(function(){return document.body.setAttribute(Rp,(NO()+1).toString()),function(){var t=NO()-1;t<=0?document.body.removeAttribute(Rp):document.body.setAttribute(Rp,t.toString())}},[])},BH=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,o=r===void 0?"margin":r;cye();var s=g.useMemo(function(){return iye(o)},[o]);return g.createElement(aye,{styles:lye(s,!e,o,n?"":"!important")})},tI=!1;if(typeof window<"u")try{var o0=Object.defineProperty({},"passive",{get:function(){return tI=!0,!0}});window.addEventListener("test",o0,o0),window.removeEventListener("test",o0,o0)}catch{tI=!1}var Dh=tI?{passive:!1}:!1,uye=function(t){return t.tagName==="TEXTAREA"},FH=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!uye(t)&&n[e]==="visible")},dye=function(t){return FH(t,"overflowY")},fye=function(t){return FH(t,"overflowX")},IO=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=UH(t,r);if(o){var s=HH(t,r),i=s[1],a=s[2];if(i>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},hye=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},pye=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},UH=function(t,e){return t==="v"?dye(e):fye(e)},HH=function(t,e){return t==="v"?hye(e):pye(e)},mye=function(t,e){return t==="h"&&e==="rtl"?-1:1},gye=function(t,e,n,r,o){var s=mye(t,window.getComputedStyle(e).direction),i=s*r,a=n.target,l=e.contains(a),c=!1,u=i>0,f=0,h=0;do{var p=HH(t,a),m=p[0],y=p[1],x=p[2],b=y-x-s*m;(m||b)&&UH(t,a)&&(f+=b,h+=m),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(f)<1||!u&&Math.abs(h)<1)&&(c=!0),c},s0=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},RO=function(t){return[t.deltaX,t.deltaY]},AO=function(t){return t&&"current"in t?t.current:t},yye=function(t,e){return t[0]===e[0]&&t[1]===e[1]},vye=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},wye=0,Oh=[];function bye(t){var e=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),o=g.useState(wye++)[0],s=g.useState(mP)[0],i=g.useRef(t);g.useEffect(function(){i.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var y=gB([t.lockRef.current],(t.shards||[]).map(AO),!0).filter(Boolean);return y.forEach(function(x){return x.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),y.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var a=g.useCallback(function(y,x){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!i.current.allowPinchZoom;var b=s0(y),C=n.current,E="deltaX"in y?y.deltaX:C[0]-b[0],R="deltaY"in y?y.deltaY:C[1]-b[1],D,O=y.target,T=Math.abs(E)>Math.abs(R)?"h":"v";if("touches"in y&&T==="h"&&O.type==="range")return!1;var I=IO(T,O);if(!I)return!0;if(I?D=T:(D=T==="v"?"h":"v",I=IO(T,O)),!I)return!1;if(!r.current&&"changedTouches"in y&&(E||R)&&(r.current=D),!D)return!0;var P=r.current||D;return gye(P,x,y,P==="h"?E:R)},[]),l=g.useCallback(function(y){var x=y;if(!(!Oh.length||Oh[Oh.length-1]!==s)){var b="deltaY"in x?RO(x):s0(x),C=e.current.filter(function(D){return D.name===x.type&&(D.target===x.target||x.target===D.shadowParent)&&yye(D.delta,b)})[0];if(C&&C.should){x.cancelable&&x.preventDefault();return}if(!C){var E=(i.current.shards||[]).map(AO).filter(Boolean).filter(function(D){return D.contains(x.target)}),R=E.length>0?a(x,E[0]):!i.current.noIsolation;R&&x.cancelable&&x.preventDefault()}}},[]),c=g.useCallback(function(y,x,b,C){var E={name:y,delta:x,target:b,should:C,shadowParent:xye(b)};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(R){return R!==E})},1)},[]),u=g.useCallback(function(y){n.current=s0(y),r.current=void 0},[]),f=g.useCallback(function(y){c(y.type,RO(y),y.target,a(y,t.lockRef.current))},[]),h=g.useCallback(function(y){c(y.type,s0(y),y.target,a(y,t.lockRef.current))},[]);g.useEffect(function(){return Oh.push(s),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Dh),document.addEventListener("touchmove",l,Dh),document.addEventListener("touchstart",u,Dh),function(){Oh=Oh.filter(function(y){return y!==s}),document.removeEventListener("wheel",l,Dh),document.removeEventListener("touchmove",l,Dh),document.removeEventListener("touchstart",u,Dh)}},[]);var p=t.removeScrollBar,m=t.inert;return g.createElement(g.Fragment,null,m?g.createElement(s,{styles:vye(o)}):null,p?g.createElement(BH,{gapMode:t.gapMode}):null)}function xye(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const _ye=VH($H,bye);var Mv=g.forwardRef(function(t,e){return g.createElement(iE,co({},t,{ref:e,sideCar:_ye}))});Mv.classNames=iE.classNames;var nI=["Enter"," "],Cye=["ArrowDown","PageUp","Home"],zH=["ArrowUp","PageDown","End"],Eye=[...Cye,...zH],kye={ltr:[...nI,"ArrowRight"],rtl:[...nI,"ArrowLeft"]},Sye={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Dv="Menu",[_1,Tye,Nye]=eP(Dv),[Jf,WH]=Lo(Dv,[Nye,Hm,zm]),Ov=Hm(),GH=zm(),[qH,cd]=Jf(Dv),[Iye,Lv]=Jf(Dv),KH=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:o,onOpenChange:s,modal:i=!0}=t,a=Ov(e),[l,c]=g.useState(null),u=g.useRef(!1),f=Xn(s),h=$m(o);return g.useEffect(()=>{const p=()=>{u.current=!0,document.addEventListener("pointerdown",m,{capture:!0,once:!0}),document.addEventListener("pointermove",m,{capture:!0,once:!0})},m=()=>u.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",m,{capture:!0}),document.removeEventListener("pointermove",m,{capture:!0})}},[]),d.jsx(rE,{...a,children:d.jsx(qH,{scope:e,open:n,onOpenChange:f,content:l,onContentChange:c,children:d.jsx(Iye,{scope:e,onClose:g.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:u,dir:h,modal:i,children:r})})})};KH.displayName=Dv;var Rye="MenuAnchor",gP=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,o=Ov(n);return d.jsx(oE,{...o,...r,ref:e})});gP.displayName=Rye;var yP="MenuPortal",[Aye,YH]=Jf(yP,{forceMount:void 0}),QH=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:o}=t,s=cd(yP,e);return d.jsx(Aye,{scope:e,forceMount:n,children:d.jsx(Qr,{present:n||s.open,children:d.jsx(Av,{asChild:!0,container:o,children:r})})})};QH.displayName=yP;var li="MenuContent",[Pye,vP]=Jf(li),XH=g.forwardRef((t,e)=>{const n=YH(li,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,s=cd(li,t.__scopeMenu),i=Lv(li,t.__scopeMenu);return d.jsx(_1.Provider,{scope:t.__scopeMenu,children:d.jsx(Qr,{present:r||s.open,children:d.jsx(_1.Slot,{scope:t.__scopeMenu,children:i.modal?d.jsx(Mye,{...o,ref:e}):d.jsx(Dye,{...o,ref:e})})})})}),Mye=g.forwardRef((t,e)=>{const n=cd(li,t.__scopeMenu),r=g.useRef(null),o=bt(e,r);return g.useEffect(()=>{const s=r.current;if(s)return Pv(s)},[]),d.jsx(wP,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ze(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Dye=g.forwardRef((t,e)=>{const n=cd(li,t.__scopeMenu);return d.jsx(wP,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),wP=g.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:h,onDismiss:p,disableOutsideScroll:m,...y}=t,x=cd(li,n),b=Lv(li,n),C=Ov(n),E=GH(n),R=Tye(n),[D,O]=g.useState(null),T=g.useRef(null),I=bt(e,T,x.onContentChange),P=g.useRef(0),L=g.useRef(""),$=g.useRef(0),F=g.useRef(null),V=g.useRef("right"),be=g.useRef(0),ge=m?Mv:g.Fragment,le=m?{as:pc,allowPinchZoom:!0}:void 0,Q=Y=>{var ve,Te;const ue=L.current+Y,W=R().filter(xe=>!xe.disabled),G=document.activeElement,ie=(ve=W.find(xe=>xe.ref.current===G))==null?void 0:ve.textValue,ye=W.map(xe=>xe.textValue),he=Gye(ye,ue,ie),we=(Te=W.find(xe=>xe.textValue===he))==null?void 0:Te.ref.current;(function xe(ae){L.current=ae,window.clearTimeout(P.current),ae!==""&&(P.current=window.setTimeout(()=>xe(""),1e3))})(ue),we&&setTimeout(()=>we.focus())};g.useEffect(()=>()=>window.clearTimeout(P.current),[]),XC();const H=g.useCallback(Y=>{var W,G;return V.current===((W=F.current)==null?void 0:W.side)&&Kye(Y,(G=F.current)==null?void 0:G.area)},[]);return d.jsx(Pye,{scope:n,searchRef:L,onItemEnter:g.useCallback(Y=>{H(Y)&&Y.preventDefault()},[H]),onItemLeave:g.useCallback(Y=>{var ue;H(Y)||((ue=T.current)==null||ue.focus(),O(null))},[H]),onTriggerLeave:g.useCallback(Y=>{H(Y)&&Y.preventDefault()},[H]),pointerGraceTimerRef:$,onPointerGraceIntentChange:g.useCallback(Y=>{F.current=Y},[]),children:d.jsx(ge,{...le,children:d.jsx(Nv,{asChild:!0,trapped:o,onMountAutoFocus:ze(s,Y=>{var ue;Y.preventDefault(),(ue=T.current)==null||ue.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:d.jsx(Tv,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:h,onDismiss:p,children:d.jsx(hP,{asChild:!0,...E,dir:b.dir,orientation:"vertical",loop:r,currentTabStopId:D,onCurrentTabStopIdChange:O,onEntryFocus:ze(l,Y=>{b.isUsingKeyboardRef.current||Y.preventDefault()}),preventScrollOnEntryFocus:!0,children:d.jsx(dP,{role:"menu","aria-orientation":"vertical","data-state":pz(x.open),"data-radix-menu-content":"",dir:b.dir,...C,...y,ref:I,style:{outline:"none",...y.style},onKeyDown:ze(y.onKeyDown,Y=>{const W=Y.target.closest("[data-radix-menu-content]")===Y.currentTarget,G=Y.ctrlKey||Y.altKey||Y.metaKey,ie=Y.key.length===1;W&&(Y.key==="Tab"&&Y.preventDefault(),!G&&ie&&Q(Y.key));const ye=T.current;if(Y.target!==ye||!Eye.includes(Y.key))return;Y.preventDefault();const we=R().filter(ve=>!ve.disabled).map(ve=>ve.ref.current);zH.includes(Y.key)&&we.reverse(),zye(we)}),onBlur:ze(t.onBlur,Y=>{Y.currentTarget.contains(Y.target)||(window.clearTimeout(P.current),L.current="")}),onPointerMove:ze(t.onPointerMove,C1(Y=>{const ue=Y.target,W=be.current!==Y.clientX;if(Y.currentTarget.contains(ue)&&W){const G=Y.clientX>be.current?"right":"left";V.current=G,be.current=Y.clientX}}))})})})})})})});XH.displayName=li;var Oye="MenuGroup",bP=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return d.jsx(et.div,{role:"group",...r,ref:e})});bP.displayName=Oye;var Lye="MenuLabel",JH=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return d.jsx(et.div,{...r,ref:e})});JH.displayName=Lye;var Ex="MenuItem",PO="menu.itemSelect",aE=g.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...o}=t,s=g.useRef(null),i=Lv(Ex,t.__scopeMenu),a=vP(Ex,t.__scopeMenu),l=bt(e,s),c=g.useRef(!1),u=()=>{const f=s.current;if(!n&&f){const h=new CustomEvent(PO,{bubbles:!0,cancelable:!0});f.addEventListener(PO,p=>r==null?void 0:r(p),{once:!0}),KU(f,h),h.defaultPrevented?c.current=!1:i.onClose()}};return d.jsx(ZH,{...o,ref:l,disabled:n,onClick:ze(t.onClick,u),onPointerDown:f=>{var h;(h=t.onPointerDown)==null||h.call(t,f),c.current=!0},onPointerUp:ze(t.onPointerUp,f=>{var h;c.current||(h=f.currentTarget)==null||h.click()}),onKeyDown:ze(t.onKeyDown,f=>{const h=a.searchRef.current!=="";n||h&&f.key===" "||nI.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});aE.displayName=Ex;var ZH=g.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...s}=t,i=vP(Ex,n),a=GH(n),l=g.useRef(null),c=bt(e,l),[u,f]=g.useState(!1),[h,p]=g.useState("");return g.useEffect(()=>{const m=l.current;m&&p((m.textContent??"").trim())},[s.children]),d.jsx(_1.ItemSlot,{scope:n,disabled:r,textValue:o??h,children:d.jsx(pP,{asChild:!0,...a,focusable:!r,children:d.jsx(et.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:c,onPointerMove:ze(t.onPointerMove,C1(m=>{r?i.onItemLeave(m):(i.onItemEnter(m),m.defaultPrevented||m.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ze(t.onPointerLeave,C1(m=>i.onItemLeave(m))),onFocus:ze(t.onFocus,()=>f(!0)),onBlur:ze(t.onBlur,()=>f(!1))})})})}),jye="MenuCheckboxItem",ez=g.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...o}=t;return d.jsx(sz,{scope:t.__scopeMenu,checked:n,children:d.jsx(aE,{role:"menuitemcheckbox","aria-checked":kx(n)?"mixed":n,...o,ref:e,"data-state":CP(n),onSelect:ze(o.onSelect,()=>r==null?void 0:r(kx(n)?!0:!n),{checkForDefaultPrevented:!1})})})});ez.displayName=jye;var tz="MenuRadioGroup",[Vye,$ye]=Jf(tz,{value:void 0,onValueChange:()=>{}}),nz=g.forwardRef((t,e)=>{const{value:n,onValueChange:r,...o}=t,s=Xn(r);return d.jsx(Vye,{scope:t.__scopeMenu,value:n,onValueChange:s,children:d.jsx(bP,{...o,ref:e})})});nz.displayName=tz;var rz="MenuRadioItem",oz=g.forwardRef((t,e)=>{const{value:n,...r}=t,o=$ye(rz,t.__scopeMenu),s=n===o.value;return d.jsx(sz,{scope:t.__scopeMenu,checked:s,children:d.jsx(aE,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":CP(s),onSelect:ze(r.onSelect,()=>{var i;return(i=o.onValueChange)==null?void 0:i.call(o,n)},{checkForDefaultPrevented:!1})})})});oz.displayName=rz;var xP="MenuItemIndicator",[sz,Bye]=Jf(xP,{checked:!1}),iz=g.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...o}=t,s=Bye(xP,n);return d.jsx(Qr,{present:r||kx(s.checked)||s.checked===!0,children:d.jsx(et.span,{...o,ref:e,"data-state":CP(s.checked)})})});iz.displayName=xP;var Fye="MenuSeparator",az=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return d.jsx(et.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});az.displayName=Fye;var Uye="MenuArrow",lz=g.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,o=Ov(n);return d.jsx(fP,{...o,...r,ref:e})});lz.displayName=Uye;var _P="MenuSub",[Hye,cz]=Jf(_P),uz=t=>{const{__scopeMenu:e,children:n,open:r=!1,onOpenChange:o}=t,s=cd(_P,e),i=Ov(e),[a,l]=g.useState(null),[c,u]=g.useState(null),f=Xn(o);return g.useEffect(()=>(s.open===!1&&f(!1),()=>f(!1)),[s.open,f]),d.jsx(rE,{...i,children:d.jsx(qH,{scope:e,open:r,onOpenChange:f,content:c,onContentChange:u,children:d.jsx(Hye,{scope:e,contentId:_s(),triggerId:_s(),trigger:a,onTriggerChange:l,children:n})})})};uz.displayName=_P;var ly="MenuSubTrigger",dz=g.forwardRef((t,e)=>{const n=cd(ly,t.__scopeMenu),r=Lv(ly,t.__scopeMenu),o=cz(ly,t.__scopeMenu),s=vP(ly,t.__scopeMenu),i=g.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},u=g.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return g.useEffect(()=>u,[u]),g.useEffect(()=>{const f=a.current;return()=>{window.clearTimeout(f),l(null)}},[a,l]),d.jsx(gP,{asChild:!0,...c,children:d.jsx(ZH,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":pz(n.open),...t,ref:bC(e,o.onTriggerChange),onClick:f=>{var h;(h=t.onClick)==null||h.call(t,f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ze(t.onPointerMove,C1(f=>{s.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!n.open&&!i.current&&(s.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:ze(t.onPointerLeave,C1(f=>{var p,m;u();const h=(p=n.content)==null?void 0:p.getBoundingClientRect();if(h){const y=(m=n.content)==null?void 0:m.dataset.side,x=y==="right",b=x?-5:5,C=h[x?"left":"right"],E=h[x?"right":"left"];s.onPointerGraceIntentChange({area:[{x:f.clientX+b,y:f.clientY},{x:C,y:h.top},{x:E,y:h.top},{x:E,y:h.bottom},{x:C,y:h.bottom}],side:y}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(f),f.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:ze(t.onKeyDown,f=>{var p;const h=s.searchRef.current!=="";t.disabled||h&&f.key===" "||kye[r.dir].includes(f.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),f.preventDefault())})})})});dz.displayName=ly;var fz="MenuSubContent",hz=g.forwardRef((t,e)=>{const n=YH(li,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,s=cd(li,t.__scopeMenu),i=Lv(li,t.__scopeMenu),a=cz(fz,t.__scopeMenu),l=g.useRef(null),c=bt(e,l);return d.jsx(_1.Provider,{scope:t.__scopeMenu,children:d.jsx(Qr,{present:r||s.open,children:d.jsx(_1.Slot,{scope:t.__scopeMenu,children:d.jsx(wP,{id:a.contentId,"aria-labelledby":a.triggerId,...o,ref:c,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var f;i.isUsingKeyboardRef.current&&((f=l.current)==null||f.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ze(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:ze(t.onEscapeKeyDown,u=>{i.onClose(),u.preventDefault()}),onKeyDown:ze(t.onKeyDown,u=>{var p;const f=u.currentTarget.contains(u.target),h=Sye[i.dir].includes(u.key);f&&h&&(s.onOpenChange(!1),(p=a.trigger)==null||p.focus(),u.preventDefault())})})})})})});hz.displayName=fz;function pz(t){return t?"open":"closed"}function kx(t){return t==="indeterminate"}function CP(t){return kx(t)?"indeterminate":t?"checked":"unchecked"}function zye(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Wye(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function Gye(t,e,n){const o=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let i=Wye(t,Math.max(s,0));o.length===1&&(i=i.filter(c=>c!==n));const l=i.find(c=>c.toLowerCase().startsWith(o.toLowerCase()));return l!==n?l:void 0}function qye(t,e){const{x:n,y:r}=t;let o=!1;for(let s=0,i=e.length-1;s<e.length;i=s++){const a=e[s].x,l=e[s].y,c=e[i].x,u=e[i].y;l>r!=u>r&&n<(c-a)*(r-l)/(u-l)+a&&(o=!o)}return o}function Kye(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return qye(n,e)}function C1(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Yye=KH,Qye=gP,Xye=QH,Jye=XH,Zye=bP,e1e=JH,t1e=aE,n1e=ez,r1e=nz,o1e=oz,s1e=iz,i1e=az,a1e=lz,l1e=uz,c1e=dz,u1e=hz,EP="DropdownMenu",[d1e,OBe]=Lo(EP,[WH]),wo=WH(),[f1e,mz]=d1e(EP),gz=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:o,defaultOpen:s,onOpenChange:i,modal:a=!0}=t,l=wo(e),c=g.useRef(null),[u=!1,f]=ea({prop:o,defaultProp:s,onChange:i});return d.jsx(f1e,{scope:e,triggerId:_s(),triggerRef:c,contentId:_s(),open:u,onOpenChange:f,onOpenToggle:g.useCallback(()=>f(h=>!h),[f]),modal:a,children:d.jsx(Yye,{...l,open:u,onOpenChange:f,dir:r,modal:a,children:n})})};gz.displayName=EP;var yz="DropdownMenuTrigger",vz=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=t,s=mz(yz,n),i=wo(n);return d.jsx(Qye,{asChild:!0,...i,children:d.jsx(et.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:bC(e,s.triggerRef),onPointerDown:ze(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:ze(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});vz.displayName=yz;var h1e="DropdownMenuPortal",wz=t=>{const{__scopeDropdownMenu:e,...n}=t,r=wo(e);return d.jsx(Xye,{...r,...n})};wz.displayName=h1e;var bz="DropdownMenuContent",xz=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=mz(bz,n),s=wo(n),i=g.useRef(!1);return d.jsx(Jye,{id:o.contentId,"aria-labelledby":o.triggerId,...s,...r,ref:e,onCloseAutoFocus:ze(t.onCloseAutoFocus,a=>{var l;i.current||(l=o.triggerRef.current)==null||l.focus(),i.current=!1,a.preventDefault()}),onInteractOutside:ze(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!o.modal||u)&&(i.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});xz.displayName=bz;var p1e="DropdownMenuGroup",m1e=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=wo(n);return d.jsx(Zye,{...o,...r,ref:e})});m1e.displayName=p1e;var g1e="DropdownMenuLabel",_z=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=wo(n);return d.jsx(e1e,{...o,...r,ref:e})});_z.displayName=g1e;var y1e="DropdownMenuItem",Cz=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=wo(n);return d.jsx(t1e,{...o,...r,ref:e})});Cz.displayName=y1e;var v1e="DropdownMenuCheckboxItem",Ez=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=wo(n);return d.jsx(n1e,{...o,...r,ref:e})});Ez.displayName=v1e;var w1e="DropdownMenuRadioGroup",b1e=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=wo(n);return d.jsx(r1e,{...o,...r,ref:e})});b1e.displayName=w1e;var x1e="DropdownMenuRadioItem",kz=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=wo(n);return d.jsx(o1e,{...o,...r,ref:e})});kz.displayName=x1e;var _1e="DropdownMenuItemIndicator",Sz=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=wo(n);return d.jsx(s1e,{...o,...r,ref:e})});Sz.displayName=_1e;var C1e="DropdownMenuSeparator",Tz=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=wo(n);return d.jsx(i1e,{...o,...r,ref:e})});Tz.displayName=C1e;var E1e="DropdownMenuArrow",k1e=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=wo(n);return d.jsx(a1e,{...o,...r,ref:e})});k1e.displayName=E1e;var S1e=t=>{const{__scopeDropdownMenu:e,children:n,open:r,onOpenChange:o,defaultOpen:s}=t,i=wo(e),[a=!1,l]=ea({prop:r,defaultProp:s,onChange:o});return d.jsx(l1e,{...i,open:a,onOpenChange:l,children:n})},T1e="DropdownMenuSubTrigger",Nz=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=wo(n);return d.jsx(c1e,{...o,...r,ref:e})});Nz.displayName=T1e;var N1e="DropdownMenuSubContent",Iz=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=wo(n);return d.jsx(u1e,{...o,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Iz.displayName=N1e;var I1e=gz,R1e=vz,A1e=wz,Rz=xz,Az=_z,Pz=Cz,Mz=Ez,Dz=kz,Oz=Sz,Lz=Tz,P1e=S1e,jz=Nz,Vz=Iz;/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var M1e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1e=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ot=(t,e)=>{const n=g.forwardRef(({color:r="currentColor",size:o=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:a="",children:l,...c},u)=>g.createElement("svg",{ref:u,...M1e,width:o,height:o,stroke:r,strokeWidth:i?Number(s)*24/Number(o):s,className:["lucide",`lucide-${D1e(t)}`,a].join(" "),...c},[...e.map(([f,h])=>g.createElement(f,h)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1e=ot("Apple",[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1e=ot("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=ot("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=ot("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=ot("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=ot("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=ot("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=ot("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SP=ot("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=ot("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1e=ot("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $z=ot("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=ot("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1e=ot("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=ot("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=ot("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1e=ot("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bz=ot("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1e=ot("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1e=ot("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bk=ot("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=ot("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=ot("Heading3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1e=ot("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=ot("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fk=ot("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uk=ot("LayoutList",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1e=ot("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=ot("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=ot("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=ot("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1e=ot("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1e=ot("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fz=ot("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1e=ot("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1e=ot("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1e=ot("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uz=ot("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hz=ot("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1e=ot("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rI=ot("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=ot("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oI=ot("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1e=ot("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=ot("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=ot("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1e=ot("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1e=ot("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1e=ot("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=ot("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),zz=I1e,Wz=R1e,eve=P1e,Gz=g.forwardRef(({className:t,inset:e,children:n,...r},o)=>d.jsxs(jz,{ref:o,className:Ve("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...r,children:[n,d.jsx(cE,{className:"ml-auto"})]}));Gz.displayName=jz.displayName;const qz=g.forwardRef(({className:t,...e},n)=>d.jsx(Vz,{ref:n,className:Ve("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));qz.displayName=Vz.displayName;const TP=g.forwardRef(({className:t,sideOffset:e=4,...n},r)=>d.jsx(A1e,{children:d.jsx(Rz,{ref:r,sideOffset:e,className:Ve("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));TP.displayName=Rz.displayName;const Oa=g.forwardRef(({className:t,inset:e,...n},r)=>d.jsx(Pz,{ref:r,className:Ve("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",e&&"pl-8",t),...n}));Oa.displayName=Pz.displayName;const tve=g.forwardRef(({className:t,children:e,checked:n,...r},o)=>d.jsxs(Mz,{ref:o,className:Ve("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[d.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsx(Oz,{children:d.jsx(jv,{className:"h-4 w-4"})})}),e]}));tve.displayName=Mz.displayName;const nve=g.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(Dz,{ref:r,className:Ve("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[d.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsx(Oz,{children:d.jsx($z,{className:"h-2 w-2 fill-current"})})}),e]}));nve.displayName=Dz.displayName;const Kz=g.forwardRef(({className:t,inset:e,...n},r)=>d.jsx(Az,{ref:r,className:Ve("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));Kz.displayName=Az.displayName;const Sx=g.forwardRef(({className:t,...e},n)=>d.jsx(Lz,{ref:n,className:Ve("-mx-1 my-1 h-px bg-muted",t),...e}));Sx.displayName=Lz.displayName;function rve({darkMode:t,toggleDarkMode:e}){const n=yi(),{user:r}=vi(),o=()=>{var s;return r!=null&&r.displayName?r.displayName.split(" ").map(i=>i[0]).join("").toUpperCase():((s=r==null?void 0:r.email)==null?void 0:s[0].toUpperCase())||"?"};return g.useEffect(()=>{t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]),d.jsx("nav",{className:"hidden md:block fixed top-0 left-0 right-0 bg-background/80 backdrop-blur-sm border-b z-50 h-16",children:d.jsx("div",{className:"container mx-auto px-4 h-full",children:d.jsxs("div",{className:"flex items-center justify-between h-full",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs(Ne,{variant:"ghost",onClick:()=>n("/"),children:[d.jsx(X4,{className:"h-5 w-5"}),d.jsx("span",{className:"ml-2",children:"Home"})]}),r&&d.jsxs(Ne,{variant:"ghost",onClick:()=>n("/notes"),children:[d.jsx(sm,{className:"h-5 w-5"}),d.jsx("span",{className:"ml-2",children:"Notes"})]}),r&&d.jsxs(Ne,{variant:"ghost",onClick:()=>n("/calendar"),children:[d.jsx(Np,{className:"h-5 w-5"}),d.jsx("span",{className:"ml-2",children:"Calendar"})]}),!r&&d.jsx(Ne,{variant:"ghost",asChild:!0,children:d.jsxs(Tu,{to:"/install",children:[d.jsx(Ipe,{className:"h-4 w-4 mr-2"}),"Install App"]})})]}),d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx(Ne,{variant:"ghost",size:"icon",onClick:e,"aria-label":"Toggle dark mode",children:t?d.jsx(qU,{className:"h-5 w-5"}):d.jsx(J4,{className:"h-5 w-5"})}),r?d.jsxs(zz,{children:[d.jsx(Wz,{asChild:!0,children:d.jsx(Ne,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:d.jsxs(KC,{className:"h-8 w-8",children:[d.jsx(YC,{src:r.photoURL||void 0,alt:r.displayName||r.email||"User"}),d.jsx(QC,{children:o()})]})})}),d.jsxs(TP,{className:"w-56",align:"end",forceMount:!0,children:[d.jsx(Kz,{className:"font-normal",children:d.jsxs("div",{className:"flex flex-col space-y-1",children:[d.jsx("p",{className:"text-sm font-medium leading-none",children:r.displayName||"User"}),d.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:r.email})]})}),d.jsx(Sx,{}),d.jsxs(Oa,{onClick:()=>n("/profile"),children:[d.jsx(GU,{className:"mr-2 h-4 w-4"}),d.jsx("span",{children:"Profile"})]}),d.jsxs(Oa,{onClick:()=>n("/notes"),children:[d.jsx(sm,{className:"mr-2 h-4 w-4"}),d.jsx("span",{children:"Notes"})]}),d.jsxs(Oa,{onClick:()=>n("/calendar"),children:[d.jsx(Np,{className:"mr-2 h-4 w-4"}),d.jsx("span",{children:"Calendar"})]}),d.jsx(Sx,{}),d.jsxs(Oa,{onClick:()=>n("/logout"),children:[d.jsx(zU,{className:"mr-2 h-4 w-4"}),d.jsx("span",{children:"Log out"})]})]})]}):d.jsxs(Ne,{variant:"ghost",onClick:()=>n("/auth"),children:[d.jsx(Q4,{className:"h-5 w-5"}),d.jsx("span",{className:"ml-2",children:"Sign In"})]})]})]})})})}function ove({darkMode:t,toggleDarkMode:e}){const[n,r]=g.useState(!1),o=yi(),{user:s}=vi(),i=l=>{o(l),r(!1)},a=()=>{var l;return s!=null&&s.displayName?s.displayName.split(" ").map(c=>c[0]).join("").toUpperCase():((l=s==null?void 0:s.email)==null?void 0:l[0].toUpperCase())||"?"};return g.useEffect(()=>{t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]),d.jsxs("div",{className:"md:hidden fixed bottom-16 right-2 flex flex-col items-end gap-2 z-50",children:[n&&d.jsxs("div",{className:"flex flex-col items-end gap-2 mb-2",children:[d.jsx(Ne,{variant:"default",size:"icon",className:"rounded-full shadow-lg",onClick:e,children:t?d.jsx(qU,{className:"h-5 w-5"}):d.jsx(J4,{className:"h-5 w-5"})}),d.jsx(Ne,{variant:"default",size:"icon",className:"rounded-full shadow-lg",onClick:()=>i("/"),children:d.jsx(X4,{className:"h-5 w-5"})}),s?d.jsxs(d.Fragment,{children:[d.jsx(Ne,{variant:"default",size:"icon",className:"rounded-full shadow-lg",onClick:()=>i("/notes"),children:d.jsx(sm,{className:"h-5 w-5"})}),d.jsx(Ne,{variant:"default",size:"icon",className:"rounded-full shadow-lg",onClick:()=>i("/calendar"),children:d.jsx(Np,{className:"h-5 w-5"})}),d.jsx(Ne,{variant:"default",size:"icon",className:"rounded-full shadow-lg p-0 overflow-hidden",onClick:()=>i("/profile"),children:d.jsxs(KC,{className:"h-full w-full",children:[d.jsx(YC,{src:s.photoURL||void 0,alt:s.displayName||s.email||"User"}),d.jsx(QC,{children:a()})]})}),d.jsx(Ne,{variant:"default",size:"icon",className:"rounded-full shadow-lg",onClick:()=>i("/logout"),children:d.jsx(zU,{className:"h-5 w-5"})})]}):d.jsx(Ne,{variant:"default",size:"icon",className:"rounded-full shadow-lg",onClick:()=>i("/auth"),children:d.jsx(Q4,{className:"h-5 w-5"})})]}),d.jsx(Ne,{variant:"default",size:"icon",className:"h-12 w-12 rounded-full shadow-lg",onClick:()=>r(!n),children:d.jsx(Ape,{className:"h-6 w-6"})})]})}const Pn=g.forwardRef(({className:t,type:e,...n},r)=>d.jsx("input",{type:e,className:Ve("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Pn.displayName="Input";const Zt=g.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:Ve("rounded-xl border bg-card text-card-foreground shadow",t),...e}));Zt.displayName="Card";const rn=g.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:Ve("flex flex-col space-y-1.5 p-6",t),...e}));rn.displayName="CardHeader";const on=g.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:Ve("font-semibold leading-none tracking-tight",t),...e}));on.displayName="CardTitle";const un=g.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:Ve("text-sm text-muted-foreground",t),...e}));un.displayName="CardDescription";const en=g.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:Ve("p-6 pt-0",t),...e}));en.displayName="CardContent";const sve=g.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:Ve("flex items-center p-6 pt-0",t),...e}));sve.displayName="CardFooter";function ive(){const[t,e]=g.useState(""),[n,r]=g.useState(""),[o,s]=g.useState(null),[i,a]=g.useState(!1),{loading:l,user:c}=vi(),u=yi();if(c)return u("/notes"),null;const f=async()=>{try{a(!0),s(null),(await XB(Ut,UU)).user&&u("/notes")}catch(p){console.error("Google login error:",p),s("Failed to sign in with Google. Please try again.")}finally{a(!1)}},h=async p=>{if(p.preventDefault(),!t||!n){s("Please fill in all fields");return}try{a(!0),s(null),(await xle(Ut,t,n)).user&&u("/notes")}catch(m){console.error("Email login error:",m),m.code==="auth/user-not-found"||m.code==="auth/wrong-password"?s("Invalid email or password"):m.code==="auth/invalid-email"?s("Please enter a valid email address"):s("Failed to sign in. Please try again.")}finally{a(!1)}};return l?d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 dark:border-white"})}):d.jsx("div",{className:"container mx-auto max-w-md mt-20 px-4",children:d.jsxs(Zt,{className:"border-2",children:[d.jsxs(rn,{className:"space-y-1",children:[d.jsx(on,{className:"text-2xl text-center",children:"Welcome Back"}),d.jsx(un,{className:"text-center",children:"Sign in to access your notes"})]}),d.jsxs(en,{className:"space-y-4",children:[o&&d.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:d.jsx("span",{className:"block sm:inline",children:o})}),d.jsxs(Ne,{className:"w-full flex items-center justify-center gap-2",variant:"outline",onClick:f,disabled:i,children:[d.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[d.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),d.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),d.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),d.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 flex items-center",children:d.jsx("span",{className:"w-full border-t"})}),d.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:d.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with email"})})]}),d.jsxs("form",{onSubmit:h,className:"space-y-4",children:[d.jsx("div",{className:"space-y-2",children:d.jsx(Pn,{type:"email",placeholder:"Email",value:t,onChange:p=>e(p.target.value),disabled:i,className:"bg-background"})}),d.jsx("div",{className:"space-y-2",children:d.jsx(Pn,{type:"password",placeholder:"Password",value:n,onChange:p=>r(p.target.value),disabled:i,className:"bg-background"})}),d.jsx(Ne,{type:"submit",className:"w-full",disabled:i,children:i?d.jsxs("span",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Signing in..."]}):"Sign In"})]}),d.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Don't have an account?"," ",d.jsx(Tu,{to:"/signup",className:"text-primary hover:underline",children:"Sign up"})]})]})]})})}const ave="/assets/demo-DfIzu3YA.png",lve="/assets/agendaview-8xi8bClj.png",cve="/assets/dayview-CyvjQisK.png",uve="/assets/weekview-BRWEje24.png",dve="/assets/note-CMn3AErB.svg";function fve(){const{user:t}=vi(),e=yi(),n=navigator.userAgent.includes("Mac");return d.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-background to-muted/50",children:[d.jsxs("section",{className:"container mx-auto px-4 py-20 text-center",children:[d.jsx("div",{className:"flex justify-center mb-4",children:d.jsx("img",{src:dve,alt:"Notes Logo",className:"h-24 w-24"})}),d.jsx("h1",{className:"text-5xl font-bold tracking-tight mb-6",children:"Notes app asdf"}),d.jsx("p",{className:"text-xl text-muted-foreground mb-8 max-w-2xl mx-auto",children:"A minimalist note-taking app because screw apple notes. Clean, fast, and focused on what matters most - your thoughts."}),d.jsx("div",{className:"flex justify-center gap-4",children:t?d.jsxs("div",{className:"space-y-4",children:[d.jsxs(Ne,{onClick:()=>e("/notes"),size:"lg",className:"w-full",children:[d.jsx(Tk,{className:"mr-2 h-5 w-5"})," Open Notes"]}),d.jsxs("p",{className:"text-sm text-muted-foreground",children:["Welcome back, ",t.email,"!"]})]}):d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[d.jsxs(Ne,{onClick:()=>e("/auth"),size:"lg",className:"w-full sm:w-auto",children:[d.jsx(Q4,{className:"mr-2 h-5 w-5"})," Sign In"]}),d.jsx(Ne,{onClick:()=>e("/signup"),size:"lg",variant:"outline",className:"w-full sm:w-auto",children:"Get Started"}),d.jsxs(Ne,{variant:"secondary",onClick:()=>e("/install"),className:"w-full sm:w-auto",children:[d.jsx(rI,{className:"mr-2 h-4 w-4"})," Install App"]})]}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"Free to try, no credit card required"})]})})]}),d.jsxs("section",{className:"container mx-auto px-4 py-20",children:[d.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"Command Palette"}),d.jsx("div",{className:"max-w-2xl mx-auto",children:d.jsxs(Zt,{className:"hover:shadow-lg transition-shadow",children:[d.jsx(rn,{children:d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx($k,{className:"h-10 w-10 text-primary"}),d.jsx(on,{className:"text-2xl",children:"Quick Navigation"})]})}),d.jsxs(en,{className:"space-y-6",children:[d.jsx("div",{className:"flex items-center justify-center gap-2 p-2 rounded-lg bg-muted/50",children:d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("kbd",{className:"pointer-events-none h-7 select-none items-center gap-1 rounded border bg-muted px-2 font-mono text-sm font-medium flex",children:n?"⌘":"Ctrl"}),d.jsx("span",{className:"text-sm text-muted-foreground",children:"+"}),d.jsx("kbd",{className:"pointer-events-none h-7 select-none items-center gap-1 rounded border bg-muted px-2 font-mono text-sm font-medium flex",children:"K"})]})}),d.jsxs("div",{className:"space-y-4",children:[d.jsx("h4",{className:"font-semibold",children:"Available Commands:"}),d.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(X4,{className:"h-4 w-4 text-primary"}),d.jsx("span",{className:"text-sm",children:"Go Home"}),d.jsxs("div",{className:"ml-auto flex gap-1",children:[d.jsx("kbd",{className:"rounded bg-muted px-2 py-0.5 text-xs",children:"G"}),d.jsx("kbd",{className:"rounded bg-muted px-2 py-0.5 text-xs",children:"H"})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Np,{className:"h-4 w-4 text-primary"}),d.jsx("span",{className:"text-sm",children:"Calendar"}),d.jsxs("div",{className:"ml-auto flex gap-1",children:[d.jsx("kbd",{className:"rounded bg-muted px-2 py-0.5 text-xs",children:"G"}),d.jsx("kbd",{className:"rounded bg-muted px-2 py-0.5 text-xs",children:"C"})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(sm,{className:"h-4 w-4 text-primary"}),d.jsx("span",{className:"text-sm",children:"Notes"}),d.jsxs("div",{className:"ml-auto flex gap-1",children:[d.jsx("kbd",{className:"rounded bg-muted px-2 py-0.5 text-xs",children:"G"}),d.jsx("kbd",{className:"rounded bg-muted px-2 py-0.5 text-xs",children:"N"})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(X1e,{className:"h-4 w-4 text-primary"}),d.jsx("span",{className:"text-sm",children:"Profile"}),d.jsxs("div",{className:"ml-auto flex gap-1",children:[d.jsx("kbd",{className:"rounded bg-muted px-2 py-0.5 text-xs",children:"G"}),d.jsx("kbd",{className:"rounded bg-muted px-2 py-0.5 text-xs",children:"P"})]})]})]})]}),d.jsx("div",{className:"rounded-lg border p-4 bg-muted/30",children:d.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:["Press ",d.jsx("span",{className:"font-semibold",children:"Esc"})," to close the command palette at any time"]})})]})]})})]}),d.jsxs("section",{className:"container mx-auto px-4 py-20",children:[d.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"Key Features"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[d.jsxs(Zt,{className:"hover:shadow-lg transition-shadow",children:[d.jsx(rn,{children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx($k,{className:"h-6 w-6 text-primary"}),d.jsx(on,{children:"Command Palette"})]})}),d.jsx(en,{children:d.jsx(un,{children:"Quick navigation with keyboard shortcuts (⌘/Ctrl + K). Access all your notes and app features instantly."})})]}),d.jsxs(Zt,{className:"hover:shadow-lg transition-shadow",children:[d.jsx(rn,{children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Np,{className:"h-6 w-6 text-primary"}),d.jsx(on,{children:"Calendar Integration"})]})}),d.jsx(en,{children:d.jsx(un,{children:"Seamlessly manage events, set reminders, and organize your schedule with our built-in calendar."})})]}),d.jsxs(Zt,{className:"hover:shadow-lg transition-shadow",children:[d.jsx(rn,{children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(oI,{className:"h-6 w-6 text-primary"}),d.jsx(on,{children:"Smart Tags"})]})}),d.jsx(en,{children:d.jsx(un,{children:"Organize notes with customizable tags and colors. Filter and search your content effortlessly."})})]}),d.jsxs(Zt,{className:"hover:shadow-lg transition-shadow",children:[d.jsx(rn,{children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(qN,{className:"h-6 w-6 text-primary"}),d.jsx(on,{children:"Collaboration"})]})}),d.jsx(en,{children:d.jsx(un,{children:"Share notes and events with others. Control permissions and work together in real-time."})})]}),d.jsxs(Zt,{className:"hover:shadow-lg transition-shadow",children:[d.jsx(rn,{children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(J4,{className:"h-6 w-6 text-primary"}),d.jsx(on,{children:"Dark Mode"})]})}),d.jsx(en,{children:d.jsx(un,{children:"Easy on the eyes with automatic theme switching. Perfect for late-night writing sessions."})})]}),d.jsxs(Zt,{className:"hover:shadow-lg transition-shadow",children:[d.jsx(rn,{children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(rI,{className:"h-6 w-6 text-primary"}),d.jsx(on,{children:"PWA Ready"})]})}),d.jsx(en,{children:d.jsx(un,{children:"Install as a native app on any device. Work offline and sync when connected."})})]})]})]}),!t&&d.jsx("section",{className:"container mx-auto px-4 py-20 text-center",children:d.jsxs("div",{className:"bg-primary/10 rounded-lg p-8 max-w-3xl mx-auto",children:[d.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to Get Started?"}),d.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"Join up if you feel like dealing with bugs for now. It'll get better as long as I remember to work on it."}),d.jsx(Ne,{onClick:()=>e("/signup"),size:"lg",children:"Create Free Account"})]})}),d.jsxs("section",{className:"container mx-auto px-4 py-20 bg-muted/30",children:[d.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"How It Works"}),d.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-12",children:[d.jsxs("div",{className:"flex-1 space-y-8",children:[d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:"bg-primary text-primary-foreground rounded-full w-8 h-8 flex items-center justify-center shrink-0",children:"1"}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Sign In"}),d.jsx("p",{className:"text-muted-foreground",children:"Create an account or sign in to access your personal note space."})]})]}),d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:"bg-primary text-primary-foreground rounded-full w-8 h-8 flex items-center justify-center shrink-0",children:"2"}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Create Notes"}),d.jsx("p",{className:"text-muted-foreground",children:"Start writing with our clean, distraction-free editor."})]})]}),d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:"bg-primary text-primary-foreground rounded-full w-8 h-8 flex items-center justify-center shrink-0",children:"3"}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Organize"}),d.jsx("p",{className:"text-muted-foreground",children:"Keep your thoughts organized with tags and categories."})]})]})]}),d.jsx("div",{className:"flex-1 rounded-lg overflow-hidden shadow-xl",children:d.jsx("img",{src:ave,alt:"App Screenshot",className:"w-full h-auto",onError:r=>{r.currentTarget.src="../../assets/agendaview.png"}})})]})]}),d.jsxs("section",{className:"container mx-auto px-4 py-20",children:[d.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"Calendar Integration"}),d.jsxs("div",{className:"space-y-16",children:[d.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-12",children:[d.jsxs("div",{className:"flex-1 space-y-8",children:[d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:"bg-primary text-primary-foreground rounded-full w-8 h-8 flex items-center justify-center shrink-0",children:"1"}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Multiple Views"}),d.jsx("p",{className:"text-muted-foreground",children:"Switch between Day, Week, and Agenda views to manage your schedule effectively."})]})]}),d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:"bg-primary text-primary-foreground rounded-full w-8 h-8 flex items-center justify-center shrink-0",children:"2"}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Event Management"}),d.jsx("p",{className:"text-muted-foreground",children:"Create, edit, and share events with customizable colors and reminders."})]})]}),d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("div",{className:"bg-primary text-primary-foreground rounded-full w-8 h-8 flex items-center justify-center shrink-0",children:"3"}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Collaboration"}),d.jsx("p",{className:"text-muted-foreground",children:"Share events with team members and manage permissions."})]})]})]}),d.jsx("div",{className:"flex-1 rounded-lg overflow-hidden shadow-xl",children:d.jsx("img",{src:uve,alt:"Calendar Week View",className:"w-full h-auto",onError:r=>{r.currentTarget.src="../../assets/weekview.png"}})})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[d.jsx("div",{className:"rounded-lg overflow-hidden shadow-xl",children:d.jsx("img",{src:cve,alt:"Calendar Day View",className:"w-full h-auto",onError:r=>{r.currentTarget.src="../../assets/dayview.png"}})}),d.jsx("div",{className:"rounded-lg overflow-hidden shadow-xl",children:d.jsx("img",{src:lve,alt:"Calendar Agenda View",className:"w-full h-auto",onError:r=>{r.currentTarget.src="../../assets/agendaview.png"}})})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mt-12",children:[d.jsxs(Zt,{className:"hover:shadow-lg transition-shadow",children:[d.jsx(rn,{children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(qN,{className:"h-6 w-6 text-primary"}),d.jsx(on,{children:"Event Sharing"})]})}),d.jsx(en,{children:d.jsx(un,{children:"Share events with team members and control viewing or editing permissions. Perfect for team coordination."})})]}),d.jsxs(Zt,{className:"hover:shadow-lg transition-shadow",children:[d.jsx(rn,{children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx($k,{className:"h-6 w-6 text-primary"}),d.jsx(on,{children:"Quick Search"})]})}),d.jsx(en,{children:d.jsx(un,{children:"Instantly find events using the command palette (⌘/Ctrl + K). Search across all your calendar entries."})})]}),d.jsxs(Zt,{className:"hover:shadow-lg transition-shadow",children:[d.jsx(rn,{children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(oI,{className:"h-6 w-6 text-primary"}),d.jsx(on,{children:"Event Tags"})]})}),d.jsx(en,{children:d.jsx(un,{children:"Organize events with custom tags and colors. Filter and categorize your schedule efficiently."})})]})]})]})]}),d.jsxs("section",{className:"container mx-auto px-4 py-20",children:[d.jsx("h3",{className:"text-2xl font-bold text-center mb-8",children:"Everything You Need in One Place"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[d.jsxs(Zt,{className:"hover:shadow-lg transition-shadow",children:[d.jsx(rn,{children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Np,{className:"h-6 w-6 text-primary"}),d.jsx(on,{children:"Calendar Integration"})]})}),d.jsx(en,{children:d.jsx(un,{children:"Seamlessly integrate your notes with calendar events. Plan your schedule, set reminders, and keep your tasks organized in a timeline view. Perfect for project planning and daily organization."})})]}),d.jsxs(Zt,{className:"hover:shadow-lg transition-shadow",children:[d.jsx(rn,{children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(V1e,{className:"h-6 w-6 text-primary"}),d.jsx(on,{children:"Event Synchronization"})]})}),d.jsx(en,{children:d.jsx(un,{children:"Your notes and events stay in sync across all devices. Add an event in your calendar and automatically create linked notes. Never miss a meeting or deadline again."})})]}),d.jsxs(Zt,{className:"hover:shadow-lg transition-shadow",children:[d.jsx(rn,{children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(xpe,{className:"h-6 w-6 text-primary"}),d.jsx(on,{children:"Quick Notes"})]})}),d.jsx(en,{children:d.jsx(un,{children:"Capture your thoughts instantly with our streamlined interface. Access from anywhere - web, mobile, or desktop app."})})]}),d.jsxs(Zt,{className:"hover:shadow-lg transition-shadow",children:[d.jsx(rn,{children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(ype,{className:"h-6 w-6 text-primary"}),d.jsx(on,{children:"Real-time Cloud Sync"})]})}),d.jsx(en,{children:d.jsx(un,{children:"Changes sync instantly across all your devices. Work seamlessly between your phone, tablet, and computer without missing a beat."})})]}),d.jsxs(Zt,{className:"hover:shadow-lg transition-shadow",children:[d.jsx(rn,{children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(tme,{className:"h-6 w-6 text-primary"}),d.jsx(on,{children:"Regular Updates"})]})}),d.jsx(en,{children:d.jsx(un,{children:"We're constantly improving with new features based on user feedback. Recent additions include calendar integration and enhanced sync capabilities."})})]}),d.jsxs(Zt,{className:"hover:shadow-lg transition-shadow",children:[d.jsx(rn,{children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Tk,{className:"h-6 w-6 text-primary"}),d.jsx(on,{children:"Lightning Fast"})]})}),d.jsx(en,{children:d.jsx(un,{children:"Optimized for speed - your notes and calendar events load instantly. Quick search across all your content lets you find what you need fast."})})]}),d.jsxs(Zt,{className:"hover:shadow-lg transition-shadow",children:[d.jsx(rn,{children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx($1e,{className:"h-6 w-6 text-primary"}),d.jsx(on,{children:"Smart Features"})]})}),d.jsx(en,{children:d.jsx(un,{children:"Advanced features including nested todos, markdown support, voice-to-text, and intelligent calendar suggestions to help you stay organized."})})]}),d.jsxs(Zt,{className:"hover:shadow-lg transition-shadow",children:[d.jsx(rn,{children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Ype,{className:"h-6 w-6 text-primary"}),d.jsx(on,{children:"AI Enhancements"})]})}),d.jsx(en,{children:d.jsx(un,{children:"Smart scheduling suggestions, meeting note templates, and AI-powered organization help you make the most of your time and notes."})})]})]})]}),d.jsxs("section",{className:"container mx-auto px-4 py-20",children:[d.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"Built With Modern Tech"}),d.jsxs("div",{className:"flex flex-wrap justify-center gap-8 items-center max-w-3xl mx-auto",children:[d.jsxs("div",{className:"text-center p-4",children:[d.jsx(wpe,{className:"h-8 w-8 mx-auto mb-2 text-primary"}),d.jsx("p",{className:"font-semibold",children:"React"})]}),d.jsxs("div",{className:"text-center p-4",children:[d.jsx(Tk,{className:"h-8 w-8 mx-auto mb-2 text-primary"}),d.jsx("p",{className:"font-semibold",children:"TypeScript"})]}),d.jsxs("div",{className:"text-center p-4",children:[d.jsx(Fpe,{className:"h-8 w-8 mx-auto mb-2 text-primary"}),d.jsx("p",{className:"font-semibold",children:"Tailwind CSS"})]}),d.jsxs("div",{className:"text-center p-4",children:[d.jsx(rme,{className:"h-8 w-8 mx-auto mb-2 text-primary"}),d.jsx("p",{className:"font-semibold",children:"Firebase & Vercel"})]})]})]}),d.jsx("section",{className:"bg-background py-20",children:d.jsxs("div",{className:"container mx-auto px-4 text-center max-w-2xl",children:[d.jsx("h2",{className:"text-3xl font-bold mb-6",children:"About This Project"}),d.jsx("p",{className:"text-muted-foreground mb-4",children:"I built this app because I'm tired of apple notes, so im gonna make it better for what i want."}),d.jsx("p",{className:"bg-muted/30 rounded-lg p-4 mb-4",children:"When its done, i will make it open source and free to use."}),d.jsxs(Ne,{variant:"outline",onClick:()=>window.open("https://github.com/dangphung4/notes","_blank"),children:[d.jsx(WU,{className:"mr-2 h-4 w-4"})," View on GitHub"]})]})})]})}const hve="modulepreload",pve=function(t){return"/"+t},UO={},U=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=Promise.allSettled(n.map(l=>{if(l=pve(l),l in UO)return;UO[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":hve,c||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return o.then(i=>{for(const a of i||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function mve(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:o,onRegisteredSW:s,onRegisterError:i}=t;let a,l,c;const u=async(h=!0)=>{await l,c==null||c()};async function f(){if("serviceWorker"in navigator){if(a=await U(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-DL_hIMXg.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/sw.js",{scope:"/",type:"classic"})).catch(h=>{i==null||i(h)}),!a)return;c=()=>{a==null||a.messageSkipWaiting()};{let h=!1;const p=()=>{h=!0,a==null||a.addEventListener("controlling",m=>{m.isUpdate&&window.location.reload()}),n==null||n()};a.addEventListener("installed",m=>{typeof m.isUpdate>"u"?typeof m.isExternal<"u"&&m.isExternal?p():!h&&(r==null||r()):m.isUpdate||r==null||r()}),a.addEventListener("waiting",p)}a.register({immediate:e}).then(h=>{s?s("/sw.js",h):o==null||o(h)}).catch(h=>{i==null||i(h)})}}return l=f(),u}function gve(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:o,onRegisteredSW:s,onRegisterError:i}=t,[a,l]=g.useState(!1),[c,u]=g.useState(!1),[f]=g.useState(()=>mve({immediate:e,onOfflineReady(){u(!0),r==null||r()},onNeedRefresh(){l(!0),n==null||n()},onRegistered:o,onRegisteredSW:s,onRegisterError:i}));return{needRefresh:[a,l],offlineReady:[c,u],updateServiceWorker:f}}function yve(){const{offlineReady:[e,n],needRefresh:[r,o],updateServiceWorker:s}=gve({onRegisteredSW(a,l){var c;((c=l==null?void 0:l.active)==null?void 0:c.state)==="activated"?HO(36e5,a,l):l!=null&&l.installing&&l.installing.addEventListener("statechange",u=>{u.target.state==="activated"&&HO(36e5,a,l)})}});function i(){n(!1),o(!1)}return d.jsx("div",{className:"PWABadge",role:"alert","aria-labelledby":"toast-message",children:(e||r)&&d.jsxs("div",{className:"PWABadge-toast",children:[d.jsx("div",{className:"PWABadge-message",children:e?d.jsx("span",{id:"toast-message",children:"App ready to work offline"}):d.jsx("span",{id:"toast-message",children:"New content available, click on reload button to update."})}),d.jsxs("div",{className:"PWABadge-buttons",children:[r&&d.jsx("button",{className:"PWABadge-toast-button",onClick:()=>s(!0),children:"Reload"}),d.jsx("button",{className:"PWABadge-toast-button",onClick:()=>i(),children:"Close"})]})]})})}function HO(t,e,n){setInterval(async()=>{if("onLine"in navigator&&!navigator.onLine)return;const r=await fetch(e,{cache:"no-store",headers:{cache:"no-store","cache-control":"no-cache"}});(r==null?void 0:r.status)===200&&await n.update()},t)}function vve(){const[t,e]=g.useState(""),[n,r]=g.useState(""),[o,s]=g.useState(""),[i,a]=g.useState(null),[l,c]=g.useState(!1),{loading:u,user:f}=vi(),h=yi();if(f)return h("/notes"),null;const p=async()=>{try{c(!0),a(null),(await XB(Ut,UU)).user&&h("/notes")}catch(y){console.error("Google signup error:",y),a("Failed to sign up with Google. Please try again.")}finally{c(!1)}},m=async y=>{if(y.preventDefault(),!t||!n||!o){a("Please fill in all fields");return}if(n!==o){a("Passwords do not match");return}if(n.length<6){a("Password must be at least 6 characters");return}try{c(!0),a(null),(await ble(Ut,t,n)).user&&h("/notes")}catch(x){console.error("Email signup error:",x),x.code==="auth/email-already-in-use"?a("Email already in use. Please try logging in instead."):x.code==="auth/invalid-email"?a("Please enter a valid email address"):a("Failed to sign up. Please try again.")}finally{c(!1)}};return u?d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 dark:border-white"})}):d.jsx("div",{className:"container mx-auto max-w-md mt-20 px-4",children:d.jsxs(Zt,{className:"border-2",children:[d.jsxs(rn,{className:"space-y-1",children:[d.jsx(on,{className:"text-2xl text-center",children:"Create an Account"}),d.jsx(un,{className:"text-center",children:"Sign up to start taking notes"})]}),d.jsxs(en,{className:"space-y-4",children:[i&&d.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:d.jsx("span",{className:"block sm:inline",children:i})}),d.jsxs(Ne,{className:"w-full flex items-center justify-center gap-2",variant:"outline",onClick:p,disabled:l,children:[d.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[d.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),d.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),d.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),d.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 flex items-center",children:d.jsx("span",{className:"w-full border-t"})}),d.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:d.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with email"})})]}),d.jsxs("form",{onSubmit:m,className:"space-y-4",children:[d.jsx("div",{className:"space-y-2",children:d.jsx(Pn,{type:"email",placeholder:"Email",value:t,onChange:y=>e(y.target.value),disabled:l,className:"bg-background"})}),d.jsx("div",{className:"space-y-2",children:d.jsx(Pn,{type:"password",placeholder:"Password",value:n,onChange:y=>r(y.target.value),disabled:l,className:"bg-background"})}),d.jsx("div",{className:"space-y-2",children:d.jsx(Pn,{type:"password",placeholder:"Confirm Password",value:o,onChange:y=>s(y.target.value),disabled:l,className:"bg-background"})}),d.jsx(Ne,{type:"submit",className:"w-full",disabled:l,children:l?d.jsxs("span",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Creating Account..."]}):"Sign Up"})]}),d.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Already have an account?"," ",d.jsx(Tu,{to:"/auth",className:"text-primary hover:underline",children:"Sign in"})]})]})]})})}function wve(){const t=new Date().getFullYear();return d.jsx("footer",{className:"border-t bg-background/80 backdrop-blur-sm",children:d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("h3",{className:"font-semibold text-lg",children:"Notes"}),d.jsx(Ne,{variant:"link",size:"icon",asChild:!0,children:d.jsx(Tu,{to:"/install",children:d.jsx(Bz,{})})})]}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"A minimalist note-taking app because I don't like apple notes."})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"font-semibold",children:"Legal"}),d.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[d.jsx("li",{children:d.jsx(Tu,{to:"/privacy",className:"hover:text-foreground transition-colors",children:"Privacy Policy"})}),d.jsx("li",{children:d.jsx(Tu,{to:"/terms",className:"hover:text-foreground transition-colors",children:"Terms of Service"})})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"font-semibold",children:"Connect"}),d.jsxs("div",{className:"flex space-x-4",children:[d.jsx("a",{href:"https://github.com/dangphung4",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-foreground transition-colors",children:d.jsx(WU,{className:"h-5 w-5"})}),d.jsx("a",{href:"https://linkedin.com/in/dang-phung",target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-foreground transition-colors",children:d.jsx(Ope,{className:"h-5 w-5"})})]})]})]}),d.jsx("div",{className:"mt-8 pt-8 border-t text-center text-sm text-muted-foreground",children:d.jsxs("p",{children:["© ",t," Dang Phung. All rights reserved."]})})]})})}var bve="Label",Yz=g.forwardRef((t,e)=>d.jsx(et.label,{...t,ref:e,onMouseDown:n=>{var o;n.target.closest("button, input, select, textarea")||((o=t.onMouseDown)==null||o.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Yz.displayName=bve;var Qz=Yz;const xve=xC("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),En=g.forwardRef(({className:t,...e},n)=>d.jsx(Qz,{ref:n,className:Ve(xve(),t),...e}));En.displayName=Qz.displayName;function fE(t){const e=g.useRef({value:t,previous:t});return g.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var NP="Switch",[_ve,LBe]=Lo(NP),[Cve,Eve]=_ve(NP),Xz=g.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:o,defaultChecked:s,required:i,disabled:a,value:l="on",onCheckedChange:c,form:u,...f}=t,[h,p]=g.useState(null),m=bt(e,E=>p(E)),y=g.useRef(!1),x=h?u||!!h.closest("form"):!0,[b=!1,C]=ea({prop:o,defaultProp:s,onChange:c});return d.jsxs(Cve,{scope:n,checked:b,disabled:a,children:[d.jsx(et.button,{type:"button",role:"switch","aria-checked":b,"aria-required":i,"data-state":eW(b),"data-disabled":a?"":void 0,disabled:a,value:l,...f,ref:m,onClick:ze(t.onClick,E=>{C(R=>!R),x&&(y.current=E.isPropagationStopped(),y.current||E.stopPropagation())})}),x&&d.jsx(kve,{control:h,bubbles:!y.current,name:r,value:l,checked:b,required:i,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});Xz.displayName=NP;var Jz="SwitchThumb",Zz=g.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,o=Eve(Jz,n);return d.jsx(et.span,{"data-state":eW(o.checked),"data-disabled":o.disabled?"":void 0,...r,ref:e})});Zz.displayName=Jz;var kve=t=>{const{control:e,checked:n,bubbles:r=!0,...o}=t,s=g.useRef(null),i=fE(n),a=nE(e);return g.useEffect(()=>{const l=s.current,c=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(c,"checked").set;if(i!==n&&f){const h=new Event("click",{bubbles:r});f.call(l,n),l.dispatchEvent(h)}},[i,n,r]),d.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:s,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function eW(t){return t?"checked":"unchecked"}var tW=Xz,Sve=Zz;const hp=g.forwardRef(({className:t,...e},n)=>d.jsx(tW,{className:Ve("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:d.jsx(Sve,{className:Ve("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));hp.displayName=tW.displayName;var IP="Tabs",[Tve,jBe]=Lo(IP,[zm]),nW=zm(),[Nve,RP]=Tve(IP),rW=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:o,defaultValue:s,orientation:i="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=$m(a),[f,h]=ea({prop:r,onChange:o,defaultProp:s});return d.jsx(Nve,{scope:n,baseId:_s(),value:f,onValueChange:h,orientation:i,dir:u,activationMode:l,children:d.jsx(et.div,{dir:u,"data-orientation":i,...c,ref:e})})});rW.displayName=IP;var oW="TabsList",sW=g.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...o}=t,s=RP(oW,n),i=nW(n);return d.jsx(hP,{asChild:!0,...i,orientation:s.orientation,dir:s.dir,loop:r,children:d.jsx(et.div,{role:"tablist","aria-orientation":s.orientation,...o,ref:e})})});sW.displayName=oW;var iW="TabsTrigger",aW=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:o=!1,...s}=t,i=RP(iW,n),a=nW(n),l=uW(i.baseId,r),c=dW(i.baseId,r),u=r===i.value;return d.jsx(pP,{asChild:!0,...a,focusable:!o,active:u,children:d.jsx(et.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:l,...s,ref:e,onMouseDown:ze(t.onMouseDown,f=>{!o&&f.button===0&&f.ctrlKey===!1?i.onValueChange(r):f.preventDefault()}),onKeyDown:ze(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&i.onValueChange(r)}),onFocus:ze(t.onFocus,()=>{const f=i.activationMode!=="manual";!u&&!o&&f&&i.onValueChange(r)})})})});aW.displayName=iW;var lW="TabsContent",cW=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:o,children:s,...i}=t,a=RP(lW,n),l=uW(a.baseId,r),c=dW(a.baseId,r),u=r===a.value,f=g.useRef(u);return g.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),d.jsx(Qr,{present:o||u,children:({present:h})=>d.jsx(et.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:c,tabIndex:0,...i,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:h&&s})})});cW.displayName=lW;function uW(t,e){return`${t}-trigger-${e}`}function dW(t,e){return`${t}-content-${e}`}var Ive=rW,fW=sW,hW=aW,pW=cW;const hE=Ive,Vv=g.forwardRef(({className:t,...e},n)=>d.jsx(fW,{ref:n,className:Ve("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...e}));Vv.displayName=fW.displayName;const ws=g.forwardRef(({className:t,...e},n)=>d.jsx(hW,{ref:n,className:Ve("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...e}));ws.displayName=hW.displayName;const zi=g.forwardRef(({className:t,...e},n)=>d.jsx(pW,{ref:n,className:Ve("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));zi.displayName=pW.displayName;const Rve=1,Ave=1e6;let zk=0;function Pve(){return zk=(zk+1)%Number.MAX_SAFE_INTEGER,zk.toString()}const Wk=new Map,zO=t=>{if(Wk.has(t))return;const e=setTimeout(()=>{Wk.delete(t),Oy({type:"REMOVE_TOAST",toastId:t})},Ave);Wk.set(t,e)},Mve=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,Rve)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?zO(n):t.toasts.forEach(r=>{zO(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},ub=[];let db={toasts:[]};function Oy(t){db=Mve(db,t),ub.forEach(e=>{e(db)})}function Ap({...t}){const e=Pve(),n=o=>Oy({type:"UPDATE_TOAST",toast:{...o,id:e}}),r=()=>Oy({type:"DISMISS_TOAST",toastId:e});return Oy({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:o=>{o||r()}}}),{id:e,dismiss:r,update:n}}function pE(){const[t,e]=g.useState(db);return g.useEffect(()=>(ub.push(e),()=>{const n=ub.indexOf(e);n>-1&&ub.splice(n,1)}),[t]),{...t,toast:Ap,dismiss:n=>Oy({type:"DISMISS_TOAST",toastId:n})}}function Dve(){const{user:t}=vi(),{toast:e}=pE(),[n,r]=g.useState(!1),[o,s]=g.useState((t==null?void 0:t.displayName)||""),[i,a]=g.useState((t==null?void 0:t.email)||""),[l,c]=g.useState((t==null?void 0:t.photoURL)||""),[u,f]=g.useState(""),[h,p]=g.useState(""),[m,y]=g.useState(""),[x,b]=g.useState(!0),[C,E]=g.useState(!0),[R,D]=g.useState(!0),[O,T]=g.useState(!0),I=async()=>{if(t)try{r(!0),await Cle(t,{displayName:o,photoURL:l}),i!==t.email&&await Ele(t,i),e({title:"Profile updated",description:"Your profile information has been updated successfully."})}catch($){e({title:"Error",description:$.message,variant:"destructive"})}finally{r(!1)}},P=async()=>{if(t){if(h!==m){e({title:"Error",description:"New passwords do not match.",variant:"destructive"});return}try{r(!0),await kle(t,h),e({title:"Password updated",description:"Your password has been updated successfully."}),f(""),p(""),y("")}catch($){e({title:"Error",description:$.message,variant:"destructive"})}finally{r(!1)}}},L=()=>{var $;return t!=null&&t.displayName?t.displayName.split(" ").map(F=>F[0]).join("").toUpperCase():(($=t==null?void 0:t.email)==null?void 0:$[0].toUpperCase())||"?"};return d.jsxs("div",{className:"container max-w-3xl mx-auto px-4 py-8",children:[d.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Profile Settings"}),d.jsxs(hE,{defaultValue:"profile",className:"space-y-4",children:[d.jsxs(Vv,{className:"w-full flex flex-wrap gap-2 h-auto",children:[d.jsxs(ws,{value:"profile",className:"flex-1 min-w-[120px] items-center gap-2",children:[d.jsx(GU,{})," Profile"]}),d.jsxs(ws,{value:"security",className:"flex-1 min-w-[120px] items-center gap-2",children:[d.jsx(jpe,{})," Security"]}),d.jsxs(ws,{value:"notifications",className:"flex-1 min-w-[120px] items-center gap-2",children:[d.jsx(hpe,{})," Notifications"]}),d.jsxs(ws,{value:"preferences",className:"flex-1 min-w-[120px] items-center gap-2",children:[d.jsx(Spe,{})," Preferences"]})]}),d.jsx(zi,{value:"profile",children:d.jsxs(Zt,{children:[d.jsxs(rn,{className:"space-y-1",children:[d.jsx(on,{children:"Profile Information"}),d.jsx(un,{children:"Update your profile information and email address"})]}),d.jsxs(en,{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[d.jsxs(KC,{className:"h-24 w-24",children:[d.jsx(YC,{src:l??(t==null?void 0:t.photoURL),alt:o||(t==null?void 0:t.email)||"Profile"}),d.jsx(QC,{className:"text-lg",children:L()})]}),d.jsx("div",{className:"text-sm text-muted-foreground text-center",children:l?d.jsxs("span",{className:"text-green-600 dark:text-green-400 flex items-center gap-1 justify-center",children:[d.jsx(GN,{className:"h-4 w-4"}),"Image loaded successfully"]}):d.jsx("span",{className:"text-muted-foreground",children:"No profile picture set"})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(En,{htmlFor:"displayName",children:"Display Name"}),d.jsx(Pn,{id:"displayName",value:o,onChange:$=>s($.target.value),placeholder:"Your name",className:"max-w-full"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(En,{htmlFor:"email",children:"Email"}),d.jsx(Pn,{id:"email",type:"email",value:i,onChange:$=>a($.target.value),placeholder:"your@email.com",className:"max-w-full"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(En,{htmlFor:"photoURL",children:"Profile Picture URL"}),d.jsx(Pn,{id:"photoURL",value:l,onChange:$=>c($.target.value),placeholder:"https://example.com/avatar.jpg",className:"max-w-full"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter a URL for your profile picture. The image should be square for best results."})]}),d.jsx(Ne,{onClick:I,disabled:n,className:"w-full",children:n?d.jsxs("span",{className:"flex items-center gap-2 justify-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Updating..."]}):"Update Profile"})]})]})}),d.jsx(zi,{value:"security",children:d.jsxs(Zt,{children:[d.jsxs(rn,{className:"space-y-1",children:[d.jsx(on,{children:"Security Settings"}),d.jsx(un,{children:"Update your password and security preferences"})]}),d.jsxs(en,{className:"space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(En,{htmlFor:"currentPassword",children:"Current Password"}),d.jsx(Pn,{id:"currentPassword",type:"password",value:u,onChange:$=>f($.target.value)})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(En,{htmlFor:"newPassword",children:"New Password"}),d.jsx(Pn,{id:"newPassword",type:"password",value:h,onChange:$=>p($.target.value)})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(En,{htmlFor:"confirmPassword",children:"Confirm New Password"}),d.jsx(Pn,{id:"confirmPassword",type:"password",value:m,onChange:$=>y($.target.value)})]}),d.jsx(Ne,{onClick:P,disabled:n,className:"w-full",children:n?"Updating...":"Update Password"})]})]})}),d.jsx(zi,{value:"notifications",children:d.jsxs(Zt,{children:[d.jsxs(rn,{className:"space-y-1",children:[d.jsx(on,{children:"Notification Preferences"}),d.jsx(un,{children:"Manage how you receive notifications"})]}),d.jsxs(en,{className:"space-y-4",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[d.jsxs("div",{className:"space-y-0.5",children:[d.jsx(En,{children:"Email Notifications"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications about your notes via email"})]}),d.jsx(hp,{checked:x,onCheckedChange:b})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[d.jsxs("div",{className:"space-y-0.5",children:[d.jsx(En,{children:"Desktop Notifications"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"Show desktop notifications when changes occur"})]}),d.jsx(hp,{checked:C,onCheckedChange:E})]})]})]})}),d.jsx(zi,{value:"preferences",children:d.jsxs(Zt,{children:[d.jsxs(rn,{className:"space-y-1",children:[d.jsx(on,{children:"App Preferences"}),d.jsx(un,{children:"Customize your note-taking experience"})]}),d.jsxs(en,{className:"space-y-4",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[d.jsxs("div",{className:"space-y-0.5",children:[d.jsx(En,{children:"Auto Save"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically save notes while typing"})]}),d.jsx(hp,{checked:R,onCheckedChange:D})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[d.jsxs("div",{className:"space-y-0.5",children:[d.jsx(En,{children:"Spell Check"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable spell checking while typing"})]}),d.jsx(hp,{checked:O,onCheckedChange:T})]})]})]})})]})]})}function Ove({children:t}){return d.jsx("div",{className:"min-h-screen md:pt-16",children:t})}function iI(t,e=200){try{const n=JSON.parse(t);let r="";return n.forEach(o=>{o.type==="heading"?r+=`# ${o.content.map(s=>s.text).join("")}
`:o.type==="bulletListItem"?r+=`• ${o.content.map(s=>s.text).join("")}
`:o.type==="numberedListItem"?r+=`1. ${o.content.map(s=>s.text).join("")}
`:o.type==="checkListItem"?r+=`☐ ${o.content.map(s=>s.text).join("")}
`:o.type==="paragraph"&&(r+=`${o.content.map(s=>{let i=s.text;return s.styles&&(s.styles.bold&&(i=`**${i}**`),s.styles.italic&&(i=`_${i}_`),s.styles.underline&&(i=`__${i}__`),s.styles.strikethrough&&(i=`~~${i}~~`)),i}).join("")}
`)}),r.length>e?r.slice(0,e)+"...":r}catch{return""}}function Lve(t){return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric"}).format(t)}function Zc(t){const n=Math.floor((new Date().getTime()-t.getTime())/1e3);return n<60?"just now":n<3600?`${Math.floor(n/60)}m ago`:n<86400?`${Math.floor(n/3600)}h ago`:n<604800?`${Math.floor(n/86400)}d ago`:Lve(t)}function aI(t,[e,n]){return Math.min(n,Math.max(e,t))}var jve="VisuallyHidden",mW=g.forwardRef((t,e)=>d.jsx(et.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));mW.displayName=jve;var Vve=[" ","Enter","ArrowUp","ArrowDown"],$ve=[" ","Enter"],$v="Select",[mE,gE,Bve]=eP($v),[Wm,VBe]=Lo($v,[Bve,Hm]),yE=Hm(),[Fve,ud]=Wm($v),[Uve,Hve]=Wm($v),gW=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:o,onOpenChange:s,value:i,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:f,disabled:h,required:p,form:m}=t,y=yE(e),[x,b]=g.useState(null),[C,E]=g.useState(null),[R,D]=g.useState(!1),O=$m(c),[T=!1,I]=ea({prop:r,defaultProp:o,onChange:s}),[P,L]=ea({prop:i,defaultProp:a,onChange:l}),$=g.useRef(null),F=x?m||!!x.closest("form"):!0,[V,be]=g.useState(new Set),ge=Array.from(V).map(le=>le.props.value).join(";");return d.jsx(rE,{...y,children:d.jsxs(Fve,{required:p,scope:e,trigger:x,onTriggerChange:b,valueNode:C,onValueNodeChange:E,valueNodeHasChildren:R,onValueNodeHasChildrenChange:D,contentId:_s(),value:P,onValueChange:L,open:T,onOpenChange:I,dir:O,triggerPointerDownPosRef:$,disabled:h,children:[d.jsx(mE.Provider,{scope:e,children:d.jsx(Uve,{scope:t.__scopeSelect,onNativeOptionAdd:g.useCallback(le=>{be(Q=>new Set(Q).add(le))},[]),onNativeOptionRemove:g.useCallback(le=>{be(Q=>{const H=new Set(Q);return H.delete(le),H})},[]),children:n})}),F?d.jsxs(FW,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:f,value:P,onChange:le=>L(le.target.value),disabled:h,form:m,children:[P===void 0?d.jsx("option",{value:""}):null,Array.from(V)]},ge):null]})})};gW.displayName=$v;var yW="SelectTrigger",vW=g.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...o}=t,s=yE(n),i=ud(yW,n),a=i.disabled||r,l=bt(e,i.onTriggerChange),c=gE(n),u=g.useRef("touch"),[f,h,p]=UW(y=>{const x=c().filter(E=>!E.disabled),b=x.find(E=>E.value===i.value),C=HW(x,y,b);C!==void 0&&i.onValueChange(C.value)}),m=y=>{a||(i.onOpenChange(!0),p()),y&&(i.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return d.jsx(oE,{asChild:!0,...s,children:d.jsx(et.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":BW(i.value)?"":void 0,...o,ref:l,onClick:ze(o.onClick,y=>{y.currentTarget.focus(),u.current!=="mouse"&&m(y)}),onPointerDown:ze(o.onPointerDown,y=>{u.current=y.pointerType;const x=y.target;x.hasPointerCapture(y.pointerId)&&x.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(m(y),y.preventDefault())}),onKeyDown:ze(o.onKeyDown,y=>{const x=f.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&h(y.key),!(x&&y.key===" ")&&Vve.includes(y.key)&&(m(),y.preventDefault())})})})});vW.displayName=yW;var wW="SelectValue",bW=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:o,children:s,placeholder:i="",...a}=t,l=ud(wW,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,f=bt(e,l.onValueNodeChange);return Lr(()=>{c(u)},[c,u]),d.jsx(et.span,{...a,ref:f,style:{pointerEvents:"none"},children:BW(l.value)?d.jsx(d.Fragment,{children:i}):s})});bW.displayName=wW;var zve="SelectIcon",xW=g.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...o}=t;return d.jsx(et.span,{"aria-hidden":!0,...o,ref:e,children:r||"▼"})});xW.displayName=zve;var Wve="SelectPortal",_W=t=>d.jsx(Av,{asChild:!0,...t});_W.displayName=Wve;var If="SelectContent",CW=g.forwardRef((t,e)=>{const n=ud(If,t.__scopeSelect),[r,o]=g.useState();if(Lr(()=>{o(new DocumentFragment)},[]),!n.open){const s=r;return s?yo.createPortal(d.jsx(EW,{scope:t.__scopeSelect,children:d.jsx(mE.Slot,{scope:t.__scopeSelect,children:d.jsx("div",{children:t.children})})}),s):null}return d.jsx(kW,{...t,ref:e})});CW.displayName=If;var Vi=10,[EW,dd]=Wm(If),Gve="SelectContentImpl",kW=g.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:s,onPointerDownOutside:i,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:m,hideWhenDetached:y,avoidCollisions:x,...b}=t,C=ud(If,n),[E,R]=g.useState(null),[D,O]=g.useState(null),T=bt(e,ve=>R(ve)),[I,P]=g.useState(null),[L,$]=g.useState(null),F=gE(n),[V,be]=g.useState(!1),ge=g.useRef(!1);g.useEffect(()=>{if(E)return Pv(E)},[E]),XC();const le=g.useCallback(ve=>{const[Te,...xe]=F().map(Re=>Re.ref.current),[ae]=xe.slice(-1),Ie=document.activeElement;for(const Re of ve)if(Re===Ie||(Re==null||Re.scrollIntoView({block:"nearest"}),Re===Te&&D&&(D.scrollTop=0),Re===ae&&D&&(D.scrollTop=D.scrollHeight),Re==null||Re.focus(),document.activeElement!==Ie))return},[F,D]),Q=g.useCallback(()=>le([I,E]),[le,I,E]);g.useEffect(()=>{V&&Q()},[V,Q]);const{onOpenChange:H,triggerPointerDownPosRef:Y}=C;g.useEffect(()=>{if(E){let ve={x:0,y:0};const Te=ae=>{var Ie,Re;ve={x:Math.abs(Math.round(ae.pageX)-(((Ie=Y.current)==null?void 0:Ie.x)??0)),y:Math.abs(Math.round(ae.pageY)-(((Re=Y.current)==null?void 0:Re.y)??0))}},xe=ae=>{ve.x<=10&&ve.y<=10?ae.preventDefault():E.contains(ae.target)||H(!1),document.removeEventListener("pointermove",Te),Y.current=null};return Y.current!==null&&(document.addEventListener("pointermove",Te),document.addEventListener("pointerup",xe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Te),document.removeEventListener("pointerup",xe,{capture:!0})}}},[E,H,Y]),g.useEffect(()=>{const ve=()=>H(!1);return window.addEventListener("blur",ve),window.addEventListener("resize",ve),()=>{window.removeEventListener("blur",ve),window.removeEventListener("resize",ve)}},[H]);const[ue,W]=UW(ve=>{const Te=F().filter(Ie=>!Ie.disabled),xe=Te.find(Ie=>Ie.ref.current===document.activeElement),ae=HW(Te,ve,xe);ae&&setTimeout(()=>ae.ref.current.focus())}),G=g.useCallback((ve,Te,xe)=>{const ae=!ge.current&&!xe;(C.value!==void 0&&C.value===Te||ae)&&(P(ve),ae&&(ge.current=!0))},[C.value]),ie=g.useCallback(()=>E==null?void 0:E.focus(),[E]),ye=g.useCallback((ve,Te,xe)=>{const ae=!ge.current&&!xe;(C.value!==void 0&&C.value===Te||ae)&&$(ve)},[C.value]),he=r==="popper"?lI:SW,we=he===lI?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:f,collisionBoundary:h,collisionPadding:p,sticky:m,hideWhenDetached:y,avoidCollisions:x}:{};return d.jsx(EW,{scope:n,content:E,viewport:D,onViewportChange:O,itemRefCallback:G,selectedItem:I,onItemLeave:ie,itemTextRefCallback:ye,focusSelectedItem:Q,selectedItemText:L,position:r,isPositioned:V,searchRef:ue,children:d.jsx(Mv,{as:pc,allowPinchZoom:!0,children:d.jsx(Nv,{asChild:!0,trapped:C.open,onMountAutoFocus:ve=>{ve.preventDefault()},onUnmountAutoFocus:ze(o,ve=>{var Te;(Te=C.trigger)==null||Te.focus({preventScroll:!0}),ve.preventDefault()}),children:d.jsx(Tv,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:ve=>ve.preventDefault(),onDismiss:()=>C.onOpenChange(!1),children:d.jsx(he,{role:"listbox",id:C.contentId,"data-state":C.open?"open":"closed",dir:C.dir,onContextMenu:ve=>ve.preventDefault(),...b,...we,onPlaced:()=>be(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:ze(b.onKeyDown,ve=>{const Te=ve.ctrlKey||ve.altKey||ve.metaKey;if(ve.key==="Tab"&&ve.preventDefault(),!Te&&ve.key.length===1&&W(ve.key),["ArrowUp","ArrowDown","Home","End"].includes(ve.key)){let ae=F().filter(Ie=>!Ie.disabled).map(Ie=>Ie.ref.current);if(["ArrowUp","End"].includes(ve.key)&&(ae=ae.slice().reverse()),["ArrowUp","ArrowDown"].includes(ve.key)){const Ie=ve.target,Re=ae.indexOf(Ie);ae=ae.slice(Re+1)}setTimeout(()=>le(ae)),ve.preventDefault()}})})})})})})});kW.displayName=Gve;var qve="SelectItemAlignedPosition",SW=g.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...o}=t,s=ud(If,n),i=dd(If,n),[a,l]=g.useState(null),[c,u]=g.useState(null),f=bt(e,T=>u(T)),h=gE(n),p=g.useRef(!1),m=g.useRef(!0),{viewport:y,selectedItem:x,selectedItemText:b,focusSelectedItem:C}=i,E=g.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&y&&x&&b){const T=s.trigger.getBoundingClientRect(),I=c.getBoundingClientRect(),P=s.valueNode.getBoundingClientRect(),L=b.getBoundingClientRect();if(s.dir!=="rtl"){const Ie=L.left-I.left,Re=P.left-Ie,at=T.left-Re,Nt=T.width+at,Ft=Math.max(Nt,I.width),Gn=window.innerWidth-Vi,kr=aI(Re,[Vi,Math.max(Vi,Gn-Ft)]);a.style.minWidth=Nt+"px",a.style.left=kr+"px"}else{const Ie=I.right-L.right,Re=window.innerWidth-P.right-Ie,at=window.innerWidth-T.right-Re,Nt=T.width+at,Ft=Math.max(Nt,I.width),Gn=window.innerWidth-Vi,kr=aI(Re,[Vi,Math.max(Vi,Gn-Ft)]);a.style.minWidth=Nt+"px",a.style.right=kr+"px"}const $=h(),F=window.innerHeight-Vi*2,V=y.scrollHeight,be=window.getComputedStyle(c),ge=parseInt(be.borderTopWidth,10),le=parseInt(be.paddingTop,10),Q=parseInt(be.borderBottomWidth,10),H=parseInt(be.paddingBottom,10),Y=ge+le+V+H+Q,ue=Math.min(x.offsetHeight*5,Y),W=window.getComputedStyle(y),G=parseInt(W.paddingTop,10),ie=parseInt(W.paddingBottom,10),ye=T.top+T.height/2-Vi,he=F-ye,we=x.offsetHeight/2,ve=x.offsetTop+we,Te=ge+le+ve,xe=Y-Te;if(Te<=ye){const Ie=$.length>0&&x===$[$.length-1].ref.current;a.style.bottom="0px";const Re=c.clientHeight-y.offsetTop-y.offsetHeight,at=Math.max(he,we+(Ie?ie:0)+Re+Q),Nt=Te+at;a.style.height=Nt+"px"}else{const Ie=$.length>0&&x===$[0].ref.current;a.style.top="0px";const at=Math.max(ye,ge+y.offsetTop+(Ie?G:0)+we)+xe;a.style.height=at+"px",y.scrollTop=Te-ye+y.offsetTop}a.style.margin=`${Vi}px 0`,a.style.minHeight=ue+"px",a.style.maxHeight=F+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[h,s.trigger,s.valueNode,a,c,y,x,b,s.dir,r]);Lr(()=>E(),[E]);const[R,D]=g.useState();Lr(()=>{c&&D(window.getComputedStyle(c).zIndex)},[c]);const O=g.useCallback(T=>{T&&m.current===!0&&(E(),C==null||C(),m.current=!1)},[E,C]);return d.jsx(Yve,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:O,children:d.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:R},children:d.jsx(et.div,{...o,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});SW.displayName=qve;var Kve="SelectPopperPosition",lI=g.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:o=Vi,...s}=t,i=yE(n);return d.jsx(dP,{...i,...s,ref:e,align:r,collisionPadding:o,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});lI.displayName=Kve;var[Yve,AP]=Wm(If,{}),cI="SelectViewport",TW=g.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...o}=t,s=dd(cI,n),i=AP(cI,n),a=bt(e,s.onViewportChange),l=g.useRef(0);return d.jsxs(d.Fragment,{children:[d.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),d.jsx(mE.Slot,{scope:n,children:d.jsx(et.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:ze(o.onScroll,c=>{const u=c.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=i;if(h!=null&&h.current&&f){const p=Math.abs(l.current-u.scrollTop);if(p>0){const m=window.innerHeight-Vi*2,y=parseFloat(f.style.minHeight),x=parseFloat(f.style.height),b=Math.max(y,x);if(b<m){const C=b+p,E=Math.min(m,C),R=C-E;f.style.height=E+"px",f.style.bottom==="0px"&&(u.scrollTop=R>0?R:0,f.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});TW.displayName=cI;var NW="SelectGroup",[Qve,Xve]=Wm(NW),Jve=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,o=_s();return d.jsx(Qve,{scope:n,id:o,children:d.jsx(et.div,{role:"group","aria-labelledby":o,...r,ref:e})})});Jve.displayName=NW;var IW="SelectLabel",RW=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,o=Xve(IW,n);return d.jsx(et.div,{id:o.id,...r,ref:e})});RW.displayName=IW;var Tx="SelectItem",[Zve,AW]=Wm(Tx),PW=g.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:o=!1,textValue:s,...i}=t,a=ud(Tx,n),l=dd(Tx,n),c=a.value===r,[u,f]=g.useState(s??""),[h,p]=g.useState(!1),m=bt(e,C=>{var E;return(E=l.itemRefCallback)==null?void 0:E.call(l,C,r,o)}),y=_s(),x=g.useRef("touch"),b=()=>{o||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return d.jsx(Zve,{scope:n,value:r,disabled:o,textId:y,isSelected:c,onItemTextChange:g.useCallback(C=>{f(E=>E||((C==null?void 0:C.textContent)??"").trim())},[]),children:d.jsx(mE.ItemSlot,{scope:n,value:r,disabled:o,textValue:u,children:d.jsx(et.div,{role:"option","aria-labelledby":y,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...i,ref:m,onFocus:ze(i.onFocus,()=>p(!0)),onBlur:ze(i.onBlur,()=>p(!1)),onClick:ze(i.onClick,()=>{x.current!=="mouse"&&b()}),onPointerUp:ze(i.onPointerUp,()=>{x.current==="mouse"&&b()}),onPointerDown:ze(i.onPointerDown,C=>{x.current=C.pointerType}),onPointerMove:ze(i.onPointerMove,C=>{var E;x.current=C.pointerType,o?(E=l.onItemLeave)==null||E.call(l):x.current==="mouse"&&C.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ze(i.onPointerLeave,C=>{var E;C.currentTarget===document.activeElement&&((E=l.onItemLeave)==null||E.call(l))}),onKeyDown:ze(i.onKeyDown,C=>{var R;((R=l.searchRef)==null?void 0:R.current)!==""&&C.key===" "||($ve.includes(C.key)&&b(),C.key===" "&&C.preventDefault())})})})})});PW.displayName=Tx;var cy="SelectItemText",MW=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:o,...s}=t,i=ud(cy,n),a=dd(cy,n),l=AW(cy,n),c=Hve(cy,n),[u,f]=g.useState(null),h=bt(e,b=>f(b),l.onItemTextChange,b=>{var C;return(C=a.itemTextRefCallback)==null?void 0:C.call(a,b,l.value,l.disabled)}),p=u==null?void 0:u.textContent,m=g.useMemo(()=>d.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:y,onNativeOptionRemove:x}=c;return Lr(()=>(y(m),()=>x(m)),[y,x,m]),d.jsxs(d.Fragment,{children:[d.jsx(et.span,{id:l.textId,...s,ref:h}),l.isSelected&&i.valueNode&&!i.valueNodeHasChildren?yo.createPortal(s.children,i.valueNode):null]})});MW.displayName=cy;var DW="SelectItemIndicator",OW=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return AW(DW,n).isSelected?d.jsx(et.span,{"aria-hidden":!0,...r,ref:e}):null});OW.displayName=DW;var uI="SelectScrollUpButton",LW=g.forwardRef((t,e)=>{const n=dd(uI,t.__scopeSelect),r=AP(uI,t.__scopeSelect),[o,s]=g.useState(!1),i=bt(e,r.onScrollButtonChange);return Lr(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),o?d.jsx(VW,{...t,ref:i,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});LW.displayName=uI;var dI="SelectScrollDownButton",jW=g.forwardRef((t,e)=>{const n=dd(dI,t.__scopeSelect),r=AP(dI,t.__scopeSelect),[o,s]=g.useState(!1),i=bt(e,r.onScrollButtonChange);return Lr(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),o?d.jsx(VW,{...t,ref:i,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});jW.displayName=dI;var VW=g.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...o}=t,s=dd("SelectScrollButton",n),i=g.useRef(null),a=gE(n),l=g.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return g.useEffect(()=>()=>l(),[l]),Lr(()=>{var u;const c=a().find(f=>f.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),d.jsx(et.div,{"aria-hidden":!0,...o,ref:e,style:{flexShrink:0,...o.style},onPointerDown:ze(o.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:ze(o.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:ze(o.onPointerLeave,()=>{l()})})}),ewe="SelectSeparator",$W=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return d.jsx(et.div,{"aria-hidden":!0,...r,ref:e})});$W.displayName=ewe;var fI="SelectArrow",twe=g.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,o=yE(n),s=ud(fI,n),i=dd(fI,n);return s.open&&i.position==="popper"?d.jsx(fP,{...o,...r,ref:e}):null});twe.displayName=fI;function BW(t){return t===""||t===void 0}var FW=g.forwardRef((t,e)=>{const{value:n,...r}=t,o=g.useRef(null),s=bt(e,o),i=fE(n);return g.useEffect(()=>{const a=o.current,l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(i!==n&&u){const f=new Event("change",{bubbles:!0});u.call(a,n),a.dispatchEvent(f)}},[i,n]),d.jsx(mW,{asChild:!0,children:d.jsx("select",{...r,ref:s,defaultValue:n})})});FW.displayName="BubbleSelect";function UW(t){const e=Xn(t),n=g.useRef(""),r=g.useRef(0),o=g.useCallback(i=>{const a=n.current+i;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=g.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,o,s]}function HW(t,e,n){const o=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let i=nwe(t,Math.max(s,0));o.length===1&&(i=i.filter(c=>c!==n));const l=i.find(c=>c.textValue.toLowerCase().startsWith(o.toLowerCase()));return l!==n?l:void 0}function nwe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var rwe=gW,zW=vW,owe=bW,swe=xW,iwe=_W,WW=CW,awe=TW,GW=RW,qW=PW,lwe=MW,cwe=OW,KW=LW,YW=jW,QW=$W;const am=rwe,lm=owe,Rf=g.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(zW,{ref:r,className:Ve("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,d.jsx(swe,{asChild:!0,children:d.jsx(lE,{className:"h-4 w-4 opacity-50"})})]}));Rf.displayName=zW.displayName;const XW=g.forwardRef(({className:t,...e},n)=>d.jsx(KW,{ref:n,className:Ve("flex cursor-default items-center justify-center py-1",t),...e,children:d.jsx(j1e,{className:"h-4 w-4"})}));XW.displayName=KW.displayName;const JW=g.forwardRef(({className:t,...e},n)=>d.jsx(YW,{ref:n,className:Ve("flex cursor-default items-center justify-center py-1",t),...e,children:d.jsx(lE,{className:"h-4 w-4"})}));JW.displayName=YW.displayName;const Af=g.forwardRef(({className:t,children:e,position:n="popper",...r},o)=>d.jsx(iwe,{children:d.jsxs(WW,{ref:o,className:Ve("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[d.jsx(XW,{}),d.jsx(awe,{className:Ve("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),d.jsx(JW,{})]})}));Af.displayName=WW.displayName;const uwe=g.forwardRef(({className:t,...e},n)=>d.jsx(GW,{ref:n,className:Ve("px-2 py-1.5 text-sm font-semibold",t),...e}));uwe.displayName=GW.displayName;const Ir=g.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(qW,{ref:r,className:Ve("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[d.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsx(cwe,{children:d.jsx(jv,{className:"h-4 w-4"})})}),d.jsx(lwe,{children:e})]}));Ir.displayName=qW.displayName;const dwe=g.forwardRef(({className:t,...e},n)=>d.jsx(QW,{ref:n,className:Ve("-mx-1 my-1 h-px bg-muted",t),...e}));dwe.displayName=QW.displayName;function Bt(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Rs(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Pr(t,e){const n=Bt(t);return isNaN(e)?Rs(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function ra(t,e){const n=Bt(t);if(isNaN(e))return Rs(t,NaN);if(!e)return n;const r=n.getDate(),o=Rs(t,n.getTime());o.setMonth(n.getMonth()+e+1,0);const s=o.getDate();return r>=s?o:(n.setFullYear(o.getFullYear(),o.getMonth(),r),n)}const PP=6048e5,fwe=864e5;let hwe={};function Bv(){return hwe}function Cs(t,e){var a,l,c,u;const n=Bv(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,o=Bt(t),s=o.getDay(),i=(s<r?7:0)+s-r;return o.setDate(o.getDate()-i),o.setHours(0,0,0,0),o}function Pf(t){return Cs(t,{weekStartsOn:1})}function ZW(t){const e=Bt(t),n=e.getFullYear(),r=Rs(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const o=Pf(r),s=Rs(t,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const i=Pf(s);return e.getTime()>=o.getTime()?n+1:e.getTime()>=i.getTime()?n:n-1}function cm(t){const e=Bt(t);return e.setHours(0,0,0,0),e}function Nx(t){const e=Bt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function ja(t,e){const n=cm(t),r=cm(e),o=+n-Nx(n),s=+r-Nx(r);return Math.round((o-s)/fwe)}function pwe(t){const e=ZW(t),n=Rs(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Pf(n)}function E1(t,e){const n=e*7;return Pr(t,n)}function mwe(t,e){return ra(t,e*12)}function gwe(t){let e;return t.forEach(function(n){const r=Bt(n);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function ywe(t){let e;return t.forEach(n=>{const r=Bt(n);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function Mr(t,e){const n=cm(t),r=cm(e);return+n==+r}function MP(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function vwe(t){if(!MP(t)&&typeof t!="number")return!1;const e=Bt(t);return!isNaN(Number(e))}function k1(t,e){const n=Bt(t),r=Bt(e),o=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return o*12+s}function wwe(t,e,n){const r=Cs(t,n),o=Cs(e,n),s=+r-Nx(r),i=+o-Nx(o);return Math.round((s-i)/PP)}function DP(t){const e=Bt(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function es(t){const e=Bt(t);return e.setDate(1),e.setHours(0,0,0,0),e}function eG(t){const e=Bt(t),n=Rs(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function OP(t,e){var a,l,c,u;const n=Bv(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,o=Bt(t),s=o.getDay(),i=(s<r?-7:0)+6-(s-r);return o.setDate(o.getDate()+i),o.setHours(23,59,59,999),o}function tG(t){return OP(t,{weekStartsOn:1})}const bwe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},xwe=(t,e,n)=>{let r;const o=bwe[t];return typeof o=="string"?r=o:e===1?r=o.one:r=o.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Gk(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const _we={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Cwe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ewe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},kwe={date:Gk({formats:_we,defaultWidth:"full"}),time:Gk({formats:Cwe,defaultWidth:"full"}),dateTime:Gk({formats:Ewe,defaultWidth:"full"})},Swe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Twe=(t,e,n,r)=>Swe[t];function $g(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let o;if(r==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):i;o=t.formattingValues[a]||t.formattingValues[i]}else{const i=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;o=t.values[a]||t.values[i]}const s=t.argumentCallback?t.argumentCallback(e):e;return o[s]}}const Nwe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Iwe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Rwe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Awe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Pwe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Mwe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Dwe=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Owe={ordinalNumber:Dwe,era:$g({values:Nwe,defaultWidth:"wide"}),quarter:$g({values:Iwe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:$g({values:Rwe,defaultWidth:"wide"}),day:$g({values:Awe,defaultWidth:"wide"}),dayPeriod:$g({values:Pwe,defaultWidth:"wide",formattingValues:Mwe,defaultFormattingWidth:"wide"})};function Bg(t){return(e,n={})=>{const r=n.width,o=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(o);if(!s)return null;const i=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?jwe(a,f=>f.test(i)):Lwe(a,f=>f.test(i));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(i.length);return{value:c,rest:u}}}function Lwe(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function jwe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Vwe(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const o=r[0],s=e.match(t.parsePattern);if(!s)return null;let i=t.valueCallback?t.valueCallback(s[0]):s[0];i=n.valueCallback?n.valueCallback(i):i;const a=e.slice(o.length);return{value:i,rest:a}}}const $we=/^(\d+)(th|st|nd|rd)?/i,Bwe=/\d+/i,Fwe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Uwe={any:[/^b/i,/^(a|c)/i]},Hwe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},zwe={any:[/1/i,/2/i,/3/i,/4/i]},Wwe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Gwe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},qwe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Kwe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ywe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Qwe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Xwe={ordinalNumber:Vwe({matchPattern:$we,parsePattern:Bwe,valueCallback:t=>parseInt(t,10)}),era:Bg({matchPatterns:Fwe,defaultMatchWidth:"wide",parsePatterns:Uwe,defaultParseWidth:"any"}),quarter:Bg({matchPatterns:Hwe,defaultMatchWidth:"wide",parsePatterns:zwe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Bg({matchPatterns:Wwe,defaultMatchWidth:"wide",parsePatterns:Gwe,defaultParseWidth:"any"}),day:Bg({matchPatterns:qwe,defaultMatchWidth:"wide",parsePatterns:Kwe,defaultParseWidth:"any"}),dayPeriod:Bg({matchPatterns:Ywe,defaultMatchWidth:"any",parsePatterns:Qwe,defaultParseWidth:"any"})},nG={code:"en-US",formatDistance:xwe,formatLong:kwe,formatRelative:Twe,localize:Owe,match:Xwe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Jwe(t){const e=Bt(t);return ja(e,eG(e))+1}function rG(t){const e=Bt(t),n=+Pf(e)-+pwe(e);return Math.round(n/PP)+1}function oG(t,e){var u,f,h,p;const n=Bt(t),r=n.getFullYear(),o=Bv(),s=(e==null?void 0:e.firstWeekContainsDate)??((f=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??o.firstWeekContainsDate??((p=(h=o.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,i=Rs(t,0);i.setFullYear(r+1,0,s),i.setHours(0,0,0,0);const a=Cs(i,e),l=Rs(t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=Cs(l,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function Zwe(t,e){var a,l,c,u;const n=Bv(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,o=oG(t,e),s=Rs(t,0);return s.setFullYear(o,0,r),s.setHours(0,0,0,0),Cs(s,e)}function sG(t,e){const n=Bt(t),r=+Cs(n,e)-+Zwe(n,e);return Math.round(r/PP)+1}function tn(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Gc={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return tn(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):tn(n+1,2)},d(t,e){return tn(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return tn(t.getHours()%12||12,e.length)},H(t,e){return tn(t.getHours(),e.length)},m(t,e){return tn(t.getMinutes(),e.length)},s(t,e){return tn(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),o=Math.trunc(r*Math.pow(10,n-3));return tn(o,e.length)}},Lh={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},WO={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),o=r>0?r:1-r;return n.ordinalNumber(o,{unit:"year"})}return Gc.y(t,e)},Y:function(t,e,n,r){const o=oG(t,r),s=o>0?o:1-o;if(e==="YY"){const i=s%100;return tn(i,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):tn(s,e.length)},R:function(t,e){const n=ZW(t);return tn(n,e.length)},u:function(t,e){const n=t.getFullYear();return tn(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return tn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return tn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Gc.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return tn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const o=sG(t,r);return e==="wo"?n.ordinalNumber(o,{unit:"week"}):tn(o,e.length)},I:function(t,e,n){const r=rG(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):tn(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Gc.d(t,e)},D:function(t,e,n){const r=Jwe(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):tn(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const o=t.getDay(),s=(o-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return tn(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const o=t.getDay(),s=(o-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return tn(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),o=r===0?7:r;switch(e){case"i":return String(o);case"ii":return tn(o,e.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const o=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let o;switch(r===12?o=Lh.noon:r===0?o=Lh.midnight:o=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let o;switch(r>=17?o=Lh.evening:r>=12?o=Lh.afternoon:r>=4?o=Lh.morning:o=Lh.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Gc.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Gc.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):tn(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):tn(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Gc.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Gc.s(t,e)},S:function(t,e){return Gc.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return qO(r);case"XXXX":case"XX":return Fd(r);case"XXXXX":case"XXX":default:return Fd(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return qO(r);case"xxxx":case"xx":return Fd(r);case"xxxxx":case"xxx":default:return Fd(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+GO(r,":");case"OOOO":default:return"GMT"+Fd(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+GO(r,":");case"zzzz":default:return"GMT"+Fd(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return tn(r,e.length)},T:function(t,e,n){const r=t.getTime();return tn(r,e.length)}};function GO(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),o=Math.trunc(r/60),s=r%60;return s===0?n+String(o):n+String(o)+e+tn(s,2)}function qO(t,e){return t%60===0?(t>0?"-":"+")+tn(Math.abs(t)/60,2):Fd(t,e)}function Fd(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),o=tn(Math.trunc(r/60),2),s=tn(r%60,2);return n+o+e+s}const KO=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},iG=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},e0e=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],o=n[2];if(!o)return KO(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",KO(r,e)).replace("{{time}}",iG(o,e))},t0e={p:iG,P:e0e},n0e=/^D+$/,r0e=/^Y+$/,o0e=["D","DD","YY","YYYY"];function s0e(t){return n0e.test(t)}function i0e(t){return r0e.test(t)}function a0e(t,e,n){const r=l0e(t,e,n);if(console.warn(r),o0e.includes(t))throw new RangeError(r)}function l0e(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const c0e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,u0e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,d0e=/^'([^]*?)'?$/,f0e=/''/g,h0e=/[a-zA-Z]/;function ct(t,e,n){var u,f,h,p,m,y,x,b;const r=Bv(),o=(n==null?void 0:n.locale)??r.locale??nG,s=(n==null?void 0:n.firstWeekContainsDate)??((f=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(h=r.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,i=(n==null?void 0:n.weekStartsOn)??((y=(m=n==null?void 0:n.locale)==null?void 0:m.options)==null?void 0:y.weekStartsOn)??r.weekStartsOn??((b=(x=r.locale)==null?void 0:x.options)==null?void 0:b.weekStartsOn)??0,a=Bt(t);if(!vwe(a))throw new RangeError("Invalid time value");let l=e.match(u0e).map(C=>{const E=C[0];if(E==="p"||E==="P"){const R=t0e[E];return R(C,o.formatLong)}return C}).join("").match(c0e).map(C=>{if(C==="''")return{isToken:!1,value:"'"};const E=C[0];if(E==="'")return{isToken:!1,value:p0e(C)};if(WO[E])return{isToken:!0,value:C};if(E.match(h0e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");return{isToken:!1,value:C}});o.localize.preprocessor&&(l=o.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:i,locale:o};return l.map(C=>{if(!C.isToken)return C.value;const E=C.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&i0e(E)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&s0e(E))&&a0e(E,e,String(t));const R=WO[E[0]];return R(a,E,o.localize,c)}).join("")}function p0e(t){const e=t.match(d0e);return e?e[1].replace(f0e,"'"):t}function m0e(t){const e=Bt(t),n=e.getFullYear(),r=e.getMonth(),o=Rs(t,0);return o.setFullYear(n,r+1,0),o.setHours(0,0,0,0),o.getDate()}function g0e(t){return Math.trunc(+Bt(t)/1e3)}function y0e(t){const e=Bt(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(0,0,0,0),e}function v0e(t,e){return wwe(y0e(t),es(t),e)+1}function hI(t,e){const n=Bt(t),r=Bt(e);return n.getTime()>r.getTime()}function aG(t,e){const n=Bt(t),r=Bt(e);return+n<+r}function LP(t,e){const n=Bt(t),r=Bt(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function w0e(t,e){const n=Bt(t),r=Bt(e);return n.getFullYear()===r.getFullYear()}function fb(t,e){return Pr(t,-e)}function qk(t,e){const n=Bt(t),r=n.getFullYear(),o=n.getDate(),s=Rs(t,0);s.setFullYear(r,e,15),s.setHours(0,0,0,0);const i=m0e(s);return n.setMonth(e,Math.min(o,i)),n}function Ix(t,e){const n=Bt(t);return isNaN(+n)?Rs(t,NaN):(n.setFullYear(e),n)}function b0e(t,e){return E1(t,-1)}var st=function(){return st=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},st.apply(this,arguments)};function x0e(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function lG(t,e,n){for(var r=0,o=e.length,s;r<o;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function Fv(t){return t.mode==="multiple"}function Uv(t){return t.mode==="range"}function vE(t){return t.mode==="single"}var _0e={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function C0e(t,e){return ct(t,"LLLL y",e)}function E0e(t,e){return ct(t,"d",e)}function k0e(t,e){return ct(t,"LLLL",e)}function S0e(t){return"".concat(t)}function T0e(t,e){return ct(t,"cccccc",e)}function N0e(t,e){return ct(t,"yyyy",e)}var I0e=Object.freeze({__proto__:null,formatCaption:C0e,formatDay:E0e,formatMonthCaption:k0e,formatWeekNumber:S0e,formatWeekdayName:T0e,formatYearCaption:N0e}),R0e=function(t,e,n){return ct(t,"do MMMM (EEEE)",n)},A0e=function(){return"Month: "},P0e=function(){return"Go to next month"},M0e=function(){return"Go to previous month"},D0e=function(t,e){return ct(t,"cccc",e)},O0e=function(t){return"Week n. ".concat(t)},L0e=function(){return"Year: "},j0e=Object.freeze({__proto__:null,labelDay:R0e,labelMonthDropdown:A0e,labelNext:P0e,labelPrevious:M0e,labelWeekNumber:O0e,labelWeekday:D0e,labelYearDropdown:L0e});function V0e(){var t="buttons",e=_0e,n=nG,r={},o={},s=1,i={},a=new Date;return{captionLayout:t,classNames:e,formatters:I0e,labels:j0e,locale:n,modifiersClassNames:r,modifiers:o,numberOfMonths:s,styles:i,today:a,mode:"default"}}function $0e(t){var e=t.fromYear,n=t.toYear,r=t.fromMonth,o=t.toMonth,s=t.fromDate,i=t.toDate;return r?s=es(r):e&&(s=new Date(e,0,1)),o?i=DP(o):n&&(i=new Date(n,11,31)),{fromDate:s?cm(s):void 0,toDate:i?cm(i):void 0}}var cG=g.createContext(void 0);function B0e(t){var e,n=t.initialProps,r=V0e(),o=$0e(n),s=o.fromDate,i=o.toDate,a=(e=n.captionLayout)!==null&&e!==void 0?e:r.captionLayout;a!=="buttons"&&(!s||!i)&&(a="buttons");var l;(vE(n)||Fv(n)||Uv(n))&&(l=n.onSelect);var c=st(st(st({},r),n),{captionLayout:a,classNames:st(st({},r.classNames),n.classNames),components:st({},n.components),formatters:st(st({},r.formatters),n.formatters),fromDate:s,labels:st(st({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:st(st({},r.modifiers),n.modifiers),modifiersClassNames:st(st({},r.modifiersClassNames),n.modifiersClassNames),onSelect:l,styles:st(st({},r.styles),n.styles),toDate:i});return d.jsx(cG.Provider,{value:c,children:t.children})}function bn(){var t=g.useContext(cG);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function uG(t){var e=bn(),n=e.locale,r=e.classNames,o=e.styles,s=e.formatters.formatCaption;return d.jsx("div",{className:r.caption_label,style:o.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:s(t.displayMonth,{locale:n})})}function F0e(t){return d.jsx("svg",st({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:d.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function dG(t){var e,n,r=t.onChange,o=t.value,s=t.children,i=t.caption,a=t.className,l=t.style,c=bn(),u=(n=(e=c.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&n!==void 0?n:F0e;return d.jsxs("div",{className:a,style:l,children:[d.jsx("span",{className:c.classNames.vhidden,children:t["aria-label"]}),d.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:c.classNames.dropdown,style:c.styles.dropdown,value:o,onChange:r,children:s}),d.jsxs("div",{className:c.classNames.caption_label,style:c.styles.caption_label,"aria-hidden":"true",children:[i,d.jsx(u,{className:c.classNames.dropdown_icon,style:c.styles.dropdown_icon})]})]})}function U0e(t){var e,n=bn(),r=n.fromDate,o=n.toDate,s=n.styles,i=n.locale,a=n.formatters.formatMonthCaption,l=n.classNames,c=n.components,u=n.labels.labelMonthDropdown;if(!r)return d.jsx(d.Fragment,{});if(!o)return d.jsx(d.Fragment,{});var f=[];if(w0e(r,o))for(var h=es(r),p=r.getMonth();p<=o.getMonth();p++)f.push(qk(h,p));else for(var h=es(new Date),p=0;p<=11;p++)f.push(qk(h,p));var m=function(x){var b=Number(x.target.value),C=qk(es(t.displayMonth),b);t.onChange(C)},y=(e=c==null?void 0:c.Dropdown)!==null&&e!==void 0?e:dG;return d.jsx(y,{name:"months","aria-label":u(),className:l.dropdown_month,style:s.dropdown_month,onChange:m,value:t.displayMonth.getMonth(),caption:a(t.displayMonth,{locale:i}),children:f.map(function(x){return d.jsx("option",{value:x.getMonth(),children:a(x,{locale:i})},x.getMonth())})})}function H0e(t){var e,n=t.displayMonth,r=bn(),o=r.fromDate,s=r.toDate,i=r.locale,a=r.styles,l=r.classNames,c=r.components,u=r.formatters.formatYearCaption,f=r.labels.labelYearDropdown,h=[];if(!o)return d.jsx(d.Fragment,{});if(!s)return d.jsx(d.Fragment,{});for(var p=o.getFullYear(),m=s.getFullYear(),y=p;y<=m;y++)h.push(Ix(eG(new Date),y));var x=function(C){var E=Ix(es(n),Number(C.target.value));t.onChange(E)},b=(e=c==null?void 0:c.Dropdown)!==null&&e!==void 0?e:dG;return d.jsx(b,{name:"years","aria-label":f(),className:l.dropdown_year,style:a.dropdown_year,onChange:x,value:n.getFullYear(),caption:u(n,{locale:i}),children:h.map(function(C){return d.jsx("option",{value:C.getFullYear(),children:u(C,{locale:i})},C.getFullYear())})})}function z0e(t,e){var n=g.useState(t),r=n[0],o=n[1],s=e===void 0?r:e;return[s,o]}function W0e(t){var e=t.month,n=t.defaultMonth,r=t.today,o=e||n||r||new Date,s=t.toDate,i=t.fromDate,a=t.numberOfMonths,l=a===void 0?1:a;if(s&&k1(s,o)<0){var c=-1*(l-1);o=ra(s,c)}return i&&k1(o,i)<0&&(o=i),es(o)}function G0e(){var t=bn(),e=W0e(t),n=z0e(e,t.month),r=n[0],o=n[1],s=function(i){var a;if(!t.disableNavigation){var l=es(i);o(l),(a=t.onMonthChange)===null||a===void 0||a.call(t,l)}};return[r,s]}function q0e(t,e){for(var n=e.reverseMonths,r=e.numberOfMonths,o=es(t),s=es(ra(o,r)),i=k1(s,o),a=[],l=0;l<i;l++){var c=ra(o,l);a.push(c)}return n&&(a=a.reverse()),a}function K0e(t,e){if(!e.disableNavigation){var n=e.toDate,r=e.pagedNavigation,o=e.numberOfMonths,s=o===void 0?1:o,i=r?s:1,a=es(t);if(!n)return ra(a,i);var l=k1(n,t);if(!(l<s))return ra(a,i)}}function Y0e(t,e){if(!e.disableNavigation){var n=e.fromDate,r=e.pagedNavigation,o=e.numberOfMonths,s=o===void 0?1:o,i=r?s:1,a=es(t);if(!n)return ra(a,-i);var l=k1(a,n);if(!(l<=0))return ra(a,-i)}}var fG=g.createContext(void 0);function Q0e(t){var e=bn(),n=G0e(),r=n[0],o=n[1],s=q0e(r,e),i=K0e(r,e),a=Y0e(r,e),l=function(f){return s.some(function(h){return LP(f,h)})},c=function(f,h){l(f)||(h&&aG(f,h)?o(ra(f,1+e.numberOfMonths*-1)):o(f))},u={currentMonth:r,displayMonths:s,goToMonth:o,goToDate:c,previousMonth:a,nextMonth:i,isDateDisplayed:l};return d.jsx(fG.Provider,{value:u,children:t.children})}function Hv(){var t=g.useContext(fG);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function YO(t){var e,n=bn(),r=n.classNames,o=n.styles,s=n.components,i=Hv().goToMonth,a=function(u){i(ra(u,t.displayIndex?-t.displayIndex:0))},l=(e=s==null?void 0:s.CaptionLabel)!==null&&e!==void 0?e:uG,c=d.jsx(l,{id:t.id,displayMonth:t.displayMonth});return d.jsxs("div",{className:r.caption_dropdowns,style:o.caption_dropdowns,children:[d.jsx("div",{className:r.vhidden,children:c}),d.jsx(U0e,{onChange:a,displayMonth:t.displayMonth}),d.jsx(H0e,{onChange:a,displayMonth:t.displayMonth})]})}function X0e(t){return d.jsx("svg",st({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:d.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function J0e(t){return d.jsx("svg",st({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:d.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Rx=g.forwardRef(function(t,e){var n=bn(),r=n.classNames,o=n.styles,s=[r.button_reset,r.button];t.className&&s.push(t.className);var i=s.join(" "),a=st(st({},o.button_reset),o.button);return t.style&&Object.assign(a,t.style),d.jsx("button",st({},t,{ref:e,type:"button",className:i,style:a}))});function Z0e(t){var e,n,r=bn(),o=r.dir,s=r.locale,i=r.classNames,a=r.styles,l=r.labels,c=l.labelPrevious,u=l.labelNext,f=r.components;if(!t.nextMonth&&!t.previousMonth)return d.jsx(d.Fragment,{});var h=c(t.previousMonth,{locale:s}),p=[i.nav_button,i.nav_button_previous].join(" "),m=u(t.nextMonth,{locale:s}),y=[i.nav_button,i.nav_button_next].join(" "),x=(e=f==null?void 0:f.IconRight)!==null&&e!==void 0?e:J0e,b=(n=f==null?void 0:f.IconLeft)!==null&&n!==void 0?n:X0e;return d.jsxs("div",{className:i.nav,style:a.nav,children:[!t.hidePrevious&&d.jsx(Rx,{name:"previous-month","aria-label":h,className:p,style:a.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:o==="rtl"?d.jsx(x,{className:i.nav_icon,style:a.nav_icon}):d.jsx(b,{className:i.nav_icon,style:a.nav_icon})}),!t.hideNext&&d.jsx(Rx,{name:"next-month","aria-label":m,className:y,style:a.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:o==="rtl"?d.jsx(b,{className:i.nav_icon,style:a.nav_icon}):d.jsx(x,{className:i.nav_icon,style:a.nav_icon})})]})}function QO(t){var e=bn().numberOfMonths,n=Hv(),r=n.previousMonth,o=n.nextMonth,s=n.goToMonth,i=n.displayMonths,a=i.findIndex(function(m){return LP(t.displayMonth,m)}),l=a===0,c=a===i.length-1,u=e>1&&(l||!c),f=e>1&&(c||!l),h=function(){r&&s(r)},p=function(){o&&s(o)};return d.jsx(Z0e,{displayMonth:t.displayMonth,hideNext:u,hidePrevious:f,nextMonth:o,previousMonth:r,onPreviousClick:h,onNextClick:p})}function ebe(t){var e,n=bn(),r=n.classNames,o=n.disableNavigation,s=n.styles,i=n.captionLayout,a=n.components,l=(e=a==null?void 0:a.CaptionLabel)!==null&&e!==void 0?e:uG,c;return o?c=d.jsx(l,{id:t.id,displayMonth:t.displayMonth}):i==="dropdown"?c=d.jsx(YO,{displayMonth:t.displayMonth,id:t.id}):i==="dropdown-buttons"?c=d.jsxs(d.Fragment,{children:[d.jsx(YO,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),d.jsx(QO,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):c=d.jsxs(d.Fragment,{children:[d.jsx(l,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),d.jsx(QO,{displayMonth:t.displayMonth,id:t.id})]}),d.jsx("div",{className:r.caption,style:s.caption,children:c})}function tbe(t){var e=bn(),n=e.footer,r=e.styles,o=e.classNames.tfoot;return n?d.jsx("tfoot",{className:o,style:r.tfoot,children:d.jsx("tr",{children:d.jsx("td",{colSpan:8,children:n})})}):d.jsx(d.Fragment,{})}function nbe(t,e,n){for(var r=n?Pf(new Date):Cs(new Date,{locale:t,weekStartsOn:e}),o=[],s=0;s<7;s++){var i=Pr(r,s);o.push(i)}return o}function rbe(){var t=bn(),e=t.classNames,n=t.styles,r=t.showWeekNumber,o=t.locale,s=t.weekStartsOn,i=t.ISOWeek,a=t.formatters.formatWeekdayName,l=t.labels.labelWeekday,c=nbe(o,s,i);return d.jsxs("tr",{style:n.head_row,className:e.head_row,children:[r&&d.jsx("td",{style:n.head_cell,className:e.head_cell}),c.map(function(u,f){return d.jsx("th",{scope:"col",className:e.head_cell,style:n.head_cell,"aria-label":l(u,{locale:o}),children:a(u,{locale:o})},f)})]})}function obe(){var t,e=bn(),n=e.classNames,r=e.styles,o=e.components,s=(t=o==null?void 0:o.HeadRow)!==null&&t!==void 0?t:rbe;return d.jsx("thead",{style:r.head,className:n.head,children:d.jsx(s,{})})}function sbe(t){var e=bn(),n=e.locale,r=e.formatters.formatDay;return d.jsx(d.Fragment,{children:r(t.date,{locale:n})})}var jP=g.createContext(void 0);function ibe(t){if(!Fv(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return d.jsx(jP.Provider,{value:e,children:t.children})}return d.jsx(abe,{initialProps:t.initialProps,children:t.children})}function abe(t){var e=t.initialProps,n=t.children,r=e.selected,o=e.min,s=e.max,i=function(c,u,f){var h,p;(h=e.onDayClick)===null||h===void 0||h.call(e,c,u,f);var m=!!(u.selected&&o&&(r==null?void 0:r.length)===o);if(!m){var y=!!(!u.selected&&s&&(r==null?void 0:r.length)===s);if(!y){var x=r?lG([],r):[];if(u.selected){var b=x.findIndex(function(C){return Mr(c,C)});x.splice(b,1)}else x.push(c);(p=e.onSelect)===null||p===void 0||p.call(e,x,c,u,f)}}},a={disabled:[]};r&&a.disabled.push(function(c){var u=s&&r.length>s-1,f=r.some(function(h){return Mr(h,c)});return!!(u&&!f)});var l={selected:r,onDayClick:i,modifiers:a};return d.jsx(jP.Provider,{value:l,children:n})}function VP(){var t=g.useContext(jP);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function lbe(t,e){var n=e||{},r=n.from,o=n.to;return r&&o?Mr(o,t)&&Mr(r,t)?void 0:Mr(o,t)?{from:o,to:void 0}:Mr(r,t)?void 0:hI(r,t)?{from:t,to:o}:{from:r,to:t}:o?hI(t,o)?{from:o,to:t}:{from:t,to:o}:r?aG(t,r)?{from:t,to:r}:{from:r,to:t}:{from:t,to:void 0}}var $P=g.createContext(void 0);function cbe(t){if(!Uv(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return d.jsx($P.Provider,{value:e,children:t.children})}return d.jsx(ube,{initialProps:t.initialProps,children:t.children})}function ube(t){var e=t.initialProps,n=t.children,r=e.selected,o=r||{},s=o.from,i=o.to,a=e.min,l=e.max,c=function(p,m,y){var x,b;(x=e.onDayClick)===null||x===void 0||x.call(e,p,m,y);var C=lbe(p,r);(b=e.onSelect)===null||b===void 0||b.call(e,C,p,m,y)},u={range_start:[],range_end:[],range_middle:[],disabled:[]};if(s?(u.range_start=[s],i?(u.range_end=[i],Mr(s,i)||(u.range_middle=[{after:s,before:i}])):u.range_end=[s]):i&&(u.range_start=[i],u.range_end=[i]),a&&(s&&!i&&u.disabled.push({after:fb(s,a-1),before:Pr(s,a-1)}),s&&i&&u.disabled.push({after:s,before:Pr(s,a-1)}),!s&&i&&u.disabled.push({after:fb(i,a-1),before:Pr(i,a-1)})),l){if(s&&!i&&(u.disabled.push({before:Pr(s,-l+1)}),u.disabled.push({after:Pr(s,l-1)})),s&&i){var f=ja(i,s)+1,h=l-f;u.disabled.push({before:fb(s,h)}),u.disabled.push({after:Pr(i,h)})}!s&&i&&(u.disabled.push({before:Pr(i,-l+1)}),u.disabled.push({after:Pr(i,l-1)}))}return d.jsx($P.Provider,{value:{selected:r,onDayClick:c,modifiers:u},children:n})}function BP(){var t=g.useContext($P);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function hb(t){return Array.isArray(t)?lG([],t):t!==void 0?[t]:[]}function dbe(t){var e={};return Object.entries(t).forEach(function(n){var r=n[0],o=n[1];e[r]=hb(o)}),e}var oa;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(oa||(oa={}));var fbe=oa.Selected,Al=oa.Disabled,hbe=oa.Hidden,pbe=oa.Today,Kk=oa.RangeEnd,Yk=oa.RangeMiddle,Qk=oa.RangeStart,mbe=oa.Outside;function gbe(t,e,n){var r,o=(r={},r[fbe]=hb(t.selected),r[Al]=hb(t.disabled),r[hbe]=hb(t.hidden),r[pbe]=[t.today],r[Kk]=[],r[Yk]=[],r[Qk]=[],r[mbe]=[],r);return t.fromDate&&o[Al].push({before:t.fromDate}),t.toDate&&o[Al].push({after:t.toDate}),Fv(t)?o[Al]=o[Al].concat(e.modifiers[Al]):Uv(t)&&(o[Al]=o[Al].concat(n.modifiers[Al]),o[Qk]=n.modifiers[Qk],o[Yk]=n.modifiers[Yk],o[Kk]=n.modifiers[Kk]),o}var hG=g.createContext(void 0);function ybe(t){var e=bn(),n=VP(),r=BP(),o=gbe(e,n,r),s=dbe(e.modifiers),i=st(st({},o),s);return d.jsx(hG.Provider,{value:i,children:t.children})}function pG(){var t=g.useContext(hG);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function vbe(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function wbe(t){return!!(t&&typeof t=="object"&&"from"in t)}function bbe(t){return!!(t&&typeof t=="object"&&"after"in t)}function xbe(t){return!!(t&&typeof t=="object"&&"before"in t)}function _be(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function Cbe(t,e){var n,r=e.from,o=e.to;if(r&&o){var s=ja(o,r)<0;s&&(n=[o,r],r=n[0],o=n[1]);var i=ja(t,r)>=0&&ja(o,t)>=0;return i}return o?Mr(o,t):r?Mr(r,t):!1}function Ebe(t){return MP(t)}function kbe(t){return Array.isArray(t)&&t.every(MP)}function Sbe(t,e){return e.some(function(n){if(typeof n=="boolean")return n;if(Ebe(n))return Mr(t,n);if(kbe(n))return n.includes(t);if(wbe(n))return Cbe(t,n);if(_be(n))return n.dayOfWeek.includes(t.getDay());if(vbe(n)){var r=ja(n.before,t),o=ja(n.after,t),s=r>0,i=o<0,a=hI(n.before,n.after);return a?i&&s:s||i}return bbe(n)?ja(t,n.after)>0:xbe(n)?ja(n.before,t)>0:typeof n=="function"?n(t):!1})}function FP(t,e,n){var r=Object.keys(e).reduce(function(s,i){var a=e[i];return Sbe(t,a)&&s.push(i),s},[]),o={};return r.forEach(function(s){return o[s]=!0}),n&&!LP(t,n)&&(o.outside=!0),o}function Tbe(t,e){for(var n=es(t[0]),r=DP(t[t.length-1]),o,s,i=n;i<=r;){var a=FP(i,e),l=!a.disabled&&!a.hidden;if(!l){i=Pr(i,1);continue}if(a.selected)return i;a.today&&!s&&(s=i),o||(o=i),i=Pr(i,1)}return s||o}var Nbe=365;function mG(t,e){var n=e.moveBy,r=e.direction,o=e.context,s=e.modifiers,i=e.retry,a=i===void 0?{count:0,lastFocused:t}:i,l=o.weekStartsOn,c=o.fromDate,u=o.toDate,f=o.locale,h={day:Pr,week:E1,month:ra,year:mwe,startOfWeek:function(x){return o.ISOWeek?Pf(x):Cs(x,{locale:f,weekStartsOn:l})},endOfWeek:function(x){return o.ISOWeek?tG(x):OP(x,{locale:f,weekStartsOn:l})}},p=h[n](t,r==="after"?1:-1);r==="before"&&c?p=gwe([c,p]):r==="after"&&u&&(p=ywe([u,p]));var m=!0;if(s){var y=FP(p,s);m=!y.disabled&&!y.hidden}return m?p:a.count>Nbe?a.lastFocused:mG(p,{moveBy:n,direction:r,context:o,modifiers:s,retry:st(st({},a),{count:a.count+1})})}var gG=g.createContext(void 0);function Ibe(t){var e=Hv(),n=pG(),r=g.useState(),o=r[0],s=r[1],i=g.useState(),a=i[0],l=i[1],c=Tbe(e.displayMonths,n),u=o??(a&&e.isDateDisplayed(a))?a:c,f=function(){l(o),s(void 0)},h=function(x){s(x)},p=bn(),m=function(x,b){if(o){var C=mG(o,{moveBy:x,direction:b,context:p,modifiers:n});Mr(o,C)||(e.goToDate(C,o),h(C))}},y={focusedDay:o,focusTarget:u,blur:f,focus:h,focusDayAfter:function(){return m("day","after")},focusDayBefore:function(){return m("day","before")},focusWeekAfter:function(){return m("week","after")},focusWeekBefore:function(){return m("week","before")},focusMonthBefore:function(){return m("month","before")},focusMonthAfter:function(){return m("month","after")},focusYearBefore:function(){return m("year","before")},focusYearAfter:function(){return m("year","after")},focusStartOfWeek:function(){return m("startOfWeek","before")},focusEndOfWeek:function(){return m("endOfWeek","after")}};return d.jsx(gG.Provider,{value:y,children:t.children})}function UP(){var t=g.useContext(gG);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function Rbe(t,e){var n=pG(),r=FP(t,n,e);return r}var HP=g.createContext(void 0);function Abe(t){if(!vE(t.initialProps)){var e={selected:void 0};return d.jsx(HP.Provider,{value:e,children:t.children})}return d.jsx(Pbe,{initialProps:t.initialProps,children:t.children})}function Pbe(t){var e=t.initialProps,n=t.children,r=function(s,i,a){var l,c,u;if((l=e.onDayClick)===null||l===void 0||l.call(e,s,i,a),i.selected&&!e.required){(c=e.onSelect)===null||c===void 0||c.call(e,void 0,s,i,a);return}(u=e.onSelect)===null||u===void 0||u.call(e,s,s,i,a)},o={selected:e.selected,onDayClick:r};return d.jsx(HP.Provider,{value:o,children:n})}function yG(){var t=g.useContext(HP);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function Mbe(t,e){var n=bn(),r=yG(),o=VP(),s=BP(),i=UP(),a=i.focusDayAfter,l=i.focusDayBefore,c=i.focusWeekAfter,u=i.focusWeekBefore,f=i.blur,h=i.focus,p=i.focusMonthBefore,m=i.focusMonthAfter,y=i.focusYearBefore,x=i.focusYearAfter,b=i.focusStartOfWeek,C=i.focusEndOfWeek,E=function(Q){var H,Y,ue,W;vE(n)?(H=r.onDayClick)===null||H===void 0||H.call(r,t,e,Q):Fv(n)?(Y=o.onDayClick)===null||Y===void 0||Y.call(o,t,e,Q):Uv(n)?(ue=s.onDayClick)===null||ue===void 0||ue.call(s,t,e,Q):(W=n.onDayClick)===null||W===void 0||W.call(n,t,e,Q)},R=function(Q){var H;h(t),(H=n.onDayFocus)===null||H===void 0||H.call(n,t,e,Q)},D=function(Q){var H;f(),(H=n.onDayBlur)===null||H===void 0||H.call(n,t,e,Q)},O=function(Q){var H;(H=n.onDayMouseEnter)===null||H===void 0||H.call(n,t,e,Q)},T=function(Q){var H;(H=n.onDayMouseLeave)===null||H===void 0||H.call(n,t,e,Q)},I=function(Q){var H;(H=n.onDayPointerEnter)===null||H===void 0||H.call(n,t,e,Q)},P=function(Q){var H;(H=n.onDayPointerLeave)===null||H===void 0||H.call(n,t,e,Q)},L=function(Q){var H;(H=n.onDayTouchCancel)===null||H===void 0||H.call(n,t,e,Q)},$=function(Q){var H;(H=n.onDayTouchEnd)===null||H===void 0||H.call(n,t,e,Q)},F=function(Q){var H;(H=n.onDayTouchMove)===null||H===void 0||H.call(n,t,e,Q)},V=function(Q){var H;(H=n.onDayTouchStart)===null||H===void 0||H.call(n,t,e,Q)},be=function(Q){var H;(H=n.onDayKeyUp)===null||H===void 0||H.call(n,t,e,Q)},ge=function(Q){var H;switch(Q.key){case"ArrowLeft":Q.preventDefault(),Q.stopPropagation(),n.dir==="rtl"?a():l();break;case"ArrowRight":Q.preventDefault(),Q.stopPropagation(),n.dir==="rtl"?l():a();break;case"ArrowDown":Q.preventDefault(),Q.stopPropagation(),c();break;case"ArrowUp":Q.preventDefault(),Q.stopPropagation(),u();break;case"PageUp":Q.preventDefault(),Q.stopPropagation(),Q.shiftKey?y():p();break;case"PageDown":Q.preventDefault(),Q.stopPropagation(),Q.shiftKey?x():m();break;case"Home":Q.preventDefault(),Q.stopPropagation(),b();break;case"End":Q.preventDefault(),Q.stopPropagation(),C();break}(H=n.onDayKeyDown)===null||H===void 0||H.call(n,t,e,Q)},le={onClick:E,onFocus:R,onBlur:D,onKeyDown:ge,onKeyUp:be,onMouseEnter:O,onMouseLeave:T,onPointerEnter:I,onPointerLeave:P,onTouchCancel:L,onTouchEnd:$,onTouchMove:F,onTouchStart:V};return le}function Dbe(){var t=bn(),e=yG(),n=VP(),r=BP(),o=vE(t)?e.selected:Fv(t)?n.selected:Uv(t)?r.selected:void 0;return o}function Obe(t){return Object.values(oa).includes(t)}function Lbe(t,e){var n=[t.classNames.day];return Object.keys(e).forEach(function(r){var o=t.modifiersClassNames[r];if(o)n.push(o);else if(Obe(r)){var s=t.classNames["day_".concat(r)];s&&n.push(s)}}),n}function jbe(t,e){var n=st({},t.styles.day);return Object.keys(e).forEach(function(r){var o;n=st(st({},n),(o=t.modifiersStyles)===null||o===void 0?void 0:o[r])}),n}function Vbe(t,e,n){var r,o,s,i=bn(),a=UP(),l=Rbe(t,e),c=Mbe(t,l),u=Dbe(),f=!!(i.onDayClick||i.mode!=="default");g.useEffect(function(){var O;l.outside||a.focusedDay&&f&&Mr(a.focusedDay,t)&&((O=n.current)===null||O===void 0||O.focus())},[a.focusedDay,t,n,f,l.outside]);var h=Lbe(i,l).join(" "),p=jbe(i,l),m=!!(l.outside&&!i.showOutsideDays||l.hidden),y=(s=(o=i.components)===null||o===void 0?void 0:o.DayContent)!==null&&s!==void 0?s:sbe,x=d.jsx(y,{date:t,displayMonth:e,activeModifiers:l}),b={style:p,className:h,children:x,role:"gridcell"},C=a.focusTarget&&Mr(a.focusTarget,t)&&!l.outside,E=a.focusedDay&&Mr(a.focusedDay,t),R=st(st(st({},b),(r={disabled:l.disabled,role:"gridcell"},r["aria-selected"]=l.selected,r.tabIndex=E||C?0:-1,r)),c),D={isButton:f,isHidden:m,activeModifiers:l,selectedDays:u,buttonProps:R,divProps:b};return D}function $be(t){var e=g.useRef(null),n=Vbe(t.date,t.displayMonth,e);return n.isHidden?d.jsx("div",{role:"gridcell"}):n.isButton?d.jsx(Rx,st({name:"day",ref:e},n.buttonProps)):d.jsx("div",st({},n.divProps))}function Bbe(t){var e=t.number,n=t.dates,r=bn(),o=r.onWeekNumberClick,s=r.styles,i=r.classNames,a=r.locale,l=r.labels.labelWeekNumber,c=r.formatters.formatWeekNumber,u=c(Number(e),{locale:a});if(!o)return d.jsx("span",{className:i.weeknumber,style:s.weeknumber,children:u});var f=l(Number(e),{locale:a}),h=function(p){o(e,n,p)};return d.jsx(Rx,{name:"week-number","aria-label":f,className:i.weeknumber,style:s.weeknumber,onClick:h,children:u})}function Fbe(t){var e,n,r=bn(),o=r.styles,s=r.classNames,i=r.showWeekNumber,a=r.components,l=(e=a==null?void 0:a.Day)!==null&&e!==void 0?e:$be,c=(n=a==null?void 0:a.WeekNumber)!==null&&n!==void 0?n:Bbe,u;return i&&(u=d.jsx("td",{className:s.cell,style:o.cell,children:d.jsx(c,{number:t.weekNumber,dates:t.dates})})),d.jsxs("tr",{className:s.row,style:o.row,children:[u,t.dates.map(function(f){return d.jsx("td",{className:s.cell,style:o.cell,role:"presentation",children:d.jsx(l,{displayMonth:t.displayMonth,date:f})},g0e(f))})]})}function XO(t,e,n){for(var r=n!=null&&n.ISOWeek?tG(e):OP(e,n),o=n!=null&&n.ISOWeek?Pf(t):Cs(t,n),s=ja(r,o),i=[],a=0;a<=s;a++)i.push(Pr(o,a));var l=i.reduce(function(c,u){var f=n!=null&&n.ISOWeek?rG(u):sG(u,n),h=c.find(function(p){return p.weekNumber===f});return h?(h.dates.push(u),c):(c.push({weekNumber:f,dates:[u]}),c)},[]);return l}function Ube(t,e){var n=XO(es(t),DP(t),e);if(e!=null&&e.useFixedWeeks){var r=v0e(t,e);if(r<6){var o=n[n.length-1],s=o.dates[o.dates.length-1],i=E1(s,6-r),a=XO(E1(s,1),i,e);n.push.apply(n,a)}}return n}function Hbe(t){var e,n,r,o=bn(),s=o.locale,i=o.classNames,a=o.styles,l=o.hideHead,c=o.fixedWeeks,u=o.components,f=o.weekStartsOn,h=o.firstWeekContainsDate,p=o.ISOWeek,m=Ube(t.displayMonth,{useFixedWeeks:!!c,ISOWeek:p,locale:s,weekStartsOn:f,firstWeekContainsDate:h}),y=(e=u==null?void 0:u.Head)!==null&&e!==void 0?e:obe,x=(n=u==null?void 0:u.Row)!==null&&n!==void 0?n:Fbe,b=(r=u==null?void 0:u.Footer)!==null&&r!==void 0?r:tbe;return d.jsxs("table",{id:t.id,className:i.table,style:a.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!l&&d.jsx(y,{}),d.jsx("tbody",{className:i.tbody,style:a.tbody,children:m.map(function(C){return d.jsx(x,{displayMonth:t.displayMonth,dates:C.dates,weekNumber:C.weekNumber},C.weekNumber)})}),d.jsx(b,{displayMonth:t.displayMonth})]})}function zbe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Wbe=zbe()?g.useLayoutEffect:g.useEffect,Xk=!1,Gbe=0;function JO(){return"react-day-picker-".concat(++Gbe)}function qbe(t){var e,n=t??(Xk?JO():null),r=g.useState(n),o=r[0],s=r[1];return Wbe(function(){o===null&&s(JO())},[]),g.useEffect(function(){Xk===!1&&(Xk=!0)},[]),(e=t??o)!==null&&e!==void 0?e:void 0}function Kbe(t){var e,n,r=bn(),o=r.dir,s=r.classNames,i=r.styles,a=r.components,l=Hv().displayMonths,c=qbe(r.id?"".concat(r.id,"-").concat(t.displayIndex):void 0),u=r.id?"".concat(r.id,"-grid-").concat(t.displayIndex):void 0,f=[s.month],h=i.month,p=t.displayIndex===0,m=t.displayIndex===l.length-1,y=!p&&!m;o==="rtl"&&(e=[p,m],m=e[0],p=e[1]),p&&(f.push(s.caption_start),h=st(st({},h),i.caption_start)),m&&(f.push(s.caption_end),h=st(st({},h),i.caption_end)),y&&(f.push(s.caption_between),h=st(st({},h),i.caption_between));var x=(n=a==null?void 0:a.Caption)!==null&&n!==void 0?n:ebe;return d.jsxs("div",{className:f.join(" "),style:h,children:[d.jsx(x,{id:c,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),d.jsx(Hbe,{id:u,"aria-labelledby":c,displayMonth:t.displayMonth})]},t.displayIndex)}function Ybe(t){var e=bn(),n=e.classNames,r=e.styles;return d.jsx("div",{className:n.months,style:r.months,children:t.children})}function Qbe(t){var e,n,r=t.initialProps,o=bn(),s=UP(),i=Hv(),a=g.useState(!1),l=a[0],c=a[1];g.useEffect(function(){o.initialFocus&&s.focusTarget&&(l||(s.focus(s.focusTarget),c(!0)))},[o.initialFocus,l,s.focus,s.focusTarget,s]);var u=[o.classNames.root,o.className];o.numberOfMonths>1&&u.push(o.classNames.multiple_months),o.showWeekNumber&&u.push(o.classNames.with_weeknumber);var f=st(st({},o.styles.root),o.style),h=Object.keys(r).filter(function(m){return m.startsWith("data-")}).reduce(function(m,y){var x;return st(st({},m),(x={},x[y]=r[y],x))},{}),p=(n=(e=r.components)===null||e===void 0?void 0:e.Months)!==null&&n!==void 0?n:Ybe;return d.jsx("div",st({className:u.join(" "),style:f,dir:o.dir,id:o.id,nonce:r.nonce,title:r.title,lang:r.lang},h,{children:d.jsx(p,{children:i.displayMonths.map(function(m,y){return d.jsx(Kbe,{displayIndex:y,displayMonth:m},y)})})}))}function Xbe(t){var e=t.children,n=x0e(t,["children"]);return d.jsx(B0e,{initialProps:n,children:d.jsx(Q0e,{children:d.jsx(Abe,{initialProps:n,children:d.jsx(ibe,{initialProps:n,children:d.jsx(cbe,{initialProps:n,children:d.jsx(ybe,{children:d.jsx(Ibe,{children:e})})})})})})})}function Jbe(t){return d.jsx(Xbe,st({},t,{children:d.jsx(Qbe,{initialProps:t})}))}function zP({className:t,classNames:e,showOutsideDays:n=!0,...r}){return d.jsx(Jbe,{showOutsideDays:n,className:Ve("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Ve(gN({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:Ve("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected])]:bg-accent [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected].day-range-end)]:rounded-r-md",r.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-md [&:has(>.day-range-start)]:rounded-l-md first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md":"[&:has([aria-selected])]:rounded-md"),day:Ve(gN({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({className:o,...s})=>d.jsx(SP,{className:Ve("h-4 w-4",o),...s}),IconRight:({className:o,...s})=>d.jsx(cE,{className:Ve("h-4 w-4",o),...s})},...r})}zP.displayName="Calendar";var WP="Popover",[vG,$Be]=Lo(WP,[Hm]),zv=Hm(),[Zbe,fd]=vG(WP),wG=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:o,onOpenChange:s,modal:i=!1}=t,a=zv(e),l=g.useRef(null),[c,u]=g.useState(!1),[f=!1,h]=ea({prop:r,defaultProp:o,onChange:s});return d.jsx(rE,{...a,children:d.jsx(Zbe,{scope:e,contentId:_s(),triggerRef:l,open:f,onOpenChange:h,onOpenToggle:g.useCallback(()=>h(p=>!p),[h]),hasCustomAnchor:c,onCustomAnchorAdd:g.useCallback(()=>u(!0),[]),onCustomAnchorRemove:g.useCallback(()=>u(!1),[]),modal:i,children:n})})};wG.displayName=WP;var bG="PopoverAnchor",exe=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=fd(bG,n),s=zv(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:a}=o;return g.useEffect(()=>(i(),()=>a()),[i,a]),d.jsx(oE,{...s,...r,ref:e})});exe.displayName=bG;var xG="PopoverTrigger",_G=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=fd(xG,n),s=zv(n),i=bt(e,o.triggerRef),a=d.jsx(et.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":TG(o.open),...r,ref:i,onClick:ze(t.onClick,o.onOpenToggle)});return o.hasCustomAnchor?a:d.jsx(oE,{asChild:!0,...s,children:a})});_G.displayName=xG;var GP="PopoverPortal",[txe,nxe]=vG(GP,{forceMount:void 0}),CG=t=>{const{__scopePopover:e,forceMount:n,children:r,container:o}=t,s=fd(GP,e);return d.jsx(txe,{scope:e,forceMount:n,children:d.jsx(Qr,{present:n||s.open,children:d.jsx(Av,{asChild:!0,container:o,children:r})})})};CG.displayName=GP;var um="PopoverContent",EG=g.forwardRef((t,e)=>{const n=nxe(um,t.__scopePopover),{forceMount:r=n.forceMount,...o}=t,s=fd(um,t.__scopePopover);return d.jsx(Qr,{present:r||s.open,children:s.modal?d.jsx(rxe,{...o,ref:e}):d.jsx(oxe,{...o,ref:e})})});EG.displayName=um;var rxe=g.forwardRef((t,e)=>{const n=fd(um,t.__scopePopover),r=g.useRef(null),o=bt(e,r),s=g.useRef(!1);return g.useEffect(()=>{const i=r.current;if(i)return Pv(i)},[]),d.jsx(Mv,{as:pc,allowPinchZoom:!0,children:d.jsx(kG,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ze(t.onCloseAutoFocus,i=>{var a;i.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ze(t.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:ze(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),oxe=g.forwardRef((t,e)=>{const n=fd(um,t.__scopePopover),r=g.useRef(!1),o=g.useRef(!1);return d.jsx(kG,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var i,a;(i=t.onCloseAutoFocus)==null||i.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(i))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&o.current&&s.preventDefault()}})}),kG=g.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:s,disableOutsidePointerEvents:i,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...f}=t,h=fd(um,n),p=zv(n);return XC(),d.jsx(Nv,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:s,children:d.jsx(Tv,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>h.onOpenChange(!1),children:d.jsx(dP,{"data-state":TG(h.open),role:"dialog",id:h.contentId,...p,...f,ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),SG="PopoverClose",sxe=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=fd(SG,n);return d.jsx(et.button,{type:"button",...r,ref:e,onClick:ze(t.onClick,()=>o.onOpenChange(!1))})});sxe.displayName=SG;var ixe="PopoverArrow",axe=g.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=zv(n);return d.jsx(fP,{...o,...r,ref:e})});axe.displayName=ixe;function TG(t){return t?"open":"closed"}var lxe=wG,cxe=_G,uxe=CG,NG=EG;const S1=lxe,T1=cxe,dm=g.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},o)=>d.jsx(uxe,{children:d.jsx(NG,{ref:o,align:e,sideOffset:n,className:Ve("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));dm.displayName=NG.displayName;const dxe=xC("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Jk({className:t,variant:e,...n}){return d.jsx("div",{className:Ve(dxe({variant:e}),t),...n})}var qP="Dialog",[IG,BBe]=Lo(qP),[fxe,da]=IG(qP),RG=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:o,onOpenChange:s,modal:i=!0}=t,a=g.useRef(null),l=g.useRef(null),[c=!1,u]=ea({prop:r,defaultProp:o,onChange:s});return d.jsx(fxe,{scope:e,triggerRef:a,contentRef:l,contentId:_s(),titleId:_s(),descriptionId:_s(),open:c,onOpenChange:u,onOpenToggle:g.useCallback(()=>u(f=>!f),[u]),modal:i,children:n})};RG.displayName=qP;var AG="DialogTrigger",PG=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=da(AG,n),s=bt(e,o.triggerRef);return d.jsx(et.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":XP(o.open),...r,ref:s,onClick:ze(t.onClick,o.onOpenToggle)})});PG.displayName=AG;var KP="DialogPortal",[hxe,MG]=IG(KP,{forceMount:void 0}),DG=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:o}=t,s=da(KP,e);return d.jsx(hxe,{scope:e,forceMount:n,children:g.Children.map(r,i=>d.jsx(Qr,{present:n||s.open,children:d.jsx(Av,{asChild:!0,container:o,children:i})}))})};DG.displayName=KP;var Ax="DialogOverlay",OG=g.forwardRef((t,e)=>{const n=MG(Ax,t.__scopeDialog),{forceMount:r=n.forceMount,...o}=t,s=da(Ax,t.__scopeDialog);return s.modal?d.jsx(Qr,{present:r||s.open,children:d.jsx(pxe,{...o,ref:e})}):null});OG.displayName=Ax;var pxe=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=da(Ax,n);return d.jsx(Mv,{as:pc,allowPinchZoom:!0,shards:[o.contentRef],children:d.jsx(et.div,{"data-state":XP(o.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Mf="DialogContent",LG=g.forwardRef((t,e)=>{const n=MG(Mf,t.__scopeDialog),{forceMount:r=n.forceMount,...o}=t,s=da(Mf,t.__scopeDialog);return d.jsx(Qr,{present:r||s.open,children:s.modal?d.jsx(mxe,{...o,ref:e}):d.jsx(gxe,{...o,ref:e})})});LG.displayName=Mf;var mxe=g.forwardRef((t,e)=>{const n=da(Mf,t.__scopeDialog),r=g.useRef(null),o=bt(e,n.contentRef,r);return g.useEffect(()=>{const s=r.current;if(s)return Pv(s)},[]),d.jsx(jG,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ze(t.onCloseAutoFocus,s=>{var i;s.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:ze(t.onPointerDownOutside,s=>{const i=s.detail.originalEvent,a=i.button===0&&i.ctrlKey===!0;(i.button===2||a)&&s.preventDefault()}),onFocusOutside:ze(t.onFocusOutside,s=>s.preventDefault())})}),gxe=g.forwardRef((t,e)=>{const n=da(Mf,t.__scopeDialog),r=g.useRef(!1),o=g.useRef(!1);return d.jsx(jG,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var i,a;(i=t.onCloseAutoFocus)==null||i.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(i))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&o.current&&s.preventDefault()}})}),jG=g.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:s,...i}=t,a=da(Mf,n),l=g.useRef(null),c=bt(e,l);return XC(),d.jsxs(d.Fragment,{children:[d.jsx(Nv,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:s,children:d.jsx(Tv,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":XP(a.open),...i,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),d.jsxs(d.Fragment,{children:[d.jsx(yxe,{titleId:a.titleId}),d.jsx(wxe,{contentRef:l,descriptionId:a.descriptionId})]})]})}),YP="DialogTitle",QP=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=da(YP,n);return d.jsx(et.h2,{id:o.titleId,...r,ref:e})});QP.displayName=YP;var VG="DialogDescription",$G=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=da(VG,n);return d.jsx(et.p,{id:o.descriptionId,...r,ref:e})});$G.displayName=VG;var BG="DialogClose",FG=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=da(BG,n);return d.jsx(et.button,{type:"button",...r,ref:e,onClick:ze(t.onClick,()=>o.onOpenChange(!1))})});FG.displayName=BG;function XP(t){return t?"open":"closed"}var UG="DialogTitleWarning",[FBe,HG]=ome(UG,{contentName:Mf,titleName:YP,docsSlug:"dialog"}),yxe=({titleId:t})=>{const e=HG(UG),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return g.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},vxe="DialogDescriptionWarning",wxe=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${HG(vxe).contentName}}.`;return g.useEffect(()=>{var s;const o=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&o&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},zG=RG,WG=PG,GG=DG,wE=OG,bE=LG,xE=QP,_E=$G,qG=FG;const bxe=zG,xxe=WG,_xe=GG,KG=g.forwardRef(({className:t,...e},n)=>d.jsx(wE,{className:Ve("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));KG.displayName=wE.displayName;const Cxe=xC("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),YG=g.forwardRef(({side:t="right",className:e,children:n,...r},o)=>d.jsxs(_xe,{children:[d.jsx(KG,{}),d.jsxs(bE,{ref:o,className:Ve(Cxe({side:t}),e),...r,children:[d.jsxs(qG,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[d.jsx(Ku,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Close"})]}),n]})]}));YG.displayName=bE.displayName;const QG=({className:t,...e})=>d.jsx("div",{className:Ve("flex flex-col space-y-2 text-center sm:text-left",t),...e});QG.displayName="SheetHeader";const XG=g.forwardRef(({className:t,...e},n)=>d.jsx(xE,{ref:n,className:Ve("text-lg font-semibold text-foreground",t),...e}));XG.displayName=xE.displayName;const JG=g.forwardRef(({className:t,...e},n)=>d.jsx(_E,{ref:n,className:Ve("text-sm text-muted-foreground",t),...e}));JG.displayName=_E.displayName;var ZG={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(ep,function(){var n=function(w,_){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,N){k.__proto__=N}||function(k,N){for(var M in N)Object.prototype.hasOwnProperty.call(N,M)&&(k[M]=N[M])})(w,_)},r=function(){return(r=Object.assign||function(w){for(var _,k=1,N=arguments.length;k<N;k++)for(var M in _=arguments[k])Object.prototype.hasOwnProperty.call(_,M)&&(w[M]=_[M]);return w}).apply(this,arguments)};function o(w,_,k){for(var N,M=0,j=_.length;M<j;M++)!N&&M in _||((N=N||Array.prototype.slice.call(_,0,M))[M]=_[M]);return w.concat(N||Array.prototype.slice.call(_))}var s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:ep,i=Object.keys,a=Array.isArray;function l(w,_){return typeof _!="object"||i(_).forEach(function(k){w[k]=_[k]}),w}typeof Promise>"u"||s.Promise||(s.Promise=Promise);var c=Object.getPrototypeOf,u={}.hasOwnProperty;function f(w,_){return u.call(w,_)}function h(w,_){typeof _=="function"&&(_=_(c(w))),(typeof Reflect>"u"?i:Reflect.ownKeys)(_).forEach(function(k){m(w,k,_[k])})}var p=Object.defineProperty;function m(w,_,k,N){p(w,_,l(k&&f(k,"get")&&typeof k.get=="function"?{get:k.get,set:k.set,configurable:!0}:{value:k,configurable:!0,writable:!0},N))}function y(w){return{from:function(_){return w.prototype=Object.create(_.prototype),m(w.prototype,"constructor",w),{extend:h.bind(null,w.prototype)}}}}var x=Object.getOwnPropertyDescriptor,b=[].slice;function C(w,_,k){return b.call(w,_,k)}function E(w,_){return _(w)}function R(w){if(!w)throw new Error("Assertion Failed")}function D(w){s.setImmediate?setImmediate(w):setTimeout(w,0)}function O(w,_){if(typeof _=="string"&&f(w,_))return w[_];if(!_)return w;if(typeof _!="string"){for(var k=[],N=0,M=_.length;N<M;++N){var j=O(w,_[N]);k.push(j)}return k}var z=_.indexOf(".");if(z!==-1){var q=w[_.substr(0,z)];return q==null?void 0:O(q,_.substr(z+1))}}function T(w,_,k){if(w&&_!==void 0&&!("isFrozen"in Object&&Object.isFrozen(w)))if(typeof _!="string"&&"length"in _){R(typeof k!="string"&&"length"in k);for(var N=0,M=_.length;N<M;++N)T(w,_[N],k[N])}else{var j,z,q=_.indexOf(".");q!==-1?(j=_.substr(0,q),(z=_.substr(q+1))===""?k===void 0?a(w)&&!isNaN(parseInt(j))?w.splice(j,1):delete w[j]:w[j]=k:T(q=!(q=w[j])||!f(w,j)?w[j]={}:q,z,k)):k===void 0?a(w)&&!isNaN(parseInt(_))?w.splice(_,1):delete w[_]:w[_]=k}}function I(w){var _,k={};for(_ in w)f(w,_)&&(k[_]=w[_]);return k}var P=[].concat;function L(w){return P.apply([],w)}var ln="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(L([8,16,32,64].map(function(w){return["Int","Uint","Float"].map(function(_){return _+w+"Array"})}))).filter(function(w){return s[w]}),$=new Set(ln.map(function(w){return s[w]})),F=null;function V(w){return F=new WeakMap,w=function _(k){if(!k||typeof k!="object")return k;var N=F.get(k);if(N)return N;if(a(k)){N=[],F.set(k,N);for(var M=0,j=k.length;M<j;++M)N.push(_(k[M]))}else if($.has(k.constructor))N=k;else{var z,q=c(k);for(z in N=q===Object.prototype?{}:Object.create(q),F.set(k,N),k)f(k,z)&&(N[z]=_(k[z]))}return N}(w),F=null,w}var be={}.toString;function ge(w){return be.call(w).slice(8,-1)}var le=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Q=typeof le=="symbol"?function(w){var _;return w!=null&&(_=w[le])&&_.apply(w)}:function(){return null};function H(w,_){return _=w.indexOf(_),0<=_&&w.splice(_,1),0<=_}var Y={};function ue(w){var _,k,N,M;if(arguments.length===1){if(a(w))return w.slice();if(this===Y&&typeof w=="string")return[w];if(M=Q(w)){for(k=[];!(N=M.next()).done;)k.push(N.value);return k}if(w==null)return[w];if(typeof(_=w.length)!="number")return[w];for(k=new Array(_);_--;)k[_]=w[_];return k}for(_=arguments.length,k=new Array(_);_--;)k[_]=arguments[_];return k}var W=typeof Symbol<"u"?function(w){return w[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Si=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ws=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Si),G={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ie(w,_){this.name=w,this.message=_}function ye(w,_){return w+". Errors: "+Object.keys(_).map(function(k){return _[k].toString()}).filter(function(k,N,M){return M.indexOf(k)===N}).join(`
`)}function he(w,_,k,N){this.failures=_,this.failedKeys=N,this.successCount=k,this.message=ye(w,_)}function we(w,_){this.name="BulkError",this.failures=Object.keys(_).map(function(k){return _[k]}),this.failuresByPos=_,this.message=ye(w,this.failures)}y(ie).from(Error).extend({toString:function(){return this.name+": "+this.message}}),y(he).from(ie),y(we).from(ie);var ve=Ws.reduce(function(w,_){return w[_]=_+"Error",w},{}),Te=ie,xe=Ws.reduce(function(w,_){var k=_+"Error";function N(M,j){this.name=k,M?typeof M=="string"?(this.message="".concat(M).concat(j?`
 `+j:""),this.inner=j||null):typeof M=="object"&&(this.message="".concat(M.name," ").concat(M.message),this.inner=M):(this.message=G[_]||k,this.inner=null)}return y(N).from(Te),w[_]=N,w},{});xe.Syntax=SyntaxError,xe.Type=TypeError,xe.Range=RangeError;var ae=Si.reduce(function(w,_){return w[_+"Error"]=xe[_],w},{}),Ie=Ws.reduce(function(w,_){return["Syntax","Type","Range"].indexOf(_)===-1&&(w[_+"Error"]=xe[_]),w},{});function Re(){}function at(w){return w}function Nt(w,_){return w==null||w===at?_:function(k){return _(w(k))}}function Ft(w,_){return function(){w.apply(this,arguments),_.apply(this,arguments)}}function Gn(w,_){return w===Re?_:function(){var k=w.apply(this,arguments);k!==void 0&&(arguments[0]=k);var N=this.onsuccess,M=this.onerror;this.onsuccess=null,this.onerror=null;var j=_.apply(this,arguments);return N&&(this.onsuccess=this.onsuccess?Ft(N,this.onsuccess):N),M&&(this.onerror=this.onerror?Ft(M,this.onerror):M),j!==void 0?j:k}}function kr(w,_){return w===Re?_:function(){w.apply(this,arguments);var k=this.onsuccess,N=this.onerror;this.onsuccess=this.onerror=null,_.apply(this,arguments),k&&(this.onsuccess=this.onsuccess?Ft(k,this.onsuccess):k),N&&(this.onerror=this.onerror?Ft(N,this.onerror):N)}}function rs(w,_){return w===Re?_:function(k){var N=w.apply(this,arguments);l(k,N);var M=this.onsuccess,j=this.onerror;return this.onsuccess=null,this.onerror=null,k=_.apply(this,arguments),M&&(this.onsuccess=this.onsuccess?Ft(M,this.onsuccess):M),j&&(this.onerror=this.onerror?Ft(j,this.onerror):j),N===void 0?k===void 0?void 0:k:l(N,k)}}function Jt(w,_){return w===Re?_:function(){return _.apply(this,arguments)!==!1&&w.apply(this,arguments)}}function pa(w,_){return w===Re?_:function(){var k=w.apply(this,arguments);if(k&&typeof k.then=="function"){for(var N=this,M=arguments.length,j=new Array(M);M--;)j[M]=arguments[M];return k.then(function(){return _.apply(N,j)})}return _.apply(this,arguments)}}Ie.ModifyError=he,Ie.DexieError=ie,Ie.BulkError=we;var xo=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ch(w){xo=w}var ki={},dl=100,ln=typeof Promise>"u"?[]:function(){var w=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[w,c(w),w];var _=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[_,c(_),w]}(),Si=ln[0],Ws=ln[1],ln=ln[2],Ws=Ws&&Ws.then,pn=Si&&Si.constructor,Ti=!!ln,Ni=function(w,_){wd.push([w,_]),uh&&(queueMicrotask(ww),uh=!1)},nr=!0,uh=!0,ss=[],vd=[],dh=at,$s={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Re,pgp:!1,env:{},finalize:Re},Xe=$s,wd=[],Ii=0,bd=[];function We(w){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var _=this._PSD=Xe;if(typeof w!="function"){if(w!==ki)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&xd(this,this._value))}this._state=null,this._value=null,++_.ref,function k(N,M){try{M(function(j){if(N._state===null){if(j===N)throw new TypeError("A promise cannot be resolved with itself.");var z=N._lib&&Bs();j&&typeof j.then=="function"?k(N,function(q,X){j instanceof We?j._then(q,X):j.then(q,X)}):(N._state=!0,N._value=j,ma(N)),z&&hl()}},xd.bind(null,N))}catch(j){xd(N,j)}}(this,w)}var fl={get:function(){var w=Xe,_=gh;function k(N,M){var j=this,z=!w.global&&(w!==Xe||_!==gh),q=z&&!Fs(),X=new We(function(Z,ne){hh(j,new fh(yh(N,w,z,q),yh(M,w,z,q),Z,ne,w))});return this._consoleTask&&(X._consoleTask=this._consoleTask),X}return k.prototype=ki,k},set:function(w){m(this,"then",w&&w.prototype===ki?fl:{get:function(){return w},set:fl.set})}};function fh(w,_,k,N,M){this.onFulfilled=typeof w=="function"?w:null,this.onRejected=typeof _=="function"?_:null,this.resolve=k,this.reject=N,this.psd=M}function xd(w,_){var k,N;vd.push(_),w._state===null&&(k=w._lib&&Bs(),_=dh(_),w._state=!1,w._value=_,N=w,ss.some(function(M){return M._value===N._value})||ss.push(N),ma(w),k&&hl())}function ma(w){var _=w._listeners;w._listeners=[];for(var k=0,N=_.length;k<N;++k)hh(w,_[k]);var M=w._PSD;--M.ref||M.finalize(),Ii===0&&(++Ii,Ni(function(){--Ii==0&&fr()},[]))}function hh(w,_){if(w._state!==null){var k=w._state?_.onFulfilled:_.onRejected;if(k===null)return(w._state?_.resolve:_.reject)(w._value);++_.psd.ref,++Ii,Ni(ph,[k,w,_])}else w._listeners.push(_)}function ph(w,_,k){try{var N,M=_._value;!_._state&&vd.length&&(vd=[]),N=xo&&_._consoleTask?_._consoleTask.run(function(){return w(M)}):w(M),_._state||vd.indexOf(M)!==-1||function(j){for(var z=ss.length;z;)if(ss[--z]._value===j._value)return ss.splice(z,1)}(_),k.resolve(N)}catch(j){k.reject(j)}finally{--Ii==0&&fr(),--k.psd.ref||k.psd.finalize()}}function ww(){Pi($s,function(){Bs()&&hl()})}function Bs(){var w=nr;return uh=nr=!1,w}function hl(){var w,_,k;do for(;0<wd.length;)for(w=wd,wd=[],k=w.length,_=0;_<k;++_){var N=w[_];N[0].apply(null,N[1])}while(0<wd.length);uh=nr=!0}function fr(){var w=ss;ss=[],w.forEach(function(N){N._PSD.onunhandled.call(null,N._value,N)});for(var _=bd.slice(0),k=_.length;k;)_[--k]()}function _d(w){return new We(ki,!1,w)}function Kt(w,_){var k=Xe;return function(){var N=Bs(),M=Xe;try{return Ai(k,!0),w.apply(this,arguments)}catch(j){_&&_(j)}finally{Ai(M,!1),N&&hl()}}}h(We.prototype,{then:fl,_then:function(w,_){hh(this,new fh(null,null,w,_,Xe))},catch:function(w){if(arguments.length===1)return this.then(null,w);var _=w,k=arguments[1];return typeof _=="function"?this.then(null,function(N){return(N instanceof _?k:_d)(N)}):this.then(null,function(N){return(N&&N.name===_?k:_d)(N)})},finally:function(w){return this.then(function(_){return We.resolve(w()).then(function(){return _})},function(_){return We.resolve(w()).then(function(){return _d(_)})})},timeout:function(w,_){var k=this;return w<1/0?new We(function(N,M){var j=setTimeout(function(){return M(new xe.Timeout(_))},w);k.then(N,M).finally(clearTimeout.bind(null,j))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&m(We.prototype,Symbol.toStringTag,"Dexie.Promise"),$s.env=cg(),h(We,{all:function(){var w=ue.apply(null,arguments).map(ml);return new We(function(_,k){w.length===0&&_([]);var N=w.length;w.forEach(function(M,j){return We.resolve(M).then(function(z){w[j]=z,--N||_(w)},k)})})},resolve:function(w){return w instanceof We?w:w&&typeof w.then=="function"?new We(function(_,k){w.then(_,k)}):new We(ki,!0,w)},reject:_d,race:function(){var w=ue.apply(null,arguments).map(ml);return new We(function(_,k){w.map(function(N){return We.resolve(N).then(_,k)})})},PSD:{get:function(){return Xe},set:function(w){return Xe=w}},totalEchoes:{get:function(){return gh}},newPSD:is,usePSD:Pi,scheduler:{get:function(){return Ni},set:function(w){Ni=w}},rejectionMapper:{get:function(){return dh},set:function(w){dh=w}},follow:function(w,_){return new We(function(k,N){return is(function(M,j){var z=Xe;z.unhandleds=[],z.onunhandled=j,z.finalize=Ft(function(){var q,X=this;q=function(){X.unhandleds.length===0?M():j(X.unhandleds[0])},bd.push(function Z(){q(),bd.splice(bd.indexOf(Z),1)}),++Ii,Ni(function(){--Ii==0&&fr()},[])},z.finalize),w()},_,k,N)})}}),pn&&(pn.allSettled&&m(We,"allSettled",function(){var w=ue.apply(null,arguments).map(ml);return new We(function(_){w.length===0&&_([]);var k=w.length,N=new Array(k);w.forEach(function(M,j){return We.resolve(M).then(function(z){return N[j]={status:"fulfilled",value:z}},function(z){return N[j]={status:"rejected",reason:z}}).then(function(){return--k||_(N)})})})}),pn.any&&typeof AggregateError<"u"&&m(We,"any",function(){var w=ue.apply(null,arguments).map(ml);return new We(function(_,k){w.length===0&&k(new AggregateError([]));var N=w.length,M=new Array(N);w.forEach(function(j,z){return We.resolve(j).then(function(q){return _(q)},function(q){M[z]=q,--N||k(new AggregateError(M))})})})}),pn.withResolvers&&(We.withResolvers=pn.withResolvers));var Nn={awaits:0,echoes:0,id:0},A2=0,mh=[],Ri=0,gh=0,P2=0;function is(w,_,k,N){var M=Xe,j=Object.create(M);return j.parent=M,j.ref=0,j.global=!1,j.id=++P2,$s.env,j.env=Ti?{Promise:We,PromiseProp:{value:We,configurable:!0,writable:!0},all:We.all,race:We.race,allSettled:We.allSettled,any:We.any,resolve:We.resolve,reject:We.reject}:{},_&&l(j,_),++M.ref,j.finalize=function(){--this.parent.ref||this.parent.finalize()},N=Pi(j,w,k,N),j.ref===0&&j.finalize(),N}function pl(){return Nn.id||(Nn.id=++A2),++Nn.awaits,Nn.echoes+=dl,Nn.id}function Fs(){return!!Nn.awaits&&(--Nn.awaits==0&&(Nn.id=0),Nn.echoes=Nn.awaits*dl,!0)}function ml(w){return Nn.echoes&&w&&w.constructor===pn?(pl(),w.then(function(_){return Fs(),_},function(_){return Fs(),In(_)})):w}function ga(){var w=mh[mh.length-1];mh.pop(),Ai(w,!1)}function Ai(w,_){var k,N=Xe;(_?!Nn.echoes||Ri++&&w===Xe:!Ri||--Ri&&w===Xe)||queueMicrotask(_?(function(M){++gh,Nn.echoes&&--Nn.echoes!=0||(Nn.echoes=Nn.awaits=Nn.id=0),mh.push(Xe),Ai(M,!0)}).bind(null,w):ga),w!==Xe&&(Xe=w,N===$s&&($s.env=cg()),Ti&&(k=$s.env.Promise,_=w.env,(N.global||w.global)&&(Object.defineProperty(s,"Promise",_.PromiseProp),k.all=_.all,k.race=_.race,k.resolve=_.resolve,k.reject=_.reject,_.allSettled&&(k.allSettled=_.allSettled),_.any&&(k.any=_.any))))}function cg(){var w=s.Promise;return Ti?{Promise:w,PromiseProp:Object.getOwnPropertyDescriptor(s,"Promise"),all:w.all,race:w.race,allSettled:w.allSettled,any:w.any,resolve:w.resolve,reject:w.reject}:{}}function Pi(w,_,k,N,M){var j=Xe;try{return Ai(w,!0),_(k,N,M)}finally{Ai(j,!1)}}function yh(w,_,k,N){return typeof w!="function"?w:function(){var M=Xe;k&&pl(),Ai(_,!0);try{return w.apply(this,arguments)}finally{Ai(M,!1),N&&queueMicrotask(Fs)}}}function vh(w){Promise===pn&&Nn.echoes===0?Ri===0?w():enqueueNativeMicroTask(w):setTimeout(w,0)}(""+Ws).indexOf("[native code]")===-1&&(pl=Fs=Re);var In=We.reject,gl="￿",jo="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ug="String expected.",ya=[],va="__dbnames",Mi="readonly",Cd="readwrite";function yl(w,_){return w?_?function(){return w.apply(this,arguments)&&_.apply(this,arguments)}:w:_}var dg={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ed(w){return typeof w!="string"||/\./.test(w)?function(_){return _}:function(_){return _[w]===void 0&&w in _&&delete(_=V(_))[w],_}}function fg(){throw xe.Type()}function wt(w,_){try{var k=wh(w),N=wh(_);if(k!==N)return k==="Array"?1:N==="Array"?-1:k==="binary"?1:N==="binary"?-1:k==="string"?1:N==="string"?-1:k==="Date"?1:N!=="Date"?NaN:-1;switch(k){case"number":case"Date":case"string":return _<w?1:w<_?-1:0;case"binary":return function(M,j){for(var z=M.length,q=j.length,X=z<q?z:q,Z=0;Z<X;++Z)if(M[Z]!==j[Z])return M[Z]<j[Z]?-1:1;return z===q?0:z<q?-1:1}(hg(w),hg(_));case"Array":return function(M,j){for(var z=M.length,q=j.length,X=z<q?z:q,Z=0;Z<X;++Z){var ne=wt(M[Z],j[Z]);if(ne!==0)return ne}return z===q?0:z<q?-1:1}(w,_)}}catch{}return NaN}function wh(w){var _=typeof w;return _!="object"?_:ArrayBuffer.isView(w)?"binary":(w=ge(w),w==="ArrayBuffer"?"binary":w)}function hg(w){return w instanceof Uint8Array?w:ArrayBuffer.isView(w)?new Uint8Array(w.buffer,w.byteOffset,w.byteLength):new Uint8Array(w)}var pg=(cn.prototype._trans=function(w,_,k){var N=this._tx||Xe.trans,M=this.name,j=xo&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(w==="readonly"?"read":"write"," ").concat(this.name));function z(Z,ne,K){if(!K.schema[M])throw new xe.NotFound("Table "+M+" not part of transaction");return _(K.idbtrans,K)}var q=Bs();try{var X=N&&N.db._novip===this.db._novip?N===Xe.trans?N._promise(w,z,k):is(function(){return N._promise(w,z,k)},{trans:N,transless:Xe.transless||Xe}):function Z(ne,K,oe,J){if(ne.idbdb&&(ne._state.openComplete||Xe.letThrough||ne._vip)){var te=ne._createTransaction(K,oe,ne._dbSchema);try{te.create(),ne._state.PR1398_maxLoop=3}catch(re){return re.name===ve.InvalidState&&ne.isOpen()&&0<--ne._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ne.close({disableAutoOpen:!1}),ne.open().then(function(){return Z(ne,K,oe,J)})):In(re)}return te._promise(K,function(re,ee){return is(function(){return Xe.trans=te,J(re,ee,te)})}).then(function(re){if(K==="readwrite")try{te.idbtrans.commit()}catch{}return K==="readonly"?re:te._completion.then(function(){return re})})}if(ne._state.openComplete)return In(new xe.DatabaseClosed(ne._state.dbOpenError));if(!ne._state.isBeingOpened){if(!ne._state.autoOpen)return In(new xe.DatabaseClosed);ne.open().catch(Re)}return ne._state.dbReadyPromise.then(function(){return Z(ne,K,oe,J)})}(this.db,w,[this.name],z);return j&&(X._consoleTask=j,X=X.catch(function(Z){return console.trace(Z),In(Z)})),X}finally{q&&hl()}},cn.prototype.get=function(w,_){var k=this;return w&&w.constructor===Object?this.where(w).first(_):w==null?In(new xe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(N){return k.core.get({trans:N,key:w}).then(function(M){return k.hook.reading.fire(M)})}).then(_)},cn.prototype.where=function(w){if(typeof w=="string")return new this.db.WhereClause(this,w);if(a(w))return new this.db.WhereClause(this,"[".concat(w.join("+"),"]"));var _=i(w);if(_.length===1)return this.where(_[0]).equals(w[_[0]]);var k=this.schema.indexes.concat(this.schema.primKey).filter(function(q){if(q.compound&&_.every(function(Z){return 0<=q.keyPath.indexOf(Z)})){for(var X=0;X<_.length;++X)if(_.indexOf(q.keyPath[X])===-1)return!1;return!0}return!1}).sort(function(q,X){return q.keyPath.length-X.keyPath.length})[0];if(k&&this.db._maxKey!==gl){var j=k.keyPath.slice(0,_.length);return this.where(j).equals(j.map(function(X){return w[X]}))}!k&&xo&&console.warn("The query ".concat(JSON.stringify(w)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(_.join("+"),"]"));var N=this.schema.idxByName;function M(q,X){return wt(q,X)===0}var z=_.reduce(function(K,X){var Z=K[0],ne=K[1],K=N[X],oe=w[X];return[Z||K,Z||!K?yl(ne,K&&K.multi?function(J){return J=O(J,X),a(J)&&J.some(function(te){return M(oe,te)})}:function(J){return M(oe,O(J,X))}):ne]},[null,null]),j=z[0],z=z[1];return j?this.where(j.name).equals(w[j.keyPath]).filter(z):k?this.filter(z):this.where(_).equals("")},cn.prototype.filter=function(w){return this.toCollection().and(w)},cn.prototype.count=function(w){return this.toCollection().count(w)},cn.prototype.offset=function(w){return this.toCollection().offset(w)},cn.prototype.limit=function(w){return this.toCollection().limit(w)},cn.prototype.each=function(w){return this.toCollection().each(w)},cn.prototype.toArray=function(w){return this.toCollection().toArray(w)},cn.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},cn.prototype.orderBy=function(w){return new this.db.Collection(new this.db.WhereClause(this,a(w)?"[".concat(w.join("+"),"]"):w))},cn.prototype.reverse=function(){return this.toCollection().reverse()},cn.prototype.mapToClass=function(w){var _,k=this.db,N=this.name;function M(){return _!==null&&_.apply(this,arguments)||this}(this.schema.mappedClass=w).prototype instanceof fg&&(function(X,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Class extends value "+String(Z)+" is not a constructor or null");function ne(){this.constructor=X}n(X,Z),X.prototype=Z===null?Object.create(Z):(ne.prototype=Z.prototype,new ne)}(M,_=w),Object.defineProperty(M.prototype,"db",{get:function(){return k},enumerable:!1,configurable:!0}),M.prototype.table=function(){return N},w=M);for(var j=new Set,z=w.prototype;z;z=c(z))Object.getOwnPropertyNames(z).forEach(function(X){return j.add(X)});function q(X){if(!X)return X;var Z,ne=Object.create(w.prototype);for(Z in X)if(!j.has(Z))try{ne[Z]=X[Z]}catch{}return ne}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=q,this.hook("reading",q),w},cn.prototype.defineClass=function(){return this.mapToClass(function(w){l(this,w)})},cn.prototype.add=function(w,_){var k=this,N=this.schema.primKey,M=N.auto,j=N.keyPath,z=w;return j&&M&&(z=Ed(j)(w)),this._trans("readwrite",function(q){return k.core.mutate({trans:q,type:"add",keys:_!=null?[_]:null,values:[z]})}).then(function(q){return q.numFailures?We.reject(q.failures[0]):q.lastResult}).then(function(q){if(j)try{T(w,j,q)}catch{}return q})},cn.prototype.update=function(w,_){return typeof w!="object"||a(w)?this.where(":id").equals(w).modify(_):(w=O(w,this.schema.primKey.keyPath),w===void 0?In(new xe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(w).modify(_))},cn.prototype.put=function(w,_){var k=this,N=this.schema.primKey,M=N.auto,j=N.keyPath,z=w;return j&&M&&(z=Ed(j)(w)),this._trans("readwrite",function(q){return k.core.mutate({trans:q,type:"put",values:[z],keys:_!=null?[_]:null})}).then(function(q){return q.numFailures?We.reject(q.failures[0]):q.lastResult}).then(function(q){if(j)try{T(w,j,q)}catch{}return q})},cn.prototype.delete=function(w){var _=this;return this._trans("readwrite",function(k){return _.core.mutate({trans:k,type:"delete",keys:[w]})}).then(function(k){return k.numFailures?We.reject(k.failures[0]):void 0})},cn.prototype.clear=function(){var w=this;return this._trans("readwrite",function(_){return w.core.mutate({trans:_,type:"deleteRange",range:dg})}).then(function(_){return _.numFailures?We.reject(_.failures[0]):void 0})},cn.prototype.bulkGet=function(w){var _=this;return this._trans("readonly",function(k){return _.core.getMany({keys:w,trans:k}).then(function(N){return N.map(function(M){return _.hook.reading.fire(M)})})})},cn.prototype.bulkAdd=function(w,_,k){var N=this,M=Array.isArray(_)?_:void 0,j=(k=k||(M?void 0:_))?k.allKeys:void 0;return this._trans("readwrite",function(z){var Z=N.schema.primKey,q=Z.auto,Z=Z.keyPath;if(Z&&M)throw new xe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(M&&M.length!==w.length)throw new xe.InvalidArgument("Arguments objects and keys must have the same length");var X=w.length,Z=Z&&q?w.map(Ed(Z)):w;return N.core.mutate({trans:z,type:"add",keys:M,values:Z,wantResults:j}).then(function(te){var K=te.numFailures,oe=te.results,J=te.lastResult,te=te.failures;if(K===0)return j?oe:J;throw new we("".concat(N.name,".bulkAdd(): ").concat(K," of ").concat(X," operations failed"),te)})})},cn.prototype.bulkPut=function(w,_,k){var N=this,M=Array.isArray(_)?_:void 0,j=(k=k||(M?void 0:_))?k.allKeys:void 0;return this._trans("readwrite",function(z){var Z=N.schema.primKey,q=Z.auto,Z=Z.keyPath;if(Z&&M)throw new xe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(M&&M.length!==w.length)throw new xe.InvalidArgument("Arguments objects and keys must have the same length");var X=w.length,Z=Z&&q?w.map(Ed(Z)):w;return N.core.mutate({trans:z,type:"put",keys:M,values:Z,wantResults:j}).then(function(te){var K=te.numFailures,oe=te.results,J=te.lastResult,te=te.failures;if(K===0)return j?oe:J;throw new we("".concat(N.name,".bulkPut(): ").concat(K," of ").concat(X," operations failed"),te)})})},cn.prototype.bulkUpdate=function(w){var _=this,k=this.core,N=w.map(function(z){return z.key}),M=w.map(function(z){return z.changes}),j=[];return this._trans("readwrite",function(z){return k.getMany({trans:z,keys:N,cache:"clone"}).then(function(q){var X=[],Z=[];w.forEach(function(K,oe){var J=K.key,te=K.changes,re=q[oe];if(re){for(var ee=0,ce=Object.keys(te);ee<ce.length;ee++){var de=ce[ee],fe=te[de];if(de===_.schema.primKey.keyPath){if(wt(fe,J)!==0)throw new xe.Constraint("Cannot update primary key in bulkUpdate()")}else T(re,de,fe)}j.push(oe),X.push(J),Z.push(re)}});var ne=X.length;return k.mutate({trans:z,type:"put",keys:X,values:Z,updates:{keys:N,changeSpecs:M}}).then(function(K){var oe=K.numFailures,J=K.failures;if(oe===0)return ne;for(var te=0,re=Object.keys(J);te<re.length;te++){var ee,ce=re[te],de=j[Number(ce)];de!=null&&(ee=J[ce],delete J[ce],J[de]=ee)}throw new we("".concat(_.name,".bulkUpdate(): ").concat(oe," of ").concat(ne," operations failed"),J)})})})},cn.prototype.bulkDelete=function(w){var _=this,k=w.length;return this._trans("readwrite",function(N){return _.core.mutate({trans:N,type:"delete",keys:w})}).then(function(z){var M=z.numFailures,j=z.lastResult,z=z.failures;if(M===0)return j;throw new we("".concat(_.name,".bulkDelete(): ").concat(M," of ").concat(k," operations failed"),z)})},cn);function cn(){}function kd(w){function _(z,q){if(q){for(var X=arguments.length,Z=new Array(X-1);--X;)Z[X-1]=arguments[X];return k[z].subscribe.apply(null,Z),w}if(typeof z=="string")return k[z]}var k={};_.addEventType=j;for(var N=1,M=arguments.length;N<M;++N)j(arguments[N]);return _;function j(z,q,X){if(typeof z!="object"){var Z;q=q||Jt;var ne={subscribers:[],fire:X=X||Re,subscribe:function(K){ne.subscribers.indexOf(K)===-1&&(ne.subscribers.push(K),ne.fire=q(ne.fire,K))},unsubscribe:function(K){ne.subscribers=ne.subscribers.filter(function(oe){return oe!==K}),ne.fire=ne.subscribers.reduce(q,X)}};return k[z]=_[z]=ne}i(Z=z).forEach(function(K){var oe=Z[K];if(a(oe))j(K,Z[K][0],Z[K][1]);else{if(oe!=="asap")throw new xe.InvalidArgument("Invalid event config");var J=j(K,at,function(){for(var te=arguments.length,re=new Array(te);te--;)re[te]=arguments[te];J.subscribers.forEach(function(ee){D(function(){ee.apply(null,re)})})})}})}}function Dc(w,_){return y(_).from({prototype:w}),_}function vl(w,_){return!(w.filter||w.algorithm||w.or)&&(_?w.justLimit:!w.replayFilter)}function mg(w,_){w.filter=yl(w.filter,_)}function Di(w,_,k){var N=w.replayFilter;w.replayFilter=N?function(){return yl(N(),_())}:_,w.justLimit=k&&!N}function Vo(w,_){if(w.isPrimKey)return _.primaryKey;var k=_.getIndexByKeyPath(w.index);if(!k)throw new xe.Schema("KeyPath "+w.index+" on object store "+_.name+" is not indexed");return k}function Sd(w,_,k){var N=Vo(w,_.schema);return _.openCursor({trans:k,values:!w.keysOnly,reverse:w.dir==="prev",unique:!!w.unique,query:{index:N,range:w.range}})}function wl(w,_,k,N){var M=w.replayFilter?yl(w.filter,w.replayFilter()):w.filter;if(w.or){var j={},z=function(q,X,Z){var ne,K;M&&!M(X,Z,function(oe){return X.stop(oe)},function(oe){return X.fail(oe)})||((K=""+(ne=X.primaryKey))=="[object ArrayBuffer]"&&(K=""+new Uint8Array(ne)),f(j,K)||(j[K]=!0,_(q,X,Z)))};return Promise.all([w.or._iterate(z,k),gg(Sd(w,N,k),w.algorithm,z,!w.keysOnly&&w.valueMapper)])}return gg(Sd(w,N,k),yl(w.algorithm,M),_,!w.keysOnly&&w.valueMapper)}function gg(w,_,k,N){var M=Kt(N?function(j,z,q){return k(N(j),z,q)}:k);return w.then(function(j){if(j)return j.start(function(){var z=function(){return j.continue()};_&&!_(j,function(q){return z=q},function(q){j.stop(q),z=Re},function(q){j.fail(q),z=Re})||M(j.value,j,function(q){return z=q}),z()})})}var Wt=(Td.prototype.execute=function(w){var _=this["@@propmod"];if(_.add!==void 0){var k=_.add;if(a(k))return o(o([],a(w)?w:[],!0),k).sort();if(typeof k=="number")return(Number(w)||0)+k;if(typeof k=="bigint")try{return BigInt(w)+k}catch{return BigInt(0)+k}throw new TypeError("Invalid term ".concat(k))}if(_.remove!==void 0){var N=_.remove;if(a(N))return a(w)?w.filter(function(M){return!N.includes(M)}).sort():[];if(typeof N=="number")return Number(w)-N;if(typeof N=="bigint")try{return BigInt(w)-N}catch{return BigInt(0)-N}throw new TypeError("Invalid subtrahend ".concat(N))}return k=(k=_.replacePrefix)===null||k===void 0?void 0:k[0],k&&typeof w=="string"&&w.startsWith(k)?_.replacePrefix[1]+w.substring(k.length):w},Td);function Td(w){this["@@propmod"]=w}var Nd=(xt.prototype._read=function(w,_){var k=this._ctx;return k.error?k.table._trans(null,In.bind(null,k.error)):k.table._trans("readonly",w).then(_)},xt.prototype._write=function(w){var _=this._ctx;return _.error?_.table._trans(null,In.bind(null,_.error)):_.table._trans("readwrite",w,"locked")},xt.prototype._addAlgorithm=function(w){var _=this._ctx;_.algorithm=yl(_.algorithm,w)},xt.prototype._iterate=function(w,_){return wl(this._ctx,w,_,this._ctx.table.core)},xt.prototype.clone=function(w){var _=Object.create(this.constructor.prototype),k=Object.create(this._ctx);return w&&l(k,w),_._ctx=k,_},xt.prototype.raw=function(){return this._ctx.valueMapper=null,this},xt.prototype.each=function(w){var _=this._ctx;return this._read(function(k){return wl(_,w,k,_.table.core)})},xt.prototype.count=function(w){var _=this;return this._read(function(k){var N=_._ctx,M=N.table.core;if(vl(N,!0))return M.count({trans:k,query:{index:Vo(N,M.schema),range:N.range}}).then(function(z){return Math.min(z,N.limit)});var j=0;return wl(N,function(){return++j,!1},k,M).then(function(){return j})}).then(w)},xt.prototype.sortBy=function(w,_){var k=w.split(".").reverse(),N=k[0],M=k.length-1;function j(X,Z){return Z?j(X[k[Z]],Z-1):X[N]}var z=this._ctx.dir==="next"?1:-1;function q(X,Z){return wt(j(X,M),j(Z,M))*z}return this.toArray(function(X){return X.sort(q)}).then(_)},xt.prototype.toArray=function(w){var _=this;return this._read(function(k){var N=_._ctx;if(N.dir==="next"&&vl(N,!0)&&0<N.limit){var M=N.valueMapper,j=Vo(N,N.table.core.schema);return N.table.core.query({trans:k,limit:N.limit,values:!0,query:{index:j,range:N.range}}).then(function(q){return q=q.result,M?q.map(M):q})}var z=[];return wl(N,function(q){return z.push(q)},k,N.table.core).then(function(){return z})},w)},xt.prototype.offset=function(w){var _=this._ctx;return w<=0||(_.offset+=w,vl(_)?Di(_,function(){var k=w;return function(N,M){return k===0||(k===1?--k:M(function(){N.advance(k),k=0}),!1)}}):Di(_,function(){var k=w;return function(){return--k<0}})),this},xt.prototype.limit=function(w){return this._ctx.limit=Math.min(this._ctx.limit,w),Di(this._ctx,function(){var _=w;return function(k,N,M){return--_<=0&&N(M),0<=_}},!0),this},xt.prototype.until=function(w,_){return mg(this._ctx,function(k,N,M){return!w(k.value)||(N(M),_)}),this},xt.prototype.first=function(w){return this.limit(1).toArray(function(_){return _[0]}).then(w)},xt.prototype.last=function(w){return this.reverse().first(w)},xt.prototype.filter=function(w){var _;return mg(this._ctx,function(k){return w(k.value)}),(_=this._ctx).isMatch=yl(_.isMatch,w),this},xt.prototype.and=function(w){return this.filter(w)},xt.prototype.or=function(w){return new this.db.WhereClause(this._ctx.table,w,this)},xt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},xt.prototype.desc=function(){return this.reverse()},xt.prototype.eachKey=function(w){var _=this._ctx;return _.keysOnly=!_.isMatch,this.each(function(k,N){w(N.key,N)})},xt.prototype.eachUniqueKey=function(w){return this._ctx.unique="unique",this.eachKey(w)},xt.prototype.eachPrimaryKey=function(w){var _=this._ctx;return _.keysOnly=!_.isMatch,this.each(function(k,N){w(N.primaryKey,N)})},xt.prototype.keys=function(w){var _=this._ctx;_.keysOnly=!_.isMatch;var k=[];return this.each(function(N,M){k.push(M.key)}).then(function(){return k}).then(w)},xt.prototype.primaryKeys=function(w){var _=this._ctx;if(_.dir==="next"&&vl(_,!0)&&0<_.limit)return this._read(function(N){var M=Vo(_,_.table.core.schema);return _.table.core.query({trans:N,values:!1,limit:_.limit,query:{index:M,range:_.range}})}).then(function(N){return N.result}).then(w);_.keysOnly=!_.isMatch;var k=[];return this.each(function(N,M){k.push(M.primaryKey)}).then(function(){return k}).then(w)},xt.prototype.uniqueKeys=function(w){return this._ctx.unique="unique",this.keys(w)},xt.prototype.firstKey=function(w){return this.limit(1).keys(function(_){return _[0]}).then(w)},xt.prototype.lastKey=function(w){return this.reverse().firstKey(w)},xt.prototype.distinct=function(){var w=this._ctx,w=w.index&&w.table.schema.idxByName[w.index];if(!w||!w.multi)return this;var _={};return mg(this._ctx,function(M){var N=M.primaryKey.toString(),M=f(_,N);return _[N]=!0,!M}),this},xt.prototype.modify=function(w){var _=this,k=this._ctx;return this._write(function(N){var M,j,z;z=typeof w=="function"?w:(M=i(w),j=M.length,function(ee){for(var ce=!1,de=0;de<j;++de){var fe=M[de],Ce=w[fe],De=O(ee,fe);Ce instanceof Wt?(T(ee,fe,Ce.execute(De)),ce=!0):De!==Ce&&(T(ee,fe,Ce),ce=!0)}return ce});var q=k.table.core,K=q.schema.primaryKey,X=K.outbound,Z=K.extractKey,ne=200,K=_.db._options.modifyChunkSize;K&&(ne=typeof K=="object"?K[q.name]||K["*"]||200:K);function oe(ee,fe){var de=fe.failures,fe=fe.numFailures;te+=ee-fe;for(var Ce=0,De=i(de);Ce<De.length;Ce++){var Ue=De[Ce];J.push(de[Ue])}}var J=[],te=0,re=[];return _.clone().primaryKeys().then(function(ee){function ce(fe){var Ce=Math.min(ne,ee.length-fe);return q.getMany({trans:N,keys:ee.slice(fe,fe+Ce),cache:"immutable"}).then(function(De){for(var Ue=[],Oe=[],$e=X?[]:null,He=[],Fe=0;Fe<Ce;++Fe){var qe=De[Fe],pt={value:V(qe),primKey:ee[fe+Fe]};z.call(pt,pt.value,pt)!==!1&&(pt.value==null?He.push(ee[fe+Fe]):X||wt(Z(qe),Z(pt.value))===0?(Oe.push(pt.value),X&&$e.push(ee[fe+Fe])):(He.push(ee[fe+Fe]),Ue.push(pt.value)))}return Promise.resolve(0<Ue.length&&q.mutate({trans:N,type:"add",values:Ue}).then(function(_t){for(var Ct in _t.failures)He.splice(parseInt(Ct),1);oe(Ue.length,_t)})).then(function(){return(0<Oe.length||de&&typeof w=="object")&&q.mutate({trans:N,type:"put",keys:$e,values:Oe,criteria:de,changeSpec:typeof w!="function"&&w,isAdditionalChunk:0<fe}).then(function(_t){return oe(Oe.length,_t)})}).then(function(){return(0<He.length||de&&w===yg)&&q.mutate({trans:N,type:"delete",keys:He,criteria:de,isAdditionalChunk:0<fe}).then(function(_t){return oe(He.length,_t)})}).then(function(){return ee.length>fe+Ce&&ce(fe+ne)})})}var de=vl(k)&&k.limit===1/0&&(typeof w!="function"||w===yg)&&{index:k.index,range:k.range};return ce(0).then(function(){if(0<J.length)throw new he("Error modifying one or more objects",J,te,re);return ee.length})})})},xt.prototype.delete=function(){var w=this._ctx,_=w.range;return vl(w)&&(w.isPrimKey||_.type===3)?this._write(function(k){var N=w.table.core.schema.primaryKey,M=_;return w.table.core.count({trans:k,query:{index:N,range:M}}).then(function(j){return w.table.core.mutate({trans:k,type:"deleteRange",range:M}).then(function(z){var q=z.failures;if(z.lastResult,z.results,z=z.numFailures,z)throw new he("Could not delete some values",Object.keys(q).map(function(X){return q[X]}),j-z);return j-z})})}):this.modify(yg)},xt);function xt(){}var yg=function(w,_){return _.value=null};function bw(w,_){return w<_?-1:w===_?0:1}function M2(w,_){return _<w?-1:w===_?0:1}function _o(w,_,k){return w=w instanceof vg?new w.Collection(w):w,w._ctx.error=new(k||TypeError)(_),w}function Oc(w){return new w.Collection(w,function(){return Oi("")}).limit(0)}function bh(w,_,k,N){var M,j,z,q,X,Z,ne,K=k.length;if(!k.every(function(te){return typeof te=="string"}))return _o(w,ug);function oe(te){M=te==="next"?function(ee){return ee.toUpperCase()}:function(ee){return ee.toLowerCase()},j=te==="next"?function(ee){return ee.toLowerCase()}:function(ee){return ee.toUpperCase()},z=te==="next"?bw:M2;var re=k.map(function(ee){return{lower:j(ee),upper:M(ee)}}).sort(function(ee,ce){return z(ee.lower,ce.lower)});q=re.map(function(ee){return ee.upper}),X=re.map(function(ee){return ee.lower}),ne=(Z=te)==="next"?"":N}oe("next"),w=new w.Collection(w,function(){return $o(q[0],X[K-1]+N)}),w._ondirectionchange=function(te){oe(te)};var J=0;return w._addAlgorithm(function(te,re,ee){var ce=te.key;if(typeof ce!="string")return!1;var de=j(ce);if(_(de,X,J))return!0;for(var fe=null,Ce=J;Ce<K;++Ce){var De=function(Ue,Oe,$e,He,Fe,qe){for(var pt=Math.min(Ue.length,He.length),_t=-1,Ct=0;Ct<pt;++Ct){var cs=Oe[Ct];if(cs!==He[Ct])return Fe(Ue[Ct],$e[Ct])<0?Ue.substr(0,Ct)+$e[Ct]+$e.substr(Ct+1):Fe(Ue[Ct],He[Ct])<0?Ue.substr(0,Ct)+He[Ct]+$e.substr(Ct+1):0<=_t?Ue.substr(0,_t)+Oe[_t]+$e.substr(_t+1):null;Fe(Ue[Ct],cs)<0&&(_t=Ct)}return pt<He.length&&qe==="next"?Ue+$e.substr(Ue.length):pt<Ue.length&&qe==="prev"?Ue.substr(0,$e.length):_t<0?null:Ue.substr(0,_t)+He[_t]+$e.substr(_t+1)}(ce,de,q[Ce],X[Ce],z,Z);De===null&&fe===null?J=Ce+1:(fe===null||0<z(fe,De))&&(fe=De)}return re(fe!==null?function(){te.continue(fe+ne)}:ee),!1}),w}function $o(w,_,k,N){return{type:2,lower:w,upper:_,lowerOpen:k,upperOpen:N}}function Oi(w){return{type:1,lower:w,upper:w}}var vg=(Object.defineProperty(qn.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),qn.prototype.between=function(w,_,k,N){k=k!==!1,N=N===!0;try{return 0<this._cmp(w,_)||this._cmp(w,_)===0&&(k||N)&&(!k||!N)?Oc(this):new this.Collection(this,function(){return $o(w,_,!k,!N)})}catch{return _o(this,jo)}},qn.prototype.equals=function(w){return w==null?_o(this,jo):new this.Collection(this,function(){return Oi(w)})},qn.prototype.above=function(w){return w==null?_o(this,jo):new this.Collection(this,function(){return $o(w,void 0,!0)})},qn.prototype.aboveOrEqual=function(w){return w==null?_o(this,jo):new this.Collection(this,function(){return $o(w,void 0,!1)})},qn.prototype.below=function(w){return w==null?_o(this,jo):new this.Collection(this,function(){return $o(void 0,w,!1,!0)})},qn.prototype.belowOrEqual=function(w){return w==null?_o(this,jo):new this.Collection(this,function(){return $o(void 0,w)})},qn.prototype.startsWith=function(w){return typeof w!="string"?_o(this,ug):this.between(w,w+gl,!0,!0)},qn.prototype.startsWithIgnoreCase=function(w){return w===""?this.startsWith(w):bh(this,function(_,k){return _.indexOf(k[0])===0},[w],gl)},qn.prototype.equalsIgnoreCase=function(w){return bh(this,function(_,k){return _===k[0]},[w],"")},qn.prototype.anyOfIgnoreCase=function(){var w=ue.apply(Y,arguments);return w.length===0?Oc(this):bh(this,function(_,k){return k.indexOf(_)!==-1},w,"")},qn.prototype.startsWithAnyOfIgnoreCase=function(){var w=ue.apply(Y,arguments);return w.length===0?Oc(this):bh(this,function(_,k){return k.some(function(N){return _.indexOf(N)===0})},w,gl)},qn.prototype.anyOf=function(){var w=this,_=ue.apply(Y,arguments),k=this._cmp;try{_.sort(k)}catch{return _o(this,jo)}if(_.length===0)return Oc(this);var N=new this.Collection(this,function(){return $o(_[0],_[_.length-1])});N._ondirectionchange=function(j){k=j==="next"?w._ascending:w._descending,_.sort(k)};var M=0;return N._addAlgorithm(function(j,z,q){for(var X=j.key;0<k(X,_[M]);)if(++M===_.length)return z(q),!1;return k(X,_[M])===0||(z(function(){j.continue(_[M])}),!1)}),N},qn.prototype.notEqual=function(w){return this.inAnyRange([[-1/0,w],[w,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},qn.prototype.noneOf=function(){var w=ue.apply(Y,arguments);if(w.length===0)return new this.Collection(this);try{w.sort(this._ascending)}catch{return _o(this,jo)}var _=w.reduce(function(k,N){return k?k.concat([[k[k.length-1][1],N]]):[[-1/0,N]]},null);return _.push([w[w.length-1],this.db._maxKey]),this.inAnyRange(_,{includeLowers:!1,includeUppers:!1})},qn.prototype.inAnyRange=function(ce,_){var k=this,N=this._cmp,M=this._ascending,j=this._descending,z=this._min,q=this._max;if(ce.length===0)return Oc(this);if(!ce.every(function(de){return de[0]!==void 0&&de[1]!==void 0&&M(de[0],de[1])<=0}))return _o(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",xe.InvalidArgument);var X=!_||_.includeLowers!==!1,Z=_&&_.includeUppers===!0,ne,K=M;function oe(de,fe){return K(de[0],fe[0])}try{(ne=ce.reduce(function(de,fe){for(var Ce=0,De=de.length;Ce<De;++Ce){var Ue=de[Ce];if(N(fe[0],Ue[1])<0&&0<N(fe[1],Ue[0])){Ue[0]=z(Ue[0],fe[0]),Ue[1]=q(Ue[1],fe[1]);break}}return Ce===De&&de.push(fe),de},[])).sort(oe)}catch{return _o(this,jo)}var J=0,te=Z?function(de){return 0<M(de,ne[J][1])}:function(de){return 0<=M(de,ne[J][1])},re=X?function(de){return 0<j(de,ne[J][0])}:function(de){return 0<=j(de,ne[J][0])},ee=te,ce=new this.Collection(this,function(){return $o(ne[0][0],ne[ne.length-1][1],!X,!Z)});return ce._ondirectionchange=function(de){K=de==="next"?(ee=te,M):(ee=re,j),ne.sort(oe)},ce._addAlgorithm(function(de,fe,Ce){for(var De,Ue=de.key;ee(Ue);)if(++J===ne.length)return fe(Ce),!1;return!te(De=Ue)&&!re(De)||(k._cmp(Ue,ne[J][1])===0||k._cmp(Ue,ne[J][0])===0||fe(function(){K===M?de.continue(ne[J][0]):de.continue(ne[J][1])}),!1)}),ce},qn.prototype.startsWithAnyOf=function(){var w=ue.apply(Y,arguments);return w.every(function(_){return typeof _=="string"})?w.length===0?Oc(this):this.inAnyRange(w.map(function(_){return[_,_+gl]})):_o(this,"startsWithAnyOf() only works with strings")},qn);function qn(){}function as(w){return Kt(function(_){return Us(_),w(_.target.error),!1})}function Us(w){w.stopPropagation&&w.stopPropagation(),w.preventDefault&&w.preventDefault()}var Id="storagemutated",wg="x-storagemutated-1",wa=kd(null,Id),ba=(Hs.prototype._lock=function(){return R(!Xe.global),++this._reculock,this._reculock!==1||Xe.global||(Xe.lockOwnerFor=this),this},Hs.prototype._unlock=function(){if(R(!Xe.global),--this._reculock==0)for(Xe.global||(Xe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var w=this._blockedFuncs.shift();try{Pi(w[1],w[0])}catch{}}return this},Hs.prototype._locked=function(){return this._reculock&&Xe.lockOwnerFor!==this},Hs.prototype.create=function(w){var _=this;if(!this.mode)return this;var k=this.db.idbdb,N=this.db._state.dbOpenError;if(R(!this.idbtrans),!w&&!k)switch(N&&N.name){case"DatabaseClosedError":throw new xe.DatabaseClosed(N);case"MissingAPIError":throw new xe.MissingAPI(N.message,N);default:throw new xe.OpenFailed(N)}if(!this.active)throw new xe.TransactionInactive;return R(this._completion._state===null),(w=this.idbtrans=w||(this.db.core||k).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Kt(function(M){Us(M),_._reject(w.error)}),w.onabort=Kt(function(M){Us(M),_.active&&_._reject(new xe.Abort(w.error)),_.active=!1,_.on("abort").fire(M)}),w.oncomplete=Kt(function(){_.active=!1,_._resolve(),"mutatedParts"in w&&wa.storagemutated.fire(w.mutatedParts)}),this},Hs.prototype._promise=function(w,_,k){var N=this;if(w==="readwrite"&&this.mode!=="readwrite")return In(new xe.ReadOnly("Transaction is readonly"));if(!this.active)return In(new xe.TransactionInactive);if(this._locked())return new We(function(j,z){N._blockedFuncs.push([function(){N._promise(w,_,k).then(j,z)},Xe])});if(k)return is(function(){var j=new We(function(z,q){N._lock();var X=_(z,q,N);X&&X.then&&X.then(z,q)});return j.finally(function(){return N._unlock()}),j._lib=!0,j});var M=new We(function(j,z){var q=_(j,z,N);q&&q.then&&q.then(j,z)});return M._lib=!0,M},Hs.prototype._root=function(){return this.parent?this.parent._root():this},Hs.prototype.waitFor=function(w){var _,k=this._root(),N=We.resolve(w);k._waitingFor?k._waitingFor=k._waitingFor.then(function(){return N}):(k._waitingFor=N,k._waitingQueue=[],_=k.idbtrans.objectStore(k.storeNames[0]),function j(){for(++k._spinCount;k._waitingQueue.length;)k._waitingQueue.shift()();k._waitingFor&&(_.get(-1/0).onsuccess=j)}());var M=k._waitingFor;return new We(function(j,z){N.then(function(q){return k._waitingQueue.push(Kt(j.bind(null,q)))},function(q){return k._waitingQueue.push(Kt(z.bind(null,q)))}).finally(function(){k._waitingFor===M&&(k._waitingFor=null)})})},Hs.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new xe.Abort))},Hs.prototype.table=function(w){var _=this._memoizedTables||(this._memoizedTables={});if(f(_,w))return _[w];var k=this.schema[w];if(!k)throw new xe.NotFound("Table "+w+" not part of transaction");return k=new this.db.Table(w,k,this),k.core=this.db.core.table(w),_[w]=k},Hs);function Hs(){}function bg(w,_,k,N,M,j,z){return{name:w,keyPath:_,unique:k,multi:N,auto:M,compound:j,src:(k&&!z?"&":"")+(N?"*":"")+(M?"++":"")+Rd(_)}}function Rd(w){return typeof w=="string"?w:w?"["+[].join.call(w,"+")+"]":""}function Lc(w,_,k){return{name:w,primKey:_,indexes:k,mappedClass:null,idxByName:(N=function(M){return[M.name,M]},k.reduce(function(M,j,z){return z=N(j,z),z&&(M[z[0]]=z[1]),M},{}))};var N}var jc=function(w){try{return w.only([[]]),jc=function(){return[[]]},[[]]}catch{return jc=function(){return gl},gl}};function bl(w){return w==null?function(){}:typeof w=="string"?(_=w).split(".").length===1?function(k){return k[_]}:function(k){return O(k,_)}:function(k){return O(k,w)};var _}function Vc(w){return[].slice.call(w)}var xw=0;function xl(w){return w==null?":id":typeof w=="string"?w:"[".concat(w.join("+"),"]")}function Rn(w,_,X){function N(ee){if(ee.type===3)return null;if(ee.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var J=ee.lower,te=ee.upper,re=ee.lowerOpen,ee=ee.upperOpen;return J===void 0?te===void 0?null:_.upperBound(te,!!ee):te===void 0?_.lowerBound(J,!!re):_.bound(J,te,!!re,!!ee)}function M(oe){var J,te=oe.name;return{name:te,schema:oe,mutate:function(re){var ee=re.trans,ce=re.type,de=re.keys,fe=re.values,Ce=re.range;return new Promise(function(De,Ue){De=Kt(De);var Oe=ee.objectStore(te),$e=Oe.keyPath==null,He=ce==="put"||ce==="add";if(!He&&ce!=="delete"&&ce!=="deleteRange")throw new Error("Invalid operation type: "+ce);var Fe,qe=(de||fe||{length:1}).length;if(de&&fe&&de.length!==fe.length)throw new Error("Given keys array must have same length as given values array.");if(qe===0)return De({numFailures:0,failures:{},results:[],lastResult:void 0});function pt(Co){++cs,Us(Co)}var _t=[],Ct=[],cs=0;if(ce==="deleteRange"){if(Ce.type===4)return De({numFailures:cs,failures:Ct,results:[],lastResult:void 0});Ce.type===3?_t.push(Fe=Oe.clear()):_t.push(Fe=Oe.delete(N(Ce)))}else{var $e=He?$e?[fe,de]:[fe,null]:[de,null],ht=$e[0],Xr=$e[1];if(He)for(var Jr=0;Jr<qe;++Jr)_t.push(Fe=Xr&&Xr[Jr]!==void 0?Oe[ce](ht[Jr],Xr[Jr]):Oe[ce](ht[Jr])),Fe.onerror=pt;else for(Jr=0;Jr<qe;++Jr)_t.push(Fe=Oe[ce](ht[Jr])),Fe.onerror=pt}function Iw(Co){Co=Co.target.result,_t.forEach(function(Od,j2){return Od.error!=null&&(Ct[j2]=Od.error)}),De({numFailures:cs,failures:Ct,results:ce==="delete"?de:_t.map(function(Od){return Od.result}),lastResult:Co})}Fe.onerror=function(Co){pt(Co),Iw(Co)},Fe.onsuccess=Iw})},getMany:function(re){var ee=re.trans,ce=re.keys;return new Promise(function(de,fe){de=Kt(de);for(var Ce,De=ee.objectStore(te),Ue=ce.length,Oe=new Array(Ue),$e=0,He=0,Fe=function(_t){_t=_t.target,Oe[_t._pos]=_t.result,++He===$e&&de(Oe)},qe=as(fe),pt=0;pt<Ue;++pt)ce[pt]!=null&&((Ce=De.get(ce[pt]))._pos=pt,Ce.onsuccess=Fe,Ce.onerror=qe,++$e);$e===0&&de(Oe)})},get:function(re){var ee=re.trans,ce=re.key;return new Promise(function(de,fe){de=Kt(de);var Ce=ee.objectStore(te).get(ce);Ce.onsuccess=function(De){return de(De.target.result)},Ce.onerror=as(fe)})},query:(J=Z,function(re){return new Promise(function(ee,ce){ee=Kt(ee);var de,fe,Ce,$e=re.trans,De=re.values,Ue=re.limit,Fe=re.query,Oe=Ue===1/0?void 0:Ue,He=Fe.index,Fe=Fe.range,$e=$e.objectStore(te),He=He.isPrimaryKey?$e:$e.index(He.name),Fe=N(Fe);if(Ue===0)return ee({result:[]});J?((Oe=De?He.getAll(Fe,Oe):He.getAllKeys(Fe,Oe)).onsuccess=function(qe){return ee({result:qe.target.result})},Oe.onerror=as(ce)):(de=0,fe=!De&&"openKeyCursor"in He?He.openKeyCursor(Fe):He.openCursor(Fe),Ce=[],fe.onsuccess=function(qe){var pt=fe.result;return pt?(Ce.push(De?pt.value:pt.primaryKey),++de===Ue?ee({result:Ce}):void pt.continue()):ee({result:Ce})},fe.onerror=as(ce))})}),openCursor:function(re){var ee=re.trans,ce=re.values,de=re.query,fe=re.reverse,Ce=re.unique;return new Promise(function(De,Ue){De=Kt(De);var He=de.index,Oe=de.range,$e=ee.objectStore(te),$e=He.isPrimaryKey?$e:$e.index(He.name),He=fe?Ce?"prevunique":"prev":Ce?"nextunique":"next",Fe=!ce&&"openKeyCursor"in $e?$e.openKeyCursor(N(Oe),He):$e.openCursor(N(Oe),He);Fe.onerror=as(Ue),Fe.onsuccess=Kt(function(qe){var pt,_t,Ct,cs,ht=Fe.result;ht?(ht.___id=++xw,ht.done=!1,pt=ht.continue.bind(ht),_t=(_t=ht.continuePrimaryKey)&&_t.bind(ht),Ct=ht.advance.bind(ht),cs=function(){throw new Error("Cursor not stopped")},ht.trans=ee,ht.stop=ht.continue=ht.continuePrimaryKey=ht.advance=function(){throw new Error("Cursor not started")},ht.fail=Kt(Ue),ht.next=function(){var Xr=this,Jr=1;return this.start(function(){return Jr--?Xr.continue():Xr.stop()}).then(function(){return Xr})},ht.start=function(Xr){function Jr(){if(Fe.result)try{Xr()}catch(Co){ht.fail(Co)}else ht.done=!0,ht.start=function(){throw new Error("Cursor behind last entry")},ht.stop()}var Iw=new Promise(function(Co,Od){Co=Kt(Co),Fe.onerror=as(Od),ht.fail=Od,ht.stop=function(j2){ht.stop=ht.continue=ht.continuePrimaryKey=ht.advance=cs,Co(j2)}});return Fe.onsuccess=Kt(function(Co){Fe.onsuccess=Jr,Jr()}),ht.continue=pt,ht.continuePrimaryKey=_t,ht.advance=Ct,Jr(),Iw},De(ht)):De(null)},Ue)})},count:function(re){var ee=re.query,ce=re.trans,de=ee.index,fe=ee.range;return new Promise(function(Ce,De){var Ue=ce.objectStore(te),Oe=de.isPrimaryKey?Ue:Ue.index(de.name),Ue=N(fe),Oe=Ue?Oe.count(Ue):Oe.count();Oe.onsuccess=Kt(function($e){return Ce($e.target.result)}),Oe.onerror=as(De)})}}}var j,z,q,ne=(z=X,q=Vc((j=w).objectStoreNames),{schema:{name:j.name,tables:q.map(function(oe){return z.objectStore(oe)}).map(function(oe){var J=oe.keyPath,ee=oe.autoIncrement,te=a(J),re={},ee={name:oe.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:J==null,compound:te,keyPath:J,autoIncrement:ee,unique:!0,extractKey:bl(J)},indexes:Vc(oe.indexNames).map(function(ce){return oe.index(ce)}).map(function(Ce){var de=Ce.name,fe=Ce.unique,De=Ce.multiEntry,Ce=Ce.keyPath,De={name:de,compound:a(Ce),keyPath:Ce,unique:fe,multiEntry:De,extractKey:bl(Ce)};return re[xl(Ce)]=De}),getIndexByKeyPath:function(ce){return re[xl(ce)]}};return re[":id"]=ee.primaryKey,J!=null&&(re[xl(J)]=ee.primaryKey),ee})},hasGetAll:0<q.length&&"getAll"in z.objectStore(q[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),X=ne.schema,Z=ne.hasGetAll,ne=X.tables.map(M),K={};return ne.forEach(function(oe){return K[oe.name]=oe}),{stack:"dbcore",transaction:w.transaction.bind(w),table:function(oe){if(!K[oe])throw new Error("Table '".concat(oe,"' not found"));return K[oe]},MIN_KEY:-1/0,MAX_KEY:jc(_),schema:X}}function D2(w,_,k,N){var M=k.IDBKeyRange;return k.indexedDB,{dbcore:(N=Rn(_,M,N),w.dbcore.reduce(function(j,z){return z=z.create,r(r({},j),z(j))},N))}}function xh(w,N){var k=N.db,N=D2(w._middlewares,k,w._deps,N);w.core=N.dbcore,w.tables.forEach(function(M){var j=M.name;w.core.schema.tables.some(function(z){return z.name===j})&&(M.core=w.core.table(j),w[j]instanceof w.Table&&(w[j].core=M.core))})}function Ad(w,_,k,N){k.forEach(function(M){var j=N[M];_.forEach(function(z){var q=function X(Z,ne){return x(Z,ne)||(Z=c(Z))&&X(Z,ne)}(z,M);(!q||"value"in q&&q.value===void 0)&&(z===w.Transaction.prototype||z instanceof w.Transaction?m(z,M,{get:function(){return this.table(M)},set:function(X){p(this,M,{value:X,writable:!0,configurable:!0,enumerable:!0})}}):z[M]=new w.Table(M,j))})})}function _h(w,_){_.forEach(function(k){for(var N in k)k[N]instanceof w.Table&&delete k[N]})}function _w(w,_){return w._cfg.version-_._cfg.version}function Ch(w,_,k,N){var M=w._dbSchema;k.objectStoreNames.contains("$meta")&&!M.$meta&&(M.$meta=Lc("$meta",Md("")[0],[]),w._storeNames.push("$meta"));var j=w._createTransaction("readwrite",w._storeNames,M);j.create(k),j._completion.catch(N);var z=j._reject.bind(j),q=Xe.transless||Xe;is(function(){return Xe.trans=j,Xe.transless=q,_!==0?(xh(w,k),Z=_,((X=j).storeNames.includes("$meta")?X.table("$meta").get("version").then(function(ne){return ne??Z}):We.resolve(Z)).then(function(ne){return oe=ne,J=j,te=k,re=[],ne=(K=w)._versions,ee=K._dbSchema=Pd(0,K.idbdb,te),(ne=ne.filter(function(ce){return ce._cfg.version>=oe})).length!==0?(ne.forEach(function(ce){re.push(function(){var de=ee,fe=ce._cfg.dbschema;$c(K,de,te),$c(K,fe,te),ee=K._dbSchema=fe;var Ce=ls(de,fe);Ce.add.forEach(function(He){Eh(te,He[0],He[1].primKey,He[1].indexes)}),Ce.change.forEach(function(He){if(He.recreate)throw new xe.Upgrade("Not yet support for changing primary key");var Fe=te.objectStore(He.name);He.add.forEach(function(qe){return xa(Fe,qe)}),He.change.forEach(function(qe){Fe.deleteIndex(qe.name),xa(Fe,qe)}),He.del.forEach(function(qe){return Fe.deleteIndex(qe)})});var De=ce._cfg.contentUpgrade;if(De&&ce._cfg.version>oe){xh(K,te),J._memoizedTables={};var Ue=I(fe);Ce.del.forEach(function(He){Ue[He]=de[He]}),_h(K,[K.Transaction.prototype]),Ad(K,[K.Transaction.prototype],i(Ue),Ue),J.schema=Ue;var Oe,$e=W(De);return $e&&pl(),Ce=We.follow(function(){var He;(Oe=De(J))&&$e&&(He=Fs.bind(null,null),Oe.then(He,He))}),Oe&&typeof Oe.then=="function"?We.resolve(Oe):Ce.then(function(){return Oe})}}),re.push(function(de){var fe,Ce,De=ce._cfg.dbschema;fe=De,Ce=de,[].slice.call(Ce.db.objectStoreNames).forEach(function(Ue){return fe[Ue]==null&&Ce.db.deleteObjectStore(Ue)}),_h(K,[K.Transaction.prototype]),Ad(K,[K.Transaction.prototype],K._storeNames,K._dbSchema),J.schema=K._dbSchema}),re.push(function(de){K.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(K.idbdb.version/10)===ce._cfg.version?(K.idbdb.deleteObjectStore("$meta"),delete K._dbSchema.$meta,K._storeNames=K._storeNames.filter(function(fe){return fe!=="$meta"})):de.objectStore("$meta").put(ce._cfg.version,"version"))})}),function ce(){return re.length?We.resolve(re.shift()(J.idbtrans)).then(ce):We.resolve()}().then(function(){Ew(ee,te)})):We.resolve();var K,oe,J,te,re,ee}).catch(z)):(i(M).forEach(function(ne){Eh(k,ne,M[ne].primKey,M[ne].indexes)}),xh(w,k),void We.follow(function(){return w.on.populate.fire(j)}).catch(z));var X,Z})}function Cw(w,_){Ew(w._dbSchema,_),_.db.version%10!=0||_.objectStoreNames.contains("$meta")||_.db.createObjectStore("$meta").add(Math.ceil(_.db.version/10-1),"version");var k=Pd(0,w.idbdb,_);$c(w,w._dbSchema,_);for(var N=0,M=ls(k,w._dbSchema).change;N<M.length;N++){var j=function(z){if(z.change.length||z.recreate)return console.warn("Unable to patch indexes of table ".concat(z.name," because it has changes on the type of index or primary key.")),{value:void 0};var q=_.objectStore(z.name);z.add.forEach(function(X){xo&&console.debug("Dexie upgrade patch: Creating missing index ".concat(z.name,".").concat(X.src)),xa(q,X)})}(M[N]);if(typeof j=="object")return j.value}}function ls(w,_){var k,N={del:[],add:[],change:[]};for(k in w)_[k]||N.del.push(k);for(k in _){var M=w[k],j=_[k];if(M){var z={name:k,def:j,recreate:!1,del:[],add:[],change:[]};if(""+(M.primKey.keyPath||"")!=""+(j.primKey.keyPath||"")||M.primKey.auto!==j.primKey.auto)z.recreate=!0,N.change.push(z);else{var q=M.idxByName,X=j.idxByName,Z=void 0;for(Z in q)X[Z]||z.del.push(Z);for(Z in X){var ne=q[Z],K=X[Z];ne?ne.src!==K.src&&z.change.push(K):z.add.push(K)}(0<z.del.length||0<z.add.length||0<z.change.length)&&N.change.push(z)}}else N.add.push([k,j])}return N}function Eh(w,_,k,N){var M=w.db.createObjectStore(_,k.keyPath?{keyPath:k.keyPath,autoIncrement:k.auto}:{autoIncrement:k.auto});return N.forEach(function(j){return xa(M,j)}),M}function Ew(w,_){i(w).forEach(function(k){_.db.objectStoreNames.contains(k)||(xo&&console.debug("Dexie: Creating missing table",k),Eh(_,k,w[k].primKey,w[k].indexes))})}function xa(w,_){w.createIndex(_.name,_.keyPath,{unique:_.unique,multiEntry:_.multi})}function Pd(w,_,k){var N={};return C(_.objectStoreNames,0).forEach(function(M){for(var j=k.objectStore(M),z=bg(Rd(Z=j.keyPath),Z||"",!0,!1,!!j.autoIncrement,Z&&typeof Z!="string",!0),q=[],X=0;X<j.indexNames.length;++X){var ne=j.index(j.indexNames[X]),Z=ne.keyPath,ne=bg(ne.name,Z,!!ne.unique,!!ne.multiEntry,!1,Z&&typeof Z!="string",!1);q.push(ne)}N[M]=Lc(M,z,q)}),N}function $c(w,_,k){for(var N=k.db.objectStoreNames,M=0;M<N.length;++M){var j=N[M],z=k.objectStore(j);w._hasGetAll="getAll"in z;for(var q=0;q<z.indexNames.length;++q){var X=z.indexNames[q],Z=z.index(X).keyPath,ne=typeof Z=="string"?Z:"["+C(Z).join("+")+"]";!_[j]||(Z=_[j].idxByName[ne])&&(Z.name=X,delete _[j].idxByName[ne],_[j].idxByName[X]=Z)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&s.WorkerGlobalScope&&s instanceof s.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(w._hasGetAll=!1)}function Md(w){return w.split(",").map(function(_,k){var N=(_=_.trim()).replace(/([&*]|\+\+)/g,""),M=/^\[/.test(N)?N.match(/^\[(.*)\]$/)[1].split("+"):N;return bg(N,M||null,/\&/.test(_),/\*/.test(_),/\+\+/.test(_),a(M),k===0)})}var kw=(_l.prototype._parseStoresSpec=function(w,_){i(w).forEach(function(k){if(w[k]!==null){var N=Md(w[k]),M=N.shift();if(M.unique=!0,M.multi)throw new xe.Schema("Primary key cannot be multi-valued");N.forEach(function(j){if(j.auto)throw new xe.Schema("Only primary key can be marked as autoIncrement (++)");if(!j.keyPath)throw new xe.Schema("Index must have a name and cannot be an empty string")}),_[k]=Lc(k,M,N)}})},_l.prototype.stores=function(k){var _=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,k):k;var k=_._versions,N={},M={};return k.forEach(function(j){l(N,j._cfg.storesSource),M=j._cfg.dbschema={},j._parseStoresSpec(N,M)}),_._dbSchema=M,_h(_,[_._allTables,_,_.Transaction.prototype]),Ad(_,[_._allTables,_,_.Transaction.prototype,this._cfg.tables],i(M),M),_._storeNames=i(M),this},_l.prototype.upgrade=function(w){return this._cfg.contentUpgrade=pa(this._cfg.contentUpgrade||Re,w),this},_l);function _l(){}function xg(w,_){var k=w._dbNamesDB;return k||(k=w._dbNamesDB=new Il(va,{addons:[],indexedDB:w,IDBKeyRange:_})).version(1).stores({dbnames:"name"}),k.table("dbnames")}function kh(w){return w&&typeof w.databases=="function"}function Cl(w){return is(function(){return Xe.letThrough=!0,w()})}function Sh(w){return!("from"in w)}var hr=function(w,_){if(!this){var k=new hr;return w&&"d"in w&&l(k,w),k}l(this,arguments.length?{d:1,from:w,to:1<arguments.length?_:w}:{d:0})};function El(w,_,k){var N=wt(_,k);if(!isNaN(N)){if(0<N)throw RangeError();if(Sh(w))return l(w,{from:_,to:k,d:1});var M=w.l,N=w.r;if(wt(k,w.from)<0)return M?El(M,_,k):w.l={from:_,to:k,d:1,l:null,r:null},Cg(w);if(0<wt(_,w.to))return N?El(N,_,k):w.r={from:_,to:k,d:1,l:null,r:null},Cg(w);wt(_,w.from)<0&&(w.from=_,w.l=null,w.d=N?N.d+1:1),0<wt(k,w.to)&&(w.to=k,w.r=null,w.d=w.l?w.l.d+1:1),k=!w.r,M&&!w.l&&kl(w,M),N&&k&&kl(w,N)}}function kl(w,_){Sh(_)||function k(N,X){var j=X.from,z=X.to,q=X.l,X=X.r;El(N,j,z),q&&k(N,q),X&&k(N,X)}(w,_)}function _g(w,_){var k=Sl(_),N=k.next();if(N.done)return!1;for(var M=N.value,j=Sl(w),z=j.next(M.from),q=z.value;!N.done&&!z.done;){if(wt(q.from,M.to)<=0&&0<=wt(q.to,M.from))return!0;wt(M.from,q.from)<0?M=(N=k.next(q.from)).value:q=(z=j.next(M.from)).value}return!1}function Sl(w){var _=Sh(w)?null:{s:0,n:w};return{next:function(k){for(var N=0<arguments.length;_;)switch(_.s){case 0:if(_.s=1,N)for(;_.n.l&&wt(k,_.n.from)<0;)_={up:_,n:_.n.l,s:1};else for(;_.n.l;)_={up:_,n:_.n.l,s:1};case 1:if(_.s=2,!N||wt(k,_.n.to)<=0)return{value:_.n,done:!1};case 2:if(_.n.r){_.s=3,_={up:_,n:_.n.r,s:0};continue}case 3:_=_.up}return{done:!0}}}}function Cg(w){var _,k,N=(((_=w.r)===null||_===void 0?void 0:_.d)||0)-(((k=w.l)===null||k===void 0?void 0:k.d)||0),M=1<N?"r":N<-1?"l":"";M&&(_=M=="r"?"l":"r",k=r({},w),N=w[M],w.from=N.from,w.to=N.to,w[M]=N[M],k[M]=N[_],(w[_]=k).d=Eg(k)),w.d=Eg(w)}function Eg(k){var _=k.r,k=k.l;return(_?k?Math.max(_.d,k.d):_.d:k?k.d:0)+1}function zs(w,_){return i(_).forEach(function(k){w[k]?kl(w[k],_[k]):w[k]=function N(M){var j,z,q={};for(j in M)f(M,j)&&(z=M[j],q[j]=!z||typeof z!="object"||$.has(z.constructor)?z:N(z));return q}(_[k])}),w}function Th(w,_){return w.all||_.all||Object.keys(w).some(function(k){return _[k]&&_g(_[k],w[k])})}h(hr.prototype,((Ws={add:function(w){return kl(this,w),this},addKey:function(w){return El(this,w,w),this},addKeys:function(w){var _=this;return w.forEach(function(k){return El(_,k,k)}),this},hasKey:function(w){var _=Sl(this).next(w).value;return _&&wt(_.from,w)<=0&&0<=wt(_.to,w)}})[le]=function(){return Sl(this)},Ws));var _a={},Nh={},Ih=!1;function Tl(w){zs(Nh,w),Ih||(Ih=!0,setTimeout(function(){Ih=!1,Vr(Nh,!(Nh={}))},0))}function Vr(w,_){_===void 0&&(_=!1);var k=new Set;if(w.all)for(var N=0,M=Object.values(_a);N<M.length;N++)kg(z=M[N],w,k,_);else for(var j in w){var z,q=/^idb\:\/\/(.*)\/(.*)\//.exec(j);q&&(j=q[1],q=q[2],(z=_a["idb://".concat(j,"/").concat(q)])&&kg(z,w,k,_))}k.forEach(function(X){return X()})}function kg(w,_,k,N){for(var M=[],j=0,z=Object.entries(w.queries.query);j<z.length;j++){for(var q=z[j],X=q[0],Z=[],ne=0,K=q[1];ne<K.length;ne++){var oe=K[ne];Th(_,oe.obsSet)?oe.subscribers.forEach(function(ee){return k.add(ee)}):N&&Z.push(oe)}N&&M.push([X,Z])}if(N)for(var J=0,te=M;J<te.length;J++){var re=te[J],X=re[0],Z=re[1];w.queries.query[X]=Z}}function Sw(w){var _=w._state,k=w._deps.indexedDB;if(_.isBeingOpened||w.idbdb)return _.dbReadyPromise.then(function(){return _.dbOpenError?In(_.dbOpenError):w});_.isBeingOpened=!0,_.dbOpenError=null,_.openComplete=!1;var N=_.openCanceller,M=Math.round(10*w.verno),j=!1;function z(){if(_.openCanceller!==N)throw new xe.DatabaseClosed("db.open() was cancelled")}function q(){return new We(function(oe,J){if(z(),!k)throw new xe.MissingAPI;var te=w.name,re=_.autoSchema||!M?k.open(te):k.open(te,M);if(!re)throw new xe.MissingAPI;re.onerror=as(J),re.onblocked=Kt(w._fireOnBlocked),re.onupgradeneeded=Kt(function(ee){var ce;ne=re.transaction,_.autoSchema&&!w._options.allowEmptyDB?(re.onerror=Us,ne.abort(),re.result.close(),(ce=k.deleteDatabase(te)).onsuccess=ce.onerror=Kt(function(){J(new xe.NoSuchDatabase("Database ".concat(te," doesnt exist")))})):(ne.onerror=as(J),ee=ee.oldVersion>Math.pow(2,62)?0:ee.oldVersion,K=ee<1,w.idbdb=re.result,j&&Cw(w,ne),Ch(w,ee/10,ne,J))},J),re.onsuccess=Kt(function(){ne=null;var ee,ce,de,fe,Ce,De=w.idbdb=re.result,Ue=C(De.objectStoreNames);if(0<Ue.length)try{var Oe=De.transaction((fe=Ue).length===1?fe[0]:fe,"readonly");if(_.autoSchema)ce=De,de=Oe,(ee=w).verno=ce.version/10,de=ee._dbSchema=Pd(0,ce,de),ee._storeNames=C(ce.objectStoreNames,0),Ad(ee,[ee._allTables],i(de),de);else if($c(w,w._dbSchema,Oe),((Ce=ls(Pd(0,(Ce=w).idbdb,Oe),Ce._dbSchema)).add.length||Ce.change.some(function($e){return $e.add.length||$e.change.length}))&&!j)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),De.close(),M=De.version+1,j=!0,oe(q());xh(w,Oe)}catch{}ya.push(w),De.onversionchange=Kt(function($e){_.vcFired=!0,w.on("versionchange").fire($e)}),De.onclose=Kt(function($e){w.on("close").fire($e)}),K&&(Ce=w._deps,Oe=te,De=Ce.indexedDB,Ce=Ce.IDBKeyRange,kh(De)||Oe===va||xg(De,Ce).put({name:Oe}).catch(Re)),oe()},J)}).catch(function(oe){switch(oe==null?void 0:oe.name){case"UnknownError":if(0<_.PR1398_maxLoop)return _.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),q();break;case"VersionError":if(0<M)return M=0,q()}return We.reject(oe)})}var X,Z=_.dbReadyResolve,ne=null,K=!1;return We.race([N,(typeof navigator>"u"?We.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(oe){function J(){return indexedDB.databases().finally(oe)}X=setInterval(J,100),J()}).finally(function(){return clearInterval(X)}):Promise.resolve()).then(q)]).then(function(){return z(),_.onReadyBeingFired=[],We.resolve(Cl(function(){return w.on.ready.fire(w.vip)})).then(function oe(){if(0<_.onReadyBeingFired.length){var J=_.onReadyBeingFired.reduce(pa,Re);return _.onReadyBeingFired=[],We.resolve(Cl(function(){return J(w.vip)})).then(oe)}})}).finally(function(){_.openCanceller===N&&(_.onReadyBeingFired=null,_.isBeingOpened=!1)}).catch(function(oe){_.dbOpenError=oe;try{ne&&ne.abort()}catch{}return N===_.openCanceller&&w._close(),In(oe)}).finally(function(){_.openComplete=!0,Z()}).then(function(){var oe;return K&&(oe={},w.tables.forEach(function(J){J.schema.indexes.forEach(function(te){te.name&&(oe["idb://".concat(w.name,"/").concat(J.name,"/").concat(te.name)]=new hr(-1/0,[[[]]]))}),oe["idb://".concat(w.name,"/").concat(J.name,"/")]=oe["idb://".concat(w.name,"/").concat(J.name,"/:dels")]=new hr(-1/0,[[[]]])}),wa(Id).fire(oe),Vr(oe,!0)),w})}function Ca(w){function _(j){return w.next(j)}var k=M(_),N=M(function(j){return w.throw(j)});function M(j){return function(X){var q=j(X),X=q.value;return q.done?X:X&&typeof X.then=="function"?X.then(k,N):a(X)?Promise.all(X).then(k,N):k(X)}}return M(_)()}function v(w,_,k){for(var N=a(w)?w.slice():[w],M=0;M<k;++M)N.push(_);return N}var S={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(w){return r(r({},w),{table:function(_){var k=w.table(_),N=k.schema,M={},j=[];function z(K,oe,J){var te=xl(K),re=M[te]=M[te]||[],ee=K==null?0:typeof K=="string"?1:K.length,ce=0<oe,ce=r(r({},J),{name:ce?"".concat(te,"(virtual-from:").concat(J.name,")"):J.name,lowLevelIndex:J,isVirtual:ce,keyTail:oe,keyLength:ee,extractKey:bl(K),unique:!ce&&J.unique});return re.push(ce),ce.isPrimaryKey||j.push(ce),1<ee&&z(ee===2?K[0]:K.slice(0,ee-1),oe+1,J),re.sort(function(de,fe){return de.keyTail-fe.keyTail}),ce}_=z(N.primaryKey.keyPath,0,N.primaryKey),M[":id"]=[_];for(var q=0,X=N.indexes;q<X.length;q++){var Z=X[q];z(Z.keyPath,0,Z)}function ne(K){var oe,J=K.query.index;return J.isVirtual?r(r({},K),{query:{index:J.lowLevelIndex,range:(oe=K.query.range,J=J.keyTail,{type:oe.type===1?2:oe.type,lower:v(oe.lower,oe.lowerOpen?w.MAX_KEY:w.MIN_KEY,J),lowerOpen:!0,upper:v(oe.upper,oe.upperOpen?w.MIN_KEY:w.MAX_KEY,J),upperOpen:!0})}}):K}return r(r({},k),{schema:r(r({},N),{primaryKey:_,indexes:j,getIndexByKeyPath:function(K){return(K=M[xl(K)])&&K[0]}}),count:function(K){return k.count(ne(K))},query:function(K){return k.query(ne(K))},openCursor:function(K){var oe=K.query.index,J=oe.keyTail,te=oe.isVirtual,re=oe.keyLength;return te?k.openCursor(ne(K)).then(function(ce){return ce&&ee(ce)}):k.openCursor(K);function ee(ce){return Object.create(ce,{continue:{value:function(de){de!=null?ce.continue(v(de,K.reverse?w.MAX_KEY:w.MIN_KEY,J)):K.unique?ce.continue(ce.key.slice(0,re).concat(K.reverse?w.MIN_KEY:w.MAX_KEY,J)):ce.continue()}},continuePrimaryKey:{value:function(de,fe){ce.continuePrimaryKey(v(de,w.MAX_KEY,J),fe)}},primaryKey:{get:function(){return ce.primaryKey}},key:{get:function(){var de=ce.key;return re===1?de[0]:de.slice(0,re)}},value:{get:function(){return ce.value}}})}}})}})}};function A(w,_,k,N){return k=k||{},N=N||"",i(w).forEach(function(M){var j,z,q;f(_,M)?(j=w[M],z=_[M],typeof j=="object"&&typeof z=="object"&&j&&z?(q=ge(j))!==ge(z)?k[N+M]=_[M]:q==="Object"?A(j,z,k,N+M+"."):j!==z&&(k[N+M]=_[M]):j!==z&&(k[N+M]=_[M])):k[N+M]=void 0}),i(_).forEach(function(M){f(w,M)||(k[N+M]=_[M])}),k}function B(w,_){return _.type==="delete"?_.keys:_.keys||_.values.map(w.extractKey)}var se={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(w){return r(r({},w),{table:function(_){var k=w.table(_),N=k.schema.primaryKey;return r(r({},k),{mutate:function(M){var j=Xe.trans,z=j.table(_).hook,q=z.deleting,X=z.creating,Z=z.updating;switch(M.type){case"add":if(X.fire===Re)break;return j._promise("readwrite",function(){return ne(M)},!0);case"put":if(X.fire===Re&&Z.fire===Re)break;return j._promise("readwrite",function(){return ne(M)},!0);case"delete":if(q.fire===Re)break;return j._promise("readwrite",function(){return ne(M)},!0);case"deleteRange":if(q.fire===Re)break;return j._promise("readwrite",function(){return function K(oe,J,te){return k.query({trans:oe,values:!1,query:{index:N,range:J},limit:te}).then(function(re){var ee=re.result;return ne({type:"delete",keys:ee,trans:oe}).then(function(ce){return 0<ce.numFailures?Promise.reject(ce.failures[0]):ee.length<te?{failures:[],numFailures:0,lastResult:void 0}:K(oe,r(r({},J),{lower:ee[ee.length-1],lowerOpen:!0}),te)})})}(M.trans,M.range,1e4)},!0)}return k.mutate(M);function ne(K){var oe,J,te,re=Xe.trans,ee=K.keys||B(N,K);if(!ee)throw new Error("Keys missing");return(K=K.type==="add"||K.type==="put"?r(r({},K),{keys:ee}):r({},K)).type!=="delete"&&(K.values=o([],K.values)),K.keys&&(K.keys=o([],K.keys)),oe=k,te=ee,((J=K).type==="add"?Promise.resolve([]):oe.getMany({trans:J.trans,keys:te,cache:"immutable"})).then(function(ce){var de=ee.map(function(fe,Ce){var De,Ue,Oe,$e=ce[Ce],He={onerror:null,onsuccess:null};return K.type==="delete"?q.fire.call(He,fe,$e,re):K.type==="add"||$e===void 0?(De=X.fire.call(He,fe,K.values[Ce],re),fe==null&&De!=null&&(K.keys[Ce]=fe=De,N.outbound||T(K.values[Ce],N.keyPath,fe))):(De=A($e,K.values[Ce]),(Ue=Z.fire.call(He,De,fe,$e,re))&&(Oe=K.values[Ce],Object.keys(Ue).forEach(function(Fe){f(Oe,Fe)?Oe[Fe]=Ue[Fe]:T(Oe,Fe,Ue[Fe])}))),He});return k.mutate(K).then(function(fe){for(var Ce=fe.failures,De=fe.results,Ue=fe.numFailures,fe=fe.lastResult,Oe=0;Oe<ee.length;++Oe){var $e=(De||ee)[Oe],He=de[Oe];$e==null?He.onerror&&He.onerror(Ce[Oe]):He.onsuccess&&He.onsuccess(K.type==="put"&&ce[Oe]?K.values[Oe]:$e)}return{failures:Ce,results:De,numFailures:Ue,lastResult:fe}}).catch(function(fe){return de.forEach(function(Ce){return Ce.onerror&&Ce.onerror(fe)}),Promise.reject(fe)})})}}})}})}};function me(w,_,k){try{if(!_||_.keys.length<w.length)return null;for(var N=[],M=0,j=0;M<_.keys.length&&j<w.length;++M)wt(_.keys[M],w[j])===0&&(N.push(k?V(_.values[M]):_.values[M]),++j);return N.length===w.length?N:null}catch{return null}}var Be={stack:"dbcore",level:-1,create:function(w){return{table:function(_){var k=w.table(_);return r(r({},k),{getMany:function(N){if(!N.cache)return k.getMany(N);var M=me(N.keys,N.trans._cache,N.cache==="clone");return M?We.resolve(M):k.getMany(N).then(function(j){return N.trans._cache={keys:N.keys,values:N.cache==="clone"?V(j):j},j})},mutate:function(N){return N.type!=="add"&&(N.trans._cache=null),k.mutate(N)}})}}}};function Yt(w,_){return w.trans.mode==="readonly"&&!!w.subscr&&!w.trans.explicit&&w.trans.db._options.cache!=="disabled"&&!_.schema.primaryKey.outbound}function rr(w,_){switch(w){case"query":return _.values&&!_.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Ot={stack:"dbcore",level:0,name:"Observability",create:function(w){var _=w.schema.name,k=new hr(w.MIN_KEY,w.MAX_KEY);return r(r({},w),{transaction:function(N,M,j){if(Xe.subscr&&M!=="readonly")throw new xe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Xe.querier));return w.transaction(N,M,j)},table:function(N){var M=w.table(N),j=M.schema,z=j.primaryKey,K=j.indexes,q=z.extractKey,X=z.outbound,Z=z.autoIncrement&&K.filter(function(J){return J.compound&&J.keyPath.includes(z.keyPath)}),ne=r(r({},M),{mutate:function(J){function te(Fe){return Fe="idb://".concat(_,"/").concat(N,"/").concat(Fe),fe[Fe]||(fe[Fe]=new hr)}var re,ee,ce,de=J.trans,fe=J.mutatedParts||(J.mutatedParts={}),Ce=te(""),De=te(":dels"),Ue=J.type,He=J.type==="deleteRange"?[J.range]:J.type==="delete"?[J.keys]:J.values.length<50?[B(z,J).filter(function(Fe){return Fe}),J.values]:[],Oe=He[0],$e=He[1],He=J.trans._cache;return a(Oe)?(Ce.addKeys(Oe),(He=Ue==="delete"||Oe.length===$e.length?me(Oe,He):null)||De.addKeys(Oe),(He||$e)&&(re=te,ee=He,ce=$e,j.indexes.forEach(function(Fe){var qe=re(Fe.name||"");function pt(Ct){return Ct!=null?Fe.extractKey(Ct):null}function _t(Ct){return Fe.multiEntry&&a(Ct)?Ct.forEach(function(cs){return qe.addKey(cs)}):qe.addKey(Ct)}(ee||ce).forEach(function(Ct,Xr){var ht=ee&&pt(ee[Xr]),Xr=ce&&pt(ce[Xr]);wt(ht,Xr)!==0&&(ht!=null&&_t(ht),Xr!=null&&_t(Xr))})}))):Oe?($e={from:($e=Oe.lower)!==null&&$e!==void 0?$e:w.MIN_KEY,to:($e=Oe.upper)!==null&&$e!==void 0?$e:w.MAX_KEY},De.add($e),Ce.add($e)):(Ce.add(k),De.add(k),j.indexes.forEach(function(Fe){return te(Fe.name).add(k)})),M.mutate(J).then(function(Fe){return!Oe||J.type!=="add"&&J.type!=="put"||(Ce.addKeys(Fe.results),Z&&Z.forEach(function(qe){for(var pt=J.values.map(function(ht){return qe.extractKey(ht)}),_t=qe.keyPath.findIndex(function(ht){return ht===z.keyPath}),Ct=0,cs=Fe.results.length;Ct<cs;++Ct)pt[Ct][_t]=Fe.results[Ct];te(qe.name).addKeys(pt)})),de.mutatedParts=zs(de.mutatedParts||{},fe),Fe})}}),K=function(te){var re=te.query,te=re.index,re=re.range;return[te,new hr((te=re.lower)!==null&&te!==void 0?te:w.MIN_KEY,(re=re.upper)!==null&&re!==void 0?re:w.MAX_KEY)]},oe={get:function(J){return[z,new hr(J.key)]},getMany:function(J){return[z,new hr().addKeys(J.keys)]},count:K,query:K,openCursor:K};return i(oe).forEach(function(J){ne[J]=function(te){var re=Xe.subscr,ee=!!re,ce=Yt(Xe,M)&&rr(J,te)?te.obsSet={}:re;if(ee){var de=function($e){return $e="idb://".concat(_,"/").concat(N,"/").concat($e),ce[$e]||(ce[$e]=new hr)},fe=de(""),Ce=de(":dels"),re=oe[J](te),ee=re[0],re=re[1];if((J==="query"&&ee.isPrimaryKey&&!te.values?Ce:de(ee.name||"")).add(re),!ee.isPrimaryKey){if(J!=="count"){var De=J==="query"&&X&&te.values&&M.query(r(r({},te),{values:!1}));return M[J].apply(this,arguments).then(function($e){if(J==="query"){if(X&&te.values)return De.then(function(pt){return pt=pt.result,fe.addKeys(pt),$e});var He=te.values?$e.result.map(q):$e.result;(te.values?fe:Ce).addKeys(He)}else if(J==="openCursor"){var Fe=$e,qe=te.values;return Fe&&Object.create(Fe,{key:{get:function(){return Ce.addKey(Fe.primaryKey),Fe.key}},primaryKey:{get:function(){var pt=Fe.primaryKey;return Ce.addKey(pt),pt}},value:{get:function(){return qe&&fe.addKey(Fe.primaryKey),Fe.value}}})}return $e})}Ce.add(k)}}return M[J].apply(this,arguments)}}),ne}})}};function pr(w,_,k){if(k.numFailures===0)return _;if(_.type==="deleteRange")return null;var N=_.keys?_.keys.length:"values"in _&&_.values?_.values.length:1;return k.numFailures===N?null:(_=r({},_),a(_.keys)&&(_.keys=_.keys.filter(function(M,j){return!(j in k.failures)})),"values"in _&&a(_.values)&&(_.values=_.values.filter(function(M,j){return!(j in k.failures)})),_)}function or(w,_){return k=w,((N=_).lower===void 0||(N.lowerOpen?0<wt(k,N.lower):0<=wt(k,N.lower)))&&(w=w,(_=_).upper===void 0||(_.upperOpen?wt(w,_.upper)<0:wt(w,_.upper)<=0));var k,N}function Nl(w,_,oe,N,M,j){if(!oe||oe.length===0)return w;var z=_.query.index,q=z.multiEntry,X=_.query.range,Z=N.schema.primaryKey.extractKey,ne=z.extractKey,K=(z.lowLevelIndex||z).extractKey,oe=oe.reduce(function(J,te){var re=J,ee=[];if(te.type==="add"||te.type==="put")for(var ce=new hr,de=te.values.length-1;0<=de;--de){var fe,Ce=te.values[de],De=Z(Ce);ce.hasKey(De)||(fe=ne(Ce),(q&&a(fe)?fe.some(function(Fe){return or(Fe,X)}):or(fe,X))&&(ce.addKey(De),ee.push(Ce)))}switch(te.type){case"add":var Ue=new hr().addKeys(_.values?J.map(function(qe){return Z(qe)}):J),re=J.concat(_.values?ee.filter(function(qe){return qe=Z(qe),!Ue.hasKey(qe)&&(Ue.addKey(qe),!0)}):ee.map(function(qe){return Z(qe)}).filter(function(qe){return!Ue.hasKey(qe)&&(Ue.addKey(qe),!0)}));break;case"put":var Oe=new hr().addKeys(te.values.map(function(qe){return Z(qe)}));re=J.filter(function(qe){return!Oe.hasKey(_.values?Z(qe):qe)}).concat(_.values?ee:ee.map(function(qe){return Z(qe)}));break;case"delete":var $e=new hr().addKeys(te.keys);re=J.filter(function(qe){return!$e.hasKey(_.values?Z(qe):qe)});break;case"deleteRange":var He=te.range;re=J.filter(function(qe){return!or(Z(qe),He)})}return re},w);return oe===w?w:(oe.sort(function(J,te){return wt(K(J),K(te))||wt(Z(J),Z(te))}),_.limit&&_.limit<1/0&&(oe.length>_.limit?oe.length=_.limit:w.length===_.limit&&oe.length<_.limit&&(M.dirty=!0)),j?Object.freeze(oe):oe)}function Bo(w,_){return wt(w.lower,_.lower)===0&&wt(w.upper,_.upper)===0&&!!w.lowerOpen==!!_.lowerOpen&&!!w.upperOpen==!!_.upperOpen}function Rh(w,_){return function(k,N,M,j){if(k===void 0)return N!==void 0?-1:0;if(N===void 0)return 1;if((N=wt(k,N))===0){if(M&&j)return 0;if(M)return 1;if(j)return-1}return N}(w.lower,_.lower,w.lowerOpen,_.lowerOpen)<=0&&0<=function(k,N,M,j){if(k===void 0)return N!==void 0?1:0;if(N===void 0)return-1;if((N=wt(k,N))===0){if(M&&j)return 0;if(M)return-1;if(j)return 1}return N}(w.upper,_.upper,w.upperOpen,_.upperOpen)}function Sg(w,_,k,N){w.subscribers.add(k),N.addEventListener("abort",function(){var M,j;w.subscribers.delete(k),w.subscribers.size===0&&(M=w,j=_,setTimeout(function(){M.subscribers.size===0&&H(j,M)},3e3))})}var Yee={stack:"dbcore",level:0,name:"Cache",create:function(w){var _=w.schema.name;return r(r({},w),{transaction:function(k,N,M){var j,z,q=w.transaction(k,N,M);return N==="readwrite"&&(z=(j=new AbortController).signal,M=function(X){return function(){if(j.abort(),N==="readwrite"){for(var Z=new Set,ne=0,K=k;ne<K.length;ne++){var oe=K[ne],J=_a["idb://".concat(_,"/").concat(oe)];if(J){var te=w.table(oe),re=J.optimisticOps.filter(function(qe){return qe.trans===q});if(q._explicit&&X&&q.mutatedParts)for(var ee=0,ce=Object.values(J.queries.query);ee<ce.length;ee++)for(var de=0,fe=(Ue=ce[ee]).slice();de<fe.length;de++)Th((Oe=fe[de]).obsSet,q.mutatedParts)&&(H(Ue,Oe),Oe.subscribers.forEach(function(qe){return Z.add(qe)}));else if(0<re.length){J.optimisticOps=J.optimisticOps.filter(function(qe){return qe.trans!==q});for(var Ce=0,De=Object.values(J.queries.query);Ce<De.length;Ce++)for(var Ue,Oe,$e,He=0,Fe=(Ue=De[Ce]).slice();He<Fe.length;He++)(Oe=Fe[He]).res!=null&&q.mutatedParts&&(X&&!Oe.dirty?($e=Object.isFrozen(Oe.res),$e=Nl(Oe.res,Oe.req,re,te,Oe,$e),Oe.dirty?(H(Ue,Oe),Oe.subscribers.forEach(function(qe){return Z.add(qe)})):$e!==Oe.res&&(Oe.res=$e,Oe.promise=We.resolve({result:$e}))):(Oe.dirty&&H(Ue,Oe),Oe.subscribers.forEach(function(qe){return Z.add(qe)})))}}}Z.forEach(function(qe){return qe()})}}},q.addEventListener("abort",M(!1),{signal:z}),q.addEventListener("error",M(!1),{signal:z}),q.addEventListener("complete",M(!0),{signal:z})),q},table:function(k){var N=w.table(k),M=N.schema.primaryKey;return r(r({},N),{mutate:function(j){var z=Xe.trans;if(M.outbound||z.db._options.cache==="disabled"||z.explicit||z.idbtrans.mode!=="readwrite")return N.mutate(j);var q=_a["idb://".concat(_,"/").concat(k)];return q?(z=N.mutate(j),j.type!=="add"&&j.type!=="put"||!(50<=j.values.length||B(M,j).some(function(X){return X==null}))?(q.optimisticOps.push(j),j.mutatedParts&&Tl(j.mutatedParts),z.then(function(X){0<X.numFailures&&(H(q.optimisticOps,j),(X=pr(0,j,X))&&q.optimisticOps.push(X),j.mutatedParts&&Tl(j.mutatedParts))}),z.catch(function(){H(q.optimisticOps,j),j.mutatedParts&&Tl(j.mutatedParts)})):z.then(function(X){var Z=pr(0,r(r({},j),{values:j.values.map(function(ne,K){var oe;return X.failures[K]?ne:(ne=(oe=M.keyPath)!==null&&oe!==void 0&&oe.includes(".")?V(ne):r({},ne),T(ne,M.keyPath,X.results[K]),ne)})}),X);q.optimisticOps.push(Z),queueMicrotask(function(){return j.mutatedParts&&Tl(j.mutatedParts)})}),z):N.mutate(j)},query:function(j){if(!Yt(Xe,N)||!rr("query",j))return N.query(j);var z=((Z=Xe.trans)===null||Z===void 0?void 0:Z.db._options.cache)==="immutable",K=Xe,q=K.requery,X=K.signal,Z=function(te,re,ee,ce){var de=_a["idb://".concat(te,"/").concat(re)];if(!de)return[];if(!(re=de.queries[ee]))return[null,!1,de,null];var fe=re[(ce.query?ce.query.index.name:null)||""];if(!fe)return[null,!1,de,null];switch(ee){case"query":var Ce=fe.find(function(De){return De.req.limit===ce.limit&&De.req.values===ce.values&&Bo(De.req.query.range,ce.query.range)});return Ce?[Ce,!0,de,fe]:[fe.find(function(De){return("limit"in De.req?De.req.limit:1/0)>=ce.limit&&(!ce.values||De.req.values)&&Rh(De.req.query.range,ce.query.range)}),!1,de,fe];case"count":return Ce=fe.find(function(De){return Bo(De.req.query.range,ce.query.range)}),[Ce,!!Ce,de,fe]}}(_,k,"query",j),ne=Z[0],K=Z[1],oe=Z[2],J=Z[3];return ne&&K?ne.obsSet=j.obsSet:(K=N.query(j).then(function(te){var re=te.result;if(ne&&(ne.res=re),z){for(var ee=0,ce=re.length;ee<ce;++ee)Object.freeze(re[ee]);Object.freeze(re)}else te.result=V(re);return te}).catch(function(te){return J&&ne&&H(J,ne),Promise.reject(te)}),ne={obsSet:j.obsSet,promise:K,subscribers:new Set,type:"query",req:j,dirty:!1},J?J.push(ne):(J=[ne],(oe=oe||(_a["idb://".concat(_,"/").concat(k)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[j.query.index.name||""]=J)),Sg(ne,J,q,X),ne.promise.then(function(te){return{result:Nl(te.result,j,oe==null?void 0:oe.optimisticOps,N,ne,z)}})}})}})}};function Tw(w,_){return new Proxy(w,{get:function(k,N,M){return N==="db"?_:Reflect.get(k,N,M)}})}var Il=(Kn.prototype.version=function(w){if(isNaN(w)||w<.1)throw new xe.Type("Given version is not a positive number");if(w=Math.round(10*w)/10,this.idbdb||this._state.isBeingOpened)throw new xe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,w);var _=this._versions,k=_.filter(function(N){return N._cfg.version===w})[0];return k||(k=new this.Version(w),_.push(k),_.sort(_w),k.stores({}),this._state.autoSchema=!1,k)},Kn.prototype._whenReady=function(w){var _=this;return this.idbdb&&(this._state.openComplete||Xe.letThrough||this._vip)?w():new We(function(k,N){if(_._state.openComplete)return N(new xe.DatabaseClosed(_._state.dbOpenError));if(!_._state.isBeingOpened){if(!_._state.autoOpen)return void N(new xe.DatabaseClosed);_.open().catch(Re)}_._state.dbReadyPromise.then(k,N)}).then(w)},Kn.prototype.use=function(w){var _=w.stack,k=w.create,N=w.level,M=w.name;return M&&this.unuse({stack:_,name:M}),w=this._middlewares[_]||(this._middlewares[_]=[]),w.push({stack:_,create:k,level:N??10,name:M}),w.sort(function(j,z){return j.level-z.level}),this},Kn.prototype.unuse=function(w){var _=w.stack,k=w.name,N=w.create;return _&&this._middlewares[_]&&(this._middlewares[_]=this._middlewares[_].filter(function(M){return N?M.create!==N:!!k&&M.name!==k})),this},Kn.prototype.open=function(){var w=this;return Pi($s,function(){return Sw(w)})},Kn.prototype._close=function(){var w=this._state,_=ya.indexOf(this);if(0<=_&&ya.splice(_,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}w.isBeingOpened||(w.dbReadyPromise=new We(function(k){w.dbReadyResolve=k}),w.openCanceller=new We(function(k,N){w.cancelOpen=N}))},Kn.prototype.close=function(k){var _=(k===void 0?{disableAutoOpen:!0}:k).disableAutoOpen,k=this._state;_?(k.isBeingOpened&&k.cancelOpen(new xe.DatabaseClosed),this._close(),k.autoOpen=!1,k.dbOpenError=new xe.DatabaseClosed):(this._close(),k.autoOpen=this._options.autoOpen||k.isBeingOpened,k.openComplete=!1,k.dbOpenError=null)},Kn.prototype.delete=function(w){var _=this;w===void 0&&(w={disableAutoOpen:!0});var k=0<arguments.length&&typeof arguments[0]!="object",N=this._state;return new We(function(M,j){function z(){_.close(w);var q=_._deps.indexedDB.deleteDatabase(_.name);q.onsuccess=Kt(function(){var X,Z,ne;X=_._deps,Z=_.name,ne=X.indexedDB,X=X.IDBKeyRange,kh(ne)||Z===va||xg(ne,X).delete(Z).catch(Re),M()}),q.onerror=as(j),q.onblocked=_._fireOnBlocked}if(k)throw new xe.InvalidArgument("Invalid closeOptions argument to db.delete()");N.isBeingOpened?N.dbReadyPromise.then(z):z()})},Kn.prototype.backendDB=function(){return this.idbdb},Kn.prototype.isOpen=function(){return this.idbdb!==null},Kn.prototype.hasBeenClosed=function(){var w=this._state.dbOpenError;return w&&w.name==="DatabaseClosed"},Kn.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Kn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Kn.prototype,"tables",{get:function(){var w=this;return i(this._allTables).map(function(_){return w._allTables[_]})},enumerable:!1,configurable:!0}),Kn.prototype.transaction=function(){var w=(function(_,k,N){var M=arguments.length;if(M<2)throw new xe.InvalidArgument("Too few arguments");for(var j=new Array(M-1);--M;)j[M-1]=arguments[M];return N=j.pop(),[_,L(j),N]}).apply(this,arguments);return this._transaction.apply(this,w)},Kn.prototype._transaction=function(w,_,k){var N=this,M=Xe.trans;M&&M.db===this&&w.indexOf("!")===-1||(M=null);var j,z,q=w.indexOf("?")!==-1;w=w.replace("!","").replace("?","");try{if(z=_.map(function(Z){if(Z=Z instanceof N.Table?Z.name:Z,typeof Z!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Z}),w=="r"||w===Mi)j=Mi;else{if(w!="rw"&&w!=Cd)throw new xe.InvalidArgument("Invalid transaction mode: "+w);j=Cd}if(M){if(M.mode===Mi&&j===Cd){if(!q)throw new xe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");M=null}M&&z.forEach(function(Z){if(M&&M.storeNames.indexOf(Z)===-1){if(!q)throw new xe.SubTransaction("Table "+Z+" not included in parent transaction.");M=null}}),q&&M&&!M.active&&(M=null)}}catch(Z){return M?M._promise(null,function(ne,K){K(Z)}):In(Z)}var X=(function Z(ne,K,oe,J,te){return We.resolve().then(function(){var re=Xe.transless||Xe,ee=ne._createTransaction(K,oe,ne._dbSchema,J);if(ee.explicit=!0,re={trans:ee,transless:re},J)ee.idbtrans=J.idbtrans;else try{ee.create(),ee.idbtrans._explicit=!0,ne._state.PR1398_maxLoop=3}catch(fe){return fe.name===ve.InvalidState&&ne.isOpen()&&0<--ne._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ne.close({disableAutoOpen:!1}),ne.open().then(function(){return Z(ne,K,oe,null,te)})):In(fe)}var ce,de=W(te);return de&&pl(),re=We.follow(function(){var fe;(ce=te.call(ee,ee))&&(de?(fe=Fs.bind(null,null),ce.then(fe,fe)):typeof ce.next=="function"&&typeof ce.throw=="function"&&(ce=Ca(ce)))},re),(ce&&typeof ce.then=="function"?We.resolve(ce).then(function(fe){return ee.active?fe:In(new xe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):re.then(function(){return ce})).then(function(fe){return J&&ee._resolve(),ee._completion.then(function(){return fe})}).catch(function(fe){return ee._reject(fe),In(fe)})})}).bind(null,this,j,z,M,k);return M?M._promise(j,X,"lock"):Xe.trans?Pi(Xe.transless,function(){return N._whenReady(X)}):this._whenReady(X)},Kn.prototype.table=function(w){if(!f(this._allTables,w))throw new xe.InvalidTable("Table ".concat(w," does not exist"));return this._allTables[w]},Kn);function Kn(w,_){var k=this;this._middlewares={},this.verno=0;var N=Kn.dependencies;this._options=_=r({addons:Kn.addons,autoOpen:!0,indexedDB:N.indexedDB,IDBKeyRange:N.IDBKeyRange,cache:"cloned"},_),this._deps={indexedDB:_.indexedDB,IDBKeyRange:_.IDBKeyRange},N=_.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var M,j,z,q,X,Z={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Re,dbReadyPromise:null,cancelOpen:Re,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:_.autoOpen};Z.dbReadyPromise=new We(function(K){Z.dbReadyResolve=K}),Z.openCanceller=new We(function(K,oe){Z.cancelOpen=oe}),this._state=Z,this.name=w,this.on=kd(this,"populate","blocked","versionchange","close",{ready:[pa,Re]}),this.on.ready.subscribe=E(this.on.ready.subscribe,function(K){return function(oe,J){Kn.vip(function(){var te,re=k._state;re.openComplete?(re.dbOpenError||We.resolve().then(oe),J&&K(oe)):re.onReadyBeingFired?(re.onReadyBeingFired.push(oe),J&&K(oe)):(K(oe),te=k,J||K(function ee(){te.on.ready.unsubscribe(oe),te.on.ready.unsubscribe(ee)}))})}}),this.Collection=(M=this,Dc(Nd.prototype,function(ce,ee){this.db=M;var J=dg,te=null;if(ee)try{J=ee()}catch(de){te=de}var re=ce._ctx,ee=re.table,ce=ee.hook.reading.fire;this._ctx={table:ee,index:re.index,isPrimKey:!re.index||ee.schema.primKey.keyPath&&re.index===ee.schema.primKey.name,range:J,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:te,or:re.or,valueMapper:ce!==at?ce:null}})),this.Table=(j=this,Dc(pg.prototype,function(K,oe,J){this.db=j,this._tx=J,this.name=K,this.schema=oe,this.hook=j._allTables[K]?j._allTables[K].hook:kd(null,{creating:[Gn,Re],reading:[Nt,at],updating:[rs,Re],deleting:[kr,Re]})})),this.Transaction=(z=this,Dc(ba.prototype,function(K,oe,J,te,re){var ee=this;this.db=z,this.mode=K,this.storeNames=oe,this.schema=J,this.chromeTransactionDurability=te,this.idbtrans=null,this.on=kd(this,"complete","error","abort"),this.parent=re||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new We(function(ce,de){ee._resolve=ce,ee._reject=de}),this._completion.then(function(){ee.active=!1,ee.on.complete.fire()},function(ce){var de=ee.active;return ee.active=!1,ee.on.error.fire(ce),ee.parent?ee.parent._reject(ce):de&&ee.idbtrans&&ee.idbtrans.abort(),In(ce)})})),this.Version=(q=this,Dc(kw.prototype,function(K){this.db=q,this._cfg={version:K,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(X=this,Dc(vg.prototype,function(K,oe,J){if(this.db=X,this._ctx={table:K,index:oe===":id"?null:oe,or:J},this._cmp=this._ascending=wt,this._descending=function(te,re){return wt(re,te)},this._max=function(te,re){return 0<wt(te,re)?te:re},this._min=function(te,re){return wt(te,re)<0?te:re},this._IDBKeyRange=X._deps.IDBKeyRange,!this._IDBKeyRange)throw new xe.MissingAPI})),this.on("versionchange",function(K){0<K.newVersion?console.warn("Another connection wants to upgrade database '".concat(k.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(k.name,"'. Closing db now to resume the delete request.")),k.close({disableAutoOpen:!1})}),this.on("blocked",function(K){!K.newVersion||K.newVersion<K.oldVersion?console.warn("Dexie.delete('".concat(k.name,"') was blocked")):console.warn("Upgrade '".concat(k.name,"' blocked by other connection holding version ").concat(K.oldVersion/10))}),this._maxKey=jc(_.IDBKeyRange),this._createTransaction=function(K,oe,J,te){return new k.Transaction(K,oe,J,k._options.chromeTransactionDurability,te)},this._fireOnBlocked=function(K){k.on("blocked").fire(K),ya.filter(function(oe){return oe.name===k.name&&oe!==k&&!oe._state.vcFired}).map(function(oe){return oe.on("versionchange").fire(K)})},this.use(Be),this.use(Yee),this.use(Ot),this.use(S),this.use(se);var ne=new Proxy(this,{get:function(K,oe,J){if(oe==="_vip")return!0;if(oe==="table")return function(re){return Tw(k.table(re),ne)};var te=Reflect.get(K,oe,J);return te instanceof pg?Tw(te,ne):oe==="tables"?te.map(function(re){return Tw(re,ne)}):oe==="_createTransaction"?function(){return Tw(te.apply(this,arguments),ne)}:te}});this.vip=ne,N.forEach(function(K){return K(k)})}var Nw,Ws=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Qee=(O2.prototype.subscribe=function(w,_,k){return this._subscribe(w&&typeof w!="function"?w:{next:w,error:_,complete:k})},O2.prototype[Ws]=function(){return this},O2);function O2(w){this._subscribe=w}try{Nw={indexedDB:s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB,IDBKeyRange:s.IDBKeyRange||s.webkitIDBKeyRange}}catch{Nw={indexedDB:null,IDBKeyRange:null}}function yM(w){var _,k=!1,N=new Qee(function(M){var j=W(w),z,q=!1,X={},Z={},ne={get closed(){return q},unsubscribe:function(){q||(q=!0,z&&z.abort(),K&&wa.storagemutated.unsubscribe(J))}};M.start&&M.start(ne);var K=!1,oe=function(){return vh(te)},J=function(re){zs(X,re),Th(Z,X)&&oe()},te=function(){var re,ee,ce;!q&&Nw.indexedDB&&(X={},re={},z&&z.abort(),z=new AbortController,ce=function(de){var fe=Bs();try{j&&pl();var Ce=is(w,de);return Ce=j?Ce.finally(Fs):Ce}finally{fe&&hl()}}(ee={subscr:re,signal:z.signal,requery:oe,querier:w,trans:null}),Promise.resolve(ce).then(function(de){k=!0,_=de,q||ee.signal.aborted||(X={},function(fe){for(var Ce in fe)if(f(fe,Ce))return;return 1}(Z=re)||K||(wa(Id,J),K=!0),vh(function(){return!q&&M.next&&M.next(de)}))},function(de){k=!1,["DatabaseClosedError","AbortError"].includes(de==null?void 0:de.name)||q||vh(function(){q||M.error&&M.error(de)})}))};return setTimeout(oe,0),ne});return N.hasValue=function(){return k},N.getValue=function(){return _},N}var Dd=Il;function L2(w){var _=Bc;try{Bc=!0,wa.storagemutated.fire(w),Vr(w,!0)}finally{Bc=_}}h(Dd,r(r({},Ie),{delete:function(w){return new Dd(w,{addons:[]}).delete()},exists:function(w){return new Dd(w,{addons:[]}).open().then(function(_){return _.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(w){try{return _=Dd.dependencies,k=_.indexedDB,_=_.IDBKeyRange,(kh(k)?Promise.resolve(k.databases()).then(function(N){return N.map(function(M){return M.name}).filter(function(M){return M!==va})}):xg(k,_).toCollection().primaryKeys()).then(w)}catch{return In(new xe.MissingAPI)}var _,k},defineClass:function(){return function(w){l(this,w)}},ignoreTransaction:function(w){return Xe.trans?Pi(Xe.transless,w):w()},vip:Cl,async:function(w){return function(){try{var _=Ca(w.apply(this,arguments));return _&&typeof _.then=="function"?_:We.resolve(_)}catch(k){return In(k)}}},spawn:function(w,_,k){try{var N=Ca(w.apply(k,_||[]));return N&&typeof N.then=="function"?N:We.resolve(N)}catch(M){return In(M)}},currentTransaction:{get:function(){return Xe.trans||null}},waitFor:function(w,_){return _=We.resolve(typeof w=="function"?Dd.ignoreTransaction(w):w).timeout(_||6e4),Xe.trans?Xe.trans.waitFor(_):_},Promise:We,debug:{get:function(){return xo},set:function(w){ch(w)}},derive:y,extend:l,props:h,override:E,Events:kd,on:wa,liveQuery:yM,extendObservabilitySet:zs,getByKeyPath:O,setByKeyPath:T,delByKeyPath:function(w,_){typeof _=="string"?T(w,_,void 0):"length"in _&&[].map.call(_,function(k){T(w,k,void 0)})},shallowClone:I,deepClone:V,getObjectDiff:A,cmp:wt,asap:D,minKey:-1/0,addons:[],connections:ya,errnames:ve,dependencies:Nw,cache:_a,semVer:"4.0.11",version:"4.0.11".split(".").map(function(w){return parseInt(w)}).reduce(function(w,_,k){return w+_/Math.pow(10,2*k)})})),Dd.maxKey=jc(Dd.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(wa(Id,function(w){Bc||(w=new CustomEvent(wg,{detail:w}),Bc=!0,dispatchEvent(w),Bc=!1)}),addEventListener(wg,function(w){w=w.detail,Bc||L2(w)}));var Ah,Bc=!1,vM=function(){};return typeof BroadcastChannel<"u"&&((vM=function(){(Ah=new BroadcastChannel(wg)).onmessage=function(w){return w.data&&L2(w.data)}})(),typeof Ah.unref=="function"&&Ah.unref(),wa(Id,function(w){Bc||Ah.postMessage(w)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(w){if(!Il.disableBfCache&&w.persisted){xo&&console.debug("Dexie: handling persisted pagehide"),Ah!=null&&Ah.close();for(var _=0,k=ya;_<k.length;_++)k[_].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(w){!Il.disableBfCache&&w.persisted&&(xo&&console.debug("Dexie: handling persisted pageshow"),vM(),L2({all:new hr(-1/0,[[]])}))})),We.rejectionMapper=function(w,_){return!w||w instanceof ie||w instanceof TypeError||w instanceof SyntaxError||!w.name||!ae[w.name]?w:(_=new ae[w.name](_||w.message,w),"stack"in w&&m(_,"stack",{get:function(){return this.inner.stack}}),_)},ch(xo),r(Il,Object.freeze({__proto__:null,Dexie:Il,liveQuery:yM,Entity:fg,cmp:wt,PropModification:Wt,replacePrefix:function(w,_){return new Wt({replacePrefix:[w,_]})},add:function(w){return new Wt({add:w})},remove:function(w){return new Wt({remove:w})},default:Il,RangeSet:hr,mergeRanges:kl,rangesOverlap:_g}),{default:Il}),Il})})(ZG);var Exe=ZG.exports;const pI=tC(Exe),ZO=Symbol.for("Dexie"),mI=globalThis[ZO]||(globalThis[ZO]=pI);if(pI.semVer!==mI.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${pI.semVer} and ${mI.semVer}`);class kxe extends mI{constructor(){super("NotesDB");Ee(this,"notes");Ee(this,"calendarEvents");Ee(this,"tags");this.version(4).stores({notes:"++id, firebaseId, title, updatedAt",calendarEvents:"++id, firebaseId, startDate, endDate, ownerUserId",tags:"++id, name, group"}),this.notes=this.table("notes"),this.tags=this.table("tags")}async loadFromFirebase(){var r,o,s,i,a,l,c;const n=Ut.currentUser;if(n)try{const u=mr(jt,"notes"),f=mr(jt,"shares"),h=await ko(So(u,Nr("ownerUserId","==",n.uid))),p=await ko(So(f,Nr("email","==",n.email))),m=p.docs.map(x=>x.data().noteId),y=m.length>0?await ko(So(u,Nr(FN(),"in",m))):{docs:[]};await this.notes.clear();for(const x of h.docs){const b=x.data();await this.notes.add({firebaseId:x.id,title:b.title||"Untitled",content:b.content||"",createdAt:((r=b.createdAt)==null?void 0:r.toDate())||new Date,updatedAt:((o=b.updatedAt)==null?void 0:o.toDate())||new Date,ownerUserId:b.ownerUserId||"",ownerEmail:b.ownerEmail||"",ownerDisplayName:b.ownerDisplayName||"Unknown",ownerPhotoURL:b.ownerPhotoURL,lastEditedByUserId:b.lastEditedByUserId,lastEditedByEmail:b.lastEditedByEmail,lastEditedByDisplayName:b.lastEditedByDisplayName,lastEditedByPhotoURL:b.lastEditedByPhotoURL,lastEditedAt:(s=b.lastEditedAt)==null?void 0:s.toDate(),tags:b.tags||[],isPinned:b.isPinned||!1,isArchived:b.isArchived||!1})}for(const x of y.docs){const b=x.data();((i=p.docs.find(E=>E.data().noteId===x.id))==null?void 0:i.data())&&await this.notes.add({firebaseId:x.id,title:b.title||"Untitled",content:b.content||"",createdAt:((a=b.createdAt)==null?void 0:a.toDate())||new Date,updatedAt:((l=b.updatedAt)==null?void 0:l.toDate())||new Date,ownerUserId:b.ownerUserId||"",ownerEmail:b.ownerEmail||"",ownerDisplayName:b.ownerDisplayName||"Unknown",ownerPhotoURL:b.ownerPhotoURL,lastEditedByUserId:b.lastEditedByUserId,lastEditedByEmail:b.lastEditedByEmail,lastEditedByDisplayName:b.lastEditedByDisplayName,lastEditedByPhotoURL:b.lastEditedByPhotoURL,lastEditedAt:(c=b.lastEditedAt)==null?void 0:c.toDate(),tags:b.tags||[],isPinned:b.isPinned||!1,isArchived:b.isArchived||!1})}}catch(u){throw console.error("Error loading from Firebase:",u),u}}async syncNote(n){const r=Ut.currentUser;if(r)try{n.ownerUserId||(n.ownerUserId=r.uid,n.ownerEmail=r.email||"",n.ownerDisplayName=r.displayName||"Unknown",n.ownerPhotoURL=r.photoURL||void 0);const o=n.ownerUserId===r.uid,s=mr(jt,"shares"),i=So(s,Nr("noteId","==",n.firebaseId),Nr("email","==",r.email),Nr("access","==","edit")),l=!(await ko(i)).empty;if(!o&&!l)throw new Error("No permission to edit this note");if(n.firebaseId)await Wc(ro(jt,"notes",n.firebaseId),{title:n.title,content:n.content||"",updatedAt:new Date,lastEditedByUserId:r.uid,lastEditedByEmail:r.email,lastEditedByDisplayName:r.displayName||"Unknown",lastEditedByPhotoURL:r.photoURL,lastEditedAt:new Date,isPinned:n.isPinned});else{const c=await Vg(mr(jt,"notes"),{title:n.title,content:n.content||"",createdAt:new Date,updatedAt:new Date,ownerUserId:r.uid,ownerEmail:r.email,ownerDisplayName:r.displayName||"Unknown",ownerPhotoURL:r.photoURL,lastEditedByUserId:r.uid,lastEditedByEmail:r.email,lastEditedByDisplayName:r.displayName||"Unknown",lastEditedByPhotoURL:r.photoURL,lastEditedAt:new Date,tags:[],isPinned:!1,isArchived:!1});await this.notes.update(n.id,{firebaseId:c.id})}await this.loadFromFirebase()}catch(o){throw console.error("Error syncing with Firebase:",o),o}}async shareNote(n,r,o="view"){const s=Ut.currentUser;if(s)try{const i=ro(jt,"notes",n),a=await Ld(i);if(!a.exists())throw new Error("Note not found");if(a.data().ownerUserId!==s.uid)throw new Error("Only the owner can share this note");const c=mr(jt,"shares"),u=await ko(So(c,Nr("noteId","==",n),Nr("email","==",r)));if(u.empty)await Vg(c,{noteId:n,userId:r,email:r,displayName:r.split("@")[0],access:o,createdAt:new Date,updatedAt:new Date});else{const f=u.docs[0];await Wc(ro(c,f.id),{access:o,updatedAt:new Date})}await this.loadFromFirebase()}catch(i){throw console.error("Error sharing note:",i),i}}async deleteNote(n){const r=Ut.currentUser;if(r)try{const o=ro(jt,"notes",n),s=await Ld(o);if(!s.exists())return;if(s.data().ownerUserId!==r.uid)throw new Error("Only the owner can delete this note");const a=mr(jt,"shares"),c=(await ko(So(a,Nr("noteId","==",n)))).docs.map(u=>lb(u.ref));await Promise.all(c),await lb(o)}catch(o){throw console.error("Error deleting note:",o),o}}async createNote(n){const r=Ut.currentUser;if(!r)throw new Error("User not authenticated");try{const o={...n,ownerUserId:r.uid,ownerEmail:r.email,ownerDisplayName:r.displayName||"",ownerPhotoURL:r.photoURL||"",createdAt:new Date,updatedAt:new Date,tags:n.tags||[]},s=await Vg(mr(jt,"notes"),o);return await this.loadFromFirebase(),s.id}catch(o){throw console.error("Error creating note:",o),o}}async updateNote(n,r){const o=Ut.currentUser;if(!o)throw new Error("User not authenticated");try{const s=ro(jt,"notes",n);if(!(await Ld(s)).exists())throw new Error("Note not found");const a={...r,updatedAt:new Date,lastEditedByUserId:o.uid,lastEditedByEmail:o.email,lastEditedByDisplayName:o.displayName||"",lastEditedByPhotoURL:o.photoURL||"",lastEditedAt:new Date,tags:r.tags||[]};await Wc(s,a),await this.loadFromFirebase()}catch(s){throw console.error("Error updating note:",s),s}}async toggleNotePin(n,r){const o=Ut.currentUser;if(o)try{const s=ro(jt,"notes",n),i=await Ld(s);if(!i.exists())throw new Error("Note not found");if(i.data().ownerUserId!==o.uid)throw new Error("Only the owner can pin/unpin notes");await Wc(s,{isPinned:r,updatedAt:new Date}),await this.loadFromFirebase()}catch(s){throw console.error("Error toggling pin:",s),s}}generateUniqueId(){return Date.now()*1e3+Math.floor(Math.random()*1e3)}async createCalendarEvent(n){console.log("Creating event:",n);const r=Ut.currentUser;if(!r)throw new Error("User not authenticated");try{const o={...n,createdBy:r.email||"",createdByPhotoURL:r.photoURL||"",lastModifiedBy:r.email||"",lastModifiedByPhotoURL:r.photoURL||"",lastModifiedByDisplayName:r.displayName||"",lastModifiedAt:new Date,startDate:n.startDate||new Date,endDate:n.endDate||new Date,sharedWith:n.sharedWith||[],tags:n.tags||[]};console.log("Creating event in Firestore:",o);const s=await Vg(mr(jt,"calendarEvents"),o),i={...o,id:Date.now(),firebaseId:s.id};return await this.calendarEvents.add(i),i}catch(o){throw console.error("Detailed error in createCalendarEvent:",o),o}}async scheduleEventReminder(n){if("Notification"in window&&Notification.permission==="granted"){const r=new Date(n.startDate),o=n.reminderMinutes||0;r.setMinutes(r.getMinutes()-o),await navigator.serviceWorker.ready.then(s=>{s.showNotification(n.title,{body:`Reminder: ${n.title} starts in ${n.reminderMinutes} minutes`,icon:"/note-maskable.png",tag:`event-${n.id}`,data:{eventId:n.id,url:`/calendar/${n.id}`}})})}}async deleteCalendarEvent(n){const r=await this.calendarEvents.get(n);if(!r)return;if(!Ut.currentUser)throw new Error("User not authenticated");try{r.firebaseId&&await lb(ro(jt,"calendarEvents",r.firebaseId)),await this.calendarEvents.delete(n)}catch(s){throw console.error("Error deleting calendar event:",s),s}}async shareCalendarEvent(n,r,o="view"){const s=await this.calendarEvents.get(n),i=Ut.currentUser;if(!s||!i)throw new Error("Event not found or user not authenticated");try{const a=r.map(l=>({email:l,permission:o,status:"pending"}));s.firebaseId&&await Wc(ro(jt,"calendarEvents",s.firebaseId),{sharedWith:[...s.sharedWith||[],...a],lastModifiedBy:i.email,lastModifiedAt:new Date}),await this.calendarEvents.update(n,l=>{l.sharedWith=[...l.sharedWith||[],...a],l.lastModifiedBy=i.email||"",l.lastModifiedAt=new Date}),console.log(`Sharing event with: ${r.join(", ")}`)}catch(a){throw console.error("Error sharing calendar event:",a),a}}async getSharedEvents(){const n=Ut.currentUser;if(!n)throw new Error("User not authenticated");try{const r=mr(jt,"calendarEvents"),o=await ko(r),s=[],i=[];return o.docs.forEach(a=>{var f,h,p;const l=a.data(),c=l.sharedWith||[],u=c.find(m=>m.email===n.email);if((u==null?void 0:u.status)==="accepted")i.push(this.syncSharedEvent(a.id));else if((u==null?void 0:u.status)==="pending"){const m=((f=l.startDate)==null?void 0:f.toDate())||new Date,y=((h=l.endDate)==null?void 0:h.toDate())||new Date,x=(p=l.lastModifiedAt)==null?void 0:p.toDate();s.push({id:this.generateUniqueId(),firebaseId:a.id,title:l.title||"",startDate:m,endDate:y,description:l.description,location:l.location,allDay:l.allDay||!1,color:l.color,reminderMinutes:l.reminderMinutes,createdBy:l.createdBy,lastModifiedBy:l.lastModifiedBy,lastModifiedAt:x,sharedWith:c,tags:l.tags||[]})}}),await Promise.all(i),s}catch(r){throw console.error("Error fetching shared events:",r),r}}async updateEventShare(n,r,o){var i,a,l,c;const s=Ut.currentUser;if(!s)throw new Error("User not authenticated");try{console.log("Processing event share update:",{eventId:n,email:r,status:o});let u=typeof n=="string"?n:null,f=null;if(typeof n=="number"&&(f=await this.calendarEvents.get(n),f!=null&&f.firebaseId&&(u=f.firebaseId)),!u)throw new Error("Could not determine Firebase ID for event");const h=ro(jt,"calendarEvents",u),p=await Ld(h);if(!p.exists())throw new Error("Event not found in Firebase");const m=p.data(),y=(i=m.sharedWith)==null?void 0:i.find(b=>b.email===r);if((y==null?void 0:y.status)===o)return console.log("Share status already set to:",o),!0;const x=(m.sharedWith||[]).map(b=>b.email===r?{...b,status:o}:b);if(await Wc(h,{sharedWith:x,lastModifiedAt:new Date,lastModifiedBy:s.email}),o==="accepted"){const b=await this.calendarEvents.where("firebaseId").equals(u).first();if(b)await this.calendarEvents.update(b.id,{sharedWith:x,lastModifiedAt:new Date,lastModifiedBy:s.email});else{const C=((a=m.startDate)==null?void 0:a.toDate())||new Date,E=((l=m.endDate)==null?void 0:l.toDate())||new Date,R=(c=m.lastModifiedAt)==null?void 0:c.toDate();await this.calendarEvents.add({id:this.generateUniqueId(),firebaseId:u,title:m.title||"",startDate:C,endDate:E,description:m.description,location:m.location,allDay:m.allDay||!1,color:m.color,reminderMinutes:m.reminderMinutes,createdBy:m.createdBy,createdByPhotoURL:m.createdByPhotoURL,lastModifiedBy:m.lastModifiedBy,lastModifiedByDisplayName:m.lastModifiedByDisplayName,lastModifiedByPhotoURL:m.lastModifiedByPhotoURL,lastModifiedAt:R,sharedWith:x,tags:m.tags||[]})}}else o==="declined"&&f&&await this.calendarEvents.delete(f.id);return!0}catch(u){throw console.error("Error updating event share:",u),u}}async updateCalendarEvent(n,r){console.log("Updating event:",{id:n,updates:r});const o=await this.calendarEvents.get(n),s=Ut.currentUser;if(!o||!s)throw console.error("Event not found or user not authenticated:",{event:o,user:s}),new Error("Event not found or user not authenticated");try{const i={...o,...r,id:o.id,title:r.title||o.title,startDate:r.startDate||o.startDate,createdBy:o.createdBy,sharedWith:r.sharedWith||o.sharedWith||[],lastModifiedBy:s.email||"",lastModifiedByDisplayName:s.displayName||"",lastModifiedByPhotoURL:s.photoURL||"",lastModifiedAt:new Date};if(o.firebaseId){const a=ro(jt,"calendarEvents",o.firebaseId),l=await Ld(a);if(l.exists()){const u=l.data().sharedWith||[],f=r.sharedWith||u,h=new Map;u.forEach(b=>{h.set(b.email,b)});const p=f.map(b=>{const C=h.get(b.email);return C?{...b,status:C.status}:{...b,status:"pending"}});i.sharedWith=p;const{id:m,...y}=i;console.log("Updating Firestore with:",y),await Wc(a,y);const x=p.filter(b=>b.status==="accepted");for(const b of x){const C=await this.calendarEvents.where("firebaseId").equals(o.firebaseId).first();C&&await this.calendarEvents.update(C.id,E=>{Object.assign(E,{...i,id:C.id,sharedWith:p})})}}}return await this.calendarEvents.update(n,a=>{Object.assign(a,i)}),(r.startDate||r.reminderMinutes)&&await this.scheduleEventReminder(i),await this.loadFromFirebase(),i}catch(i){throw console.error("Detailed error in updateCalendarEvent:",i),i}}async createTag(n){const r=Ut.currentUser;if(!r)throw new Error("User not authenticated");try{const o={name:n.name||"",color:n.color||"#3b82f6",group:n.group||"default",metadata:n.metadata||"",createdAt:new Date,createdBy:r.email||""},s=await Vg(mr(jt,"tags"),o),i={...o,id:s.id};return this.tags?await this.tags.add(i):console.error("Tags table not initialized"),i}catch(o){throw console.error("Detailed error in createTag:",o),o}}async getTags(){try{return(await ko(mr(jt,"tags"))).docs.map(r=>({...r.data(),id:r.id}))}catch(n){throw console.error("Error fetching tags:",n),n}}async updateNoteTags(n,r){const o=Ut.currentUser;if(!o)throw new Error("User not authenticated");try{await Wc(ro(jt,"notes",n),{tags:r,lastModifiedBy:o.email,lastModifiedAt:new Date});const s=parseInt(n,10);await this.notes.update(s,{tags:r})}catch(s){throw console.error("Error updating note tags:",s),s}}async getNotesByTag(n){try{return(await ko(So(mr(jt,"notes"),Nr("tags","array-contains",n)))).docs.map(o=>({...o.data(),id:o.id}))}catch(r){throw console.error("Error fetching notes by tag:",r),r}}async syncSharedEvent(n){var o,s,i,a;const r=Ut.currentUser;if(r)try{const l=ro(jt,"calendarEvents",n),c=await Ld(l);if(!c.exists())return;const u=c.data(),f=(o=u.sharedWith)==null?void 0:o.find(h=>h.email===r.email);if((f==null?void 0:f.status)==="accepted"){const h=((s=u.startDate)==null?void 0:s.toDate())||new Date,p=((i=u.endDate)==null?void 0:i.toDate())||new Date,m=(a=u.lastModifiedAt)==null?void 0:a.toDate(),y=await this.calendarEvents.where("firebaseId").equals(n).first(),x={id:(y==null?void 0:y.id)||Date.now(),firebaseId:n,title:u.title||"",startDate:h,endDate:p,description:u.description,location:u.location,allDay:u.allDay||!1,color:u.color,reminderMinutes:u.reminderMinutes,createdBy:u.createdBy,lastModifiedBy:u.lastModifiedBy,lastModifiedAt:m,sharedWith:u.sharedWith||[],tags:u.tags||[]};y?await this.calendarEvents.update(y.id,x):await this.calendarEvents.add(x)}}catch(l){console.error("Error syncing shared event:",l)}}}const jn=new kxe;function Sxe(t,e){return g.useReducer((n,r)=>e[n][r]??n,t)}var JP="ScrollArea",[eq,UBe]=Lo(JP),[Txe,wi]=eq(JP),tq=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:o,scrollHideDelay:s=600,...i}=t,[a,l]=g.useState(null),[c,u]=g.useState(null),[f,h]=g.useState(null),[p,m]=g.useState(null),[y,x]=g.useState(null),[b,C]=g.useState(0),[E,R]=g.useState(0),[D,O]=g.useState(!1),[T,I]=g.useState(!1),P=bt(e,$=>l($)),L=$m(o);return d.jsx(Txe,{scope:n,type:r,dir:L,scrollHideDelay:s,scrollArea:a,viewport:c,onViewportChange:u,content:f,onContentChange:h,scrollbarX:p,onScrollbarXChange:m,scrollbarXEnabled:D,onScrollbarXEnabledChange:O,scrollbarY:y,onScrollbarYChange:x,scrollbarYEnabled:T,onScrollbarYEnabledChange:I,onCornerWidthChange:C,onCornerHeightChange:R,children:d.jsx(et.div,{dir:L,...i,ref:P,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":E+"px",...t.style}})})});tq.displayName=JP;var nq="ScrollAreaViewport",rq=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:o,...s}=t,i=wi(nq,n),a=g.useRef(null),l=bt(e,a,i.onViewportChange);return d.jsxs(d.Fragment,{children:[d.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),d.jsx(et.div,{"data-radix-scroll-area-viewport":"",...s,ref:l,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t.style},children:d.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});rq.displayName=nq;var ll="ScrollAreaScrollbar",ZP=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,o=wi(ll,t.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:i}=o,a=t.orientation==="horizontal";return g.useEffect(()=>(a?s(!0):i(!0),()=>{a?s(!1):i(!1)}),[a,s,i]),o.type==="hover"?d.jsx(Nxe,{...r,ref:e,forceMount:n}):o.type==="scroll"?d.jsx(Ixe,{...r,ref:e,forceMount:n}):o.type==="auto"?d.jsx(oq,{...r,ref:e,forceMount:n}):o.type==="always"?d.jsx(e3,{...r,ref:e}):null});ZP.displayName=ll;var Nxe=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,o=wi(ll,t.__scopeScrollArea),[s,i]=g.useState(!1);return g.useEffect(()=>{const a=o.scrollArea;let l=0;if(a){const c=()=>{window.clearTimeout(l),i(!0)},u=()=>{l=window.setTimeout(()=>i(!1),o.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",u)}}},[o.scrollArea,o.scrollHideDelay]),d.jsx(Qr,{present:n||s,children:d.jsx(oq,{"data-state":s?"visible":"hidden",...r,ref:e})})}),Ixe=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,o=wi(ll,t.__scopeScrollArea),s=t.orientation==="horizontal",i=EE(()=>l("SCROLL_END"),100),[a,l]=Sxe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return g.useEffect(()=>{if(a==="idle"){const c=window.setTimeout(()=>l("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(c)}},[a,o.scrollHideDelay,l]),g.useEffect(()=>{const c=o.viewport,u=s?"scrollLeft":"scrollTop";if(c){let f=c[u];const h=()=>{const p=c[u];f!==p&&(l("SCROLL"),i()),f=p};return c.addEventListener("scroll",h),()=>c.removeEventListener("scroll",h)}},[o.viewport,s,l,i]),d.jsx(Qr,{present:n||a!=="hidden",children:d.jsx(e3,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:ze(t.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:ze(t.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),oq=g.forwardRef((t,e)=>{const n=wi(ll,t.__scopeScrollArea),{forceMount:r,...o}=t,[s,i]=g.useState(!1),a=t.orientation==="horizontal",l=EE(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;i(a?c:u)}},10);return fm(n.viewport,l),fm(n.content,l),d.jsx(Qr,{present:r||s,children:d.jsx(e3,{"data-state":s?"visible":"hidden",...o,ref:e})})}),e3=g.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,o=wi(ll,t.__scopeScrollArea),s=g.useRef(null),i=g.useRef(0),[a,l]=g.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=cq(a.viewport,a.content),u={...r,sizes:a,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>s.current=h,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:h=>i.current=h};function f(h,p){return Oxe(h,i.current,a,p)}return n==="horizontal"?d.jsx(Rxe,{...u,ref:e,onThumbPositionChange:()=>{if(o.viewport&&s.current){const h=o.viewport.scrollLeft,p=e8(h,a,o.dir);s.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{o.viewport&&(o.viewport.scrollLeft=h)},onDragScroll:h=>{o.viewport&&(o.viewport.scrollLeft=f(h,o.dir))}}):n==="vertical"?d.jsx(Axe,{...u,ref:e,onThumbPositionChange:()=>{if(o.viewport&&s.current){const h=o.viewport.scrollTop,p=e8(h,a);s.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{o.viewport&&(o.viewport.scrollTop=h)},onDragScroll:h=>{o.viewport&&(o.viewport.scrollTop=f(h))}}):null}),Rxe=g.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...o}=t,s=wi(ll,t.__scopeScrollArea),[i,a]=g.useState(),l=g.useRef(null),c=bt(e,l,s.onScrollbarXChange);return g.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),d.jsx(iq,{"data-orientation":"horizontal",...o,ref:c,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":CE(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,f)=>{if(s.viewport){const h=s.viewport.scrollLeft+u.deltaX;t.onWheelScroll(h),dq(h,f)&&u.preventDefault()}},onResize:()=>{l.current&&s.viewport&&i&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Mx(i.paddingLeft),paddingEnd:Mx(i.paddingRight)}})}})}),Axe=g.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...o}=t,s=wi(ll,t.__scopeScrollArea),[i,a]=g.useState(),l=g.useRef(null),c=bt(e,l,s.onScrollbarYChange);return g.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),d.jsx(iq,{"data-orientation":"vertical",...o,ref:c,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":CE(n)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,f)=>{if(s.viewport){const h=s.viewport.scrollTop+u.deltaY;t.onWheelScroll(h),dq(h,f)&&u.preventDefault()}},onResize:()=>{l.current&&s.viewport&&i&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Mx(i.paddingTop),paddingEnd:Mx(i.paddingBottom)}})}})}),[Pxe,sq]=eq(ll),iq=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:o,onThumbChange:s,onThumbPointerUp:i,onThumbPointerDown:a,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:f,...h}=t,p=wi(ll,n),[m,y]=g.useState(null),x=bt(e,P=>y(P)),b=g.useRef(null),C=g.useRef(""),E=p.viewport,R=r.content-r.viewport,D=Xn(u),O=Xn(l),T=EE(f,10);function I(P){if(b.current){const L=P.clientX-b.current.left,$=P.clientY-b.current.top;c({x:L,y:$})}}return g.useEffect(()=>{const P=L=>{const $=L.target;(m==null?void 0:m.contains($))&&D(L,R)};return document.addEventListener("wheel",P,{passive:!1}),()=>document.removeEventListener("wheel",P,{passive:!1})},[E,m,R,D]),g.useEffect(O,[r,O]),fm(m,T),fm(p.content,T),d.jsx(Pxe,{scope:n,scrollbar:m,hasThumb:o,onThumbChange:Xn(s),onThumbPointerUp:Xn(i),onThumbPositionChange:O,onThumbPointerDown:Xn(a),children:d.jsx(et.div,{...h,ref:x,style:{position:"absolute",...h.style},onPointerDown:ze(t.onPointerDown,P=>{P.button===0&&(P.target.setPointerCapture(P.pointerId),b.current=m.getBoundingClientRect(),C.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),I(P))}),onPointerMove:ze(t.onPointerMove,I),onPointerUp:ze(t.onPointerUp,P=>{const L=P.target;L.hasPointerCapture(P.pointerId)&&L.releasePointerCapture(P.pointerId),document.body.style.webkitUserSelect=C.current,p.viewport&&(p.viewport.style.scrollBehavior=""),b.current=null})})})}),Px="ScrollAreaThumb",aq=g.forwardRef((t,e)=>{const{forceMount:n,...r}=t,o=sq(Px,t.__scopeScrollArea);return d.jsx(Qr,{present:n||o.hasThumb,children:d.jsx(Mxe,{ref:e,...r})})}),Mxe=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...o}=t,s=wi(Px,n),i=sq(Px,n),{onThumbPositionChange:a}=i,l=bt(e,f=>i.onThumbChange(f)),c=g.useRef(void 0),u=EE(()=>{c.current&&(c.current(),c.current=void 0)},100);return g.useEffect(()=>{const f=s.viewport;if(f){const h=()=>{if(u(),!c.current){const p=Lxe(f,a);c.current=p,a()}};return a(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[s.viewport,u,a]),d.jsx(et.div,{"data-state":i.hasThumb?"visible":"hidden",...o,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:ze(t.onPointerDownCapture,f=>{const p=f.target.getBoundingClientRect(),m=f.clientX-p.left,y=f.clientY-p.top;i.onThumbPointerDown({x:m,y})}),onPointerUp:ze(t.onPointerUp,i.onThumbPointerUp)})});aq.displayName=Px;var t3="ScrollAreaCorner",lq=g.forwardRef((t,e)=>{const n=wi(t3,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?d.jsx(Dxe,{...t,ref:e}):null});lq.displayName=t3;var Dxe=g.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,o=wi(t3,n),[s,i]=g.useState(0),[a,l]=g.useState(0),c=!!(s&&a);return fm(o.scrollbarX,()=>{var f;const u=((f=o.scrollbarX)==null?void 0:f.offsetHeight)||0;o.onCornerHeightChange(u),l(u)}),fm(o.scrollbarY,()=>{var f;const u=((f=o.scrollbarY)==null?void 0:f.offsetWidth)||0;o.onCornerWidthChange(u),i(u)}),c?d.jsx(et.div,{...r,ref:e,style:{width:s,height:a,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Mx(t){return t?parseInt(t,10):0}function cq(t,e){const n=t/e;return isNaN(n)?0:n}function CE(t){const e=cq(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function Oxe(t,e,n,r="ltr"){const o=CE(n),s=o/2,i=e||s,a=o-i,l=n.scrollbar.paddingStart+i,c=n.scrollbar.size-n.scrollbar.paddingEnd-a,u=n.content-n.viewport,f=r==="ltr"?[0,u]:[u*-1,0];return uq([l,c],f)(t)}function e8(t,e,n="ltr"){const r=CE(e),o=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=e.scrollbar.size-o,i=e.content-e.viewport,a=s-r,l=n==="ltr"?[0,i]:[i*-1,0],c=aI(t,l);return uq([0,i],[0,a])(c)}function uq(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function dq(t,e){return t>0&&t<e}var Lxe=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function o(){const s={left:t.scrollLeft,top:t.scrollTop},i=n.left!==s.left,a=n.top!==s.top;(i||a)&&e(),n=s,r=window.requestAnimationFrame(o)}(),()=>window.cancelAnimationFrame(r)};function EE(t,e){const n=Xn(t),r=g.useRef(0);return g.useEffect(()=>()=>window.clearTimeout(r.current),[]),g.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function fm(t,e){const n=Xn(e);Lr(()=>{let r=0;if(t){const o=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return o.observe(t),()=>{window.cancelAnimationFrame(r),o.unobserve(t)}}},[t,n])}var fq=tq,jxe=rq,Vxe=lq;const Gm=g.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(fq,{ref:r,className:Ve("relative overflow-hidden",t),...n,children:[d.jsx(jxe,{className:"h-full w-full rounded-[inherit]",children:e}),d.jsx(hq,{}),d.jsx(Vxe,{})]}));Gm.displayName=fq.displayName;const hq=g.forwardRef(({className:t,orientation:e="vertical",...n},r)=>d.jsx(ZP,{ref:r,orientation:e,className:Ve("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:d.jsx(aq,{className:"relative flex-1 rounded-full bg-border"})}));hq.displayName=ZP.displayName;const $xe=["#3b82f6","#60a5fa","#2563eb","#ef4444","#f87171","#dc2626","#22c55e","#4ade80","#16a34a","#f59e0b","#fbbf24","#d97706","#6366f1","#a855f7","#7c3aed","#ec4899","#f472b6","#db2777","#6b7280","#4b5563","#374151","#14b8a6","#2dd4bf","#0d9488"];function pq({selectedTags:t,onTagsChange:e,onCreateTag:n}){const[r,o]=g.useState(!1),[s,i]=g.useState([]),[a,l]=g.useState(""),[c,u]=g.useState({name:"",color:"#3b82f6",group:"default"}),[f,h]=g.useState(!1);g.useEffect(()=>{(async()=>{try{const y=await jn.getTags();i(y)}catch(y){console.error("Error loading tags:",y)}})()},[]);const p=s.filter(m=>m.name.toLowerCase().includes(a.toLowerCase())&&!t.some(y=>y.id===m.id));return d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"flex flex-wrap gap-1",children:t.map(m=>d.jsxs("div",{className:"flex items-center gap-1 px-2 py-0.5 rounded-full text-xs",style:{backgroundColor:m.color+"20",color:m.color},children:[d.jsx("span",{children:m.name}),d.jsx("button",{onClick:()=>e(t.filter(y=>y.id!==m.id)),className:"hover:opacity-75",children:d.jsx(Ku,{className:"h-3 w-3"})})]},m.id))}),d.jsxs("div",{className:"relative",children:[d.jsx(Pn,{placeholder:"Search or create tag...",value:a,onChange:m=>l(m.target.value),className:"h-8 text-sm"}),a&&p.length>0&&!r&&d.jsx("div",{className:"absolute z-10 w-full mt-1 bg-popover border rounded-md shadow-md",children:d.jsx(Gm,{className:"max-h-[200px]",children:p.map(m=>d.jsxs("button",{className:"flex items-center gap-2 w-full px-2 py-1.5 hover:bg-muted text-sm text-left",onClick:()=>{e([...t,m]),l("")},children:[d.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:m.color}}),m.name]},m.id))})}),a&&!p.length&&!r&&d.jsxs("button",{className:"absolute z-10 w-full mt-1 px-2 py-1.5 text-sm text-left bg-popover border rounded-md hover:bg-muted",onClick:()=>{o(!0),u(m=>({...m,name:a}))},children:['Create tag "',a,'"']})]}),r&&d.jsxs("div",{className:"space-y-4 animate-in slide-in-from-left",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(Pn,{placeholder:"Tag name",value:c.name,onChange:m=>u({...c,name:m.target.value}),className:"h-8 text-sm"}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx(En,{className:"text-xs",children:"Color"}),d.jsxs(S1,{open:f,onOpenChange:h,children:[d.jsx(T1,{asChild:!0,children:d.jsxs(Ne,{variant:"outline",className:"w-full justify-between h-8 text-xs",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:c.color}}),c.color]}),d.jsx(lE,{className:"h-4 w-4"})]})}),d.jsx(dm,{className:"w-64 p-3",align:"start",children:d.jsxs("div",{className:"space-y-3",children:[d.jsx("div",{className:"grid grid-cols-5 gap-2",children:$xe.map(m=>d.jsx("button",{className:Ve("w-8 h-8 rounded-full transition-all relative",c.color===m&&"ring-2 ring-offset-2 ring-primary"),style:{backgroundColor:m},onClick:()=>{u({...c,color:m}),h(!1)},children:c.color===m&&d.jsx(jv,{className:"h-4 w-4 text-white absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})},m))}),d.jsx(Pn,{type:"color",value:c.color,onChange:m=>u({...c,color:m.target.value}),className:"w-full h-8"})]})})]})]})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Ne,{size:"sm",variant:"default",disabled:!c.name,onClick:async()=>{if(c.name)try{const m={name:c.name.trim(),color:c.color,group:c.group,metadata:""},y=await n(m),x=[...t,y];e(x),o(!1),l(""),u({name:"",color:"#3b82f6",group:"default"});const b=await jn.getTags();i(b),Ap({title:"Tag created",description:`Tag "${y.name}" has been created successfully.`})}catch(m){console.error("Detailed error creating tag:",m),Ap({title:"Error creating tag",description:m instanceof Error?m.message:"There was a problem creating the tag.",variant:"destructive"})}},children:"Create"}),d.jsx(Ne,{size:"sm",variant:"ghost",onClick:()=>{o(!1),l("")},children:"Cancel"})]})]})]})}var n3="Checkbox",[Bxe,HBe]=Lo(n3),[Fxe,Uxe]=Bxe(n3),mq=g.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:o,defaultChecked:s,required:i,disabled:a,value:l="on",onCheckedChange:c,form:u,...f}=t,[h,p]=g.useState(null),m=bt(e,R=>p(R)),y=g.useRef(!1),x=h?u||!!h.closest("form"):!0,[b=!1,C]=ea({prop:o,defaultProp:s,onChange:c}),E=g.useRef(b);return g.useEffect(()=>{const R=h==null?void 0:h.form;if(R){const D=()=>C(E.current);return R.addEventListener("reset",D),()=>R.removeEventListener("reset",D)}},[h,C]),d.jsxs(Fxe,{scope:n,state:b,disabled:a,children:[d.jsx(et.button,{type:"button",role:"checkbox","aria-checked":Pu(b)?"mixed":b,"aria-required":i,"data-state":vq(b),"data-disabled":a?"":void 0,disabled:a,value:l,...f,ref:m,onKeyDown:ze(t.onKeyDown,R=>{R.key==="Enter"&&R.preventDefault()}),onClick:ze(t.onClick,R=>{C(D=>Pu(D)?!0:!D),x&&(y.current=R.isPropagationStopped(),y.current||R.stopPropagation())})}),x&&d.jsx(Hxe,{control:h,bubbles:!y.current,name:r,value:l,checked:b,required:i,disabled:a,form:u,style:{transform:"translateX(-100%)"},defaultChecked:Pu(s)?!1:s})]})});mq.displayName=n3;var gq="CheckboxIndicator",yq=g.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...o}=t,s=Uxe(gq,n);return d.jsx(Qr,{present:r||Pu(s.state)||s.state===!0,children:d.jsx(et.span,{"data-state":vq(s.state),"data-disabled":s.disabled?"":void 0,...o,ref:e,style:{pointerEvents:"none",...t.style}})})});yq.displayName=gq;var Hxe=t=>{const{control:e,checked:n,bubbles:r=!0,defaultChecked:o,...s}=t,i=g.useRef(null),a=fE(n),l=nE(e);g.useEffect(()=>{const u=i.current,f=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(f,"checked").set;if(a!==n&&p){const m=new Event("click",{bubbles:r});u.indeterminate=Pu(n),p.call(u,Pu(n)?!1:n),u.dispatchEvent(m)}},[a,n,r]);const c=g.useRef(Pu(n)?!1:n);return d.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:o??c.current,...s,tabIndex:-1,ref:i,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Pu(t){return t==="indeterminate"}function vq(t){return Pu(t)?"indeterminate":t?"checked":"unchecked"}var wq=mq,zxe=yq;const bq=g.forwardRef(({className:t,...e},n)=>d.jsx(wq,{ref:n,className:Ve("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:d.jsx(zxe,{className:Ve("flex items-center justify-center text-current"),children:d.jsx(jv,{className:"h-4 w-4"})})}));bq.displayName=wq.displayName;const Mu=zG,r3=WG,Wxe=GG,xq=g.forwardRef(({className:t,...e},n)=>d.jsx(wE,{ref:n,className:Ve("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));xq.displayName=wE.displayName;const rc=g.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(Wxe,{children:[d.jsx(xq,{}),d.jsxs(bE,{ref:r,className:Ve("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,d.jsxs(qG,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[d.jsx(Ku,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));rc.displayName=bE.displayName;const Du=({className:t,...e})=>d.jsx("div",{className:Ve("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Du.displayName="DialogHeader";const _q=({className:t,...e})=>d.jsx("div",{className:Ve("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});_q.displayName="DialogFooter";const Ou=g.forwardRef(({className:t,...e},n)=>d.jsx(xE,{ref:n,className:Ve("text-lg font-semibold leading-none tracking-tight",t),...e}));Ou.displayName=xE.displayName;const Wv=g.forwardRef(({className:t,...e},n)=>d.jsx(_E,{ref:n,className:Ve("text-sm text-muted-foreground",t),...e}));Wv.displayName=_E.displayName;var t8=1,Gxe=.9,qxe=.8,Kxe=.17,Zk=.1,eS=.999,Yxe=.9999,Qxe=.99,Xxe=/[\\\/_+.#"@\[\(\{&]/,Jxe=/[\\\/_+.#"@\[\(\{&]/g,Zxe=/[\s-]/,Cq=/[\s-]/g;function gI(t,e,n,r,o,s,i){if(s===e.length)return o===t.length?t8:Qxe;var a=`${o},${s}`;if(i[a]!==void 0)return i[a];for(var l=r.charAt(s),c=n.indexOf(l,o),u=0,f,h,p,m;c>=0;)f=gI(t,e,n,r,c+1,s+1,i),f>u&&(c===o?f*=t8:Xxe.test(t.charAt(c-1))?(f*=qxe,p=t.slice(o,c-1).match(Jxe),p&&o>0&&(f*=Math.pow(eS,p.length))):Zxe.test(t.charAt(c-1))?(f*=Gxe,m=t.slice(o,c-1).match(Cq),m&&o>0&&(f*=Math.pow(eS,m.length))):(f*=Kxe,o>0&&(f*=Math.pow(eS,c-o))),t.charAt(c)!==e.charAt(s)&&(f*=Yxe)),(f<Zk&&n.charAt(c-1)===r.charAt(s+1)||r.charAt(s+1)===r.charAt(s)&&n.charAt(c-1)!==r.charAt(s))&&(h=gI(t,e,n,r,c+1,s+2,i),h*Zk>f&&(f=h*Zk)),f>u&&(u=f),c=n.indexOf(l,c+1);return i[a]=u,u}function n8(t){return t.toLowerCase().replace(Cq," ")}function e_e(t,e,n){return t=n&&n.length>0?`${t+" "+n.join(" ")}`:t,gI(t,e,n8(t),n8(e),0,0,{})}function Ro(){return Ro=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ro.apply(null,arguments)}function Pp(t,e,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t==null||t(o),n===!1||!o.defaultPrevented)return e==null?void 0:e(o)}}function t_e(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function Eq(...t){return e=>t.forEach(n=>t_e(n,e))}function Gv(...t){return g.useCallback(Eq(...t),t)}function n_e(t,e=[]){let n=[];function r(s,i){const a=g.createContext(i),l=n.length;n=[...n,i];function c(f){const{scope:h,children:p,...m}=f,y=(h==null?void 0:h[t][l])||a,x=g.useMemo(()=>m,Object.values(m));return g.createElement(y.Provider,{value:x},p)}function u(f,h){const p=(h==null?void 0:h[t][l])||a,m=g.useContext(p);if(m)return m;if(i!==void 0)return i;throw new Error(`\`${f}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const o=()=>{const s=n.map(i=>g.createContext(i));return function(a){const l=(a==null?void 0:a[t])||s;return g.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return o.scopeName=t,[r,r_e(o,...e)]}function r_e(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(s){const i=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(s)[`__scope${c}`];return{...a,...f}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:i}),[i])}};return n.scopeName=e.scopeName,n}const o_e=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},s_e=XR.useId||(()=>{});let i_e=0;function tS(t){const[e,n]=g.useState(s_e());return o_e(()=>{t||n(r=>r??String(i_e++))},[t]),t||(e?`radix-${e}`:"")}function kq(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function a_e({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,o]=l_e({defaultProp:e,onChange:n}),s=t!==void 0,i=s?t:r,a=kq(n),l=g.useCallback(c=>{if(s){const f=typeof c=="function"?c(t):c;f!==t&&a(f)}else o(c)},[s,t,o,a]);return[i,l]}function l_e({defaultProp:t,onChange:e}){const n=g.useState(t),[r]=n,o=g.useRef(r),s=kq(e);return g.useEffect(()=>{o.current!==r&&(s(r),o.current=r)},[r,o,s]),n}const o3=g.forwardRef((t,e)=>{const{children:n,...r}=t,o=g.Children.toArray(n),s=o.find(u_e);if(s){const i=s.props.children,a=o.map(l=>l===s?g.Children.count(i)>1?g.Children.only(null):g.isValidElement(i)?i.props.children:null:l);return g.createElement(yI,Ro({},r,{ref:e}),g.isValidElement(i)?g.cloneElement(i,void 0,a):null)}return g.createElement(yI,Ro({},r,{ref:e}),n)});o3.displayName="Slot";const yI=g.forwardRef((t,e)=>{const{children:n,...r}=t;return g.isValidElement(n)?g.cloneElement(n,{...d_e(r,n.props),ref:e?Eq(e,n.ref):n.ref}):g.Children.count(n)>1?g.Children.only(null):null});yI.displayName="SlotClone";const c_e=({children:t})=>g.createElement(g.Fragment,null,t);function u_e(t){return g.isValidElement(t)&&t.type===c_e}function d_e(t,e){const n={...e};for(const r in e){const o=t[r],s=e[r];/^on[A-Z]/.test(r)?o&&s?n[r]=(...a)=>{s(...a),o(...a)}:o&&(n[r]=o):r==="style"?n[r]={...o,...s}:r==="className"&&(n[r]=[o,s].filter(Boolean).join(" "))}return{...t,...n}}const f_e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],bi=f_e.reduce((t,e)=>{const n=g.forwardRef((r,o)=>{const{asChild:s,...i}=r,a=s?o3:e;return g.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),g.createElement(a,Ro({},i,{ref:o}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function h_e(t,e){t&&yo.flushSync(()=>t.dispatchEvent(e))}function s3(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function p_e(t,e=globalThis==null?void 0:globalThis.document){const n=s3(t);g.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[n,e])}const vI="dismissableLayer.update",m_e="dismissableLayer.pointerDownOutside",g_e="dismissableLayer.focusOutside";let r8;const y_e=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),v_e=g.forwardRef((t,e)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:o,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=t,u=g.useContext(y_e),[f,h]=g.useState(null),p=(n=f==null?void 0:f.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,m]=g.useState({}),y=Gv(e,I=>h(I)),x=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),C=x.indexOf(b),E=f?x.indexOf(f):-1,R=u.layersWithOutsidePointerEventsDisabled.size>0,D=E>=C,O=w_e(I=>{const P=I.target,L=[...u.branches].some($=>$.contains(P));!D||L||(s==null||s(I),a==null||a(I),I.defaultPrevented||l==null||l())},p),T=b_e(I=>{const P=I.target;[...u.branches].some($=>$.contains(P))||(i==null||i(I),a==null||a(I),I.defaultPrevented||l==null||l())},p);return p_e(I=>{E===u.layers.size-1&&(o==null||o(I),!I.defaultPrevented&&l&&(I.preventDefault(),l()))},p),g.useEffect(()=>{if(f)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(r8=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),o8(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=r8)}},[f,p,r,u]),g.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),o8())},[f,u]),g.useEffect(()=>{const I=()=>m({});return document.addEventListener(vI,I),()=>document.removeEventListener(vI,I)},[]),g.createElement(bi.div,Ro({},c,{ref:y,style:{pointerEvents:R?D?"auto":"none":void 0,...t.style},onFocusCapture:Pp(t.onFocusCapture,T.onFocusCapture),onBlurCapture:Pp(t.onBlurCapture,T.onBlurCapture),onPointerDownCapture:Pp(t.onPointerDownCapture,O.onPointerDownCapture)}))});function w_e(t,e=globalThis==null?void 0:globalThis.document){const n=s3(t),r=g.useRef(!1),o=g.useRef(()=>{});return g.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let c=function(){Sq(m_e,n,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=c,e.addEventListener("click",o.current,{once:!0})):c()}else e.removeEventListener("click",o.current);r.current=!1},i=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(i),e.removeEventListener("pointerdown",s),e.removeEventListener("click",o.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function b_e(t,e=globalThis==null?void 0:globalThis.document){const n=s3(t),r=g.useRef(!1);return g.useEffect(()=>{const o=s=>{s.target&&!r.current&&Sq(g_e,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function o8(){const t=new CustomEvent(vI);document.dispatchEvent(t)}function Sq(t,e,n,{discrete:r}){const o=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),r?h_e(o,s):o.dispatchEvent(s)}function s8(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}const nS="focusScope.autoFocusOnMount",rS="focusScope.autoFocusOnUnmount",i8={bubbles:!1,cancelable:!0},x_e=g.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:s,...i}=t,[a,l]=g.useState(null),c=s8(o),u=s8(s),f=g.useRef(null),h=Gv(e,y=>l(y)),p=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(r){let y=function(E){if(p.paused||!a)return;const R=E.target;a.contains(R)?f.current=R:Yc(f.current,{select:!0})},x=function(E){if(p.paused||!a)return;const R=E.relatedTarget;R!==null&&(a.contains(R)||Yc(f.current,{select:!0}))},b=function(E){if(document.activeElement===document.body)for(const D of E)D.removedNodes.length>0&&Yc(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",x);const C=new MutationObserver(b);return a&&C.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",x),C.disconnect()}}},[r,a,p.paused]),g.useEffect(()=>{if(a){l8.add(p);const y=document.activeElement;if(!a.contains(y)){const b=new CustomEvent(nS,i8);a.addEventListener(nS,c),a.dispatchEvent(b),b.defaultPrevented||(__e(T_e(Tq(a)),{select:!0}),document.activeElement===y&&Yc(a))}return()=>{a.removeEventListener(nS,c),setTimeout(()=>{const b=new CustomEvent(rS,i8);a.addEventListener(rS,u),a.dispatchEvent(b),b.defaultPrevented||Yc(y??document.body,{select:!0}),a.removeEventListener(rS,u),l8.remove(p)},0)}}},[a,c,u,p]);const m=g.useCallback(y=>{if(!n&&!r||p.paused)return;const x=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,b=document.activeElement;if(x&&b){const C=y.currentTarget,[E,R]=C_e(C);E&&R?!y.shiftKey&&b===R?(y.preventDefault(),n&&Yc(E,{select:!0})):y.shiftKey&&b===E&&(y.preventDefault(),n&&Yc(R,{select:!0})):b===C&&y.preventDefault()}},[n,r,p.paused]);return g.createElement(bi.div,Ro({tabIndex:-1},i,{ref:h,onKeyDown:m}))});function __e(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Yc(r,{select:e}),document.activeElement!==n)return}function C_e(t){const e=Tq(t),n=a8(e,t),r=a8(e.reverse(),t);return[n,r]}function Tq(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function a8(t,e){for(const n of t)if(!E_e(n,{upTo:e}))return n}function E_e(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function k_e(t){return t instanceof HTMLInputElement&&"select"in t}function Yc(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&k_e(t)&&e&&t.select()}}const l8=S_e();function S_e(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=c8(t,e),t.unshift(e)},remove(e){var n;t=c8(t,e),(n=t[0])===null||n===void 0||n.resume()}}}function c8(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function T_e(t){return t.filter(e=>e.tagName!=="A")}const N_e=g.forwardRef((t,e)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...o}=t;return r?fv.createPortal(g.createElement(bi.div,Ro({},o,{ref:e})),r):null}),u8=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{};function I_e(t,e){return g.useReducer((n,r)=>{const o=e[n][r];return o??n},t)}const kE=t=>{const{present:e,children:n}=t,r=R_e(e),o=typeof n=="function"?n({present:r.isPresent}):g.Children.only(n),s=Gv(r.ref,o.ref);return typeof n=="function"||r.isPresent?g.cloneElement(o,{ref:s}):null};kE.displayName="Presence";function R_e(t){const[e,n]=g.useState(),r=g.useRef({}),o=g.useRef(t),s=g.useRef("none"),i=t?"mounted":"unmounted",[a,l]=I_e(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const c=i0(r.current);s.current=a==="mounted"?c:"none"},[a]),u8(()=>{const c=r.current,u=o.current;if(u!==t){const h=s.current,p=i0(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==p?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,l]),u8(()=>{if(e){const c=f=>{const p=i0(r.current).includes(f.animationName);f.target===e&&p&&yo.flushSync(()=>l("ANIMATION_END"))},u=f=>{f.target===e&&(s.current=i0(r.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:g.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function i0(t){return(t==null?void 0:t.animationName)||"none"}let oS=0;function A_e(){g.useEffect(()=>{var t,e;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=n[0])!==null&&t!==void 0?t:d8()),document.body.insertAdjacentElement("beforeend",(e=n[1])!==null&&e!==void 0?e:d8()),oS++,()=>{oS===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),oS--}},[])}function d8(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}var Nq=LH(),sS=function(){},SE=g.forwardRef(function(t,e){var n=g.useRef(null),r=g.useState({onScrollCapture:sS,onWheelCapture:sS,onTouchMoveCapture:sS}),o=r[0],s=r[1],i=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,f=t.shards,h=t.sideCar,p=t.noIsolation,m=t.inert,y=t.allowPinchZoom,x=t.as,b=x===void 0?"div":x,C=Mm(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),E=h,R=OH([n,e]),D=co(co({},C),o);return g.createElement(g.Fragment,null,u&&g.createElement(E,{sideCar:Nq,removeScrollBar:c,shards:f,noIsolation:p,inert:m,setCallbacks:s,allowPinchZoom:!!y,lockRef:n}),i?g.cloneElement(g.Children.only(a),co(co({},D),{ref:R})):g.createElement(b,co({},D,{className:l,ref:R}),a))});SE.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};SE.classNames={fullWidth:Dy,zeroRight:My};var wI=!1;if(typeof window<"u")try{var a0=Object.defineProperty({},"passive",{get:function(){return wI=!0,!0}});window.addEventListener("test",a0,a0),window.removeEventListener("test",a0,a0)}catch{wI=!1}var jh=wI?{passive:!1}:!1,P_e=function(t){return t.tagName==="TEXTAREA"},Iq=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!P_e(t)&&n[e]==="visible")},M_e=function(t){return Iq(t,"overflowY")},D_e=function(t){return Iq(t,"overflowX")},f8=function(t,e){var n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=Rq(t,n);if(r){var o=Aq(t,n),s=o[1],i=o[2];if(s>i)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},O_e=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},L_e=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},Rq=function(t,e){return t==="v"?M_e(e):D_e(e)},Aq=function(t,e){return t==="v"?O_e(e):L_e(e)},j_e=function(t,e){return t==="h"&&e==="rtl"?-1:1},V_e=function(t,e,n,r,o){var s=j_e(t,window.getComputedStyle(e).direction),i=s*r,a=n.target,l=e.contains(a),c=!1,u=i>0,f=0,h=0;do{var p=Aq(t,a),m=p[0],y=p[1],x=p[2],b=y-x-s*m;(m||b)&&Rq(t,a)&&(f+=b,h+=m),a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&f===0||!u&&h===0)&&(c=!0),c},l0=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},h8=function(t){return[t.deltaX,t.deltaY]},p8=function(t){return t&&"current"in t?t.current:t},$_e=function(t,e){return t[0]===e[0]&&t[1]===e[1]},B_e=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},F_e=0,Vh=[];function U_e(t){var e=g.useRef([]),n=g.useRef([0,0]),r=g.useRef(),o=g.useState(F_e++)[0],s=g.useState(function(){return mP()})[0],i=g.useRef(t);g.useEffect(function(){i.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var y=gB([t.lockRef.current],(t.shards||[]).map(p8),!0).filter(Boolean);return y.forEach(function(x){return x.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),y.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var a=g.useCallback(function(y,x){if("touches"in y&&y.touches.length===2)return!i.current.allowPinchZoom;var b=l0(y),C=n.current,E="deltaX"in y?y.deltaX:C[0]-b[0],R="deltaY"in y?y.deltaY:C[1]-b[1],D,O=y.target,T=Math.abs(E)>Math.abs(R)?"h":"v";if("touches"in y&&T==="h"&&O.type==="range")return!1;var I=f8(T,O);if(!I)return!0;if(I?D=T:(D=T==="v"?"h":"v",I=f8(T,O)),!I)return!1;if(!r.current&&"changedTouches"in y&&(E||R)&&(r.current=D),!D)return!0;var P=r.current||D;return V_e(P,x,y,P==="h"?E:R)},[]),l=g.useCallback(function(y){var x=y;if(!(!Vh.length||Vh[Vh.length-1]!==s)){var b="deltaY"in x?h8(x):l0(x),C=e.current.filter(function(D){return D.name===x.type&&D.target===x.target&&$_e(D.delta,b)})[0];if(C&&C.should){x.cancelable&&x.preventDefault();return}if(!C){var E=(i.current.shards||[]).map(p8).filter(Boolean).filter(function(D){return D.contains(x.target)}),R=E.length>0?a(x,E[0]):!i.current.noIsolation;R&&x.cancelable&&x.preventDefault()}}},[]),c=g.useCallback(function(y,x,b,C){var E={name:y,delta:x,target:b,should:C};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(R){return R!==E})},1)},[]),u=g.useCallback(function(y){n.current=l0(y),r.current=void 0},[]),f=g.useCallback(function(y){c(y.type,h8(y),y.target,a(y,t.lockRef.current))},[]),h=g.useCallback(function(y){c(y.type,l0(y),y.target,a(y,t.lockRef.current))},[]);g.useEffect(function(){return Vh.push(s),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",l,jh),document.addEventListener("touchmove",l,jh),document.addEventListener("touchstart",u,jh),function(){Vh=Vh.filter(function(y){return y!==s}),document.removeEventListener("wheel",l,jh),document.removeEventListener("touchmove",l,jh),document.removeEventListener("touchstart",u,jh)}},[]);var p=t.removeScrollBar,m=t.inert;return g.createElement(g.Fragment,null,m?g.createElement(s,{styles:B_e(o)}):null,p?g.createElement(BH,{gapMode:"margin"}):null)}const H_e=VH(Nq,U_e);var Pq=g.forwardRef(function(t,e){return g.createElement(SE,co({},t,{ref:e,sideCar:H_e}))});Pq.classNames=SE.classNames;const Mq="Dialog",[Dq,zBe]=n_e(Mq),[z_e,Zf]=Dq(Mq),W_e=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:o,onOpenChange:s,modal:i=!0}=t,a=g.useRef(null),l=g.useRef(null),[c=!1,u]=a_e({prop:r,defaultProp:o,onChange:s});return g.createElement(z_e,{scope:e,triggerRef:a,contentRef:l,contentId:tS(),titleId:tS(),descriptionId:tS(),open:c,onOpenChange:u,onOpenToggle:g.useCallback(()=>u(f=>!f),[u]),modal:i},n)},Oq="DialogPortal",[G_e,Lq]=Dq(Oq,{forceMount:void 0}),q_e=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:o}=t,s=Zf(Oq,e);return g.createElement(G_e,{scope:e,forceMount:n},g.Children.map(r,i=>g.createElement(kE,{present:n||s.open},g.createElement(N_e,{asChild:!0,container:o},i))))},bI="DialogOverlay",K_e=g.forwardRef((t,e)=>{const n=Lq(bI,t.__scopeDialog),{forceMount:r=n.forceMount,...o}=t,s=Zf(bI,t.__scopeDialog);return s.modal?g.createElement(kE,{present:r||s.open},g.createElement(Y_e,Ro({},o,{ref:e}))):null}),Y_e=g.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=Zf(bI,n);return g.createElement(Pq,{as:o3,allowPinchZoom:!0,shards:[o.contentRef]},g.createElement(bi.div,Ro({"data-state":Vq(o.open)},r,{ref:e,style:{pointerEvents:"auto",...r.style}})))}),N1="DialogContent",Q_e=g.forwardRef((t,e)=>{const n=Lq(N1,t.__scopeDialog),{forceMount:r=n.forceMount,...o}=t,s=Zf(N1,t.__scopeDialog);return g.createElement(kE,{present:r||s.open},s.modal?g.createElement(X_e,Ro({},o,{ref:e})):g.createElement(J_e,Ro({},o,{ref:e})))}),X_e=g.forwardRef((t,e)=>{const n=Zf(N1,t.__scopeDialog),r=g.useRef(null),o=Gv(e,n.contentRef,r);return g.useEffect(()=>{const s=r.current;if(s)return Pv(s)},[]),g.createElement(jq,Ro({},t,{ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Pp(t.onCloseAutoFocus,s=>{var i;s.preventDefault(),(i=n.triggerRef.current)===null||i===void 0||i.focus()}),onPointerDownOutside:Pp(t.onPointerDownOutside,s=>{const i=s.detail.originalEvent,a=i.button===0&&i.ctrlKey===!0;(i.button===2||a)&&s.preventDefault()}),onFocusOutside:Pp(t.onFocusOutside,s=>s.preventDefault())}))}),J_e=g.forwardRef((t,e)=>{const n=Zf(N1,t.__scopeDialog),r=g.useRef(!1),o=g.useRef(!1);return g.createElement(jq,Ro({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var i;if((i=t.onCloseAutoFocus)===null||i===void 0||i.call(t,s),!s.defaultPrevented){var a;r.current||(a=n.triggerRef.current)===null||a===void 0||a.focus(),s.preventDefault()}r.current=!1,o.current=!1},onInteractOutside:s=>{var i,a;(i=t.onInteractOutside)===null||i===void 0||i.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const l=s.target;((a=n.triggerRef.current)===null||a===void 0?void 0:a.contains(l))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&o.current&&s.preventDefault()}}))}),jq=g.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:s,...i}=t,a=Zf(N1,n),l=g.useRef(null),c=Gv(e,l);return A_e(),g.createElement(g.Fragment,null,g.createElement(x_e,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:s},g.createElement(v_e,Ro({role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":Vq(a.open)},i,{ref:c,onDismiss:()=>a.onOpenChange(!1)}))),!1)});function Vq(t){return t?"open":"closed"}const Z_e=W_e,eCe=q_e,tCe=K_e,nCe=Q_e;var Fg='[cmdk-group=""]',iS='[cmdk-group-items=""]',rCe='[cmdk-group-heading=""]',i3='[cmdk-item=""]',m8=`${i3}:not([aria-disabled="true"])`,xI="cmdk-item-select",Ud="data-value",oCe=(t,e,n)=>e_e(t,e,n),$q=g.createContext(void 0),qv=()=>g.useContext($q),Bq=g.createContext(void 0),a3=()=>g.useContext(Bq),Fq=g.createContext(void 0),Uq=g.forwardRef((t,e)=>{let n=Yh(()=>{var G,ie;return{search:"",value:(ie=(G=t.value)!=null?G:t.defaultValue)!=null?ie:"",filtered:{count:0,items:new Map,groups:new Set}}}),r=Yh(()=>new Set),o=Yh(()=>new Map),s=Yh(()=>new Map),i=Yh(()=>new Set),a=Hq(t),{label:l,children:c,value:u,onValueChange:f,filter:h,shouldFilter:p,loop:m,disablePointerSelection:y=!1,vimBindings:x=!0,...b}=t,C=g.useId(),E=g.useId(),R=g.useId(),D=g.useRef(null),O=mCe();Df(()=>{if(u!==void 0){let G=u.trim();n.current.value=G,T.emit()}},[u]),Df(()=>{O(6,V)},[]);let T=g.useMemo(()=>({subscribe:G=>(i.current.add(G),()=>i.current.delete(G)),snapshot:()=>n.current,setState:(G,ie,ye)=>{var he,we,ve;if(!Object.is(n.current[G],ie)){if(n.current[G]=ie,G==="search")F(),L(),O(1,$);else if(G==="value"&&(ye||O(5,V),((he=a.current)==null?void 0:he.value)!==void 0)){let Te=ie??"";(ve=(we=a.current).onValueChange)==null||ve.call(we,Te);return}T.emit()}},emit:()=>{i.current.forEach(G=>G())}}),[]),I=g.useMemo(()=>({value:(G,ie,ye)=>{var he;ie!==((he=s.current.get(G))==null?void 0:he.value)&&(s.current.set(G,{value:ie,keywords:ye}),n.current.filtered.items.set(G,P(ie,ye)),O(2,()=>{L(),T.emit()}))},item:(G,ie)=>(r.current.add(G),ie&&(o.current.has(ie)?o.current.get(ie).add(G):o.current.set(ie,new Set([G]))),O(3,()=>{F(),L(),n.current.value||$(),T.emit()}),()=>{s.current.delete(G),r.current.delete(G),n.current.filtered.items.delete(G);let ye=be();O(4,()=>{F(),(ye==null?void 0:ye.getAttribute("id"))===G&&$(),T.emit()})}),group:G=>(o.current.has(G)||o.current.set(G,new Set),()=>{s.current.delete(G),o.current.delete(G)}),filter:()=>a.current.shouldFilter,label:l||t["aria-label"],disablePointerSelection:y,listId:C,inputId:R,labelId:E,listInnerRef:D}),[]);function P(G,ie){var ye,he;let we=(he=(ye=a.current)==null?void 0:ye.filter)!=null?he:oCe;return G?we(G,n.current.search,ie):0}function L(){if(!n.current.search||a.current.shouldFilter===!1)return;let G=n.current.filtered.items,ie=[];n.current.filtered.groups.forEach(he=>{let we=o.current.get(he),ve=0;we.forEach(Te=>{let xe=G.get(Te);ve=Math.max(xe,ve)}),ie.push([he,ve])});let ye=D.current;ge().sort((he,we)=>{var ve,Te;let xe=he.getAttribute("id"),ae=we.getAttribute("id");return((ve=G.get(ae))!=null?ve:0)-((Te=G.get(xe))!=null?Te:0)}).forEach(he=>{let we=he.closest(iS);we?we.appendChild(he.parentElement===we?he:he.closest(`${iS} > *`)):ye.appendChild(he.parentElement===ye?he:he.closest(`${iS} > *`))}),ie.sort((he,we)=>we[1]-he[1]).forEach(he=>{let we=D.current.querySelector(`${Fg}[${Ud}="${encodeURIComponent(he[0])}"]`);we==null||we.parentElement.appendChild(we)})}function $(){let G=ge().find(ye=>ye.getAttribute("aria-disabled")!=="true"),ie=G==null?void 0:G.getAttribute(Ud);T.setState("value",ie||void 0)}function F(){var G,ie,ye,he;if(!n.current.search||a.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let we=0;for(let ve of r.current){let Te=(ie=(G=s.current.get(ve))==null?void 0:G.value)!=null?ie:"",xe=(he=(ye=s.current.get(ve))==null?void 0:ye.keywords)!=null?he:[],ae=P(Te,xe);n.current.filtered.items.set(ve,ae),ae>0&&we++}for(let[ve,Te]of o.current)for(let xe of Te)if(n.current.filtered.items.get(xe)>0){n.current.filtered.groups.add(ve);break}n.current.filtered.count=we}function V(){var G,ie,ye;let he=be();he&&(((G=he.parentElement)==null?void 0:G.firstChild)===he&&((ye=(ie=he.closest(Fg))==null?void 0:ie.querySelector(rCe))==null||ye.scrollIntoView({block:"nearest"})),he.scrollIntoView({block:"nearest"}))}function be(){var G;return(G=D.current)==null?void 0:G.querySelector(`${i3}[aria-selected="true"]`)}function ge(){var G;return Array.from((G=D.current)==null?void 0:G.querySelectorAll(m8))}function le(G){let ie=ge()[G];ie&&T.setState("value",ie.getAttribute(Ud))}function Q(G){var ie;let ye=be(),he=ge(),we=he.findIndex(Te=>Te===ye),ve=he[we+G];(ie=a.current)!=null&&ie.loop&&(ve=we+G<0?he[he.length-1]:we+G===he.length?he[0]:he[we+G]),ve&&T.setState("value",ve.getAttribute(Ud))}function H(G){let ie=be(),ye=ie==null?void 0:ie.closest(Fg),he;for(;ye&&!he;)ye=G>0?hCe(ye,Fg):pCe(ye,Fg),he=ye==null?void 0:ye.querySelector(m8);he?T.setState("value",he.getAttribute(Ud)):Q(G)}let Y=()=>le(ge().length-1),ue=G=>{G.preventDefault(),G.metaKey?Y():G.altKey?H(1):Q(1)},W=G=>{G.preventDefault(),G.metaKey?le(0):G.altKey?H(-1):Q(-1)};return g.createElement(bi.div,{ref:e,tabIndex:-1,...b,"cmdk-root":"",onKeyDown:G=>{var ie;if((ie=b.onKeyDown)==null||ie.call(b,G),!G.defaultPrevented)switch(G.key){case"n":case"j":{x&&G.ctrlKey&&ue(G);break}case"ArrowDown":{ue(G);break}case"p":case"k":{x&&G.ctrlKey&&W(G);break}case"ArrowUp":{W(G);break}case"Home":{G.preventDefault(),le(0);break}case"End":{G.preventDefault(),Y();break}case"Enter":if(!G.nativeEvent.isComposing&&G.keyCode!==229){G.preventDefault();let ye=be();if(ye){let he=new Event(xI);ye.dispatchEvent(he)}}}}},g.createElement("label",{"cmdk-label":"",htmlFor:I.inputId,id:I.labelId,style:yCe},l),TE(t,G=>g.createElement(Bq.Provider,{value:T},g.createElement($q.Provider,{value:I},G))))}),sCe=g.forwardRef((t,e)=>{var n,r;let o=g.useId(),s=g.useRef(null),i=g.useContext(Fq),a=qv(),l=Hq(t),c=(r=(n=l.current)==null?void 0:n.forceMount)!=null?r:i==null?void 0:i.forceMount;Df(()=>{if(!c)return a.item(o,i==null?void 0:i.id)},[c]);let u=zq(o,s,[t.value,t.children,s],t.keywords),f=a3(),h=Of(O=>O.value&&O.value===u.current),p=Of(O=>c||a.filter()===!1?!0:O.search?O.filtered.items.get(o)>0:!0);g.useEffect(()=>{let O=s.current;if(!(!O||t.disabled))return O.addEventListener(xI,m),()=>O.removeEventListener(xI,m)},[p,t.onSelect,t.disabled]);function m(){var O,T;y(),(T=(O=l.current).onSelect)==null||T.call(O,u.current)}function y(){f.setState("value",u.current,!0)}if(!p)return null;let{disabled:x,value:b,onSelect:C,forceMount:E,keywords:R,...D}=t;return g.createElement(bi.div,{ref:I1([s,e]),...D,id:o,"cmdk-item":"",role:"option","aria-disabled":!!x,"aria-selected":!!h,"data-disabled":!!x,"data-selected":!!h,onPointerMove:x||a.disablePointerSelection?void 0:y,onClick:x?void 0:m},t.children)}),iCe=g.forwardRef((t,e)=>{let{heading:n,children:r,forceMount:o,...s}=t,i=g.useId(),a=g.useRef(null),l=g.useRef(null),c=g.useId(),u=qv(),f=Of(p=>o||u.filter()===!1?!0:p.search?p.filtered.groups.has(i):!0);Df(()=>u.group(i),[]),zq(i,a,[t.value,t.heading,l]);let h=g.useMemo(()=>({id:i,forceMount:o}),[o]);return g.createElement(bi.div,{ref:I1([a,e]),...s,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},n&&g.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),TE(t,p=>g.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},g.createElement(Fq.Provider,{value:h},p))))}),aCe=g.forwardRef((t,e)=>{let{alwaysRender:n,...r}=t,o=g.useRef(null),s=Of(i=>!i.search);return!n&&!s?null:g.createElement(bi.div,{ref:I1([o,e]),...r,"cmdk-separator":"",role:"separator"})}),lCe=g.forwardRef((t,e)=>{let{onValueChange:n,...r}=t,o=t.value!=null,s=a3(),i=Of(u=>u.search),a=Of(u=>u.value),l=qv(),c=g.useMemo(()=>{var u;let f=(u=l.listInnerRef.current)==null?void 0:u.querySelector(`${i3}[${Ud}="${encodeURIComponent(a)}"]`);return f==null?void 0:f.getAttribute("id")},[]);return g.useEffect(()=>{t.value!=null&&s.setState("search",t.value)},[t.value]),g.createElement(bi.input,{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":c,id:l.inputId,type:"text",value:o?t.value:i,onChange:u=>{o||s.setState("search",u.target.value),n==null||n(u.target.value)}})}),cCe=g.forwardRef((t,e)=>{let{children:n,label:r="Suggestions",...o}=t,s=g.useRef(null),i=g.useRef(null),a=qv();return g.useEffect(()=>{if(i.current&&s.current){let l=i.current,c=s.current,u,f=new ResizeObserver(()=>{u=requestAnimationFrame(()=>{let h=l.offsetHeight;c.style.setProperty("--cmdk-list-height",h.toFixed(1)+"px")})});return f.observe(l),()=>{cancelAnimationFrame(u),f.unobserve(l)}}},[]),g.createElement(bi.div,{ref:I1([s,e]),...o,"cmdk-list":"",role:"listbox","aria-label":r,id:a.listId},TE(t,l=>g.createElement("div",{ref:I1([i,a.listInnerRef]),"cmdk-list-sizer":""},l)))}),uCe=g.forwardRef((t,e)=>{let{open:n,onOpenChange:r,overlayClassName:o,contentClassName:s,container:i,...a}=t;return g.createElement(Z_e,{open:n,onOpenChange:r},g.createElement(eCe,{container:i},g.createElement(tCe,{"cmdk-overlay":"",className:o}),g.createElement(nCe,{"aria-label":t.label,"cmdk-dialog":"",className:s},g.createElement(Uq,{ref:e,...a}))))}),dCe=g.forwardRef((t,e)=>Of(n=>n.filtered.count===0)?g.createElement(bi.div,{ref:e,...t,"cmdk-empty":"",role:"presentation"}):null),fCe=g.forwardRef((t,e)=>{let{progress:n,children:r,label:o="Loading...",...s}=t;return g.createElement(bi.div,{ref:e,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},TE(t,i=>g.createElement("div",{"aria-hidden":!0},i)))}),ns=Object.assign(Uq,{List:cCe,Item:sCe,Input:lCe,Group:iCe,Separator:aCe,Dialog:uCe,Empty:dCe,Loading:fCe});function hCe(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}}function pCe(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}function Hq(t){let e=g.useRef(t);return Df(()=>{e.current=t}),e}var Df=typeof window>"u"?g.useEffect:g.useLayoutEffect;function Yh(t){let e=g.useRef();return e.current===void 0&&(e.current=t()),e}function I1(t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}function Of(t){let e=a3(),n=()=>t(e.snapshot());return g.useSyncExternalStore(e.subscribe,n,n)}function zq(t,e,n,r=[]){let o=g.useRef(),s=qv();return Df(()=>{var i;let a=(()=>{var c;for(let u of n){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(c=u.current.textContent)==null?void 0:c.trim():o.current}})(),l=r.map(c=>c.trim());s.value(t,a,l),(i=e.current)==null||i.setAttribute(Ud,a),o.current=a}),o}var mCe=()=>{let[t,e]=g.useState(),n=Yh(()=>new Map);return Df(()=>{n.current.forEach(r=>r()),n.current=new Map},[t]),(r,o)=>{n.current.set(r,o),e({})}};function gCe(t){let e=t.type;return typeof e=="function"?e(t.props):"render"in e?e.render(t.props):t}function TE({asChild:t,children:e},n){return t&&g.isValidElement(e)?g.cloneElement(gCe(e),{ref:e.ref},n(e.props.children)):n(e)}var yCe={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const l3=g.forwardRef(({className:t,...e},n)=>d.jsx(ns,{ref:n,className:Ve("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...e}));l3.displayName=ns.displayName;const c3=({children:t,...e})=>d.jsxs(Mu,{...e,children:[d.jsx(QP,{}),d.jsx(rc,{className:"overflow-hidden p-0",children:d.jsx(l3,{className:"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:t})})]}),NE=g.forwardRef(({className:t,...e},n)=>d.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[d.jsx(Uz,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),d.jsx(ns.Input,{ref:n,className:Ve("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...e})]}));NE.displayName=ns.Input.displayName;const IE=g.forwardRef(({className:t,...e},n)=>d.jsx(ns.List,{ref:n,className:Ve("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...e}));IE.displayName=ns.List.displayName;const RE=g.forwardRef((t,e)=>d.jsx(ns.Empty,{ref:e,className:"py-6 text-center text-sm",...t}));RE.displayName=ns.Empty.displayName;const AE=g.forwardRef(({className:t,...e},n)=>d.jsx(ns.Group,{ref:n,className:Ve("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...e}));AE.displayName=ns.Group.displayName;const vCe=g.forwardRef(({className:t,...e},n)=>d.jsx(ns.Separator,{ref:n,className:Ve("-mx-1 h-px bg-border",t),...e}));vCe.displayName=ns.Separator.displayName;const PE=g.forwardRef(({className:t,...e},n)=>d.jsx(ns.Item,{ref:n,className:Ve("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t),...e}));PE.displayName=ns.Item.displayName;const wCe=({note:t,shares:e,user:n,view:r,onClick:o})=>{var p;const s=t.ownerUserId===(n==null?void 0:n.uid),i=e.filter(m=>m.noteId===t.firebaseId),a=i.length>0,[l,c]=g.useState(!1),[u,f]=g.useState(t.tags||[]),h=async m=>{m.stopPropagation();try{await jn.toggleNotePin(t.firebaseId,!t.isPinned)}catch(y){console.error("Error toggling pin:",y)}};return d.jsxs(Zt,{className:`group hover:shadow-lg transition-all relative
      ${t.isPinned?"border-primary/50":""}`,children:[d.jsxs("div",{className:"absolute right-2 top-2 z-10 flex gap-2",children:[s&&d.jsx(Ne,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:m=>{m.stopPropagation(),h(m)},children:d.jsx(Fz,{className:`h-4 w-4 ${t.isPinned?"text-primary":"text-muted-foreground"}`})}),d.jsxs(bxe,{children:[d.jsx(xxe,{asChild:!0,children:d.jsx(Ne,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:m=>m.stopPropagation(),children:d.jsx(U1e,{className:"h-4 w-4"})})}),d.jsxs(YG,{onClick:m=>m.stopPropagation(),children:[d.jsxs(QG,{children:[d.jsx(XG,{children:"Note Details"}),d.jsx(JG,{children:"View details about this note including creation date, ownership, and sharing information."})]}),d.jsxs("div",{className:"mt-6 space-y-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h4",{className:"text-sm font-medium",children:"Tags"}),s&&d.jsx(Ne,{variant:"outline",size:"sm",onClick:m=>{m.stopPropagation(),c(!0)},children:(p=t.tags)!=null&&p.length?"Edit Tags":"Add Tags"})]}),t.tags&&t.tags.length>0?d.jsx("div",{className:"flex flex-wrap gap-1",children:t.tags.map(m=>d.jsx("div",{className:"px-2 py-0.5 rounded-full text-xs",style:{backgroundColor:m.color+"20",color:m.color},children:m.name},m.id))}):d.jsx("p",{className:"text-sm text-muted-foreground",children:"No tags added yet"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h4",{className:"text-sm font-medium",children:"Basic Information"}),d.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[d.jsxs("p",{children:["Created ",Zc(t.createdAt)]}),d.jsxs("p",{children:["Last updated ",Zc(t.updatedAt)]}),t.isPinned&&d.jsx("p",{children:"📌 Pinned note"})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("h4",{className:"text-sm font-medium",children:"Owner"}),d.jsxs("div",{className:"flex items-center gap-2",children:[t.ownerPhotoURL?d.jsx("img",{src:t.ownerPhotoURL,alt:t.ownerDisplayName,className:"w-8 h-8 rounded-full"}):d.jsx(WN,{className:"w-8 h-8"}),d.jsxs("div",{className:"text-sm",children:[d.jsx("p",{children:t.ownerDisplayName}),d.jsx("p",{className:"text-muted-foreground",children:t.ownerEmail})]})]})]}),a&&d.jsxs("div",{className:"space-y-2",children:[d.jsx("h4",{className:"text-sm font-medium",children:"Shared With"}),d.jsx("div",{className:"space-y-2",children:i.map(m=>d.jsx("div",{className:"flex items-center gap-2",children:d.jsxs("div",{className:"text-sm",children:[d.jsx("p",{children:m.displayName}),d.jsx("p",{className:"text-muted-foreground",children:m.email}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:["Can ",m.access]})]})},m.id))})]}),t.lastEditedByUserId&&d.jsxs("div",{className:"space-y-2",children:[d.jsx("h4",{className:"text-sm font-medium",children:"Last Edit"}),d.jsxs("div",{className:"flex items-center gap-2",children:[t.lastEditedByPhotoURL&&d.jsx("img",{src:t.lastEditedByPhotoURL,alt:t.lastEditedByDisplayName,className:"w-8 h-8 rounded-full"}),d.jsxs("div",{className:"text-sm",children:[d.jsx("p",{children:t.lastEditedByDisplayName}),d.jsx("p",{className:"text-muted-foreground",children:Zc(t.lastEditedAt||t.updatedAt)})]})]})]})]}),d.jsx(Mu,{open:l,onOpenChange:c,children:d.jsxs(rc,{className:"sm:max-w-[425px]",children:[d.jsxs(Du,{children:[d.jsx(Ou,{children:"Manage Tags"}),d.jsx(Wv,{children:"Add or remove tags from this note"})]}),d.jsx("div",{className:"py-4",children:d.jsx(pq,{selectedTags:u,onTagsChange:async m=>{f(m);try{await jn.updateNoteTags(t.firebaseId,m),Ap({title:"Tags updated",description:"Note tags have been updated successfully"})}catch(y){console.error("Error updating tags:",y),Ap({title:"Error",description:"Failed to update tags",variant:"destructive"})}},onCreateTag:async m=>{try{return await jn.createTag(m)}catch(y){throw console.error("Error creating tag:",y),Ap({title:"Error",description:"Failed to create tag",variant:"destructive"}),y}}})}),d.jsx(_q,{children:d.jsx(Ne,{variant:"secondary",onClick:()=>c(!1),children:"Done"})})]})})]})]})]}),d.jsx("div",{className:"cursor-pointer",onClick:o,children:d.jsxs(en,{className:`p-4 ${r==="list"?"flex gap-4":"flex flex-col"} h-full`,children:[d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx("h3",{className:"text-lg font-semibold truncate group-hover:text-primary transition-colors",children:t.title||"Untitled"}),a&&d.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground whitespace-nowrap",children:[d.jsx(qN,{className:"h-3 w-3"}),d.jsx("span",{children:s?`${i.length} ${i.length===1?"person":"people"}`:"Shared with you"})]})]}),d.jsx("div",{className:"flex items-center gap-2 mb-2",children:d.jsxs("div",{className:"flex items-center gap-2",children:[t.ownerPhotoURL?d.jsx("img",{src:t.ownerPhotoURL,alt:t.ownerDisplayName,className:"w-6 h-6 rounded-full"}):d.jsx(WN,{className:"w-5 h-5"}),d.jsx("span",{className:"text-sm text-muted-foreground",children:s?"You":t.ownerDisplayName})]})}),r==="list"?d.jsx("div",{className:"text-sm text-muted-foreground line-clamp-1",children:iI(t.content,100).split(`
`)[0]}):d.jsx("div",{className:"text-sm text-muted-foreground space-y-1 line-clamp-4",children:iI(t.content,150).split(`
`).map((m,y)=>m&&d.jsx("div",{className:`
                        ${m.startsWith("#")?"font-bold text-base":""}
                        ${m.startsWith("•")?"pl-4":""}
                        ${m.startsWith("1.")?"pl-4":""}
                        ${m.startsWith("☐")?"pl-4":""}
                      `,children:m},y))}),t.tags&&t.tags.length>0&&d.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:t.tags.map(m=>d.jsx("div",{className:"px-2 py-0.5 rounded-full text-xs",style:{backgroundColor:m.color+"20",color:m.color},children:m.name},m.id))})]}),r==="list"&&d.jsxs("div",{className:"flex flex-col justify-between items-end min-w-[120px] ml-4",children:[d.jsx("div",{className:"text-xs text-muted-foreground"}),t.lastEditedByUserId&&d.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[d.jsxs("span",{children:["Edited ",Zc(t.lastEditedAt||t.updatedAt)]}),t.lastEditedByPhotoURL&&d.jsx("img",{src:t.lastEditedByPhotoURL,alt:t.lastEditedByDisplayName,className:"w-4 h-4 rounded-full"})]})]}),r==="grid"&&d.jsxs("div",{className:"mt-auto pt-3 border-t flex items-center justify-between text-xs text-muted-foreground",children:[d.jsx("div",{className:"flex items-center gap-2",children:d.jsxs("span",{children:["Created ",Zc(t.createdAt)]})}),t.lastEditedByUserId&&d.jsxs("div",{className:"flex items-center gap-2",children:[t.lastEditedByPhotoURL&&d.jsx("img",{src:t.lastEditedByPhotoURL,alt:t.lastEditedByDisplayName,className:"w-5 h-5 rounded-full"}),d.jsxs("span",{children:["Edited ",Zc(t.lastEditedAt||t.updatedAt)]})]})]})]})})]})},bCe=t=>{const e={};return t.forEach(n=>{const r=new Date(n.updatedAt);let o;const s=new Date,i=new Date(s);i.setDate(i.getDate()-1),r.toDateString()===s.toDateString()?o="Today":r.toDateString()===i.toDateString()?o="Yesterday":r.getFullYear()===s.getFullYear()?o=ct(r,"MMMM d"):o=ct(r,"MMMM d, yyyy"),e[o]||(e[o]=[]),e[o].push(n)}),e},xCe=({notes:t,onNoteSelect:e})=>{const[n,r]=g.useState(!1),[o,s]=g.useState("");g.useEffect(()=>{const a=l=>{l.key==="k"&&(l.metaKey||l.ctrlKey)&&(l.preventDefault(),r(c=>!c))};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[]);const i=t.filter(a=>{var c;const l=o.toLowerCase();return a.title.toLowerCase().includes(l)||((c=a.content)==null?void 0:c.toLowerCase().includes(l))});return d.jsxs("div",{className:"w-full max-w-md",children:[d.jsxs(Ne,{variant:"outline",role:"combobox","aria-expanded":n,onClick:()=>r(!0),className:"w-full justify-start text-sm text-muted-foreground",children:[d.jsx($pe,{className:"mr-2 h-4 w-4"}),"Search notes...",d.jsxs("kbd",{className:"pointer-events-none absolute right-1.5 top-1.5 hidden h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium opacity-100 sm:flex",children:[d.jsx("span",{className:"text-xs",children:"⌘"}),"K"]})]}),d.jsxs(c3,{open:n,onOpenChange:r,children:[d.jsx(NE,{placeholder:"Search notes...",value:o,onValueChange:s}),d.jsxs(IE,{children:[d.jsx(RE,{children:"No notes found."}),d.jsx(AE,{heading:"Notes",children:i.map(a=>d.jsxs(PE,{value:a.title,onSelect:()=>{e(a),r(!1),s("")},className:"flex-col items-start gap-1 !py-3",children:[d.jsxs("div",{className:"flex items-center justify-between w-full",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(sm,{className:"h-4 w-4"}),d.jsx("span",{className:"font-medium",children:a.title||"Untitled"})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[d.jsx("span",{children:Zc(a.updatedAt)}),a.isPinned&&d.jsx(Fz,{className:"h-3 w-3 text-primary"})]})]}),d.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground ml-6",children:[a.ownerPhotoURL?d.jsx("img",{src:a.ownerPhotoURL,alt:a.ownerDisplayName,className:"w-4 h-4 rounded-full"}):d.jsx(WN,{className:"w-4 h-4"}),d.jsx("span",{children:a.ownerDisplayName})]}),a.content&&d.jsx("div",{className:"ml-6 text-xs text-muted-foreground line-clamp-2 mt-1",children:iI(a.content,150)}),a.tags&&a.tags.length>0&&d.jsx("div",{className:"flex flex-wrap gap-1 ml-6 mt-1",children:a.tags.map(l=>d.jsx("div",{className:"px-1.5 py-0.5 rounded-full text-[10px]",style:{backgroundColor:l.color+"20",color:l.color},children:l.name},l.id))}),a.lastEditedAt&&a.lastEditedByUserId&&a.lastEditedByPhotoURL&&d.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground ml-6",children:[a.lastEditedByPhotoURL&&d.jsx("img",{src:a.lastEditedByPhotoURL,alt:a.lastEditedByDisplayName,className:"w-4 h-4 rounded-full"}),d.jsxs("span",{children:["Edited ",Zc(a.lastEditedAt)]})]})]},a.firebaseId))})]})]})]})};function _Ce(){const t=yi(),{user:e}=vi(),[n,r]=g.useState([]),[o,s]=g.useState([]),[i,a]=g.useState(""),[l,c]=g.useState(!0),[u,f]=g.useState("my-notes"),[h,p]=g.useState(()=>localStorage.getItem("notes-view")||"grid"),[m,y]=g.useState(!1),[x,b]=g.useState("updated"),[C,E]=g.useState([]),[R,D]=g.useState(),[O,T]=g.useState([]),[I,P]=g.useState([]),[L,$]=g.useState("");g.useEffect(()=>{localStorage.setItem("notes-view",h)},[h]),g.useEffect(()=>{if(!e)return;(async()=>{c(!0);try{const Q=mr(jt,"notes"),H=So(Q,Nr("ownerUserId","==",e.uid)),ue=(await ko(H)).docs.map(Te=>{var xe,ae,Ie;return{...Te.data(),firebaseId:Te.id,createdAt:(xe=Te.data().createdAt)==null?void 0:xe.toDate(),updatedAt:(ae=Te.data().updatedAt)==null?void 0:ae.toDate(),lastEditedAt:(Ie=Te.data().lastEditedAt)==null?void 0:Ie.toDate()}}),W=mr(jt,"shares"),G=So(W,Nr("noteId","in",ue.map(Te=>Te.firebaseId))),ie=So(W,Nr("email","==",e.email)),[ye,he]=await Promise.all([ko(G),ko(ie)]),we=[...ye.docs.map(Te=>{var xe,ae;return{...Te.data(),id:Te.id,createdAt:(xe=Te.data().createdAt)==null?void 0:xe.toDate(),updatedAt:(ae=Te.data().updatedAt)==null?void 0:ae.toDate()}}),...he.docs.map(Te=>{var xe,ae;return{...Te.data(),id:Te.id,createdAt:(xe=Te.data().createdAt)==null?void 0:xe.toDate(),updatedAt:(ae=Te.data().updatedAt)==null?void 0:ae.toDate()}})];s(we);const ve=he.docs.map(Te=>Te.data().noteId);if(ve.length>0){const Te=So(mr(jt,"notes"),Nr(FN(),"in",ve)),ae=(await ko(Te)).docs.map(Re=>{var at,Nt,Ft;return{...Re.data(),firebaseId:Re.id,createdAt:(at=Re.data().createdAt)==null?void 0:at.toDate(),updatedAt:(Nt=Re.data().updatedAt)==null?void 0:Nt.toDate(),lastEditedAt:(Ft=Re.data().lastEditedAt)==null?void 0:Ft.toDate()}}),Ie=[...ue];ae.forEach(Re=>{Ie.some(at=>at.firebaseId===Re.firebaseId)||Ie.push(Re)}),r(Ie)}else r(ue)}catch(Q){console.error("Error loading initial data:",Q)}finally{c(!1)}})()},[e]),g.useEffect(()=>{if(!e)return;const le=So(mr(jt,"notes"),Nr("ownerUserId","==",e.uid)),Q=So(mr(jt,"shares"),Nr("email","==",e.email)),H=HN(Q,async ue=>{const W=ue.docs.map(G=>{var ie,ye;return{...G.data(),id:G.id,createdAt:(ie=G.data().createdAt)==null?void 0:ie.toDate(),updatedAt:(ye=G.data().updatedAt)==null?void 0:ye.toDate()}});if(s(W),W.length>0){const G=W.map(ye=>ye.noteId),ie=So(mr(jt,"notes"),Nr(FN(),"in",G));try{const he=(await ko(ie)).docs.map(we=>{var ve,Te,xe;return{...we.data(),firebaseId:we.id,createdAt:(ve=we.data().createdAt)==null?void 0:ve.toDate(),updatedAt:(Te=we.data().updatedAt)==null?void 0:Te.toDate(),lastEditedAt:(xe=we.data().lastEditedAt)==null?void 0:xe.toDate()}});r(we=>{const Te=[...we.filter(xe=>xe.ownerUserId===e.uid)];return he.forEach(xe=>{Te.some(ae=>ae.firebaseId===xe.firebaseId)||Te.push(xe)}),Te})}catch(ye){console.error("Error loading shared notes:",ye)}}}),Y=HN(le,ue=>{const W=ue.docs.map(G=>{var ie,ye,he;return{...G.data(),firebaseId:G.id,createdAt:(ie=G.data().createdAt)==null?void 0:ie.toDate(),updatedAt:(ye=G.data().updatedAt)==null?void 0:ye.toDate(),lastEditedAt:(he=G.data().lastEditedAt)==null?void 0:he.toDate()}});r(G=>{const ye=[...G.filter(he=>he.ownerUserId!==e.uid)];return W.forEach(he=>{ye.some(we=>we.firebaseId===he.firebaseId)||ye.push(he)}),ye})});return()=>{Y(),H()}},[e]),g.useEffect(()=>{(async()=>{try{const Q=await jn.getTags();P(Q)}catch(Q){console.error("Error loading tags:",Q)}})()},[]);const F=n.filter(le=>le.ownerUserId===(e==null?void 0:e.uid)),V=n.filter(le=>e?o.some(Q=>Q.noteId===le.firebaseId&&Q.email===e.email):!1),be=g.useMemo(()=>{const le=(u==="my-notes"?F:V).filter(Q=>{var H;if(!((H=Q==null?void 0:Q.title)!=null&&H.toLowerCase().includes(i.toLowerCase()))||C.length>0&&!C.every(Y=>{var ue;return(ue=Q==null?void 0:Q.tags)==null?void 0:ue.some(W=>W.id===Y)}))return!1;if(R){const Y=Q.updatedAt;return ct(Y,"yyyy-MM-dd")===ct(R,"yyyy-MM-dd")}return!0}).sort((Q,H)=>{if(Q.isPinned&&!H.isPinned)return-1;if(!H.isPinned&&Q.isPinned)return 1;switch(x){case"title":return Q.title.localeCompare(H.title);case"created":return H.createdAt.getTime()-Q.createdAt.getTime();default:return H.updatedAt.getTime()-Q.updatedAt.getTime()}});return O.length===0?le:le.filter(Q=>Q.tags?O.every(H=>{var Y;return(Y=Q==null?void 0:Q.tags)==null?void 0:Y.some(ue=>ue.id===H.id)}):!1)},[u,F,V,i,C,R,x,O]);function ge(){a(""),E([]),D(void 0),T([]),b("updated")}return d.jsxs("div",{className:"container mx-auto px-4 py-6",children:[d.jsxs("div",{className:"flex flex-col gap-4 mb-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-stretch sm:items-center",children:[d.jsx("div",{className:"relative flex-1 max-w-md",children:d.jsx(xCe,{notes:n,onNoteSelect:le=>t(`/notes/${le.firebaseId}`)})}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("div",{className:"hidden sm:flex gap-2",children:[d.jsx(Ne,{variant:h==="grid"?"default":"outline",size:"icon",onClick:()=>p("grid"),children:d.jsx(Fk,{className:"h-4 w-4"})}),d.jsx(Ne,{variant:h==="list"?"default":"outline",size:"icon",onClick:()=>p("list"),children:d.jsx(Uk,{className:"h-4 w-4"})})]}),d.jsxs("div",{className:"sm:hidden",children:[d.jsx(Ne,{variant:"outline",size:"icon",onClick:()=>y(!m),children:h==="grid"?d.jsx(Fk,{className:"h-4 w-4"}):d.jsx(Uk,{className:"h-4 w-4"})}),m&&d.jsxs("div",{className:"absolute right-4 mt-2 p-2 bg-popover border rounded-md shadow-lg",children:[d.jsxs(Ne,{variant:"ghost",className:"w-full justify-start",onClick:()=>{p("grid"),y(!1)},children:[d.jsx(Fk,{className:"h-4 w-4 mr-2"}),"Grid View"]}),d.jsxs(Ne,{variant:"ghost",className:"w-full justify-start",onClick:()=>{p("list"),y(!1)},children:[d.jsx(Uk,{className:"h-4 w-4 mr-2"}),"List View"]})]})]}),d.jsxs(Ne,{onClick:()=>t("/notes/new"),className:"w-full sm:w-auto",children:[d.jsx(qpe,{className:"mr-2 h-4 w-4"})," New Note"]})]})]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[d.jsxs(am,{value:x,onValueChange:le=>b(le),children:[d.jsx(Rf,{className:"w-[140px]",children:d.jsx(lm,{placeholder:"Sort by"})}),d.jsxs(Af,{children:[d.jsx(Ir,{value:"updated",children:"Last Updated"}),d.jsx(Ir,{value:"created",children:"Created Date"}),d.jsx(Ir,{value:"title",children:"Title"})]})]}),d.jsxs(S1,{children:[d.jsx(T1,{asChild:!0,children:d.jsxs(Ne,{variant:R?"default":"outline",className:"gap-2",children:[d.jsx(kP,{className:"h-4 w-4"}),R?ct(R,"MMM dd, yyyy"):"Filter by date"]})}),d.jsx(dm,{className:"w-auto p-0",align:"start",children:d.jsx(zP,{mode:"single",selected:R,onSelect:D,initialFocus:!0})})]}),d.jsxs(S1,{children:[d.jsx(T1,{asChild:!0,children:d.jsxs(Ne,{variant:"outline",size:"sm",className:"gap-2",children:[d.jsx(oI,{className:"h-4 w-4"}),"Tags",O.length>0&&d.jsx(Jk,{variant:"secondary",className:"ml-1 h-5 px-1",children:O.length})]})}),d.jsxs(dm,{className:"w-64 p-0",align:"start",children:[d.jsx("div",{className:"p-2 border-b",children:d.jsx(Pn,{placeholder:"Search tags...",value:L,onChange:le=>$(le.target.value),className:"h-8 text-sm"})}),d.jsx(Gm,{className:"h-52",children:d.jsx("div",{className:"p-2",children:I.filter(le=>le.name.toLowerCase().includes(L.toLowerCase())).map(le=>d.jsxs("div",{className:"flex items-center gap-2 p-1 hover:bg-muted rounded-sm cursor-pointer",onClick:()=>{T(Q=>Q.some(Y=>Y.id===le.id)?Q.filter(Y=>Y.id!==le.id):[...Q,le])},children:[d.jsx(bq,{checked:O.some(Q=>Q.id===le.id)}),d.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:le.color}}),d.jsx("span",{className:"text-sm",children:le.name})]},le.id))})})]})]})]}),(C.length>0||R)&&d.jsxs("div",{className:"flex flex-wrap gap-2",children:[C.map(le=>d.jsxs(Jk,{variant:"secondary",className:"gap-1",children:[le,d.jsx(Ku,{className:"h-3 w-3 cursor-pointer",onClick:()=>E(Q=>Q.filter(H=>H!==le))})]},le)),R&&d.jsxs(Jk,{variant:"secondary",className:"gap-1",children:[ct(R,"MMM dd, yyyy"),d.jsx(Ku,{className:"h-3 w-3 cursor-pointer",onClick:()=>D(void 0)})]})]})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-6",children:[d.jsx(hE,{value:u,onValueChange:le=>f(le),className:"flex-1",children:d.jsxs(Vv,{className:"grid w-full grid-cols-2 h-9",children:[d.jsxs(ws,{value:"my-notes",className:"text-sm",children:["My Notes (",F.length,")"]}),d.jsxs(ws,{value:"shared",className:"text-sm",children:["Shared (",V.length,")"]})]})}),(C.length>0||R||i||O.length>0||x!=="updated")&&d.jsxs(Ne,{variant:"outline",size:"sm",onClick:ge,className:"h-9 gap-2 whitespace-nowrap",children:[d.jsx(Z1e,{className:"h-4 w-4"}),"Clear Filters"]})]}),Object.entries(bCe(be)).map(([le,Q])=>d.jsxs("div",{className:"mb-8",children:[d.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-4",children:le}),d.jsx("div",{className:h==="grid"?"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 sm:gap-6":"flex flex-col gap-4",children:Q.map(H=>d.jsx(wCe,{note:H,shares:o,user:e,view:h,onClick:()=>t(`/notes/${H.firebaseId}`)},H.firebaseId))})]},le)),be.length===0&&!l&&d.jsxs("div",{className:"text-center text-muted-foreground mt-8",children:[d.jsx(sm,{className:"mx-auto h-12 w-12 mb-4"}),d.jsx("h3",{className:"font-semibold mb-2",children:"No notes found"}),d.jsx("p",{children:i?"Try a different search term":"Create your first note!"})]}),l&&d.jsx("div",{className:"flex justify-center items-center h-40",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})]})}function Fr(t){this.content=t}Fr.prototype={constructor:Fr,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),s=r.content.slice();return o==-1?s.push(n||t,e):(s[o+1]=e,n&&(s[o]=n)),new Fr(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Fr(n)},addToStart:function(t,e){return new Fr([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Fr(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),s=r.find(t);return o.splice(s==-1?o.length:s,0,e,n),new Fr(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Fr.from(t),t.size?new Fr(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Fr.from(t),t.size?new Fr(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Fr.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Fr.from=function(t){if(t instanceof Fr)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Fr(e)};function Wq(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let o=t.child(r),s=e.child(r);if(o==s){n+=o.nodeSize;continue}if(!o.sameMarkup(s))return n;if(o.isText&&o.text!=s.text){for(let i=0;o.text[i]==s.text[i];i++)n++;return n}if(o.content.size||s.content.size){let i=Wq(o.content,s.content,n+1);if(i!=null)return i}n+=o.nodeSize}}function Gq(t,e,n,r){for(let o=t.childCount,s=e.childCount;;){if(o==0||s==0)return o==s?null:{a:n,b:r};let i=t.child(--o),a=e.child(--s),l=i.nodeSize;if(i==a){n-=l,r-=l;continue}if(!i.sameMarkup(a))return{a:n,b:r};if(i.isText&&i.text!=a.text){let c=0,u=Math.min(i.text.length,a.text.length);for(;c<u&&i.text[i.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(i.content.size||a.content.size){let c=Gq(i.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class _e{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,o=0,s){for(let i=0,a=0;a<n;i++){let l=this.content[i],c=a+l.nodeSize;if(c>e&&r(l,o+a,s||null,i)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,o+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,o){let s="",i=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?o?typeof o=="function"?o(a):o:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(i?i=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,o=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)o.push(e.content[s]);return new _e(o,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],o=0;if(n>e)for(let s=0,i=0;i<n;s++){let a=this.content[s],l=i+a.nodeSize;l>e&&((i<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-i),Math.min(a.text.length,n-i)):a=a.cut(Math.max(0,e-i-1),Math.min(a.content.size,n-i-1))),r.push(a),o+=a.nodeSize),i=l}return new _e(r,o)}cutByIndex(e,n){return e==n?_e.empty:e==0&&n==this.content.length?this:new _e(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let o=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return o[e]=n,new _e(o,s)}addToStart(e){return new _e([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new _e(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let o=this.content[n];e(o,r,n),r+=o.nodeSize}}findDiffStart(e,n=0){return Wq(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return Gq(this,e,n,r)}findIndex(e,n=-1){if(e==0)return c0(0,e);if(e==this.size)return c0(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,o=0;;r++){let s=this.child(r),i=o+s.nodeSize;if(i>=e)return i==e||n>0?c0(r+1,i):c0(r,o);o=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return _e.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new _e(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return _e.empty;let n,r=0;for(let o=0;o<e.length;o++){let s=e[o];r+=s.nodeSize,o&&s.isText&&e[o-1].sameMarkup(s)?(n||(n=e.slice(0,o)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new _e(n||e,r)}static from(e){if(!e)return _e.empty;if(e instanceof _e)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new _e([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}_e.empty=new _e([],0);const aS={index:0,offset:0};function c0(t,e){return aS.index=t,aS.offset=e,aS}function Dx(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Dx(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Dx(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let fn=class _I{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let o=0;o<e.length;o++){let s=e[o];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,o));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,o)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Dx(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let o=r.create(n.attrs);return r.checkAttrs(o.attrs),o}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return _I.none;if(e instanceof _I)return[e];let n=e.slice();return n.sort((r,o)=>r.type.rank-o.type.rank),n}};fn.none=[];class Ox extends Error{}class je{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=Kq(this.content,e+this.openStart,n);return r&&new je(r,this.openStart,this.openEnd)}removeBetween(e,n){return new je(qq(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return je.empty;let r=n.openStart||0,o=n.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new je(_e.fromJSON(e,n.content),r,o)}static maxOpen(e,n=!0){let r=0,o=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)o++;return new je(e,r,o)}}je.empty=new je(_e.empty,0,0);function qq(t,e,n){let{index:r,offset:o}=t.findIndex(e),s=t.maybeChild(r),{index:i,offset:a}=t.findIndex(n);if(o==e||s.isText){if(a!=n&&!t.child(i).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=i)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(qq(s.content,e-o-1,n-o-1)))}function Kq(t,e,n,r){let{index:o,offset:s}=t.findIndex(e),i=t.maybeChild(o);if(s==e||i.isText)return t.cut(0,e).append(n).append(t.cut(e));let a=Kq(i.content,e-s-1,n);return a&&t.replaceChild(o,i.copy(a))}function CCe(t,e,n){if(n.openStart>t.depth)throw new Ox("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Ox("Inconsistent open depths");return Yq(t,e,n,0)}function Yq(t,e,n,r){let o=t.index(r),s=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){let i=Yq(t,e,n,r+1);return s.copy(s.content.replaceChild(o,i))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let i=t.parent,a=i.content;return df(i,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:i,end:a}=ECe(n,t);return df(s,Xq(t,i,a,e,r))}else return df(s,Lx(t,e,r))}function Qq(t,e){if(!e.type.compatibleContent(t.type))throw new Ox("Cannot join "+e.type.name+" onto "+t.type.name)}function CI(t,e,n){let r=t.node(n);return Qq(r,e.node(n)),r}function uf(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Ly(t,e,n,r){let o=(e||t).node(n),s=0,i=e?e.index(n):o.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(uf(t.nodeAfter,r),s++));for(let a=s;a<i;a++)uf(o.child(a),r);e&&e.depth==n&&e.textOffset&&uf(e.nodeBefore,r)}function df(t,e){return t.type.checkContent(e),t.copy(e)}function Xq(t,e,n,r,o){let s=t.depth>o&&CI(t,e,o+1),i=r.depth>o&&CI(n,r,o+1),a=[];return Ly(null,t,o,a),s&&i&&e.index(o)==n.index(o)?(Qq(s,i),uf(df(s,Xq(t,e,n,r,o+1)),a)):(s&&uf(df(s,Lx(t,e,o+1)),a),Ly(e,n,o,a),i&&uf(df(i,Lx(n,r,o+1)),a)),Ly(r,null,o,a),new _e(a)}function Lx(t,e,n){let r=[];if(Ly(null,t,n,r),t.depth>n){let o=CI(t,e,n+1);uf(df(o,Lx(t,e,n+1)),r)}return Ly(e,null,n,r),new _e(r)}function ECe(t,e){let n=e.depth-t.openStart,o=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)o=e.node(s).copy(_e.from(o));return{start:o.resolveNoCache(t.openStart+n),end:o.resolveNoCache(o.content.size-t.openEnd-n)}}class R1{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(n);return r?e.child(n).cut(r):o}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],o=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)o+=r.child(s).nodeSize;return o}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return fn.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),o=e.maybeChild(n);if(!r){let a=r;r=o,o=a}let s=r.marks;for(var i=0;i<s.length;i++)s[i].type.spec.inclusive===!1&&(!o||!s[i].isInSet(o.marks))&&(s=s[i--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,o=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!o||!r[s].isInSet(o.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new jx(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],o=0,s=n;for(let i=e;;){let{index:a,offset:l}=i.content.findIndex(s),c=s-l;if(r.push(i,a,o+l),!c||(i=i.child(a),i.isText))break;s=c-1,o+=l+1}return new R1(n,r,s)}static resolveCached(e,n){let r=g8.get(e);if(r)for(let s=0;s<r.elts.length;s++){let i=r.elts[s];if(i.pos==n)return i}else g8.set(e,r=new kCe);let o=r.elts[r.i]=R1.resolve(e,n);return r.i=(r.i+1)%SCe,o}}class kCe{constructor(){this.elts=[],this.i=0}}const SCe=12,g8=new WeakMap;class jx{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const TCe=Object.create(null);let oc=class EI{constructor(e,n,r,o=fn.none){this.type=e,this.attrs=n,this.marks=o,this.content=r||_e.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,o=0){this.content.nodesBetween(e,n,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,o){return this.content.textBetween(e,n,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Dx(this.attrs,n||e.defaultAttrs||TCe)&&fn.sameSet(this.marks,r||fn.none)}copy(e=null){return e==this.content?this:new EI(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new EI(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return je.empty;let o=this.resolve(e),s=this.resolve(n),i=r?0:o.sharedDepth(n),a=o.start(i),c=o.node(i).content.cut(o.pos-a,s.pos-a);return new je(c,o.depth-i,s.depth-i)}replace(e,n,r){return CCe(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:o}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(o==e||n.isText)return n;e-=o+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}resolve(e){return R1.resolveCached(this,e)}resolveNoCache(e){return R1.resolve(this,e)}rangeHasMark(e,n,r){let o=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Jq(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=_e.empty,o=0,s=r.childCount){let i=this.contentMatchAt(e).matchFragment(r,o,s),a=i&&i.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=o;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,o){if(o&&!this.type.allowsMarks(o))return!1;let s=this.contentMatchAt(e).matchType(r),i=s&&s.matchFragment(this.content,n);return i?i.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=fn.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!fn.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let o=_e.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,o,r);return s.type.checkAttrs(s.attrs),s}};oc.prototype.text=void 0;class Vx extends oc{constructor(e,n,r,o){if(super(e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Jq(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Vx(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Vx(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Jq(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Lf{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new NCe(e,n);if(r.next==null)return Lf.empty;let o=Zq(r);r.next&&r.err("Unexpected trailing text");let s=OCe(DCe(o));return LCe(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let o=this;for(let s=n;o&&s<r;s++)o=o.matchType(e.child(s).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let o=[this];function s(i,a){let l=i.matchFragment(e,r);if(l&&(!n||l.validEnd))return _e.from(a.map(c=>c.createAndFill()));for(let c=0;c<i.next.length;c++){let{type:u,next:f}=i.next[c];if(!(u.isText||u.hasRequiredAttrs())&&o.indexOf(f)==-1){o.push(f);let h=s(f,a.concat(u));if(h)return h}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),s=o.match;if(s.matchType(e)){let i=[];for(let a=o;a.type;a=a.via)i.push(a.type);return i.reverse()}for(let i=0;i<s.next.length;i++){let{type:a,next:l}=s.next[i];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!o.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:o}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&n(r.next[o].next)}return n(this),e.map((r,o)=>{let s=o+(r.validEnd?"*":" ")+" ";for(let i=0;i<r.next.length;i++)s+=(i?", ":"")+r.next[i].type.name+"->"+e.indexOf(r.next[i].next);return s}).join(`
`)}}Lf.empty=new Lf(!0);class NCe{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Zq(t){let e=[];do e.push(ICe(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function ICe(t){let e=[];do e.push(RCe(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function RCe(t){let e=MCe(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=ACe(t,e);else break;return e}function y8(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function ACe(t,e){let n=y8(t),r=n;return t.eat(",")&&(t.next!="}"?r=y8(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function PCe(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let o=[];for(let s in n){let i=n[s];i.isInGroup(e)&&o.push(i)}return o.length==0&&t.err("No node type or group '"+e+"' found"),o}function MCe(t){if(t.eat("(")){let e=Zq(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=PCe(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function DCe(t){let e=[[]];return o(s(t,0),n()),e;function n(){return e.push([])-1}function r(i,a,l){let c={term:l,to:a};return e[i].push(c),c}function o(i,a){i.forEach(l=>l.to=a)}function s(i,a){if(i.type=="choice")return i.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(i.type=="seq")for(let l=0;;l++){let c=s(i.exprs[l],a);if(l==i.exprs.length-1)return c;o(c,a=n())}else if(i.type=="star"){let l=n();return r(a,l),o(s(i.expr,l),l),[r(l)]}else if(i.type=="plus"){let l=n();return o(s(i.expr,a),l),o(s(i.expr,l),l),[r(l)]}else{if(i.type=="opt")return[r(a)].concat(s(i.expr,a));if(i.type=="range"){let l=a;for(let c=0;c<i.min;c++){let u=n();o(s(i.expr,l),u),l=u}if(i.max==-1)o(s(i.expr,l),l);else for(let c=i.min;c<i.max;c++){let u=n();r(l,u),o(s(i.expr,l),u),l=u}return[r(l)]}else{if(i.type=="name")return[r(a,void 0,i.value)];throw new Error("Unknown expr type")}}}}function eK(t,e){return e-t}function v8(t,e){let n=[];return r(e),n.sort(eK);function r(o){let s=t[o];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(o);for(let i=0;i<s.length;i++){let{term:a,to:l}=s[i];!a&&n.indexOf(l)==-1&&r(l)}}}function OCe(t){let e=Object.create(null);return n(v8(t,0));function n(r){let o=[];r.forEach(i=>{t[i].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<o.length;u++)o[u][0]==a&&(c=o[u][1]);v8(t,l).forEach(u=>{c||o.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new Lf(r.indexOf(t.length-1)>-1);for(let i=0;i<o.length;i++){let a=o[i][1].sort(eK);s.next.push({type:o[i][0],next:e[a.join(",")]||n(a)})}return s}}function LCe(t,e){for(let n=0,r=[t];n<r.length;n++){let o=r[n],s=!o.validEnd,i=[];for(let a=0;a<o.next.length;a++){let{type:l,next:c}=o.next[a];i.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function tK(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function nK(t,e){let n=Object.create(null);for(let r in t){let o=e&&e[r];if(o===void 0){let s=t[r];if(s.hasDefault)o=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=o}return n}function rK(t,e,n,r){for(let o in e)if(!(o in t))throw new RangeError(`Unsupported attribute ${o} for ${n} of type ${o}`);for(let o in t){let s=t[o];s.validate&&s.validate(e[o])}}function oK(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new VCe(t,r,e[r]);return n}let w8=class sK{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=oK(e,r.attrs),this.defaultAttrs=tK(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Lf.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:nK(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new oc(this,this.computeAttrs(e),_e.from(n),fn.setFrom(r))}createChecked(e=null,n,r){return n=_e.from(n),this.checkContent(n),new oc(this,this.computeAttrs(e),n,fn.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=_e.from(n),n.size){let i=this.contentMatch.fillBefore(n);if(!i)return null;n=i.append(n)}let o=this.contentMatch.matchFragment(n),s=o&&o.fillBefore(_e.empty,!0);return s?new oc(this,e,n.append(s),fn.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){rK(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:fn.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,i)=>r[s]=new sK(s,n,i));let o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function jCe(t,e,n){let r=n.split("|");return o=>{let s=o===null?"null":typeof o;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class VCe{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?jCe(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class ME{constructor(e,n,r,o){this.name=e,this.rank=n,this.schema=r,this.spec=o,this.attrs=oK(e,o.attrs),this.excluded=null;let s=tK(this.attrs);this.instance=s?new fn(this,s):null}create(e=null){return!e&&this.instance?this.instance:new fn(this,nK(this.attrs,e))}static compile(e,n){let r=Object.create(null),o=0;return e.forEach((s,i)=>r[s]=new ME(s,o++,n,i)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){rK(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}let iK=class{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let o in e)n[o]=e[o];n.nodes=Fr.from(e.nodes),n.marks=Fr.from(e.marks||{}),this.nodes=w8.compile(this.spec.nodes,this),this.marks=ME.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let s=this.nodes[o],i=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[i]||(r[i]=Lf.parse(i,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?b8(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let o in this.marks){let s=this.marks[o],i=s.spec.excludes;s.excluded=i==null?[s]:i==""?[]:b8(this,i.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof w8){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,o)}text(e,n){let r=this.nodes.text;return new Vx(r,r.defaultAttrs,e,fn.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return oc.fromJSON(this,e)}markFromJSON(e){return fn.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}};function b8(t,e){let n=[];for(let r=0;r<e.length;r++){let o=e[r],s=t.marks[o],i=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(o=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(i=l)}if(!i)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function $Ce(t){return t.tag!=null}function BCe(t){return t.style!=null}let ff=class kI{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(o=>{if($Ce(o))this.tags.push(o);else if(BCe(o)){let s=/[^=]*/.exec(o.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let s=e.nodes[o.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new _8(this,n,!1);return r.addAll(e,fn.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new _8(this,n,!0);return r.addAll(e,fn.none,n.from,n.to),je.maxOpen(r.finish())}matchTag(e,n,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let s=this.tags[o];if(HCe(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let i=s.getAttrs(e);if(i===!1)continue;s.attrs=i||void 0}return s}}}matchStyle(e,n,r,o){for(let s=o?this.styles.indexOf(o)+1:0;s<this.styles.length;s++){let i=this.styles[s],a=i.style;if(!(a.indexOf(e)!=0||i.context&&!r.matchesContext(i.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(i.getAttrs){let l=i.getAttrs(n);if(l===!1)continue;i.attrs=l||void 0}return i}}}static schemaRules(e){let n=[];function r(o){let s=o.priority==null?50:o.priority,i=0;for(;i<n.length;i++){let a=n[i];if((a.priority==null?50:a.priority)<s)break}n.splice(i,0,o)}for(let o in e.marks){let s=e.marks[o].spec.parseDOM;s&&s.forEach(i=>{r(i=C8(i)),i.mark||i.ignore||i.clearMark||(i.mark=o)})}for(let o in e.nodes){let s=e.nodes[o].spec.parseDOM;s&&s.forEach(i=>{r(i=C8(i)),i.node||i.ignore||i.mark||(i.node=o)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new kI(e,kI.schemaRules(e)))}};const aK={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},FCe={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},lK={ol:!0,ul:!0},A1=1,SI=2,pb=4;function x8(t,e,n){return e!=null?(e?A1:0)|(e==="full"?SI:0):t&&t.whitespace=="pre"?A1|SI:n&-5}class u0{constructor(e,n,r,o,s,i){this.type=e,this.attrs=n,this.marks=r,this.solid=o,this.options=i,this.content=[],this.activeMarks=fn.none,this.match=s||(i&pb?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(_e.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&A1)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-o[0].length))}}let n=_e.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(_e.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!aK.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class _8{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let o=n.topNode,s,i=x8(null,n.preserveWhitespace,0)|(r?pb:0);o?s=new u0(o.type,o.attrs,fn.none,!0,n.topMatch||o.type.contentMatch,i):r?s=new u0(null,null,fn.none,!0,null,i):s=new u0(e.schema.topNodeType,null,fn.none,!0,null,i),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,o=this.top,s=o.options&SI?"full":this.localPreserveWS||(o.options&A1)>0;if(s==="full"||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let i=o.content[o.content.length-1],a=e.previousSibling;(!i||a&&a.nodeName=="BR"||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let o=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let i=e.nodeName.toLowerCase(),a;lK.hasOwnProperty(i)&&this.parser.normalizeLists&&UCe(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:FCe.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(aK.hasOwnProperty(i))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let f=l&&l.skip?n:this.readStyles(e,n);f&&this.addAll(e,f),c&&this.sync(s),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=o}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let s=this.parser.matchedStyles[o],i=r.getPropertyValue(s);if(i)for(let a=void 0;;){let l=this.parser.matchStyle(s,i,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,o){let s,i;if(n.node)if(i=this.parser.schema.nodes[n.node],i.isLeaf)this.insertNode(i.create(n.attrs),r)||this.leafFallback(e,r);else{let l=this.enter(i,n.attrs||null,r,n.preserveWhitespace);l&&(s=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(i&&i.isLeaf)this.findInside(e);else if(o)this.addElement(e,r,o);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,n,r,o){let s=r||0;for(let i=r?e.childNodes[r]:e.firstChild,a=o==null?null:e.childNodes[o];i!=a;i=i.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(i,n);this.findAtPoint(e,s)}findPlace(e,n){let r,o;for(let s=this.open;s>=0;s--){let i=this.nodes[s],a=i.findWrapping(e);if(a&&(!r||r.length>a.length)&&(r=a,o=i,!a.length)||i.solid)break}if(!r)return null;this.sync(o);for(let s=0;s<r.length;s++)n=this.enterInner(r[s],null,n,!1);return n}insertNode(e,n){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let r=this.findPlace(e,n);if(r){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let s=fn.none;for(let i of r.concat(e.marks))(o.type?o.type.allowsMarkType(i.type):E8(i.type,e.type))&&(s=i.addToSet(s));return o.content.push(e.mark(s)),!0}return!1}enter(e,n,r,o){let s=this.findPlace(e.create(n),r);return s&&(s=this.enterInner(e,n,r,!0,o)),s}enterInner(e,n,r,o=!1,s){this.closeExtra();let i=this.top;i.match=i.match&&i.match.matchType(e);let a=x8(e,s,i.options);i.options&pb&&i.content.length==0&&(a|=pb);let l=fn.none;return r=r.filter(c=>(i.type?i.type.allowsMarkType(c.type):E8(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new u0(e,n,l,o,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=A1)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&n.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(o?0:1),i=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(i(a-1,l))return!0;return!1}else{let u=l>0||l==0&&o?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return i(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function UCe(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&lK.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function HCe(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function C8(t){let e={};for(let n in t)e[n]=t[n];return e}function E8(t,e){let n=e.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(t))continue;let s=[],i=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&i(u))return!0}};if(i(o.contentMatch))return!0}}class Nc{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=lS(n).createDocumentFragment());let o=r,s=[];return e.forEach(i=>{if(s.length||i.marks.length){let a=0,l=0;for(;a<s.length&&l<i.marks.length;){let c=i.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)o=s.pop()[1];for(;l<i.marks.length;){let c=i.marks[l++],u=this.serializeMark(c,i.isInline,n);u&&(s.push([c,o]),o.appendChild(u.dom),o=u.contentDOM||u.dom)}}o.appendChild(this.serializeNodeInner(i,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:o}=mb(lS(n),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,o)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let o=e.marks.length-1;o>=0;o--){let s=this.serializeMark(e.marks[o],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let o=this.marks[e.type.name];return o&&mb(lS(r),o(e,n),null,e.attrs)}static renderSpec(e,n,r=null,o){return mb(e,n,r,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Nc(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=k8(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return k8(e.marks)}}function k8(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function lS(t){return t.document||window.document}const S8=new WeakMap;function zCe(t){let e=S8.get(t);return e===void 0&&S8.set(t,e=WCe(t)),e}function WCe(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let o=0;o<r.length;o++)n(r[o]);else for(let o in r)n(r[o])}return n(t),e}function mb(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let o=e[0],s;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=zCe(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let i=o.indexOf(" ");i>0&&(n=o.slice(0,i),o=o.slice(i+1));let a,l=n?t.createElementNS(n,o):t.createElement(o),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let f in c)if(c[f]!=null){let h=f.indexOf(" ");h>0?l.setAttributeNS(f.slice(0,h),f.slice(h+1),c[f]):l.setAttribute(f,c[f])}}for(let f=u;f<e.length;f++){let h=e[f];if(h===0){if(f<e.length-1||f>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:p,contentDOM:m}=mb(t,h,n,r);if(l.appendChild(p),m){if(a)throw new RangeError("Multiple content holes");a=m}}}return{dom:l,contentDOM:a}}const cK=65535,uK=Math.pow(2,16);function GCe(t,e){return t+e*uK}function T8(t){return t&cK}function qCe(t){return(t-(t&cK))/uK}const dK=1,fK=2,gb=4,hK=8;class TI{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&hK)>0}get deletedBefore(){return(this.delInfo&(dK|gb))>0}get deletedAfter(){return(this.delInfo&(fK|gb))>0}get deletedAcross(){return(this.delInfo&gb)>0}}class ms{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&ms.empty)return ms.empty}recover(e){let n=0,r=T8(e);if(!this.inverted)for(let o=0;o<r;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+n+qCe(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let o=0,s=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?o:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+i],f=l+c;if(e<=f){let h=c?e==l?-1:e==f?1:n:n,p=l+o+(h<0?0:u);if(r)return p;let m=e==(n<0?l:f)?null:GCe(a/3,e-l),y=e==l?fK:e==f?dK:gb;return(n<0?e!=l:e!=f)&&(y|=hK),new TI(p,y,m)}o+=u-c}return r?e+o:new TI(e+o,0,null)}touches(e,n){let r=0,o=T8(n),s=this.inverted?2:1,i=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==o*3)return!0;r+=this.ranges[a+i]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,s=0;o<this.ranges.length;o+=3){let i=this.ranges[o],a=i-(this.inverted?s:0),l=i+(this.inverted?0:s),c=this.ranges[o+n],u=this.ranges[o+r];e(a,a+c,l,l+u),s+=u-c}}invert(){return new ms(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?ms.empty:new ms(e<0?[0,-e,0]:[0,0,e])}}ms.empty=new ms([]);class Mp{constructor(e=[],n,r=0,o=e.length){this.maps=e,this.mirror=n,this.from=r,this.to=o}slice(e=0,n=this.maps.length){return new Mp(this.maps,this.mirror,e,n)}copy(){return new Mp(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,r=this.maps.length;n<e.maps.length;n++){let o=e.getMirror(n);this.appendMap(e.maps[n],o!=null&&o<n?r+o:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this.maps.length+e.maps.length;n>=0;n--){let o=e.getMirror(n);this.appendMap(e.maps[n].invert(),o!=null&&o>n?r-o-1:void 0)}}invert(){let e=new Mp;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this.maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let o=0;for(let s=this.from;s<this.to;s++){let i=this.maps[s],a=i.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this.maps[l].recover(a.recover);continue}}o|=a.delInfo,e=a.pos}return r?e:new TI(e,o,null)}}const cS=Object.create(null);class bo{getMap(){return ms.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=cS[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in cS)throw new RangeError("Duplicate use of step JSON ID "+e);return cS[e]=n,n.prototype.jsonID=e,n}}class cr{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new cr(e,null)}static fail(e){return new cr(null,e)}static fromReplace(e,n,r,o){try{return cr.ok(e.replace(n,r,o))}catch(s){if(s instanceof Ox)return cr.fail(s.message);throw s}}}function u3(t,e,n){let r=[];for(let o=0;o<t.childCount;o++){let s=t.child(o);s.content.size&&(s=s.copy(u3(s.content,e,s))),s.isInline&&(s=e(s,n,o)),r.push(s)}return _e.fromArray(r)}class pu extends bo{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),s=new je(u3(n.content,(i,a)=>!i.isAtom||!a.type.allowsMarkType(this.mark.type)?i:i.mark(this.mark.addToSet(i.marks)),o),n.openStart,n.openEnd);return cr.fromReplace(e,this.from,this.to,s)}invert(){return new Va(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new pu(n.pos,r.pos,this.mark)}merge(e){return e instanceof pu&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new pu(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new pu(n.from,n.to,e.markFromJSON(n.mark))}}bo.jsonID("addMark",pu);class Va extends bo{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new je(u3(n.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),n.openStart,n.openEnd);return cr.fromReplace(e,this.from,this.to,r)}invert(){return new pu(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Va(n.pos,r.pos,this.mark)}merge(e){return e instanceof Va&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Va(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Va(n.from,n.to,e.markFromJSON(n.mark))}}bo.jsonID("removeMark",Va);class mu extends bo{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return cr.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return cr.fromReplace(e,this.pos,this.pos+1,new je(_e.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new mu(this.pos,n.marks[o]);return new mu(this.pos,this.mark)}}return new hm(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new mu(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new mu(n.pos,e.markFromJSON(n.mark))}}bo.jsonID("addNodeMark",mu);class hm extends bo{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return cr.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return cr.fromReplace(e,this.pos,this.pos+1,new je(_e.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new mu(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new hm(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new hm(n.pos,e.markFromJSON(n.mark))}}bo.jsonID("removeNodeMark",hm);class vr extends bo{constructor(e,n,r,o=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=o}apply(e){return this.structure&&NI(e,this.from,this.to)?cr.fail("Structure replace would overwrite content"):cr.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new ms([this.from,this.to-this.from,this.slice.size])}invert(e){return new vr(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new vr(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof vr)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?je.empty:new je(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new vr(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?je.empty:new je(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new vr(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new vr(n.from,n.to,je.fromJSON(e,n.slice),!!n.structure)}}bo.jsonID("replace",vr);class er extends bo{constructor(e,n,r,o,s,i,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=s,this.insert=i,this.structure=a}apply(e){if(this.structure&&(NI(e,this.from,this.gapFrom)||NI(e,this.gapTo,this.to)))return cr.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return cr.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?cr.fromReplace(e,this.from,this.to,r):cr.fail("Content does not fit in gap")}getMap(){return new ms([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new er(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||s>r.pos?null:new er(n.pos,r.pos,o,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new er(n.from,n.to,n.gapFrom,n.gapTo,je.fromJSON(e,n.slice),n.insert,!!n.structure)}}bo.jsonID("replaceAround",er);function NI(t,e,n){let r=t.resolve(e),o=n-e,s=r.depth;for(;o>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,o--;if(o>0){let i=r.node(s).maybeChild(r.indexAfter(s));for(;o>0;){if(!i||i.isLeaf)return!0;i=i.firstChild,o--}}return!1}function KCe(t,e,n,r){let o=[],s=[],i,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let f=l.marks;if(!r.isInSet(f)&&u.type.allowsMarkType(r.type)){let h=Math.max(c,e),p=Math.min(c+l.nodeSize,n),m=r.addToSet(f);for(let y=0;y<f.length;y++)f[y].isInSet(m)||(i&&i.to==h&&i.mark.eq(f[y])?i.to=p:o.push(i=new Va(h,p,f[y])));a&&a.to==h?a.to=p:s.push(a=new pu(h,p,r))}}),o.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function YCe(t,e,n,r){let o=[],s=0;t.doc.nodesBetween(e,n,(i,a)=>{if(!i.isInline)return;s++;let l=null;if(r instanceof ME){let c=i.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(i.marks)&&(l=[r]):l=i.marks;if(l&&l.length){let c=Math.min(a+i.nodeSize,n);for(let u=0;u<l.length;u++){let f=l[u],h;for(let p=0;p<o.length;p++){let m=o[p];m.step==s-1&&f.eq(o[p].style)&&(h=m)}h?(h.to=c,h.step=s):o.push({style:f,from:Math.max(a,e),to:c,step:s})}}}),o.forEach(i=>t.step(new Va(i.from,i.to,i.style)))}function d3(t,e,n,r=n.contentMatch,o=!0){let s=t.doc.nodeAt(e),i=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),u=a+c.nodeSize,f=r.matchType(c.type);if(!f)i.push(new vr(a,u,je.empty));else{r=f;for(let h=0;h<c.marks.length;h++)n.allowsMarkType(c.marks[h].type)||t.step(new Va(a,u,c.marks[h]));if(o&&c.isText&&n.whitespace!="pre"){let h,p=/\r?\n|\r/g,m;for(;h=p.exec(c.text);)m||(m=new je(_e.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),i.push(new vr(a+h.index,a+h.index+h[0].length,m))}}a=u}if(!r.validEnd){let l=r.fillBefore(_e.empty,!0);t.replace(a,a,new je(l,0,0))}for(let l=i.length-1;l>=0;l--)t.step(i[l])}function QCe(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function qm(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let o=t.$from.node(r),s=t.$from.index(r),i=t.$to.indexAfter(r);if(r<t.depth&&o.canReplace(s,i,n))return r;if(r==0||o.type.spec.isolating||!QCe(o,s,i))break}return null}function XCe(t,e,n){let{$from:r,$to:o,depth:s}=e,i=r.before(s+1),a=o.after(s+1),l=i,c=a,u=_e.empty,f=0;for(let m=s,y=!1;m>n;m--)y||r.index(m)>0?(y=!0,u=_e.from(r.node(m).copy(u)),f++):l--;let h=_e.empty,p=0;for(let m=s,y=!1;m>n;m--)y||o.after(m+1)<o.end(m)?(y=!0,h=_e.from(o.node(m).copy(h)),p++):c++;t.step(new er(l,c,i,a,new je(u.append(h),f,p),u.size-f,!0))}function pK(t,e,n=null,r=t){let o=JCe(t,e),s=o&&ZCe(r,e);return s?o.map(N8).concat({type:e,attrs:n}).concat(s.map(N8)):null}function N8(t){return{type:t,attrs:null}}function JCe(t,e){let{parent:n,startIndex:r,endIndex:o}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let i=s.length?s[0]:e;return n.canReplaceWith(r,o,i)?s:null}function ZCe(t,e){let{parent:n,startIndex:r,endIndex:o}=t,s=n.child(r),i=e.contentMatch.findWrapping(s.type);if(!i)return null;let l=(i.length?i[i.length-1]:e).contentMatch;for(let c=r;l&&c<o;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:i}function eEe(t,e,n){let r=_e.empty;for(let i=n.length-1;i>=0;i--){if(r.size){let a=n[i].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=_e.from(n[i].type.create(n[i].attrs,r))}let o=e.start,s=e.end;t.step(new er(o,s,o,s,new je(r,0,0),n.length,!0))}function tEe(t,e,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(i,a)=>{let l=typeof o=="function"?o(i):o;if(i.isTextblock&&!i.hasMarkup(r,l)&&nEe(t.doc,t.mapping.slice(s).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let p=r.whitespace=="pre",m=!!r.contentMatch.matchType(r.schema.linebreakReplacement);p&&!m?c=!1:!p&&m&&(c=!0)}c===!1&&gK(t,i,a,s),d3(t,t.mapping.slice(s).map(a,1),r,void 0,c===null);let u=t.mapping.slice(s),f=u.map(a,1),h=u.map(a+i.nodeSize,1);return t.step(new er(f,h,f+1,h-1,new je(_e.from(r.create(l,null,i.marks)),0,0),1,!0)),c===!0&&mK(t,i,a,s),!1}})}function mK(t,e,n,r){e.forEach((o,s)=>{if(o.isText){let i,a=/\r?\n|\r/g;for(;i=a.exec(o.text);){let l=t.mapping.slice(r).map(n+1+s+i.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function gK(t,e,n,r){e.forEach((o,s)=>{if(o.type==o.type.schema.linebreakReplacement){let i=t.mapping.slice(r).map(n+1+s);t.replaceWith(i,i+1,e.type.schema.text(`
`))}})}function nEe(t,e,n){let r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function rEe(t,e,n,r,o){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let i=n.create(r,null,o||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,i);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new er(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new je(_e.from(i),0,0),1,!0))}function Dp(t,e,n=1,r){let o=t.resolve(e),s=o.depth-n,i=r&&r[r.length-1]||o.parent;if(s<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!i.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,u=n-2;c>s;c--,u--){let f=o.node(c),h=o.index(c);if(f.type.spec.isolating)return!1;let p=f.content.cutByIndex(h,f.childCount),m=r&&r[u+1];m&&(p=p.replaceChild(0,m.type.create(m.attrs)));let y=r&&r[u]||f;if(!f.canReplace(h+1,f.childCount)||!y.type.validContent(p))return!1}let a=o.indexAfter(s),l=r&&r[0];return o.node(s).canReplaceWith(a,a,l?l.type:o.node(s+1).type)}function oEe(t,e,n=1,r){let o=t.doc.resolve(e),s=_e.empty,i=_e.empty;for(let a=o.depth,l=o.depth-n,c=n-1;a>l;a--,c--){s=_e.from(o.node(a).copy(s));let u=r&&r[c];i=_e.from(u?u.type.create(u.attrs,i):o.node(a).copy(i))}t.step(new vr(e,e,new je(s.append(i),n,n),!0))}function eh(t,e){let n=t.resolve(e),r=n.index();return yK(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function sEe(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let o=0;o<e.childCount;o++){let s=e.child(o),i=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(i),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function yK(t,e){return!!(t&&e&&!t.isLeaf&&sEe(t,e))}function DE(t,e,n=-1){let r=t.resolve(e);for(let o=r.depth;;o--){let s,i,a=r.index(o);if(o==r.depth?(s=r.nodeBefore,i=r.nodeAfter):n>0?(s=r.node(o+1),a++,i=r.node(o).maybeChild(a)):(s=r.node(o).maybeChild(a-1),i=r.node(o+1)),s&&!s.isTextblock&&yK(s,i)&&r.node(o).canReplace(a,a+1))return e;if(o==0)break;e=n<0?r.before(o):r.after(o)}}function iEe(t,e,n){let r=null,{linebreakReplacement:o}=t.doc.type.schema,s=t.doc.resolve(e-n),i=s.node().type;if(o&&i.inlineContent){let u=i.whitespace=="pre",f=!!i.contentMatch.matchType(o);u&&!f?r=!1:!u&&f&&(r=!0)}let a=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);gK(t,u.node(),u.before(),a)}i.inlineContent&&d3(t,e+n-1,i,s.node().contentMatchAt(s.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new vr(c,l.map(e+n,-1),je.empty,!0)),r===!0){let u=t.doc.resolve(c);mK(t,u.node(),u.before(),t.steps.length)}return t}function aEe(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let s=r.index(o);if(r.node(o).canReplaceWith(s,s,n))return r.before(o+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let s=r.indexAfter(o);if(r.node(o).canReplaceWith(s,s,n))return r.after(o+1);if(s<r.node(o).childCount)return null}return null}function vK(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let o=n.content;for(let s=0;s<n.openStart;s++)o=o.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let i=r.depth;i>=0;i--){let a=i==r.depth?0:r.pos<=(r.start(i+1)+r.end(i+1))/2?-1:1,l=r.index(i)+(a>0?1:0),c=r.node(i),u=!1;if(s==1)u=c.canReplace(l,l,o);else{let f=c.contentMatchAt(l).findWrapping(o.firstChild.type);u=f&&c.canReplaceWith(l,l,f[0])}if(u)return a==0?r.pos:a<0?r.before(i+1):r.after(i+1)}return null}function OE(t,e,n=e,r=je.empty){if(e==n&&!r.size)return null;let o=t.resolve(e),s=t.resolve(n);return wK(o,s,r)?new vr(e,n,r):new lEe(o,s,r).fit()}function wK(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class lEe{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=_e.empty;for(let o=0;o<=e.depth;o++){let s=e.node(o);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=_e.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let s=this.placed,i=r.depth,a=o.depth;for(;i&&a&&s.childCount==1;)s=s.firstChild.content,i--,a--;let l=new je(s,i,a);return e>-1?new er(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new vr(r.pos,o.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(o=0),s.type.spec.isolating&&o<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let o,s=null;r?(s=uS(this.unplaced.content,r-1).firstChild,o=s.content):o=this.unplaced.content;let i=o.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,f=null;if(n==1&&(i?c.matchType(i.type)||(f=c.fillBefore(_e.from(i),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:f};if(n==2&&i&&(u=c.findWrapping(i.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=uS(e,n);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new je(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=uS(e,n);if(o.childCount<=1&&n>0){let s=e.size-n<=n+o.size;this.unplaced=new je(uy(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new je(uy(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:o,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let y=0;y<s.length;y++)this.openFrontierNode(s[y]);let i=this.unplaced,a=r?r.content:i.content,l=i.openStart-e,c=0,u=[],{match:f,type:h}=this.frontier[n];if(o){for(let y=0;y<o.childCount;y++)u.push(o.child(y));f=f.matchFragment(o)}let p=a.size+e-(i.content.size-i.openEnd);for(;c<a.childCount;){let y=a.child(c),x=f.matchType(y.type);if(!x)break;c++,(c>1||l==0||y.content.size)&&(f=x,u.push(bK(y.mark(h.allowedMarks(y.marks)),c==1?l:0,c==a.childCount?p:-1)))}let m=c==a.childCount;m||(p=-1),this.placed=dy(this.placed,n,_e.from(u)),this.frontier[n].match=f,m&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let y=0,x=a;y<p;y++){let b=x.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),x=b.content}this.unplaced=m?e==0?je.empty:new je(uy(i.content,e-1,1),e-1,p<0?i.openEnd:e-1):new je(uy(i.content,e,c),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!dS(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:o}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),i=dS(e,n,o,r,s);if(i){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=dS(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:i,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=dy(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let o=e.node(r),s=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,s)}return e}openFrontierNode(e,n=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=dy(this.placed,this.depth,_e.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(_e.empty,!0);n.childCount&&(this.placed=dy(this.placed,this.frontier.length,n))}}function uy(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(uy(t.firstChild.content,e-1,n)))}function dy(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(dy(t.lastChild.content,e-1,n)))}function uS(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function bK(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,bK(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(_e.empty,!0)))),t.copy(r)}function dS(t,e,n,r,o){let s=t.node(e),i=o?t.indexAfter(e):t.index(e);if(i==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,i);return a&&!cEe(n,s.content,i)?a:null}function cEe(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function uEe(t){return t.spec.defining||t.spec.definingForContent}function dEe(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let o=t.doc.resolve(e),s=t.doc.resolve(n);if(wK(o,s,r))return t.step(new vr(e,n,r));let i=_K(o,t.doc.resolve(n));i[i.length-1]==0&&i.pop();let a=-(o.depth+1);i.unshift(a);for(let h=o.depth,p=o.pos-1;h>0;h--,p--){let m=o.node(h).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;i.indexOf(h)>-1?a=h:o.before(h)==p&&i.splice(1,0,-h)}let l=i.indexOf(a),c=[],u=r.openStart;for(let h=r.content,p=0;;p++){let m=h.firstChild;if(c.push(m),p==r.openStart)break;h=m.content}for(let h=u-1;h>=0;h--){let p=c[h],m=uEe(p.type);if(m&&!p.sameMarkup(o.node(Math.abs(a)-1)))u=h;else if(m||!p.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let p=(h+u+1)%(r.openStart+1),m=c[p];if(m)for(let y=0;y<i.length;y++){let x=i[(y+l)%i.length],b=!0;x<0&&(b=!1,x=-x);let C=o.node(x-1),E=o.index(x-1);if(C.canReplaceWith(E,E,m.type,m.marks))return t.replace(o.before(x),b?s.after(x):n,new je(xK(r.content,0,r.openStart,p),p,r.openEnd))}}let f=t.steps.length;for(let h=i.length-1;h>=0&&(t.replace(e,n,r),!(t.steps.length>f));h--){let p=i[h];p<0||(e=o.before(p),n=s.after(p))}}function xK(t,e,n,r,o){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(xK(s.content,e+1,n,r,s)))}if(e>r){let s=o.contentMatchAt(0),i=s.fillBefore(t).append(t);t=i.append(s.matchFragment(i).fillBefore(_e.empty,!0))}return t}function fEe(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let o=aEe(t.doc,e,r.type);o!=null&&(e=n=o)}t.replaceRange(e,n,new je(_e.from(r),0,0))}function hEe(t,e,n){let r=t.doc.resolve(e),o=t.doc.resolve(n),s=_K(r,o);for(let i=0;i<s.length;i++){let a=s[i],l=i==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),o.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),o.indexAfter(a-1))))return t.delete(r.before(a),o.after(a))}for(let i=1;i<=r.depth&&i<=o.depth;i++)if(e-r.start(i)==r.depth-i&&n>r.end(i)&&o.end(i)-n!=o.depth-i&&r.start(i-1)==o.start(i-1)&&r.node(i-1).canReplace(r.index(i-1),o.index(i-1)))return t.delete(r.before(i),n);t.delete(e,n)}function _K(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let o=r;o>=0;o--){let s=t.start(o);if(s<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(s==e.start(o)||o==t.depth&&o==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==s-1)&&n.push(o)}return n}class Op extends bo{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return cr.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let o=n.type.create(r,null,n.marks);return cr.fromReplace(e,this.pos,this.pos+1,new je(_e.from(o),0,n.isLeaf?0:1))}getMap(){return ms.empty}invert(e){return new Op(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Op(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Op(n.pos,n.attr,n.value)}}bo.jsonID("attr",Op);class P1 extends bo{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let o in e.attrs)n[o]=e.attrs[o];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return cr.ok(r)}getMap(){return ms.empty}invert(e){return new P1(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new P1(n.attr,n.value)}}bo.jsonID("docAttr",P1);let pm=class extends Error{};pm=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};pm.prototype=Object.create(Error.prototype);pm.prototype.constructor=pm;pm.prototype.name="TransformError";class f3{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Mp}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new pm(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=je.empty){let o=OE(this.doc,e,n,r);return o&&this.step(o),this}replaceWith(e,n,r){return this.replace(e,n,new je(_e.from(r),0,0))}delete(e,n){return this.replace(e,n,je.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return dEe(this,e,n,r),this}replaceRangeWith(e,n,r){return fEe(this,e,n,r),this}deleteRange(e,n){return hEe(this,e,n),this}lift(e,n){return XCe(this,e,n),this}join(e,n=1){return iEe(this,e,n),this}wrap(e,n){return eEe(this,e,n),this}setBlockType(e,n=e,r,o=null){return tEe(this,e,n,r,o),this}setNodeMarkup(e,n,r=null,o){return rEe(this,e,n,r,o),this}setNodeAttribute(e,n,r){return this.step(new Op(e,n,r)),this}setDocAttribute(e,n){return this.step(new P1(e,n)),this}addNodeMark(e,n){return this.step(new mu(e,n)),this}removeNodeMark(e,n){if(!(n instanceof fn)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new hm(e,n)),this}split(e,n=1,r){return oEe(this,e,n,r),this}addMark(e,n,r){return KCe(this,e,n,r),this}removeMark(e,n,r){return YCe(this,e,n,r),this}clearIncompatible(e,n,r){return d3(this,e,n,r),this}}const fS=Object.create(null);class nt{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new CK(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=je.empty){let r=n.content.lastChild,o=null;for(let a=0;a<n.openEnd;a++)o=r,r=r.lastChild;let s=e.steps.length,i=this.ranges;for(let a=0;a<i.length;a++){let{$from:l,$to:c}=i[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?je.empty:n),a==0&&A8(e,s,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){let{$from:i,$to:a}=o[s],l=e.mapping.slice(r),c=l.map(i.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),A8(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let o=e.parent.inlineContent?new Ze(e):Qh(e.node(0),e.parent,e.pos,e.index(),n,r);if(o)return o;for(let s=e.depth-1;s>=0;s--){let i=n<0?Qh(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):Qh(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(i)return i}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new ci(e.node(0))}static atStart(e){return Qh(e,e,0,0,1)||new ci(e)}static atEnd(e){return Qh(e,e,e.content.size,e.childCount,-1)||new ci(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=fS[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in fS)throw new RangeError("Duplicate use of selection JSON ID "+e);return fS[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Ze.between(this.$anchor,this.$head).getBookmark()}}nt.prototype.visible=!0;class CK{constructor(e,n){this.$from=e,this.$to=n}}let I8=!1;function R8(t){!I8&&!t.parent.inlineContent&&(I8=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Ze extends nt{constructor(e,n=e){R8(e),R8(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return nt.near(r);let o=e.resolve(n.map(this.anchor));return new Ze(o.parent.inlineContent?o:r,r)}replace(e,n=je.empty){if(super.replace(e,n),n==je.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Ze&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new LE(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ze(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let o=e.resolve(n);return new this(o,r==n?o:e.resolve(r))}static between(e,n,r){let o=e.pos-n.pos;if((!r||o)&&(r=o>=0?1:-1),!n.parent.inlineContent){let s=nt.findFrom(n,r,!0)||nt.findFrom(n,-r,!0);if(s)n=s.$head;else return nt.near(n,r)}return e.parent.inlineContent||(o==0?e=n:(e=(nt.findFrom(e,-r,!0)||nt.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=o<0&&(e=n))),new Ze(e,n)}}nt.jsonID("text",Ze);class LE{constructor(e,n){this.anchor=e,this.head=n}map(e){return new LE(e.map(this.anchor),e.map(this.head))}resolve(e){return Ze.between(e.resolve(this.anchor),e.resolve(this.head))}}class Je extends nt{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:o}=n.mapResult(this.anchor),s=e.resolve(o);return r?nt.near(s):new Je(s)}content(){return new je(_e.from(this.node),0,0)}eq(e){return e instanceof Je&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new h3(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Je(e.resolve(n.anchor))}static create(e,n){return new Je(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Je.prototype.visible=!1;nt.jsonID("node",Je);class h3{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new LE(r,r):new h3(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Je.isSelectable(r)?new Je(n):nt.near(n)}}class ci extends nt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=je.empty){if(n==je.empty){e.delete(0,e.doc.content.size);let r=nt.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new ci(e)}map(e){return new ci(e)}eq(e){return e instanceof ci}getBookmark(){return pEe}}nt.jsonID("all",ci);const pEe={map(){return this},resolve(t){return new ci(t)}};function Qh(t,e,n,r,o,s=!1){if(e.inlineContent)return Ze.create(t,n);for(let i=r-(o>0?0:1);o>0?i<e.childCount:i>=0;i+=o){let a=e.child(i);if(a.isAtom){if(!s&&Je.isSelectable(a))return Je.create(t,n-(o<0?a.nodeSize:0))}else{let l=Qh(t,a,n+o,o<0?a.childCount:0,o,s);if(l)return l}n+=a.nodeSize*o}return null}function A8(t,e,n){let r=t.steps.length-1;if(r<e)return;let o=t.steps[r];if(!(o instanceof vr||o instanceof er))return;let s=t.mapping.maps[r],i;s.forEach((a,l,c,u)=>{i==null&&(i=u)}),t.setSelection(nt.near(t.doc.resolve(i),n))}const P8=1,M8=2,D8=4;let mEe=class extends f3{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|P8)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&P8)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=M8,this}ensureMarks(e){return fn.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&M8)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||fn.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let o=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let i=this.doc.resolve(n);s=r==n?i.marks():i.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,o.text(e,s)),this.selection.empty||this.setSelection(nt.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=D8,this}get scrolledIntoView(){return(this.updated&D8)>0}};function O8(t,e){return!e||!t?t:t.bind(e)}class fy{constructor(e,n,r){this.name=e,this.init=O8(n.init,r),this.apply=O8(n.apply,r)}}const gEe=[new fy("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new fy("selection",{init(t,e){return t.selection||nt.atStart(e.doc)},apply(t){return t.selection}}),new fy("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new fy("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class hS{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=gEe.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new fy(r.key,r.spec.state,r))})}}class Zd{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),o=null;for(;;){let s=!1;for(let i=0;i<this.config.plugins.length;i++){let a=this.config.plugins[i];if(a.spec.appendTransaction){let l=o?o[i].n:0,c=o?o[i].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,i)){if(u.setMeta("appendedTransaction",e),!o){o=[];for(let f=0;f<this.config.plugins.length;f++)o.push(f<i?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}o&&(o[i]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Zd(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let s=r[o];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new mEe(this)}static create(e){let n=new hS(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Zd(n);for(let o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(e,r);return r}reconfigure(e){let n=new hS(this.schema,e.plugins),r=n.fields,o=new Zd(n);for(let s=0;s<r.length;s++){let i=r[s].name;o[i]=this.hasOwnProperty(i)?this[i]:r[s].init(e,o)}return o}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],s=o.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(o,this[o.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new hS(e.schema,e.plugins),s=new Zd(o);return o.fields.forEach(i=>{if(i.name=="doc")s.doc=oc.fromJSON(e.schema,n.doc);else if(i.name=="selection")s.selection=nt.fromJSON(s.doc,n.selection);else if(i.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==i.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[i.name]=c.fromJSON.call(l,e,n[a],s);return}}s[i.name]=i.init(e,s)}}),s}}function EK(t,e,n){for(let r in t){let o=t[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=EK(o,e,{})),n[r]=o}return n}class kt{constructor(e){this.spec=e,this.props={},e.props&&EK(e.props,this,this.props),this.key=e.key?e.key.key:kK("plugin")}getState(e){return e[this.key]}}const pS=Object.create(null);function kK(t){return t in pS?t+"$"+ ++pS[t]:(pS[t]=0,t+"$")}class Ht{constructor(e="key"){this.key=kK(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Hr=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},M1=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let II=null;const $l=function(t,e,n){let r=II||(II=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},yEe=function(){II=null},jf=function(t,e,n,r){return n&&(L8(t,e,n,r,-1)||L8(t,e,n,r,1))},vEe=/^(img|br|input|textarea|hr)$/i;function L8(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:ti(t))){let s=t.parentNode;if(!s||s.nodeType!=1||Kv(t)||vEe.test(t.nodeName)||t.contentEditable=="false")return!1;e=Hr(t)+(o<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(o<0?-1:0)],t.contentEditable=="false")return!1;e=o<0?ti(t):0}else return!1}}function ti(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function wEe(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=ti(t)}else if(t.parentNode&&!Kv(t))e=Hr(t),t=t.parentNode;else return null}}function bEe(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Kv(t))e=Hr(t)+1,t=t.parentNode;else return null}}function xEe(t,e,n){for(let r=e==0,o=e==ti(t);r||o;){if(t==n)return!0;let s=Hr(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,o=o&&s==ti(t)}}function Kv(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const jE=function(t){return t.focusNode&&jf(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Hd(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function _Ee(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function CEe(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(ti(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(ti(r.startContainer),r.startOffset)}}}const Za=typeof navigator<"u"?navigator:null,j8=typeof document<"u"?document:null,hd=Za&&Za.userAgent||"",RI=/Edge\/(\d+)/.exec(hd),SK=/MSIE \d/.exec(hd),AI=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(hd),ts=!!(SK||AI||RI),Lu=SK?document.documentMode:AI?+AI[1]:RI?+RI[1]:0,sa=!ts&&/gecko\/(\d+)/i.test(hd);sa&&+(/Firefox\/(\d+)/.exec(hd)||[0,0])[1];const PI=!ts&&/Chrome\/(\d+)/.exec(hd),uo=!!PI,TK=PI?+PI[1]:0,Ao=!ts&&!!Za&&/Apple Computer/.test(Za.vendor),mm=Ao&&(/Mobile\/\w+/.test(hd)||!!Za&&Za.maxTouchPoints>2),Xs=mm||(Za?/Mac/.test(Za.platform):!1),EEe=Za?/Win/.test(Za.platform):!1,Yl=/Android \d/.test(hd),Yv=!!j8&&"webkitFontSmoothing"in j8.documentElement.style,kEe=Yv?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function SEe(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Pl(t,e){return typeof t=="number"?t:t[e]}function TEe(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function V8(t,e,n){let r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let i=n||t.dom;i;i=M1(i)){if(i.nodeType!=1)continue;let a=i,l=a==s.body,c=l?SEe(s):TEe(a),u=0,f=0;if(e.top<c.top+Pl(r,"top")?f=-(c.top-e.top+Pl(o,"top")):e.bottom>c.bottom-Pl(r,"bottom")&&(f=e.bottom-e.top>c.bottom-c.top?e.top+Pl(o,"top")-c.top:e.bottom-c.bottom+Pl(o,"bottom")),e.left<c.left+Pl(r,"left")?u=-(c.left-e.left+Pl(o,"left")):e.right>c.right-Pl(r,"right")&&(u=e.right-c.right+Pl(o,"right")),u||f)if(l)s.defaultView.scrollBy(u,f);else{let h=a.scrollLeft,p=a.scrollTop;f&&(a.scrollTop+=f),u&&(a.scrollLeft+=u);let m=a.scrollLeft-h,y=a.scrollTop-p;e={left:e.left-m,top:e.top-y,right:e.right-m,bottom:e.bottom-y}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(i).position))break}}function NEe(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,o;for(let s=(e.left+e.right)/2,i=n+1;i<Math.min(innerHeight,e.bottom);i+=5){let a=t.root.elementFromPoint(s,i);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,o=l.top;break}}return{refDOM:r,refTop:o,stack:NK(t.dom)}}function NK(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=M1(r));return e}function IEe({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;IK(n,r==0?0:r-e)}function IK(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:o,left:s}=t[n];r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let $h=null;function REe(t){if(t.setActive)return t.setActive();if($h)return t.focus($h);let e=NK(t);t.focus($h==null?{get preventScroll(){return $h={preventScroll:!0},!0}}:void 0),$h||($h=!1,IK(e,0))}function RK(t,e){let n,r=2e8,o,s=0,i=e.top,a=e.top,l,c;for(let u=t.firstChild,f=0;u;u=u.nextSibling,f++){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=$l(u).getClientRects();else continue;for(let p=0;p<h.length;p++){let m=h[p];if(m.top<=i&&m.bottom>=a){i=Math.max(m.bottom,i),a=Math.min(m.top,a);let y=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(y<r){n=u,r=y,o=y&&n.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,u.nodeType==1&&y&&(s=f+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!l&&m.left<=e.left&&m.right>=e.left&&(l=u,c={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!n&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(s=f+1)}}return!n&&l&&(n=l,o=c,r=0),n&&n.nodeType==3?AEe(n,o):!n||r&&n.nodeType==1?{node:t,offset:s}:RK(n,o)}function AEe(t,e){let n=t.nodeValue.length,r=document.createRange();for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let s=Qc(r,1);if(s.top!=s.bottom&&p3(e,s))return{node:t,offset:o+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function p3(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function PEe(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function MEe(t,e,n){let{node:r,offset:o}=RK(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let i=r.getBoundingClientRect();s=i.left!=i.right&&n.left>(i.left+i.right)/2?1:-1}return t.docView.posFromDOM(r,o,s)}function DEe(t,e,n,r){let o=-1;for(let s=e,i=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&(!i&&l.left>r.left||l.top>r.top?o=a.posBefore:(!i&&l.right<r.left||l.bottom<r.top)&&(o=a.posAfter),i=!0),!a.contentDOM&&o<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n,-1)}function AK(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=o;;){let i=t.childNodes[s];if(i.nodeType==1){let a=i.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(p3(e,c))return AK(i,e,c)}}if((s=(s+1)%r)==o)break}return t}function OEe(t,e){let n=t.dom.ownerDocument,r,o=0,s=CEe(n,e.left,e.top);s&&({node:r,offset:o}=s);let i=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!i||!t.dom.contains(i.nodeType!=1?i.parentNode:i)){let c=t.dom.getBoundingClientRect();if(!p3(e,c)||(i=AK(t.dom,e,c),!i))return null}if(Ao)for(let c=i;r&&c;c=M1(c))c.draggable&&(r=void 0);if(i=PEe(i,e),r){if(sa&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let u=r.childNodes[o],f;u.nodeName=="IMG"&&(f=u.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&o++}let c;Yv&&o&&r.nodeType==1&&(c=r.childNodes[o-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&o--,r==t.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(a=DEe(t,r,o,e))}a==null&&(a=MEe(t,i,e));let l=t.docView.nearestDesc(i,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function $8(t){return t.top<t.bottom||t.left<t.right}function Qc(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if($8(r))return r}return Array.prototype.find.call(n,$8)||t.getBoundingClientRect()}const LEe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function PK(t,e,n){let{node:r,offset:o,atom:s}=t.docView.domFromPos(e,n<0?-1:1),i=Yv||sa;if(r.nodeType==3)if(i&&(LEe.test(r.nodeValue)||(n<0?!o:o==r.nodeValue.length))){let l=Qc($l(r,o,o),n);if(sa&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let c=Qc($l(r,o-1,o-1),-1);if(c.top==l.top){let u=Qc($l(r,o,o+1),-1);if(u.top!=l.top)return Ug(u,u.left<c.left)}}return l}else{let l=o,c=o,u=n<0?1:-1;return n<0&&!o?(c++,u=-1):n>=0&&o==r.nodeValue.length?(l--,u=1):n<0?l--:c++,Ug(Qc($l(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&o&&(n<0||o==ti(r))){let l=r.childNodes[o-1];if(l.nodeType==1)return mS(l.getBoundingClientRect(),!1)}if(s==null&&o<ti(r)){let l=r.childNodes[o];if(l.nodeType==1)return mS(l.getBoundingClientRect(),!0)}return mS(r.getBoundingClientRect(),n>=0)}if(s==null&&o&&(n<0||o==ti(r))){let l=r.childNodes[o-1],c=l.nodeType==3?$l(l,ti(l)-(i?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Ug(Qc(c,1),!1)}if(s==null&&o<ti(r)){let l=r.childNodes[o];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?$l(l,0,i?0:1):l.nodeType==1?l:null:null;if(c)return Ug(Qc(c,-1),!0)}return Ug(Qc(r.nodeType==3?$l(r):r,-n),n>=0)}function Ug(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function mS(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function MK(t,e,n){let r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}function jEe(t,e,n){let r=e.selection,o=n=="up"?r.$from:r.$to;return MK(t,e,()=>{let{node:s}=t.docView.domFromPos(o.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let i=PK(t,o.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=$l(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?i.top-u.top>(u.bottom-i.top)*2:u.bottom-i.bottom>(i.bottom-u.top)*2))return!1}}return!0})}const VEe=/[\u0590-\u08ac]/;function $Ee(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,s=!o,i=o==r.parent.content.size,a=t.domSelection();return a?!VEe.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:i:MK(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:f}=t.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",n,"character");let p=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:m,focusOffset:y}=t.domSelectionRange(),x=m&&!p.contains(m.nodeType==1?m:m.parentNode)||l==m&&c==y;try{a.collapse(u,f),l&&(l!=u||c!=f)&&a.extend&&a.extend(l,c)}catch{}return h!=null&&(a.caretBidiLevel=h),x}):r.pos==r.start()||r.pos==r.end()}let B8=null,F8=null,U8=!1;function BEe(t,e,n){return B8==e&&F8==n?U8:(B8=e,F8=n,U8=n=="up"||n=="down"?jEe(t,e,n):$Ee(t,e,n))}const ui=0,H8=1,ef=2,el=3;class Qv{constructor(e,n,r,o){this.parent=e,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=ui,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let o=this.children[n];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,i;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((i=s.pmViewDesc)&&i.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(i)+i.size:this.posAtStart}else{let s,i;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((i=s.pmViewDesc)&&i.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(i):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=n>Hr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!1;break}if(s.previousSibling)break}if(o==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!0;break}if(s.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,o=e;o;o=o.parentNode){let s=this.getDesc(o),i;if(s&&(!n||s.node))if(r&&(i=s.nodeDOM)&&!(i.nodeType==1?i.contains(e.nodeType==1?e:e.parentNode):i==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let o=e;o;o=o.parentNode){let s=this.getDesc(o);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],s=r+o.size;if(r==e&&s!=r){for(;!o.border&&o.children.length;)for(let i=0;i<o.children.length;i++){let a=o.children[i];if(a.size){o=a;break}}return o}if(e<s)return o.descAt(e-r-o.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let s=0;r<this.children.length;r++){let i=this.children[r],a=s+i.size;if(a>e||i instanceof OK){o=e-s;break}s=a}if(o)return this.children[r].domFromPos(o-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof DK&&s.side>=0;r--);if(n<=0){let s,i=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,i=!1);return s&&n&&i&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Hr(s.dom)+1:0}}else{let s,i=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,i=!1);return s&&i&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Hr(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,s=-1;for(let i=r,a=0;;a++){let l=this.children[a],c=i+l.size;if(o==-1&&e<=c){let u=i+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=i;for(let f=a;f>0;f--){let h=this.children[f-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){o=Hr(h.dom)+1;break}e-=h.size}o==-1&&(o=0)}if(o>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let f=this.children[u];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){s=Hr(f.dom);break}n+=f.size}s==-1&&(s=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:e,to:n,fromOffset:o,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,o=!1){let s=Math.min(e,n),i=Math.max(e,n);for(let p=0,m=0;p<this.children.length;p++){let y=this.children[p],x=m+y.size;if(s>m&&i<x)return y.setSelection(e-m-y.border,n-m-y.border,r,o);m=x}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),f=!1;if((sa||Ao)&&e==n){let{node:p,offset:m}=a;if(p.nodeType==3){if(f=!!(m&&p.nodeValue[m-1]==`
`),f&&m==p.nodeValue.length)for(let y=p,x;y;y=y.parentNode){if(x=y.nextSibling){x.nodeName=="BR"&&(a=l={node:x.parentNode,offset:Hr(x)+1});break}let b=y.pmViewDesc;if(b&&b.node&&b.node.isBlock)break}}else{let y=p.childNodes[m-1];f=y&&(y.nodeName=="BR"||y.contentEditable=="false")}}if(sa&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let p=u.focusNode.childNodes[u.focusOffset];p&&p.contentEditable=="false"&&(o=!0)}if(!(o||f&&Ao)&&jf(a.node,a.offset,u.anchorNode,u.anchorOffset)&&jf(l.node,l.offset,u.focusNode,u.focusOffset))return;let h=!1;if((c.extend||e==n)&&!f){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(e>n){let m=a;a=l,l=m}let p=document.createRange();p.setEnd(l.node,l.offset),p.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,o=0;o<this.children.length;o++){let s=this.children[o],i=r+s.size;if(r==i?e<=i&&n>=r:e<i&&n>r){let a=r+s.border,l=i-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==i?ef:H8,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=el:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?ef:el}r=i}this.dirty=ef}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?ef:H8;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class DK extends Qv{constructor(e,n,r,o){let s,i=n.type.toDOM;if(typeof i=="function"&&(i=i(r,()=>{if(!s)return o;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(i.nodeType!=1){let a=document.createElement("span");a.appendChild(i),i=a}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(e,[],i,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==ui&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class FEe extends Qv{constructor(e,n,r,o){super(e,[],n,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Vf extends Qv{constructor(e,n,r,o,s){super(e,[],r,o),this.mark=n,this.spec=s}static create(e,n,r,o){let s=o.nodeViews[n.type.name],i=s&&s(n,o,r);return(!i||!i.dom)&&(i=Nc.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Vf(e,n,i.dom,i.contentDOM||i.dom,i)}parseRule(){return this.dirty&el||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=el&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=ui){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=ui}}slice(e,n,r){let o=Vf.create(this.parent,this.mark,!0,r),s=this.children,i=this.size;n<i&&(s=DI(s,n,i,r)),e>0&&(s=DI(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=o;return o.children=s,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ju extends Qv{constructor(e,n,r,o,s,i,a,l,c){super(e,[],s,i),this.node=n,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=a}static create(e,n,r,o,s,i){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return i;if(l.parent)return l.parent.posBeforeChild(l)},r,o),u=c&&c.dom,f=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:f}=Nc.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let h=u;return u=VK(u,r,n),c?l=new UEe(e,n,r,o,u,f||null,h,c,s,i+1):n.isText?new VE(e,n,r,o,u,h,s):new ju(e,n,r,o,u,f||null,h,s,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>_e.empty)}return e}matchesNode(e,n,r){return this.dirty==ui&&e.eq(this.node)&&$x(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,o=n,s=e.composing?this.localCompositionInfo(e,n):null,i=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new zEe(this,i&&i.node,e);qEe(this.node,this.innerDeco,(c,u,f)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!f&&l.syncToMarks(u==this.node.childCount?fn.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,o)},(c,u,f,h)=>{l.syncToMarks(c.marks,r,e);let p;l.findNodeMatch(c,u,f,h)||a&&e.state.selection.from>o&&e.state.selection.to<o+c.nodeSize&&(p=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,f,p,e)||l.updateNextNode(c,u,f,e,h,o)||l.addNode(c,u,f,e,o),o+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==ef)&&(i&&this.protectLocalComposition(e,i),LK(this.contentDOM,this.children,e),mm&&KEe(this.dom))}localCompositionInfo(e,n){let{from:r,to:o}=e.state.selection;if(!(e.state.selection instanceof Ze)||r<n||o>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let i=s.nodeValue,a=YEe(this.node.content,i,r-n,o-n);return a<0?null:{node:s,pos:a,text:i}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:o}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let i=new FEe(this,s,n,o);e.input.compositionNodes.push(i),this.children=DI(this.children,r,r+o.length,e,i)}update(e,n,r,o){return this.dirty==el||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,o),!0)}updateInner(e,n,r,o){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=ui}updateOuterDeco(e){if($x(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=jK(this.dom,this.nodeDOM,MI(this.outerDeco,this.node,n),MI(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function z8(t,e,n,r,o){VK(r,e,t);let s=new ju(void 0,t,e,n,r,r,r,o,0);return s.contentDOM&&s.updateChildren(o,0),s}class VE extends ju{constructor(e,n,r,o,s,i,a){super(e,n,r,o,s,null,i,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,o){return this.dirty==el||this.dirty!=ui&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=ui||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=ui,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let o=this.node.cut(e,n),s=document.createTextNode(o.text);return new VE(this.parent,o,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=el)}get domAtom(){return!1}isText(e){return this.node.text==e}}class OK extends Qv{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ui&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class UEe extends ju{constructor(e,n,r,o,s,i,a,l,c,u){super(e,n,r,o,s,i,a,c,u),this.spec=l}update(e,n,r,o){if(this.dirty==el)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,o),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function LK(t,e,n){let r=t.firstChild,o=!1;for(let s=0;s<e.length;s++){let i=e[s],a=i.dom;if(a.parentNode==t){for(;a!=r;)r=W8(r),o=!0;r=r.nextSibling}else o=!0,t.insertBefore(a,r);if(i instanceof Vf){let l=r?r.previousSibling:t.lastChild;LK(i.contentDOM,i.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=W8(r),o=!0;o&&n.trackWrites==t&&(n.trackWrites=null)}const jy=function(t){t&&(this.nodeName=t)};jy.prototype=Object.create(null);const tf=[new jy];function MI(t,e,n){if(t.length==0)return tf;let r=n?tf[0]:new jy,o=[r];for(let s=0;s<t.length;s++){let i=t[s].type.attrs;if(i){i.nodeName&&o.push(r=new jy(i.nodeName));for(let a in i){let l=i[a];l!=null&&(n&&o.length==1&&o.push(r=new jy(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return o}function jK(t,e,n,r){if(n==tf&&r==tf)return e;let o=e;for(let s=0;s<r.length;s++){let i=r[s],a=n[s];if(s){let l;a&&a.nodeName==i.nodeName&&o!=t&&(l=o.parentNode)&&l.nodeName.toLowerCase()==i.nodeName||(l=document.createElement(i.nodeName),l.pmIsDeco=!0,l.appendChild(o),a=tf[0]),o=l}HEe(o,a||tf[0],i)}return o}function HEe(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)o.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<o.length;s++)r.indexOf(o[s])==-1&&t.classList.add(o[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(e.style);)t.style.removeProperty(o[1])}n.style&&(t.style.cssText+=n.style)}}function VK(t,e,n){return jK(t,t,tf,MI(e,n,t.nodeType!=1))}function $x(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function W8(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class zEe{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=WEe(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let o=0,s=this.stack.length>>1,i=Math.min(s,e.length);for(;o<i&&(o==s-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<s;)this.destroyRest(),this.top.dirty=ui,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Vf.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,o){let s=-1,i;if(o>=this.preMatch.index&&(i=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&i.matchesNode(e,n,r))s=this.top.children.indexOf(i,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,o,s){let i=this.top.children[o];return i.dirty==el&&i.dom==i.contentDOM&&(i.dirty=ef),i.update(e,n,r,s)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}e=n}}updateNextNode(e,n,r,o,s,i){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof ju){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,f,h=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=el&&$x(n,l.outerDeco));if(!h&&l.update(e,n,r,o))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!h&&(f=this.recreateWrapper(l,e,n,r,o,i)))return this.destroyBetween(this.index,a),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=ef,f.updateChildren(o,i+1),f.dirty=ui),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,o,s,i){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!$x(r,e.outerDeco)||!o.eq(e.innerDeco))return null;let a=ju.create(this.top,n,r,o,s,i);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,o,s){let i=ju.create(this.top,e,n,r,o,s);i.contentDOM&&i.updateChildren(o,s+1),this.top.children.splice(this.index++,0,i),this.changed=!0}placeWidget(e,n,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let s=new DK(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Vf;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof VE)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Ao||uo)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new OK(this.top,[],r,null);n!=this.top?n.children.push(o):n.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function WEe(t,e){let n=e,r=n.children.length,o=t.childCount,s=new Map,i=[];e:for(;o>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof Vf)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(o-1))break;--o,s.set(a,o),i.push(a)}}return{index:o,matched:s,matches:i.reverse()}}function GEe(t,e){return t.type.side-e.type.side}function qEe(t,e,n,r){let o=e.locals(t),s=0;if(o.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,o,e.forChild(s,u),c),s+=u.nodeSize}return}let i=0,a=[],l=null;for(let c=0;;){let u,f;for(;i<o.length&&o[i].to==s;){let x=o[i++];x.widget&&(u?(f||(f=[u])).push(x):u=x)}if(u)if(f){f.sort(GEe);for(let x=0;x<f.length;x++)n(f[x],c,!!l)}else n(u,c,!!l);let h,p;if(l)p=-1,h=l,l=null;else if(c<t.childCount)p=c,h=t.child(c++);else break;for(let x=0;x<a.length;x++)a[x].to<=s&&a.splice(x--,1);for(;i<o.length&&o[i].from<=s&&o[i].to>s;)a.push(o[i++]);let m=s+h.nodeSize;if(h.isText){let x=m;i<o.length&&o[i].from<x&&(x=o[i].from);for(let b=0;b<a.length;b++)a[b].to<x&&(x=a[b].to);x<m&&(l=h.cut(x-s),h=h.cut(0,x-s),m=x,p=-1)}else for(;i<o.length&&o[i].to<m;)i++;let y=h.isInline&&!h.isLeaf?a.filter(x=>!x.inline):a.slice();r(h,y,e.forChild(s,h),p),s=m}}function KEe(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function YEe(t,e,n,r){for(let o=0,s=0;o<t.childCount&&s<=r;){let i=t.child(o++),a=s;if(s+=i.nodeSize,!i.isText)continue;let l=i.text;for(;o<t.childCount;){let c=t.child(o++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function DI(t,e,n,r,o){let s=[];for(let i=0,a=0;i<t.length;i++){let l=t[i],c=a,u=a+=l.size;c>=n||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),o&&(s.push(o),o=void 0),u>n&&s.push(l.slice(n-c,l.size,r)))}return s}function m3(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let o=t.docView.nearestDesc(n.focusNode),s=o&&o.size==0,i=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(i<0)return null;let a=r.resolve(i),l,c;if(jE(n)){for(l=i;o&&!o.node;)o=o.parent;let f=o.node;if(o&&f.isAtom&&Je.isSelectable(f)&&o.parent&&!(f.isInline&&xEe(n.focusNode,n.focusOffset,o.dom))){let h=o.posBefore;c=new Je(i==h?a:r.resolve(h))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let f=i,h=i;for(let p=0;p<n.rangeCount;p++){let m=n.getRangeAt(p);f=Math.min(f,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),h=Math.max(h,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(f<0)return null;[l,i]=h==t.state.selection.anchor?[h,f]:[f,h],a=r.resolve(i)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let f=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=g3(t,u,a,f)}return c}function $K(t){return t.editable?t.hasFocus():FK(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function sc(t,e=!1){let n=t.state.selection;if(BK(t,n),!!$K(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&uo){let r=t.domSelectionRange(),o=t.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&jf(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)XEe(t);else{let{anchor:r,head:o}=n,s,i;G8&&!(n instanceof Ze)&&(n.$from.parent.inlineContent||(s=q8(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(i=q8(t,n.to))),t.docView.setSelection(r,o,t,e),G8&&(s&&K8(s),i&&K8(i)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&QEe(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const G8=Ao||uo&&TK<63;function q8(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),o=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Ao&&o&&o.contentEditable=="false")return gS(o);if((!o||o.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(o)return gS(o);if(s)return gS(s)}}function gS(t){return t.contentEditable="true",Ao&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function K8(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function QEe(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=o)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!$K(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function XEe(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,o=r.nodeName=="IMG";o?n.setStart(r.parentNode,Hr(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&ts&&Lu<=11&&(r.disabled=!0,r.disabled=!1)}function BK(t,e){if(e instanceof Je){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(Y8(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else Y8(t)}function Y8(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function g3(t,e,n,r){return t.someProp("createSelectionBetween",o=>o(t,e,n))||Ze.between(e,n,r)}function Q8(t){return t.editable&&!t.hasFocus()?!1:FK(t)}function FK(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function JEe(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return jf(e.node,e.offset,n.anchorNode,n.anchorOffset)}function OI(t,e){let{$anchor:n,$head:r}=t.selection,o=e>0?n.max(r):n.min(r),s=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return s&&nt.findFrom(s,e)}function eu(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function X8(t,e,n){let r=t.state.selection;if(r instanceof Ze)if(n.indexOf("s")>-1){let{$head:o}=r,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let i=t.state.doc.resolve(o.pos+s.nodeSize*(e<0?-1:1));return eu(t,new Ze(r.$anchor,i))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let o=OI(t.state,e);return o&&o instanceof Je?eu(t,o):!1}else if(!(Xs&&n.indexOf("m")>-1)){let o=r.$head,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,i;if(!s||s.isText)return!1;let a=e<0?o.pos-s.nodeSize:o.pos;return s.isAtom||(i=t.docView.descAt(a))&&!i.contentDOM?Je.isSelectable(s)?eu(t,new Je(e<0?t.state.doc.resolve(o.pos-s.nodeSize):o)):Yv?eu(t,new Ze(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Je&&r.node.isInline)return eu(t,new Ze(e>0?r.$to:r.$from));{let o=OI(t.state,e);return o?eu(t,o):!1}}}function Bx(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Vy(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Bh(t,e){return e<0?ZEe(t):e2e(t)}function ZEe(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o,s,i=!1;for(sa&&n.nodeType==1&&r<Bx(n)&&Vy(n.childNodes[r],-1)&&(i=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(Vy(a,-1))o=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(UK(n))break;{let a=n.previousSibling;for(;a&&Vy(a,-1);)o=n.parentNode,s=Hr(a),a=a.previousSibling;if(a)n=a,r=Bx(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}i?LI(t,n,r):o&&LI(t,o,s)}function e2e(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o=Bx(n),s,i;for(;;)if(r<o){if(n.nodeType!=1)break;let a=n.childNodes[r];if(Vy(a,1))s=n,i=++r;else break}else{if(UK(n))break;{let a=n.nextSibling;for(;a&&Vy(a,1);)s=a.parentNode,i=Hr(a)+1,a=a.nextSibling;if(a)n=a,r=0,o=Bx(n);else{if(n=n.parentNode,n==t.dom)break;r=o=0}}}s&&LI(t,s,i)}function UK(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function t2e(t,e){for(;t&&e==t.childNodes.length&&!Kv(t);)e=Hr(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function n2e(t,e){for(;t&&!e&&!Kv(t);)e=Hr(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function LI(t,e,n){if(e.nodeType!=3){let s,i;(i=t2e(e,n))?(e=i,n=0):(s=n2e(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(jE(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:o}=t;setTimeout(()=>{t.state==o&&sc(t)},50)}function J8(t,e){let n=t.state.doc.resolve(e);if(!(uo||EEe)&&n.parent.inlineContent){let o=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),i=(s.top+s.bottom)/2;if(i>o.top&&i<o.bottom&&Math.abs(s.left-o.left)>1)return s.left<o.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),i=(s.top+s.bottom)/2;if(i>o.top&&i<o.bottom&&Math.abs(s.left-o.left)>1)return s.left>o.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Z8(t,e,n){let r=t.state.selection;if(r instanceof Ze&&!r.empty||n.indexOf("s")>-1||Xs&&n.indexOf("m")>-1)return!1;let{$from:o,$to:s}=r;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let i=OI(t.state,e);if(i&&i instanceof Je)return eu(t,i)}if(!o.parent.inlineContent){let i=e<0?o:s,a=r instanceof ci?nt.near(i,e):nt.findFrom(i,e);return a?eu(t,a):!1}return!1}function eL(t,e){if(!(t.state.selection instanceof Ze))return!0;let{$head:n,$anchor:r,empty:o}=t.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let i=t.state.tr;return e<0?i.delete(n.pos-s.nodeSize,n.pos):i.delete(n.pos,n.pos+s.nodeSize),t.dispatch(i),!0}return!1}function tL(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function r2e(t){if(!Ao||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;tL(t,r,"true"),setTimeout(()=>tL(t,r,"false"),20)}return!1}function o2e(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function s2e(t,e){let n=e.keyCode,r=o2e(e);if(n==8||Xs&&n==72&&r=="c")return eL(t,-1)||Bh(t,-1);if(n==46&&!e.shiftKey||Xs&&n==68&&r=="c")return eL(t,1)||Bh(t,1);if(n==13||n==27)return!0;if(n==37||Xs&&n==66&&r=="c"){let o=n==37?J8(t,t.state.selection.from)=="ltr"?-1:1:-1;return X8(t,o,r)||Bh(t,o)}else if(n==39||Xs&&n==70&&r=="c"){let o=n==39?J8(t,t.state.selection.from)=="ltr"?1:-1:1;return X8(t,o,r)||Bh(t,o)}else{if(n==38||Xs&&n==80&&r=="c")return Z8(t,-1,r)||Bh(t,-1);if(n==40||Xs&&n==78&&r=="c")return r2e(t)||Z8(t,1,r)||Bh(t,1);if(r==(Xs?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function y3(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let n=[],{content:r,openStart:o,openEnd:s}=e;for(;o>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,s--;let p=r.firstChild;n.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let i=t.someProp("clipboardSerializer")||Nc.fromSchema(t.state.schema),a=KK(),l=a.createElement("div");l.appendChild(i.serializeFragment(r,{document:a}));let c=l.firstChild,u,f=0;for(;c&&c.nodeType==1&&(u=qK[c.nodeName.toLowerCase()]);){for(let p=u.length-1;p>=0;p--){let m=a.createElement(u[p]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),f++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${o} ${s}${f?` -${f}`:""} ${JSON.stringify(n)}`);let h=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:h,slice:e}}function HK(t,e,n,r,o){let s=o.parent.type.spec.code,i,a;if(!n&&!e)return null;let l=e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",h=>{e=h(e,s||r,t)}),s)return e?new je(_e.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):je.empty;let f=t.someProp("clipboardTextParser",h=>h(e,o,r,t));if(f)a=f;else{let h=o.marks(),{schema:p}=t.state,m=Nc.fromSchema(p);i=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(y=>{let x=i.appendChild(document.createElement("p"));y&&x.appendChild(m.serializeNode(p.text(y,h)))})}}else t.someProp("transformPastedHTML",f=>{n=f(n,t)}),i=c2e(n),Yv&&u2e(i);let c=i&&i.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let f=+u[3];f>0;f--){let h=i.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;i=h}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||ff.fromSchema(t.state.schema)).parseSlice(i,{preserveWhitespace:!!(l||u),context:o,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!i2e.test(h.parentNode.nodeName)?{ignore:!0}:null}})),u)a=d2e(nL(a,+u[1],+u[2]),u[4]);else if(a=je.maxOpen(a2e(a.content,o),!0),a.openStart||a.openEnd){let f=0,h=0;for(let p=a.content.firstChild;f<a.openStart&&!p.type.spec.isolating;f++,p=p.firstChild);for(let p=a.content.lastChild;h<a.openEnd&&!p.type.spec.isolating;h++,p=p.lastChild);a=nL(a,f,h)}return t.someProp("transformPasted",f=>{a=f(a,t)}),a}const i2e=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function a2e(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let o=e.node(n).contentMatchAt(e.index(n)),s,i=[];if(t.forEach(a=>{if(!i)return;let l=o.findWrapping(a.type),c;if(!l)return i=null;if(c=i.length&&s.length&&WK(l,s,a,i[i.length-1],0))i[i.length-1]=c;else{i.length&&(i[i.length-1]=GK(i[i.length-1],s.length));let u=zK(a,l);i.push(u),o=o.matchType(u.type),s=l}}),i)return _e.from(i)}return t}function zK(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,_e.from(t));return t}function WK(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){let s=WK(t,e,n,r.lastChild,o+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(_e.from(zK(n,t,o+1))))}}function GK(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,GK(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(_e.empty,!0);return t.copy(n.append(r))}function jI(t,e,n,r,o,s){let i=e<0?t.firstChild:t.lastChild,a=i.content;return t.childCount>1&&(s=0),o<r-1&&(a=jI(a,e,n,r,o+1,s)),o>=n&&(a=e<0?i.contentMatchAt(0).fillBefore(a,s<=o).append(a):a.append(i.contentMatchAt(i.childCount).fillBefore(_e.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,i.copy(a))}function nL(t,e,n){return e<t.openStart&&(t=new je(jI(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new je(jI(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const qK={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let rL=null;function KK(){return rL||(rL=document.implementation.createHTMLDocument("title"))}let yS=null;function l2e(t){let e=window.trustedTypes;return e?(yS||(yS=e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),yS.createHTML(t)):t}function c2e(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=KK().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),o;if((o=r&&qK[r[1].toLowerCase()])&&(t=o.map(s=>"<"+s+">").join("")+t+o.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=l2e(t),o)for(let s=0;s<o.length;s++)n=n.querySelector(o[s])||n;return n}function u2e(t){let e=t.querySelectorAll(uo?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function d2e(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:o,openStart:s,openEnd:i}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;o=_e.from(l.create(r[a+1],o)),s++,i++}return new je(o,s,i)}const Po={},Mo={},f2e={touchstart:!0,touchmove:!0};class h2e{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function p2e(t){for(let e in Po){let n=Po[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{g2e(t,r)&&!v3(t,r)&&(t.editable||!(r.type in Mo))&&n(t,r)},f2e[e]?{passive:!0}:void 0)}Ao&&t.dom.addEventListener("input",()=>null),VI(t)}function gu(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function m2e(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function VI(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>v3(t,r))})}function v3(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function g2e(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function y2e(t,e){!v3(t,e)&&Po[e.type]&&(t.editable||!(e.type in Mo))&&Po[e.type](t,e)}Mo.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!QK(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Yl&&uo&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),mm&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",o=>o(t,Hd(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||s2e(t,n)?n.preventDefault():gu(t,"key")};Mo.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Mo.keypress=(t,e)=>{let n=e;if(QK(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Xs&&n.metaKey)return;if(t.someProp("handleKeyPress",o=>o(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Ze)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(n.charCode);!/[\r\n]/.test(o)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,o))&&t.dispatch(t.state.tr.insertText(o).scrollIntoView()),n.preventDefault()}};function $E(t){return{left:t.clientX,top:t.clientY}}function v2e(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function w3(t,e,n,r,o){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let i=s.depth+1;i>0;i--)if(t.someProp(e,a=>i>s.depth?a(t,n,s.nodeAfter,s.before(i),o,!0):a(t,n,s.node(i),s.before(i),o,!1)))return!0;return!1}function Lp(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function w2e(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Je.isSelectable(r)?(Lp(t,new Je(n)),!0):!1}function b2e(t,e){if(e==-1)return!1;let n=t.state.selection,r,o;n instanceof Je&&(r=n.node);let s=t.state.doc.resolve(e);for(let i=s.depth+1;i>0;i--){let a=i>s.depth?s.nodeAfter:s.node(i);if(Je.isSelectable(a)){r&&n.$from.depth>0&&i>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?o=s.before(n.$from.depth):o=s.before(i);break}}return o!=null?(Lp(t,Je.create(t.state.doc,o)),!0):!1}function x2e(t,e,n,r,o){return w3(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(o?b2e(t,n):w2e(t,n))}function _2e(t,e,n,r){return w3(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",o=>o(t,e,r))}function C2e(t,e,n,r){return w3(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",o=>o(t,e,r))||E2e(t,n,r)}function E2e(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Lp(t,Ze.create(r,0,r.content.size)),!0):!1;let o=r.resolve(e);for(let s=o.depth+1;s>0;s--){let i=s>o.depth?o.nodeAfter:o.node(s),a=o.before(s);if(i.inlineContent)Lp(t,Ze.create(r,a+1,a+1+i.content.size));else if(Je.isSelectable(i))Lp(t,Je.create(r,a));else continue;return!0}}function b3(t){return Fx(t)}const YK=Xs?"metaKey":"ctrlKey";Po.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=b3(t),o=Date.now(),s="singleClick";o-t.input.lastClick.time<500&&v2e(n,t.input.lastClick)&&!n[YK]&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:s};let i=t.posAtCoords($E(n));i&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new k2e(t,i,n,!!r)):(s=="doubleClick"?_2e:C2e)(t,i.pos,i.inside,n)?n.preventDefault():gu(t,"pointer"))};class k2e{constructor(e,n,r,o){this.view=e,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[YK],this.allowDefault=r.shiftKey;let s,i;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),i=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,i=u.depth?u.before():0}const a=o?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof Je&&c.from<=i&&c.to>i)&&(this.mightDrag={node:s,pos:i,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&sa&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),gu(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>sc(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords($E(e))),this.updateAllowDefault(e),this.allowDefault||!n?gu(this.view,"pointer"):x2e(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Ao&&this.mightDrag&&!this.mightDrag.node.isAtom||uo&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Lp(this.view,nt.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):gu(this.view,"pointer")}move(e){this.updateAllowDefault(e),gu(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Po.touchstart=t=>{t.input.lastTouch=Date.now(),b3(t),gu(t,"pointer")};Po.touchmove=t=>{t.input.lastTouch=Date.now(),gu(t,"pointer")};Po.contextmenu=t=>b3(t);function QK(t,e){return t.composing?!0:Ao&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const S2e=Yl?5e3:-1;Mo.compositionstart=Mo.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof Ze&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Fx(t,!0),t.markCursor=null;else if(Fx(t,!e.selection.empty),sa&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let o=r.focusNode,s=r.focusOffset;o&&o.nodeType==1&&s!=0;){let i=s<0?o.lastChild:o.childNodes[s-1];if(!i)break;if(i.nodeType==3){let a=t.domSelection();a&&a.collapse(i,i.nodeValue.length);break}else o=i,s=-1}}t.input.composing=!0}XK(t,S2e)};Mo.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,XK(t,20))};function XK(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Fx(t),e))}function JK(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=N2e());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function T2e(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=wEe(e.focusNode,e.focusOffset),r=bEe(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let o=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!o||!o.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let i=n.pmViewDesc;if(!(!i||!i.isText(n.nodeValue)))return r}}return n||r}function N2e(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Fx(t,e=!1){if(!(Yl&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),JK(t),e||t.docView&&t.docView.dirty){let n=m3(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!t.state.selection.empty?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function I2e(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const D1=ts&&Lu<15||mm&&kEe<604;Po.copy=Mo.cut=(t,e)=>{let n=e,r=t.state.selection,o=n.type=="cut";if(r.empty)return;let s=D1?null:n.clipboardData,i=r.content(),{dom:a,text:l}=y3(t,i);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):I2e(t,a),o&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function R2e(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function A2e(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?O1(t,r.value,null,o,e):O1(t,r.textContent,r.innerHTML,o,e)},50)}function O1(t,e,n,r,o){let s=HK(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,o,s||je.empty)))return!0;if(!s)return!1;let i=R2e(s),a=i?t.state.tr.replaceSelectionWith(i,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function ZK(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Mo.paste=(t,e)=>{let n=e;if(t.composing&&!Yl)return;let r=D1?null:n.clipboardData,o=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&O1(t,ZK(r),r.getData("text/html"),o,n)?n.preventDefault():A2e(t,n)};class eY{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const tY=Xs?"altKey":"ctrlKey";Po.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=t.state.selection,s=o.empty?null:t.posAtCoords($E(n)),i;if(!(s&&s.pos>=o.from&&s.pos<=(o instanceof Je?o.to-1:o.to))){if(r&&r.mightDrag)i=Je.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=t.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=t.docView&&(i=Je.create(t.state.doc,f.posBefore))}}let a=(i||t.state.selection).content(),{dom:l,text:c,slice:u}=y3(t,a);(!n.dataTransfer.files.length||!uo||TK>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(D1?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",D1||n.dataTransfer.setData("text/plain",c),t.dragging=new eY(u,!n[tY],i)};Po.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Mo.dragover=Mo.dragenter=(t,e)=>e.preventDefault();Mo.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let o=t.posAtCoords($E(n));if(!o)return;let s=t.state.doc.resolve(o.pos),i=r&&r.slice;i?t.someProp("transformPasted",m=>{i=m(i,t)}):i=HK(t,ZK(n.dataTransfer),D1?null:n.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&!n[tY]);if(t.someProp("handleDrop",m=>m(t,n,i||je.empty,a))){n.preventDefault();return}if(!i)return;n.preventDefault();let l=i?vK(t.state.doc,s.pos,i):s.pos;l==null&&(l=s.pos);let c=t.state.tr;if(a){let{node:m}=r;m?m.replace(c):c.deleteSelection()}let u=c.mapping.map(l),f=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,h=c.doc;if(f?c.replaceRangeWith(u,u,i.content.firstChild):c.replaceRange(u,u,i),c.doc.eq(h))return;let p=c.doc.resolve(u);if(f&&Je.isSelectable(i.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(i.content.firstChild))c.setSelection(new Je(p));else{let m=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((y,x,b,C)=>m=C),c.setSelection(g3(t,p,c.doc.resolve(m)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};Po.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&sc(t)},20))};Po.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Po.beforeinput=(t,e)=>{if(uo&&Yl&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Hd(8,"Backspace")))))return;let{$cursor:o}=t.state.selection;o&&o.pos>0&&t.dispatch(t.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let t in Mo)Po[t]=Mo[t];function L1(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Ux{constructor(e,n){this.toDOM=e,this.spec=n||hf,this.side=this.spec.side||0}map(e,n,r,o){let{pos:s,deleted:i}=e.mapResult(n.from+o,this.side<0?-1:1);return i?null:new Mn(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Ux&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&L1(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Vu{constructor(e,n){this.attrs=e,this.spec=n||hf}map(e,n,r,o){let s=e.map(n.from+o,this.spec.inclusiveStart?-1:1)-r,i=e.map(n.to+o,this.spec.inclusiveEnd?1:-1)-r;return s>=i?null:new Mn(s,i,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Vu&&L1(this.attrs,e.attrs)&&L1(this.spec,e.spec)}static is(e){return e.type instanceof Vu}destroy(){}}class x3{constructor(e,n){this.attrs=e,this.spec=n||hf}map(e,n,r,o){let s=e.mapResult(n.from+o,1);if(s.deleted)return null;let i=e.mapResult(n.to+o,-1);return i.deleted||i.pos<=s.pos?null:new Mn(s.pos-r,i.pos-r,this)}valid(e,n){let{index:r,offset:o}=e.content.findIndex(n.from),s;return o==n.from&&!(s=e.child(r)).isText&&o+s.nodeSize==n.to}eq(e){return this==e||e instanceof x3&&L1(this.attrs,e.attrs)&&L1(this.spec,e.spec)}destroy(){}}class Mn{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Mn(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Mn(e,e,new Ux(n,r))}static inline(e,n,r,o){return new Mn(e,n,new Vu(r,o))}static node(e,n,r,o){return new Mn(e,n,new x3(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof Vu}get widget(){return this.type instanceof Ux}}const Xh=[],hf={};class Gt{constructor(e,n){this.local=e.length?e:Xh,this.children=n.length?n:Xh}static create(e,n){return n.length?Hx(n,e,0,hf):oo}find(e,n,r){let o=[];return this.findInner(e??0,n??1e9,o,0,r),o}findInner(e,n,r,o,s){for(let i=0;i<this.local.length;i++){let a=this.local[i];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+o,a.to+o))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<n&&this.children[i+1]>e){let a=this.children[i]+1;this.children[i+2].findInner(e-a,n-a,r,o+a,s)}}map(e,n,r){return this==oo||e.maps.length==0?this:this.mapInner(e,n,0,0,r||hf)}mapInner(e,n,r,o,s){let i;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,o);l&&l.type.valid(n,l)?(i||(i=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?P2e(this.children,i||[],e,n,r,o,s):i?new Gt(i.sort(pf),Xh):oo}add(e,n){return n.length?this==oo?Gt.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let o,s=0;e.forEach((a,l)=>{let c=l+r,u;if(u=rY(n,a,c)){for(o||(o=this.children.slice());s<o.length&&o[s]<l;)s+=3;o[s]==l?o[s+2]=o[s+2].addInner(a,u,c+1):o.splice(s,0,l,l+a.nodeSize,Hx(u,a,c+1,hf)),s+=3}});let i=nY(s?oY(n):n,-r);for(let a=0;a<i.length;a++)i[a].type.valid(e,i[a])||i.splice(a--,1);return new Gt(i.length?this.local.concat(i).sort(pf):this.local,o||this.children)}remove(e){return e.length==0||this==oo?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,o=this.local;for(let s=0;s<r.length;s+=3){let i,a=r[s]+n,l=r[s+1]+n;for(let u=0,f;u<e.length;u++)(f=e[u])&&f.from>a&&f.to<l&&(e[u]=null,(i||(i=[])).push(f));if(!i)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(i,a+1);c!=oo?r[s+2]=c:(r.splice(s,3),s-=3)}if(o.length){for(let s=0,i;s<e.length;s++)if(i=e[s])for(let a=0;a<o.length;a++)o[a].eq(i,n)&&(o==this.local&&(o=this.local.slice()),o.splice(a--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new Gt(o,r):oo}forChild(e,n){if(this==oo)return this;if(n.isLeaf)return Gt.empty;let r,o;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,i=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<i&&l.to>s&&l.type instanceof Vu){let c=Math.max(s,l.from)-s,u=Math.min(i,l.to)-s;c<u&&(o||(o=[])).push(l.copy(c,u))}}if(o){let a=new Gt(o.sort(pf),Xh);return r?new lu([a,r]):a}return r||oo}eq(e){if(this==e)return!0;if(!(e instanceof Gt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return _3(this.localsInner(e))}localsInner(e){if(this==oo)return Xh;if(e.inlineContent||!this.local.some(Vu.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Vu||n.push(this.local[r]);return n}forEachSet(e){e(this)}}Gt.empty=new Gt([],[]);Gt.removeOverlap=_3;const oo=Gt.empty;class lu{constructor(e){this.members=e}map(e,n){const r=this.members.map(o=>o.map(e,n,hf));return lu.from(r)}forChild(e,n){if(n.isLeaf)return Gt.empty;let r=[];for(let o=0;o<this.members.length;o++){let s=this.members[o].forChild(e,n);s!=oo&&(s instanceof lu?r=r.concat(s.members):r.push(s))}return lu.from(r)}eq(e){if(!(e instanceof lu)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let o=0;o<this.members.length;o++){let s=this.members[o].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let i=0;i<s.length;i++)n.push(s[i])}}return n?_3(r?n:n.sort(pf)):Xh}static from(e){switch(e.length){case 0:return oo;case 1:return e[0];default:return new lu(e.every(n=>n instanceof Gt)?e:e.reduce((n,r)=>n.concat(r instanceof Gt?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function P2e(t,e,n,r,o,s,i){let a=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let f=0;n.maps[c].forEach((h,p,m,y)=>{let x=y-m-(p-h);for(let b=0;b<a.length;b+=3){let C=a[b+1];if(C<0||h>C+u-f)continue;let E=a[b]+u-f;p>=E?a[b+1]=h<=E?-2:-1:h>=u&&x&&(a[b]+=x,a[b+1]+=x)}f+=x}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+s),f=u-o;if(f<0||f>=r.content.size){l=!0;continue}let h=n.map(t[c+1]+s,-1),p=h-o,{index:m,offset:y}=r.content.findIndex(f),x=r.maybeChild(m);if(x&&y==f&&y+x.nodeSize==p){let b=a[c+2].mapInner(n,x,u+1,t[c]+s+1,i);b!=oo?(a[c]=f,a[c+1]=p,a[c+2]=b):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=M2e(a,t,e,n,o,s,i),u=Hx(c,r,0,i);e=u.local;for(let f=0;f<a.length;f+=3)a[f+1]<0&&(a.splice(f,3),f-=3);for(let f=0,h=0;f<u.children.length;f+=3){let p=u.children[f];for(;h<a.length&&a[h]<p;)h+=3;a.splice(h,0,u.children[f],u.children[f+1],u.children[f+2])}}return new Gt(e.sort(pf),a)}function nY(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let o=t[r];n.push(new Mn(o.from+e,o.to+e,o.type))}return n}function M2e(t,e,n,r,o,s,i){function a(l,c){for(let u=0;u<l.local.length;u++){let f=l.local[u].map(r,o,c);f?n.push(f):i.onRemove&&i.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function rY(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,o=null;for(let s=0,i;s<t.length;s++)(i=t[s])&&i.from>n&&i.to<r&&((o||(o=[])).push(i),t[s]=null);return o}function oY(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Hx(t,e,n,r){let o=[],s=!1;e.forEach((a,l)=>{let c=rY(t,a,l+n);if(c){s=!0;let u=Hx(c,a,n+l+1,r);u!=oo&&o.push(l,l+a.nodeSize,u)}});let i=nY(s?oY(t):t,-n).sort(pf);for(let a=0;a<i.length;a++)i[a].type.valid(e,i[a])||(r.onRemove&&r.onRemove(i[a].spec),i.splice(a--,1));return i.length||o.length?new Gt(i,o):oo}function pf(t,e){return t.from-e.from||t.to-e.to}function _3(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let o=n+1;o<e.length;o++){let s=e[o];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[o]=s.copy(s.from,r.to),oL(e,o+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),oL(e,o,r.copy(s.from,r.to)));break}}}return e}function oL(t,e,n){for(;e<t.length&&pf(n,t[e])>0;)e++;t.splice(e,0,n)}function vS(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=oo&&e.push(r)}),t.cursorWrapper&&e.push(Gt.create(t.state.doc,[t.cursorWrapper.deco])),lu.from(e)}const D2e={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},O2e=ts&&Lu<=11;class L2e{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class j2e{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new L2e,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);ts&&Lu<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),O2e&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,D2e)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Q8(this.view)){if(this.suppressingSelectionUpdates)return sc(this.view);if(ts&&Lu<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&jf(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=M1(s))n.add(s);for(let s=e.anchorNode;s;s=M1(s))if(n.has(s)){r=s;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Q8(e)&&!this.ignoreSelectionChange(r),s=-1,i=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let f=this.registerMutation(n[u],l);f&&(s=s<0?f.from:Math.min(f.from,s),i=i<0?f.to:Math.max(f.to,i),f.typeOver&&(a=!0))}if(sa&&l.length){let u=l.filter(f=>f.nodeName=="BR");if(u.length==2){let[f,h]=u;f.parentNode&&f.parentNode.parentNode==h.parentNode?h.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let h of u){let p=h.parentNode;p&&p.nodeName=="LI"&&(!f||B2e(e,f)!=p)&&h.remove()}}}let c=null;s<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&jE(r)&&(c=m3(e))&&c.eq(nt.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,sc(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||o)&&(s>-1&&(e.docView.markDirty(s,i),V2e(e)),this.handleDOMChange(s,i,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||sc(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let f=e.addedNodes[u];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,s=e.nextSibling;if(ts&&Lu<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:f,nextSibling:h}=e.addedNodes[u];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(o=f),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(s=h)}let i=o&&o.parentNode==e.target?Hr(o)+1:0,a=r.localPosFromDOM(e.target,i,-1),l=s&&s.parentNode==e.target?Hr(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let sL=new WeakMap,iL=!1;function V2e(t){if(!sL.has(t)&&(sL.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=sa,iL)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),iL=!0}}function aL(t,e){let n=e.startContainer,r=e.startOffset,o=e.endContainer,s=e.endOffset,i=t.domAtPos(t.state.selection.anchor);return jf(i.node,i.offset,o,s)&&([n,r,o,s]=[o,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:s}}function $2e(t,e){if(e.getComposedRanges){let o=e.getComposedRanges(t.root)[0];if(o)return aL(t,o)}let n;function r(o){o.preventDefault(),o.stopImmediatePropagation(),n=o.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?aL(t,n):null}function B2e(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function F2e(t,e,n){let{node:r,fromOffset:o,toOffset:s,from:i,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],jE(l)||c.push({node:l.focusNode,offset:l.focusOffset})),uo&&t.input.lastKeyCode===8)for(let x=s;x>o;x--){let b=r.childNodes[x-1],C=b.pmViewDesc;if(b.nodeName=="BR"&&!C){s=x;break}if(!C||C.size)break}let f=t.state.doc,h=t.someProp("domParser")||ff.fromSchema(t.state.schema),p=f.resolve(i),m=null,y=h.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:o,to:s,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:U2e,context:p});if(c&&c[0].pos!=null){let x=c[0].pos,b=c[1]&&c[1].pos;b==null&&(b=x),m={anchor:x+i,head:b+i}}return{doc:y,sel:m,from:i,to:a}}function U2e(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Ao&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Ao&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const H2e=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function z2e(t,e,n,r,o){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let P=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,L=m3(t,P);if(L&&!t.state.selection.eq(L)){if(uo&&Yl&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",F=>F(t,Hd(13,"Enter"))))return;let $=t.state.tr.setSelection(L);P=="pointer"?$.setMeta("pointer",!0):P=="key"&&$.scrollIntoView(),s&&$.setMeta("composition",s),t.dispatch($)}return}let i=t.state.doc.resolve(e),a=i.sharedDepth(n);e=i.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=F2e(t,e,n),u=t.state.doc,f=u.slice(c.from,c.to),h,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(h=t.state.selection.to,p="end"):(h=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let m=q2e(f.content,c.doc.content,c.from,h,p);if(m&&t.input.domChangeCount++,(mm&&t.input.lastIOSEnter>Date.now()-225||Yl)&&o.some(P=>P.nodeType==1&&!H2e.test(P.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",P=>P(t,Hd(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(r&&l instanceof Ze&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let P=lL(t,t.state.doc,c.sel);if(P&&!P.eq(t.state.selection)){let L=t.state.tr.setSelection(P);s&&L.setMeta("composition",s),t.dispatch(L)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof Ze&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),ts&&Lu<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>c.from&&c.doc.textBetween(m.start-c.from-1,m.start-c.from+1)=="  "&&(m.start--,m.endA--,m.endB--);let y=c.doc.resolveNoCache(m.start-c.from),x=c.doc.resolveNoCache(m.endB-c.from),b=u.resolve(m.start),C=y.sameParent(x)&&y.parent.inlineContent&&b.end()>=m.endA,E;if((mm&&t.input.lastIOSEnter>Date.now()-225&&(!C||o.some(P=>P.nodeName=="DIV"||P.nodeName=="P"))||!C&&y.pos<c.doc.content.size&&!y.sameParent(x)&&(E=nt.findFrom(c.doc.resolve(y.pos+1),1,!0))&&E.head==x.pos)&&t.someProp("handleKeyDown",P=>P(t,Hd(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&G2e(u,m.start,m.endA,y,x)&&t.someProp("handleKeyDown",P=>P(t,Hd(8,"Backspace")))){Yl&&uo&&t.domObserver.suppressSelectionUpdates();return}uo&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),Yl&&!C&&y.start()!=x.start()&&x.parentOffset==0&&y.depth==x.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==m.endA&&(m.endB-=2,x=c.doc.resolveNoCache(m.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(P){return P(t,Hd(13,"Enter"))})},20));let R=m.start,D=m.endA,O,T,I;if(C){if(y.pos==x.pos)ts&&Lu<=11&&y.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>sc(t),20)),O=t.state.tr.delete(R,D),T=u.resolve(m.start).marksAcross(u.resolve(m.endA));else if(m.endA==m.endB&&(I=W2e(y.parent.content.cut(y.parentOffset,x.parentOffset),b.parent.content.cut(b.parentOffset,m.endA-b.start()))))O=t.state.tr,I.type=="add"?O.addMark(R,D,I.mark):O.removeMark(R,D,I.mark);else if(y.parent.child(y.index()).isText&&y.index()==x.index()-(x.textOffset?0:1)){let P=y.parent.textBetween(y.parentOffset,x.parentOffset);if(t.someProp("handleTextInput",L=>L(t,R,D,P)))return;O=t.state.tr.insertText(P,R,D)}}if(O||(O=t.state.tr.replace(R,D,c.doc.slice(m.start-c.from,m.endB-c.from))),c.sel){let P=lL(t,O.doc,c.sel);P&&!(uo&&t.composing&&P.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(P.head==R||P.head==O.mapping.map(D)-1)||ts&&P.empty&&P.head==R)&&O.setSelection(P)}T&&O.ensureMarks(T),s&&O.setMeta("composition",s),t.dispatch(O.scrollIntoView())}function lL(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:g3(t,e.resolve(n.anchor),e.resolve(n.head))}function W2e(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,o=n,s=r,i,a,l;for(let u=0;u<r.length;u++)o=r[u].removeFromSet(o);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(o.length==1&&s.length==0)a=o[0],i="add",l=u=>u.mark(a.addToSet(u.marks));else if(o.length==0&&s.length==1)a=s[0],i="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(_e.from(c).eq(t))return{mark:a,type:i}}function G2e(t,e,n,r,o){if(n-e<=o.pos-r.pos||wS(r,!0,!1)<o.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let i=t.resolve(wS(s,!0,!0));return!i.parent.isTextblock||i.pos>n||wS(i,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(i.parent.content)}function wS(t,e,n){let r=t.depth,o=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,o++}return o}function q2e(t,e,n,r,o){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:i,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(o=="end"){let l=Math.max(0,s-Math.min(i,a));r-=i+l-s}if(i<s&&t.size<e.size){let l=r<=s&&r>=i?s-r:0;s-=l,s&&s<e.size&&cL(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-i),i=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<t.size&&cL(t.textBetween(s-1,s+1))&&(s+=l?1:-1),i=s+(i-a),a=s}return{start:s,endA:i,endB:a}}function cL(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}const sY=y3;class iY{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new h2e,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(pL),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=fL(this),dL(this),this.nodeViews=hL(this),this.docView=z8(this.state.doc,uL(this),vS(this),this.dom,this),this.domObserver=new j2e(this,(r,o,s,i)=>z2e(this,r,o,s,i)),this.domObserver.start(),p2e(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&VI(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(pL),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let o=this.state,s=!1,i=!1;e.storedMarks&&this.composing&&(JK(this),i=!0),this.state=e;let a=o.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let p=hL(this);Y2e(p,this.nodeViews)&&(this.nodeViews=p,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&VI(this),this.editable=fL(this),dL(this);let l=vS(this),c=uL(this),u=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",f=s||!this.docView.matchesNode(e.doc,c,l);(f||!e.selection.eq(o.selection))&&(i=!0);let h=u=="preserve"&&i&&this.dom.style.overflowAnchor==null&&NEe(this);if(i){this.domObserver.stop();let p=f&&(ts||uo)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&K2e(o.selection,e.selection);if(f){let m=uo?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=T2e(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=z8(e.doc,c,l,this.dom,this)),m&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&JEe(this))?sc(this,p):(BK(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((r=this.dragging)===null||r===void 0)&&r.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():h&&IEe(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Je){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&V8(this,n.getBoundingClientRect(),e)}else V8(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,o=-1;if(this.state.doc.nodeAt(r.from)==r.node)o=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(o=s)}this.dragging=new eY(e.slice,e.move,o<0?void 0:Je.create(this.state.doc,o))}someProp(e,n){let r=this._props&&this._props[e],o;if(r!=null&&(o=n?n(r):r))return o;for(let i=0;i<this.directPlugins.length;i++){let a=this.directPlugins[i].props[e];if(a!=null&&(o=n?n(a):a))return o}let s=this.state.plugins;if(s)for(let i=0;i<s.length;i++){let a=s[i].props[e];if(a!=null&&(o=n?n(a):a))return o}}hasFocus(){if(ts){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&REe(this.dom),sc(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return OEe(this,e)}coordsAtPos(e,n=1){return PK(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let o=this.docView.posFromDOM(e,n,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,n){return BEe(this,n||this.state,e)}pasteHTML(e,n){return O1(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return O1(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(m2e(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],vS(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,yEe())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return y2e(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?Ao&&this.root.nodeType===11&&_Ee(this.dom.ownerDocument)==this.dom&&$2e(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function uL(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Mn.node(0,t.state.doc.content.size,e)]}function dL(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Mn.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function fL(t){return!t.someProp("editable",e=>e(t.state)===!1)}function K2e(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function hL(t){let e=Object.create(null);function n(r){for(let o in r)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=r[o])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function Y2e(t,e){let n=0,r=0;for(let o in t){if(t[o]!=e[o])return!0;n++}for(let o in e)r++;return n!=r}function pL(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Yu={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},zx={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Q2e=typeof navigator<"u"&&/Mac/.test(navigator.platform),X2e=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var zr=0;zr<10;zr++)Yu[48+zr]=Yu[96+zr]=String(zr);for(var zr=1;zr<=24;zr++)Yu[zr+111]="F"+zr;for(var zr=65;zr<=90;zr++)Yu[zr]=String.fromCharCode(zr+32),zx[zr]=String.fromCharCode(zr);for(var bS in Yu)zx.hasOwnProperty(bS)||(zx[bS]=Yu[bS]);function J2e(t){var e=Q2e&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||X2e&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?zx:Yu)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const Z2e=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function eke(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,o,s,i;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))Z2e?i=!0:o=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),i&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function tke(t){let e=Object.create(null);for(let n in t)e[eke(n)]=t[n];return e}function xS(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function nke(t){return new kt({props:{handleKeyDown:C3(t)}})}function C3(t){let e=tke(t);return function(n,r){let o=J2e(r),s,i=e[xS(o,r)];if(i&&i(n.state,n.dispatch,n))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let a=e[xS(o,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||o.charCodeAt(0)>127)&&(s=Yu[r.keyCode])&&s!=o){let a=e[xS(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const rke=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function aY(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const oke=(t,e,n)=>{let r=aY(t,n);if(!r)return!1;let o=E3(r);if(!o){let i=r.blockRange(),a=i&&qm(i);return a==null?!1:(e&&e(t.tr.lift(i,a).scrollIntoView()),!0)}let s=o.nodeBefore;if(dY(t,o,e,-1))return!0;if(r.parent.content.size==0&&(gm(s,"end")||Je.isSelectable(s)))for(let i=r.depth;;i--){let a=OE(t.doc,r.before(i),r.after(i),je.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(gm(s,"end")?nt.findFrom(l.doc.resolve(l.mapping.map(o.pos,-1)),-1):Je.create(l.doc,o.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(i==1||r.node(i-1).childCount>1)break}return s.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos-s.nodeSize,o.pos).scrollIntoView()),!0):!1},ske=(t,e,n)=>{let r=aY(t,n);if(!r)return!1;let o=E3(r);return o?lY(t,o,e):!1},ike=(t,e,n)=>{let r=cY(t,n);if(!r)return!1;let o=k3(r);return o?lY(t,o,e):!1};function lY(t,e,n){let r=e.nodeBefore,o=r,s=e.pos-1;for(;!o.isTextblock;s--){if(o.type.spec.isolating)return!1;let u=o.lastChild;if(!u)return!1;o=u}let i=e.nodeAfter,a=i,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=OE(t.doc,s,l,je.empty);if(!c||c.from!=s||c instanceof vr&&c.slice.size>=l-s)return!1;if(n){let u=t.tr.step(c);u.setSelection(Ze.create(u.doc,s)),n(u.scrollIntoView())}return!0}function gm(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const ake=(t,e,n)=>{let{$head:r,empty:o}=t.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=E3(r)}let i=s&&s.nodeBefore;return!i||!Je.isSelectable(i)?!1:(e&&e(t.tr.setSelection(Je.create(t.doc,s.pos-i.nodeSize)).scrollIntoView()),!0)};function E3(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function cY(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const lke=(t,e,n)=>{let r=cY(t,n);if(!r)return!1;let o=k3(r);if(!o)return!1;let s=o.nodeAfter;if(dY(t,o,e,1))return!0;if(r.parent.content.size==0&&(gm(s,"start")||Je.isSelectable(s))){let i=OE(t.doc,r.before(),r.after(),je.empty);if(i&&i.slice.size<i.to-i.from){if(e){let a=t.tr.step(i);a.setSelection(gm(s,"start")?nt.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):Je.create(a.doc,a.mapping.map(o.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos,o.pos+s.nodeSize).scrollIntoView()),!0):!1},cke=(t,e,n)=>{let{$head:r,empty:o}=t.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=k3(r)}let i=s&&s.nodeAfter;return!i||!Je.isSelectable(i)?!1:(e&&e(t.tr.setSelection(Je.create(t.doc,s.pos)).scrollIntoView()),!0)};function k3(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const uke=(t,e)=>{let n=t.selection,r=n instanceof Je,o;if(r){if(n.node.isTextblock||!eh(t.doc,n.from))return!1;o=n.from}else if(o=DE(t.doc,n.from,-1),o==null)return!1;if(e){let s=t.tr.join(o);r&&s.setSelection(Je.create(s.doc,o-t.doc.resolve(o).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},dke=(t,e)=>{let n=t.selection,r;if(n instanceof Je){if(n.node.isTextblock||!eh(t.doc,n.to))return!1;r=n.to}else if(r=DE(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},fke=(t,e)=>{let{$from:n,$to:r}=t.selection,o=n.blockRange(r),s=o&&qm(o);return s==null?!1:(e&&e(t.tr.lift(o,s).scrollIntoView()),!0)},hke=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function uY(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const pke=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),s=n.indexAfter(-1),i=uY(o.contentMatchAt(s));if(!i||!o.canReplaceWith(s,s,i))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,i.createAndFill());l.setSelection(nt.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},mke=(t,e)=>{let n=t.selection,{$from:r,$to:o}=n;if(n instanceof ci||r.parent.inlineContent||o.parent.inlineContent)return!1;let s=uY(o.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let i=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=t.tr.insert(i,s.createAndFill());a.setSelection(Ze.create(a.doc,i+1)),e(a.scrollIntoView())}return!0},gke=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Dp(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),o=r&&qm(r);return o==null?!1:(e&&e(t.tr.lift(r,o).scrollIntoView()),!0)},yke=(t,e)=>{let{$from:n,to:r}=t.selection,o,s=n.sharedDepth(r);return s==0?!1:(o=n.before(s),e&&e(t.tr.setSelection(Je.create(t.doc,o))),!0)};function vke(t,e,n){let r=e.nodeBefore,o=e.nodeAfter,s=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(o.isTextblock||eh(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function dY(t,e,n,r){let o=e.nodeBefore,s=e.nodeAfter,i,a,l=o.type.spec.isolating||s.type.spec.isolating;if(!l&&vke(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(i=(a=o.contentMatchAt(o.childCount)).findWrapping(s.type))&&a.matchType(i[0]||s.type).validEnd){if(n){let p=e.pos+s.nodeSize,m=_e.empty;for(let b=i.length-1;b>=0;b--)m=_e.from(i[b].create(null,m));m=_e.from(o.copy(m));let y=t.tr.step(new er(e.pos-1,p,e.pos,p,new je(m,1,0),i.length,!0)),x=y.doc.resolve(p+2*i.length);x.nodeAfter&&x.nodeAfter.type==o.type&&eh(y.doc,x.pos)&&y.join(x.pos),n(y.scrollIntoView())}return!0}let u=s.type.spec.isolating||r>0&&l?null:nt.findFrom(e,1),f=u&&u.$from.blockRange(u.$to),h=f&&qm(f);if(h!=null&&h>=e.depth)return n&&n(t.tr.lift(f,h).scrollIntoView()),!0;if(c&&gm(s,"start",!0)&&gm(o,"end")){let p=o,m=[];for(;m.push(p),!p.isTextblock;)p=p.lastChild;let y=s,x=1;for(;!y.isTextblock;y=y.firstChild)x++;if(p.canReplace(p.childCount,p.childCount,y.content)){if(n){let b=_e.empty;for(let E=m.length-1;E>=0;E--)b=_e.from(m[E].copy(b));let C=t.tr.step(new er(e.pos-m.length,e.pos+s.nodeSize,e.pos+x,e.pos+s.nodeSize-x,new je(b,m.length,0),0,!0));n(C.scrollIntoView())}return!0}}return!1}function fY(t){return function(e,n){let r=e.selection,o=t<0?r.$from:r.$to,s=o.depth;for(;o.node(s).isInline;){if(!s)return!1;s--}return o.node(s).isTextblock?(n&&n(e.tr.setSelection(Ze.create(e.doc,t<0?o.start(s):o.end(s)))),!0):!1}}const wke=fY(-1),bke=fY(1);function xke(t,e=null){return function(n,r){let{$from:o,$to:s}=n.selection,i=o.blockRange(s),a=i&&pK(i,t,e);return a?(r&&r(n.tr.wrap(i,a).scrollIntoView()),!0):!1}}function mL(t,e=null){return function(n,r){let o=!1;for(let s=0;s<n.selection.ranges.length&&!o;s++){let{$from:{pos:i},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(i,a,(l,c)=>{if(o)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)o=!0;else{let u=n.doc.resolve(c),f=u.index();o=u.parent.canReplaceWith(f,f+1,t)}})}if(!o)return!1;if(r){let s=n.tr;for(let i=0;i<n.selection.ranges.length;i++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[i];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function _ke(t,e=null){return function(n,r){let{$from:o,$to:s}=n.selection,i=o.blockRange(s);if(!i)return!1;let a=r?n.tr:null;return Cke(a,i,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function Cke(t,e,n,r=null){let o=!1,s=e,i=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=i.resolve(e.start-2);s=new jx(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new jx(e.$from,i.resolve(e.$to.end(e.depth)),e.depth)),o=!0}let a=pK(s,n,r,e);return a?(t&&Eke(t,e,a,o,n),!0):!1}function Eke(t,e,n,r,o){let s=_e.empty;for(let u=n.length-1;u>=0;u--)s=_e.from(n[u].type.create(n[u].attrs,s));t.step(new er(e.start-(r?2:0),e.end,e.start,e.end,new je(s,0,0),n.length,!0));let i=0;for(let u=0;u<n.length;u++)n[u].type==o&&(i=u+1);let a=n.length-i,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,f=e.endIndex,h=!0;u<f;u++,h=!1)!h&&Dp(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function kke(t){return function(e,n){let{$from:r,$to:o}=e.selection,s=r.blockRange(o,i=>i.childCount>0&&i.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?Ske(e,n,t,s):Tke(e,n,s):!0:!1}}function Ske(t,e,n,r){let o=t.tr,s=r.end,i=r.$to.end(r.depth);s<i&&(o.step(new er(s-1,i,s,i,new je(_e.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new jx(o.doc.resolve(r.$from.pos),o.doc.resolve(i),r.depth));const a=qm(r);if(a==null)return!1;o.lift(r,a);let l=o.mapping.map(s,-1)-1;return eh(o.doc,l)&&o.join(l),e(o.scrollIntoView()),!0}function Tke(t,e,n){let r=t.tr,o=n.parent;for(let p=n.end,m=n.endIndex-1,y=n.startIndex;m>y;m--)p-=o.child(m).nodeSize,r.delete(p-1,p+1);let s=r.doc.resolve(n.start),i=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==o.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,i.content.append(l?_e.empty:_e.from(o))))return!1;let f=s.pos,h=f+i.nodeSize;return r.step(new er(f-(a?1:0),h+(l?1:0),f+1,h-1,new je((a?_e.empty:_e.from(o.copy(_e.empty))).append(l?_e.empty:_e.from(o.copy(_e.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function Nke(t){return function(e,n){let{$from:r,$to:o}=e.selection,s=r.blockRange(o,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let i=s.startIndex;if(i==0)return!1;let a=s.parent,l=a.child(i-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=_e.from(c?t.create():null),f=new je(_e.from(t.create(null,_e.from(a.type.create(null,u)))),c?3:1,0),h=s.start,p=s.end;n(e.tr.step(new er(h-(c?3:1),p,h,p,f,1,!0)).scrollIntoView())}return!0}}function BE(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:o}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,s=n.storedMarks,n}}}class FE{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:o}=n,{tr:s}=r,i=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const f=l(...u)(i);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(s),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:o,state:s}=this,{view:i}=o,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(c),a.every(h=>h===!0)),f={...Object.fromEntries(Object.entries(r).map(([h,p])=>[h,(...y)=>{const x=this.buildProps(c,n),b=p(...y)(x);return a.push(b),f}])),run:u};return f}createCan(e){const{rawCommands:n,state:r}=this,o=!1,s=e||r.tr,i=this.buildProps(s,o);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)({...i,dispatch:void 0})])),chain:()=>this.createChain(s,o)}}buildProps(e,n=!0){const{rawCommands:r,editor:o,state:s}=this,{view:i}=o,a={tr:e,editor:o,view:i,state:BE({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class Ike{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(o=>o.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(o=>o!==n):delete this.callbacks[e]),this}once(e,n){const r=(...o)=>{this.off(e,r),n.apply(this,o)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function Qe(t,e,n){return t.config[e]===void 0&&t.parent?Qe(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Qe(t.parent,e,n):null}):t.config[e]}function UE(t){const e=t.filter(o=>o.type==="extension"),n=t.filter(o=>o.type==="node"),r=t.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function hY(t){const e=[],{nodeExtensions:n,markExtensions:r}=UE(t),o=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage,extensions:o},l=Qe(i,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(f=>{Object.entries(u.attributes).forEach(([h,p])=>{e.push({type:f,name:h,attribute:{...s,...p}})})})})}),o.forEach(i=>{const a={name:i.name,options:i.options,storage:i.storage},l=Qe(i,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,f])=>{const h={...s,...f};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:i.name,name:u,attribute:h})})}),e}function jr(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function gi(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([o,s])=>{if(!r[o]){r[o]=s;return}if(o==="class"){const a=s?String(s).split(" "):[],l=r[o]?r[o].split(" "):[],c=a.filter(u=>!l.includes(u));r[o]=[...l,...c].join(" ")}else if(o==="style"){const a=s?s.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[o]?r[o].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[f,h]=u.split(":").map(p=>p.trim());c.set(f,h)}),a.forEach(u=>{const[f,h]=u.split(":").map(p=>p.trim());c.set(f,h)}),r[o]=Array.from(c.entries()).map(([u,f])=>`${u}: ${f}`).join("; ")}else r[o]=s}),r},{})}function Wx(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>gi(n,r),{})}function pY(t){return typeof t=="function"}function It(t,e=void 0,...n){return pY(t)?e?t.bind(e)(...n):t(...n):t}function Rke(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Ake(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function gL(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const o=e.reduce((s,i)=>{const a=i.attribute.parseHTML?i.attribute.parseHTML(n):Ake(n.getAttribute(i.name));return a==null?s:{...s,[i.name]:a}},{});return{...r,...o}}}}function yL(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&Rke(n)?!1:n!=null))}function mY(t,e){var n;const r=hY(t),{nodeExtensions:o,markExtensions:s}=UE(t),i=(n=o.find(c=>Qe(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(o.map(c=>{const u=r.filter(b=>b.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((b,C)=>{const E=Qe(C,"extendNodeSchema",f);return{...b,...E?E(c):{}}},{}),p=yL({...h,content:It(Qe(c,"content",f)),marks:It(Qe(c,"marks",f)),group:It(Qe(c,"group",f)),inline:It(Qe(c,"inline",f)),atom:It(Qe(c,"atom",f)),selectable:It(Qe(c,"selectable",f)),draggable:It(Qe(c,"draggable",f)),code:It(Qe(c,"code",f)),whitespace:It(Qe(c,"whitespace",f)),linebreakReplacement:It(Qe(c,"linebreakReplacement",f)),defining:It(Qe(c,"defining",f)),isolating:It(Qe(c,"isolating",f)),attrs:Object.fromEntries(u.map(b=>{var C;return[b.name,{default:(C=b==null?void 0:b.attribute)===null||C===void 0?void 0:C.default}]}))}),m=It(Qe(c,"parseHTML",f));m&&(p.parseDOM=m.map(b=>gL(b,u)));const y=Qe(c,"renderHTML",f);y&&(p.toDOM=b=>y({node:b,HTMLAttributes:Wx(b,u)}));const x=Qe(c,"renderText",f);return x&&(p.toText=x),[c.name,p]})),l=Object.fromEntries(s.map(c=>{const u=r.filter(x=>x.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((x,b)=>{const C=Qe(b,"extendMarkSchema",f);return{...x,...C?C(c):{}}},{}),p=yL({...h,inclusive:It(Qe(c,"inclusive",f)),excludes:It(Qe(c,"excludes",f)),group:It(Qe(c,"group",f)),spanning:It(Qe(c,"spanning",f)),code:It(Qe(c,"code",f)),attrs:Object.fromEntries(u.map(x=>{var b;return[x.name,{default:(b=x==null?void 0:x.attribute)===null||b===void 0?void 0:b.default}]}))}),m=It(Qe(c,"parseHTML",f));m&&(p.parseDOM=m.map(x=>gL(x,u)));const y=Qe(c,"renderHTML",f);return y&&(p.toDOM=x=>y({mark:x,HTMLAttributes:Wx(x,u)})),[c.name,p]}));return new iK({topNode:i,nodes:a,marks:l})}function _S(t,e){return e.nodes[t]||e.marks[t]||null}function vL(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function S3(t,e){const n=Nc.fromSchema(e).serializeFragment(t),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(n),o.innerHTML}const Pke=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(o,s,i,a)=>{var l,c;const u=((c=(l=o.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:o,pos:s,parent:i,index:a}))||o.textContent||"%leaf%";n+=o.isAtom&&!o.isText?u:u.slice(0,Math.max(0,r-s))}),n};function T3(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class $f{constructor(e){this.find=e.find,this.handler=e.handler}}const Mke=(t,e)=>{if(T3(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function d0(t){var e;const{editor:n,from:r,to:o,text:s,rules:i,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(h=>h.type.spec.code))return!1;let u=!1;const f=Pke(c)+s;return i.forEach(h=>{if(u)return;const p=Mke(f,h.find);if(!p)return;const m=l.state.tr,y=BE({state:l.state,transaction:m}),x={from:r-(p[0].length-s.length),to:o},{commands:b,chain:C,can:E}=new FE({editor:n,state:y});h.handler({state:y,range:x,match:p,commands:b,chain:C,can:E})===null||!m.steps.length||(m.setMeta(a,{transform:m,from:r,to:o,text:s}),l.dispatch(m),u=!0)}),u}function Dke(t){const{editor:e,rules:n}=t,r=new kt({state:{init(){return null},apply(o,s,i){const a=o.getMeta(r);if(a)return a;const l=o.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=S3(_e.from(u),i.schema);const{from:f}=l,h=f+u.length;d0({editor:e,from:f,to:h,text:u,rules:n,plugin:r})}),o.selectionSet||o.docChanged?null:s}},props:{handleTextInput(o,s,i,a){return d0({editor:e,from:s,to:i,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:s}=o.state.selection;s&&d0({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(o,s){if(s.key!=="Enter")return!1;const{$cursor:i}=o.state.selection;return i?d0({editor:e,from:i.pos,to:i.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function Oke(t){return Object.prototype.toString.call(t).slice(8,-1)}function f0(t){return Oke(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function HE(t,e){const n={...t};return f0(t)&&f0(e)&&Object.keys(e).forEach(r=>{f0(e[r])&&f0(t[r])?n[r]=HE(t[r],e[r]):n[r]=e[r]}),n}class As{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=It(Qe(this,"addOptions",{name:this.name}))),this.storage=It(Qe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new As(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>HE(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new As(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=It(Qe(n,"addOptions",{name:n.name})),n.storage=It(Qe(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const i=o.marks();if(!!!i.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=i.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}}function Lke(t){return typeof t=="number"}class jke{constructor(e){this.find=e.find,this.handler=e.handler}}const Vke=(t,e,n)=>{if(T3(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(o=>{const s=[o.text];return s.index=o.index,s.input=t,s.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(o.replaceWith)),s}):[]};function $ke(t){const{editor:e,state:n,from:r,to:o,rule:s,pasteEvent:i,dropEvent:a}=t,{commands:l,chain:c,can:u}=new FE({editor:e,state:n}),f=[];return n.doc.nodesBetween(r,o,(p,m)=>{if(!p.isTextblock||p.type.spec.code)return;const y=Math.max(r,m),x=Math.min(o,m+p.content.size),b=p.textBetween(y-m,x-m,void 0,"￼");Vke(b,s.find,i).forEach(E=>{if(E.index===void 0)return;const R=y+E.index+1,D=R+E[0].length,O={from:n.tr.mapping.map(R),to:n.tr.mapping.map(D)},T=s.handler({state:n,range:O,match:E,commands:l,chain:c,can:u,pasteEvent:i,dropEvent:a});f.push(T)})}),f.every(p=>p!==null)}let h0=null;const Bke=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function Fke(t){const{editor:e,rules:n}=t;let r=null,o=!1,s=!1,i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:f,to:h,rule:p,pasteEvt:m})=>{const y=u.tr,x=BE({state:u,transaction:y});if(!(!$ke({editor:e,state:x,from:Math.max(f-1,0),to:h.b-1,rule:p,pasteEvent:m,dropEvent:a})||!y.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,y}};return n.map(u=>new kt({view(f){const h=m=>{var y;r=!((y=f.dom.parentElement)===null||y===void 0)&&y.contains(m.target)?f.dom.parentElement:null,r&&(h0=e)},p=()=>{h0&&(h0=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(f,h)=>{if(s=r===f.dom.parentElement,a=h,!s){const p=h0;p&&setTimeout(()=>{const m=p.state.selection;m&&p.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(f,h)=>{var p;const m=(p=h.clipboardData)===null||p===void 0?void 0:p.getData("text/html");return i=h,o=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(f,h,p)=>{const m=f[0],y=m.getMeta("uiEvent")==="paste"&&!o,x=m.getMeta("uiEvent")==="drop"&&!s,b=m.getMeta("applyPasteRules"),C=!!b;if(!y&&!x&&!C)return;if(C){let{text:D}=b;typeof D=="string"?D=D:D=S3(_e.from(D),p.schema);const{from:O}=b,T=O+D.length,I=Bke(D);return l({rule:u,state:p,from:O,to:{b:T},pasteEvt:I})}const E=h.doc.content.findDiffStart(p.doc.content),R=h.doc.content.findDiffEnd(p.doc.content);if(!(!Lke(E)||!R||E===R.b))return l({rule:u,state:p,from:E,to:R,pasteEvt:i})}}))}function Uke(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class nf{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=nf.resolve(e),this.schema=mY(this.extensions,n),this.setupExtensions()}static resolve(e){const n=nf.sort(nf.flatten(e)),r=Uke(n.map(o=>o.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},o=Qe(n,"addExtensions",r);return o?[n,...this.flatten(o())]:n}).flat(10)}static sort(e){return e.sort((r,o)=>{const s=Qe(r,"priority")||100,i=Qe(o,"priority")||100;return s>i?-1:s<i?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:_S(n.name,this.schema)},o=Qe(n,"addCommands",r);return o?{...e,...o()}:e},{})}get plugins(){const{editor:e}=this,n=nf.sort([...this.extensions].reverse()),r=[],o=[],s=n.map(i=>{const a={name:i.name,options:i.options,storage:i.storage,editor:e,type:_S(i.name,this.schema)},l=[],c=Qe(i,"addKeyboardShortcuts",a);let u={};if(i.type==="mark"&&Qe(i,"exitable",a)&&(u.ArrowRight=()=>As.handleExit({editor:e,mark:i})),c){const y=Object.fromEntries(Object.entries(c()).map(([x,b])=>[x,()=>b({editor:e})]));u={...u,...y}}const f=nke(u);l.push(f);const h=Qe(i,"addInputRules",a);vL(i,e.options.enableInputRules)&&h&&r.push(...h());const p=Qe(i,"addPasteRules",a);vL(i,e.options.enablePasteRules)&&p&&o.push(...p());const m=Qe(i,"addProseMirrorPlugins",a);if(m){const y=m();l.push(...y)}return l}).flat();return[Dke({editor:e,rules:r}),...Fke({editor:e,rules:o}),...s]}get attributes(){return hY(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=UE(this.extensions);return Object.fromEntries(n.filter(r=>!!Qe(r,"addNodeView")).map(r=>{const o=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:jr(r.name,this.schema)},i=Qe(r,"addNodeView",s);if(!i)return[];const a=(l,c,u,f,h)=>{const p=Wx(l,o);return i()({node:l,view:c,getPos:u,decorations:f,innerDecorations:h,editor:e,extension:r,HTMLAttributes:p})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:_S(e.name,this.schema)};e.type==="mark"&&(!((n=It(Qe(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const o=Qe(e,"onBeforeCreate",r),s=Qe(e,"onCreate",r),i=Qe(e,"onUpdate",r),a=Qe(e,"onSelectionUpdate",r),l=Qe(e,"onTransaction",r),c=Qe(e,"onFocus",r),u=Qe(e,"onBlur",r),f=Qe(e,"onDestroy",r);o&&this.editor.on("beforeCreate",o),s&&this.editor.on("create",s),i&&this.editor.on("update",i),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),f&&this.editor.on("destroy",f)})}}class sn{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=It(Qe(this,"addOptions",{name:this.name}))),this.storage=It(Qe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new sn(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>HE(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new sn({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=It(Qe(n,"addOptions",{name:n.name})),n.storage=It(Qe(n,"addStorage",{name:n.name,options:n.options})),n}}function gY(t,e,n){const{from:r,to:o}=e,{blockSeparator:s=`

`,textSerializers:i={}}=n||{};let a="";return t.nodesBetween(r,o,(l,c,u,f)=>{var h;l.isBlock&&c>r&&(a+=s);const p=i==null?void 0:i[l.type.name];if(p)return u&&(a+=p({node:l,pos:c,parent:u,index:f,range:e})),!1;l.isText&&(a+=(h=l==null?void 0:l.text)===null||h===void 0?void 0:h.slice(Math.max(r,c)-c,o-c))}),a}function yY(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const vY=sn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new kt({key:new Ht("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:o}=e,{ranges:s}=o,i=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=yY(n);return gY(r,{from:i,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),Hke=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),zke=(t=!1)=>({commands:e})=>e.setContent("",t),Wke=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:o}=r;return n&&o.forEach(({$from:s,$to:i})=>{t.doc.nodesBetween(s.pos,i.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,f=c.resolve(u.map(l)),h=c.resolve(u.map(l+a.nodeSize)),p=f.blockRange(h);if(!p)return;const m=qm(p);if(a.type.isTextblock){const{defaultType:y}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(p.start,y)}(m||m===0)&&e.lift(p,m)})}),!0},Gke=t=>e=>t(e),qke=()=>({state:t,dispatch:e})=>mke(t,e),Kke=(t,e)=>({editor:n,tr:r})=>{const{state:o}=n,s=o.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const i=r.mapping.map(e);return r.insert(i,s.content),r.setSelection(new Ze(r.doc.resolve(i-1))),!0},Yke=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const o=t.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===r.type){if(e){const a=o.before(s),l=o.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1},Qke=t=>({tr:e,state:n,dispatch:r})=>{const o=jr(t,n.schema),s=e.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===o){if(r){const l=s.before(i),c=s.after(i);e.delete(l,c).scrollIntoView()}return!0}return!1},Xke=t=>({tr:e,dispatch:n})=>{const{from:r,to:o}=t;return n&&e.delete(r,o),!0},Jke=()=>({state:t,dispatch:e})=>rke(t,e),Zke=()=>({commands:t})=>t.keyboardShortcut("Enter"),eSe=()=>({state:t,dispatch:e})=>pke(t,e);function Gx(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(o=>n.strict?e[o]===t[o]:T3(e[o])?e[o].test(t[o]):e[o]===t[o]):!0}function wY(t,e,n={}){return t.find(r=>r.type===e&&Gx(Object.fromEntries(Object.keys(n).map(o=>[o,r.attrs[o]])),n))}function wL(t,e,n={}){return!!wY(t,e,n)}function j1(t,e,n){var r;if(!t||!e)return;let o=t.parent.childAfter(t.parentOffset);if((!o.node||!o.node.marks.some(u=>u.type===e))&&(o=t.parent.childBefore(t.parentOffset)),!o.node||!o.node.marks.some(u=>u.type===e)||(n=n||((r=o.node.marks[0])===null||r===void 0?void 0:r.attrs),!wY([...o.node.marks],e,n)))return;let i=o.index,a=t.start()+o.offset,l=i+1,c=a+o.node.nodeSize;for(;i>0&&wL([...t.parent.child(i-1).marks],e,n);)i-=1,a-=t.parent.child(i).nodeSize;for(;l<t.parent.childCount&&wL([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function pd(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const tSe=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const s=pd(t,r.schema),{doc:i,selection:a}=n,{$from:l,from:c,to:u}=a;if(o){const f=j1(l,s,e);if(f&&f.from<=c&&f.to>=u){const h=Ze.create(i,f.from,f.to);n.setSelection(h)}}return!0},nSe=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function zE(t){return t instanceof Ze}function Ql(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function bY(t,e=null){if(!e)return null;const n=nt.atStart(t),r=nt.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const o=n.from,s=r.to;return e==="all"?Ze.create(t,Ql(0,o,s),Ql(t.content.size,o,s)):Ze.create(t,Ql(e,o,s),Ql(e,o,s))}function xY(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function WE(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const rSe=(t=null,e={})=>({editor:n,view:r,tr:o,dispatch:s})=>{e={scrollIntoView:!0,...e};const i=()=>{(WE()||xY())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!zE(n.state.selection))return i(),!0;const a=bY(o.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||o.setSelection(a),l&&o.storedMarks&&o.setStoredMarks(o.storedMarks),i()),!0},oSe=(t,e)=>n=>t.every((r,o)=>e(r,{...n,index:o})),sSe=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),_Y=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&_Y(r)}return t};function p0(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return _Y(n)}function qx(t,e,n){if(t instanceof oc||t instanceof _e)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,o=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return _e.fromArray(t.map(a=>e.nodeFromJSON(a)));const i=e.nodeFromJSON(t);return n.errorOnInvalidContent&&i.check(),i}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),qx("",e,n)}if(o){if(n.errorOnInvalidContent){let i=!1,a="";const l=new iK({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(i=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?ff.fromSchema(l).parseSlice(p0(t),n.parseOptions):ff.fromSchema(l).parse(p0(t),n.parseOptions),n.errorOnInvalidContent&&i)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=ff.fromSchema(e);return n.slice?s.parseSlice(p0(t),n.parseOptions).content:s.parse(p0(t),n.parseOptions)}return qx("",e,n)}function CY(t,e,n){const r=t.steps.length-1;if(r<e)return;const o=t.steps[r];if(!(o instanceof vr||o instanceof er))return;const s=t.mapping.maps[r];let i=0;s.forEach((a,l,c,u)=>{i===0&&(i=u)}),t.setSelection(nt.near(t.doc.resolve(i),n))}const iSe=t=>!("type"in t),aSe=(t,e,n)=>({tr:r,dispatch:o,editor:s})=>{var i;if(o){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;try{a=qx(e,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(i=n.errorOnInvalidContent)!==null&&i!==void 0?i:s.options.enableContentCheck})}catch(m){return s.emit("contentError",{editor:s,error:m,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}let{from:l,to:c}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},u=!0,f=!0;if((iSe(a)?a:[a]).forEach(m=>{m.check(),u=u?m.isText&&m.marks.length===0:!1,f=f?m.isBlock:!1}),l===c&&f){const{parent:m}=r.doc.resolve(l);m.isTextblock&&!m.type.spec.code&&!m.childCount&&(l-=1,c+=1)}let p;if(u){if(Array.isArray(e))p=e.map(m=>m.text||"").join("");else if(e instanceof _e){let m="";e.forEach(y=>{y.text&&(m+=y.text)}),p=m}else typeof e=="object"&&e&&e.text?p=e.text:p=e;r.insertText(p,l,c)}else p=a,r.replaceWith(l,c,p);n.updateSelection&&CY(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:l,text:p}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:l,text:p})}return!0},lSe=()=>({state:t,dispatch:e})=>uke(t,e),cSe=()=>({state:t,dispatch:e})=>dke(t,e),uSe=()=>({state:t,dispatch:e})=>oke(t,e),dSe=()=>({state:t,dispatch:e})=>lke(t,e),fSe=()=>({state:t,dispatch:e,tr:n})=>{try{const r=DE(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},hSe=()=>({state:t,dispatch:e,tr:n})=>{try{const r=DE(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},pSe=()=>({state:t,dispatch:e})=>ske(t,e),mSe=()=>({state:t,dispatch:e})=>ike(t,e);function EY(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function gSe(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,o,s,i;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))WE()||EY()?i=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),o&&(n=`Ctrl-${n}`),i&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const ySe=t=>({editor:e,view:n,tr:r,dispatch:o})=>{const s=gSe(t).split(/-(?!$)/),i=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:i==="Space"?" ":i,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&o&&r.maybeStep(u)}),!0};function V1(t,e,n={}){const{from:r,to:o,empty:s}=t.selection,i=e?jr(e,t.schema):null,a=[];t.doc.nodesBetween(r,o,(f,h)=>{if(f.isText)return;const p=Math.max(r,h),m=Math.min(o,h+f.nodeSize);a.push({node:f,from:p,to:m})});const l=o-r,c=a.filter(f=>i?i.name===f.node.type.name:!0).filter(f=>Gx(f.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((f,h)=>f+h.to-h.from,0)>=l}const vSe=(t,e={})=>({state:n,dispatch:r})=>{const o=jr(t,n.schema);return V1(n,o,e)?fke(n,r):!1},wSe=()=>({state:t,dispatch:e})=>gke(t,e),bSe=t=>({state:e,dispatch:n})=>{const r=jr(t,e.schema);return kke(r)(e,n)},xSe=()=>({state:t,dispatch:e})=>hke(t,e);function GE(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function bL(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,o)=>(n.includes(o)||(r[o]=t[o]),r),{})}const _Se=(t,e)=>({tr:n,state:r,dispatch:o})=>{let s=null,i=null;const a=GE(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=jr(t,r.schema)),a==="mark"&&(i=pd(t,r.schema)),o&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&n.setNodeMarkup(u,void 0,bL(c.attrs,e)),i&&c.marks.length&&c.marks.forEach(f=>{i===f.type&&n.addMark(u,u+c.nodeSize,i.create(bL(f.attrs,e)))})})}),!0):!1},CSe=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),ESe=()=>({tr:t,dispatch:e})=>{if(e){const n=new ci(t.doc);t.setSelection(n)}return!0},kSe=()=>({state:t,dispatch:e})=>ake(t,e),SSe=()=>({state:t,dispatch:e})=>cke(t,e),TSe=()=>({state:t,dispatch:e})=>yke(t,e),NSe=()=>({state:t,dispatch:e})=>bke(t,e),ISe=()=>({state:t,dispatch:e})=>wke(t,e);function Kx(t,e,n={},r={}){return qx(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const RSe=(t,e=!1,n={},r={})=>({editor:o,tr:s,dispatch:i,commands:a})=>{var l,c;const{doc:u}=s;if(n.preserveWhitespace!=="full"){const f=Kx(t,o.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:o.options.enableContentCheck});return i&&s.replaceWith(0,u.content.size,f).setMeta("preventUpdate",!e),!0}return i&&s.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:u.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:o.options.enableContentCheck})};function kY(t,e){const n=pd(e,t.schema),{from:r,to:o,empty:s}=t.selection,i=[];s?(t.storedMarks&&i.push(...t.storedMarks),i.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,o,l=>{i.push(...l.marks)});const a=i.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function SY(t,e){const n=new f3(t);return e.forEach(r=>{r.steps.forEach(o=>{n.step(o)})}),n}function ASe(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function xL(t,e){const n=[];return t.descendants((r,o)=>{e(r)&&n.push({node:r,pos:o})}),n}function TY(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(o,s)=>{n(o)&&r.push({node:o,pos:s})}),r}function PSe(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function qE(t){return e=>PSe(e.$from,t)}function MSe(t,e){const n=nf.resolve(t);return mY(n,e)}function DSe(t,e){const n={from:0,to:t.content.size};return gY(t,n,e)}function OSe(t,e){const n=jr(e,t.schema),{from:r,to:o}=t.selection,s=[];t.doc.nodesBetween(r,o,a=>{s.push(a)});const i=s.reverse().find(a=>a.type.name===n.name);return i?{...i.attrs}:{}}function NY(t,e){const n=GE(typeof e=="string"?e:e.name,t.schema);return n==="node"?OSe(t,e):n==="mark"?kY(t,e):{}}function LSe(t,e=JSON.stringify){const n={};return t.filter(r=>{const o=e(r);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function jSe(t){const e=LSe(t);return e.length===1?e:e.filter((n,r)=>!e.filter((s,i)=>i!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function IY(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((o,s)=>{const i=[];if(o.ranges.length)o.forEach((a,l)=>{i.push({from:a,to:l})});else{const{from:a,to:l}=n[s];if(a===void 0||l===void 0)return;i.push({from:a,to:l})}i.forEach(({from:a,to:l})=>{const c=e.slice(s).map(a,-1),u=e.slice(s).map(l),f=e.invert().map(c,-1),h=e.invert().map(u);r.push({oldRange:{from:f,to:h},newRange:{from:c,to:u}})})}),jSe(r)}function N3(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(o=>{const s=n.resolve(t),i=j1(s,o.type);i&&r.push({mark:o,...i})}):n.nodesBetween(t,e,(o,s)=>{!o||(o==null?void 0:o.nodeSize)===void 0||r.push(...o.marks.map(i=>({from:s,to:s+o.nodeSize,mark:i})))}),r}function yb(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const o=t.find(s=>s.type===e&&s.name===r);return o?o.attribute.keepOnSplit:!1}))}function $I(t,e,n={}){const{empty:r,ranges:o}=t.selection,s=e?pd(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(f=>s?s.name===f.type.name:!0).find(f=>Gx(f.attrs,n,{strict:!1}));let i=0;const a=[];if(o.forEach(({$from:f,$to:h})=>{const p=f.pos,m=h.pos;t.doc.nodesBetween(p,m,(y,x)=>{if(!y.isText&&!y.marks.length)return;const b=Math.max(p,x),C=Math.min(m,x+y.nodeSize),E=C-b;i+=E,a.push(...y.marks.map(R=>({mark:R,from:b,to:C})))})}),i===0)return!1;const l=a.filter(f=>s?s.name===f.mark.type.name:!0).filter(f=>Gx(f.mark.attrs,n,{strict:!1})).reduce((f,h)=>f+h.to-h.from,0),c=a.filter(f=>s?f.mark.type!==s&&f.mark.type.excludes(s):!0).reduce((f,h)=>f+h.to-h.from,0);return(l>0?l+c:l)>=i}function VSe(t,e,n={}){if(!e)return V1(t,null,n)||$I(t,null,n);const r=GE(e,t.schema);return r==="node"?V1(t,e,n):r==="mark"?$I(t,e,n):!1}function _L(t,e){const{nodeExtensions:n}=UE(e),r=n.find(i=>i.name===t);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},s=It(Qe(r,"group",o));return typeof s!="string"?!1:s.split(" ").includes("list")}function I3(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let o=!0;return t.content.forEach(s=>{o!==!1&&(I3(s,{ignoreWhitespace:n,checkChildren:e})||(o=!1))}),o}return!1}function CL(t){return t instanceof Je}function BI(t,e,n){const o=t.state.doc.content.size,s=Ql(e,0,o),i=Ql(n,0,o),a=t.coordsAtPos(s),l=t.coordsAtPos(i,-1),c=Math.min(a.top,l.top),u=Math.max(a.bottom,l.bottom),f=Math.min(a.left,l.left),h=Math.max(a.right,l.right),p=h-f,m=u-c,b={top:c,bottom:u,left:f,right:h,width:p,height:m,x:f,y:c};return{...b,toJSON:()=>b}}function $Se(t,e,n){var r;const{selection:o}=e;let s=null;if(zE(o)&&(s=o.$cursor),s){const a=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:i}=o;return i.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,f,h)=>{if(c)return!1;if(u.isInline){const p=!h||h.type.allowsMarkType(n),m=!!n.isInSet(u.marks)||!u.marks.some(y=>y.type.excludes(n));c=p&&m}return!c}),c})}const BSe=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const{selection:s}=n,{empty:i,ranges:a}=s,l=pd(t,r.schema);if(o)if(i){const c=kY(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,f=c.$to.pos;r.doc.nodesBetween(u,f,(h,p)=>{const m=Math.max(p,u),y=Math.min(p+h.nodeSize,f);h.marks.find(b=>b.type===l)?h.marks.forEach(b=>{l===b.type&&n.addMark(m,y,l.create({...b.attrs,...e}))}):n.addMark(m,y,l.create(e))})});return $Se(r,n,l)},FSe=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),USe=(t,e={})=>({state:n,dispatch:r,chain:o})=>{const s=jr(t,n.schema);let i;return n.selection.$anchor.sameParent(n.selection.$head)&&(i=n.selection.$anchor.parent.attrs),s.isTextblock?o().command(({commands:a})=>mL(s,{...i,...e})(n)?!0:a.clearNodes()).command(({state:a})=>mL(s,{...i,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},HSe=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,o=Ql(t,0,r.content.size),s=Je.create(r,o);e.setSelection(s)}return!0},zSe=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:o,to:s}=typeof t=="number"?{from:t,to:t}:t,i=Ze.atStart(r).from,a=Ze.atEnd(r).to,l=Ql(o,i,a),c=Ql(s,i,a),u=Ze.create(r,l,c);e.setSelection(u)}return!0},WSe=t=>({state:e,dispatch:n})=>{const r=jr(t,e.schema);return Nke(r)(e,n)};function EL(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(o=>e==null?void 0:e.includes(o.type.name));t.tr.ensureMarks(r)}}const GSe=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:o})=>{const{selection:s,doc:i}=e,{$from:a,$to:l}=s,c=o.extensionManager.attributes,u=yb(c,a.node().type.name,a.node().attrs);if(s instanceof Je&&s.node.isBlock)return!a.parentOffset||!Dp(i,a.pos)?!1:(r&&(t&&EL(n,o.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const f=l.parentOffset===l.parent.content.size,h=a.depth===0?void 0:ASe(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=f&&h?[{type:h,attrs:u}]:void 0,m=Dp(e.doc,e.mapping.map(a.pos),1,p);if(!p&&!m&&Dp(e.doc,e.mapping.map(a.pos),1,h?[{type:h}]:void 0)&&(m=!0,p=h?[{type:h,attrs:u}]:void 0),r){if(m&&(s instanceof Ze&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,p),h&&!f&&!a.parentOffset&&a.parent.type!==h)){const y=e.mapping.map(a.before()),x=e.doc.resolve(y);a.node(-1).canReplaceWith(x.index(),x.index()+1,h)&&e.setNodeMarkup(e.mapping.map(a.before()),h)}t&&EL(n,o.extensionManager.splittableMarks),e.scrollIntoView()}return m},qSe=(t,e={})=>({tr:n,state:r,dispatch:o,editor:s})=>{var i;const a=jr(t,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const f=l.node(-1);if(f.type!==a)return!1;const h=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(o){let b=_e.empty;const C=l.index(-1)?1:l.index(-2)?2:3;for(let I=l.depth-C;I>=l.depth-3;I-=1)b=_e.from(l.node(I).copy(b));const E=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,R={...yb(h,l.node().type.name,l.node().attrs),...e},D=((i=a.contentMatch.defaultType)===null||i===void 0?void 0:i.createAndFill(R))||void 0;b=b.append(_e.from(a.createAndFill(null,D)||void 0));const O=l.before(l.depth-(C-1));n.replace(O,l.after(-E),new je(b,4-C,0));let T=-1;n.doc.nodesBetween(O,n.doc.content.size,(I,P)=>{if(T>-1)return!1;I.isTextblock&&I.content.size===0&&(T=P+1)}),T>-1&&n.setSelection(Ze.near(n.doc.resolve(T))),n.scrollIntoView()}return!0}const p=c.pos===l.end()?f.contentMatchAt(0).defaultType:null,m={...yb(h,f.type.name,f.attrs),...e},y={...yb(h,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const x=p?[{type:a,attrs:m},{type:p,attrs:y}]:[{type:a,attrs:m}];if(!Dp(n.doc,l.pos,2))return!1;if(o){const{selection:b,storedMarks:C}=r,{splittableMarks:E}=s.extensionManager,R=C||b.$to.parentOffset&&b.$from.marks();if(n.split(l.pos,2,x).scrollIntoView(),!R||!o)return!0;const D=R.filter(O=>E.includes(O.type.name));n.ensureMarks(D)}return!0},CS=(t,e)=>{const n=qE(i=>i.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&eh(t.doc,n.pos)&&t.join(n.pos),!0},ES=(t,e)=>{const n=qE(i=>i.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===(o==null?void 0:o.type)&&eh(t.doc,r)&&t.join(r),!0},KSe=(t,e,n,r={})=>({editor:o,tr:s,state:i,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:f,splittableMarks:h}=o.extensionManager,p=jr(t,i.schema),m=jr(e,i.schema),{selection:y,storedMarks:x}=i,{$from:b,$to:C}=y,E=b.blockRange(C),R=x||y.$to.parentOffset&&y.$from.marks();if(!E)return!1;const D=qE(O=>_L(O.type.name,f))(y);if(E.depth>=1&&D&&E.depth-D.depth<=1){if(D.node.type===p)return c.liftListItem(m);if(_L(D.node.type.name,f)&&p.validContent(D.node.content)&&a)return l().command(()=>(s.setNodeMarkup(D.pos,p),!0)).command(()=>CS(s,p)).command(()=>ES(s,p)).run()}return!n||!R||!a?l().command(()=>u().wrapInList(p,r)?!0:c.clearNodes()).wrapInList(p,r).command(()=>CS(s,p)).command(()=>ES(s,p)).run():l().command(()=>{const O=u().wrapInList(p,r),T=R.filter(I=>h.includes(I.type.name));return s.ensureMarks(T),O?!0:c.clearNodes()}).wrapInList(p,r).command(()=>CS(s,p)).command(()=>ES(s,p)).run()},YSe=(t,e={},n={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:s=!1}=n,i=pd(t,r.schema);return $I(r,i,e)?o.unsetMark(i,{extendEmptyMarkRange:s}):o.setMark(i,e)},QSe=(t,e,n={})=>({state:r,commands:o})=>{const s=jr(t,r.schema),i=jr(e,r.schema),a=V1(r,s,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?o.setNode(i,l):o.setNode(s,{...l,...n})},XSe=(t,e={})=>({state:n,commands:r})=>{const o=jr(t,n.schema);return V1(n,o,e)?r.lift(o):r.wrapIn(o,e)},JSe=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const o=n[r];let s;if(o.spec.isInputRules&&(s=o.getState(t))){if(e){const i=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)i.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=i.doc.resolve(s.from).marks();i.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else i.delete(s.from,s.to)}return!0}}return!1},ZSe=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:o}=n;return r||e&&o.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},eTe=(t,e={})=>({tr:n,state:r,dispatch:o})=>{var s;const{extendEmptyMarkRange:i=!1}=e,{selection:a}=n,l=pd(t,r.schema),{$from:c,empty:u,ranges:f}=a;if(!o)return!0;if(u&&i){let{from:h,to:p}=a;const m=(s=c.marks().find(x=>x.type===l))===null||s===void 0?void 0:s.attrs,y=j1(c,l,m);y&&(h=y.from,p=y.to),n.removeMark(h,p,l)}else f.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,l)});return n.removeStoredMark(l),!0},tTe=(t,e={})=>({tr:n,state:r,dispatch:o})=>{let s=null,i=null;const a=GE(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=jr(t,r.schema)),a==="mark"&&(i=pd(t,r.schema)),o&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;let f,h,p,m;n.selection.empty?r.doc.nodesBetween(c,u,(y,x)=>{s&&s===y.type&&(p=Math.max(x,c),m=Math.min(x+y.nodeSize,u),f=x,h=y)}):r.doc.nodesBetween(c,u,(y,x)=>{x<c&&s&&s===y.type&&(p=Math.max(x,c),m=Math.min(x+y.nodeSize,u),f=x,h=y),x>=c&&x<=u&&(s&&s===y.type&&n.setNodeMarkup(x,void 0,{...y.attrs,...e}),i&&y.marks.length&&y.marks.forEach(b=>{if(i===b.type){const C=Math.max(x,c),E=Math.min(x+y.nodeSize,u);n.addMark(C,E,i.create({...b.attrs,...e}))}}))}),h&&(f!==void 0&&n.setNodeMarkup(f,void 0,{...h.attrs,...e}),i&&h.marks.length&&h.marks.forEach(y=>{i===y.type&&n.addMark(p,m,i.create({...y.attrs,...e}))}))}),!0):!1},nTe=(t,e={})=>({state:n,dispatch:r})=>{const o=jr(t,n.schema);return xke(o,e)(n,r)},rTe=(t,e={})=>({state:n,dispatch:r})=>{const o=jr(t,n.schema);return _ke(o,e)(n,r)};var oTe=Object.freeze({__proto__:null,blur:Hke,clearContent:zke,clearNodes:Wke,command:Gke,createParagraphNear:qke,cut:Kke,deleteCurrentNode:Yke,deleteNode:Qke,deleteRange:Xke,deleteSelection:Jke,enter:Zke,exitCode:eSe,extendMarkRange:tSe,first:nSe,focus:rSe,forEach:oSe,insertContent:sSe,insertContentAt:aSe,joinBackward:uSe,joinDown:cSe,joinForward:dSe,joinItemBackward:fSe,joinItemForward:hSe,joinTextblockBackward:pSe,joinTextblockForward:mSe,joinUp:lSe,keyboardShortcut:ySe,lift:vSe,liftEmptyBlock:wSe,liftListItem:bSe,newlineInCode:xSe,resetAttributes:_Se,scrollIntoView:CSe,selectAll:ESe,selectNodeBackward:kSe,selectNodeForward:SSe,selectParentNode:TSe,selectTextblockEnd:NSe,selectTextblockStart:ISe,setContent:RSe,setMark:BSe,setMeta:FSe,setNode:USe,setNodeSelection:HSe,setTextSelection:zSe,sinkListItem:WSe,splitBlock:GSe,splitListItem:qSe,toggleList:KSe,toggleMark:YSe,toggleNode:QSe,toggleWrap:XSe,undoInputRule:JSe,unsetAllMarks:ZSe,unsetMark:eTe,updateAttributes:tTe,wrapIn:nTe,wrapInList:rTe});const RY=sn.create({name:"commands",addCommands(){return{...oTe}}}),AY=sn.create({name:"drop",addProseMirrorPlugins(){return[new kt({key:new Ht("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),PY=sn.create({name:"editable",addProseMirrorPlugins(){return[new kt({key:new Ht("editable"),props:{editable:()=>this.editor.options.editable}})]}}),MY=sn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new kt({key:new Ht("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),DY=sn.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:i})=>[()=>i.undoInputRule(),()=>i.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:f}=l,{pos:h,parent:p}=f,m=f.parent.isTextblock&&h>0?a.doc.resolve(h-1):f,y=m.parent.type.spec.isolating,x=f.pos-f.parentOffset,b=y&&m.parent.childCount===1?x===f.pos:nt.atStart(c).from===h;return!u||!p.type.isTextblock||p.textContent.length||!b||b&&f.parent.type.name==="paragraph"?!1:i.clearNodes()}),()=>i.deleteSelection(),()=>i.joinBackward(),()=>i.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:i})=>[()=>i.deleteSelection(),()=>i.deleteCurrentNode(),()=>i.joinForward(),()=>i.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:i})=>[()=>i.newlineInCode(),()=>i.createParagraphNear(),()=>i.liftEmptyBlock(),()=>i.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return WE()||EY()?s:o},addProseMirrorPlugins(){return[new kt({key:new Ht("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(y=>y.getMeta("composition")))return;const r=t.some(y=>y.docChanged)&&!e.doc.eq(n.doc),o=t.some(y=>y.getMeta("preventClearDocument"));if(!r||o)return;const{empty:s,from:i,to:a}=e.selection,l=nt.atStart(e.doc).from,c=nt.atEnd(e.doc).to;if(s||!(i===l&&a===c)||!I3(n.doc))return;const h=n.tr,p=BE({state:n,transaction:h}),{commands:m}=new FE({editor:this.editor,state:p});if(m.clearNodes(),!!h.steps.length)return h}})]}}),OY=sn.create({name:"paste",addProseMirrorPlugins(){return[new kt({key:new Ht("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),LY=sn.create({name:"tabindex",addProseMirrorPlugins(){return[new kt({key:new Ht("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});var Hg=Object.freeze({__proto__:null,ClipboardTextSerializer:vY,Commands:RY,Drop:AY,Editable:PY,FocusEvents:MY,Keymap:DY,Paste:OY,Tabindex:LY});class zd{get name(){return this.node.type.name}constructor(e,n,r=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=o}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new zd(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new zd(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new zd(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const o=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,i=this.pos+r+(s?0:1),a=this.resolvedPos.doc.resolve(i);if(!o&&a.depth<=this.depth)return;const l=new zd(a,this.editor,o,o?n:null);o&&(l.actualDepth=this.depth+1),e.push(new zd(a,this.editor,o,o?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,o=this.parent;for(;o&&!r;){if(o.node.type.name===e)if(Object.keys(n).length>0){const s=o.node.attrs,i=Object.keys(n);for(let a=0;a<i.length;a+=1){const l=i[a];if(s[l]!==n[l])break}}else r=o;o=o.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let o=[];if(!this.children||this.children.length===0)return o;const s=Object.keys(n);return this.children.forEach(i=>{r&&o.length>0||(i.node.type.name===e&&s.every(l=>n[l]===i.node.attrs[l])&&o.push(i),!(r&&o.length>0)&&(o=o.concat(i.querySelectorAll(e,n,r))))}),o}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const sTe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function iTe(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute("data-tiptap-style",""),o.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(o),o}let aTe=class extends Ike{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:o})=>this.options.onDrop(n,r,o)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=iTe(sTe,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=pY(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(s=>{const i=typeof s=="string"?`${s}$`:s.key;r=n.filter(a=>!a.key.startsWith(i))}),n.length===r.length)return;const o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}createExtensionManager(){var e,n;const o=[...this.options.enableCoreExtensions?[PY,vY.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),RY,MY,DY,LY,AY,OY].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new nf(o,this)}createCommandManager(){this.commandManager=new FE({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=Kx(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(i){if(!(i instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(i.message))throw i;this.emit("contentError",{editor:this,error:i,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),n=Kx(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=bY(n,this.options.autofocus);this.view=new iY(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Zd.create({doc:n,selection:r||void 0})});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(i=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(i)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=e.getMeta("focus"),s=e.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return NY(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,o=typeof e=="string"?n:e;return VSe(this.state,r,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return S3(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return DSe(this.state.doc,{blockSeparator:n,textSerializers:{...yY(this.schema),...r}})}get isEmpty(){return I3(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new zd(n,this)}get $doc(){return this.$pos(0)}};function ym(t){return new $f({find:t.find,handler:({state:e,range:n,match:r})=>{const o=It(t.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:s}=e,i=r[r.length-1],a=r[0];if(i){const l=a.search(/\S/),c=n.from+a.indexOf(i),u=c+i.length;if(N3(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(y=>y===t.type&&y!==p.mark.type)).filter(p=>p.to>c).length)return null;u<n.to&&s.delete(u,n.to),c>n.from&&s.delete(n.from+l,c);const h=n.from+l+i.length;s.addMark(n.from+l,h,t.type.create(o||{})),s.removeStoredMark(t.type)}}})}let fa=class FI{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=It(Qe(this,"addOptions",{name:this.name}))),this.storage=It(Qe(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new FI(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>HE(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new FI(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=It(Qe(n,"addOptions",{name:n.name})),n.storage=It(Qe(n,"addStorage",{name:n.name,options:n.options})),n}};class lTe{constructor(e,n,r){this.isDragging=!1,this.component=e,this.editor=n.editor,this.options={stopEvent:null,ignoreMutation:null,...r},this.extension=n.extension,this.node=n.node,this.decorations=n.decorations,this.innerDecorations=n.innerDecorations,this.view=n.view,this.HTMLAttributes=n.HTMLAttributes,this.getPos=n.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var n,r,o,s,i,a,l;const{view:c}=this.editor,u=e.target,f=u.nodeType===3?(n=u.parentElement)===null||n===void 0?void 0:n.closest("[data-drag-handle]"):u.closest("[data-drag-handle]");if(!this.dom||!((r=this.contentDOM)===null||r===void 0)&&r.contains(u)||!f)return;let h=0,p=0;if(this.dom!==f){const b=this.dom.getBoundingClientRect(),C=f.getBoundingClientRect(),E=(o=e.offsetX)!==null&&o!==void 0?o:(s=e.nativeEvent)===null||s===void 0?void 0:s.offsetX,R=(i=e.offsetY)!==null&&i!==void 0?i:(a=e.nativeEvent)===null||a===void 0?void 0:a.offsetY;h=C.x-b.x+E,p=C.y-b.y+R}(l=e.dataTransfer)===null||l===void 0||l.setDragImage(this.dom,h,p);const m=this.getPos();if(typeof m!="number")return;const y=Je.create(c.state.doc,m),x=c.state.tr.setSelection(y);c.dispatch(x)}stopEvent(e){var n;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:e});const r=e.target;if(!(this.dom.contains(r)&&!(!((n=this.contentDOM)===null||n===void 0)&&n.contains(r))))return!1;const s=e.type.startsWith("drag"),i=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!i&&!s)return!0;const{isEditable:l}=this.editor,{isDragging:c}=this,u=!!this.node.type.spec.draggable,f=Je.isSelectable(this.node),h=e.type==="copy",p=e.type==="paste",m=e.type==="cut",y=e.type==="mousedown";if(!u&&f&&s&&e.target===this.dom&&e.preventDefault(),u&&s&&!c&&e.target===this.dom)return e.preventDefault(),!1;if(u&&l&&!c&&y){const x=r.closest("[data-drag-handle]");x&&(this.dom===x||this.dom.contains(x))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(c||i||h||p||m||y&&f)}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:e}):this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"||this.dom.contains(e.target)&&e.type==="childList"&&(WE()||xY())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(r=>r.isContentEditable)?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:n})=>{const r=this.getPos();return typeof r!="number"?!1:(n.setNodeMarkup(r,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){const e=this.getPos();if(typeof e!="number")return;const n=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:n})}}function Bf(t){return new jke({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:o})=>{const s=It(t.getAttributes,void 0,r,o);if(s===!1||s===null)return null;const{tr:i}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),f=n.from+l.indexOf(a),h=f+a.length;if(N3(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(x=>x===t.type&&x!==m.mark.type)).filter(m=>m.to>f).length)return null;h<n.to&&i.delete(h,n.to),f>n.from&&i.delete(n.from+u,f),c=n.from+u+a.length,i.addMark(n.from+u,c,t.type.create(s||{})),i.removeStoredMark(t.type)}}})}var m0,cTe=new Uint8Array(16);function uTe(){if(!m0&&(m0=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!m0))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return m0(cTe)}const dTe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function fTe(t){return typeof t=="string"&&dTe.test(t)}var $r=[];for(var kS=0;kS<256;++kS)$r.push((kS+256).toString(16).substr(1));function hTe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=($r[t[e+0]]+$r[t[e+1]]+$r[t[e+2]]+$r[t[e+3]]+"-"+$r[t[e+4]]+$r[t[e+5]]+"-"+$r[t[e+6]]+$r[t[e+7]]+"-"+$r[t[e+8]]+$r[t[e+9]]+"-"+$r[t[e+10]]+$r[t[e+11]]+$r[t[e+12]]+$r[t[e+13]]+$r[t[e+14]]+$r[t[e+15]]).toLowerCase();if(!fTe(n))throw TypeError("Stringified UUID is invalid");return n}function pTe(t,e,n){t=t||{};var r=t.random||(t.rng||uTe)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,hTe(r)}var mTe=class jY{constructor(e){this.cache=new Map(e)}get(e){return this.cache.get(e)}set(e,n,r){e<0||this.cache.set(e,[n,r])}replace(e,n,r,o){this.remove(e),this.set(n,r,o)}remove(e){this.cache.delete(e)}invalidate(e){const n=new jY(this.cache),r=e.mapping;return this.cache.forEach(([o,s],i)=>{if(i<0)return;const a=r.mapResult(i),l=e.doc.nodeAt(a.pos);if(a.deleted||!(l!=null&&l.eq(o)))n.remove(i);else if(i!==a.pos){const c=s.map(u=>u.map(r,0,0)).filter(u=>u!=null);n.replace(i,a.pos,l,c)}}),n}};function gTe({parser:t,nodeTypes:e=["code_block"],languageExtractor:n=r=>r.attrs.language}){const r=new Ht;return new kt({key:r,state:{init(o,s){const i=new mTe,[a,l]=kL(s.doc,t,e,n,i);return{cache:i,decorations:a,promises:l}},apply:(o,s)=>{const i=s.cache.invalidate(o),a=!!o.getMeta("prosemirror-highlight-refresh");if(!o.docChanged&&!a){const u=s.decorations.map(o.mapping,o.doc),f=s.promises;return{cache:i,decorations:u,promises:f}}const[l,c]=kL(o.doc,t,e,n,i);return{cache:i,decorations:l,promises:c}}},view:o=>{const s=new Set,i=()=>{if(s.size>0)return;const l=o.state.tr.setMeta("prosemirror-highlight-refresh",!0);o.dispatch(l)},a=()=>{var l;const c=r.getState(o.state);for(const u of(l=c==null?void 0:c.promises)!=null?l:[])s.add(u),u.then(()=>{s.delete(u),i()}).catch(()=>{s.delete(u)})};return a(),{update:()=>{a()}}},props:{decorations(o){var s;return(s=this.getState(o))==null?void 0:s.decorations}}})}function kL(t,e,n,r,o){const s=[],i=[];return t.descendants((a,l)=>{if(!a.type.isTextblock)return!0;if(n.includes(a.type.name)){const c=r(a),u=o.get(l);if(u){const[f,h]=u;s.push(...h)}else{const f=e({content:a.textContent,language:c||void 0,pos:l});f&&Array.isArray(f)?(o.set(l,a,f),s.push(...f)):f instanceof Promise&&(o.remove(l),i.push(f))}}return!1}),[Gt.create(t,s),i]}const KE=[{id:"abap",name:"ABAP",import:()=>U(()=>import("./abap-DsBKuouk.js"),[])},{id:"actionscript-3",name:"ActionScript",import:()=>U(()=>import("./actionscript-3-D_z4Izcz.js"),[])},{id:"ada",name:"Ada",import:()=>U(()=>import("./ada-727ZlQH0.js"),[])},{id:"angular-html",name:"Angular HTML",import:()=>U(()=>import("./angular-html-LfdN0zeE.js").then(t=>t.f),__vite__mapDeps([0,1,2,3]))},{id:"angular-ts",name:"Angular TypeScript",import:()=>U(()=>import("./angular-ts-CKsD7JZE.js"),__vite__mapDeps([4,0,1,2,3,5]))},{id:"apache",name:"Apache Conf",import:()=>U(()=>import("./apache-Dn00JSTd.js"),[])},{id:"apex",name:"Apex",import:()=>U(()=>import("./apex-COJ4H7py.js"),[])},{id:"apl",name:"APL",import:()=>U(()=>import("./apl-BBq3IX1j.js"),__vite__mapDeps([6,1,2,3,7,8,9]))},{id:"applescript",name:"AppleScript",import:()=>U(()=>import("./applescript-Bu5BbsvL.js"),[])},{id:"ara",name:"Ara",import:()=>U(()=>import("./ara-7O62HKoU.js"),[])},{id:"asciidoc",name:"AsciiDoc",aliases:["adoc"],import:()=>U(()=>import("./asciidoc-BPT9niGB.js"),[])},{id:"asm",name:"Assembly",import:()=>U(()=>import("./asm-Dhn9LcZ4.js"),[])},{id:"astro",name:"Astro",import:()=>U(()=>import("./astro-CqkE3fuf.js"),__vite__mapDeps([10,9,2,11,3,12]))},{id:"awk",name:"AWK",import:()=>U(()=>import("./awk-eg146-Ew.js"),[])},{id:"ballerina",name:"Ballerina",import:()=>U(()=>import("./ballerina-Du268qiB.js"),[])},{id:"bat",name:"Batch File",aliases:["batch"],import:()=>U(()=>import("./bat-fje9CFhw.js"),[])},{id:"beancount",name:"Beancount",import:()=>U(()=>import("./beancount-BwXTMy5W.js"),[])},{id:"berry",name:"Berry",aliases:["be"],import:()=>U(()=>import("./berry-3xVqZejG.js"),[])},{id:"bibtex",name:"BibTeX",import:()=>U(()=>import("./bibtex-xW4inM5L.js"),[])},{id:"bicep",name:"Bicep",import:()=>U(()=>import("./bicep-DHo0CJ0O.js"),[])},{id:"blade",name:"Blade",import:()=>U(()=>import("./blade-a8OxSdnT.js"),__vite__mapDeps([13,1,2,3,7,8,14,9]))},{id:"bsl",name:"1C (Enterprise)",aliases:["1c"],import:()=>U(()=>import("./bsl-Dgyn0ogV.js"),__vite__mapDeps([15,16]))},{id:"c",name:"C",import:()=>U(()=>import("./c-C3t2pwGQ.js"),[])},{id:"cadence",name:"Cadence",aliases:["cdc"],import:()=>U(()=>import("./cadence-DNquZEk8.js"),[])},{id:"cairo",name:"Cairo",import:()=>U(()=>import("./cairo--RitsXJZ.js"),__vite__mapDeps([17,18]))},{id:"clarity",name:"Clarity",import:()=>U(()=>import("./clarity-BHOwM8T6.js"),[])},{id:"clojure",name:"Clojure",aliases:["clj"],import:()=>U(()=>import("./clojure-DxSadP1t.js"),[])},{id:"cmake",name:"CMake",import:()=>U(()=>import("./cmake-DbXoA79R.js"),[])},{id:"cobol",name:"COBOL",import:()=>U(()=>import("./cobol-PTqiYgYu.js"),__vite__mapDeps([19,1,2,3,8]))},{id:"codeowners",name:"CODEOWNERS",import:()=>U(()=>import("./codeowners-Bp6g37R7.js"),[])},{id:"codeql",name:"CodeQL",aliases:["ql"],import:()=>U(()=>import("./codeql-sacFqUAJ.js"),[])},{id:"coffee",name:"CoffeeScript",aliases:["coffeescript"],import:()=>U(()=>import("./coffee-dyiR41kL.js"),__vite__mapDeps([20,2]))},{id:"common-lisp",name:"Common Lisp",aliases:["lisp"],import:()=>U(()=>import("./common-lisp-C7gG9l05.js"),[])},{id:"coq",name:"Coq",import:()=>U(()=>import("./coq-Dsg_Bt_b.js"),[])},{id:"cpp",name:"C++",aliases:["c++"],import:()=>U(()=>import("./cpp-BksuvNSY.js"),__vite__mapDeps([21,22,23,24,14]))},{id:"crystal",name:"Crystal",import:()=>U(()=>import("./crystal-DtDmRg-F.js"),__vite__mapDeps([25,1,2,3,14,24,26]))},{id:"csharp",name:"C#",aliases:["c#","cs"],import:()=>U(()=>import("./csharp-D9R-vmeu.js"),[])},{id:"css",name:"CSS",import:()=>U(()=>import("./css-BPhBrDlE.js"),[])},{id:"csv",name:"CSV",import:()=>U(()=>import("./csv-B0qRVHPH.js"),[])},{id:"cue",name:"CUE",import:()=>U(()=>import("./cue-DtFQj3wx.js"),[])},{id:"cypher",name:"Cypher",aliases:["cql"],import:()=>U(()=>import("./cypher-m2LEI-9-.js"),[])},{id:"d",name:"D",import:()=>U(()=>import("./d-BoXegm-a.js"),[])},{id:"dart",name:"Dart",import:()=>U(()=>import("./dart-B9wLZaAG.js"),[])},{id:"dax",name:"DAX",import:()=>U(()=>import("./dax-ClGRhx96.js"),[])},{id:"desktop",name:"Desktop",import:()=>U(()=>import("./desktop-DEIpsLCJ.js"),[])},{id:"diff",name:"Diff",import:()=>U(()=>import("./diff-BgYniUM_.js"),[])},{id:"docker",name:"Dockerfile",aliases:["dockerfile"],import:()=>U(()=>import("./docker-COcR7UxN.js"),[])},{id:"dotenv",name:"dotEnv",import:()=>U(()=>import("./dotenv-BjQB5zDj.js"),[])},{id:"dream-maker",name:"Dream Maker",import:()=>U(()=>import("./dream-maker-C-nORZOA.js"),[])},{id:"edge",name:"Edge",import:()=>U(()=>import("./edge-D5gP-w-T.js"),__vite__mapDeps([27,11,1,2,3,28]))},{id:"elixir",name:"Elixir",import:()=>U(()=>import("./elixir-CLiX3zqd.js"),__vite__mapDeps([29,1,2,3]))},{id:"elm",name:"Elm",import:()=>U(()=>import("./elm-CmHSxxaM.js"),__vite__mapDeps([30,23,24]))},{id:"emacs-lisp",name:"Emacs Lisp",aliases:["elisp"],import:()=>U(()=>import("./emacs-lisp-BX77sIaO.js"),[])},{id:"erb",name:"ERB",import:()=>U(()=>import("./erb-BYTLMnw6.js"),__vite__mapDeps([31,1,2,3,32,33,7,8,14,34,11,35,36,21,22,23,24,26,37,38]))},{id:"erlang",name:"Erlang",aliases:["erl"],import:()=>U(()=>import("./erlang-B-DoSBHF.js"),[])},{id:"fennel",name:"Fennel",import:()=>U(()=>import("./fennel-bCA53EVm.js"),[])},{id:"fish",name:"Fish",import:()=>U(()=>import("./fish-w-ucz2PV.js"),[])},{id:"fluent",name:"Fluent",aliases:["ftl"],import:()=>U(()=>import("./fluent-Dayu4EKP.js"),[])},{id:"fortran-fixed-form",name:"Fortran (Fixed Form)",aliases:["f","for","f77"],import:()=>U(()=>import("./fortran-fixed-form-TqA4NnZg.js"),__vite__mapDeps([39,40]))},{id:"fortran-free-form",name:"Fortran (Free Form)",aliases:["f90","f95","f03","f08","f18"],import:()=>U(()=>import("./fortran-free-form-DKXYxT9g.js"),[])},{id:"fsharp",name:"F#",aliases:["f#","fs"],import:()=>U(()=>import("./fsharp-XplgxFYe.js"),__vite__mapDeps([41,42]))},{id:"gdresource",name:"GDResource",import:()=>U(()=>import("./gdresource-BHYsBjWJ.js"),__vite__mapDeps([43,44,45]))},{id:"gdscript",name:"GDScript",import:()=>U(()=>import("./gdscript-DfxzS6Rs.js"),[])},{id:"gdshader",name:"GDShader",import:()=>U(()=>import("./gdshader-SKMF96pI.js"),[])},{id:"genie",name:"Genie",import:()=>U(()=>import("./genie-ajMbGru0.js"),[])},{id:"gherkin",name:"Gherkin",import:()=>U(()=>import("./gherkin--30QC5Em.js"),[])},{id:"git-commit",name:"Git Commit Message",import:()=>U(()=>import("./git-commit-i4q6IMui.js"),__vite__mapDeps([46,47]))},{id:"git-rebase",name:"Git Rebase Message",import:()=>U(()=>import("./git-rebase-B-v9cOL2.js"),__vite__mapDeps([48,26]))},{id:"gleam",name:"Gleam",import:()=>U(()=>import("./gleam-B430Bg39.js"),[])},{id:"glimmer-js",name:"Glimmer JS",aliases:["gjs"],import:()=>U(()=>import("./glimmer-js-D-cwc0-E.js"),__vite__mapDeps([49,2,11,3,1]))},{id:"glimmer-ts",name:"Glimmer TS",aliases:["gts"],import:()=>U(()=>import("./glimmer-ts-pgjy16dm.js"),__vite__mapDeps([50,11,3,2,1]))},{id:"glsl",name:"GLSL",import:()=>U(()=>import("./glsl-DBO2IWDn.js"),__vite__mapDeps([23,24]))},{id:"gnuplot",name:"Gnuplot",import:()=>U(()=>import("./gnuplot-CM8KxXT1.js"),[])},{id:"go",name:"Go",import:()=>U(()=>import("./go-B1SYOhNW.js"),[])},{id:"graphql",name:"GraphQL",aliases:["gql"],import:()=>U(()=>import("./graphql-cDcHW_If.js"),__vite__mapDeps([34,2,11,35,36]))},{id:"groovy",name:"Groovy",import:()=>U(()=>import("./groovy-DkBy-JyN.js"),[])},{id:"hack",name:"Hack",import:()=>U(()=>import("./hack-D1yCygmZ.js"),__vite__mapDeps([51,1,2,3,14]))},{id:"haml",name:"Ruby Haml",import:()=>U(()=>import("./haml-B2EZWmdv.js"),__vite__mapDeps([33,2,3]))},{id:"handlebars",name:"Handlebars",aliases:["hbs"],import:()=>U(()=>import("./handlebars-BQGss363.js"),__vite__mapDeps([52,1,2,3,38]))},{id:"haskell",name:"Haskell",aliases:["hs"],import:()=>U(()=>import("./haskell-BILxekzW.js"),[])},{id:"haxe",name:"Haxe",import:()=>U(()=>import("./haxe-C5wWYbrZ.js"),[])},{id:"hcl",name:"HashiCorp HCL",import:()=>U(()=>import("./hcl-HzYwdGDm.js"),[])},{id:"hjson",name:"Hjson",import:()=>U(()=>import("./hjson-T-Tgc4AT.js"),[])},{id:"hlsl",name:"HLSL",import:()=>U(()=>import("./hlsl-ifBTmRxC.js"),[])},{id:"html",name:"HTML",import:()=>U(()=>import("./html-C2L_23MC.js"),__vite__mapDeps([1,2,3]))},{id:"html-derivative",name:"HTML (Derivative)",import:()=>U(()=>import("./html-derivative-CSfWNPLT.js"),__vite__mapDeps([28,1,2,3]))},{id:"http",name:"HTTP",import:()=>U(()=>import("./http-FRrOvY1W.js"),__vite__mapDeps([53,26,9,7,8,34,2,11,35,36]))},{id:"hxml",name:"HXML",import:()=>U(()=>import("./hxml-TIA70rKU.js"),__vite__mapDeps([54,55]))},{id:"hy",name:"Hy",import:()=>U(()=>import("./hy-BMj5Y0dO.js"),[])},{id:"imba",name:"Imba",import:()=>U(()=>import("./imba-bv_oIlVt.js"),__vite__mapDeps([56,11]))},{id:"ini",name:"INI",aliases:["properties"],import:()=>U(()=>import("./ini-BjABl1g7.js"),[])},{id:"java",name:"Java",import:()=>U(()=>import("./java-xI-RfyKK.js"),[])},{id:"javascript",name:"JavaScript",aliases:["js"],import:()=>U(()=>import("./javascript-ySlJ1b_l.js"),[])},{id:"jinja",name:"Jinja",import:()=>U(()=>import("./jinja-DGy0s7-h.js"),__vite__mapDeps([57,1,2,3]))},{id:"jison",name:"Jison",import:()=>U(()=>import("./jison-BqZprYcd.js"),__vite__mapDeps([58,2]))},{id:"json",name:"JSON",import:()=>U(()=>import("./json-BQoSv7ci.js"),[])},{id:"json5",name:"JSON5",import:()=>U(()=>import("./json5-w8dY5SsB.js"),[])},{id:"jsonc",name:"JSON with Comments",import:()=>U(()=>import("./jsonc-TU54ms6u.js"),[])},{id:"jsonl",name:"JSON Lines",import:()=>U(()=>import("./jsonl-DREVFZK8.js"),[])},{id:"jsonnet",name:"Jsonnet",import:()=>U(()=>import("./jsonnet-BfivnA6A.js"),[])},{id:"jssm",name:"JSSM",aliases:["fsl"],import:()=>U(()=>import("./jssm-P4WzXJd0.js"),[])},{id:"jsx",name:"JSX",import:()=>U(()=>import("./jsx-BAng5TT0.js"),[])},{id:"julia",name:"Julia",aliases:["jl"],import:()=>U(()=>import("./julia-BBuGR-5E.js"),__vite__mapDeps([59,21,22,23,24,14,18,2,60]))},{id:"kotlin",name:"Kotlin",aliases:["kt","kts"],import:()=>U(()=>import("./kotlin-B5lbUyaz.js"),[])},{id:"kusto",name:"Kusto",aliases:["kql"],import:()=>U(()=>import("./kusto-mebxcVVE.js"),[])},{id:"latex",name:"LaTeX",import:()=>U(()=>import("./latex-C-cWTeAZ.js"),__vite__mapDeps([61,62,60]))},{id:"lean",name:"Lean 4",aliases:["lean4"],import:()=>U(()=>import("./lean-XBlWyCtg.js"),[])},{id:"less",name:"Less",import:()=>U(()=>import("./less-BfCpw3nA.js"),[])},{id:"liquid",name:"Liquid",import:()=>U(()=>import("./liquid-D3W5UaiH.js"),__vite__mapDeps([63,1,2,3,9]))},{id:"log",name:"Log file",import:()=>U(()=>import("./log-Cc5clBb7.js"),[])},{id:"logo",name:"Logo",import:()=>U(()=>import("./logo-IuBKFhSY.js"),[])},{id:"lua",name:"Lua",import:()=>U(()=>import("./lua-CvWAzNxB.js"),__vite__mapDeps([37,24]))},{id:"luau",name:"Luau",import:()=>U(()=>import("./luau-Du5NY7AG.js"),[])},{id:"make",name:"Makefile",aliases:["makefile"],import:()=>U(()=>import("./make-Bvotw-X0.js"),[])},{id:"markdown",name:"Markdown",aliases:["md"],import:()=>U(()=>import("./markdown-UIAJJxZW.js"),[])},{id:"marko",name:"Marko",import:()=>U(()=>import("./marko-z0MBrx5-.js"),__vite__mapDeps([64,3,65,5,2]))},{id:"matlab",name:"MATLAB",import:()=>U(()=>import("./matlab-D9-PGadD.js"),[])},{id:"mdc",name:"MDC",import:()=>U(()=>import("./mdc-DB_EDNY_.js"),__vite__mapDeps([66,42,38,28,1,2,3]))},{id:"mdx",name:"MDX",import:()=>U(()=>import("./mdx-sdHcTMYB.js"),[])},{id:"mermaid",name:"Mermaid",aliases:["mmd"],import:()=>U(()=>import("./mermaid-Ci6OQyBP.js"),[])},{id:"mipsasm",name:"MIPS Assembly",aliases:["mips"],import:()=>U(()=>import("./mipsasm-BC5c_5Pe.js"),[])},{id:"mojo",name:"Mojo",import:()=>U(()=>import("./mojo-Tz6hzZYG.js"),[])},{id:"move",name:"Move",import:()=>U(()=>import("./move-DB_GagMm.js"),[])},{id:"narrat",name:"Narrat Language",aliases:["nar"],import:()=>U(()=>import("./narrat-DLbgOhZU.js"),[])},{id:"nextflow",name:"Nextflow",aliases:["nf"],import:()=>U(()=>import("./nextflow-B0XVJmRM.js"),[])},{id:"nginx",name:"Nginx",import:()=>U(()=>import("./nginx-D_VnBJ67.js"),__vite__mapDeps([67,37,24]))},{id:"nim",name:"Nim",import:()=>U(()=>import("./nim-ZlGxZxc3.js"),__vite__mapDeps([68,24,1,2,3,7,8,23,42]))},{id:"nix",name:"Nix",import:()=>U(()=>import("./nix-shcSOmrb.js"),[])},{id:"nushell",name:"nushell",aliases:["nu"],import:()=>U(()=>import("./nushell-D4Tzg5kh.js"),[])},{id:"objective-c",name:"Objective-C",aliases:["objc"],import:()=>U(()=>import("./objective-c-Deuh7S70.js"),[])},{id:"objective-cpp",name:"Objective-C++",import:()=>U(()=>import("./objective-cpp-BUEGK8hf.js"),[])},{id:"ocaml",name:"OCaml",import:()=>U(()=>import("./ocaml-BNioltXt.js"),[])},{id:"pascal",name:"Pascal",import:()=>U(()=>import("./pascal-JqZropPD.js"),[])},{id:"perl",name:"Perl",import:()=>U(()=>import("./perl-CHQXSrWU.js"),__vite__mapDeps([69,1,2,3,7,8,14]))},{id:"php",name:"PHP",import:()=>U(()=>import("./php-B5ebYQev.js"),__vite__mapDeps([70,1,2,3,7,8,14,9]))},{id:"plsql",name:"PL/SQL",import:()=>U(()=>import("./plsql-LKU2TuZ1.js"),[])},{id:"po",name:"Gettext PO",aliases:["pot","potx"],import:()=>U(()=>import("./po-BFLt1xDp.js"),[])},{id:"polar",name:"Polar",import:()=>U(()=>import("./polar-DKykz6zU.js"),[])},{id:"postcss",name:"PostCSS",import:()=>U(()=>import("./postcss-B3ZDOciz.js"),[])},{id:"powerquery",name:"PowerQuery",import:()=>U(()=>import("./powerquery-CSHBycmS.js"),[])},{id:"powershell",name:"PowerShell",aliases:["ps","ps1"],import:()=>U(()=>import("./powershell-BIEUsx6d.js"),[])},{id:"prisma",name:"Prisma",import:()=>U(()=>import("./prisma-B48N-Iqd.js"),[])},{id:"prolog",name:"Prolog",import:()=>U(()=>import("./prolog-BY-TUvya.js"),[])},{id:"proto",name:"Protocol Buffer 3",aliases:["protobuf"],import:()=>U(()=>import("./proto-zocC4JxJ.js"),[])},{id:"pug",name:"Pug",aliases:["jade"],import:()=>U(()=>import("./pug-CM9l7STV.js"),__vite__mapDeps([71,2,3,1]))},{id:"puppet",name:"Puppet",import:()=>U(()=>import("./puppet-Cza_XSSt.js"),[])},{id:"purescript",name:"PureScript",import:()=>U(()=>import("./purescript-Bg-kzb6g.js"),[])},{id:"python",name:"Python",aliases:["py"],import:()=>U(()=>import("./python-DhUJRlN_.js"),[])},{id:"qml",name:"QML",import:()=>U(()=>import("./qml-D8XfuvdV.js"),__vite__mapDeps([72,2]))},{id:"qmldir",name:"QML Directory",import:()=>U(()=>import("./qmldir-C8lEn-DE.js"),[])},{id:"qss",name:"Qt Style Sheets",import:()=>U(()=>import("./qss-DhMKtDLN.js"),[])},{id:"r",name:"R",import:()=>U(()=>import("./r-CwjWoCRV.js"),[])},{id:"racket",name:"Racket",import:()=>U(()=>import("./racket-CzouJOBO.js"),[])},{id:"raku",name:"Raku",aliases:["perl6"],import:()=>U(()=>import("./raku-B1bQXN8T.js"),[])},{id:"razor",name:"ASP.NET Razor",import:()=>U(()=>import("./razor-CNLDkMZG.js"),__vite__mapDeps([73,1,2,3,74]))},{id:"reg",name:"Windows Registry Script",import:()=>U(()=>import("./reg-5LuOXUq_.js"),[])},{id:"regexp",name:"RegExp",aliases:["regex"],import:()=>U(()=>import("./regexp-DWJ3fJO_.js"),[])},{id:"rel",name:"Rel",import:()=>U(()=>import("./rel-DJlmqQ1C.js"),[])},{id:"riscv",name:"RISC-V",import:()=>U(()=>import("./riscv-QhoSD0DR.js"),[])},{id:"rst",name:"reStructuredText",import:()=>U(()=>import("./rst-4NLicBqY.js"),__vite__mapDeps([75,28,1,2,3,21,22,23,24,14,18,26,38,76,32,33,7,8,34,11,35,36,37]))},{id:"ruby",name:"Ruby",aliases:["rb"],import:()=>U(()=>import("./ruby-DeZ3UC14.js"),__vite__mapDeps([32,1,2,3,33,7,8,14,34,11,35,36,21,22,23,24,26,37,38]))},{id:"rust",name:"Rust",aliases:["rs"],import:()=>U(()=>import("./rust-Be6lgOlo.js"),[])},{id:"sas",name:"SAS",import:()=>U(()=>import("./sas-BmTFh92c.js"),__vite__mapDeps([77,14]))},{id:"sass",name:"Sass",import:()=>U(()=>import("./sass-BJ4Li9vH.js"),[])},{id:"scala",name:"Scala",import:()=>U(()=>import("./scala-DQVVAn-B.js"),[])},{id:"scheme",name:"Scheme",import:()=>U(()=>import("./scheme-BJGe-b2p.js"),[])},{id:"scss",name:"SCSS",import:()=>U(()=>import("./scss-C31hgJw-.js"),__vite__mapDeps([5,3]))},{id:"sdbl",name:"1C (Query)",aliases:["1c-query"],import:()=>U(()=>import("./sdbl-BLhTXw86.js"),[])},{id:"shaderlab",name:"ShaderLab",aliases:["shader"],import:()=>U(()=>import("./shaderlab-B7qAK45m.js"),__vite__mapDeps([78,79]))},{id:"shellscript",name:"Shell",aliases:["bash","sh","shell","zsh"],import:()=>U(()=>import("./shellscript-atvbtKCR.js"),[])},{id:"shellsession",name:"Shell Session",aliases:["console"],import:()=>U(()=>import("./shellsession-C_rIy8kc.js"),__vite__mapDeps([80,26]))},{id:"smalltalk",name:"Smalltalk",import:()=>U(()=>import("./smalltalk-DkLiglaE.js"),[])},{id:"solidity",name:"Solidity",import:()=>U(()=>import("./solidity-C1w2a3ep.js"),[])},{id:"soy",name:"Closure Templates",aliases:["closure-templates"],import:()=>U(()=>import("./soy-C-lX7w71.js"),__vite__mapDeps([81,1,2,3]))},{id:"sparql",name:"SPARQL",import:()=>U(()=>import("./sparql-bYkjHRlG.js"),__vite__mapDeps([82,83]))},{id:"splunk",name:"Splunk Query Language",aliases:["spl"],import:()=>U(()=>import("./splunk-Cf8iN4DR.js"),[])},{id:"sql",name:"SQL",import:()=>U(()=>import("./sql-COK4E0Yg.js"),[])},{id:"ssh-config",name:"SSH Config",import:()=>U(()=>import("./ssh-config-BknIz3MU.js"),[])},{id:"stata",name:"Stata",import:()=>U(()=>import("./stata-DorPZHa4.js"),__vite__mapDeps([84,14]))},{id:"stylus",name:"Stylus",aliases:["styl"],import:()=>U(()=>import("./stylus-BeQkCIfX.js"),[])},{id:"svelte",name:"Svelte",import:()=>U(()=>import("./svelte-MSaWC3Je.js"),__vite__mapDeps([85,2,11,3,12]))},{id:"swift",name:"Swift",import:()=>U(()=>import("./swift-BSxZ-RaX.js"),[])},{id:"system-verilog",name:"SystemVerilog",import:()=>U(()=>import("./system-verilog-C7L56vO4.js"),[])},{id:"systemd",name:"Systemd Units",import:()=>U(()=>import("./systemd-CUnW07Te.js"),[])},{id:"talonscript",name:"TalonScript",aliases:["talon"],import:()=>U(()=>import("./talonscript-C1XDQQGZ.js"),[])},{id:"tasl",name:"Tasl",import:()=>U(()=>import("./tasl-CQjiPCtT.js"),[])},{id:"tcl",name:"Tcl",import:()=>U(()=>import("./tcl-DQ1-QYvQ.js"),[])},{id:"templ",name:"Templ",import:()=>U(()=>import("./templ-dwX3ZSMB.js"),__vite__mapDeps([86,87,2,3]))},{id:"terraform",name:"Terraform",aliases:["tf","tfvars"],import:()=>U(()=>import("./terraform-BbSNqyBO.js"),[])},{id:"tex",name:"TeX",import:()=>U(()=>import("./tex-rYs2v40G.js"),__vite__mapDeps([62,60]))},{id:"toml",name:"TOML",import:()=>U(()=>import("./toml-CB2ApiWb.js"),[])},{id:"ts-tags",name:"TypeScript with Tags",aliases:["lit"],import:()=>U(()=>import("./ts-tags-CipyTH0X.js"),__vite__mapDeps([88,11,3,2,23,24,1,14,7,8]))},{id:"tsv",name:"TSV",import:()=>U(()=>import("./tsv-B_m7g4N7.js"),[])},{id:"tsx",name:"TSX",import:()=>U(()=>import("./tsx-B6W0miNI.js"),[])},{id:"turtle",name:"Turtle",import:()=>U(()=>import("./turtle-BMR_PYu6.js"),[])},{id:"twig",name:"Twig",import:()=>U(()=>import("./twig-NC5TFiHP.js"),__vite__mapDeps([89,3,2,5,70,1,7,8,14,9,18,32,33,34,11,35,36,21,22,23,24,26,37,38]))},{id:"typescript",name:"TypeScript",aliases:["ts"],import:()=>U(()=>import("./typescript-Dj6nwHGl.js"),[])},{id:"typespec",name:"TypeSpec",aliases:["tsp"],import:()=>U(()=>import("./typespec-BpWG_bgh.js"),[])},{id:"typst",name:"Typst",aliases:["typ"],import:()=>U(()=>import("./typst-BVUVsWT6.js"),[])},{id:"v",name:"V",import:()=>U(()=>import("./v-CAQ2eGtk.js"),[])},{id:"vala",name:"Vala",import:()=>U(()=>import("./vala-BFOHcciG.js"),[])},{id:"vb",name:"Visual Basic",aliases:["cmd"],import:()=>U(()=>import("./vb-CdO5JTpU.js"),[])},{id:"verilog",name:"Verilog",import:()=>U(()=>import("./verilog-CJaU5se_.js"),[])},{id:"vhdl",name:"VHDL",import:()=>U(()=>import("./vhdl-DYoNaHQp.js"),[])},{id:"viml",name:"Vim Script",aliases:["vim","vimscript"],import:()=>U(()=>import("./viml-m4uW47V2.js"),[])},{id:"vue",name:"Vue",import:()=>U(()=>import("./vue-BuYVFjOK.js"),__vite__mapDeps([90,1,2,3,11,9,28]))},{id:"vue-html",name:"Vue HTML",import:()=>U(()=>import("./vue-html-xdeiXROB.js"),__vite__mapDeps([91,90,1,2,3,11,9,28]))},{id:"vyper",name:"Vyper",aliases:["vy"],import:()=>U(()=>import("./vyper-nyqBNV6O.js"),[])},{id:"wasm",name:"WebAssembly",import:()=>U(()=>import("./wasm-C6j12Q_x.js"),[])},{id:"wenyan",name:"Wenyan",aliases:["文言"],import:()=>U(()=>import("./wenyan-7A4Fjokl.js"),[])},{id:"wgsl",name:"WGSL",import:()=>U(()=>import("./wgsl-CB0Krxn9.js"),[])},{id:"wikitext",name:"Wikitext",aliases:["mediawiki","wiki"],import:()=>U(()=>import("./wikitext-DCE3LsBG.js"),[])},{id:"wolfram",name:"Wolfram",aliases:["wl"],import:()=>U(()=>import("./wolfram-C3FkfJm5.js"),[])},{id:"xml",name:"XML",import:()=>U(()=>import("./xml-e3z08dGr.js"),__vite__mapDeps([7,8]))},{id:"xsl",name:"XSL",import:()=>U(()=>import("./xsl-Dd0NUgwM.js"),__vite__mapDeps([92,7,8]))},{id:"yaml",name:"YAML",aliases:["yml"],import:()=>U(()=>import("./yaml-CVw76BM1.js"),[])},{id:"zenscript",name:"ZenScript",import:()=>U(()=>import("./zenscript-HnGAYVZD.js"),[])},{id:"zig",name:"Zig",import:()=>U(()=>import("./zig-BVz_zdnA.js"),[])}],yTe=Object.fromEntries(KE.map(t=>[t.id,t.import])),vTe=Object.fromEntries(KE.flatMap(t=>{var e;return((e=t.aliases)==null?void 0:e.map(n=>[n,t.import]))||[]})),wTe={...yTe,...vTe},bTe=[{id:"andromeeda",displayName:"Andromeeda",type:"dark",import:()=>U(()=>import("./andromeeda-C3khCPGq.js"),[])},{id:"aurora-x",displayName:"Aurora X",type:"dark",import:()=>U(()=>import("./aurora-x-D-2ljcwZ.js"),[])},{id:"ayu-dark",displayName:"Ayu Dark",type:"dark",import:()=>U(()=>import("./ayu-dark-Cv9koXgw.js"),[])},{id:"catppuccin-frappe",displayName:"Catppuccin Frappé",type:"dark",import:()=>U(()=>import("./catppuccin-frappe-CD_QflpE.js"),[])},{id:"catppuccin-latte",displayName:"Catppuccin Latte",type:"light",import:()=>U(()=>import("./catppuccin-latte-DRW-0cLl.js"),[])},{id:"catppuccin-macchiato",displayName:"Catppuccin Macchiato",type:"dark",import:()=>U(()=>import("./catppuccin-macchiato-C-_shW-Y.js"),[])},{id:"catppuccin-mocha",displayName:"Catppuccin Mocha",type:"dark",import:()=>U(()=>import("./catppuccin-mocha-LGGdnPYs.js"),[])},{id:"dark-plus",displayName:"Dark Plus",type:"dark",import:()=>U(()=>import("./dark-plus-C3mMm8J8.js"),[])},{id:"dracula",displayName:"Dracula Theme",type:"dark",import:()=>U(()=>import("./dracula-BzJJZx-M.js"),[])},{id:"dracula-soft",displayName:"Dracula Theme Soft",type:"dark",import:()=>U(()=>import("./dracula-soft-BXkSAIEj.js"),[])},{id:"everforest-dark",displayName:"Everforest Dark",type:"dark",import:()=>U(()=>import("./everforest-dark-BgDCqdQA.js"),[])},{id:"everforest-light",displayName:"Everforest Light",type:"light",import:()=>U(()=>import("./everforest-light-C8M2exoo.js"),[])},{id:"github-dark",displayName:"GitHub Dark",type:"dark",import:()=>U(()=>import("./github-dark-DHJKELXO.js"),[])},{id:"github-dark-default",displayName:"GitHub Dark Default",type:"dark",import:()=>U(()=>import("./github-dark-default-Cuk6v7N8.js"),[])},{id:"github-dark-dimmed",displayName:"GitHub Dark Dimmed",type:"dark",import:()=>U(()=>import("./github-dark-dimmed-DH5Ifo-i.js"),[])},{id:"github-dark-high-contrast",displayName:"GitHub Dark High Contrast",type:"dark",import:()=>U(()=>import("./github-dark-high-contrast-E3gJ1_iC.js"),[])},{id:"github-light",displayName:"GitHub Light",type:"light",import:()=>U(()=>import("./github-light-DAi9KRSo.js"),[])},{id:"github-light-default",displayName:"GitHub Light Default",type:"light",import:()=>U(()=>import("./github-light-default-D7oLnXFd.js"),[])},{id:"github-light-high-contrast",displayName:"GitHub Light High Contrast",type:"light",import:()=>U(()=>import("./github-light-high-contrast-BfjtVDDH.js"),[])},{id:"houston",displayName:"Houston",type:"dark",import:()=>U(()=>import("./houston-DnULxvSX.js"),[])},{id:"kanagawa-dragon",displayName:"Kanagawa Dragon",type:"dark",import:()=>U(()=>import("./kanagawa-dragon-CkXjmgJE.js"),[])},{id:"kanagawa-lotus",displayName:"Kanagawa Lotus",type:"light",import:()=>U(()=>import("./kanagawa-lotus-CfQXZHmo.js"),[])},{id:"kanagawa-wave",displayName:"Kanagawa Wave",type:"dark",import:()=>U(()=>import("./kanagawa-wave-DWedfzmr.js"),[])},{id:"laserwave",displayName:"LaserWave",type:"dark",import:()=>U(()=>import("./laserwave-DUszq2jm.js"),[])},{id:"light-plus",displayName:"Light Plus",type:"light",import:()=>U(()=>import("./light-plus-B7mTdjB0.js"),[])},{id:"material-theme",displayName:"Material Theme",type:"dark",import:()=>U(()=>import("./material-theme-D5KoaKCx.js"),[])},{id:"material-theme-darker",displayName:"Material Theme Darker",type:"dark",import:()=>U(()=>import("./material-theme-darker-BfHTSMKl.js"),[])},{id:"material-theme-lighter",displayName:"Material Theme Lighter",type:"light",import:()=>U(()=>import("./material-theme-lighter-B0m2ddpp.js"),[])},{id:"material-theme-ocean",displayName:"Material Theme Ocean",type:"dark",import:()=>U(()=>import("./material-theme-ocean-CyktbL80.js"),[])},{id:"material-theme-palenight",displayName:"Material Theme Palenight",type:"dark",import:()=>U(()=>import("./material-theme-palenight-Csfq5Kiy.js"),[])},{id:"min-dark",displayName:"Min Dark",type:"dark",import:()=>U(()=>import("./min-dark-CafNBF8u.js"),[])},{id:"min-light",displayName:"Min Light",type:"light",import:()=>U(()=>import("./min-light-CTRr51gU.js"),[])},{id:"monokai",displayName:"Monokai",type:"dark",import:()=>U(()=>import("./monokai-D4h5O-jR.js"),[])},{id:"night-owl",displayName:"Night Owl",type:"dark",import:()=>U(()=>import("./night-owl-C39BiMTA.js"),[])},{id:"nord",displayName:"Nord",type:"dark",import:()=>U(()=>import("./nord-Ddv68eIx.js"),[])},{id:"one-dark-pro",displayName:"One Dark Pro",type:"dark",import:()=>U(()=>import("./one-dark-pro-GBQ2dnAY.js"),[])},{id:"one-light",displayName:"One Light",type:"light",import:()=>U(()=>import("./one-light-PoHY5YXO.js"),[])},{id:"plastic",displayName:"Plastic",type:"dark",import:()=>U(()=>import("./plastic-3e1v2bzS.js"),[])},{id:"poimandres",displayName:"Poimandres",type:"dark",import:()=>U(()=>import("./poimandres-CS3Unz2-.js"),[])},{id:"red",displayName:"Red",type:"dark",import:()=>U(()=>import("./red-bN70gL4F.js"),[])},{id:"rose-pine",displayName:"Rosé Pine",type:"dark",import:()=>U(()=>import("./rose-pine-CmCqftbK.js"),[])},{id:"rose-pine-dawn",displayName:"Rosé Pine Dawn",type:"light",import:()=>U(()=>import("./rose-pine-dawn-Ds-gbosJ.js"),[])},{id:"rose-pine-moon",displayName:"Rosé Pine Moon",type:"dark",import:()=>U(()=>import("./rose-pine-moon-CjDtw9vr.js"),[])},{id:"slack-dark",displayName:"Slack Dark",type:"dark",import:()=>U(()=>import("./slack-dark-BthQWCQV.js"),[])},{id:"slack-ochin",displayName:"Slack Ochin",type:"light",import:()=>U(()=>import("./slack-ochin-DqwNpetd.js"),[])},{id:"snazzy-light",displayName:"Snazzy Light",type:"light",import:()=>U(()=>import("./snazzy-light-Bw305WKR.js"),[])},{id:"solarized-dark",displayName:"Solarized Dark",type:"dark",import:()=>U(()=>import("./solarized-dark-DXbdFlpD.js"),[])},{id:"solarized-light",displayName:"Solarized Light",type:"light",import:()=>U(()=>import("./solarized-light-L9t79GZl.js"),[])},{id:"synthwave-84",displayName:"Synthwave '84",type:"dark",import:()=>U(()=>import("./synthwave-84-CbfX1IO0.js"),[])},{id:"tokyo-night",displayName:"Tokyo Night",type:"dark",import:()=>U(()=>import("./tokyo-night-DBQeEorK.js"),[])},{id:"vesper",displayName:"Vesper",type:"dark",import:()=>U(()=>import("./vesper-BEBZ7ncR.js"),[])},{id:"vitesse-black",displayName:"Vitesse Black",type:"dark",import:()=>U(()=>import("./vitesse-black-Bkuqu6BP.js"),[])},{id:"vitesse-dark",displayName:"Vitesse Dark",type:"dark",import:()=>U(()=>import("./vitesse-dark-D0r3Knsf.js"),[])},{id:"vitesse-light",displayName:"Vitesse Light",type:"light",import:()=>U(()=>import("./vitesse-light-CVO1_9PV.js"),[])}],xTe=Object.fromEntries(bTe.map(t=>[t.id,t.import]));let ic=class extends Error{constructor(e){super(e),this.name="ShikiError"}},R3=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function _Te(){return 2147483648}function CTe(){return typeof performance<"u"?performance.now():Date.now()}const ETe=(t,e)=>t+(e-t%e)%e;async function kTe(t){let e,n;const r={};function o(p){n=p,r.HEAPU8=new Uint8Array(p),r.HEAPU32=new Uint32Array(p)}function s(p,m,y){r.HEAPU8.copyWithin(p,m,m+y)}function i(p){try{return e.grow(p-n.byteLength+65535>>>16),o(e.buffer),1}catch{}}function a(p){const m=r.HEAPU8.length;p=p>>>0;const y=_Te();if(p>y)return!1;for(let x=1;x<=4;x*=2){let b=m*(1+.2/x);b=Math.min(b,p+100663296);const C=Math.min(y,ETe(Math.max(p,b),65536));if(i(C))return!0}return!1}const l=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function c(p,m,y=1024){const x=m+y;let b=m;for(;p[b]&&!(b>=x);)++b;if(b-m>16&&p.buffer&&l)return l.decode(p.subarray(m,b));let C="";for(;m<b;){let E=p[m++];if(!(E&128)){C+=String.fromCharCode(E);continue}const R=p[m++]&63;if((E&224)===192){C+=String.fromCharCode((E&31)<<6|R);continue}const D=p[m++]&63;if((E&240)===224?E=(E&15)<<12|R<<6|D:E=(E&7)<<18|R<<12|D<<6|p[m++]&63,E<65536)C+=String.fromCharCode(E);else{const O=E-65536;C+=String.fromCharCode(55296|O>>10,56320|O&1023)}}return C}function u(p,m){return p?c(r.HEAPU8,p,m):""}const f={emscripten_get_now:CTe,emscripten_memcpy_big:s,emscripten_resize_heap:a,fd_write:()=>0};async function h(){const m=await t({env:f,wasi_snapshot_preview1:f});e=m.memory,o(e.buffer),Object.assign(r,m),r.UTF8ToString=u}return await h(),r}var STe=Object.defineProperty,TTe=(t,e,n)=>e in t?STe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yr=(t,e,n)=>(TTe(t,typeof e!="symbol"?e+"":e,n),n);let Sr=null;function NTe(t){throw new R3(t.UTF8ToString(t.getLastOnigError()))}class YE{constructor(e){yr(this,"utf16Length"),yr(this,"utf8Length"),yr(this,"utf16Value"),yr(this,"utf8Value"),yr(this,"utf16OffsetToUtf8"),yr(this,"utf8OffsetToUtf16");const n=e.length,r=YE._utf8ByteLength(e),o=r!==n,s=o?new Uint32Array(n+1):null;o&&(s[n]=r);const i=o?new Uint32Array(r+1):null;o&&(i[r]=n);const a=new Uint8Array(r);let l=0;for(let c=0;c<n;c++){const u=e.charCodeAt(c);let f=u,h=!1;if(u>=55296&&u<=56319&&c+1<n){const p=e.charCodeAt(c+1);p>=56320&&p<=57343&&(f=(u-55296<<10)+65536|p-56320,h=!0)}o&&(s[c]=l,h&&(s[c+1]=l),f<=127?i[l+0]=c:f<=2047?(i[l+0]=c,i[l+1]=c):f<=65535?(i[l+0]=c,i[l+1]=c,i[l+2]=c):(i[l+0]=c,i[l+1]=c,i[l+2]=c,i[l+3]=c)),f<=127?a[l++]=f:f<=2047?(a[l++]=192|(f&1984)>>>6,a[l++]=128|(f&63)>>>0):f<=65535?(a[l++]=224|(f&61440)>>>12,a[l++]=128|(f&4032)>>>6,a[l++]=128|(f&63)>>>0):(a[l++]=240|(f&1835008)>>>18,a[l++]=128|(f&258048)>>>12,a[l++]=128|(f&4032)>>>6,a[l++]=128|(f&63)>>>0),h&&c++}this.utf16Length=n,this.utf8Length=r,this.utf16Value=e,this.utf8Value=a,this.utf16OffsetToUtf8=s,this.utf8OffsetToUtf16=i}static _utf8ByteLength(e){let n=0;for(let r=0,o=e.length;r<o;r++){const s=e.charCodeAt(r);let i=s,a=!1;if(s>=55296&&s<=56319&&r+1<o){const l=e.charCodeAt(r+1);l>=56320&&l<=57343&&(i=(s-55296<<10)+65536|l-56320,a=!0)}i<=127?n+=1:i<=2047?n+=2:i<=65535?n+=3:n+=4,a&&r++}return n}createString(e){const n=e.omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,n),n}}const Sa=class{constructor(t){if(yr(this,"id",++Sa.LAST_ID),yr(this,"_onigBinding"),yr(this,"content"),yr(this,"utf16Length"),yr(this,"utf8Length"),yr(this,"utf16OffsetToUtf8"),yr(this,"utf8OffsetToUtf16"),yr(this,"ptr"),!Sr)throw new R3("Must invoke loadWasm first.");this._onigBinding=Sr,this.content=t;const e=new YE(t);this.utf16Length=e.utf16Length,this.utf8Length=e.utf8Length,this.utf16OffsetToUtf8=e.utf16OffsetToUtf8,this.utf8OffsetToUtf16=e.utf8OffsetToUtf16,this.utf8Length<1e4&&!Sa._sharedPtrInUse?(Sa._sharedPtr||(Sa._sharedPtr=Sr.omalloc(1e4)),Sa._sharedPtrInUse=!0,Sr.HEAPU8.set(e.utf8Value,Sa._sharedPtr),this.ptr=Sa._sharedPtr):this.ptr=e.createString(Sr)}convertUtf8OffsetToUtf16(t){return this.utf8OffsetToUtf16?t<0?0:t>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[t]:t}convertUtf16OffsetToUtf8(t){return this.utf16OffsetToUtf8?t<0?0:t>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[t]:t}dispose(){this.ptr===Sa._sharedPtr?Sa._sharedPtrInUse=!1:this._onigBinding.ofree(this.ptr)}};let Xv=Sa;yr(Xv,"LAST_ID",0);yr(Xv,"_sharedPtr",0);yr(Xv,"_sharedPtrInUse",!1);class ITe{constructor(e){if(yr(this,"_onigBinding"),yr(this,"_ptr"),!Sr)throw new R3("Must invoke loadWasm first.");const n=[],r=[];for(let a=0,l=e.length;a<l;a++){const c=new YE(e[a]);n[a]=c.createString(Sr),r[a]=c.utf8Length}const o=Sr.omalloc(4*e.length);Sr.HEAPU32.set(n,o/4);const s=Sr.omalloc(4*e.length);Sr.HEAPU32.set(r,s/4);const i=Sr.createOnigScanner(o,s,e.length);for(let a=0,l=e.length;a<l;a++)Sr.ofree(n[a]);Sr.ofree(s),Sr.ofree(o),i===0&&NTe(Sr),this._onigBinding=Sr,this._ptr=i}dispose(){this._onigBinding.freeOnigScanner(this._ptr)}findNextMatchSync(e,n,r){let o=0;if(typeof r=="number"&&(o=r),typeof e=="string"){e=new Xv(e);const s=this._findNextMatchSync(e,n,!1,o);return e.dispose(),s}return this._findNextMatchSync(e,n,!1,o)}_findNextMatchSync(e,n,r,o){const s=this._onigBinding,i=s.findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(n),o);if(i===0)return null;const a=s.HEAPU32;let l=i/4;const c=a[l++],u=a[l++],f=[];for(let h=0;h<u;h++){const p=e.convertUtf8OffsetToUtf16(a[l++]),m=e.convertUtf8OffsetToUtf16(a[l++]);f[h]={start:p,end:m,length:m-p}}return{index:c,captureIndices:f}}}function RTe(t){return typeof t.instantiator=="function"}function ATe(t){return typeof t.default=="function"}function PTe(t){return typeof t.data<"u"}function MTe(t){return typeof Response<"u"&&t instanceof Response}function DTe(t){var e;return typeof ArrayBuffer<"u"&&(t instanceof ArrayBuffer||ArrayBuffer.isView(t))||typeof Buffer<"u"&&((e=Buffer.isBuffer)==null?void 0:e.call(Buffer,t))||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer||typeof Uint32Array<"u"&&t instanceof Uint32Array}let g0;function OTe(t){if(g0)return g0;async function e(){Sr=await kTe(async n=>{let r=t;return r=await r,typeof r=="function"&&(r=await r(n)),typeof r=="function"&&(r=await r(n)),RTe(r)?r=await r.instantiator(n):ATe(r)?r=await r.default(n):(PTe(r)&&(r=r.data),MTe(r)?typeof WebAssembly.instantiateStreaming=="function"?r=await LTe(r)(n):r=await jTe(r)(n):DTe(r)?r=await SS(r)(n):r instanceof WebAssembly.Module?r=await SS(r)(n):"default"in r&&r.default instanceof WebAssembly.Module&&(r=await SS(r.default)(n))),"instance"in r&&(r=r.instance),"exports"in r&&(r=r.exports),r})}return g0=e(),g0}function SS(t){return e=>WebAssembly.instantiate(t,e)}function LTe(t){return e=>WebAssembly.instantiateStreaming(t,e)}function jTe(t){return async e=>{const n=await t.arrayBuffer();return WebAssembly.instantiate(n,e)}}let VTe;function $Te(){return VTe}async function VY(t){return t&&await OTe(t),{createScanner(e){return new ITe(e.map(n=>typeof n=="string"?n:n.source))},createString(e){return new Xv(e)}}}function BTe(t){return A3(t)}function A3(t){return Array.isArray(t)?FTe(t):t instanceof RegExp?t:typeof t=="object"?UTe(t):t}function FTe(t){let e=[];for(let n=0,r=t.length;n<r;n++)e[n]=A3(t[n]);return e}function UTe(t){let e={};for(let n in t)e[n]=A3(t[n]);return e}function $Y(t,...e){return e.forEach(n=>{for(let r in n)t[r]=n[r]}),t}function BY(t){const e=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return e===0?t:~e===t.length-1?BY(t.substring(0,t.length-1)):t.substr(~e+1)}var TS=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,y0=class{static hasCaptures(t){return t===null?!1:(TS.lastIndex=0,TS.test(t))}static replaceCaptures(t,e,n){return t.replace(TS,(r,o,s,i)=>{let a=n[parseInt(o||s,10)];if(a){let l=e.substring(a.start,a.end);for(;l[0]===".";)l=l.substring(1);switch(i){case"downcase":return l.toLowerCase();case"upcase":return l.toUpperCase();default:return l}}else return r})}};function FY(t,e){return t<e?-1:t>e?1:0}function UY(t,e){if(t===null&&e===null)return 0;if(!t)return-1;if(!e)return 1;let n=t.length,r=e.length;if(n===r){for(let o=0;o<n;o++){let s=FY(t[o],e[o]);if(s!==0)return s}return 0}return n-r}function SL(t){return!!(/^#[0-9a-f]{6}$/i.test(t)||/^#[0-9a-f]{8}$/i.test(t)||/^#[0-9a-f]{3}$/i.test(t)||/^#[0-9a-f]{4}$/i.test(t))}function HY(t){return t.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var zY=class{constructor(t){Ee(this,"cache",new Map);this.fn=t}get(t){if(this.cache.has(t))return this.cache.get(t);const e=this.fn(t);return this.cache.set(t,e),e}},Yx=class{constructor(t,e,n){Ee(this,"_cachedMatchRoot",new zY(t=>this._root.match(t)));this._colorMap=t,this._defaults=e,this._root=n}static createFromRawTheme(t,e){return this.createFromParsedTheme(WTe(t),e)}static createFromParsedTheme(t,e){return qTe(t,e)}getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(t){if(t===null)return this._defaults;const e=t.scopeName,r=this._cachedMatchRoot.get(e).find(o=>HTe(t.parent,o.parentScopes));return r?new WY(r.fontStyle,r.foreground,r.background):null}},NS=class vb{constructor(e,n){this.parent=e,this.scopeName=n}static push(e,n){for(const r of n)e=new vb(e,r);return e}static from(...e){let n=null;for(let r=0;r<e.length;r++)n=new vb(n,e[r]);return n}push(e){return new vb(this,e)}getSegments(){let e=this;const n=[];for(;e;)n.push(e.scopeName),e=e.parent;return n.reverse(),n}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push(r.scopeName),r=r.parent;return r===e?n.reverse():void 0}};function HTe(t,e){if(e.length===0)return!0;for(let n=0;n<e.length;n++){let r=e[n],o=!1;if(r===">"){if(n===e.length-1)return!1;r=e[++n],o=!0}for(;t&&!zTe(t.scopeName,r);){if(o)return!1;t=t.parent}if(!t)return!1;t=t.parent}return!0}function zTe(t,e){return e===t||t.startsWith(e)&&t[e.length]==="."}var WY=class{constructor(t,e,n){this.fontStyle=t,this.foregroundId=e,this.backgroundId=n}};function WTe(t){if(!t)return[];if(!t.settings||!Array.isArray(t.settings))return[];let e=t.settings,n=[],r=0;for(let o=0,s=e.length;o<s;o++){let i=e[o];if(!i.settings)continue;let a;if(typeof i.scope=="string"){let f=i.scope;f=f.replace(/^[,]+/,""),f=f.replace(/[,]+$/,""),a=f.split(",")}else Array.isArray(i.scope)?a=i.scope:a=[""];let l=-1;if(typeof i.settings.fontStyle=="string"){l=0;let f=i.settings.fontStyle.split(" ");for(let h=0,p=f.length;h<p;h++)switch(f[h]){case"italic":l=l|1;break;case"bold":l=l|2;break;case"underline":l=l|4;break;case"strikethrough":l=l|8;break}}let c=null;typeof i.settings.foreground=="string"&&SL(i.settings.foreground)&&(c=i.settings.foreground);let u=null;typeof i.settings.background=="string"&&SL(i.settings.background)&&(u=i.settings.background);for(let f=0,h=a.length;f<h;f++){let m=a[f].trim().split(" "),y=m[m.length-1],x=null;m.length>1&&(x=m.slice(0,m.length-1),x.reverse()),n[r++]=new GTe(y,x,o,l,c,u)}}return n}var GTe=class{constructor(t,e,n,r,o,s){this.scope=t,this.parentScopes=e,this.index=n,this.fontStyle=r,this.foreground=o,this.background=s}},Xl=(t=>(t[t.NotSet=-1]="NotSet",t[t.None=0]="None",t[t.Italic=1]="Italic",t[t.Bold=2]="Bold",t[t.Underline=4]="Underline",t[t.Strikethrough=8]="Strikethrough",t))(Xl||{});function qTe(t,e){t.sort((l,c)=>{let u=FY(l.scope,c.scope);return u!==0||(u=UY(l.parentScopes,c.parentScopes),u!==0)?u:l.index-c.index});let n=0,r="#000000",o="#ffffff";for(;t.length>=1&&t[0].scope==="";){let l=t.shift();l.fontStyle!==-1&&(n=l.fontStyle),l.foreground!==null&&(r=l.foreground),l.background!==null&&(o=l.background)}let s=new KTe(e),i=new WY(n,s.getId(r),s.getId(o)),a=new QTe(new UI(0,null,-1,0,0),[]);for(let l=0,c=t.length;l<c;l++){let u=t[l];a.insert(0,u.scope,u.parentScopes,u.fontStyle,s.getId(u.foreground),s.getId(u.background))}return new Yx(s,i,a)}var KTe=class{constructor(t){Ee(this,"_isFrozen");Ee(this,"_lastColorId");Ee(this,"_id2color");Ee(this,"_color2id");if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(t)){this._isFrozen=!0;for(let e=0,n=t.length;e<n;e++)this._color2id[t[e]]=e,this._id2color[e]=t[e]}else this._isFrozen=!1}getId(t){if(t===null)return 0;t=t.toUpperCase();let e=this._color2id[t];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${t}`);return e=++this._lastColorId,this._color2id[t]=e,this._id2color[e]=t,e}getColorMap(){return this._id2color.slice(0)}},YTe=Object.freeze([]),UI=class GY{constructor(e,n,r,o,s){Ee(this,"scopeDepth");Ee(this,"parentScopes");Ee(this,"fontStyle");Ee(this,"foreground");Ee(this,"background");this.scopeDepth=e,this.parentScopes=n||YTe,this.fontStyle=r,this.foreground=o,this.background=s}clone(){return new GY(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let n=[];for(let r=0,o=e.length;r<o;r++)n[r]=e[r].clone();return n}acceptOverwrite(e,n,r,o){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,n!==-1&&(this.fontStyle=n),r!==0&&(this.foreground=r),o!==0&&(this.background=o)}},QTe=class HI{constructor(e,n=[],r={}){Ee(this,"_rulesWithParentScopes");this._mainRule=e,this._children=r,this._rulesWithParentScopes=n}static _cmpBySpecificity(e,n){if(e.scopeDepth!==n.scopeDepth)return n.scopeDepth-e.scopeDepth;let r=0,o=0;for(;e.parentScopes[r]===">"&&r++,n.parentScopes[o]===">"&&o++,!(r>=e.parentScopes.length||o>=n.parentScopes.length);){const s=n.parentScopes[o].length-e.parentScopes[r].length;if(s!==0)return s;r++,o++}return n.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let r=e.indexOf("."),o,s;if(r===-1?(o=e,s=""):(o=e.substring(0,r),s=e.substring(r+1)),this._children.hasOwnProperty(o))return this._children[o].match(s)}const n=this._rulesWithParentScopes.concat(this._mainRule);return n.sort(HI._cmpBySpecificity),n}insert(e,n,r,o,s,i){if(n===""){this._doInsertHere(e,r,o,s,i);return}let a=n.indexOf("."),l,c;a===-1?(l=n,c=""):(l=n.substring(0,a),c=n.substring(a+1));let u;this._children.hasOwnProperty(l)?u=this._children[l]:(u=new HI(this._mainRule.clone(),UI.cloneArr(this._rulesWithParentScopes)),this._children[l]=u),u.insert(e+1,c,r,o,s,i)}_doInsertHere(e,n,r,o,s){if(n===null){this._mainRule.acceptOverwrite(e,r,o,s);return}for(let i=0,a=this._rulesWithParentScopes.length;i<a;i++){let l=this._rulesWithParentScopes[i];if(UY(l.parentScopes,n)===0){l.acceptOverwrite(e,r,o,s);return}}r===-1&&(r=this._mainRule.fontStyle),o===0&&(o=this._mainRule.foreground),s===0&&(s=this._mainRule.background),this._rulesWithParentScopes.push(new UI(e,n,r,o,s))}},vm=class qs{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const n=qs.getLanguageId(e),r=qs.getTokenType(e),o=qs.getFontStyle(e),s=qs.getForeground(e),i=qs.getBackground(e);console.log({languageId:n,tokenType:r,fontStyle:o,foreground:s,background:i})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,n,r,o,s,i,a){let l=qs.getLanguageId(e),c=qs.getTokenType(e),u=qs.containsBalancedBrackets(e)?1:0,f=qs.getFontStyle(e),h=qs.getForeground(e),p=qs.getBackground(e);return n!==0&&(l=n),r!==8&&(c=r),o!==null&&(u=o?1:0),s!==-1&&(f=s),i!==0&&(h=i),a!==0&&(p=a),(l<<0|c<<8|u<<10|f<<11|h<<15|p<<24)>>>0}};function Qx(t,e){const n=[],r=XTe(t);let o=r.next();for(;o!==null;){let l=0;if(o.length===2&&o.charAt(1)===":"){switch(o.charAt(0)){case"R":l=1;break;case"L":l=-1;break;default:console.log(`Unknown priority ${o} in scope selector`)}o=r.next()}let c=i();if(n.push({matcher:c,priority:l}),o!==",")break;o=r.next()}return n;function s(){if(o==="-"){o=r.next();const l=s();return c=>!!l&&!l(c)}if(o==="("){o=r.next();const l=a();return o===")"&&(o=r.next()),l}if(TL(o)){const l=[];do l.push(o),o=r.next();while(TL(o));return c=>e(l,c)}return null}function i(){const l=[];let c=s();for(;c;)l.push(c),c=s();return u=>l.every(f=>f(u))}function a(){const l=[];let c=i();for(;c&&(l.push(c),o==="|"||o===",");){do o=r.next();while(o==="|"||o===",");c=i()}return u=>l.some(f=>f(u))}}function TL(t){return!!t&&!!t.match(/[\w\.:]+/)}function XTe(t){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=e.exec(t);return{next:()=>{if(!n)return null;const r=n[0];return n=e.exec(t),r}}}function qY(t){typeof t.dispose=="function"&&t.dispose()}var $1=class{constructor(t){this.scopeName=t}toKey(){return this.scopeName}},JTe=class{constructor(t,e){this.scopeName=t,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},ZTe=class{constructor(){Ee(this,"_references",[]);Ee(this,"_seenReferenceKeys",new Set);Ee(this,"visitedRule",new Set)}get references(){return this._references}add(t){const e=t.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(t))}},eNe=class{constructor(t,e){Ee(this,"seenFullScopeRequests",new Set);Ee(this,"seenPartialScopeRequests",new Set);Ee(this,"Q");this.repo=t,this.initialScopeName=e,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new $1(this.initialScopeName)]}processQueue(){const t=this.Q;this.Q=[];const e=new ZTe;for(const n of t)tNe(n,this.initialScopeName,this.repo,e);for(const n of e.references)if(n instanceof $1){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};function tNe(t,e,n,r){const o=n.lookup(t.scopeName);if(!o){if(t.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const s=n.lookup(e);t instanceof $1?wb({baseGrammar:s,selfGrammar:o},r):zI(t.ruleName,{baseGrammar:s,selfGrammar:o,repository:o.repository},r);const i=n.injections(t.scopeName);if(i)for(const a of i)r.add(new $1(a))}function zI(t,e,n){if(e.repository&&e.repository[t]){const r=e.repository[t];Xx([r],e,n)}}function wb(t,e){t.selfGrammar.patterns&&Array.isArray(t.selfGrammar.patterns)&&Xx(t.selfGrammar.patterns,{...t,repository:t.selfGrammar.repository},e),t.selfGrammar.injections&&Xx(Object.values(t.selfGrammar.injections),{...t,repository:t.selfGrammar.repository},e)}function Xx(t,e,n){for(const r of t){if(n.visitedRule.has(r))continue;n.visitedRule.add(r);const o=r.repository?$Y({},e.repository,r.repository):e.repository;Array.isArray(r.patterns)&&Xx(r.patterns,{...e,repository:o},n);const s=r.include;if(!s)continue;const i=KY(s);switch(i.kind){case 0:wb({...e,selfGrammar:e.baseGrammar},n);break;case 1:wb(e,n);break;case 2:zI(i.ruleName,{...e,repository:o},n);break;case 3:case 4:const a=i.scopeName===e.selfGrammar.scopeName?e.selfGrammar:i.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(a){const l={baseGrammar:e.baseGrammar,selfGrammar:a,repository:o};i.kind===4?zI(i.ruleName,l,n):wb(l,n)}else i.kind===4?n.add(new JTe(i.scopeName,i.ruleName)):n.add(new $1(i.scopeName));break}}}var nNe=class{constructor(){Ee(this,"kind",0)}},rNe=class{constructor(){Ee(this,"kind",1)}},oNe=class{constructor(t){Ee(this,"kind",2);this.ruleName=t}},sNe=class{constructor(t){Ee(this,"kind",3);this.scopeName=t}},iNe=class{constructor(t,e){Ee(this,"kind",4);this.scopeName=t,this.ruleName=e}};function KY(t){if(t==="$base")return new nNe;if(t==="$self")return new rNe;const e=t.indexOf("#");if(e===-1)return new sNe(t);if(e===0)return new oNe(t.substring(1));{const n=t.substring(0,e),r=t.substring(e+1);return new iNe(n,r)}}var aNe=/\\(\d+)/,NL=/\\(\d+)/g,lNe=-1,YY=-2;var Jv=class{constructor(t,e,n,r){Ee(this,"$location");Ee(this,"id");Ee(this,"_nameIsCapturing");Ee(this,"_name");Ee(this,"_contentNameIsCapturing");Ee(this,"_contentName");this.$location=t,this.id=e,this._name=n||null,this._nameIsCapturing=y0.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=y0.hasCaptures(this._contentName)}get debugName(){const t=this.$location?`${BY(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${t}`}getName(t,e){return!this._nameIsCapturing||this._name===null||t===null||e===null?this._name:y0.replaceCaptures(this._name,t,e)}getContentName(t,e){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:y0.replaceCaptures(this._contentName,t,e)}},cNe=class extends Jv{constructor(e,n,r,o,s){super(e,n,r,o);Ee(this,"retokenizeCapturedWithRuleId");this.retokenizeCapturedWithRuleId=s}dispose(){}collectPatterns(e,n){throw new Error("Not supported!")}compile(e,n){throw new Error("Not supported!")}compileAG(e,n,r,o){throw new Error("Not supported!")}},uNe=class extends Jv{constructor(e,n,r,o,s){super(e,n,r,null);Ee(this,"_match");Ee(this,"captures");Ee(this,"_cachedCompiledPatterns");this._match=new B1(o,this.id),this.captures=s,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(e,n){n.push(this._match)}compile(e,n){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,n,r,o){return this._getCachedCompiledPatterns(e).compileAG(e,r,o)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new F1,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},IL=class extends Jv{constructor(e,n,r,o,s){super(e,n,r,o);Ee(this,"hasMissingPatterns");Ee(this,"patterns");Ee(this,"_cachedCompiledPatterns");this.patterns=s.patterns,this.hasMissingPatterns=s.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(e,n){for(const r of this.patterns)e.getRule(r).collectPatterns(e,n)}compile(e,n){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,n,r,o){return this._getCachedCompiledPatterns(e).compileAG(e,r,o)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new F1,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},WI=class extends Jv{constructor(e,n,r,o,s,i,a,l,c,u){super(e,n,r,o);Ee(this,"_begin");Ee(this,"beginCaptures");Ee(this,"_end");Ee(this,"endHasBackReferences");Ee(this,"endCaptures");Ee(this,"applyEndPatternLast");Ee(this,"hasMissingPatterns");Ee(this,"patterns");Ee(this,"_cachedCompiledPatterns");this._begin=new B1(s,this.id),this.beginCaptures=i,this._end=new B1(a||"￿",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=l,this.applyEndPatternLast=c||!1,this.patterns=u.patterns,this.hasMissingPatterns=u.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(e,n){return this._end.resolveBackReferences(e,n)}collectPatterns(e,n){n.push(this._begin)}compile(e,n){return this._getCachedCompiledPatterns(e,n).compile(e)}compileAG(e,n,r,o){return this._getCachedCompiledPatterns(e,n).compileAG(e,r,o)}_getCachedCompiledPatterns(e,n){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new F1;for(const r of this.patterns)e.getRule(r).collectPatterns(e,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,n):this._cachedCompiledPatterns.setSource(0,n)),this._cachedCompiledPatterns}},Jx=class extends Jv{constructor(e,n,r,o,s,i,a,l,c){super(e,n,r,o);Ee(this,"_begin");Ee(this,"beginCaptures");Ee(this,"whileCaptures");Ee(this,"_while");Ee(this,"whileHasBackReferences");Ee(this,"hasMissingPatterns");Ee(this,"patterns");Ee(this,"_cachedCompiledPatterns");Ee(this,"_cachedCompiledWhilePatterns");this._begin=new B1(s,this.id),this.beginCaptures=i,this.whileCaptures=l,this._while=new B1(a,YY),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=c.patterns,this.hasMissingPatterns=c.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(e,n){return this._while.resolveBackReferences(e,n)}collectPatterns(e,n){n.push(this._begin)}compile(e,n){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,n,r,o){return this._getCachedCompiledPatterns(e).compileAG(e,r,o)}_getCachedCompiledPatterns(e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new F1;for(const n of this.patterns)e.getRule(n).collectPatterns(e,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(e,n){return this._getCachedCompiledWhilePatterns(e,n).compile(e)}compileWhileAG(e,n,r,o){return this._getCachedCompiledWhilePatterns(e,n).compileAG(e,r,o)}_getCachedCompiledWhilePatterns(e,n){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new F1,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,n||"￿"),this._cachedCompiledWhilePatterns}},QY=class no{static createCaptureRule(e,n,r,o,s){return e.registerRule(i=>new cNe(n,i,r,o,s))}static getCompiledRuleId(e,n,r){return e.id||n.registerRule(o=>{if(e.id=o,e.match)return new uNe(e.$vscodeTextmateLocation,e.id,e.name,e.match,no._compileCaptures(e.captures,n,r));if(typeof e.begin>"u"){e.repository&&(r=$Y({},r,e.repository));let s=e.patterns;return typeof s>"u"&&e.include&&(s=[{include:e.include}]),new IL(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,no._compilePatterns(s,n,r))}return e.while?new Jx(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,no._compileCaptures(e.beginCaptures||e.captures,n,r),e.while,no._compileCaptures(e.whileCaptures||e.captures,n,r),no._compilePatterns(e.patterns,n,r)):new WI(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,no._compileCaptures(e.beginCaptures||e.captures,n,r),e.end,no._compileCaptures(e.endCaptures||e.captures,n,r),e.applyEndPatternLast,no._compilePatterns(e.patterns,n,r))}),e.id}static _compileCaptures(e,n,r){let o=[];if(e){let s=0;for(const i in e){if(i==="$vscodeTextmateLocation")continue;const a=parseInt(i,10);a>s&&(s=a)}for(let i=0;i<=s;i++)o[i]=null;for(const i in e){if(i==="$vscodeTextmateLocation")continue;const a=parseInt(i,10);let l=0;e[i].patterns&&(l=no.getCompiledRuleId(e[i],n,r)),o[a]=no.createCaptureRule(n,e[i].$vscodeTextmateLocation,e[i].name,e[i].contentName,l)}}return o}static _compilePatterns(e,n,r){let o=[];if(e)for(let s=0,i=e.length;s<i;s++){const a=e[s];let l=-1;if(a.include){const c=KY(a.include);switch(c.kind){case 0:case 1:l=no.getCompiledRuleId(r[a.include],n,r);break;case 2:let u=r[c.ruleName];u&&(l=no.getCompiledRuleId(u,n,r));break;case 3:case 4:const f=c.scopeName,h=c.kind===4?c.ruleName:null,p=n.getExternalGrammar(f,r);if(p)if(h){let m=p.repository[h];m&&(l=no.getCompiledRuleId(m,n,p.repository))}else l=no.getCompiledRuleId(p.repository.$self,n,p.repository);break}}else l=no.getCompiledRuleId(a,n,r);if(l!==-1){const c=n.getRule(l);let u=!1;if((c instanceof IL||c instanceof WI||c instanceof Jx)&&c.hasMissingPatterns&&c.patterns.length===0&&(u=!0),u)continue;o.push(l)}}return{patterns:o,hasMissingPatterns:(e?e.length:0)!==o.length}}},B1=class XY{constructor(e,n){Ee(this,"source");Ee(this,"ruleId");Ee(this,"hasAnchor");Ee(this,"hasBackReferences");Ee(this,"_anchorCache");if(e&&typeof e=="string"){const r=e.length;let o=0,s=[],i=!1;for(let a=0;a<r;a++)if(e.charAt(a)==="\\"&&a+1<r){const c=e.charAt(a+1);c==="z"?(s.push(e.substring(o,a)),s.push("$(?!\\n)(?<!\\n)"),o=a+2):(c==="A"||c==="G")&&(i=!0),a++}this.hasAnchor=i,o===0?this.source=e:(s.push(e.substring(o,r)),this.source=s.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,typeof this.source=="string"?this.hasBackReferences=aNe.test(this.source):this.hasBackReferences=!1}clone(){return new XY(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,n){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let r=n.map(o=>e.substring(o.start,o.end));return NL.lastIndex=0,this.source.replace(NL,(o,s)=>HY(r[parseInt(s,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let e=[],n=[],r=[],o=[],s,i,a,l;for(s=0,i=this.source.length;s<i;s++)a=this.source.charAt(s),e[s]=a,n[s]=a,r[s]=a,o[s]=a,a==="\\"&&s+1<i&&(l=this.source.charAt(s+1),l==="A"?(e[s+1]="￿",n[s+1]="￿",r[s+1]="A",o[s+1]="A"):l==="G"?(e[s+1]="￿",n[s+1]="G",r[s+1]="￿",o[s+1]="G"):(e[s+1]=l,n[s+1]=l,r[s+1]=l,o[s+1]=l),s++);return{A0_G0:e.join(""),A0_G1:n.join(""),A1_G0:r.join(""),A1_G1:o.join("")}}resolveAnchors(e,n){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:e?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},F1=class{constructor(){Ee(this,"_items");Ee(this,"_hasAnchors");Ee(this,"_cached");Ee(this,"_anchorCache");this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(t){this._items.push(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}unshift(t){this._items.unshift(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}length(){return this._items.length}setSource(t,e){this._items[t].source!==e&&(this._disposeCaches(),this._items[t].setSource(e))}compile(t){if(!this._cached){let e=this._items.map(n=>n.source);this._cached=new RL(t,e,this._items.map(n=>n.ruleId))}return this._cached}compileAG(t,e,n){return this._hasAnchors?e?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G0):this.compile(t)}_resolveAnchors(t,e,n){let r=this._items.map(o=>o.resolveAnchors(e,n));return new RL(t,r,this._items.map(o=>o.ruleId))}},RL=class{constructor(t,e,n){Ee(this,"scanner");this.regExps=e,this.rules=n,this.scanner=t.createOnigScanner(e)}dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const t=[];for(let e=0,n=this.rules.length;e<n;e++)t.push("   - "+this.rules[e]+": "+this.regExps[e]);return t.join(`
`)}findNextMatchSync(t,e,n){const r=this.scanner.findNextMatchSync(t,e,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}},IS=class{constructor(t,e){this.languageId=t,this.tokenType=e}},Hl,dNe=(Hl=class{constructor(e,n){Ee(this,"_defaultAttributes");Ee(this,"_embeddedLanguagesMatcher");Ee(this,"_getBasicScopeAttributes",new zY(e=>{const n=this._scopeToLanguage(e),r=this._toStandardTokenType(e);return new IS(n,r)}));this._defaultAttributes=new IS(e,8),this._embeddedLanguagesMatcher=new fNe(Object.entries(n||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?Hl._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const n=e.match(Hl.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}},Ee(Hl,"_NULL_SCOPE_METADATA",new IS(0,0)),Ee(Hl,"STANDARD_TOKEN_TYPE_REGEXP",/\b(comment|string|regex|meta\.embedded)\b/),Hl),fNe=class{constructor(t){Ee(this,"values");Ee(this,"scopesRegExp");if(t.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(t);const e=t.map(([n,r])=>HY(n));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(t){if(!this.scopesRegExp)return;const e=t.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},AL=class{constructor(t,e){this.stack=t,this.stoppedEarly=e}};function JY(t,e,n,r,o,s,i,a){const l=e.content.length;let c=!1,u=-1;if(i){const p=hNe(t,e,n,r,o,s);o=p.stack,r=p.linePos,n=p.isFirstLine,u=p.anchorPosition}const f=Date.now();for(;!c;){if(a!==0&&Date.now()-f>a)return new AL(o,!0);h()}return new AL(o,!1);function h(){const p=pNe(t,e,n,r,o,u);if(!p){s.produce(o,l),c=!0;return}const m=p.captureIndices,y=p.matchedRuleId,x=m&&m.length>0?m[0].end>r:!1;if(y===lNe){const b=o.getRule(t);s.produce(o,m[0].start),o=o.withContentNameScopesList(o.nameScopesList),hy(t,e,n,o,s,b.endCaptures,m),s.produce(o,m[0].end);const C=o;if(o=o.parent,u=C.getAnchorPos(),!x&&C.getEnterPos()===r){o=C,s.produce(o,l),c=!0;return}}else{const b=t.getRule(y);s.produce(o,m[0].start);const C=o,E=b.getName(e.content,m),R=o.contentNameScopesList.pushAttributed(E,t);if(o=o.push(y,r,u,m[0].end===l,null,R,R),b instanceof WI){const D=b;hy(t,e,n,o,s,D.beginCaptures,m),s.produce(o,m[0].end),u=m[0].end;const O=D.getContentName(e.content,m),T=R.pushAttributed(O,t);if(o=o.withContentNameScopesList(T),D.endHasBackReferences&&(o=o.withEndRule(D.getEndWithResolvedBackReferences(e.content,m))),!x&&C.hasSameRuleAs(o)){o=o.pop(),s.produce(o,l),c=!0;return}}else if(b instanceof Jx){const D=b;hy(t,e,n,o,s,D.beginCaptures,m),s.produce(o,m[0].end),u=m[0].end;const O=D.getContentName(e.content,m),T=R.pushAttributed(O,t);if(o=o.withContentNameScopesList(T),D.whileHasBackReferences&&(o=o.withEndRule(D.getWhileWithResolvedBackReferences(e.content,m))),!x&&C.hasSameRuleAs(o)){o=o.pop(),s.produce(o,l),c=!0;return}}else if(hy(t,e,n,o,s,b.captures,m),s.produce(o,m[0].end),o=o.pop(),!x){o=o.safePop(),s.produce(o,l),c=!0;return}}m[0].end>r&&(r=m[0].end,n=!1)}}function hNe(t,e,n,r,o,s){let i=o.beginRuleCapturedEOL?0:-1;const a=[];for(let l=o;l;l=l.pop()){const c=l.getRule(t);c instanceof Jx&&a.push({rule:c,stack:l})}for(let l=a.pop();l;l=a.pop()){const{ruleScanner:c,findOptions:u}=yNe(l.rule,t,l.stack.endRule,n,r===i),f=c.findNextMatchSync(e,r,u);if(f){if(f.ruleId!==YY){o=l.stack.pop();break}f.captureIndices&&f.captureIndices.length&&(s.produce(l.stack,f.captureIndices[0].start),hy(t,e,n,l.stack,s,l.rule.whileCaptures,f.captureIndices),s.produce(l.stack,f.captureIndices[0].end),i=f.captureIndices[0].end,f.captureIndices[0].end>r&&(r=f.captureIndices[0].end,n=!1))}else{o=l.stack.pop();break}}return{stack:o,linePos:r,anchorPosition:i,isFirstLine:n}}function pNe(t,e,n,r,o,s){const i=mNe(t,e,n,r,o,s),a=t.getInjections();if(a.length===0)return i;const l=gNe(a,t,e,n,r,o,s);if(!l)return i;if(!i)return l;const c=i.captureIndices[0].start,u=l.captureIndices[0].start;return u<c||l.priorityMatch&&u===c?l:i}function mNe(t,e,n,r,o,s){const i=o.getRule(t),{ruleScanner:a,findOptions:l}=ZY(i,t,o.endRule,n,r===s),c=a.findNextMatchSync(e,r,l);return c?{captureIndices:c.captureIndices,matchedRuleId:c.ruleId}:null}function gNe(t,e,n,r,o,s,i){let a=Number.MAX_VALUE,l=null,c,u=0;const f=s.contentNameScopesList.getScopeNames();for(let h=0,p=t.length;h<p;h++){const m=t[h];if(!m.matcher(f))continue;const y=e.getRule(m.ruleId),{ruleScanner:x,findOptions:b}=ZY(y,e,null,r,o===i),C=x.findNextMatchSync(n,o,b);if(!C)continue;const E=C.captureIndices[0].start;if(!(E>=a)&&(a=E,l=C.captureIndices,c=C.ruleId,u=m.priority,a===o))break}return l?{priorityMatch:u===-1,captureIndices:l,matchedRuleId:c}:null}function ZY(t,e,n,r,o){return{ruleScanner:t.compileAG(e,n,r,o),findOptions:0}}function yNe(t,e,n,r,o){return{ruleScanner:t.compileWhileAG(e,n,r,o),findOptions:0}}function hy(t,e,n,r,o,s,i){if(s.length===0)return;const a=e.content,l=Math.min(s.length,i.length),c=[],u=i[0].end;for(let f=0;f<l;f++){const h=s[f];if(h===null)continue;const p=i[f];if(p.length===0)continue;if(p.start>u)break;for(;c.length>0&&c[c.length-1].endPos<=p.start;)o.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop();if(c.length>0?o.produceFromScopes(c[c.length-1].scopes,p.start):o.produce(r,p.start),h.retokenizeCapturedWithRuleId){const y=h.getName(a,i),x=r.contentNameScopesList.pushAttributed(y,t),b=h.getContentName(a,i),C=x.pushAttributed(b,t),E=r.push(h.retokenizeCapturedWithRuleId,p.start,-1,!1,null,x,C),R=t.createOnigString(a.substring(0,p.end));JY(t,R,n&&p.start===0,p.start,E,o,!1,0),qY(R);continue}const m=h.getName(a,i);if(m!==null){const x=(c.length>0?c[c.length-1].scopes:r.contentNameScopesList).pushAttributed(m,t);c.push(new vNe(x,p.end))}}for(;c.length>0;)o.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop()}var vNe=class{constructor(t,e){Ee(this,"scopes");Ee(this,"endPos");this.scopes=t,this.endPos=e}};function wNe(t,e,n,r,o,s,i,a){return new xNe(t,e,n,r,o,s,i,a)}function PL(t,e,n,r,o){const s=Qx(e,Zx),i=QY.getCompiledRuleId(n,r,o.repository);for(const a of s)t.push({debugSelector:e,matcher:a.matcher,ruleId:i,grammar:o,priority:a.priority})}function Zx(t,e){if(e.length<t.length)return!1;let n=0;return t.every(r=>{for(let o=n;o<e.length;o++)if(bNe(e[o],r))return n=o+1,!0;return!1})}function bNe(t,e){if(!t)return!1;if(t===e)return!0;const n=e.length;return t.length>n&&t.substr(0,n)===e&&t[n]==="."}var xNe=class{constructor(t,e,n,r,o,s,i,a){Ee(this,"_rootId");Ee(this,"_lastRuleId");Ee(this,"_ruleId2desc");Ee(this,"_includedGrammars");Ee(this,"_grammarRepository");Ee(this,"_grammar");Ee(this,"_injections");Ee(this,"_basicScopeAttributesProvider");Ee(this,"_tokenTypeMatchers");if(this._rootScopeName=t,this.balancedBracketSelectors=s,this._onigLib=a,this._basicScopeAttributesProvider=new dNe(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=i,this._grammar=ML(e,null),this._injections=null,this._tokenTypeMatchers=[],o)for(const l of Object.keys(o)){const c=Qx(l,Zx);for(const u of c)this._tokenTypeMatchers.push({matcher:u.matcher,type:o[l]})}}get themeProvider(){return this._grammarRepository}dispose(){for(const t of this._ruleId2desc)t&&t.dispose()}createOnigScanner(t){return this._onigLib.createOnigScanner(t)}createOnigString(t){return this._onigLib.createOnigString(t)}getMetadataForScope(t){return this._basicScopeAttributesProvider.getBasicScopeAttributes(t)}_collectInjections(){const t={lookup:o=>o===this._rootScopeName?this._grammar:this.getExternalGrammar(o),injections:o=>this._grammarRepository.injections(o)},e=[],n=this._rootScopeName,r=t.lookup(n);if(r){const o=r.injections;if(o)for(let i in o)PL(e,i,o[i],this,r);const s=this._grammarRepository.injections(n);s&&s.forEach(i=>{const a=this.getExternalGrammar(i);if(a){const l=a.injectionSelector;l&&PL(e,l,a,this,a)}})}return e.sort((o,s)=>o.priority-s.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(t){const e=++this._lastRuleId,n=t(e);return this._ruleId2desc[e]=n,n}getRule(t){return this._ruleId2desc[t]}getExternalGrammar(t,e){if(this._includedGrammars[t])return this._includedGrammars[t];if(this._grammarRepository){const n=this._grammarRepository.lookup(t);if(n)return this._includedGrammars[t]=ML(n,e&&e.$base),this._includedGrammars[t]}}tokenizeLine(t,e,n=0){const r=this._tokenize(t,e,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(t,e,n=0){const r=this._tokenize(t,e,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(t,e,n,r){this._rootId===-1&&(this._rootId=QY.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let o;if(!e||e===GI.NULL){o=!0;const c=this._basicScopeAttributesProvider.getDefaultAttributes(),u=this.themeProvider.getDefaults(),f=vm.set(0,c.languageId,c.tokenType,null,u.fontStyle,u.foregroundId,u.backgroundId),h=this.getRule(this._rootId).getName(null,null);let p;h?p=$y.createRootAndLookUpScopeName(h,f,this):p=$y.createRoot("unknown",f),e=new GI(null,this._rootId,-1,-1,!1,null,p,p)}else o=!1,e.reset();t=t+`
`;const s=this.createOnigString(t),i=s.content.length,a=new CNe(n,t,this._tokenTypeMatchers,this.balancedBracketSelectors),l=JY(this,s,o,0,e,a,!0,r);return qY(s),{lineLength:i,lineTokens:a,ruleStack:l.stack,stoppedEarly:l.stoppedEarly}}};function ML(t,e){return t=BTe(t),t.repository=t.repository||{},t.repository.$self={$vscodeTextmateLocation:t.$vscodeTextmateLocation,patterns:t.patterns,name:t.scopeName},t.repository.$base=e||t.repository.$self,t}var $y=class Ta{constructor(e,n,r){this.parent=e,this.scopePath=n,this.tokenAttributes=r}static fromExtension(e,n){let r=e,o=(e==null?void 0:e.scopePath)??null;for(const s of n)o=NS.push(o,s.scopeNames),r=new Ta(r,o,s.encodedTokenAttributes);return r}static createRoot(e,n){return new Ta(null,new NS(null,e),n)}static createRootAndLookUpScopeName(e,n,r){const o=r.getMetadataForScope(e),s=new NS(null,e),i=r.themeProvider.themeMatch(s),a=Ta.mergeAttributes(n,o,i);return new Ta(null,s,a)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return Ta.equals(this,e)}static equals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.scopeName!==n.scopeName||e.tokenAttributes!==n.tokenAttributes)return!1;e=e.parent,n=n.parent}while(!0)}static mergeAttributes(e,n,r){let o=-1,s=0,i=0;return r!==null&&(o=r.fontStyle,s=r.foregroundId,i=r.backgroundId),vm.set(e,n.languageId,n.tokenType,null,o,s,i)}pushAttributed(e,n){if(e===null)return this;if(e.indexOf(" ")===-1)return Ta._pushAttributed(this,e,n);const r=e.split(/ /g);let o=this;for(const s of r)o=Ta._pushAttributed(o,s,n);return o}static _pushAttributed(e,n,r){const o=r.getMetadataForScope(n),s=e.scopePath.push(n),i=r.themeProvider.themeMatch(s),a=Ta.mergeAttributes(e.tokenAttributes,o,i);return new Ta(e,s,a)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){var o;const n=[];let r=this;for(;r&&r!==e;)n.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(((o=r.parent)==null?void 0:o.scopePath)??null)}),r=r.parent;return r===e?n.reverse():void 0}},ei,GI=(ei=class{constructor(e,n,r,o,s,i,a,l){Ee(this,"_stackElementBrand");Ee(this,"_enterPos");Ee(this,"_anchorPos");Ee(this,"depth");this.parent=e,this.ruleId=n,this.beginRuleCapturedEOL=s,this.endRule=i,this.nameScopesList=a,this.contentNameScopesList=l,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=o}equals(e){return e===null?!1:ei._equals(this,e)}static _equals(e,n){return e===n?!0:this._structuralEquals(e,n)?$y.equals(e.contentNameScopesList,n.contentNameScopesList):!1}static _structuralEquals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.depth!==n.depth||e.ruleId!==n.ruleId||e.endRule!==n.endRule)return!1;e=e.parent,n=n.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){ei._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,n,r,o,s,i,a){return new ei(this,e,n,r,o,s,i,a)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,n){var r,o;return this.parent&&(n=this.parent._writeString(e,n)),e[n++]=`(${this.ruleId}, ${(r=this.nameScopesList)==null?void 0:r.toString()}, ${(o=this.contentNameScopesList)==null?void 0:o.toString()})`,n}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new ei(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let n=this;for(;n&&n._enterPos===e._enterPos;){if(n.ruleId===e.ruleId)return!0;n=n.parent}return!1}toStateStackFrame(){var e,n,r;return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:((n=this.nameScopesList)==null?void 0:n.getExtensionIfDefined(((e=this.parent)==null?void 0:e.nameScopesList)??null))??[],contentNameScopesList:((r=this.contentNameScopesList)==null?void 0:r.getExtensionIfDefined(this.nameScopesList))??[]}}static pushFrame(e,n){const r=$y.fromExtension((e==null?void 0:e.nameScopesList)??null,n.nameScopesList);return new ei(e,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,r,$y.fromExtension(r,n.contentNameScopesList))}},Ee(ei,"NULL",new ei(null,0,0,0,!1,null,null,null)),ei),_Ne=class{constructor(t,e){Ee(this,"balancedBracketScopes");Ee(this,"unbalancedBracketScopes");Ee(this,"allowAny",!1);this.balancedBracketScopes=t.flatMap(n=>n==="*"?(this.allowAny=!0,[]):Qx(n,Zx).map(r=>r.matcher)),this.unbalancedBracketScopes=e.flatMap(n=>Qx(n,Zx).map(r=>r.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(t){for(const e of this.unbalancedBracketScopes)if(e(t))return!1;for(const e of this.balancedBracketScopes)if(e(t))return!0;return this.allowAny}},CNe=class{constructor(t,e,n,r){Ee(this,"_emitBinaryTokens");Ee(this,"_lineText");Ee(this,"_tokens");Ee(this,"_binaryTokens");Ee(this,"_lastTokenEndIndex");Ee(this,"_tokenTypeOverrides");this.balancedBracketSelectors=r,this._emitBinaryTokens=t,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}produce(t,e){this.produceFromScopes(t.contentNameScopesList,e)}produceFromScopes(t,e){var r;if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let o=(t==null?void 0:t.tokenAttributes)??0,s=!1;if((r=this.balancedBracketSelectors)!=null&&r.matchesAlways&&(s=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const i=(t==null?void 0:t.getScopeNames())??[];for(const a of this._tokenTypeOverrides)a.matcher(i)&&(o=vm.set(o,0,a.type,null,-1,0,0));this.balancedBracketSelectors&&(s=this.balancedBracketSelectors.match(i))}if(s&&(o=vm.set(o,0,8,s,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===o){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(o),this._lastTokenEndIndex=e;return}const n=(t==null?void 0:t.getScopeNames())??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:n}),this._lastTokenEndIndex=e}getResult(t,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(t,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let r=0,o=this._binaryTokens.length;r<o;r++)n[r]=this._binaryTokens[r];return n}},ENe=class{constructor(t,e){Ee(this,"_grammars",new Map);Ee(this,"_rawGrammars",new Map);Ee(this,"_injectionGrammars",new Map);Ee(this,"_theme");this._onigLib=e,this._theme=t}dispose(){for(const t of this._grammars.values())t.dispose()}setTheme(t){this._theme=t}getColorMap(){return this._theme.getColorMap()}addGrammar(t,e){this._rawGrammars.set(t.scopeName,t),e&&this._injectionGrammars.set(t.scopeName,e)}lookup(t){return this._rawGrammars.get(t)}injections(t){return this._injectionGrammars.get(t)}getDefaults(){return this._theme.getDefaults()}themeMatch(t){return this._theme.match(t)}grammarForScopeName(t,e,n,r,o){if(!this._grammars.has(t)){let s=this._rawGrammars.get(t);if(!s)return null;this._grammars.set(t,wNe(t,s,e,n,r,o,this,this._onigLib))}return this._grammars.get(t)}},kNe=class{constructor(e){Ee(this,"_options");Ee(this,"_syncRegistry");Ee(this,"_ensureGrammarCache");this._options=e,this._syncRegistry=new ENe(Yx.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,n){this._syncRegistry.setTheme(Yx.createFromRawTheme(e,n))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,n,r){return this.loadGrammarWithConfiguration(e,n,{embeddedLanguages:r})}loadGrammarWithConfiguration(e,n,r){return this._loadGrammar(e,n,r.embeddedLanguages,r.tokenTypes,new _Ne(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,n,r,o,s){const i=new eNe(this._syncRegistry,e);for(;i.Q.length>0;)i.Q.map(a=>this._loadSingleGrammar(a.scopeName)),i.processQueue();return this._grammarForScopeName(e,n,r,o,s)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const n=this._options.loadGrammar(e);if(n){const r=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(n,r)}}addGrammar(e,n=[],r=0,o=null){return this._syncRegistry.addGrammar(e,n),this._grammarForScopeName(e.scopeName,r,o)}_grammarForScopeName(e,n=0,r=null,o=null,s=null){return this._syncRegistry.grammarForScopeName(e,n,r,o,s)}},qI=GI.NULL;const SNe=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];class Zv{constructor(e,n,r){this.property=e,this.normal=n,r&&(this.space=r)}}Zv.prototype.property={};Zv.prototype.normal={};Zv.prototype.space=null;function eQ(t,e){const n={},r={};let o=-1;for(;++o<t.length;)Object.assign(n,t[o].property),Object.assign(r,t[o].normal);return new Zv(n,r,e)}function KI(t){return t.toLowerCase()}class xi{constructor(e,n){this.property=e,this.attribute=n}}xi.prototype.space=null;xi.prototype.boolean=!1;xi.prototype.booleanish=!1;xi.prototype.overloadedBoolean=!1;xi.prototype.number=!1;xi.prototype.commaSeparated=!1;xi.prototype.spaceSeparated=!1;xi.prototype.commaOrSpaceSeparated=!1;xi.prototype.mustUseProperty=!1;xi.prototype.defined=!1;let TNe=0;const mt=th(),ir=th(),tQ=th(),Le=th(),mn=th(),jp=th(),ds=th();function th(){return 2**++TNe}const YI=Object.freeze(Object.defineProperty({__proto__:null,boolean:mt,booleanish:ir,commaOrSpaceSeparated:ds,commaSeparated:jp,number:Le,overloadedBoolean:tQ,spaceSeparated:mn},Symbol.toStringTag,{value:"Module"})),RS=Object.keys(YI);class P3 extends xi{constructor(e,n,r,o){let s=-1;if(super(e,n),DL(this,"space",o),typeof r=="number")for(;++s<RS.length;){const i=RS[s];DL(this,RS[s],(r&YI[i])===YI[i])}}}P3.prototype.defined=!0;function DL(t,e,n){n&&(t[e]=n)}const NNe={}.hasOwnProperty;function Km(t){const e={},n={};let r;for(r in t.properties)if(NNe.call(t.properties,r)){const o=t.properties[r],s=new P3(r,t.transform(t.attributes||{},r),o,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[KI(r)]=r,n[KI(s.attribute)]=r}return new Zv(e,n,t.space)}const nQ=Km({space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),rQ=Km({space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function oQ(t,e){return e in t?t[e]:e}function sQ(t,e){return oQ(t,e.toLowerCase())}const iQ=Km({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:sQ,properties:{xmlns:null,xmlnsXLink:null}}),aQ=Km({transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:ir,ariaAutoComplete:null,ariaBusy:ir,ariaChecked:ir,ariaColCount:Le,ariaColIndex:Le,ariaColSpan:Le,ariaControls:mn,ariaCurrent:null,ariaDescribedBy:mn,ariaDetails:null,ariaDisabled:ir,ariaDropEffect:mn,ariaErrorMessage:null,ariaExpanded:ir,ariaFlowTo:mn,ariaGrabbed:ir,ariaHasPopup:null,ariaHidden:ir,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:mn,ariaLevel:Le,ariaLive:null,ariaModal:ir,ariaMultiLine:ir,ariaMultiSelectable:ir,ariaOrientation:null,ariaOwns:mn,ariaPlaceholder:null,ariaPosInSet:Le,ariaPressed:ir,ariaReadOnly:ir,ariaRelevant:null,ariaRequired:ir,ariaRoleDescription:mn,ariaRowCount:Le,ariaRowIndex:Le,ariaRowSpan:Le,ariaSelected:ir,ariaSetSize:Le,ariaSort:null,ariaValueMax:Le,ariaValueMin:Le,ariaValueNow:Le,ariaValueText:null,role:null}}),INe=Km({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:sQ,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:jp,acceptCharset:mn,accessKey:mn,action:null,allow:null,allowFullScreen:mt,allowPaymentRequest:mt,allowUserMedia:mt,alt:null,as:null,async:mt,autoCapitalize:null,autoComplete:mn,autoFocus:mt,autoPlay:mt,blocking:mn,capture:null,charSet:null,checked:mt,cite:null,className:mn,cols:Le,colSpan:null,content:null,contentEditable:ir,controls:mt,controlsList:mn,coords:Le|jp,crossOrigin:null,data:null,dateTime:null,decoding:null,default:mt,defer:mt,dir:null,dirName:null,disabled:mt,download:tQ,draggable:ir,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:mt,formTarget:null,headers:mn,height:Le,hidden:mt,high:Le,href:null,hrefLang:null,htmlFor:mn,httpEquiv:mn,id:null,imageSizes:null,imageSrcSet:null,inert:mt,inputMode:null,integrity:null,is:null,isMap:mt,itemId:null,itemProp:mn,itemRef:mn,itemScope:mt,itemType:mn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:mt,low:Le,manifest:null,max:null,maxLength:Le,media:null,method:null,min:null,minLength:Le,multiple:mt,muted:mt,name:null,nonce:null,noModule:mt,noValidate:mt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:mt,optimum:Le,pattern:null,ping:mn,placeholder:null,playsInline:mt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:mt,referrerPolicy:null,rel:mn,required:mt,reversed:mt,rows:Le,rowSpan:Le,sandbox:mn,scope:null,scoped:mt,seamless:mt,selected:mt,shadowRootClonable:mt,shadowRootDelegatesFocus:mt,shadowRootMode:null,shape:null,size:Le,sizes:null,slot:null,span:Le,spellCheck:ir,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Le,step:null,style:null,tabIndex:Le,target:null,title:null,translate:null,type:null,typeMustMatch:mt,useMap:null,value:ir,width:Le,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:mn,axis:null,background:null,bgColor:null,border:Le,borderColor:null,bottomMargin:Le,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:mt,declare:mt,event:null,face:null,frame:null,frameBorder:null,hSpace:Le,leftMargin:Le,link:null,longDesc:null,lowSrc:null,marginHeight:Le,marginWidth:Le,noResize:mt,noHref:mt,noShade:mt,noWrap:mt,object:null,profile:null,prompt:null,rev:null,rightMargin:Le,rules:null,scheme:null,scrolling:ir,standby:null,summary:null,text:null,topMargin:Le,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Le,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:mt,disableRemotePlayback:mt,prefix:null,property:null,results:Le,security:null,unselectable:null}}),RNe=Km({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:oQ,properties:{about:ds,accentHeight:Le,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Le,amplitude:Le,arabicForm:null,ascent:Le,attributeName:null,attributeType:null,azimuth:Le,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Le,by:null,calcMode:null,capHeight:Le,className:mn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Le,diffuseConstant:Le,direction:null,display:null,dur:null,divisor:Le,dominantBaseline:null,download:mt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Le,enableBackground:null,end:null,event:null,exponent:Le,externalResourcesRequired:null,fill:null,fillOpacity:Le,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:jp,g2:jp,glyphName:jp,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Le,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Le,horizOriginX:Le,horizOriginY:Le,id:null,ideographic:Le,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Le,k:Le,k1:Le,k2:Le,k3:Le,k4:Le,kernelMatrix:ds,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Le,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Le,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Le,overlineThickness:Le,paintOrder:null,panose1:null,path:null,pathLength:Le,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:mn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Le,pointsAtY:Le,pointsAtZ:Le,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ds,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ds,rev:ds,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ds,requiredFeatures:ds,requiredFonts:ds,requiredFormats:ds,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Le,specularExponent:Le,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Le,strikethroughThickness:Le,string:null,stroke:null,strokeDashArray:ds,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Le,strokeOpacity:Le,strokeWidth:null,style:null,surfaceScale:Le,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ds,tabIndex:Le,tableValues:null,target:null,targetX:Le,targetY:Le,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ds,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Le,underlineThickness:Le,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Le,values:null,vAlphabetic:Le,vMathematical:Le,vectorEffect:null,vHanging:Le,vIdeographic:Le,version:null,vertAdvY:Le,vertOriginX:Le,vertOriginY:Le,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Le,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),ANe=/^data[-\w.:]+$/i,OL=/-[a-z]/g,PNe=/[A-Z]/g;function MNe(t,e){const n=KI(e);let r=e,o=xi;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&ANe.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(OL,ONe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!OL.test(s)){let i=s.replace(PNe,DNe);i.charAt(0)!=="-"&&(i="-"+i),e="data"+i}}o=P3}return new o(r,e)}function DNe(t){return"-"+t.toLowerCase()}function ONe(t){return t.charAt(1).toUpperCase()}const LNe=eQ([rQ,nQ,iQ,aQ,INe],"html"),lQ=eQ([rQ,nQ,iQ,aQ,RNe],"svg"),LL={}.hasOwnProperty;function jNe(t,e){const n=e||{};function r(o,...s){let i=r.invalid;const a=r.handlers;if(o&&LL.call(o,t)){const l=String(o[t]);i=LL.call(a,l)?a[l]:r.unknown}if(i)return i.call(this,o,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const VNe=/["&'<>`]/g,$Ne=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,BNe=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,FNe=/[|\\{}()[\]^$+*?.]/g,jL=new WeakMap;function UNe(t,e){if(t=t.replace(e.subset?HNe(e.subset):VNe,r),e.subset||e.escapeOnly)return t;return t.replace($Ne,n).replace(BNe,r);function n(o,s,i){return e.format((o.charCodeAt(0)-55296)*1024+o.charCodeAt(1)-56320+65536,i.charCodeAt(s+2),e)}function r(o,s,i){return e.format(o.charCodeAt(0),i.charCodeAt(s+1),e)}}function HNe(t){let e=jL.get(t);return e||(e=zNe(t),jL.set(t,e)),e}function zNe(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace(FNe,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const WNe=/[\dA-Fa-f]/;function GNe(t,e,n){const r="&#x"+t.toString(16).toUpperCase();return n&&e&&!WNe.test(String.fromCharCode(e))?r:r+";"}const qNe=/\d/;function KNe(t,e,n){const r="&#"+String(t);return n&&e&&!qNe.test(String.fromCharCode(e))?r:r+";"}const YNe=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],AS={nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",fnof:"ƒ",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",bull:"•",hellip:"…",prime:"′",Prime:"″",oline:"‾",frasl:"⁄",weierp:"℘",image:"ℑ",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦",quot:'"',amp:"&",lt:"<",gt:">",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",permil:"‰",lsaquo:"‹",rsaquo:"›",euro:"€"},QNe=["cent","copy","divide","gt","lt","not","para","times"],cQ={}.hasOwnProperty,QI={};let v0;for(v0 in AS)cQ.call(AS,v0)&&(QI[AS[v0]]=v0);const XNe=/[^\dA-Za-z]/;function JNe(t,e,n,r){const o=String.fromCharCode(t);if(cQ.call(QI,o)){const s=QI[o],i="&"+s;return n&&YNe.includes(s)&&!QNe.includes(s)&&(!r||e&&e!==61&&XNe.test(String.fromCharCode(e)))?i:i+";"}return""}function ZNe(t,e,n){let r=GNe(t,e,n.omitOptionalSemicolons),o;if((n.useNamedReferences||n.useShortestReferences)&&(o=JNe(t,e,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!o)&&n.useShortestReferences){const s=KNe(t,e,n.omitOptionalSemicolons);s.length<r.length&&(r=s)}return o&&(!n.useShortestReferences||o.length<r.length)?o:r}function Vp(t,e){return UNe(t,Object.assign({format:ZNe},e))}const eIe=/^>|^->|<!--|-->|--!>|<!-$/g,tIe=[">"],nIe=["<",">"];function rIe(t,e,n,r){return r.settings.bogusComments?"<?"+Vp(t.value,Object.assign({},r.settings.characterReferences,{subset:tIe}))+">":"<!--"+t.value.replace(eIe,o)+"-->";function o(s){return Vp(s,Object.assign({},r.settings.characterReferences,{subset:nIe}))}}function oIe(t,e,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}function VL(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,o=n.indexOf(e);for(;o!==-1;)r++,o=n.indexOf(e,o+e.length);return r}function XBe(t){const e=[],n=String(t||"");let r=n.indexOf(","),o=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const i=n.slice(o,r).trim();(i||!s)&&e.push(i),o=r+1,r=n.indexOf(",",o)}return e}function sIe(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}function JBe(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function iIe(t){return t.join(" ").trim()}const aIe=/[ \t\n\f\r]/g;function M3(t){return typeof t=="object"?t.type==="text"?$L(t.value):!1:$L(t)}function $L(t){return t.replace(aIe,"")===""}const Er=dQ(1),uQ=dQ(-1),lIe=[];function dQ(t){return e;function e(n,r,o){const s=n?n.children:lIe;let i=(r||0)+t,a=s[i];if(!o)for(;a&&M3(a);)i+=t,a=s[i];return a}}const cIe={}.hasOwnProperty;function fQ(t){return e;function e(n,r,o){return cIe.call(t,n.tagName)&&t[n.tagName](n,r,o)}}const D3=fQ({body:dIe,caption:PS,colgroup:PS,dd:mIe,dt:pIe,head:PS,html:uIe,li:hIe,optgroup:gIe,option:yIe,p:fIe,rp:BL,rt:BL,tbody:wIe,td:FL,tfoot:bIe,th:FL,thead:vIe,tr:xIe});function PS(t,e,n){const r=Er(n,e,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&M3(r.value.charAt(0)))}function uIe(t,e,n){const r=Er(n,e);return!r||r.type!=="comment"}function dIe(t,e,n){const r=Er(n,e);return!r||r.type!=="comment"}function fIe(t,e,n){const r=Er(n,e);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function hIe(t,e,n){const r=Er(n,e);return!r||r.type==="element"&&r.tagName==="li"}function pIe(t,e,n){const r=Er(n,e);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function mIe(t,e,n){const r=Er(n,e);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function BL(t,e,n){const r=Er(n,e);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function gIe(t,e,n){const r=Er(n,e);return!r||r.type==="element"&&r.tagName==="optgroup"}function yIe(t,e,n){const r=Er(n,e);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function vIe(t,e,n){const r=Er(n,e);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function wIe(t,e,n){const r=Er(n,e);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function bIe(t,e,n){return!Er(n,e)}function xIe(t,e,n){const r=Er(n,e);return!r||r.type==="element"&&r.tagName==="tr"}function FL(t,e,n){const r=Er(n,e);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const _Ie=fQ({body:kIe,colgroup:SIe,head:EIe,html:CIe,tbody:TIe});function CIe(t){const e=Er(t,-1);return!e||e.type!=="comment"}function EIe(t){const e=new Set;for(const r of t.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(e.has(r.tagName))return!1;e.add(r.tagName)}const n=t.children[0];return!n||n.type==="element"}function kIe(t){const e=Er(t,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&M3(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function SIe(t,e,n){const r=uQ(n,e),o=Er(t,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&D3(r,n.children.indexOf(r),n)?!1:!!(o&&o.type==="element"&&o.tagName==="col")}function TIe(t,e,n){const r=uQ(n,e),o=Er(t,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&D3(r,n.children.indexOf(r),n)?!1:!!(o&&o.type==="element"&&o.tagName==="tr")}const w0={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function NIe(t,e,n,r){const o=r.schema,s=o.space==="svg"?!1:r.settings.omitOptionalTags;let i=o.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(t.tagName.toLowerCase());const a=[];let l;o.space==="html"&&t.tagName==="svg"&&(r.schema=lQ);const c=IIe(r,t.properties),u=r.all(o.space==="html"&&t.tagName==="template"?t.content:t);return r.schema=o,u&&(i=!1),(c||!s||!_Ie(t,e,n))&&(a.push("<",t.tagName,c?" "+c:""),i&&(o.space==="svg"||r.settings.closeSelfClosing)&&(l=c.charAt(c.length-1),(!r.settings.tightSelfClosing||l==="/"||l&&l!=='"'&&l!=="'")&&a.push(" "),a.push("/")),a.push(">")),a.push(u),!i&&(!s||!D3(t,e,n))&&a.push("</"+t.tagName+">"),a.join("")}function IIe(t,e){const n=[];let r=-1,o;if(e){for(o in e)if(e[o]!==null&&e[o]!==void 0){const s=RIe(t,o,e[o]);s&&n.push(s)}}for(;++r<n.length;){const s=t.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&s!=='"'&&s!=="'"&&(n[r]+=" ")}return n.join("")}function RIe(t,e,n){const r=MNe(t.schema,e),o=t.settings.allowParseErrors&&t.schema.space==="html"?0:1,s=t.settings.allowDangerousCharacters?0:1;let i=t.quote,a;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const l=Vp(r.attribute,Object.assign({},t.settings.characterReferences,{subset:w0.name[o][s]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?sIe:iIe)(n,{padLeft:!t.settings.tightCommaSeparatedLists}):String(n),t.settings.collapseEmptyAttributes&&!n)?l:(t.settings.preferUnquoted&&(a=Vp(n,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:w0.unquoted[o][s]}))),a!==n&&(t.settings.quoteSmart&&VL(n,i)>VL(n,t.alternative)&&(i=t.alternative),a=i+Vp(n,Object.assign({},t.settings.characterReferences,{subset:(i==="'"?w0.single:w0.double)[o][s],attribute:!0}))+i),l+(a&&"="+a))}const AIe=["<","&"];function hQ(t,e,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?t.value:Vp(t.value,Object.assign({},r.settings.characterReferences,{subset:AIe}))}function PIe(t,e,n,r){return r.settings.allowDangerousHtml?t.value:hQ(t,e,n,r)}function MIe(t,e,n,r){return r.all(t)}const DIe=jNe("type",{invalid:OIe,unknown:LIe,handlers:{comment:rIe,doctype:oIe,element:NIe,raw:PIe,root:MIe,text:hQ}});function OIe(t){throw new Error("Expected node, not `"+t+"`")}function LIe(t){const e=t;throw new Error("Cannot compile unknown node `"+e.type+"`")}const jIe={},VIe={},$Ie=[];function BIe(t,e){const n=jIe,r=n.quote||'"',o=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:FIe,all:UIe,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||SNe,characterReferences:n.characterReferences||VIe,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?lQ:LNe,quote:r,alternative:o}.one(Array.isArray(t)?{type:"root",children:t}:t,void 0,void 0)}function FIe(t,e,n){return DIe(t,e,n,this)}function UIe(t){const e=[],n=t&&t.children||$Ie;let r=-1;for(;++r<n.length;)e[r]=this.one(n[r],r,t);return e.join("")}function HIe(t){return Array.isArray(t)?t:[t]}function QE(t,e=!1){var s;const n=t.split(/(\r?\n)/g);let r=0;const o=[];for(let i=0;i<n.length;i+=2){const a=e?n[i]+(n[i+1]||""):n[i];o.push([a,r]),r+=n[i].length,r+=((s=n[i+1])==null?void 0:s.length)||0}return o}function O3(t){return!t||["plaintext","txt","text","plain"].includes(t)}function pQ(t){return t==="ansi"||O3(t)}function L3(t){return t==="none"}function mQ(t){return L3(t)}function gQ(t,e){var r;if(!e)return t;t.properties||(t.properties={}),(r=t.properties).class||(r.class=[]),typeof t.properties.class=="string"&&(t.properties.class=t.properties.class.split(/\s+/g)),Array.isArray(t.properties.class)||(t.properties.class=[]);const n=Array.isArray(e)?e:e.split(/\s+/g);for(const o of n)o&&!t.properties.class.includes(o)&&t.properties.class.push(o);return t}function zIe(t,e){let n=0;const r=[];for(const o of e)o>n&&r.push({...t,content:t.content.slice(n,o),offset:t.offset+n}),n=o;return n<t.content.length&&r.push({...t,content:t.content.slice(n),offset:t.offset+n}),r}function WIe(t,e){const n=Array.from(e instanceof Set?e:new Set(e)).sort((r,o)=>r-o);return n.length?t.map(r=>r.flatMap(o=>{const s=n.filter(i=>o.offset<i&&i<o.offset+o.content.length).map(i=>i-o.offset).sort((i,a)=>i-a);return s.length?zIe(o,s):o})):t}async function yQ(t){return Promise.resolve(typeof t=="function"?t():t).then(e=>e.default||e)}function e_(t,e){const n=typeof t=="string"?{}:{...t.colorReplacements},r=typeof t=="string"?t:t.name;for(const[o,s]of Object.entries((e==null?void 0:e.colorReplacements)||{}))typeof s=="string"?n[o]=s:o===r&&Object.assign(n,s);return n}function rf(t,e){return t&&((e==null?void 0:e[t==null?void 0:t.toLowerCase()])||t)}function vQ(t){const e={};return t.color&&(e.color=t.color),t.bgColor&&(e["background-color"]=t.bgColor),t.fontStyle&&(t.fontStyle&Xl.Italic&&(e["font-style"]="italic"),t.fontStyle&Xl.Bold&&(e["font-weight"]="bold"),t.fontStyle&Xl.Underline&&(e["text-decoration"]="underline")),e}function GIe(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}function qIe(t){const e=QE(t,!0).map(([o])=>o);function n(o){if(o===t.length)return{line:e.length-1,character:e[e.length-1].length};let s=o,i=0;for(const a of e){if(s<a.length)break;s-=a.length,i++}return{line:i,character:s}}function r(o,s){let i=0;for(let a=0;a<o;a++)i+=e[a].length;return i+=s,i}return{lines:e,indexToPos:n,posToIndex:r}}class To extends Error{constructor(e){super(e),this.name="ShikiError"}}const wQ=new WeakMap;function XE(t,e){wQ.set(t,e)}function U1(t){return wQ.get(t)}class Ym{constructor(...e){Ee(this,"_stacks",{});Ee(this,"lang");if(e.length===2){const[n,r]=e;this.lang=r,this._stacks=n}else{const[n,r,o]=e;this.lang=r,this._stacks={[o]:n}}}get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,n){return new Ym(Object.fromEntries(HIe(n).map(r=>[r,qI])),e)}getInternalStack(e=this.theme){return this._stacks[e]}get scopes(){return UL(this._stacks[this.theme])}getScopes(e=this.theme){return UL(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.scopes}}}function UL(t){const e=[],n=new Set;function r(o){var i;if(n.has(o))return;n.add(o);const s=(i=o==null?void 0:o.nameScopesList)==null?void 0:i.scopeName;s&&e.push(s),o.parent&&r(o.parent)}return r(t),e}function KIe(t,e){if(!(t instanceof Ym))throw new To("Invalid grammar state");return t.getInternalStack(e)}function YIe(){const t=new WeakMap;function e(n){if(!t.has(n.meta)){let r=function(i){if(typeof i=="number"){if(i<0||i>n.source.length)throw new To(`Invalid decoration offset: ${i}. Code length: ${n.source.length}`);return{...o.indexToPos(i),offset:i}}else{const a=o.lines[i.line];if(a===void 0)throw new To(`Invalid decoration position ${JSON.stringify(i)}. Lines length: ${o.lines.length}`);if(i.character<0||i.character>a.length)throw new To(`Invalid decoration position ${JSON.stringify(i)}. Line ${i.line} length: ${a.length}`);return{...i,offset:o.posToIndex(i.line,i.character)}}};const o=qIe(n.source),s=(n.options.decorations||[]).map(i=>({...i,start:r(i.start),end:r(i.end)}));QIe(s),t.set(n.meta,{decorations:s,converter:o,source:n.source})}return t.get(n.meta)}return{name:"shiki:decorations",tokens(n){var i;if(!((i=this.options.decorations)!=null&&i.length))return;const o=e(this).decorations.flatMap(a=>[a.start.offset,a.end.offset]);return WIe(n,o)},code(n){var u;if(!((u=this.options.decorations)!=null&&u.length))return;const r=e(this),o=Array.from(n.children).filter(f=>f.type==="element"&&f.tagName==="span");if(o.length!==r.converter.lines.length)throw new To(`Number of lines in code element (${o.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function s(f,h,p,m){const y=o[f];let x="",b=-1,C=-1;if(h===0&&(b=0),p===0&&(C=0),p===Number.POSITIVE_INFINITY&&(C=y.children.length),b===-1||C===-1)for(let R=0;R<y.children.length;R++)x+=bQ(y.children[R]),b===-1&&x.length===h&&(b=R+1),C===-1&&x.length===p&&(C=R+1);if(b===-1)throw new To(`Failed to find start index for decoration ${JSON.stringify(m.start)}`);if(C===-1)throw new To(`Failed to find end index for decoration ${JSON.stringify(m.end)}`);const E=y.children.slice(b,C);if(!m.alwaysWrap&&E.length===y.children.length)a(y,m,"line");else if(!m.alwaysWrap&&E.length===1&&E[0].type==="element")a(E[0],m,"token");else{const R={type:"element",tagName:"span",properties:{},children:E};a(R,m,"wrapper"),y.children.splice(b,E.length,R)}}function i(f,h){o[f]=a(o[f],h,"line")}function a(f,h,p){var x;const m=h.properties||{},y=h.transform||(b=>b);return f.tagName=h.tagName||"span",f.properties={...f.properties,...m,class:f.properties.class},(x=h.properties)!=null&&x.class&&gQ(f,h.properties.class),f=y(f,p)||f,f}const l=[],c=r.decorations.sort((f,h)=>h.start.offset-f.start.offset);for(const f of c){const{start:h,end:p}=f;if(h.line===p.line)s(h.line,h.character,p.character,f);else if(h.line<p.line){s(h.line,h.character,Number.POSITIVE_INFINITY,f);for(let m=h.line+1;m<p.line;m++)l.unshift(()=>i(m,f));s(p.line,0,p.character,f)}}l.forEach(f=>f())}}}function QIe(t){for(let e=0;e<t.length;e++){const n=t[e];if(n.start.offset>n.end.offset)throw new To(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let r=e+1;r<t.length;r++){const o=t[r],s=n.start.offset<o.start.offset&&o.start.offset<n.end.offset,i=n.start.offset<o.end.offset&&o.end.offset<n.end.offset,a=o.start.offset<n.start.offset&&n.start.offset<o.end.offset,l=o.start.offset<n.end.offset&&n.end.offset<o.end.offset;if(s||i||a||l){if(i&&i||a&&l)continue;throw new To(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(o.start)} intersect.`)}}}}function bQ(t){return t.type==="text"?t.value:t.type==="element"?t.children.map(bQ).join(""):""}const XIe=[YIe()];function t_(t){return[...t.transformers||[],...XIe]}var of=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],MS={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",9:"strikethrough"};function JIe(t,e){const n=t.indexOf("\x1B[",e);if(n!==-1){const r=t.indexOf("m",n);return{sequence:t.substring(n+2,r).split(";"),startPosition:n,position:r+1}}return{position:t.length}}function HL(t,e){let n=1;const r=t[e+n++];let o;if(r==="2"){const s=[t[e+n++],t[e+n++],t[e+n]].map(i=>Number.parseInt(i));s.length===3&&!s.some(i=>Number.isNaN(i))&&(o={type:"rgb",rgb:s})}else if(r==="5"){const s=Number.parseInt(t[e+n]);Number.isNaN(s)||(o={type:"table",index:Number(s)})}return[n,o]}function ZIe(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n],o=Number.parseInt(r);if(!Number.isNaN(o))if(o===0)e.push({type:"resetAll"});else if(o<=9)MS[o]&&e.push({type:"setDecoration",value:MS[o]});else if(o<=29){const s=MS[o-20];s&&e.push({type:"resetDecoration",value:s})}else if(o<=37)e.push({type:"setForegroundColor",value:{type:"named",name:of[o-30]}});else if(o===38){const[s,i]=HL(t,n);i&&e.push({type:"setForegroundColor",value:i}),n+=s}else if(o===39)e.push({type:"resetForegroundColor"});else if(o<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:of[o-40]}});else if(o===48){const[s,i]=HL(t,n);i&&e.push({type:"setBackgroundColor",value:i}),n+=s}else o===49?e.push({type:"resetBackgroundColor"}):o>=90&&o<=97?e.push({type:"setForegroundColor",value:{type:"named",name:of[o-90+8]}}):o>=100&&o<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:of[o-100+8]}})}return e}function eRe(){let t=null,e=null,n=new Set;return{parse(r){const o=[];let s=0;do{const i=JIe(r,s),a=i.sequence?r.substring(s,i.startPosition):r.substring(s);if(a.length>0&&o.push({value:a,foreground:t,background:e,decorations:new Set(n)}),i.sequence){const l=ZIe(i.sequence);for(const c of l)c.type==="resetAll"?(t=null,e=null,n.clear()):c.type==="resetForegroundColor"?t=null:c.type==="resetBackgroundColor"?e=null:c.type==="resetDecoration"&&n.delete(c.value);for(const c of l)c.type==="setForegroundColor"?t=c.value:c.type==="setBackgroundColor"?e=c.value:c.type==="setDecoration"&&n.add(c.value)}s=i.position}while(s<r.length);return o}}}var tRe={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function nRe(t=tRe){function e(a){return t[a]}function n(a){return`#${a.map(l=>Math.max(0,Math.min(l,255)).toString(16).padStart(2,"0")).join("")}`}let r;function o(){if(r)return r;r=[];for(let c=0;c<of.length;c++)r.push(e(of[c]));let a=[0,95,135,175,215,255];for(let c=0;c<6;c++)for(let u=0;u<6;u++)for(let f=0;f<6;f++)r.push(n([a[c],a[u],a[f]]));let l=8;for(let c=0;c<24;c++,l+=10)r.push(n([l,l,l]));return r}function s(a){return o()[a]}function i(a){switch(a.type){case"named":return e(a.name);case"rgb":return n(a.rgb);case"table":return s(a.index)}}return{value:i}}function rRe(t,e,n){const r=e_(t,n),o=QE(e),s=nRe(Object.fromEntries(of.map(a=>{var l;return[a,(l=t.colors)==null?void 0:l[`terminal.ansi${a[0].toUpperCase()}${a.substring(1)}`]]}))),i=eRe();return o.map(a=>i.parse(a[0]).map(l=>{let c,u;l.decorations.has("reverse")?(c=l.background?s.value(l.background):t.bg,u=l.foreground?s.value(l.foreground):t.fg):(c=l.foreground?s.value(l.foreground):t.fg,u=l.background?s.value(l.background):void 0),c=rf(c,r),u=rf(u,r),l.decorations.has("dim")&&(c=oRe(c));let f=Xl.None;return l.decorations.has("bold")&&(f|=Xl.Bold),l.decorations.has("italic")&&(f|=Xl.Italic),l.decorations.has("underline")&&(f|=Xl.Underline),{content:l.value,offset:a[1],color:c,bgColor:u,fontStyle:f}}))}function oRe(t){const e=t.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/);if(e)if(e[3]){const r=Math.round(Number.parseInt(e[3],16)/2).toString(16).padStart(2,"0");return`#${e[1]}${e[2]}${r}`}else return e[2]?`#${e[1]}${e[2]}80`:`#${Array.from(e[1]).map(r=>`${r}${r}`).join("")}80`;const n=t.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:t}function j3(t,e,n={}){const{lang:r="text",theme:o=t.getLoadedThemes()[0]}=n;if(O3(r)||L3(o))return QE(e).map(l=>[{content:l[0],offset:l[1]}]);const{theme:s,colorMap:i}=t.setTheme(o);if(r==="ansi")return rRe(s,e,n);const a=t.getLanguage(r);if(n.grammarState){if(n.grammarState.lang!==a.name)throw new ic(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${a.name}"`);if(!n.grammarState.themes.includes(s.name))throw new ic(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${s.name}"`)}return iRe(e,a,s,i,n)}function sRe(...t){if(t.length===2)return U1(t[1]);const[e,n,r={}]=t,{lang:o="text",theme:s=e.getLoadedThemes()[0]}=r;if(O3(o)||L3(s))throw new ic("Plain language does not have grammar state");if(o==="ansi")throw new ic("ANSI language does not have grammar state");const{theme:i,colorMap:a}=e.setTheme(s),l=e.getLanguage(o);return new Ym(n_(n,l,i,a,r).stateStack,l.name,i.name)}function iRe(t,e,n,r,o){const s=n_(t,e,n,r,o),i=new Ym(n_(t,e,n,r,o).stateStack,e.name,n.name);return XE(s.tokens,i),s.tokens}function n_(t,e,n,r,o){const s=e_(n,o),{tokenizeMaxLineLength:i=0,tokenizeTimeLimit:a=500}=o,l=QE(t);let c=o.grammarState?KIe(o.grammarState,n.name)??qI:o.grammarContextCode!=null?n_(o.grammarContextCode,e,n,r,{...o,grammarState:void 0,grammarContextCode:void 0}).stateStack:qI,u=[];const f=[];for(let h=0,p=l.length;h<p;h++){const[m,y]=l[h];if(m===""){u=[],f.push([]);continue}if(i>0&&m.length>=i){u=[],f.push([{content:m,offset:y,color:"",fontStyle:0}]);continue}let x,b,C;o.includeExplanation&&(x=e.tokenizeLine(m,c),b=x.tokens,C=0);const E=e.tokenizeLine2(m,c,a),R=E.tokens.length/2;for(let D=0;D<R;D++){const O=E.tokens[2*D],T=D+1<R?E.tokens[2*D+2]:m.length;if(O===T)continue;const I=E.tokens[2*D+1],P=rf(r[vm.getForeground(I)],s),L=vm.getFontStyle(I),$={content:m.substring(O,T),offset:y+O,color:P,fontStyle:L};if(o.includeExplanation){const F=[];if(o.includeExplanation!=="scopeName")for(const be of n.settings){let ge;switch(typeof be.scope){case"string":ge=be.scope.split(/,/).map(le=>le.trim());break;case"object":ge=be.scope;break;default:continue}F.push({settings:be,selectors:ge.map(le=>le.split(/ /))})}$.explanation=[];let V=0;for(;O+V<T;){const be=b[C],ge=m.substring(be.startIndex,be.endIndex);V+=ge.length,$.explanation.push({content:ge,scopes:o.includeExplanation==="scopeName"?aRe(be.scopes):lRe(F,be.scopes)}),C+=1}}u.push($)}f.push(u),u=[],c=E.ruleStack}return{tokens:f,stateStack:c}}function aRe(t){return t.map(e=>({scopeName:e}))}function lRe(t,e){const n=[];for(let r=0,o=e.length;r<o;r++){const s=e[r];n[r]={scopeName:s,themeMatches:uRe(t,s,e.slice(0,r))}}return n}function zL(t,e){return t===e||e.substring(0,t.length)===t&&e[t.length]==="."}function cRe(t,e,n){if(!zL(t[t.length-1],e))return!1;let r=t.length-2,o=n.length-1;for(;r>=0&&o>=0;)zL(t[r],n[o])&&(r-=1),o-=1;return r===-1}function uRe(t,e,n){const r=[];for(const{selectors:o,settings:s}of t)for(const i of o)if(cRe(i,e,n)){r.push(s);break}return r}function xQ(t,e,n){const r=Object.entries(n.themes).filter(l=>l[1]).map(l=>({color:l[0],theme:l[1]})),o=r.map(l=>{const c=j3(t,e,{...n,theme:l.theme}),u=U1(c),f=typeof l.theme=="string"?l.theme:l.theme.name;return{tokens:c,state:u,theme:f}}),s=dRe(...o.map(l=>l.tokens)),i=s[0].map((l,c)=>l.map((u,f)=>{const h={content:u.content,variants:{},offset:u.offset};return"includeExplanation"in n&&n.includeExplanation&&(h.explanation=u.explanation),s.forEach((p,m)=>{const{content:y,explanation:x,offset:b,...C}=p[c][f];h.variants[r[m].color]=C}),h})),a=o[0].state?new Ym(Object.fromEntries(o.map(l=>{var c;return[l.theme,(c=l.state)==null?void 0:c.getInternalStack(l.theme)]})),o[0].state.lang):void 0;return a&&XE(i,a),i}function dRe(...t){const e=t.map(()=>[]),n=t.length;for(let r=0;r<t[0].length;r++){const o=t.map(l=>l[r]),s=e.map(()=>[]);e.forEach((l,c)=>l.push(s[c]));const i=o.map(()=>0),a=o.map(l=>l[0]);for(;a.every(l=>l);){const l=Math.min(...a.map(c=>c.content.length));for(let c=0;c<n;c++){const u=a[c];u.content.length===l?(s[c].push(u),i[c]+=1,a[c]=o[c][i[c]]):(s[c].push({...u,content:u.content.slice(0,l)}),a[c]={...u,content:u.content.slice(l),offset:u.offset+l})}}}return e}function r_(t,e,n){let r,o,s,i,a,l;if("themes"in n){const{defaultColor:c="light",cssVariablePrefix:u="--shiki-"}=n,f=Object.entries(n.themes).filter(x=>x[1]).map(x=>({color:x[0],theme:x[1]})).sort((x,b)=>x.color===c?-1:b.color===c?1:0);if(f.length===0)throw new ic("`themes` option must not be empty");const h=xQ(t,e,n);if(l=U1(h),c&&!f.find(x=>x.color===c))throw new ic(`\`themes\` option must contain the defaultColor key \`${c}\``);const p=f.map(x=>t.getTheme(x.theme)),m=f.map(x=>x.color);s=h.map(x=>x.map(b=>fRe(b,m,u,c))),l&&XE(s,l);const y=f.map(x=>e_(x.theme,n));o=f.map((x,b)=>(b===0&&c?"":`${u+x.color}:`)+(rf(p[b].fg,y[b])||"inherit")).join(";"),r=f.map((x,b)=>(b===0&&c?"":`${u+x.color}-bg:`)+(rf(p[b].bg,y[b])||"inherit")).join(";"),i=`shiki-themes ${p.map(x=>x.name).join(" ")}`,a=c?void 0:[o,r].join(";")}else if("theme"in n){const c=e_(n.theme,n);s=j3(t,e,n);const u=t.getTheme(n.theme);r=rf(u.bg,c),o=rf(u.fg,c),i=u.name,l=U1(s)}else throw new ic("Invalid options, either `theme` or `themes` must be provided");return{tokens:s,fg:o,bg:r,themeName:i,rootStyle:a,grammarState:l}}function fRe(t,e,n,r){const o={content:t.content,explanation:t.explanation,offset:t.offset},s=e.map(l=>vQ(t.variants[l])),i=new Set(s.flatMap(l=>Object.keys(l))),a={};return s.forEach((l,c)=>{for(const u of i){const f=l[u]||"inherit";if(c===0&&r)a[u]=f;else{const h=u==="color"?"":u==="background-color"?"-bg":`-${u}`,p=n+e[c]+(u==="color"?"":h);a[p]=f}}}),o.htmlStyle=a,o}function o_(t,e,n,r={meta:{},options:n,codeToHast:(o,s)=>o_(t,o,s),codeToTokens:(o,s)=>r_(t,o,s)}){var p,m;let o=e;for(const y of t_(n))o=((p=y.preprocess)==null?void 0:p.call(r,o,n))||o;let{tokens:s,fg:i,bg:a,themeName:l,rootStyle:c,grammarState:u}=r_(t,o,n);const{mergeWhitespaces:f=!0}=n;f===!0?s=pRe(s):f==="never"&&(s=mRe(s));const h={...r,get source(){return o}};for(const y of t_(n))s=((m=y.tokens)==null?void 0:m.call(h,s))||s;return hRe(s,{...n,fg:i,bg:a,themeName:l,rootStyle:c},h,u)}function hRe(t,e,n,r=U1(t)){var m,y,x;const o=t_(e),s=[],i={type:"root",children:[]},{structure:a="classic",tabindex:l="0"}=e;let c={type:"element",tagName:"pre",properties:{class:`shiki ${e.themeName||""}`,style:e.rootStyle||`background-color:${e.bg};color:${e.fg}`,...l!==!1&&l!=null?{tabindex:l.toString()}:{},...Object.fromEntries(Array.from(Object.entries(e.meta||{})).filter(([b])=>!b.startsWith("_")))},children:[]},u={type:"element",tagName:"code",properties:{},children:s};const f=[],h={...n,structure:a,addClassToHast:gQ,get source(){return n.source},get tokens(){return t},get options(){return e},get root(){return i},get pre(){return c},get code(){return u},get lines(){return f}};if(t.forEach((b,C)=>{var D,O;C&&(a==="inline"?i.children.push({type:"element",tagName:"br",properties:{},children:[]}):a==="classic"&&s.push({type:"text",value:`
`}));let E={type:"element",tagName:"span",properties:{class:"line"},children:[]},R=0;for(const T of b){let I={type:"element",tagName:"span",properties:{...T.htmlAttrs},children:[{type:"text",value:T.content}]};T.htmlStyle;const P=GIe(T.htmlStyle||vQ(T));P&&(I.properties.style=P);for(const L of o)I=((D=L==null?void 0:L.span)==null?void 0:D.call(h,I,C+1,R,E,T))||I;a==="inline"?i.children.push(I):a==="classic"&&E.children.push(I),R+=T.content.length}if(a==="classic"){for(const T of o)E=((O=T==null?void 0:T.line)==null?void 0:O.call(h,E,C+1))||E;f.push(E),s.push(E)}}),a==="classic"){for(const b of o)u=((m=b==null?void 0:b.code)==null?void 0:m.call(h,u))||u;c.children.push(u);for(const b of o)c=((y=b==null?void 0:b.pre)==null?void 0:y.call(h,c))||c;i.children.push(c)}let p=i;for(const b of o)p=((x=b==null?void 0:b.root)==null?void 0:x.call(h,p))||p;return r&&XE(p,r),p}function pRe(t){return t.map(e=>{const n=[];let r="",o=0;return e.forEach((s,i)=>{const l=!(s.fontStyle&&s.fontStyle&Xl.Underline);l&&s.content.match(/^\s+$/)&&e[i+1]?(o||(o=s.offset),r+=s.content):r?(l?n.push({...s,offset:o,content:r+s.content}):n.push({content:r,offset:o},s),o=0,r=""):n.push(s)}),n})}function mRe(t){return t.map(e=>e.flatMap(n=>{if(n.content.match(/^\s+$/))return n;const r=n.content.match(/^(\s*)(.*?)(\s*)$/);if(!r)return n;const[,o,s,i]=r;if(!o&&!i)return n;const a=[{...n,offset:n.offset+o.length,content:s}];return o&&a.unshift({content:o,offset:n.offset}),i&&a.push({content:i,offset:n.offset+o.length+s.length}),a}))}function gRe(t,e,n){var s;const r={meta:{},options:n,codeToHast:(i,a)=>o_(t,i,a),codeToTokens:(i,a)=>r_(t,i,a)};let o=BIe(o_(t,e,n,r));for(const i of t_(n))o=((s=i.postprocess)==null?void 0:s.call(r,o,n))||o;return o}const WL={light:"#333333",dark:"#bbbbbb"},GL={light:"#fffffe",dark:"#1e1e1e"},qL="__shiki_resolved";function V3(t){var a,l,c,u,f;if(t!=null&&t[qL])return t;const e={...t};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||(e.type="dark"),e.colorReplacements={...e.colorReplacements},e.settings||(e.settings=[]);let{bg:n,fg:r}=e;if(!n||!r){const h=e.settings?e.settings.find(p=>!p.name&&!p.scope):void 0;(a=h==null?void 0:h.settings)!=null&&a.foreground&&(r=h.settings.foreground),(l=h==null?void 0:h.settings)!=null&&l.background&&(n=h.settings.background),!r&&((c=e==null?void 0:e.colors)!=null&&c["editor.foreground"])&&(r=e.colors["editor.foreground"]),!n&&((u=e==null?void 0:e.colors)!=null&&u["editor.background"])&&(n=e.colors["editor.background"]),r||(r=e.type==="light"?WL.light:WL.dark),n||(n=e.type==="light"?GL.light:GL.dark),e.fg=r,e.bg=n}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let o=0;const s=new Map;function i(h){var m;if(s.has(h))return s.get(h);o+=1;const p=`#${o.toString(16).padStart(8,"0").toLowerCase()}`;return(m=e.colorReplacements)!=null&&m[`#${p}`]?i(h):(s.set(h,p),p)}e.settings=e.settings.map(h=>{var x,b;const p=((x=h.settings)==null?void 0:x.foreground)&&!h.settings.foreground.startsWith("#"),m=((b=h.settings)==null?void 0:b.background)&&!h.settings.background.startsWith("#");if(!p&&!m)return h;const y={...h,settings:{...h.settings}};if(p){const C=i(h.settings.foreground);e.colorReplacements[C]=h.settings.foreground,y.settings.foreground=C}if(m){const C=i(h.settings.background);e.colorReplacements[C]=h.settings.background,y.settings.background=C}return y});for(const h of Object.keys(e.colors||{}))if((h==="editor.foreground"||h==="editor.background"||h.startsWith("terminal.ansi"))&&!((f=e.colors[h])!=null&&f.startsWith("#"))){const p=i(e.colors[h]);e.colorReplacements[p]=e.colors[h],e.colors[h]=p}return Object.defineProperty(e,qL,{enumerable:!1,writable:!1,value:!0}),e}async function _Q(t){return Array.from(new Set((await Promise.all(t.filter(e=>!pQ(e)).map(async e=>await yQ(e).then(n=>Array.isArray(n)?n:[n])))).flat()))}async function CQ(t){return(await Promise.all(t.map(async n=>mQ(n)?null:V3(await yQ(n))))).filter(n=>!!n)}class yRe extends kNe{constructor(n,r,o,s={}){super(n);Ee(this,"_resolvedThemes",new Map);Ee(this,"_resolvedGrammars",new Map);Ee(this,"_langMap",new Map);Ee(this,"_langGraph",new Map);Ee(this,"_textmateThemeCache",new WeakMap);Ee(this,"_loadedThemesCache",null);Ee(this,"_loadedLanguagesCache",null);this._resolver=n,this._themes=r,this._langs=o,this._alias=s,this._themes.map(i=>this.loadTheme(i)),this.loadLanguages(this._langs)}getTheme(n){return typeof n=="string"?this._resolvedThemes.get(n):this.loadTheme(n)}loadTheme(n){const r=V3(n);return r.name&&(this._resolvedThemes.set(r.name,r),this._loadedThemesCache=null),r}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(n){let r=this._textmateThemeCache.get(n);r||(r=Yx.createFromRawTheme(n),this._textmateThemeCache.set(n,r)),this._syncRegistry.setTheme(r)}getGrammar(n){if(this._alias[n]){const r=new Set([n]);for(;this._alias[n];){if(n=this._alias[n],r.has(n))throw new To(`Circular alias \`${Array.from(r).join(" -> ")} -> ${n}\``);r.add(n)}}return this._resolvedGrammars.get(n)}loadLanguage(n){var i,a,l,c;if(this.getGrammar(n.name))return;const r=new Set([...this._langMap.values()].filter(u=>{var f;return(f=u.embeddedLangsLazy)==null?void 0:f.includes(n.name)}));this._resolver.addLanguage(n);const o={balancedBracketSelectors:n.balancedBracketSelectors||["*"],unbalancedBracketSelectors:n.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(n.scopeName,n);const s=this.loadGrammarWithConfiguration(n.scopeName,1,o);if(s.name=n.name,this._resolvedGrammars.set(n.name,s),n.aliases&&n.aliases.forEach(u=>{this._alias[u]=n.name}),this._loadedLanguagesCache=null,r.size)for(const u of r)this._resolvedGrammars.delete(u.name),this._loadedLanguagesCache=null,(a=(i=this._syncRegistry)==null?void 0:i._injectionGrammars)==null||a.delete(u.scopeName),(c=(l=this._syncRegistry)==null?void 0:l._grammars)==null||c.delete(u.scopeName),this.loadLanguage(this._langMap.get(u.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(n){for(const s of n)this.resolveEmbeddedLanguages(s);const r=Array.from(this._langGraph.entries()),o=r.filter(([s,i])=>!i);if(o.length){const s=r.filter(([i,a])=>{var l;return a&&((l=a.embeddedLangs)==null?void 0:l.some(c=>o.map(([u])=>u).includes(c)))}).filter(i=>!o.includes(i));throw new To(`Missing languages ${o.map(([i])=>`\`${i}\``).join(", ")}, required by ${s.map(([i])=>`\`${i}\``).join(", ")}`)}for(const[s,i]of r)this._resolver.addLanguage(i);for(const[s,i]of r)this.loadLanguage(i)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(n){if(this._langMap.set(n.name,n),this._langGraph.set(n.name,n),n.embeddedLangs)for(const r of n.embeddedLangs)this._langGraph.set(r,this._langMap.get(r))}}class vRe{constructor(e,n){Ee(this,"_langs",new Map);Ee(this,"_scopeToLang",new Map);Ee(this,"_injections",new Map);Ee(this,"_onigLib");this._onigLib={createOnigScanner:r=>e.createScanner(r),createOnigString:r=>e.createString(r)},n.forEach(r=>this.addLanguage(r))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(n=>{this._langs.set(n,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(n=>{this._injections.get(n)||this._injections.set(n,[]),this._injections.get(n).push(e.scopeName)})}getInjections(e){const n=e.split(".");let r=[];for(let o=1;o<=n.length;o++){const s=n.slice(0,o).join(".");r=[...r,...this._injections.get(s)||[]]}return r}}let zg=0;function wRe(t){zg+=1,t.warnings!==!1&&zg>=10&&zg%10===0&&console.warn(`[Shiki] ${zg} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;if(!t.engine)throw new To("`engine` option is required for synchronous mode");const n=(t.langs||[]).flat(1),r=(t.themes||[]).flat(1).map(V3),o=new vRe(t.engine,n),s=new yRe(o,r,n,t.langAlias);let i;function a(C){x();const E=s.getGrammar(typeof C=="string"?C:C.name);if(!E)throw new To(`Language \`${C}\` not found, you may need to load it first`);return E}function l(C){if(C==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};x();const E=s.getTheme(C);if(!E)throw new To(`Theme \`${C}\` not found, you may need to load it first`);return E}function c(C){x();const E=l(C);i!==C&&(s.setTheme(E),i=C);const R=s.getColorMap();return{theme:E,colorMap:R}}function u(){return x(),s.getLoadedThemes()}function f(){return x(),s.getLoadedLanguages()}function h(...C){x(),s.loadLanguages(C.flat(1))}async function p(...C){return h(await _Q(C))}function m(...C){x();for(const E of C.flat(1))s.loadTheme(E)}async function y(...C){return x(),m(await CQ(C))}function x(){if(e)throw new To("Shiki instance has been disposed")}function b(){e||(e=!0,s.dispose(),zg-=1)}return{setTheme:c,getTheme:l,getLanguage:a,getLoadedThemes:u,getLoadedLanguages:f,loadLanguage:p,loadLanguageSync:h,loadTheme:y,loadThemeSync:m,dispose:b,[Symbol.dispose]:b}}async function bRe(t={}){t.loadWasm;const[e,n,r]=await Promise.all([CQ(t.themes||[]),_Q(t.langs||[]),t.engine||VY(t.loadWasm||$Te())]);return wRe({...t,loadWasm:void 0,themes:e,langs:n,engine:r})}async function xRe(t={}){const e=await bRe(t);return{getLastGrammarState:(...n)=>sRe(e,...n),codeToTokensBase:(n,r)=>j3(e,n,r),codeToTokensWithThemes:(n,r)=>xQ(e,n,r),codeToTokens:(n,r)=>r_(e,n,r),codeToHast:(n,r)=>o_(e,n,r),codeToHtml:(n,r)=>gRe(e,n,r),...e,getInternalContext:()=>e}}function _Re(t,e,n){let r,o,s;{const a=t;r=a.langs,o=a.themes,s=a.engine}async function i(a){function l(p){if(typeof p=="string"){if(pQ(p))return[];const m=r[p];if(!m)throw new ic(`Language \`${p}\` is not included in this bundle. You may want to load it from external source.`);return m}return p}function c(p){if(mQ(p))return"none";if(typeof p=="string"){const m=o[p];if(!m)throw new ic(`Theme \`${p}\` is not included in this bundle. You may want to load it from external source.`);return m}return p}const u=(a.themes??[]).map(p=>c(p)),f=(a.langs??[]).map(p=>l(p)),h=await xRe({engine:a.engine??s(),...a,themes:u,langs:f});return{...h,loadLanguage(...p){return h.loadLanguage(...p.map(l))},loadTheme(...p){return h.loadTheme(...p.map(c))}}}return i}const CRe=_Re({langs:wTe,themes:xTe,engine:()=>VY(U(()=>import("./wasm-CG6Dc4jp.js"),[]))});function ERe(t,e){return function({content:r,language:o,pos:s}){var i;const a=[],{tokens:l}=t.codeToTokens(r,{lang:o,theme:t.getLoadedThemes()[0]});let c=s+1;for(const u of l){for(const f of u){const h=c+f.content.length,p=Mn.inline(c,h,{style:(i=f.htmlStyle)!=null?i:`color: ${f.color}`,class:"shiki"});a.push(p),c=h}c+=1}return a}}const kRe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,SRe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,TRe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,NRe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,IRe=As.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",gi(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ym({find:kRe,type:this.type}),ym({find:TRe,type:this.type})]},addPasteRules(){return[Bf({find:SRe,type:this.type}),Bf({find:NRe,type:this.type})]}}),RRe=/(^|[^`])`([^`]+)`(?!`)/,ARe=/(^|[^`])`([^`]+)`(?!`)/g,PRe=As.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",gi(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[ym({find:RRe,type:this.type})]},addPasteRules(){return[Bf({find:ARe,type:this.type})]}}),MRe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,DRe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,ORe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,LRe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,jRe=As.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",gi(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ym({find:MRe,type:this.type}),ym({find:ORe,type:this.type})]},addPasteRules(){return[Bf({find:DRe,type:this.type}),Bf({find:LRe,type:this.type})]}}),VRe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,$Re=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,BRe=As.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",gi(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[ym({find:VRe,type:this.type})]},addPasteRules(){return[Bf({find:$Re,type:this.type})]}}),FRe=As.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",gi(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),URe=fa.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",gi(this.options.HTMLAttributes,t),0]}}),HRe=fa.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",gi(this.options.HTMLAttributes,t),0]}}),zRe=fa.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",gi(this.options.HTMLAttributes,t),0]}});var XI,JI;if(typeof WeakMap<"u"){let t=new WeakMap;XI=e=>t.get(e),JI=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;XI=r=>{for(let o=0;o<t.length;o+=2)if(t[o]==r)return t[o+1]},JI=(r,o)=>(n==10&&(n=0),t[n++]=r,t[n++]=o)}var Wn=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,o=e/this.width|0;let s=r+1,i=o+1;for(let a=1;s<this.width&&this.map[e+a]==n;a++)s++;for(let a=1;i<this.height&&this.map[e+this.width*a]==n;a++)i++;return{left:r,top:o,right:s,bottom:i}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:o,top:s,bottom:i}=this.findCell(t);return e=="horiz"?(n<0?r==0:o==this.width)?null:this.map[s*this.width+(n<0?r-1:o)]:(n<0?s==0:i==this.height)?null:this.map[r+this.width*(n<0?s-1:i)]}rectBetween(t,e){const{left:n,right:r,top:o,bottom:s}=this.findCell(t),{left:i,right:a,top:l,bottom:c}=this.findCell(e);return{left:Math.min(n,i),top:Math.min(o,l),right:Math.max(r,a),bottom:Math.max(s,c)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let o=t.left;o<t.right;o++){const s=r*this.width+o,i=this.map[s];n[i]||(n[i]=!0,!(o==t.left&&o&&this.map[s-1]==i||r==t.top&&r&&this.map[s-this.width]==i)&&e.push(i))}return e}positionAt(t,e,n){for(let r=0,o=0;;r++){const s=o+n.child(r).nodeSize;if(r==t){let i=e+t*this.width;const a=(t+1)*this.width;for(;i<a&&this.map[i]<o;)i++;return i==a?s-1:this.map[i]}o=s}}static get(t){return XI(t)||JI(t,WRe(t))}};function WRe(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=GRe(t),n=t.childCount,r=[];let o=0,s=null;const i=[];for(let c=0,u=e*n;c<u;c++)r[c]=0;for(let c=0,u=0;c<n;c++){const f=t.child(c);u++;for(let m=0;;m++){for(;o<r.length&&r[o]!=0;)o++;if(m==f.childCount)break;const y=f.child(m),{colspan:x,rowspan:b,colwidth:C}=y.attrs;for(let E=0;E<b;E++){if(E+c>=n){(s||(s=[])).push({type:"overlong_rowspan",pos:u,n:b-E});break}const R=o+E*e;for(let D=0;D<x;D++){r[R+D]==0?r[R+D]=u:(s||(s=[])).push({type:"collision",row:c,pos:u,n:x-D});const O=C&&C[D];if(O){const T=(R+D)%e*2,I=i[T];I==null||I!=O&&i[T+1]==1?(i[T]=O,i[T+1]=1):I==O&&i[T+1]++}}}o+=x,u+=y.nodeSize}const h=(c+1)*e;let p=0;for(;o<h;)r[o++]==0&&p++;p&&(s||(s=[])).push({type:"missing",row:c,n:p}),u++}const a=new Wn(e,n,r,s);let l=!1;for(let c=0;!l&&c<i.length;c+=2)i[c]!=null&&i[c+1]<n&&(l=!0);return l&&qRe(a,i,t),a}function GRe(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const o=t.child(r);let s=0;if(n)for(let i=0;i<r;i++){const a=t.child(i);for(let l=0;l<a.childCount;l++){const c=a.child(l);i+c.attrs.rowspan>r&&(s+=c.attrs.colspan)}}for(let i=0;i<o.childCount;i++){const a=o.child(i);s+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}e==-1?e=s:e!=s&&(e=Math.max(e,s))}return e}function qRe(t,e,n){t.problems||(t.problems=[]);const r={};for(let o=0;o<t.map.length;o++){const s=t.map[o];if(r[s])continue;r[s]=!0;const i=n.nodeAt(s);if(!i)throw new RangeError(`No cell with offset ${s} found`);let a=null;const l=i.attrs;for(let c=0;c<l.colspan;c++){const u=(o+c)%t.width,f=e[u*2];f!=null&&(!l.colwidth||l.colwidth[c]!=f)&&((a||(a=KRe(l)))[c]=f)}a&&t.problems.unshift({type:"colwidth mismatch",pos:s,colwidth:a})}}function KRe(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function tl(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],o=r.spec.tableRole;o&&(e[o]=r)}}return e}var cu=new Ht("selectingCells");function ew(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function JE(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function $3(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=ew(e.$head)||YRe(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function YRe(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function ZI(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function QRe(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function B3(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function EQ(t,e,n){const r=t.node(-1),o=Wn.get(r),s=t.start(-1),i=o.nextCell(t.pos-s,e,n);return i==null?null:t.node(0).resolve(s+i)}function wm(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(o=>o>0)||(r.colwidth=null)),r}var tr=class Ll extends nt{constructor(e,n=e){const r=e.node(-1),o=Wn.get(r),s=e.start(-1),i=o.rectBetween(e.pos-s,n.pos-s),a=e.node(0),l=o.cellsInRect(i).filter(u=>u!=n.pos-s);l.unshift(n.pos-s);const c=l.map(u=>{const f=r.nodeAt(u);if(!f)throw RangeError(`No cell with offset ${u} found`);const h=s+u+1;return new CK(a.resolve(h),a.resolve(h+f.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),o=e.resolve(n.map(this.$headCell.pos));if(ZI(r)&&ZI(o)&&B3(r,o)){const s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?Ll.rowSelection(r,o):s&&this.isColSelection()?Ll.colSelection(r,o):new Ll(r,o)}return Ze.between(r,o)}content(){const e=this.$anchorCell.node(-1),n=Wn.get(e),r=this.$anchorCell.start(-1),o=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),s={},i=[];for(let l=o.top;l<o.bottom;l++){const c=[];for(let u=l*n.width+o.left,f=o.left;f<o.right;f++,u++){const h=n.map[u];if(s[h])continue;s[h]=!0;const p=n.findCell(h);let m=e.nodeAt(h);if(!m)throw RangeError(`No cell with offset ${h} found`);const y=o.left-p.left,x=p.right-o.right;if(y>0||x>0){let b=m.attrs;if(y>0&&(b=wm(b,0,y)),x>0&&(b=wm(b,b.colspan-x,x)),p.left<o.left){if(m=m.type.createAndFill(b),!m)throw RangeError(`Could not create cell with attrs ${JSON.stringify(b)}`)}else m=m.type.create(b,m.content)}if(p.top<o.top||p.bottom>o.bottom){const b={...m.attrs,rowspan:Math.min(p.bottom,o.bottom)-Math.max(p.top,o.top)};p.top<o.top?m=m.type.createAndFill(b):m=m.type.create(b,m.content)}c.push(m)}i.push(e.child(l).copy(_e.from(c)))}const a=this.isColSelection()&&this.isRowSelection()?e:i;return new je(_e.from(a),1,1)}replace(e,n=je.empty){const r=e.steps.length,o=this.ranges;for(let i=0;i<o.length;i++){const{$from:a,$to:l}=o[i],c=e.mapping.slice(r);e.replace(c.map(a.pos),c.map(l.pos),i?je.empty:n)}const s=nt.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);s&&e.setSelection(s)}replaceWith(e,n){this.replace(e,new je(_e.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=Wn.get(n),o=this.$anchorCell.start(-1),s=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-o,this.$headCell.pos-o));for(let i=0;i<s.length;i++)e(n.nodeAt(s[i]),o+s[i])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,o=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,o)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),o=Wn.get(r),s=e.start(-1),i=o.findCell(e.pos-s),a=o.findCell(n.pos-s),l=e.node(0);return i.top<=a.top?(i.top>0&&(e=l.resolve(s+o.map[i.left])),a.bottom<o.height&&(n=l.resolve(s+o.map[o.width*(o.height-1)+a.right-1]))):(a.top>0&&(n=l.resolve(s+o.map[a.left])),i.bottom<o.height&&(e=l.resolve(s+o.map[o.width*(o.height-1)+i.right-1]))),new Ll(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=Wn.get(e),r=this.$anchorCell.start(-1),o=n.colCount(this.$anchorCell.pos-r),s=n.colCount(this.$headCell.pos-r);if(Math.min(o,s)>0)return!1;const i=o+this.$anchorCell.nodeAfter.attrs.colspan,a=s+this.$headCell.nodeAfter.attrs.colspan;return Math.max(i,a)==n.width}eq(e){return e instanceof Ll&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),o=Wn.get(r),s=e.start(-1),i=o.findCell(e.pos-s),a=o.findCell(n.pos-s),l=e.node(0);return i.left<=a.left?(i.left>0&&(e=l.resolve(s+o.map[i.top*o.width])),a.right<o.width&&(n=l.resolve(s+o.map[o.width*(a.top+1)-1]))):(a.left>0&&(n=l.resolve(s+o.map[a.top*o.width])),i.right<o.width&&(e=l.resolve(s+o.map[o.width*(i.top+1)-1]))),new Ll(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new Ll(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new Ll(e.resolve(n),e.resolve(r))}getBookmark(){return new XRe(this.$anchorCell.pos,this.$headCell.pos)}};tr.prototype.visible=!1;nt.jsonID("cell",tr);var XRe=class kQ{constructor(e,n){this.anchor=e,this.head=n}map(e){return new kQ(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&B3(n,r)?new tr(n,r):nt.near(r,1)}};function JRe(t){if(!(t.selection instanceof tr))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(Mn.node(r,r+n.nodeSize,{class:"selectedCell"}))}),Gt.create(t.doc,e)}function ZRe({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,o=t.depth;for(;o>=0&&!(t.after(o+1)<t.end(o));o--,n++);for(let s=e.depth;s>=0&&!(e.before(s+1)>e.start(s));s--,r--);return n==r&&/row|table/.test(t.node(o).type.spec.tableRole)}function eAe({$from:t,$to:e}){let n,r;for(let o=t.depth;o>0;o--){const s=t.node(o);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){n=s;break}}for(let o=e.depth;o>0;o--){const s=e.node(o);if(s.type.spec.tableRole==="cell"||s.type.spec.tableRole==="header_cell"){r=s;break}}return n!==r&&e.parentOffset===0}function tAe(t,e,n){const r=(e||t).selection,o=(e||t).doc;let s,i;if(r instanceof Je&&(i=r.node.type.spec.tableRole)){if(i=="cell"||i=="header_cell")s=tr.create(o,r.from);else if(i=="row"){const a=o.resolve(r.from+1);s=tr.rowSelection(a,a)}else if(!n){const a=Wn.get(r.node),l=r.from+1,c=l+a.map[a.width*a.height-1];s=tr.create(o,l+1,c)}}else r instanceof Ze&&ZRe(r)?s=Ze.create(o,r.from):r instanceof Ze&&eAe(r)&&(s=Ze.create(o,r.$from.start(),r.$from.end()));return s&&(e||(e=t.tr)).setSelection(s),e}var nAe=new Ht("fix-tables");function SQ(t,e,n,r){const o=t.childCount,s=e.childCount;e:for(let i=0,a=0;i<s;i++){const l=e.child(i);for(let c=a,u=Math.min(o,i+3);c<u;c++)if(t.child(c)==l){a=c+1,n+=l.nodeSize;continue e}r(l,n),a<o&&t.child(a).sameMarkup(l)?SQ(t.child(a),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function rAe(t,e){let n;const r=(o,s)=>{o.type.spec.tableRole=="table"&&(n=oAe(t,o,s,n))};return e?e.doc!=t.doc&&SQ(e.doc,t.doc,0,r):t.doc.descendants(r),n}function oAe(t,e,n,r){const o=Wn.get(e);if(!o.problems)return r;r||(r=t.tr);const s=[];for(let l=0;l<o.height;l++)s.push(0);for(let l=0;l<o.problems.length;l++){const c=o.problems[l];if(c.type=="collision"){const u=e.nodeAt(c.pos);if(!u)continue;const f=u.attrs;for(let h=0;h<f.rowspan;h++)s[c.row+h]+=c.n;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,wm(f,f.colspan-c.n,c.n))}else if(c.type=="missing")s[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const u=e.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,rowspan:u.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const u=e.nodeAt(c.pos);if(!u)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...u.attrs,colwidth:c.colwidth})}}let i,a;for(let l=0;l<s.length;l++)s[l]&&(i==null&&(i=l),a=l);for(let l=0,c=n+1;l<o.height;l++){const u=e.child(l),f=c+u.nodeSize,h=s[l];if(h>0){let p="cell";u.firstChild&&(p=u.firstChild.type.spec.tableRole);const m=[];for(let x=0;x<h;x++){const b=tl(t.schema)[p].createAndFill();b&&m.push(b)}const y=(l==0||i==l-1)&&a==l?c+1:f-1;r.insert(r.mapping.map(y),m)}c=f}return r.setMeta(nAe,{fixTables:!0})}function TQ(t){const e=t.selection,n=$3(t),r=n.node(-1),o=n.start(-1),s=Wn.get(r);return{...e instanceof tr?s.rectBetween(e.$anchorCell.pos-o,e.$headCell.pos-o):s.findCell(n.pos-o),tableStart:o,map:s,table:r}}function sAe(t){return function(e,n){if(!JE(e))return!1;if(n){const r=tl(e.schema),o=TQ(e),s=e.tr,i=o.map.cellsInRect(t=="column"?{left:o.left,top:0,right:o.right,bottom:o.map.height}:t=="row"?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),a=i.map(l=>o.table.nodeAt(l));for(let l=0;l<i.length;l++)a[l].type==r.header_cell&&s.setNodeMarkup(o.tableStart+i[l],r.cell,a[l].attrs);if(s.steps.length==0)for(let l=0;l<i.length;l++)s.setNodeMarkup(o.tableStart+i[l],r.header_cell,a[l].attrs);n(s)}return!0}}function KL(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let o=0;o<r.length;o++){const s=e.table.nodeAt(r[o]);if(s&&s.type!==n.header_cell)return!1}return!0}function F3(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?sAe(t):function(n,r){if(!JE(n))return!1;if(r){const o=tl(n.schema),s=TQ(n),i=n.tr,a=KL("row",s,o),l=KL("column",s,o),u=(t==="column"?a:t==="row"?l:!1)?1:0,f=t=="column"?{left:0,top:u,right:1,bottom:s.map.height}:t=="row"?{left:u,top:0,right:s.map.width,bottom:1}:s,h=t=="column"?l?o.cell:o.header_cell:t=="row"?a?o.cell:o.header_cell:o.cell;s.map.cellsInRect(f).forEach(p=>{const m=p+s.tableStart,y=i.doc.nodeAt(m);y&&i.setNodeMarkup(m,h,y.attrs)}),r(i)}return!0}}F3("row",{useDeprecatedLogic:!0});F3("column",{useDeprecatedLogic:!0});F3("cell",{useDeprecatedLogic:!0});function iAe(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,o=t.before();r>=0;r--){const s=t.node(-1).child(r),i=s.lastChild;if(i)return o-1-i.nodeSize;o-=s.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),o=t.after();r<n.childCount;r++){const s=n.child(r);if(s.childCount)return o+1;o+=s.nodeSize}}return null}function YL(t){return function(e,n){if(!JE(e))return!1;const r=iAe($3(e),t);if(r==null)return!1;if(n){const o=e.doc.resolve(r);n(e.tr.setSelection(Ze.between(o,QRe(o))).scrollIntoView())}return!0}}function b0(t,e){const n=t.selection;if(!(n instanceof tr))return!1;if(e){const r=t.tr,o=tl(t.schema).cell.createAndFill().content;n.forEachCell((s,i)=>{s.content.eq(o)||r.replace(r.mapping.map(i+1),r.mapping.map(i+s.nodeSize-1),new je(o,0,0))}),r.docChanged&&e(r)}return!0}function aAe(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const o=e.child(0),s=o.type.spec.tableRole,i=o.type.schema,a=[];if(s=="row")for(let l=0;l<e.childCount;l++){let c=e.child(l).content;const u=l?0:Math.max(0,n-1),f=l<e.childCount-1?0:Math.max(0,r-1);(u||f)&&(c=eR(tl(i).row,new je(c,u,f)).content),a.push(c)}else if(s=="cell"||s=="header_cell")a.push(n||r?eR(tl(i).row,new je(e,n,r)).content:e);else return null;return lAe(i,a)}function lAe(t,e){const n=[];for(let o=0;o<e.length;o++){const s=e[o];for(let i=s.childCount-1;i>=0;i--){const{rowspan:a,colspan:l}=s.child(i).attrs;for(let c=o;c<o+a;c++)n[c]=(n[c]||0)+l}}let r=0;for(let o=0;o<n.length;o++)r=Math.max(r,n[o]);for(let o=0;o<n.length;o++)if(o>=e.length&&e.push(_e.empty),n[o]<r){const s=tl(t).cell.createAndFill(),i=[];for(let a=n[o];a<r;a++)i.push(s);e[o]=e[o].append(_e.from(i))}return{height:e.length,width:r,rows:e}}function eR(t,e){const n=t.createAndFill();return new f3(n).replace(0,n.content.size,e).doc}function cAe({width:t,height:e,rows:n},r,o){if(t!=r){const s=[],i=[];for(let a=0;a<n.length;a++){const l=n[a],c=[];for(let u=s[a]||0,f=0;u<r;f++){let h=l.child(f%l.childCount);u+h.attrs.colspan>r&&(h=h.type.createChecked(wm(h.attrs,h.attrs.colspan,u+h.attrs.colspan-r),h.content)),c.push(h),u+=h.attrs.colspan;for(let p=1;p<h.attrs.rowspan;p++)s[a+p]=(s[a+p]||0)+h.attrs.colspan}i.push(_e.from(c))}n=i,t=r}if(e!=o){const s=[];for(let i=0,a=0;i<o;i++,a++){const l=[],c=n[a%e];for(let u=0;u<c.childCount;u++){let f=c.child(u);i+f.attrs.rowspan>o&&(f=f.type.create({...f.attrs,rowspan:Math.max(1,o-f.attrs.rowspan)},f.content)),l.push(f)}s.push(_e.from(l))}n=s,e=o}return{width:t,height:e,rows:n}}function uAe(t,e,n,r,o,s,i){const a=t.doc.type.schema,l=tl(a);let c,u;if(o>e.width)for(let f=0,h=0;f<e.height;f++){const p=n.child(f);h+=p.nodeSize;const m=[];let y;p.lastChild==null||p.lastChild.type==l.cell?y=c||(c=l.cell.createAndFill()):y=u||(u=l.header_cell.createAndFill());for(let x=e.width;x<o;x++)m.push(y);t.insert(t.mapping.slice(i).map(h-1+r),m)}if(s>e.height){const f=[];for(let m=0,y=(e.height-1)*e.width;m<Math.max(e.width,o);m++){const x=m>=e.width?!1:n.nodeAt(e.map[y+m]).type==l.header_cell;f.push(x?u||(u=l.header_cell.createAndFill()):c||(c=l.cell.createAndFill()))}const h=l.row.create(null,_e.from(f)),p=[];for(let m=e.height;m<s;m++)p.push(h);t.insert(t.mapping.slice(i).map(r+n.nodeSize-2),p)}return!!(c||u)}function QL(t,e,n,r,o,s,i,a){if(i==0||i==e.height)return!1;let l=!1;for(let c=o;c<s;c++){const u=i*e.width+c,f=e.map[u];if(e.map[u-e.width]==f){l=!0;const h=n.nodeAt(f),{top:p,left:m}=e.findCell(f);t.setNodeMarkup(t.mapping.slice(a).map(f+r),null,{...h.attrs,rowspan:i-p}),t.insert(t.mapping.slice(a).map(e.positionAt(i,m,n)),h.type.createAndFill({...h.attrs,rowspan:p+h.attrs.rowspan-i})),c+=h.attrs.colspan-1}}return l}function XL(t,e,n,r,o,s,i,a){if(i==0||i==e.width)return!1;let l=!1;for(let c=o;c<s;c++){const u=c*e.width+i,f=e.map[u];if(e.map[u-1]==f){l=!0;const h=n.nodeAt(f),p=e.colCount(f),m=t.mapping.slice(a).map(f+r);t.setNodeMarkup(m,null,wm(h.attrs,i-p,h.attrs.colspan-(i-p))),t.insert(m+h.nodeSize,h.type.createAndFill(wm(h.attrs,0,i-p))),c+=h.attrs.rowspan-1}}return l}function JL(t,e,n,r,o){let s=n?t.doc.nodeAt(n-1):t.doc;if(!s)throw new Error("No table found");let i=Wn.get(s);const{top:a,left:l}=r,c=l+o.width,u=a+o.height,f=t.tr;let h=0;function p(){if(s=n?f.doc.nodeAt(n-1):f.doc,!s)throw new Error("No table found");i=Wn.get(s),h=f.mapping.maps.length}uAe(f,i,s,n,c,u,h)&&p(),QL(f,i,s,n,l,c,a,h)&&p(),QL(f,i,s,n,l,c,u,h)&&p(),XL(f,i,s,n,a,u,l,h)&&p(),XL(f,i,s,n,a,u,c,h)&&p();for(let m=a;m<u;m++){const y=i.positionAt(m,l,s),x=i.positionAt(m,c,s);f.replace(f.mapping.slice(h).map(y+n),f.mapping.slice(h).map(x+n),new je(o.rows[m-a],0,0))}p(),f.setSelection(new tr(f.doc.resolve(n+i.positionAt(a,l,s)),f.doc.resolve(n+i.positionAt(u-1,c-1,s)))),e(f)}var dAe=C3({ArrowLeft:x0("horiz",-1),ArrowRight:x0("horiz",1),ArrowUp:x0("vert",-1),ArrowDown:x0("vert",1),"Shift-ArrowLeft":_0("horiz",-1),"Shift-ArrowRight":_0("horiz",1),"Shift-ArrowUp":_0("vert",-1),"Shift-ArrowDown":_0("vert",1),Backspace:b0,"Mod-Backspace":b0,Delete:b0,"Mod-Delete":b0});function bb(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function x0(t,e){return(n,r,o)=>{if(!o)return!1;const s=n.selection;if(s instanceof tr)return bb(n,r,nt.near(s.$headCell,e));if(t!="horiz"&&!s.empty)return!1;const i=NQ(o,t,e);if(i==null)return!1;if(t=="horiz")return bb(n,r,nt.near(n.doc.resolve(s.head+e),e));{const a=n.doc.resolve(i),l=EQ(a,t,e);let c;return l?c=nt.near(l,1):e<0?c=nt.near(n.doc.resolve(a.before(-1)),-1):c=nt.near(n.doc.resolve(a.after(-1)),1),bb(n,r,c)}}}function _0(t,e){return(n,r,o)=>{if(!o)return!1;const s=n.selection;let i;if(s instanceof tr)i=s;else{const l=NQ(o,t,e);if(l==null)return!1;i=new tr(n.doc.resolve(l))}const a=EQ(i.$headCell,t,e);return a?bb(n,r,new tr(i.$anchorCell,a)):!1}}function fAe(t,e){const n=t.state.doc,r=ew(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new tr(r))),!0):!1}function hAe(t,e,n){if(!JE(t.state))return!1;let r=aAe(n);const o=t.state.selection;if(o instanceof tr){r||(r={width:1,height:1,rows:[_e.from(eR(tl(t.state.schema).cell,n))]});const s=o.$anchorCell.node(-1),i=o.$anchorCell.start(-1),a=Wn.get(s).rectBetween(o.$anchorCell.pos-i,o.$headCell.pos-i);return r=cAe(r,a.right-a.left,a.bottom-a.top),JL(t.state,t.dispatch,i,a,r),!0}else if(r){const s=$3(t.state),i=s.start(-1);return JL(t.state,t.dispatch,i,Wn.get(s.node(-1)).findCell(s.pos-i),r),!0}else return!1}function pAe(t,e){var n;if(e.ctrlKey||e.metaKey)return;const r=ZL(t,e.target);let o;if(e.shiftKey&&t.state.selection instanceof tr)s(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(o=ew(t.state.selection.$anchor))!=null&&((n=DS(t,e))==null?void 0:n.pos)!=o.pos)s(o,e),e.preventDefault();else if(!r)return;function s(l,c){let u=DS(t,c);const f=cu.getState(t.state)==null;if(!u||!B3(l,u))if(f)u=l;else return;const h=new tr(l,u);if(f||!t.state.selection.eq(h)){const p=t.state.tr.setSelection(h);f&&p.setMeta(cu,l.pos),t.dispatch(p)}}function i(){t.root.removeEventListener("mouseup",i),t.root.removeEventListener("dragstart",i),t.root.removeEventListener("mousemove",a),cu.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(cu,-1))}function a(l){const c=l,u=cu.getState(t.state);let f;if(u!=null)f=t.state.doc.resolve(u);else if(ZL(t,c.target)!=r&&(f=DS(t,e),!f))return i();f&&s(f,c)}t.root.addEventListener("mouseup",i),t.root.addEventListener("dragstart",i),t.root.addEventListener("mousemove",a)}function NQ(t,e,n){if(!(t.state.selection instanceof Ze))return null;const{$head:r}=t.state.selection;for(let o=r.depth-1;o>=0;o--){const s=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:s.childCount))return null;if(s.type.spec.tableRole=="cell"||s.type.spec.tableRole=="header_cell"){const a=r.before(o),l=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(l)?a:null}}return null}function ZL(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function DS(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?ew(t.state.doc.resolve(n.pos)):null}var IQ=class{constructor(t,e){this.node=t,this.defaultCellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${e}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),tR(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!=this.node.type?!1:(this.node=t,tR(t,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(t){return t.type=="attributes"&&(t.target==this.table||this.colgroup.contains(t.target))}};function tR(t,e,n,r,o,s){var i;let a=0,l=!0,c=e.firstChild;const u=t.firstChild;if(u){for(let f=0,h=0;f<u.childCount;f++){const{colspan:p,colwidth:m}=u.child(f).attrs;for(let y=0;y<p;y++,h++){const x=o==h?s:m&&m[y],b=x?x+"px":"";if(a+=x||r,x||(l=!1),c)c.style.width!=b&&(c.style.width=b),c=c.nextSibling;else{const C=document.createElement("col");C.style.width=b,e.appendChild(C)}}}for(;c;){const f=c.nextSibling;(i=c.parentNode)==null||i.removeChild(c),c=f}l?(n.style.width=a+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=a+"px")}}var gs=new Ht("tableColumnResizing");function mAe({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:r=IQ,lastColumnResizable:o=!0}={}){const s=new kt({key:gs,state:{init(i,a){var l,c;const u=(c=(l=s.spec)==null?void 0:l.props)==null?void 0:c.nodeViews,f=tl(a.schema).table.name;return r&&u&&(u[f]=(h,p)=>new r(h,n,p)),new gAe(-1,!1)},apply(i,a){return a.apply(i)}},props:{attributes:i=>{const a=gs.getState(i);return a&&a.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(i,a)=>{yAe(i,a,t,o)},mouseleave:i=>{vAe(i)},mousedown:(i,a)=>{wAe(i,a,e,n)}},decorations:i=>{const a=gs.getState(i);if(a&&a.activeHandle>-1)return EAe(i,a.activeHandle)},nodeViews:{}}});return s}var gAe=class xb{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(gs);if(r&&r.setHandle!=null)return new xb(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new xb(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let o=e.mapping.map(n.activeHandle,-1);return ZI(e.doc.resolve(o))||(o=-1),new xb(o,n.dragging)}return n}};function yAe(t,e,n,r){const o=gs.getState(t.state);if(o&&!o.dragging){const s=xAe(e.target);let i=-1;if(s){const{left:a,right:l}=s.getBoundingClientRect();e.clientX-a<=n?i=e6(t,e,"left",n):l-e.clientX<=n&&(i=e6(t,e,"right",n))}if(i!=o.activeHandle){if(!r&&i!==-1){const a=t.state.doc.resolve(i),l=a.node(-1),c=Wn.get(l),u=a.start(-1);if(c.colCount(a.pos-u)+a.nodeAfter.attrs.colspan-1==c.width-1)return}RQ(t,i)}}}function vAe(t){const e=gs.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&RQ(t,-1)}function wAe(t,e,n,r){var o;const s=(o=t.dom.ownerDocument.defaultView)!=null?o:window,i=gs.getState(t.state);if(!i||i.activeHandle==-1||i.dragging)return!1;const a=t.state.doc.nodeAt(i.activeHandle),l=bAe(t,i.activeHandle,a.attrs);t.dispatch(t.state.tr.setMeta(gs,{setDragging:{startX:e.clientX,startWidth:l}}));function c(f){s.removeEventListener("mouseup",c),s.removeEventListener("mousemove",u);const h=gs.getState(t.state);h!=null&&h.dragging&&(_Ae(t,h.activeHandle,t6(h.dragging,f,n)),t.dispatch(t.state.tr.setMeta(gs,{setDragging:null})))}function u(f){if(!f.which)return c(f);const h=gs.getState(t.state);if(h&&h.dragging){const p=t6(h.dragging,f,n);n6(t,h.activeHandle,p,r)}}return n6(t,i.activeHandle,l,r),s.addEventListener("mouseup",c),s.addEventListener("mousemove",u),e.preventDefault(),!0}function bAe(t,e,{colspan:n,colwidth:r}){const o=r&&r[r.length-1];if(o)return o;const s=t.domAtPos(e);let a=s.node.childNodes[s.offset].offsetWidth,l=n;if(r)for(let c=0;c<n;c++)r[c]&&(a-=r[c],l--);return a/l}function xAe(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function e6(t,e,n,r){const o=n=="right"?-r:r,s=t.posAtCoords({left:e.clientX+o,top:e.clientY});if(!s)return-1;const{pos:i}=s,a=ew(t.state.doc.resolve(i));if(!a)return-1;if(n=="right")return a.pos;const l=Wn.get(a.node(-1)),c=a.start(-1),u=l.map.indexOf(a.pos-c);return u%l.width==0?-1:c+l.map[u-1]}function t6(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function RQ(t,e){t.dispatch(t.state.tr.setMeta(gs,{setHandle:e}))}function _Ae(t,e,n){const r=t.state.doc.resolve(e),o=r.node(-1),s=Wn.get(o),i=r.start(-1),a=s.colCount(r.pos-i)+r.nodeAfter.attrs.colspan-1,l=t.state.tr;for(let c=0;c<s.height;c++){const u=c*s.width+a;if(c&&s.map[u]==s.map[u-s.width])continue;const f=s.map[u],h=o.nodeAt(f).attrs,p=h.colspan==1?0:a-s.colCount(f);if(h.colwidth&&h.colwidth[p]==n)continue;const m=h.colwidth?h.colwidth.slice():CAe(h.colspan);m[p]=n,l.setNodeMarkup(i+f,null,{...h,colwidth:m})}l.docChanged&&t.dispatch(l)}function n6(t,e,n,r){const o=t.state.doc.resolve(e),s=o.node(-1),i=o.start(-1),a=Wn.get(s).colCount(o.pos-i)+o.nodeAfter.attrs.colspan-1;let l=t.domAtPos(o.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&tR(s,l.firstChild,l,r,a,n)}function CAe(t){return Array(t).fill(0)}function EAe(t,e){var n;const r=[],o=t.doc.resolve(e),s=o.node(-1);if(!s)return Gt.empty;const i=Wn.get(s),a=o.start(-1),l=i.colCount(o.pos-a)+o.nodeAfter.attrs.colspan-1;for(let c=0;c<i.height;c++){const u=l+c*i.width;if((l==i.width-1||i.map[u]!=i.map[u+1])&&(c==0||i.map[u]!=i.map[u-i.width])){const f=i.map[u],h=a+f+s.nodeAt(f).nodeSize-1,p=document.createElement("div");p.className="column-resize-handle",(n=gs.getState(t))!=null&&n.dragging&&r.push(Mn.node(a+f,a+f+s.nodeAt(f).nodeSize,{class:"column-resize-dragging"})),r.push(Mn.widget(h,p))}}return Gt.create(t.doc,r)}function kAe({allowTableNodeSelection:t=!1}={}){return new kt({key:cu,state:{init(){return null},apply(e,n){const r=e.getMeta(cu);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:o,pos:s}=e.mapping.mapResult(n);return o?null:s}},props:{decorations:JRe,handleDOMEvents:{mousedown:pAe},createSelectionBetween(e){return cu.getState(e.state)!=null?e.state.selection:null},handleTripleClick:fAe,handleKeyDown:dAe,handlePaste:hAe},appendTransaction(e,n,r){return tAe(r,rAe(r,n),t)}})}const di=()=>new Map,nR=t=>{const e=di();return t.forEach((n,r)=>{e.set(r,n)}),e},Ic=(t,e,n)=>{let r=t.get(e);return r===void 0&&t.set(e,r=n()),r},SAe=(t,e)=>{const n=[];for(const[r,o]of t)n.push(e(o,r));return n},TAe=(t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1},Ff=()=>new Set,OS=t=>t[t.length-1],NAe=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},Uf=Array.from,IAe=(t,e)=>{for(let n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1},rR=Array.isArray;class AQ{constructor(){this._observers=di()}on(e,n){return Ic(this._observers,e,Ff).add(n),n}once(e,n){const r=(...o)=>{this.off(e,r),n(...o)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return Uf((this._observers.get(e)||di()).values()).forEach(r=>r(...n))}destroy(){this._observers=di()}}const _c=Math.floor,_b=Math.abs,ac=(t,e)=>t<e?t:e,nl=(t,e)=>t>e?t:e,PQ=t=>t!==0?t<0:1/t<0,r6=1,o6=2,LS=4,jS=8,H1=32,lc=64,Es=128,ZE=31,oR=63,mf=127,RAe=2147483647,MQ=Number.MAX_SAFE_INTEGER,AAe=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&_c(t)===t),PAe=t=>t.toLowerCase(),MAe=/^\s*/g,DAe=t=>t.replace(MAe,""),OAe=/([A-Z])/g,s6=(t,e)=>DAe(t.replace(OAe,n=>`${e}${PAe(n)}`)),LAe=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let o=0;o<n;o++)r[o]=e.codePointAt(o);return r},z1=typeof TextEncoder<"u"?new TextEncoder:null,jAe=t=>z1.encode(t),VAe=z1?jAe:LAe;let By=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});By&&By.decode(new Uint8Array).length===1&&(By=null);class tw{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const e2=()=>new tw,$Ae=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},$a=t=>{const e=new Uint8Array($Ae(t));let n=0;for(let r=0;r<t.bufs.length;r++){const o=t.bufs[r];e.set(o,n),n+=o.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),n),e},BAe=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(nl(n,e)*2),t.cpos=0)},Tr=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},sR=Tr,Vt=(t,e)=>{for(;e>mf;)Tr(t,Es|mf&e),e=_c(e/128);Tr(t,mf&e)},U3=(t,e)=>{const n=PQ(e);for(n&&(e=-e),Tr(t,(e>oR?Es:0)|(n?lc:0)|oR&e),e=_c(e/64);e>0;)Tr(t,(e>mf?Es:0)|mf&e),e=_c(e/128)},iR=new Uint8Array(3e4),FAe=iR.length/3,UAe=(t,e)=>{if(e.length<FAe){const n=z1.encodeInto(e,iR).written||0;Vt(t,n);for(let r=0;r<n;r++)Tr(t,iR[r])}else hs(t,VAe(e))},HAe=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;Vt(t,r);for(let o=0;o<r;o++)Tr(t,n.codePointAt(o))},$p=z1&&z1.encodeInto?UAe:HAe,t2=(t,e)=>{const n=t.cbuf.length,r=t.cpos,o=ac(n-r,e.length),s=e.length-o;t.cbuf.set(e.subarray(0,o),r),t.cpos+=o,s>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(nl(n*2,s)),t.cbuf.set(e.subarray(o)),t.cpos=s)},hs=(t,e)=>{Vt(t,e.byteLength),t2(t,e)},H3=(t,e)=>{BAe(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},zAe=(t,e)=>H3(t,4).setFloat32(0,e,!1),WAe=(t,e)=>H3(t,8).setFloat64(0,e,!1),GAe=(t,e)=>H3(t,8).setBigInt64(0,e,!1),i6=new DataView(new ArrayBuffer(4)),qAe=t=>(i6.setFloat32(0,t),i6.getFloat32(0)===t),W1=(t,e)=>{switch(typeof e){case"string":Tr(t,119),$p(t,e);break;case"number":AAe(e)&&_b(e)<=RAe?(Tr(t,125),U3(t,e)):qAe(e)?(Tr(t,124),zAe(t,e)):(Tr(t,123),WAe(t,e));break;case"bigint":Tr(t,122),GAe(t,e);break;case"object":if(e===null)Tr(t,126);else if(rR(e)){Tr(t,117),Vt(t,e.length);for(let n=0;n<e.length;n++)W1(t,e[n])}else if(e instanceof Uint8Array)Tr(t,116),hs(t,e);else{Tr(t,118);const n=Object.keys(e);Vt(t,n.length);for(let r=0;r<n.length;r++){const o=n[r];$p(t,o),W1(t,e[o])}}break;case"boolean":Tr(t,e?120:121);break;default:Tr(t,127)}};class a6 extends tw{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&Vt(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const l6=t=>{t.count>0&&(U3(t.encoder,t.count===1?t.s:-t.s),t.count>1&&Vt(t.encoder,t.count-2))};class Cb{constructor(){this.encoder=new tw,this.s=0,this.count=0}write(e){this.s===e?this.count++:(l6(this),this.count=1,this.s=e)}toUint8Array(){return l6(this),$a(this.encoder)}}const c6=t=>{if(t.count>0){const e=t.diff*2+(t.count===1?0:1);U3(t.encoder,e),t.count>1&&Vt(t.encoder,t.count-2)}};class VS{constructor(){this.encoder=new tw,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(c6(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return c6(this),$a(this.encoder)}}class KAe{constructor(){this.sarr=[],this.s="",this.lensE=new Cb}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new tw;return this.sarr.push(this.s),this.s="",$p(e,this.sarr.join("")),t2(e,this.lensE.toUint8Array()),$a(e)}}const Qu=t=>new Error(t),Yi=()=>{throw Qu("Method unimplemented")},Ps=()=>{throw Qu("Unexpected case")},DQ=Qu("Unexpected end of array"),OQ=Qu("Integer out of Range");class n2{constructor(e){this.arr=e,this.pos=0}}const z3=t=>new n2(t),YAe=t=>t.pos!==t.arr.length,QAe=(t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},Ks=t=>QAe(t,Tn(t)),G1=t=>t.arr[t.pos++],Tn=t=>{let e=0,n=1;const r=t.arr.length;for(;t.pos<r;){const o=t.arr[t.pos++];if(e=e+(o&mf)*n,n*=128,o<Es)return e;if(e>MQ)throw OQ}throw DQ},W3=t=>{let e=t.arr[t.pos++],n=e&oR,r=64;const o=(e&lc)>0?-1:1;if(!(e&Es))return o*n;const s=t.arr.length;for(;t.pos<s;){if(e=t.arr[t.pos++],n=n+(e&mf)*r,r*=128,e<Es)return o*n;if(n>MQ)throw OQ}throw DQ},XAe=t=>{let e=Tn(t);if(e===0)return"";{let n=String.fromCodePoint(G1(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(G1(t));else for(;e>0;){const r=e<1e4?e:1e4,o=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,o),e-=r}return decodeURIComponent(escape(n))}},JAe=t=>By.decode(Ks(t)),aR=By?JAe:XAe,G3=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},ZAe=t=>G3(t,4).getFloat32(0,!1),e4e=t=>G3(t,8).getFloat64(0,!1),t4e=t=>G3(t,8).getBigInt64(0,!1),n4e=[t=>{},t=>null,W3,ZAe,e4e,t4e,t=>!1,t=>!0,aR,t=>{const e=Tn(t),n={};for(let r=0;r<e;r++){const o=aR(t);n[o]=s_(t)}return n},t=>{const e=Tn(t),n=[];for(let r=0;r<e;r++)n.push(s_(t));return n},Ks],s_=t=>n4e[127-G1(t)](t);class u6 extends n2{constructor(e,n){super(e),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),YAe(this)?this.count=Tn(this)+1:this.count=-1),this.count--,this.s}}class Eb extends n2{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=W3(this);const e=PQ(this.s);this.count=1,e&&(this.s=-this.s,this.count=Tn(this)+2)}return this.count--,this.s}}class $S extends n2{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=W3(this),n=e&1;this.diff=_c(e/2),this.count=1,n&&(this.count=Tn(this)+2)}return this.s+=this.diff,this.count--,this.s}}class r4e{constructor(e){this.decoder=new Eb(e),this.str=aR(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),n=this.str.slice(this.spos,e);return this.spos=e,n}}const o4e=crypto.getRandomValues.bind(crypto),s4e=Math.random,LQ=()=>o4e(new Uint32Array(1))[0],i4e=t=>t[_c(s4e()*t.length)],a4e="10000000-1000-4000-8000"+-1e11,l4e=()=>a4e.replace(/[018]/g,t=>(t^LQ()&15>>t/4).toString(16)),c4e=Date.now,d6=t=>new Promise(t);Promise.all.bind(Promise);const f6=t=>t===void 0?null:t;class u4e{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}}let jQ=new u4e,d4e=!0;try{typeof localStorage<"u"&&localStorage&&(jQ=localStorage,d4e=!1)}catch{}const f4e=jQ,h4e=Object.assign,VQ=Object.keys,p4e=(t,e)=>{for(const n in t)e(t[n],n)},h6=t=>VQ(t).length,m4e=t=>{for(const e in t)return!1;return!0},g4e=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},y4e=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),v4e=(t,e)=>t===e||h6(t)===h6(e)&&g4e(t,(n,r)=>(n!==void 0||y4e(e,r))&&e[r]===n),w4e=Object.freeze,$Q=t=>{for(const e in t){const n=t[e];(typeof n=="object"||typeof n=="function")&&$Q(t[e])}return w4e(t)},q3=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&q3(t,e,n+1)}},b4e=(t,e)=>e.includes(t);var BQ={};const bm=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",x4e=typeof window<"u"&&typeof document<"u"&&!bm;let ka;const _4e=()=>{if(ka===void 0)if(bm){ka=di();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];r[0]==="-"?(e!==null&&ka.set(e,""),e=r):e!==null&&(ka.set(e,r),e=null)}e!==null&&ka.set(e,"")}else typeof location=="object"?(ka=di(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){const[e,n]=t.split("=");ka.set(`--${s6(e,"-")}`,n),ka.set(`-${s6(e,"-")}`,n)}})):ka=di();return ka},lR=t=>_4e().has(t),i_=t=>f6(bm?BQ[t.toUpperCase().replaceAll("-","_")]:f4e.getItem(t)),FQ=t=>lR("--"+t)||i_(t)!==null;FQ("production");const C4e=bm&&b4e(BQ.FORCE_COLOR,["true","1","2"]),E4e=C4e||!lR("--no-colors")&&!FQ("no-color")&&(!bm||process.stdout.isTTY)&&(!bm||lR("--color")||i_("COLORTERM")!==null||(i_("TERM")||"").includes("color"));class k4e{constructor(e,n){this.left=e,this.right=n}}const Ml=(t,e)=>new k4e(t,e),S4e=typeof document<"u"?document:{};typeof DOMParser<"u"&&new DOMParser;const T4e=t=>SAe(t,(e,n)=>`${n}:${e};`).join(""),N4e=t=>class{constructor(n){this._=n}destroy(){t(this._)}},I4e=N4e(clearTimeout),K3=(t,e)=>new I4e(setTimeout(e,t)),Rc=Symbol,UQ=Rc(),HQ=Rc(),R4e=Rc(),A4e=Rc(),P4e=Rc(),zQ=Rc(),M4e=Rc(),Y3=Rc(),D4e=Rc(),O4e=t=>{var o;t.length===1&&((o=t[0])==null?void 0:o.constructor)===Function&&(t=t[0]());const e=[],n=[];let r=0;for(;r<t.length;r++){const s=t[r];if(s===void 0)break;if(s.constructor===String||s.constructor===Number)e.push(s);else if(s.constructor===Object)break}for(r>0&&n.push(e.join(""));r<t.length;r++){const s=t[r];s instanceof Symbol||n.push(s)}return n},L4e={[UQ]:Ml("font-weight","bold"),[HQ]:Ml("font-weight","normal"),[R4e]:Ml("color","blue"),[P4e]:Ml("color","green"),[A4e]:Ml("color","grey"),[zQ]:Ml("color","red"),[M4e]:Ml("color","purple"),[Y3]:Ml("color","orange"),[D4e]:Ml("color","black")},j4e=t=>{var i;t.length===1&&((i=t[0])==null?void 0:i.constructor)===Function&&(t=t[0]());const e=[],n=[],r=di();let o=[],s=0;for(;s<t.length;s++){const a=t[s],l=L4e[a];if(l!==void 0)r.set(l.left,l.right);else{if(a===void 0)break;if(a.constructor===String||a.constructor===Number){const c=T4e(r);s>0||c.length>0?(e.push("%c"+a),n.push(c)):e.push(a)}else break}}for(s>0&&(o=n,o.unshift(e.join("")));s<t.length;s++){const a=t[s];a instanceof Symbol||o.push(a)}return o},WQ=E4e?j4e:O4e,V4e=(...t)=>{console.log(...WQ(t)),qQ.forEach(e=>e.print(t))},GQ=(...t)=>{console.warn(...WQ(t)),t.unshift(Y3),qQ.forEach(e=>e.print(t))},qQ=Ff(),KQ=t=>({[Symbol.iterator](){return this},next:t}),$4e=(t,e)=>KQ(()=>{let n;do n=t.next();while(!n.done&&!e(n.value));return n}),BS=(t,e)=>KQ(()=>{const{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}});class Q3{constructor(e,n){this.clock=e,this.len=n}}class Qm{constructor(){this.clients=new Map}}const Xu=(t,e,n)=>e.clients.forEach((r,o)=>{const s=t.doc.store.clients.get(o);for(let i=0;i<r.length;i++){const a=r[i];nX(t,s,a.clock,a.len,n)}}),B4e=(t,e)=>{let n=0,r=t.length-1;for(;n<=r;){const o=_c((n+r)/2),s=t[o],i=s.clock;if(i<=e){if(e<i+s.len)return o;n=o+1}else r=o-1}return null},Xm=(t,e)=>{const n=t.clients.get(e.client);return n!==void 0&&B4e(n,e.clock)!==null},X3=t=>{t.clients.forEach(e=>{e.sort((o,s)=>o.clock-s.clock);let n,r;for(n=1,r=1;n<e.length;n++){const o=e[r-1],s=e[n];o.clock+o.len>=s.clock?o.len=nl(o.len,s.clock+s.len-o.clock):(r<n&&(e[r]=s),r++)}e.length=r})},cR=t=>{const e=new Qm;for(let n=0;n<t.length;n++)t[n].clients.forEach((r,o)=>{if(!e.clients.has(o)){const s=r.slice();for(let i=n+1;i<t.length;i++)NAe(s,t[i].clients.get(o)||[]);e.clients.set(o,s)}});return X3(e),e},q1=(t,e,n,r)=>{Ic(t.clients,e,()=>[]).push(new Q3(n,r))},YQ=()=>new Qm,F4e=t=>{const e=YQ();return t.clients.forEach((n,r)=>{const o=[];for(let s=0;s<n.length;s++){const i=n[s];if(i.deleted){const a=i.id.clock;let l=i.length;if(s+1<n.length)for(let c=n[s+1];s+1<n.length&&c.deleted;c=n[++s+1])l+=c.length;o.push(new Q3(a,l))}}o.length>0&&e.clients.set(r,o)}),e},J3=(t,e)=>{Vt(t.restEncoder,e.clients.size),Uf(e.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{t.resetDsCurVal(),Vt(t.restEncoder,n);const o=r.length;Vt(t.restEncoder,o);for(let s=0;s<o;s++){const i=r[s];t.writeDsClock(i.clock),t.writeDsLen(i.len)}})},U4e=t=>{const e=new Qm,n=Tn(t.restDecoder);for(let r=0;r<n;r++){t.resetDsCurVal();const o=Tn(t.restDecoder),s=Tn(t.restDecoder);if(s>0){const i=Ic(e.clients,o,()=>[]);for(let a=0;a<s;a++)i.push(new Q3(t.readDsClock(),t.readDsLen()))}}return e},p6=(t,e,n)=>{const r=new Qm,o=Tn(t.restDecoder);for(let s=0;s<o;s++){t.resetDsCurVal();const i=Tn(t.restDecoder),a=Tn(t.restDecoder),l=n.clients.get(i)||[],c=Jn(n,i);for(let u=0;u<a;u++){const f=t.readDsClock(),h=f+t.readDsLen();if(f<c){c<h&&q1(r,i,c,h-c);let p=rl(l,f),m=l[p];for(!m.deleted&&m.id.clock<f&&(l.splice(p+1,0,f_(e,m,f-m.id.clock)),p++);p<l.length&&(m=l[p++],m.id.clock<h);)m.deleted||(h<m.id.clock+m.length&&l.splice(p,0,f_(e,m,h-m.id.clock)),m.delete(e))}else q1(r,i,f,h-f)}}if(r.clients.size>0){const s=new r2;return Vt(s.restEncoder,0),J3(s,r),s.toUint8Array()}return null},QQ=LQ;class Jm extends AQ{constructor({guid:e=l4e(),collectionid:n=null,gc:r=!0,gcFilter:o=()=>!0,meta:s=null,autoLoad:i=!1,shouldLoad:a=!0}={}){super(),this.gc=r,this.gcFilter=o,this.clientID=QQ(),this.guid=e,this.collectionid=n,this.share=new Map,this.store=new eX,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=i,this.meta=s,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=d6(c=>{this.on("load",()=>{this.isLoaded=!0,c(this)})});const l=()=>d6(c=>{const u=f=>{(f===void 0||f===!0)&&(this.off("sync",u),c())};this.on("sync",u)});this.on("sync",c=>{c===!1&&this.isSynced&&(this.whenSynced=l()),this.isSynced=c===void 0||c===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=l()}load(){const e=this._item;e!==null&&!this.shouldLoad&&dn(e.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Uf(this.subdocs).map(e=>e.guid))}transact(e,n=null){return dn(this,e,n)}get(e,n=qr){const r=Ic(this.share,e,()=>{const s=new n;return s._integrate(this,null),s}),o=r.constructor;if(n!==qr&&o!==n)if(o===qr){const s=new n;s._map=r._map,r._map.forEach(i=>{for(;i!==null;i=i.left)i.parent=s}),s._start=r._start;for(let i=s._start;i!==null;i=i.right)i.parent=s;return s._length=r._length,this.share.set(e,s),s._integrate(this,null),s}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,Up)}getText(e=""){return this.get(e,Ju)}getMap(e=""){return this.get(e,xm)}getXmlElement(e=""){return this.get(e,No)}getXmlFragment(e=""){return this.get(e,Hf)}toJSON(){const e={};return this.share.forEach((n,r)=>{e[r]=n.toJSON()}),e}destroy(){this.isDestroyed=!0,Uf(this.subdocs).forEach(n=>n.destroy());const e=this._item;if(e!==null){this._item=null;const n=e.content;n.doc=new Jm({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=e,dn(e.parent.doc,r=>{const o=n.doc;e.deleted||r.subdocsAdded.add(o),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class H4e{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=Tn(this.restDecoder),this.dsCurrVal}readDsLen(){const e=Tn(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class a_ extends H4e{constructor(e){super(e),this.keys=[],Tn(e),this.keyClockDecoder=new $S(Ks(e)),this.clientDecoder=new Eb(Ks(e)),this.leftClockDecoder=new $S(Ks(e)),this.rightClockDecoder=new $S(Ks(e)),this.infoDecoder=new u6(Ks(e),G1),this.stringDecoder=new r4e(Ks(e)),this.parentInfoDecoder=new u6(Ks(e),G1),this.typeRefDecoder=new Eb(Ks(e)),this.lenDecoder=new Eb(Ks(e))}readLeftID(){return new Bp(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Bp(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return s_(this.restDecoder)}readBuf(){return Ks(this.restDecoder)}readJSON(){return s_(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class z4e{constructor(){this.restEncoder=e2()}toUint8Array(){return $a(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){Vt(this.restEncoder,e)}writeDsLen(e){Vt(this.restEncoder,e)}}class W4e extends z4e{writeLeftID(e){Vt(this.restEncoder,e.client),Vt(this.restEncoder,e.clock)}writeRightID(e){Vt(this.restEncoder,e.client),Vt(this.restEncoder,e.clock)}writeClient(e){Vt(this.restEncoder,e)}writeInfo(e){sR(this.restEncoder,e)}writeString(e){$p(this.restEncoder,e)}writeParentInfo(e){Vt(this.restEncoder,e?1:0)}writeTypeRef(e){Vt(this.restEncoder,e)}writeLen(e){Vt(this.restEncoder,e)}writeAny(e){W1(this.restEncoder,e)}writeBuf(e){hs(this.restEncoder,e)}writeJSON(e){$p(this.restEncoder,JSON.stringify(e))}writeKey(e){$p(this.restEncoder,e)}}class G4e{constructor(){this.restEncoder=e2(),this.dsCurrVal=0}toUint8Array(){return $a(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const n=e-this.dsCurrVal;this.dsCurrVal=e,Vt(this.restEncoder,n)}writeDsLen(e){e===0&&Ps(),Vt(this.restEncoder,e-1),this.dsCurrVal+=e}}class r2 extends G4e{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new VS,this.clientEncoder=new Cb,this.leftClockEncoder=new VS,this.rightClockEncoder=new VS,this.infoEncoder=new a6(sR),this.stringEncoder=new KAe,this.parentInfoEncoder=new a6(sR),this.typeRefEncoder=new Cb,this.lenEncoder=new Cb}toUint8Array(){const e=e2();return Vt(e,0),hs(e,this.keyClockEncoder.toUint8Array()),hs(e,this.clientEncoder.toUint8Array()),hs(e,this.leftClockEncoder.toUint8Array()),hs(e,this.rightClockEncoder.toUint8Array()),hs(e,$a(this.infoEncoder)),hs(e,this.stringEncoder.toUint8Array()),hs(e,$a(this.parentInfoEncoder)),hs(e,this.typeRefEncoder.toUint8Array()),hs(e,this.lenEncoder.toUint8Array()),t2(e,$a(this.restEncoder)),$a(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){W1(this.restEncoder,e)}writeBuf(e){hs(this.restEncoder,e)}writeJSON(e){W1(this.restEncoder,e)}writeKey(e){const n=this.keyMap.get(e);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(n)}}const q4e=(t,e,n,r)=>{r=nl(r,e[0].id.clock);const o=rl(e,r);Vt(t.restEncoder,e.length-o),t.writeClient(n),Vt(t.restEncoder,r);const s=e[o];s.write(t,r-s.id.clock);for(let i=o+1;i<e.length;i++)e[i].write(t,0)},XQ=(t,e,n)=>{const r=new Map;n.forEach((o,s)=>{Jn(e,s)>o&&r.set(s,o)}),o2(e).forEach((o,s)=>{n.has(s)||r.set(s,0)}),Vt(t.restEncoder,r.size),Uf(r.entries()).sort((o,s)=>s[0]-o[0]).forEach(([o,s])=>{q4e(t,e.clients.get(o),o,s)})},K4e=(t,e)=>{const n=di(),r=Tn(t.restDecoder);for(let o=0;o<r;o++){const s=Tn(t.restDecoder),i=new Array(s),a=t.readClient();let l=Tn(t.restDecoder);n.set(a,{i:0,refs:i});for(let c=0;c<s;c++){const u=t.readInfo();switch(ZE&u){case 0:{const f=t.readLen();i[c]=new ni(yt(a,l),f),l+=f;break}case 10:{const f=Tn(t.restDecoder);i[c]=new Ui(yt(a,l),f),l+=f;break}default:{const f=(u&(lc|Es))===0,h=new wn(yt(a,l),null,(u&Es)===Es?t.readLeftID():null,null,(u&lc)===lc?t.readRightID():null,f?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,f&&(u&H1)===H1?t.readString():null,EX(t,u));i[c]=h,l+=h.length}}}}return n},Y4e=(t,e,n)=>{const r=[];let o=Uf(n.keys()).sort((p,m)=>p-m);if(o.length===0)return null;const s=()=>{if(o.length===0)return null;let p=n.get(o[o.length-1]);for(;p.refs.length===p.i;)if(o.pop(),o.length>0)p=n.get(o[o.length-1]);else return null;return p};let i=s();if(i===null)return null;const a=new eX,l=new Map,c=(p,m)=>{const y=l.get(p);(y==null||y>m)&&l.set(p,m)};let u=i.refs[i.i++];const f=new Map,h=()=>{for(const p of r){const m=p.id.client,y=n.get(m);y?(y.i--,a.clients.set(m,y.refs.slice(y.i)),n.delete(m),y.i=0,y.refs=[]):a.clients.set(m,[p]),o=o.filter(x=>x!==m)}r.length=0};for(;;){if(u.constructor!==Ui){const m=Ic(f,u.id.client,()=>Jn(e,u.id.client))-u.id.clock;if(m<0)r.push(u),c(u.id.client,u.id.clock-1),h();else{const y=u.getMissing(t,e);if(y!==null){r.push(u);const x=n.get(y)||{refs:[],i:0};if(x.refs.length===x.i)c(y,Jn(e,y)),h();else{u=x.refs[x.i++];continue}}else(m===0||m<u.length)&&(u.integrate(t,m),f.set(u.id.client,u.id.clock+u.length))}}if(r.length>0)u=r.pop();else if(i!==null&&i.i<i.refs.length)u=i.refs[i.i++];else{if(i=s(),i===null)break;u=i.refs[i.i++]}}if(a.clients.size>0){const p=new r2;return XQ(p,a,new Map),Vt(p.restEncoder,0),{missing:l,update:p.toUint8Array()}}return null},Q4e=(t,e)=>XQ(t,e.doc.store,e.beforeState),X4e=(t,e,n,r=new a_(t))=>dn(e,o=>{o.local=!1;let s=!1;const i=o.doc,a=i.store,l=K4e(r,i),c=Y4e(o,a,l),u=a.pendingStructs;if(u){for(const[h,p]of u.missing)if(p<Jn(a,h)){s=!0;break}if(c){for(const[h,p]of c.missing){const m=u.missing.get(h);(m==null||m>p)&&u.missing.set(h,p)}u.update=E6([u.update,c.update])}}else a.pendingStructs=c;const f=p6(r,o,a);if(a.pendingDs){const h=new a_(z3(a.pendingDs));Tn(h.restDecoder);const p=p6(h,o,a);f&&p?a.pendingDs=E6([f,p]):a.pendingDs=f||p}else a.pendingDs=f;if(s){const h=a.pendingStructs.update;a.pendingStructs=null,uR(o.doc,h)}},n,!1),uR=(t,e,n,r=a_)=>{const o=z3(e);X4e(o,t,n,new r(o))};class J4e{constructor(){this.l=[]}}const m6=()=>new J4e,g6=(t,e)=>t.l.push(e),y6=(t,e)=>{const n=t.l,r=n.length;t.l=n.filter(o=>e!==o),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},JQ=(t,e,n)=>q3(t.l,[e,n]);class Bp{constructor(e,n){this.client=e,this.clock=n}}const pp=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,yt=(t,e)=>new Bp(t,e),K1=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw Ps()},Y1=(t,e)=>{for(;e!==null;){if(e.parent===t)return!0;e=e.parent._item}return!1};class Q1{constructor(e,n,r,o=0){this.type=e,this.tname=n,this.item=r,this.assoc=o}}const Fy=t=>new Q1(t.type==null?null:yt(t.type.client,t.type.clock),t.tname??null,t.item==null?null:yt(t.item.client,t.item.clock),t.assoc==null?0:t.assoc);class Z4e{constructor(e,n,r=0){this.type=e,this.index=n,this.assoc=r}}const ePe=(t,e,n=0)=>new Z4e(t,e,n),C0=(t,e,n)=>{let r=null,o=null;return t._item===null?o=K1(t):r=yt(t._item.id.client,t._item.id.clock),new Q1(r,o,e,n)},FS=(t,e,n=0)=>{let r=t._start;if(n<0){if(e===0)return C0(t,null,n);e--}for(;r!==null;){if(!r.deleted&&r.countable){if(r.length>e)return C0(t,yt(r.id.client,r.id.clock+e),n);e-=r.length}if(r.right===null&&n<0)return C0(t,r.lastId,n);r=r.right}return C0(t,null,n)},tPe=(t,e)=>{const n=Fp(t,e),r=e.clock-n.id.clock;return{item:n,diff:r}},nPe=(t,e,n=!0)=>{const r=e.store,o=t.item,s=t.type,i=t.tname,a=t.assoc;let l=null,c=0;if(o!==null){if(Jn(r,o.client)<=o.clock)return null;const u=n?pR(r,o):tPe(r,o),f=u.item;if(!(f instanceof wn))return null;if(l=f.parent,l._item===null||!l._item.deleted){c=f.deleted||!f.countable?0:u.diff+(a>=0?0:1);let h=f.left;for(;h!==null;)!h.deleted&&h.countable&&(c+=h.length),h=h.left}}else{if(i!==null)l=e.get(i);else if(s!==null){if(Jn(r,s.client)<=s.clock)return null;const{item:u}=n?pR(r,s):{item:Fp(r,s)};if(u instanceof wn&&u.content instanceof ha)l=u.content.type;else return null}else throw Ps();a>=0?c=l._length:c=0}return ePe(l,c,t.assoc)},v6=(t,e)=>t===e||t!==null&&e!==null&&t.tname===e.tname&&pp(t.item,e.item)&&pp(t.type,e.type)&&t.assoc===e.assoc;class Z3{constructor(e,n){this.ds=e,this.sv=n}}const ZQ=(t,e)=>new Z3(t,e),US=t=>ZQ(F4e(t.store),o2(t.store)),Wd=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!Xm(e.ds,t.id),dR=(t,e)=>{const n=Ic(t.meta,dR,Ff),r=t.doc.store;n.has(e)||(e.sv.forEach((o,s)=>{o<Jn(r,s)&&Go(t,yt(s,o))}),Xu(t,e.ds,o=>{}),n.add(e))};class eX{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const o2=t=>{const e=new Map;return t.clients.forEach((n,r)=>{const o=n[n.length-1];e.set(r,o.id.clock+o.length)}),e},Jn=(t,e)=>{const n=t.clients.get(e);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},tX=(t,e)=>{let n=t.clients.get(e.id.client);if(n===void 0)n=[],t.clients.set(e.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==e.id.clock)throw Ps()}n.push(e)},rl=(t,e)=>{let n=0,r=t.length-1,o=t[r],s=o.id.clock;if(s===e)return r;let i=_c(e/(s+o.length-1)*r);for(;n<=r;){if(o=t[i],s=o.id.clock,s<=e){if(e<s+o.length)return i;n=i+1}else r=i-1;i=_c((n+r)/2)}throw Ps()},rPe=(t,e)=>{const n=t.clients.get(e.client);return n[rl(n,e.clock)]},Fp=rPe,fR=(t,e,n)=>{const r=rl(e,n),o=e[r];return o.id.clock<n&&o instanceof wn?(e.splice(r+1,0,f_(t,o,n-o.id.clock)),r+1):r},Go=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[fR(t,n,e.clock)]},w6=(t,e,n)=>{const r=e.clients.get(n.client),o=rl(r,n.clock),s=r[o];return n.clock!==s.id.clock+s.length-1&&s.constructor!==ni&&r.splice(o+1,0,f_(t,s,n.clock-s.id.clock+1)),s},oPe=(t,e,n)=>{const r=t.clients.get(e.id.client);r[rl(r,e.id.clock)]=n},nX=(t,e,n,r,o)=>{if(r===0)return;const s=n+r;let i=fR(t,e,n),a;do a=e[i++],s<a.id.clock+a.length&&fR(t,e,s),o(a);while(i<e.length&&e[i].id.clock<s)};class sPe{constructor(e,n,r){this.doc=e,this.deleteSet=new Qm,this.beforeState=o2(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const b6=(t,e)=>e.deleteSet.clients.size===0&&!TAe(e.afterState,(n,r)=>e.beforeState.get(r)!==n)?!1:(X3(e.deleteSet),Q4e(t,e),J3(t,e.deleteSet),!0),x6=(t,e,n)=>{const r=e._item;(r===null||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&Ic(t.changed,e,Ff).add(n)},kb=(t,e)=>{let n=t[e],r=t[e-1],o=e;for(;o>0;n=r,r=t[--o-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof wn&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const s=e-o;return s&&t.splice(e+1-s,s),s},iPe=(t,e,n)=>{for(const[r,o]of t.clients.entries()){const s=e.clients.get(r);for(let i=o.length-1;i>=0;i--){const a=o[i],l=a.clock+a.len;for(let c=rl(s,a.clock),u=s[c];c<s.length&&u.id.clock<l;u=s[++c]){const f=s[c];if(a.clock+a.len<=f.id.clock)break;f instanceof wn&&f.deleted&&!f.keep&&n(f)&&f.gc(e,!1)}}}},aPe=(t,e)=>{t.clients.forEach((n,r)=>{const o=e.clients.get(r);for(let s=n.length-1;s>=0;s--){const i=n[s],a=ac(o.length-1,1+rl(o,i.clock+i.len-1));for(let l=a,c=o[l];l>0&&c.id.clock>=i.clock;c=o[l])l-=1+kb(o,l)}})},rX=(t,e)=>{if(e<t.length){const n=t[e],r=n.doc,o=r.store,s=n.deleteSet,i=n._mergeStructs;try{X3(s),n.afterState=o2(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const a=[];n.changed.forEach((l,c)=>a.push(()=>{(c._item===null||!c._item.deleted)&&c._callObserver(n,l)})),a.push(()=>{n.changedParentTypes.forEach((l,c)=>{c._dEH.l.length>0&&(c._item===null||!c._item.deleted)&&(l=l.filter(u=>u.target._item===null||!u.target._item.deleted),l.forEach(u=>{u.currentTarget=c,u._path=null}),l.sort((u,f)=>u.path.length-f.path.length),JQ(c._dEH,l,n))})}),a.push(()=>r.emit("afterTransaction",[n,r])),q3(a,[]),n._needFormattingCleanup&&TPe(n)}finally{r.gc&&iPe(s,o,r.gcFilter),aPe(s,o),n.afterState.forEach((u,f)=>{const h=n.beforeState.get(f)||0;if(h!==u){const p=o.clients.get(f),m=nl(rl(p,h),1);for(let y=p.length-1;y>=m;)y-=1+kb(p,y)}});for(let u=i.length-1;u>=0;u--){const{client:f,clock:h}=i[u].id,p=o.clients.get(f),m=rl(p,h);m+1<p.length&&kb(p,m+1)>1||m>0&&kb(p,m)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(V4e(Y3,UQ,"[yjs] ",HQ,zQ,"Changed the client-id because another client seems to be using it."),r.clientID=QQ()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const u=new W4e;b6(u,n)&&r.emit("update",[u.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const u=new r2;b6(u,n)&&r.emit("updateV2",[u.toUint8Array(),n.origin,r,n])}const{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:c}=n;(a.size>0||c.size>0||l.size>0)&&(a.forEach(u=>{u.clientID=r.clientID,u.collectionid==null&&(u.collectionid=r.collectionid),r.subdocs.add(u)}),c.forEach(u=>r.subdocs.delete(u)),r.emit("subdocs",[{loaded:l,added:a,removed:c},r,n]),c.forEach(u=>u.destroy())),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):rX(t,e+1)}}},dn=(t,e,n=null,r=!0)=>{const o=t._transactionCleanups;let s=!1,i=null;t._transaction===null&&(s=!0,t._transaction=new sPe(t,n,r),o.push(t._transaction),o.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{i=e(t._transaction)}finally{if(s){const a=t._transaction===o[0];t._transaction=null,a&&rX(o,0)}}return i};class lPe{constructor(e,n){this.insertions=n,this.deletions=e,this.meta=new Map}}const _6=(t,e,n)=>{Xu(t,n.deletions,r=>{r instanceof wn&&e.scope.some(o=>Y1(o,r))&&o5(r,!1)})},C6=(t,e,n)=>{let r=null;const o=t.doc,s=t.scope;dn(o,a=>{for(;e.length>0&&t.currStackItem===null;){const l=o.store,c=e.pop(),u=new Set,f=[];let h=!1;Xu(a,c.insertions,p=>{if(p instanceof wn){if(p.redone!==null){let{item:m,diff:y}=pR(l,p.id);y>0&&(m=Go(a,yt(m.id.client,m.id.clock+y))),p=m}!p.deleted&&s.some(m=>Y1(m,p))&&f.push(p)}}),Xu(a,c.deletions,p=>{p instanceof wn&&s.some(m=>Y1(m,p))&&!Xm(c.insertions,p.id)&&u.add(p)}),u.forEach(p=>{h=CX(a,p,u,c.insertions,t.ignoreRemoteMapChanges,t)!==null||h});for(let p=f.length-1;p>=0;p--){const m=f[p];t.deleteFilter(m)&&(m.delete(a),h=!0)}t.currStackItem=h?c:null}a.changed.forEach((l,c)=>{l.has(null)&&c._searchMarker&&(c._searchMarker.length=0)}),r=a},t);const i=t.currStackItem;if(i!=null){const a=r.changedParentTypes;t.emit("stack-item-popped",[{stackItem:i,type:n,changedParentTypes:a,origin:t},t]),t.currStackItem=null}return i};class oX extends AQ{constructor(e,{captureTimeout:n=500,captureTransaction:r=l=>!0,deleteFilter:o=()=>!0,trackedOrigins:s=new Set([null]),ignoreRemoteMapChanges:i=!1,doc:a=rR(e)?e[0].doc:e.doc}={}){super(),this.scope=[],this.doc=a,this.addToScope(e),this.deleteFilter=o,s.add(this),this.trackedOrigins=s,this.captureTransaction=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=i,this.captureTimeout=n,this.afterTransactionHandler=l=>{if(!this.captureTransaction(l)||!this.scope.some(x=>l.changedParentTypes.has(x))||!this.trackedOrigins.has(l.origin)&&(!l.origin||!this.trackedOrigins.has(l.origin.constructor)))return;const c=this.undoing,u=this.redoing,f=c?this.redoStack:this.undoStack;c?this.stopCapturing():u||this.clear(!1,!0);const h=new Qm;l.afterState.forEach((x,b)=>{const C=l.beforeState.get(b)||0,E=x-C;E>0&&q1(h,b,C,E)});const p=c4e();let m=!1;if(this.lastChange>0&&p-this.lastChange<this.captureTimeout&&f.length>0&&!c&&!u){const x=f[f.length-1];x.deletions=cR([x.deletions,l.deleteSet]),x.insertions=cR([x.insertions,h])}else f.push(new lPe(l.deleteSet,h)),m=!0;!c&&!u&&(this.lastChange=p),Xu(l,l.deleteSet,x=>{x instanceof wn&&this.scope.some(b=>Y1(b,x))&&o5(x,!0)});const y=[{stackItem:f[f.length-1],origin:l.origin,type:c?"redo":"undo",changedParentTypes:l.changedParentTypes},this];m?this.emit("stack-item-added",y):this.emit("stack-item-updated",y)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){e=rR(e)?e:[e],e.forEach(n=>{this.scope.every(r=>r!==n)&&(n.doc!==this.doc&&GQ("[yjs#509] Not same Y.Doc"),this.scope.push(n))})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,n=!0){(e&&this.canUndo()||n&&this.canRedo())&&this.doc.transact(r=>{e&&(this.undoStack.forEach(o=>_6(r,this,o)),this.undoStack=[]),n&&(this.redoStack.forEach(o=>_6(r,this,o)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:n}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let e;try{e=C6(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){this.redoing=!0;let e;try{e=C6(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}function*cPe(t){const e=Tn(t.restDecoder);for(let n=0;n<e;n++){const r=Tn(t.restDecoder),o=t.readClient();let s=Tn(t.restDecoder);for(let i=0;i<r;i++){const a=t.readInfo();if(a===10){const l=Tn(t.restDecoder);yield new Ui(yt(o,s),l),s+=l}else if(ZE&a){const l=(a&(lc|Es))===0,c=new wn(yt(o,s),null,(a&Es)===Es?t.readLeftID():null,null,(a&lc)===lc?t.readRightID():null,l?t.readParentInfo()?t.readString():t.readLeftID():null,l&&(a&H1)===H1?t.readString():null,EX(t,a));yield c,s+=c.length}else{const l=t.readLen();yield new ni(yt(o,s),l),s+=l}}}}class uPe{constructor(e,n){this.gen=cPe(e),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Ui);return this.curr}}class dPe{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const fPe=(t,e)=>{if(t.constructor===ni){const{client:n,clock:r}=t.id;return new ni(yt(n,r+e),t.length-e)}else if(t.constructor===Ui){const{client:n,clock:r}=t.id;return new Ui(yt(n,r+e),t.length-e)}else{const n=t,{client:r,clock:o}=n.id;return new wn(yt(r,o+e),null,yt(r,o+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},E6=(t,e=a_,n=r2)=>{if(t.length===1)return t[0];const r=t.map(u=>new e(z3(u)));let o=r.map(u=>new uPe(u,!0)),s=null;const i=new n,a=new dPe(i);for(;o=o.filter(h=>h.curr!==null),o.sort((h,p)=>{if(h.curr.id.client===p.curr.id.client){const m=h.curr.id.clock-p.curr.id.clock;return m===0?h.curr.constructor===p.curr.constructor?0:h.curr.constructor===Ui?1:-1:m}else return p.curr.id.client-h.curr.id.client}),o.length!==0;){const u=o[0],f=u.curr.id.client;if(s!==null){let h=u.curr,p=!1;for(;h!==null&&h.id.clock+h.length<=s.struct.id.clock+s.struct.length&&h.id.client>=s.struct.id.client;)h=u.next(),p=!0;if(h===null||h.id.client!==f||p&&h.id.clock>s.struct.id.clock+s.struct.length)continue;if(f!==s.struct.id.client)Wg(a,s.struct,s.offset),s={struct:h,offset:0},u.next();else if(s.struct.id.clock+s.struct.length<h.id.clock)if(s.struct.constructor===Ui)s.struct.length=h.id.clock+h.length-s.struct.id.clock;else{Wg(a,s.struct,s.offset);const m=h.id.clock-s.struct.id.clock-s.struct.length;s={struct:new Ui(yt(f,s.struct.id.clock+s.struct.length),m),offset:0}}else{const m=s.struct.id.clock+s.struct.length-h.id.clock;m>0&&(s.struct.constructor===Ui?s.struct.length-=m:h=fPe(h,m)),s.struct.mergeWith(h)||(Wg(a,s.struct,s.offset),s={struct:h,offset:0},u.next())}}else s={struct:u.curr,offset:0},u.next();for(let h=u.curr;h!==null&&h.id.client===f&&h.id.clock===s.struct.id.clock+s.struct.length&&h.constructor!==Ui;h=u.next())Wg(a,s.struct,s.offset),s={struct:h,offset:0}}s!==null&&(Wg(a,s.struct,s.offset),s=null),hPe(a);const l=r.map(u=>U4e(u)),c=cR(l);return J3(i,c),i.toUint8Array()},sX=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:$a(t.encoder.restEncoder)}),t.encoder.restEncoder=e2(),t.written=0)},Wg=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&sX(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),Vt(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},hPe=t=>{sX(t);const e=t.encoder.restEncoder;Vt(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const r=t.clientStructs[n];Vt(e,r.written),t2(e,r.restEncoder)}},k6="You must not compute changes after the event-handler fired.";class s2{constructor(e,n){this.target=e,this.currentTarget=e,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=pPe(this.currentTarget,this.target))}deletes(e){return Xm(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw Qu(k6);const e=new Map,n=this.target;this.transaction.changed.get(n).forEach(o=>{if(o!==null){const s=n._map.get(o);let i,a;if(this.adds(s)){let l=s.left;for(;l!==null&&this.adds(l);)l=l.left;if(this.deletes(s))if(l!==null&&this.deletes(l))i="delete",a=OS(l.content.getContent());else return;else l!==null&&this.deletes(l)?(i="update",a=OS(l.content.getContent())):(i="add",a=void 0)}else if(this.deletes(s))i="delete",a=OS(s.content.getContent());else return;e.set(o,{action:i,oldValue:a})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw Qu(k6);const n=this.target,r=Ff(),o=Ff(),s=[];if(e={added:r,deleted:o,delta:s,keys:this.keys},this.transaction.changed.get(n).has(null)){let a=null;const l=()=>{a&&s.push(a)};for(let c=n._start;c!==null;c=c.right)c.deleted?this.deletes(c)&&!this.adds(c)&&((a===null||a.delete===void 0)&&(l(),a={delete:0}),a.delete+=c.length,o.add(c)):this.adds(c)?((a===null||a.insert===void 0)&&(l(),a={insert:[]}),a.insert=a.insert.concat(c.content.getContent()),r.add(c)):((a===null||a.retain===void 0)&&(l(),a={retain:0}),a.retain+=c.length);a!==null&&a.retain===void 0&&l()}this._changes=e}return e}}const pPe=(t,e)=>{const n=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)n.unshift(e._item.parentSub);else{let r=0,o=e._item.parent._start;for(;o!==e._item&&o!==null;)!o.deleted&&o.countable&&(r+=o.length),o=o.right;n.unshift(r)}e=e._item.parent}return n},po=()=>{GQ("Invalid access: Add Yjs type to a document before reading data.")},iX=80;let e5=0;class mPe{constructor(e,n){e.marker=!0,this.p=e,this.index=n,this.timestamp=e5++}}const gPe=t=>{t.timestamp=e5++},aX=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=e5++},yPe=(t,e,n)=>{if(t.length>=iX){const r=t.reduce((o,s)=>o.timestamp<s.timestamp?o:s);return aX(r,e,n),r}else{const r=new mPe(e,n);return t.push(r),r}},i2=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;const n=t._searchMarker.length===0?null:t._searchMarker.reduce((s,i)=>_b(e-s.index)<_b(e-i.index)?s:i);let r=t._start,o=0;for(n!==null&&(r=n.p,o=n.index,gPe(n));r.right!==null&&o<e;){if(!r.deleted&&r.countable){if(e<o+r.length)break;o+=r.length}r=r.right}for(;r.left!==null&&o>e;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);return n!==null&&_b(n.index-o)<r.parent.length/iX?(aX(n,r,o),n):yPe(t._searchMarker,r,o)},X1=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){const o=t[r];if(n>0){let s=o.p;for(s.marker=!1;s&&(s.deleted||!s.countable);)s=s.left,s&&!s.deleted&&s.countable&&(o.index-=s.length);if(s===null||s.marker===!0){t.splice(r,1);continue}o.p=s,s.marker=!0}(e<o.index||n>0&&e===o.index)&&(o.index=nl(e,o.index+n))}},a2=(t,e,n)=>{const r=t,o=e.changedParentTypes;for(;Ic(o,t,()=>[]).push(n),t._item!==null;)t=t._item.parent;JQ(r._eH,n,e)};class qr{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=m6(),this._dEH=m6(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,n){this.doc=e,this._item=n}_copy(){throw Yi()}clone(){throw Yi()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,n){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){g6(this._eH,e)}observeDeep(e){g6(this._dEH,e)}unobserve(e){y6(this._eH,e)}unobserveDeep(e){y6(this._dEH,e)}toJSON(){}}const lX=(t,e,n)=>{t.doc??po(),e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e;const o=[];let s=t._start;for(;s!==null&&r>0;){if(s.countable&&!s.deleted){const i=s.content.getContent();if(i.length<=e)e-=i.length;else{for(let a=e;a<i.length&&r>0;a++)o.push(i[a]),r--;e=0}}s=s.right}return o},cX=t=>{t.doc??po();const e=[];let n=t._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let o=0;o<r.length;o++)e.push(r[o])}n=n.right}return e},uX=(t,e)=>{const n=[];let r=t._start;for(;r!==null;){if(r.countable&&Wd(r,e)){const o=r.content.getContent();for(let s=0;s<o.length;s++)n.push(o[s])}r=r.right}return n},J1=(t,e)=>{let n=0,r=t._start;for(t.doc??po();r!==null;){if(r.countable&&!r.deleted){const o=r.content.getContent();for(let s=0;s<o.length;s++)e(o[s],n++,t)}r=r.right}},dX=(t,e)=>{const n=[];return J1(t,(r,o)=>{n.push(e(r,o,t))}),n},vPe=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}const o=n[r++];return n.length<=r&&(n=null),{done:!1,value:o}}}},fX=(t,e)=>{t.doc??po();const n=i2(t,e);let r=t._start;for(n!==null&&(r=n.p,e-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},l_=(t,e,n,r)=>{let o=n;const s=t.doc,i=s.clientID,a=s.store,l=n===null?e._start:n.right;let c=[];const u=()=>{c.length>0&&(o=new wn(yt(i,Jn(a,i)),o,o&&o.lastId,l,l&&l.id,e,null,new zf(c)),o.integrate(t,0),c=[])};r.forEach(f=>{if(f===null)c.push(f);else switch(f.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(f);break;default:switch(u(),f.constructor){case Uint8Array:case ArrayBuffer:o=new wn(yt(i,Jn(a,i)),o,o&&o.lastId,l,l&&l.id,e,null,new nw(new Uint8Array(f))),o.integrate(t,0);break;case Jm:o=new wn(yt(i,Jn(a,i)),o,o&&o.lastId,l,l&&l.id,e,null,new rw(f)),o.integrate(t,0);break;default:if(f instanceof qr)o=new wn(yt(i,Jn(a,i)),o,o&&o.lastId,l,l&&l.id,e,null,new ha(f)),o.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),u()},hX=()=>Qu("Length exceeded!"),pX=(t,e,n,r)=>{if(n>e._length)throw hX();if(n===0)return e._searchMarker&&X1(e._searchMarker,n,r.length),l_(t,e,null,r);const o=n,s=i2(e,n);let i=e._start;for(s!==null&&(i=s.p,n-=s.index,n===0&&(i=i.prev,n+=i&&i.countable&&!i.deleted?i.length:0));i!==null;i=i.right)if(!i.deleted&&i.countable){if(n<=i.length){n<i.length&&Go(t,yt(i.id.client,i.id.clock+n));break}n-=i.length}return e._searchMarker&&X1(e._searchMarker,o,r.length),l_(t,e,i,r)},wPe=(t,e,n)=>{let o=(e._searchMarker||[]).reduce((s,i)=>i.index>s.index?i:s,{index:0,p:e._start}).p;if(o)for(;o.right;)o=o.right;return l_(t,e,o,n)},mX=(t,e,n,r)=>{if(r===0)return;const o=n,s=r,i=i2(e,n);let a=e._start;for(i!==null&&(a=i.p,n-=i.index);a!==null&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&Go(t,yt(a.id.client,a.id.clock+n)),n-=a.length);for(;r>0&&a!==null;)a.deleted||(r<a.length&&Go(t,yt(a.id.client,a.id.clock+r)),a.delete(t),r-=a.length),a=a.right;if(r>0)throw hX();e._searchMarker&&X1(e._searchMarker,o,-s+r)},c_=(t,e,n)=>{const r=e._map.get(n);r!==void 0&&r.delete(t)},t5=(t,e,n,r)=>{const o=e._map.get(n)||null,s=t.doc,i=s.clientID;let a;if(r==null)a=new zf([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:a=new zf([r]);break;case Uint8Array:a=new nw(r);break;case Jm:a=new rw(r);break;default:if(r instanceof qr)a=new ha(r);else throw new Error("Unexpected content type")}new wn(yt(i,Jn(s.store,i)),o,o&&o.lastId,null,null,e,n,a).integrate(t,0)},n5=(t,e)=>{t.doc??po();const n=t._map.get(e);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},gX=t=>{const e={};return t.doc??po(),t._map.forEach((n,r)=>{n.deleted||(e[r]=n.content.getContent()[n.length-1])}),e},yX=(t,e)=>{t.doc??po();const n=t._map.get(e);return n!==void 0&&!n.deleted},bPe=(t,e)=>{const n={};return t._map.forEach((r,o)=>{let s=r;for(;s!==null&&(!e.sv.has(s.id.client)||s.id.clock>=(e.sv.get(s.id.client)||0));)s=s.left;s!==null&&Wd(s,e)&&(n[o]=s.content.getContent()[s.length-1])}),n},E0=t=>(t.doc??po(),$4e(t._map.entries(),e=>!e[1].deleted));class xPe extends s2{}class Up extends qr{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const n=new Up;return n.push(e),n}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Up}clone(){const e=new Up;return e.insert(0,this.toArray().map(n=>n instanceof qr?n.clone():n)),e}get length(){return this.doc??po(),this._length}_callObserver(e,n){super._callObserver(e,n),a2(this,e,new xPe(this,e))}insert(e,n){this.doc!==null?dn(this.doc,r=>{pX(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}push(e){this.doc!==null?dn(this.doc,n=>{wPe(n,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,n=1){this.doc!==null?dn(this.doc,r=>{mX(r,this,e,n)}):this._prelimContent.splice(e,n)}get(e){return fX(this,e)}toArray(){return cX(this)}slice(e=0,n=this.length){return lX(this,e,n)}toJSON(){return this.map(e=>e instanceof qr?e.toJSON():e)}map(e){return dX(this,e)}forEach(e){J1(this,e)}[Symbol.iterator](){return vPe(this)}_write(e){e.writeTypeRef(GPe)}}const _Pe=t=>new Up;class CPe extends s2{constructor(e,n,r){super(e,n),this.keysChanged=r}}class xm extends qr{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,n){super._integrate(e,n),this._prelimContent.forEach((r,o)=>{this.set(o,r)}),this._prelimContent=null}_copy(){return new xm}clone(){const e=new xm;return this.forEach((n,r)=>{e.set(r,n instanceof qr?n.clone():n)}),e}_callObserver(e,n){a2(this,e,new CPe(this,e,n))}toJSON(){this.doc??po();const e={};return this._map.forEach((n,r)=>{if(!n.deleted){const o=n.content.getContent()[n.length-1];e[r]=o instanceof qr?o.toJSON():o}}),e}get size(){return[...E0(this)].length}keys(){return BS(E0(this),e=>e[0])}values(){return BS(E0(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return BS(E0(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??po(),this._map.forEach((n,r)=>{n.deleted||e(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?dn(this.doc,n=>{c_(n,this,e)}):this._prelimContent.delete(e)}set(e,n){return this.doc!==null?dn(this.doc,r=>{t5(r,this,e,n)}):this._prelimContent.set(e,n),n}get(e){return n5(this,e)}has(e){return yX(this,e)}clear(){this.doc!==null?dn(this.doc,e=>{this.forEach(function(n,r,o){c_(e,o,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(qPe)}}const EPe=t=>new xm,yu=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&v4e(t,e);class hR{constructor(e,n,r,o){this.left=e,this.right=n,this.index=r,this.currentAttributes=o}forward(){switch(this.right===null&&Ps(),this.right.content.constructor){case dr:this.right.deleted||Zm(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const S6=(t,e,n)=>{for(;e.right!==null&&n>0;){switch(e.right.content.constructor){case dr:e.right.deleted||Zm(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&Go(t,yt(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},k0=(t,e,n,r)=>{const o=new Map,s=r?i2(e,n):null;if(s){const i=new hR(s.p.left,s.p,s.index,o);return S6(t,i,n-s.index)}else{const i=new hR(null,e._start,0,o);return S6(t,i,n)}},vX=(t,e,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===dr&&yu(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const o=t.doc,s=o.clientID;r.forEach((i,a)=>{const l=n.left,c=n.right,u=new wn(yt(s,Jn(o.store,s)),l,l&&l.lastId,c,c&&c.id,e,null,new dr(a,i));u.integrate(t,0),n.right=u,n.forward()})},Zm=(t,e)=>{const{key:n,value:r}=e;r===null?t.delete(n):t.set(n,r)},wX=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===dr&&yu(e[t.right.content.key]??null,t.right.content.value)))break;t.forward()}},bX=(t,e,n,r)=>{const o=t.doc,s=o.clientID,i=new Map;for(const a in r){const l=r[a],c=n.currentAttributes.get(a)??null;if(!yu(c,l)){i.set(a,c);const{left:u,right:f}=n;n.right=new wn(yt(s,Jn(o.store,s)),u,u&&u.lastId,f,f&&f.id,e,null,new dr(a,l)),n.right.integrate(t,0),n.forward()}}return i},HS=(t,e,n,r,o)=>{n.currentAttributes.forEach((h,p)=>{o[p]===void 0&&(o[p]=null)});const s=t.doc,i=s.clientID;wX(n,o);const a=bX(t,e,n,o),l=r.constructor===String?new ia(r):r instanceof qr?new ha(r):new nh(r);let{left:c,right:u,index:f}=n;e._searchMarker&&X1(e._searchMarker,n.index,l.getLength()),u=new wn(yt(i,Jn(s.store,i)),c,c&&c.lastId,u,u&&u.id,e,null,l),u.integrate(t,0),n.right=u,n.index=f,n.forward(),vX(t,e,n,a)},T6=(t,e,n,r,o)=>{const s=t.doc,i=s.clientID;wX(n,o);const a=bX(t,e,n,o);e:for(;n.right!==null&&(r>0||a.size>0&&(n.right.deleted||n.right.content.constructor===dr));){if(!n.right.deleted)switch(n.right.content.constructor){case dr:{const{key:l,value:c}=n.right.content,u=o[l];if(u!==void 0){if(yu(u,c))a.delete(l);else{if(r===0)break e;a.set(l,c)}n.right.delete(t)}else n.currentAttributes.set(l,c);break}default:r<n.right.length&&Go(t,yt(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let l="";for(;r>0;r--)l+=`
`;n.right=new wn(yt(i,Jn(s.store,i)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new ia(l)),n.right.integrate(t,0),n.forward()}vX(t,e,n,a)},xX=(t,e,n,r,o)=>{let s=e;const i=di();for(;s&&(!s.countable||s.deleted);){if(!s.deleted&&s.content.constructor===dr){const c=s.content;i.set(c.key,c)}s=s.right}let a=0,l=!1;for(;e!==s;){if(n===e&&(l=!0),!e.deleted){const c=e.content;switch(c.constructor){case dr:{const{key:u,value:f}=c,h=r.get(u)??null;(i.get(u)!==c||h===f)&&(e.delete(t),a++,!l&&(o.get(u)??null)===f&&h!==f&&(h===null?o.delete(u):o.set(u,h))),!l&&!e.deleted&&Zm(o,c);break}}}e=e.right}return a},kPe=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const n=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===dr){const r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},SPe=t=>{let e=0;return dn(t.doc,n=>{let r=t._start,o=t._start,s=di();const i=nR(s);for(;o;){if(o.deleted===!1)switch(o.content.constructor){case dr:Zm(i,o.content);break;default:e+=xX(n,r,o,s,i),s=nR(i),r=o;break}o=o.right}}),e},TPe=t=>{const e=new Set,n=t.doc;for(const[r,o]of t.afterState.entries()){const s=t.beforeState.get(r)||0;o!==s&&nX(t,n.store.clients.get(r),s,o,i=>{!i.deleted&&i.content.constructor===dr&&i.constructor!==ni&&e.add(i.parent)})}dn(n,r=>{Xu(t,t.deleteSet,o=>{if(o instanceof ni||!o.parent._hasFormatting||e.has(o.parent))return;const s=o.parent;o.content.constructor===dr?e.add(s):kPe(r,o)});for(const o of e)SPe(o)})},N6=(t,e,n)=>{const r=n,o=nR(e.currentAttributes),s=e.right;for(;n>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case ha:case nh:case ia:n<e.right.length&&Go(t,yt(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}s&&xX(t,s,e.right,o,e.currentAttributes);const i=(e.left||e.right).parent;return i._searchMarker&&X1(i._searchMarker,e.index,-r+n),e};class NPe extends s2{constructor(e,n,r){super(e,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(o=>{o===null?this.childListChanged=!0:this.keysChanged.add(o)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,n=[];dn(e,r=>{const o=new Map,s=new Map;let i=this.target._start,a=null;const l={};let c="",u=0,f=0;const h=()=>{if(a!==null){let p=null;switch(a){case"delete":f>0&&(p={delete:f}),f=0;break;case"insert":(typeof c=="object"||c.length>0)&&(p={insert:c},o.size>0&&(p.attributes={},o.forEach((m,y)=>{m!==null&&(p.attributes[y]=m)}))),c="";break;case"retain":u>0&&(p={retain:u},m4e(l)||(p.attributes=h4e({},l))),u=0;break}p&&n.push(p),a=null}};for(;i!==null;){switch(i.content.constructor){case ha:case nh:this.adds(i)?this.deletes(i)||(h(),a="insert",c=i.content.getContent()[0],h()):this.deletes(i)?(a!=="delete"&&(h(),a="delete"),f+=1):i.deleted||(a!=="retain"&&(h(),a="retain"),u+=1);break;case ia:this.adds(i)?this.deletes(i)||(a!=="insert"&&(h(),a="insert"),c+=i.content.str):this.deletes(i)?(a!=="delete"&&(h(),a="delete"),f+=i.length):i.deleted||(a!=="retain"&&(h(),a="retain"),u+=i.length);break;case dr:{const{key:p,value:m}=i.content;if(this.adds(i)){if(!this.deletes(i)){const y=o.get(p)??null;yu(y,m)?m!==null&&i.delete(r):(a==="retain"&&h(),yu(m,s.get(p)??null)?delete l[p]:l[p]=m)}}else if(this.deletes(i)){s.set(p,m);const y=o.get(p)??null;yu(y,m)||(a==="retain"&&h(),l[p]=y)}else if(!i.deleted){s.set(p,m);const y=l[p];y!==void 0&&(yu(y,m)?y!==null&&i.delete(r):(a==="retain"&&h(),m===null?delete l[p]:l[p]=m))}i.deleted||(a==="insert"&&h(),Zm(o,i.content));break}}i=i.right}for(h();n.length>0;){const p=n[n.length-1];if(p.retain!==void 0&&p.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class Ju extends qr{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??po(),this._length}_integrate(e,n){super._integrate(e,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new Ju}clone(){const e=new Ju;return e.applyDelta(this.toDelta()),e}_callObserver(e,n){super._callObserver(e,n);const r=new NPe(this,e,n);a2(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??po();let e="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===ia&&(e+=n.content.str),n=n.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:n=!0}={}){this.doc!==null?dn(this.doc,r=>{const o=new hR(null,this._start,0,new Map);for(let s=0;s<e.length;s++){const i=e[s];if(i.insert!==void 0){const a=!n&&typeof i.insert=="string"&&s===e.length-1&&o.right===null&&i.insert.slice(-1)===`
`?i.insert.slice(0,-1):i.insert;(typeof a!="string"||a.length>0)&&HS(r,this,o,a,i.attributes||{})}else i.retain!==void 0?T6(r,this,o,i.retain,i.attributes||{}):i.delete!==void 0&&N6(r,o,i.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,n,r){this.doc??po();const o=[],s=new Map,i=this.doc;let a="",l=this._start;function c(){if(a.length>0){const f={};let h=!1;s.forEach((m,y)=>{h=!0,f[y]=m});const p={insert:a};h&&(p.attributes=f),o.push(p),a=""}}const u=()=>{for(;l!==null;){if(Wd(l,e)||n!==void 0&&Wd(l,n))switch(l.content.constructor){case ia:{const f=s.get("ychange");e!==void 0&&!Wd(l,e)?(f===void 0||f.user!==l.id.client||f.type!=="removed")&&(c(),s.set("ychange",r?r("removed",l.id):{type:"removed"})):n!==void 0&&!Wd(l,n)?(f===void 0||f.user!==l.id.client||f.type!=="added")&&(c(),s.set("ychange",r?r("added",l.id):{type:"added"})):f!==void 0&&(c(),s.delete("ychange")),a+=l.content.str;break}case ha:case nh:{c();const f={insert:l.content.getContent()[0]};if(s.size>0){const h={};f.attributes=h,s.forEach((p,m)=>{h[m]=p})}o.push(f);break}case dr:Wd(l,e)&&(c(),Zm(s,l.content));break}l=l.right}c()};return e||n?dn(i,f=>{e&&dR(f,e),n&&dR(f,n),u()},"cleanup"):u(),o}insert(e,n,r){if(n.length<=0)return;const o=this.doc;o!==null?dn(o,s=>{const i=k0(s,this,e,!r);r||(r={},i.currentAttributes.forEach((a,l)=>{r[l]=a})),HS(s,this,i,n,r)}):this._pending.push(()=>this.insert(e,n,r))}insertEmbed(e,n,r){const o=this.doc;o!==null?dn(o,s=>{const i=k0(s,this,e,!r);HS(s,this,i,n,r||{})}):this._pending.push(()=>this.insertEmbed(e,n,r||{}))}delete(e,n){if(n===0)return;const r=this.doc;r!==null?dn(r,o=>{N6(o,k0(o,this,e,!0),n)}):this._pending.push(()=>this.delete(e,n))}format(e,n,r){if(n===0)return;const o=this.doc;o!==null?dn(o,s=>{const i=k0(s,this,e,!1);i.right!==null&&T6(s,this,i,n,r)}):this._pending.push(()=>this.format(e,n,r))}removeAttribute(e){this.doc!==null?dn(this.doc,n=>{c_(n,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,n){this.doc!==null?dn(this.doc,r=>{t5(r,this,e,n)}):this._pending.push(()=>this.setAttribute(e,n))}getAttribute(e){return n5(this,e)}getAttributes(){return gX(this)}_write(e){e.writeTypeRef(KPe)}}const IPe=t=>new Ju;class zS{constructor(e,n=()=>!0){this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??po()}[Symbol.iterator](){return this}next(){let e=this._currentNode,n=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(n)))do if(n=e.content.type,!e.deleted&&(n.constructor===No||n.constructor===Hf)&&n._start!==null)e=n._start;else for(;e!==null;)if(e.right!==null){e=e.right;break}else e.parent===this._root?e=null:e=e.parent._item;while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class Hf extends qr{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Hf}clone(){const e=new Hf;return e.insert(0,this.toArray().map(n=>n instanceof qr?n.clone():n)),e}get length(){return this.doc??po(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new zS(this,e)}querySelector(e){e=e.toUpperCase();const r=new zS(this,o=>o.nodeName&&o.nodeName.toUpperCase()===e).next();return r.done?null:r.value}querySelectorAll(e){return e=e.toUpperCase(),Uf(new zS(this,n=>n.nodeName&&n.nodeName.toUpperCase()===e))}_callObserver(e,n){a2(this,e,new PPe(this,n,e))}toString(){return dX(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,n={},r){const o=e.createDocumentFragment();return r!==void 0&&r._createAssociation(o,this),J1(this,s=>{o.insertBefore(s.toDOM(e,n,r),null)}),o}insert(e,n){this.doc!==null?dn(this.doc,r=>{pX(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}insertAfter(e,n){if(this.doc!==null)dn(this.doc,r=>{const o=e&&e instanceof qr?e._item:e;l_(r,this,o,n)});else{const r=this._prelimContent,o=e===null?0:r.findIndex(s=>s===e)+1;if(o===0&&e!==null)throw Qu("Reference item not found");r.splice(o,0,...n)}}delete(e,n=1){this.doc!==null?dn(this.doc,r=>{mX(r,this,e,n)}):this._prelimContent.splice(e,n)}toArray(){return cX(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return fX(this,e)}slice(e=0,n=this.length){return lX(this,e,n)}forEach(e){J1(this,e)}_write(e){e.writeTypeRef(QPe)}}const RPe=t=>new Hf;class No extends Hf{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,n){super._integrate(e,n),this._prelimAttrs.forEach((r,o)=>{this.setAttribute(o,r)}),this._prelimAttrs=null}_copy(){return new No(this.nodeName)}clone(){const e=new No(this.nodeName),n=this.getAttributes();return p4e(n,(r,o)=>{typeof r=="string"&&e.setAttribute(o,r)}),e.insert(0,this.toArray().map(r=>r instanceof qr?r.clone():r)),e}toString(){const e=this.getAttributes(),n=[],r=[];for(const a in e)r.push(a);r.sort();const o=r.length;for(let a=0;a<o;a++){const l=r[a];n.push(l+'="'+e[l]+'"')}const s=this.nodeName.toLocaleLowerCase(),i=n.length>0?" "+n.join(" "):"";return`<${s}${i}>${super.toString()}</${s}>`}removeAttribute(e){this.doc!==null?dn(this.doc,n=>{c_(n,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,n){this.doc!==null?dn(this.doc,r=>{t5(r,this,e,n)}):this._prelimAttrs.set(e,n)}getAttribute(e){return n5(this,e)}hasAttribute(e){return yX(this,e)}getAttributes(e){return e?bPe(this,e):gX(this)}toDOM(e=document,n={},r){const o=e.createElement(this.nodeName),s=this.getAttributes();for(const i in s){const a=s[i];typeof a=="string"&&o.setAttribute(i,a)}return J1(this,i=>{o.appendChild(i.toDOM(e,n,r))}),r!==void 0&&r._createAssociation(o,this),o}_write(e){e.writeTypeRef(YPe),e.writeKey(this.nodeName)}}const APe=t=>new No(t.readKey());class PPe extends s2{constructor(e,n,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(o=>{o===null?this.childListChanged=!0:this.attributesChanged.add(o)})}}class u_ extends xm{constructor(e){super(),this.hookName=e}_copy(){return new u_(this.hookName)}clone(){const e=new u_(this.hookName);return this.forEach((n,r)=>{e.set(r,n)}),e}toDOM(e=document,n={},r){const o=n[this.hookName];let s;return o!==void 0?s=o.createDom(this):s=document.createElement(this.hookName),s.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(s,this),s}_write(e){e.writeTypeRef(XPe),e.writeKey(this.hookName)}}const MPe=t=>new u_(t.readKey());class ks extends Ju{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new ks}clone(){const e=new ks;return e.applyDelta(this.toDelta()),e}toDOM(e=document,n,r){const o=e.createTextNode(this.toString());return r!==void 0&&r._createAssociation(o,this),o}toString(){return this.toDelta().map(e=>{const n=[];for(const o in e.attributes){const s=[];for(const i in e.attributes[o])s.push({key:i,value:e.attributes[o][i]});s.sort((i,a)=>i.key<a.key?-1:1),n.push({nodeName:o,attrs:s})}n.sort((o,s)=>o.nodeName<s.nodeName?-1:1);let r="";for(let o=0;o<n.length;o++){const s=n[o];r+=`<${s.nodeName}`;for(let i=0;i<s.attrs.length;i++){const a=s.attrs[i];r+=` ${a.key}="${a.value}"`}r+=">"}r+=e.insert;for(let o=n.length-1;o>=0;o--)r+=`</${n[o].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(JPe)}}const DPe=t=>new ks;class r5{constructor(e,n){this.id=e,this.length=n}get deleted(){throw Yi()}mergeWith(e){return!1}write(e,n,r){throw Yi()}integrate(e,n){throw Yi()}}const OPe=0;class ni extends r5{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){n>0&&(this.id.clock+=n,this.length-=n),tX(e.doc.store,this)}write(e,n){e.writeInfo(OPe),e.writeLen(this.length-n)}getMissing(e,n){return null}}class nw{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new nw(this.content)}splice(e){throw Yi()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeBuf(this.content)}getRef(){return 3}}const LPe=t=>new nw(t.readBuf());class Z1{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Z1(this.len)}splice(e){const n=new Z1(this.len-e);return this.len=e,n}mergeWith(e){return this.len+=e.len,!0}integrate(e,n){q1(e.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(e){}gc(e){}write(e,n){e.writeLen(this.len-n)}getRef(){return 1}}const jPe=t=>new Z1(t.readLen()),_X=(t,e)=>new Jm({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class rw{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const n={};this.opts=n,e.gc||(n.gc=!1),e.autoLoad&&(n.autoLoad=!0),e.meta!==null&&(n.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new rw(_X(this.doc.guid,this.opts))}splice(e){throw Yi()}mergeWith(e){return!1}integrate(e,n){this.doc._item=n,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,n){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const VPe=t=>new rw(_X(t.readString(),t.readAny()));class nh{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new nh(this.embed)}splice(e){throw Yi()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeJSON(this.embed)}getRef(){return 5}}const $Pe=t=>new nh(t.readJSON());class dr{constructor(e,n){this.key=e,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new dr(this.key,this.value)}splice(e){throw Yi()}mergeWith(e){return!1}integrate(e,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,n){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const BPe=t=>new dr(t.readKey(),t.readJSON());class d_{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new d_(this.arr)}splice(e){const n=new d_(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let o=n;o<r;o++){const s=this.arr[o];e.writeString(s===void 0?"undefined":JSON.stringify(s))}}getRef(){return 2}}const FPe=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++){const o=t.readString();o==="undefined"?n.push(void 0):n.push(JSON.parse(o))}return new d_(n)},UPe=i_("node_env")==="development";class zf{constructor(e){this.arr=e,UPe&&$Q(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new zf(this.arr)}splice(e){const n=new zf(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let o=n;o<r;o++){const s=this.arr[o];e.writeAny(s)}}getRef(){return 8}}const HPe=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new zf(n)};class ia{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new ia(this.str)}splice(e){const n=new ia(this.str.slice(e));this.str=this.str.slice(0,e);const r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"�",n.str="�"+n.str.slice(1)),n}mergeWith(e){return this.str+=e.str,!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const zPe=t=>new ia(t.readString()),WPe=[_Pe,EPe,IPe,APe,RPe,MPe,DPe],GPe=0,qPe=1,KPe=2,YPe=3,QPe=4,XPe=5,JPe=6;class ha{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new ha(this.type._copy())}splice(e){throw Yi()}mergeWith(e){return!1}integrate(e,n){this.type._integrate(e.doc,n)}delete(e){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e)}),e.changed.delete(this.type)}gc(e){let n=this.type._start;for(;n!==null;)n.gc(e,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(e,!0),r=r.left}),this.type._map=new Map}write(e,n){this.type._write(e)}getRef(){return 7}}const ZPe=t=>new ha(WPe[t.readTypeRef()](t)),pR=(t,e)=>{let n=e,r=0,o;do r>0&&(n=yt(n.client,n.clock+r)),o=Fp(t,n),r=n.clock-o.id.clock,n=o.redone;while(n!==null&&o instanceof wn);return{item:o,diff:r}},o5=(t,e)=>{for(;t!==null&&t.keep!==e;)t.keep=e,t=t.parent._item},f_=(t,e,n)=>{const{client:r,clock:o}=e.id,s=new wn(yt(r,o+n),e,yt(r,o+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&s.markDeleted(),e.keep&&(s.keep=!0),e.redone!==null&&(s.redone=yt(e.redone.client,e.redone.clock+n)),e.right=s,s.right!==null&&(s.right.left=s),t._mergeStructs.push(s),s.parentSub!==null&&s.right===null&&s.parent._map.set(s.parentSub,s),e.length=n,s},I6=(t,e)=>IAe(t,n=>Xm(n.deletions,e)),CX=(t,e,n,r,o,s)=>{const i=t.doc,a=i.store,l=i.clientID,c=e.redone;if(c!==null)return Go(t,c);let u=e.parent._item,f=null,h;if(u!==null&&u.deleted===!0){if(u.redone===null&&(!n.has(u)||CX(t,u,n,r,o,s)===null))return null;for(;u.redone!==null;)u=Go(t,u.redone)}const p=u===null?e.parent:u.content.type;if(e.parentSub===null){for(f=e.left,h=e;f!==null;){let b=f;for(;b!==null&&b.parent._item!==u;)b=b.redone===null?null:Go(t,b.redone);if(b!==null&&b.parent._item===u){f=b;break}f=f.left}for(;h!==null;){let b=h;for(;b!==null&&b.parent._item!==u;)b=b.redone===null?null:Go(t,b.redone);if(b!==null&&b.parent._item===u){h=b;break}h=h.right}}else if(h=null,e.right&&!o){for(f=e;f!==null&&f.right!==null&&(f.right.redone||Xm(r,f.right.id)||I6(s.undoStack,f.right.id)||I6(s.redoStack,f.right.id));)for(f=f.right;f.redone;)f=Go(t,f.redone);if(f&&f.right!==null)return null}else f=p._map.get(e.parentSub)||null;const m=Jn(a,l),y=yt(l,m),x=new wn(y,f,f&&f.lastId,h,h&&h.id,p,e.parentSub,e.content.copy());return e.redone=y,o5(x,!0),x.integrate(t,0),x};let wn=class mR extends r5{constructor(e,n,r,o,s,i,a,l){super(e,l.getLength()),this.origin=r,this.left=n,this.right=o,this.rightOrigin=s,this.parent=i,this.parentSub=a,this.redone=null,this.content=l,this.info=this.content.isCountable()?o6:0}set marker(e){(this.info&jS)>0!==e&&(this.info^=jS)}get marker(){return(this.info&jS)>0}get keep(){return(this.info&r6)>0}set keep(e){this.keep!==e&&(this.info^=r6)}get countable(){return(this.info&o6)>0}get deleted(){return(this.info&LS)>0}set deleted(e){this.deleted!==e&&(this.info^=LS)}markDeleted(){this.info|=LS}getMissing(e,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Jn(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Jn(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Bp&&this.id.client!==this.parent.client&&this.parent.clock>=Jn(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=w6(e,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Go(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===ni||this.right&&this.right.constructor===ni)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===mR&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===mR&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Bp){const r=Fp(n,this.parent);r.constructor===ni?this.parent=null:this.parent=r.content.type}return null}integrate(e,n){if(n>0&&(this.id.clock+=n,this.left=w6(e,e.doc.store,yt(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,o;if(r!==null)o=r.right;else if(this.parentSub!==null)for(o=this.parent._map.get(this.parentSub)||null;o!==null&&o.left!==null;)o=o.left;else o=this.parent._start;const s=new Set,i=new Set;for(;o!==null&&o!==this.right;){if(i.add(o),s.add(o),pp(this.origin,o.origin)){if(o.id.client<this.id.client)r=o,s.clear();else if(pp(this.rightOrigin,o.rightOrigin))break}else if(o.origin!==null&&i.has(Fp(e.doc.store,o.origin)))s.has(Fp(e.doc.store,o.origin))||(r=o,s.clear());else break;o=o.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),tX(e.doc.store,this),this.content.integrate(e,this),x6(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new ni(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:yt(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&pp(e.origin,this.lastId)&&this.right===e&&pp(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===e&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),q1(e.deleteSet,this.id.client,this.id.clock,this.length),x6(e,n,this.parentSub),this.content.delete(e)}}gc(e,n){if(!this.deleted)throw Ps();this.content.gc(e),n?oPe(e,this,new ni(this.id,this.length)):this.content=new Z1(this.length)}write(e,n){const r=n>0?yt(this.id.client,this.id.clock+n-1):this.origin,o=this.rightOrigin,s=this.parentSub,i=this.content.getRef()&ZE|(r===null?0:Es)|(o===null?0:lc)|(s===null?0:H1);if(e.writeInfo(i),r!==null&&e.writeLeftID(r),o!==null&&e.writeRightID(o),r===null&&o===null){const a=this.parent;if(a._item!==void 0){const l=a._item;if(l===null){const c=K1(a);e.writeParentInfo(!0),e.writeString(c)}else e.writeParentInfo(!1),e.writeLeftID(l.id)}else a.constructor===String?(e.writeParentInfo(!0),e.writeString(a)):a.constructor===Bp?(e.writeParentInfo(!1),e.writeLeftID(a)):Ps();s!==null&&e.writeString(s)}this.content.write(e,n)}};const EX=(t,e)=>e3e[e&ZE](t),e3e=[()=>{Ps()},jPe,FPe,LPe,zPe,$Pe,BPe,ZPe,HPe,VPe,()=>{Ps()}],t3e=10;class Ui extends r5{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){Ps()}write(e,n){e.writeInfo(t3e),Vt(e.restEncoder,this.length-n)}getMissing(e,n){return null}}const kX=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},SX="__ $YJS$ __";kX[SX]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");kX[SX]=!0;const n3e=()=>{let t=!0;return(e,n)=>{if(t){t=!1;try{e()}finally{t=!0}}else n!==void 0&&n()}},r3e=/[\uD800-\uDBFF]/,o3e=/[\uDC00-\uDFFF]/,s3e=(t,e)=>{let n=0,r=0;for(;n<t.length&&n<e.length&&t[n]===e[n];)n++;for(n>0&&r3e.test(t[n-1])&&n--;r+n<t.length&&r+n<e.length&&t[t.length-r-1]===e[e.length-r-1];)r++;return r>0&&o3e.test(t[t.length-r])&&r--,{index:n,remove:t.length-n-r,insert:e.slice(n,e.length-r)}},i3e=s3e,Ln=new Ht("y-sync"),cc=new Ht("y-undo"),S0=new Ht("yjs-cursor"),h_=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&e.sv.get(t.id.client)>t.id.clock&&!Xm(e.ds,t.id),a3e=[{light:"#ecd44433",dark:"#ecd444"}],l3e=(t,e,n)=>{if(!t.has(n)){if(t.size<e.length){const r=Ff();t.forEach(o=>r.add(o)),e=e.filter(o=>!r.has(o))}t.set(n,i4e(e))}return t.get(n)},c3e=(t,{colors:e=a3e,colorMapping:n=new Map,permanentUserData:r=null,onFirstRender:o=()=>{},mapping:s}={})=>{let i=!1;const a=new d3e(t,s),l=new kt({props:{editable:c=>{const u=Ln.getState(c);return u.snapshot==null&&u.prevSnapshot==null}},key:Ln,state:{init:(c,u)=>({type:t,doc:t.doc,binding:a,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,isUndoRedoOperation:!1,addToHistory:!0,colors:e,colorMapping:n,permanentUserData:r}),apply:(c,u)=>{const f=c.getMeta(Ln);if(f!==void 0){u=Object.assign({},u);for(const h in f)u[h]=f[h]}return u.addToHistory=c.getMeta("addToHistory")!==!1,u.isChangeOrigin=f!==void 0&&!!f.isChangeOrigin,u.isUndoRedoOperation=f!==void 0&&!!f.isChangeOrigin&&!!f.isUndoRedoOperation,a.prosemirrorView!==null&&f!==void 0&&(f.snapshot!=null||f.prevSnapshot!=null)&&K3(0,()=>{a.prosemirrorView!=null&&(f.restore==null?a._renderSnapshot(f.snapshot,f.prevSnapshot,u):(a._renderSnapshot(f.snapshot,f.snapshot,u),delete u.restore,delete u.snapshot,delete u.prevSnapshot,a.mux(()=>{a._prosemirrorChanged(a.prosemirrorView.state.doc)})))}),u}},view:c=>(a.initView(c),s==null&&a._forceRerender(),o(),{update:()=>{const u=l.getState(c.state);if(u.snapshot==null&&u.prevSnapshot==null&&(i||c.state.doc.content.findDiffStart(c.state.doc.type.createAndFill().content)!==null)){if(i=!0,u.addToHistory===!1&&!u.isChangeOrigin){const f=cc.getState(c.state),h=f&&f.undoManager;h&&h.stopCapturing()}a.mux(()=>{u.doc.transact(f=>{f.meta.set("addToHistory",u.addToHistory),a._prosemirrorChanged(c.state.doc)},Ln)})}},destroy:()=>{a.destroy()}})});return l},u3e=(t,e,n)=>{if(e!==null&&e.anchor!==null&&e.head!==null){const r=tv(n.doc,n.type,e.anchor,n.mapping),o=tv(n.doc,n.type,e.head,n.mapping);r!==null&&o!==null&&(t=t.setSelection(Ze.create(t.doc,r,o)))}},gR=(t,e)=>({anchor:m_(e.selection.anchor,t.type,t.mapping),head:m_(e.selection.head,t.type,t.mapping)});class d3e{constructor(e,n=new Map){this.type=e,this.prosemirrorView=null,this.mux=n3e(),this.mapping=n,this._observeFunction=this._typeChanged.bind(this),this.doc=e.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{this.beforeTransactionSelection===null&&this.prosemirrorView!=null&&(this.beforeTransactionSelection=gR(this,this.prosemirrorView.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this._domSelectionInView=null}get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return this.prosemirrorView.hasFocus()?(x4e&&this._domSelectionInView===null&&(K3(0,()=>{this._domSelectionInView=null}),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView):!1}_isDomSelectionInView(){const e=this.prosemirrorView._root.getSelection(),n=this.prosemirrorView._root.createRange();n.setStart(e.anchorNode,e.anchorOffset),n.setEnd(e.focusNode,e.focusOffset),n.getClientRects().length===0&&n.startContainer&&n.collapsed&&n.selectNodeContents(n.startContainer);const o=n.getBoundingClientRect(),s=S4e.documentElement;return o.bottom>=0&&o.right>=0&&o.left<=(window.innerWidth||s.clientWidth||0)&&o.top<=(window.innerHeight||s.clientHeight||0)}renderSnapshot(e,n){n||(n=ZQ(YQ(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(Ln,{snapshot:e,prevSnapshot:n}))}unrenderSnapshot(){this.mapping.clear(),this.mux(()=>{const e=this.type.toArray().map(r=>Sb(r,this.prosemirrorView.state.schema,this.mapping)).filter(r=>r!==null),n=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new je(_e.from(e),0,0));n.setMeta(Ln,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(n)})}_forceRerender(){this.mapping.clear(),this.mux(()=>{const e=this.beforeTransactionSelection!==null?null:this.prosemirrorView.state.selection,n=this.type.toArray().map(o=>Sb(o,this.prosemirrorView.state.schema,this.mapping)).filter(o=>o!==null),r=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new je(_e.from(n),0,0));if(e){const o=ac(nl(e.anchor,0),r.doc.content.size),s=ac(nl(e.head,0),r.doc.content.size);r.setSelection(Ze.create(r.doc,o,s))}this.prosemirrorView.dispatch(r.setMeta(Ln,{isChangeOrigin:!0,binding:this}))})}_renderSnapshot(e,n,r){let o=this.doc;e||(e=US(this.doc)),(e instanceof Uint8Array||n instanceof Uint8Array)&&((!(e instanceof Uint8Array)||!(n instanceof Uint8Array))&&Ps(),o=new Jm({gc:!1}),uR(o,n),n=US(o),uR(o,e),e=US(o)),this.mapping.clear(),this.mux(()=>{o.transact(s=>{const i=r.permanentUserData;i&&i.dss.forEach(u=>{Xu(s,u,f=>{})});const a=(u,f)=>{const h=u==="added"?i.getUserByClientId(f.client):i.getUserByDeletedId(f);return{user:h,type:u,color:l3e(r.colorMapping,r.colors,h)}},l=uX(this.type,new Z3(n.ds,e.sv)).map(u=>!u._item.deleted||h_(u._item,e)||h_(u._item,n)?Sb(u,this.prosemirrorView.state.schema,new Map,e,n,a):null).filter(u=>u!==null),c=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new je(_e.from(l),0,0));this.prosemirrorView.dispatch(c.setMeta(Ln,{isChangeOrigin:!0}))},Ln)})}_typeChanged(e,n){if(this.prosemirrorView==null)return;const r=Ln.getState(this.prosemirrorView.state);if(e.length===0||r.snapshot!=null||r.prevSnapshot!=null){this.renderSnapshot(r.snapshot,r.prevSnapshot);return}this.mux(()=>{const o=(a,l)=>this.mapping.delete(l);Xu(n,n.deleteSet,a=>{if(a.constructor===wn){const l=a.content.type;l&&this.mapping.delete(l)}}),n.changed.forEach(o),n.changedParentTypes.forEach(o);const s=this.type.toArray().map(a=>TX(a,this.prosemirrorView.state.schema,this.mapping)).filter(a=>a!==null);let i=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new je(_e.from(s),0,0));u3e(i,this.beforeTransactionSelection,this),i=i.setMeta(Ln,{isChangeOrigin:!0,isUndoRedoOperation:n.origin instanceof oX}),this.beforeTransactionSelection!==null&&this._isLocalCursorInView()&&i.scrollIntoView(),this.prosemirrorView.dispatch(i)})}_prosemirrorChanged(e){this.doc.transact(()=>{vR(this.doc,this.type,e,this.mapping),this.beforeTransactionSelection=gR(this,this.prosemirrorView.state)},Ln)}initView(e){this.prosemirrorView!=null&&this.destroy(),this.prosemirrorView=e,this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),this.type.observeDeep(this._observeFunction)}destroy(){this.prosemirrorView!=null&&(this.prosemirrorView=null,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions))}}const TX=(t,e,n,r,o,s)=>{const i=n.get(t);if(i===void 0){if(t instanceof No)return Sb(t,e,n,r,o,s);throw Yi()}return i},Sb=(t,e,n,r,o,s)=>{const i=[],a=l=>{var c;if(l.constructor===No){const u=TX(l,e,n,r,o,s);u!==null&&i.push(u)}else{const u=(c=l._item.right)==null?void 0:c.content.type;u instanceof Ju&&!u._item.deleted&&u._item.id.client===u.doc.clientID&&(l.applyDelta([{retain:l.length},...u.toDelta()]),u.doc.transact(h=>{u._item.delete(h)}));const f=f3e(l,e,n,r,o,s);f!==null&&f.forEach(h=>{h!==null&&i.push(h)})}};r===void 0||o===void 0?t.toArray().forEach(a):uX(t,new Z3(o.ds,r.sv)).forEach(a);try{const l=t.getAttributes(r);r!==void 0&&(h_(t._item,r)?h_(t._item,o)||(l.ychange=s?s("added",t._item.id):{type:"added"}):l.ychange=s?s("removed",t._item.id):{type:"removed"});const c=e.node(t.nodeName,l,i);return n.set(t,c),c}catch{return t.doc.transact(c=>{t._item.delete(c)},Ln),n.delete(t),null}},f3e=(t,e,n,r,o,s)=>{const i=[],a=t.toDelta(r,o,s);try{for(let l=0;l<a.length;l++){const c=a[l],u=[];for(const f in c.attributes)u.push(e.mark(f,c.attributes[f]));i.push(e.text(c.insert,u))}}catch{return t.doc.transact(c=>{t._item.delete(c)},Ln),null}return i},h3e=(t,e)=>{const n=new ks,r=t.map(o=>({insert:o.text,attributes:IX(o.marks)}));return n.applyDelta(r),e.set(n,t),n},p3e=(t,e)=>{const n=new No(t.type.name);for(const r in t.attrs){const o=t.attrs[r];o!==null&&r!=="ychange"&&n.setAttribute(r,o)}return n.insert(0,l2(t).map(r=>yR(r,e))),e.set(n,t),n},yR=(t,e)=>t instanceof Array?h3e(t,e):p3e(t,e),R6=t=>typeof t=="object"&&t!==null,s5=(t,e)=>{const n=Object.keys(t).filter(o=>t[o]!==null);let r=n.length===Object.keys(e).filter(o=>e[o]!==null).length;for(let o=0;o<n.length&&r;o++){const s=n[o],i=t[s],a=e[s];r=s==="ychange"||i===a||R6(i)&&R6(a)&&s5(i,a)}return r},l2=t=>{const e=t.content.content,n=[];for(let r=0;r<e.length;r++){const o=e[r];if(o.isText){const s=[];for(let i=e[r];r<e.length&&i.isText;i=e[++r])s.push(i);r--,n.push(s)}else n.push(o)}return n},NX=(t,e)=>{const n=t.toDelta();return n.length===e.length&&n.every((r,o)=>r.insert===e[o].text&&VQ(r.attributes||{}).length===e[o].marks.length&&e[o].marks.every(s=>s5(r.attributes[s.type.name]||{},s.attrs)))},ev=(t,e)=>{if(t instanceof No&&!(e instanceof Array)&&wR(t,e)){const n=l2(e);return t._length===n.length&&s5(t.getAttributes(),e.attrs)&&t.toArray().every((r,o)=>ev(r,n[o]))}return t instanceof ks&&e instanceof Array&&NX(t,e)},p_=(t,e)=>t===e||t instanceof Array&&e instanceof Array&&t.length===e.length&&t.every((n,r)=>e[r]===n),A6=(t,e,n)=>{const r=t.toArray(),o=l2(e),s=o.length,i=r.length,a=ac(i,s);let l=0,c=0,u=!1;for(;l<a;l++){const f=r[l],h=o[l];if(p_(n.get(f),h))u=!0;else if(!ev(f,h))break}for(;l+c<a;c++){const f=r[i-c-1],h=o[s-c-1];if(p_(n.get(f),h))u=!0;else if(!ev(f,h))break}return{equalityFactor:l+c,foundMappedChild:u}},m3e=t=>{let e="",n=t._start;const r={};for(;n!==null;)n.deleted||(n.countable&&n.content instanceof ia?e+=n.content.str:n.content instanceof dr&&(r[n.content.key]=null)),n=n.right;return{str:e,nAttrs:r}},g3e=(t,e,n)=>{n.set(t,e);const{nAttrs:r,str:o}=m3e(t),s=e.map(c=>({insert:c.text,attributes:Object.assign({},r,IX(c.marks))})),{insert:i,remove:a,index:l}=i3e(o,s.map(c=>c.insert).join(""));t.delete(l,a),t.insert(l,i),t.applyDelta(s.map(c=>({retain:c.insert.length,attributes:c.attributes})))},IX=t=>{const e={};return t.forEach(n=>{n.type.name!=="ychange"&&(e[n.type.name]=n.attrs)}),e},vR=(t,e,n,r)=>{if(e instanceof No&&e.nodeName!==n.type.name)throw new Error("node name mismatch!");if(r.set(e,n),e instanceof No){const f=e.getAttributes(),h=n.attrs;for(const p in h)h[p]!==null?f[p]!==h[p]&&p!=="ychange"&&e.setAttribute(p,h[p]):e.removeAttribute(p);for(const p in f)h[p]===void 0&&e.removeAttribute(p)}const o=l2(n),s=o.length,i=e.toArray(),a=i.length,l=ac(s,a);let c=0,u=0;for(;c<l;c++){const f=i[c],h=o[c];if(!p_(r.get(f),h))if(ev(f,h))r.set(f,h);else break}for(;u+c+1<l;u++){const f=i[a-u-1],h=o[s-u-1];if(!p_(r.get(f),h))if(ev(f,h))r.set(f,h);else break}t.transact(()=>{for(;a-c-u>0&&s-c-u>0;){const h=i[c],p=o[c],m=i[a-u-1],y=o[s-u-1];if(h instanceof ks&&p instanceof Array)NX(h,p)||g3e(h,p,r),c+=1;else{let x=h instanceof No&&wR(h,p),b=m instanceof No&&wR(m,y);if(x&&b){const C=A6(h,p,r),E=A6(m,y,r);C.foundMappedChild&&!E.foundMappedChild?b=!1:!C.foundMappedChild&&E.foundMappedChild||C.equalityFactor<E.equalityFactor?x=!1:b=!1}x?(vR(t,h,p,r),c+=1):b?(vR(t,m,y,r),u+=1):(r.delete(e.get(c)),e.delete(c,1),e.insert(c,[yR(p,r)]),c+=1)}}const f=a-c-u;if(a===1&&s===0&&i[0]instanceof ks?(r.delete(i[0]),i[0].delete(0,i[0].length)):f>0&&(e.slice(c,c+f).forEach(h=>r.delete(h)),e.delete(c,f)),c+u<s){const h=[];for(let p=c;p<s-u;p++)h.push(yR(o[p],r));e.insert(c,h)}},Ln)},wR=(t,e)=>!(e instanceof Array)&&t.nodeName===e.type.name;let Uy=null;const y3e=()=>{const t=Uy;Uy=null,t.forEach((e,n)=>{const r=n.state.tr,o=Ln.getState(n.state);o&&o.binding&&!o.binding.isDestroyed&&(e.forEach((s,i)=>{r.setMeta(i,s)}),n.dispatch(r))})},v3e=(t,e,n)=>{Uy||(Uy=new Map,K3(0,y3e)),Ic(Uy,t,di).set(e,n)},m_=(t,e,n)=>{if(t===0)return FS(e,0,-1);let r=e._first===null?null:e._first.content.type;for(;r!==null&&e!==r;){if(r instanceof ks){if(r._length>=t)return FS(r,t,-1);if(t-=r._length,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{do r=r._item===null?null:r._item.parent,t--;while(r!==e&&r!==null&&r._item!==null&&r._item.next===null);r!==null&&r!==e&&(r=r._item===null?null:r._item.next.content.type)}}else{const o=(n.get(r)||{nodeSize:0}).nodeSize;if(r._first!==null&&t<o)r=r._first.content.type,t--;else{if(t===1&&r._length===0&&o>1)return new Q1(r._item===null?null:r._item.id,r._item===null?K1(r):null,null);if(t-=o,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{if(t===0)return r=r._item===null?r:r._item.parent,new Q1(r._item===null?null:r._item.id,r._item===null?K1(r):null,null);do r=r._item.parent,t--;while(r!==e&&r._item.next===null);r!==e&&(r=r._item.next.content.type)}}}if(r===null)throw Ps();if(t===0&&r.constructor!==ks&&r!==e)return w3e(r._item.parent,r._item)}return FS(e,e._length,-1)},w3e=(t,e)=>{let n=null,r=null;return t._item===null?r=K1(t):n=yt(t._item.id.client,t._item.id.clock),new Q1(n,r,e.id)},tv=(t,e,n,r)=>{const o=nPe(n,t);if(o===null||o.type!==e&&!Y1(e,o.type._item))return null;let s=o.type,i=0;if(s.constructor===ks)i=o.index;else if(s._item===null||!s._item.deleted){let a=s._first,l=0;for(;l<s._length&&l<o.index&&a!==null;){if(!a.deleted){const c=a.content.type;l++,c instanceof ks?i+=c._length:i+=r.get(c).nodeSize}a=a.right}i+=1}for(;s!==e&&s._item!==null;){const a=s._item.parent;if(a._item===null||!a._item.deleted){i+=1;let l=a._first;for(;l!==null;){const c=l.content.type;if(c===s)break;l.deleted||(c instanceof ks?i+=c._length:i+=r.get(c).nodeSize),l=l.right}}s=a}return i-1};function b3e(t){const e=t.toArray();function n(r){let o;if(!r.nodeName)o=r.toDelta().map(i=>{const a={type:"text",text:i.insert};return i.attributes&&(a.marks=Object.keys(i.attributes).map(l=>{const c=i.attributes[l],u={type:l};return Object.keys(c)&&(u.attrs=c),u})),a});else{o={type:r.nodeName};const s=r.getAttributes();Object.keys(s).length&&(o.attrs=s);const i=r.toArray();i.length&&(o.content=i.map(n).flat())}return o}return{type:"doc",content:e.map(n)}}const x3e=(t,e,n)=>t!==e,_3e=t=>{const e=document.createElement("span");e.classList.add("ProseMirror-yjs-cursor"),e.setAttribute("style",`border-color: ${t.color}`);const n=document.createElement("div");n.setAttribute("style",`background-color: ${t.color}`),n.insertBefore(document.createTextNode(t.name),null);const r=document.createTextNode("⁠"),o=document.createTextNode("⁠");return e.insertBefore(r,null),e.insertBefore(n,null),e.insertBefore(o,null),e},RX=t=>({style:`background-color: ${t.color}70`,class:"ProseMirror-yjs-selection"}),C3e=/^#[0-9a-fA-F]{6}$/,P6=(t,e,n,r,o)=>{const s=Ln.getState(t),i=s.doc,a=[];return s.snapshot!=null||s.prevSnapshot!=null||s.binding.mapping.size===0?Gt.create(t.doc,[]):(e.getStates().forEach((l,c)=>{if(n(i.clientID,c,l)&&l.cursor!=null){const u=l.user||{};u.color==null?u.color="#ffa500":C3e.test(u.color)||console.warn("A user uses an unsupported color format",u),u.name==null&&(u.name=`User: ${c}`);let f=tv(i,s.type,Fy(l.cursor.anchor),s.binding.mapping),h=tv(i,s.type,Fy(l.cursor.head),s.binding.mapping);if(f!==null&&h!==null){const p=nl(t.doc.content.size-1,0);f=ac(f,p),h=ac(h,p),a.push(Mn.widget(h,()=>r(u),{key:c+"",side:10}));const m=ac(f,h),y=nl(f,h);a.push(Mn.inline(m,y,o(u),{inclusiveEnd:!0,inclusiveStart:!1}))}}}),Gt.create(t.doc,a))},E3e=(t,{awarenessStateFilter:e=x3e,cursorBuilder:n=_3e,selectionBuilder:r=RX,getSelection:o=i=>i.selection}={},s="cursor")=>new kt({key:S0,state:{init(i,a){return P6(a,t,e,n,r)},apply(i,a,l,c){const u=Ln.getState(c),f=i.getMeta(S0);return u&&u.isChangeOrigin||f&&f.awarenessUpdated?P6(c,t,e,n,r):a.map(i.mapping,i.doc)}},props:{decorations:i=>S0.getState(i)},view:i=>{const a=()=>{i.docView&&v3e(i,S0,{awarenessUpdated:!0})},l=()=>{const c=Ln.getState(i.state),u=t.getLocalState()||{};if(i.hasFocus()){const f=o(i.state),h=m_(f.anchor,c.type,c.binding.mapping),p=m_(f.head,c.type,c.binding.mapping);(u.cursor==null||!v6(Fy(u.cursor.anchor),h)||!v6(Fy(u.cursor.head),p))&&t.setLocalStateField(s,{anchor:h,head:p})}else u.cursor!=null&&tv(c.doc,c.type,Fy(u.cursor.anchor),c.binding.mapping)!==null&&t.setLocalStateField(s,null)};return t.on("change",a),i.dom.addEventListener("focusin",l),i.dom.addEventListener("focusout",l),{update:l,destroy:()=>{i.dom.removeEventListener("focusin",l),i.dom.removeEventListener("focusout",l),t.off("change",a),t.setLocalStateField(s,null)}}}}),k3e=t=>{const e=cc.getState(t).undoManager;if(e!=null)return e.undo(),!0},S3e=t=>{const e=cc.getState(t).undoManager;if(e!=null)return e.redo(),!0},T3e=new Set(["paragraph"]),N3e=(t,e)=>!(t instanceof wn)||!(t.content instanceof ha)||!(t.content.type instanceof Ju||t.content.type instanceof No&&e.has(t.content.type.nodeName))||t.content.type._length===0,I3e=({protectedNodes:t=T3e,trackedOrigins:e=[],undoManager:n=null}={})=>new kt({key:cc,state:{init:(r,o)=>{const s=Ln.getState(o),i=n||new oX(s.type,{trackedOrigins:new Set([Ln].concat(e)),deleteFilter:a=>N3e(a,t),captureTransaction:a=>a.meta.get("addToHistory")!==!1});return{undoManager:i,prevSel:null,hasUndoOps:i.undoStack.length>0,hasRedoOps:i.redoStack.length>0}},apply:(r,o,s,i)=>{const a=Ln.getState(i).binding,l=o.undoManager,c=l.undoStack.length>0,u=l.redoStack.length>0;return a?{undoManager:l,prevSel:gR(a,s),hasUndoOps:c,hasRedoOps:u}:c!==o.hasUndoOps||u!==o.hasRedoOps?Object.assign({},o,{hasUndoOps:l.undoStack.length>0,hasRedoOps:l.redoStack.length>0}):o}},view:r=>{const o=Ln.getState(r.state),s=cc.getState(r.state).undoManager;return s.on("stack-item-added",({stackItem:i})=>{const a=o.binding;a&&i.meta.set(a,cc.getState(r.state).prevSel)}),s.on("stack-item-popped",({stackItem:i})=>{const a=o.binding;a&&(a.beforeTransactionSelection=i.meta.get(a)||a.beforeTransactionSelection)}),{destroy:()=>{s.destroy()}}}}),R3e=sn.create({name:"collaboration",priority:1e3,addOptions(){return{document:null,field:"default",fragment:null}},addStorage(){return{isDisabled:!1}},onCreate(){this.editor.extensionManager.extensions.find(t=>t.name==="history")&&console.warn('[tiptap warn]: "@tiptap/extension-collaboration" comes with its own history support and is not compatible with "@tiptap/extension-history".')},addCommands(){return{undo:()=>({tr:t,state:e,dispatch:n})=>(t.setMeta("preventDispatch",!0),cc.getState(e).undoManager.undoStack.length===0?!1:n?k3e(e):!0),redo:()=>({tr:t,state:e,dispatch:n})=>(t.setMeta("preventDispatch",!0),cc.getState(e).undoManager.redoStack.length===0?!1:n?S3e(e):!0)}},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Mod-y":()=>this.editor.commands.redo(),"Shift-Mod-z":()=>this.editor.commands.redo()}},addProseMirrorPlugins(){var t;const e=this.options.fragment?this.options.fragment:this.options.document.getXmlFragment(this.options.field),n=I3e(this.options.yUndoOptions),r=n.spec.view;n.spec.view=i=>{const{undoManager:a}=cc.getState(i.state);a.restore&&(a.restore(),a.restore=()=>{});const l=r?r(i):void 0;return{destroy:()=>{const c=a.trackedOrigins.has(a),u=a._observers;a.restore=()=>{c&&a.trackedOrigins.add(a),a.doc.on("afterTransaction",a.afterTransactionHandler),a._observers=u},l!=null&&l.destroy&&l.destroy()}}};const o={...this.options.ySyncOptions,onFirstRender:this.options.onFirstRender},s=c3e(e,o);return this.editor.options.enableContentCheck&&((t=e.doc)===null||t===void 0||t.on("beforeTransaction",()=>{try{const i=b3e(e);if(i.content.length===0)return;this.editor.schema.nodeFromJSON(i).check()}catch(i){return this.editor.emit("contentError",{error:i,editor:this.editor,disableCollaboration:()=>{var a;(a=e.doc)===null||a===void 0||a.destroy(),this.storage.isDisabled=!0}}),!1}})),[s,n,this.editor.options.enableContentCheck&&new kt({key:new Ht("filterInvalidContent"),filterTransaction:()=>{var i;return this.storage.isDisabled&&((i=e.doc)===null||i===void 0||i.destroy()),!0}})].filter(Boolean)}}),M6=t=>Array.from(t.entries()).map(([e,n])=>({clientId:e,...n.user})),D6=()=>null,A3e=sn.create({name:"collaborationCursor",priority:999,addOptions(){return{provider:null,user:{name:null,color:null},render:t=>{const e=document.createElement("span");e.classList.add("collaboration-cursor__caret"),e.setAttribute("style",`border-color: ${t.color}`);const n=document.createElement("div");return n.classList.add("collaboration-cursor__label"),n.setAttribute("style",`background-color: ${t.color}`),n.insertBefore(document.createTextNode(t.name),null),e.insertBefore(n,null),e},selectionRender:RX,onUpdate:D6}},onCreate(){if(this.options.onUpdate!==D6&&console.warn('[tiptap warn]: DEPRECATED: The "onUpdate" option is deprecated. Please use `editor.storage.collaborationCursor.users` instead. Read more: https://tiptap.dev/api/extensions/collaboration-cursor'),!this.options.provider)throw new Error('The "provider" option is required for the CollaborationCursor extension')},addStorage(){return{users:[]}},addCommands(){return{updateUser:t=>()=>(this.options.user=t,this.options.provider.awareness.setLocalStateField("user",this.options.user),!0),user:t=>({editor:e})=>(console.warn('[tiptap warn]: DEPRECATED: The "user" command is deprecated. Please use "updateUser" instead. Read more: https://tiptap.dev/api/extensions/collaboration-cursor'),e.commands.updateUser(t))}},addProseMirrorPlugins(){return[E3e((this.options.provider.awareness.setLocalStateField("user",this.options.user),this.storage.users=M6(this.options.provider.awareness.states),this.options.provider.awareness.on("update",()=>{this.storage.users=M6(this.options.provider.awareness.states)}),this.options.provider.awareness),{cursorBuilder:this.options.render,selectionBuilder:this.options.selectionRender})]}});class zn extends nt{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return zn.valid(r)?new zn(r):nt.near(r)}content(){return je.empty}eq(e){return e instanceof zn&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new zn(e.resolve(n.pos))}getBookmark(){return new i5(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!P3e(e)||!M3e(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let o=n.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&zn.valid(e))return e;let o=e.pos,s=null;for(let i=e.depth;;i--){let a=e.node(i);if(n>0?e.indexAfter(i)<a.childCount:e.index(i)>0){s=a.child(n>0?e.indexAfter(i):e.index(i)-1);break}else if(i==0)return null;o+=n;let l=e.doc.resolve(o);if(zn.valid(l))return l}for(;;){let i=n>0?s.firstChild:s.lastChild;if(!i){if(s.isAtom&&!s.isText&&!Je.isSelectable(s)){e=e.doc.resolve(o+s.nodeSize*n),r=!1;continue e}break}s=i,o+=n;let a=e.doc.resolve(o);if(zn.valid(a))return a}return null}}}zn.prototype.visible=!1;zn.findFrom=zn.findGapCursorFrom;nt.jsonID("gapcursor",zn);class i5{constructor(e){this.pos=e}map(e){return new i5(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return zn.valid(n)?new zn(n):nt.near(n)}}function P3e(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function M3e(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function D3e(){return new kt({props:{decorations:V3e,createSelectionBetween(t,e,n){return e.pos==n.pos&&zn.valid(n)?new zn(n):null},handleClick:L3e,handleKeyDown:O3e,handleDOMEvents:{beforeinput:j3e}}})}const O3e=C3({ArrowLeft:T0("horiz",-1),ArrowRight:T0("horiz",1),ArrowUp:T0("vert",-1),ArrowDown:T0("vert",1)});function T0(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,s){let i=r.selection,a=e>0?i.$to:i.$from,l=i.empty;if(i instanceof Ze){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=zn.findGapCursorFrom(a,e,l);return c?(o&&o(r.tr.setSelection(new zn(c))),!0):!1}}function L3e(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!zn.valid(r))return!1;let o=t.posAtCoords({left:n.clientX,top:n.clientY});return o&&o.inside>-1&&Je.isSelectable(t.state.doc.nodeAt(o.inside))?!1:(t.dispatch(t.state.tr.setSelection(new zn(r))),!0)}function j3e(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof zn))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let o=_e.empty;for(let i=r.length-1;i>=0;i--)o=_e.from(r[i].createAndFill(null,o));let s=t.state.tr.replace(n.pos,n.pos,new je(o,0,0));return s.setSelection(Ze.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function V3e(t){if(!(t.selection instanceof zn))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Gt.create(t.doc,[Mn.widget(t.selection.head,e,{key:"gapcursor"})])}const $3e=sn.create({name:"gapCursor",addProseMirrorPlugins(){return[D3e()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=It(Qe(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),B3e=fa.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",gi(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:o,storedMarks:s}=n;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:i}=this.options,{splittableMarks:a}=r.extensionManager,l=s||o.$to.parentOffset&&o.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&i){const f=l.filter(h=>a.includes(h.type.name));c.ensureMarks(f)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}});var g_=200,Or=function(){};Or.prototype.append=function(e){return e.length?(e=Or.from(e),!this.length&&e||e.length<g_&&this.leafAppend(e)||this.length<g_&&e.leafPrepend(this)||this.appendInner(e)):this};Or.prototype.prepend=function(e){return e.length?Or.from(e).append(this):this};Or.prototype.appendInner=function(e){return new F3e(this,e)};Or.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Or.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Or.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Or.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Or.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(s,i){return o.push(e(s,i))},n,r),o};Or.from=function(e){return e instanceof Or?e:e&&e.length?new AX(e):Or.empty};var AX=function(t){function e(r){t.call(this),this.values=r}e.__proto__=t,e.prototype=Object.create(t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,s){return o==0&&s==this.length?this:new e(this.values.slice(o,s))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,s,i,a){for(var l=s;l<i;l++)if(o(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(o,s,i,a){for(var l=s-1;l>=i;l--)if(o(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=g_)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=g_)return new e(o.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Or);Or.empty=new AX([]);var F3e=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e.__proto__=t,e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,o,s,i){var a=this.left.length;if(o<a&&this.left.forEachInner(r,o,Math.min(s,a),i)===!1||s>a&&this.right.forEachInner(r,Math.max(o-a,0),Math.min(this.length,s)-a,i+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,s,i){var a=this.left.length;if(o>a&&this.right.forEachInvertedInner(r,o-a,Math.max(s,a)-a,i+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(o,a),s,i)===!1)return!1},e.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var s=this.left.length;return o<=s?this.left.slice(r,o):r>=s?this.right.slice(r-s,o-s):this.left.slice(r,s).append(this.right.slice(0,o-s))},e.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new e(o,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Or);const U3e=500;class Hi{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,s;n&&(o=this.remapping(r,this.items.length),s=o.maps.length);let i=e.tr,a,l,c=[],u=[];return this.items.forEach((f,h)=>{if(!f.step){o||(o=this.remapping(r,h+1),s=o.maps.length),s--,u.push(f);return}if(o){u.push(new Ia(f.map));let p=f.step.map(o.slice(s)),m;p&&i.maybeStep(p).doc&&(m=i.mapping.maps[i.mapping.maps.length-1],c.push(new Ia(m,void 0,void 0,c.length+u.length))),s--,m&&o.appendMap(m,s)}else i.maybeStep(f.step);if(f.selection)return a=o?f.selection.map(o.slice(s)):f.selection,l=new Hi(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:i,selection:a}}addTransform(e,n,r,o){let s=[],i=this.eventCount,a=this.items,l=!o&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let f=e.steps[u].invert(e.docs[u]),h=new Ia(e.mapping.maps[u],f,n),p;(p=l&&l.merge(h))&&(h=p,u?s.pop():a=a.slice(0,a.length-1)),s.push(h),n&&(i++,n=void 0),o||(l=h)}let c=i-r.depth;return c>z3e&&(a=H3e(a,c),i-=c),new Hi(a.append(s),i)}remapping(e,n){let r=new Mp;return this.items.forEach((o,s)=>{let i=o.mirrorOffset!=null&&s-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,i)},e,n),r}addMaps(e){return this.eventCount==0?this:new Hi(this.items.append(e.map(n=>new Ia(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-n),s=e.mapping,i=e.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},o);let l=n;this.items.forEach(h=>{let p=s.getMirror(--l);if(p==null)return;i=Math.min(i,p);let m=s.maps[p];if(h.step){let y=e.steps[p].invert(e.docs[p]),x=h.selection&&h.selection.map(s.slice(l+1,p));x&&a++,r.push(new Ia(m,y,x))}else r.push(new Ia(m))},o);let c=[];for(let h=n;h<i;h++)c.push(new Ia(s.maps[h]));let u=this.items.slice(0,o).append(c).append(r),f=new Hi(u,a);return f.emptyItemCount()>U3e&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,o=[],s=0;return this.items.forEach((i,a)=>{if(a>=e)o.push(i),i.selection&&s++;else if(i.step){let l=i.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=i.selection&&i.selection.map(n.slice(r));u&&s++;let f=new Ia(c.invert(),l,u),h,p=o.length-1;(h=o.length&&o[p].merge(f))?o[p]=h:o.push(f)}}else i.map&&r--},this.items.length,0),new Hi(Or.from(o.reverse()),s)}}Hi.empty=new Hi(Or.empty,0);function H3e(t,e){let n;return t.forEach((r,o)=>{if(r.selection&&e--==0)return n=o,!1}),t.slice(n)}class Ia{constructor(e,n,r,o){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Ia(n.getMap().invert(),n,this.selection)}}}class tu{constructor(e,n,r,o,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=s}}const z3e=20;function W3e(t,e,n,r){let o=n.getMeta(gf),s;if(o)return o.historyState;n.getMeta(K3e)&&(t=new tu(t.done,t.undone,null,0,-1));let i=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(i&&i.getMeta(gf))return i.getMeta(gf).redo?new tu(t.done.addTransform(n,void 0,r,Tb(e)),t.undone,O6(n.mapping.maps),t.prevTime,t.prevComposition):new tu(t.done,t.undone.addTransform(n,void 0,r,Tb(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(i&&i.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!i&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!G3e(n,t.prevRanges)),c=i?WS(t.prevRanges,n.mapping):O6(n.mapping.maps);return new tu(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,Tb(e)),Hi.empty,c,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new tu(t.done.rebased(n,s),t.undone.rebased(n,s),WS(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new tu(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),WS(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function G3e(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,o)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&o>=e[s]&&(n=!0)}),n}function O6(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,o,s,i)=>e.push(s,i));return e}function WS(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let o=e.map(t[r],1),s=e.map(t[r+1],-1);o<=s&&n.push(o,s)}return n}function q3e(t,e,n){let r=Tb(e),o=gf.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let i=s.selection.resolve(s.transform.doc),a=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),o,r),l=new tu(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(i).setMeta(gf,{redo:n,historyState:l})}let GS=!1,L6=null;function Tb(t){let e=t.plugins;if(L6!=e){GS=!1,L6=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){GS=!0;break}}return GS}const gf=new Ht("history"),K3e=new Ht("closeHistory");function Y3e(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new kt({key:gf,state:{init(){return new tu(Hi.empty,Hi.empty,null,0,-1)},apply(e,n,r){return W3e(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,o=r=="historyUndo"?MX:r=="historyRedo"?DX:null;return o?(n.preventDefault(),o(e.state,e.dispatch)):!1}}}})}function PX(t,e){return(n,r)=>{let o=gf.getState(n);if(!o||(t?o.undone:o.done).eventCount==0)return!1;if(r){let s=q3e(o,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const MX=PX(!1,!0),DX=PX(!0,!0),Q3e=sn.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>MX(t,e),redo:()=>({state:t,dispatch:e})=>DX(t,e)}},addProseMirrorPlugins(){return[Y3e(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),X3e="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",J3e="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",_m=(t,e)=>{for(const n in e)t[n]=e[n];return t},bR="numeric",xR="ascii",_R="alpha",Hy="asciinumeric",py="alphanumeric",CR="domain",OX="emoji",Z3e="scheme",e5e="slashscheme",qS="whitespace";function t5e(t,e){return t in e||(e[t]=[]),e[t]}function sf(t,e,n){e[bR]&&(e[Hy]=!0,e[py]=!0),e[xR]&&(e[Hy]=!0,e[_R]=!0),e[Hy]&&(e[py]=!0),e[_R]&&(e[py]=!0),e[py]&&(e[CR]=!0),e[OX]&&(e[CR]=!0);for(const r in e){const o=t5e(r,n);o.indexOf(t)<0&&o.push(t)}}function n5e(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function zo(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}zo.groups={};zo.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const o=e.jr[r][0],s=e.jr[r][1];if(s&&o.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let o=0;o<t.length;o++)this.tt(t[o],e,n,r)},tr(t,e,n,r){r=r||zo.groups;let o;return e&&e.j?o=e:(o=new zo(e),n&&r&&sf(e,n,r)),this.jr.push([t,o]),o},ts(t,e,n,r){let o=this;const s=t.length;if(!s)return o;for(let i=0;i<s-1;i++)o=o.tt(t[i]);return o.tt(t[s-1],e,n,r)},tt(t,e,n,r){r=r||zo.groups;const o=this;if(e&&e.j)return o.j[t]=e,e;const s=e;let i,a=o.go(t);if(a?(i=new zo,_m(i.j,a.j),i.jr.push.apply(i.jr,a.jr),i.jd=a.jd,i.t=a.t):i=new zo,s){if(r)if(i.t&&typeof i.t=="string"){const l=_m(n5e(i.t,r),n);sf(s,l,r)}else n&&sf(s,n,r);i.t=s}return o.j[t]=i,i}};const vt=(t,e,n,r,o)=>t.ta(e,n,r,o),Un=(t,e,n,r,o)=>t.tr(e,n,r,o),j6=(t,e,n,r,o)=>t.ts(e,n,r,o),Pe=(t,e,n,r,o)=>t.tt(e,n,r,o),jl="WORD",ER="UWORD",LX="ASCIINUMERICAL",jX="ALPHANUMERICAL",nv="LOCALHOST",kR="TLD",SR="UTLD",Nb="SCHEME",Jh="SLASH_SCHEME",a5="NUM",TR="WS",l5="NL",zy="OPENBRACE",Wy="CLOSEBRACE",y_="OPENBRACKET",v_="CLOSEBRACKET",w_="OPENPAREN",b_="CLOSEPAREN",x_="OPENANGLEBRACKET",__="CLOSEANGLEBRACKET",C_="FULLWIDTHLEFTPAREN",E_="FULLWIDTHRIGHTPAREN",k_="LEFTCORNERBRACKET",S_="RIGHTCORNERBRACKET",T_="LEFTWHITECORNERBRACKET",N_="RIGHTWHITECORNERBRACKET",I_="FULLWIDTHLESSTHAN",R_="FULLWIDTHGREATERTHAN",A_="AMPERSAND",c5="APOSTROPHE",P_="ASTERISK",nu="AT",M_="BACKSLASH",D_="BACKTICK",O_="CARET",uu="COLON",u5="COMMA",L_="DOLLAR",Ra="DOT",j_="EQUALS",d5="EXCLAMATION",Ys="HYPHEN",Gy="PERCENT",V_="PIPE",$_="PLUS",B_="POUND",qy="QUERY",f5="QUOTE",VX="FULLWIDTHMIDDLEDOT",h5="SEMI",Aa="SLASH",Ky="TILDE",F_="UNDERSCORE",$X="EMOJI",U_="SYM";var BX=Object.freeze({__proto__:null,WORD:jl,UWORD:ER,ASCIINUMERICAL:LX,ALPHANUMERICAL:jX,LOCALHOST:nv,TLD:kR,UTLD:SR,SCHEME:Nb,SLASH_SCHEME:Jh,NUM:a5,WS:TR,NL:l5,OPENBRACE:zy,CLOSEBRACE:Wy,OPENBRACKET:y_,CLOSEBRACKET:v_,OPENPAREN:w_,CLOSEPAREN:b_,OPENANGLEBRACKET:x_,CLOSEANGLEBRACKET:__,FULLWIDTHLEFTPAREN:C_,FULLWIDTHRIGHTPAREN:E_,LEFTCORNERBRACKET:k_,RIGHTCORNERBRACKET:S_,LEFTWHITECORNERBRACKET:T_,RIGHTWHITECORNERBRACKET:N_,FULLWIDTHLESSTHAN:I_,FULLWIDTHGREATERTHAN:R_,AMPERSAND:A_,APOSTROPHE:c5,ASTERISK:P_,AT:nu,BACKSLASH:M_,BACKTICK:D_,CARET:O_,COLON:uu,COMMA:u5,DOLLAR:L_,DOT:Ra,EQUALS:j_,EXCLAMATION:d5,HYPHEN:Ys,PERCENT:Gy,PIPE:V_,PLUS:$_,POUND:B_,QUERY:qy,QUOTE:f5,FULLWIDTHMIDDLEDOT:VX,SEMI:h5,SLASH:Aa,TILDE:Ky,UNDERSCORE:F_,EMOJI:$X,SYM:U_});const Dl=/[a-z]/,Gg=new RegExp("\\p{L}","u"),KS=new RegExp("\\p{Emoji}","u"),Ol=/\d/,YS=/\s/,V6="\r",QS=`
`,r5e="️",o5e="‍",XS="￼";let N0=null,I0=null;function s5e(t=[]){const e={};zo.groups=e;const n=new zo;N0==null&&(N0=$6(X3e)),I0==null&&(I0=$6(J3e)),Pe(n,"'",c5),Pe(n,"{",zy),Pe(n,"}",Wy),Pe(n,"[",y_),Pe(n,"]",v_),Pe(n,"(",w_),Pe(n,")",b_),Pe(n,"<",x_),Pe(n,">",__),Pe(n,"（",C_),Pe(n,"）",E_),Pe(n,"「",k_),Pe(n,"」",S_),Pe(n,"『",T_),Pe(n,"』",N_),Pe(n,"＜",I_),Pe(n,"＞",R_),Pe(n,"&",A_),Pe(n,"*",P_),Pe(n,"@",nu),Pe(n,"`",D_),Pe(n,"^",O_),Pe(n,":",uu),Pe(n,",",u5),Pe(n,"$",L_),Pe(n,".",Ra),Pe(n,"=",j_),Pe(n,"!",d5),Pe(n,"-",Ys),Pe(n,"%",Gy),Pe(n,"|",V_),Pe(n,"+",$_),Pe(n,"#",B_),Pe(n,"?",qy),Pe(n,'"',f5),Pe(n,"/",Aa),Pe(n,";",h5),Pe(n,"~",Ky),Pe(n,"_",F_),Pe(n,"\\",M_),Pe(n,"・",VX);const r=Un(n,Ol,a5,{[bR]:!0});Un(r,Ol,r);const o=Un(r,Dl,LX,{[Hy]:!0}),s=Un(r,Gg,jX,{[py]:!0}),i=Un(n,Dl,jl,{[xR]:!0});Un(i,Ol,o),Un(i,Dl,i),Un(o,Ol,o),Un(o,Dl,o);const a=Un(n,Gg,ER,{[_R]:!0});Un(a,Dl),Un(a,Ol,s),Un(a,Gg,a),Un(s,Ol,s),Un(s,Dl),Un(s,Gg,s);const l=Pe(n,QS,l5,{[qS]:!0}),c=Pe(n,V6,TR,{[qS]:!0}),u=Un(n,YS,TR,{[qS]:!0});Pe(n,XS,u),Pe(c,QS,l),Pe(c,XS,u),Un(c,YS,u),Pe(u,V6),Pe(u,QS),Un(u,YS,u),Pe(u,XS,u);const f=Un(n,KS,$X,{[OX]:!0});Pe(f,"#"),Un(f,KS,f),Pe(f,r5e,f);const h=Pe(f,o5e);Pe(h,"#"),Un(h,KS,f);const p=[[Dl,i],[Ol,o]],m=[[Dl,null],[Gg,a],[Ol,s]];for(let y=0;y<N0.length;y++)qc(n,N0[y],kR,jl,p);for(let y=0;y<I0.length;y++)qc(n,I0[y],SR,ER,m);sf(kR,{tld:!0,ascii:!0},e),sf(SR,{utld:!0,alpha:!0},e),qc(n,"file",Nb,jl,p),qc(n,"mailto",Nb,jl,p),qc(n,"http",Jh,jl,p),qc(n,"https",Jh,jl,p),qc(n,"ftp",Jh,jl,p),qc(n,"ftps",Jh,jl,p),sf(Nb,{scheme:!0,ascii:!0},e),sf(Jh,{slashscheme:!0,ascii:!0},e),t=t.sort((y,x)=>y[0]>x[0]?1:-1);for(let y=0;y<t.length;y++){const x=t[y][0],C=t[y][1]?{[Z3e]:!0}:{[e5e]:!0};x.indexOf("-")>=0?C[CR]=!0:Dl.test(x)?Ol.test(x)?C[Hy]=!0:C[xR]=!0:C[bR]=!0,j6(n,x,x,C)}return j6(n,"localhost",nv,{ascii:!0}),n.jd=new zo(U_),{start:n,tokens:_m({groups:e},BX)}}function FX(t,e){const n=i5e(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,o=[];let s=0,i=0;for(;i<r;){let a=t,l=null,c=0,u=null,f=-1,h=-1;for(;i<r&&(l=a.go(n[i]));)a=l,a.accepts()?(f=0,h=0,u=a):f>=0&&(f+=n[i].length,h++),c+=n[i].length,s+=n[i].length,i++;s-=f,i-=h,c-=f,o.push({t:u.t,v:e.slice(s-c,s),s:s-c,e:s})}return o}function i5e(t){const e=[],n=t.length;let r=0;for(;r<n;){let o=t.charCodeAt(r),s,i=o<55296||o>56319||r+1===n||(s=t.charCodeAt(r+1))<56320||s>57343?t[r]:t.slice(r,r+2);e.push(i),r+=i.length}return e}function qc(t,e,n,r,o){let s;const i=e.length;for(let a=0;a<i-1;a++){const l=e[a];t.j[l]?s=t.j[l]:(s=new zo(r),s.jr=o.slice(),t.j[l]=s),t=s}return s=new zo(n),s.jr=o.slice(),t.j[e[i-1]]=s,s}function $6(t){const e=[],n=[];let r=0,o="0123456789";for(;r<t.length;){let s=0;for(;o.indexOf(t[r+s])>=0;)s++;if(s>0){e.push(n.join(""));for(let i=parseInt(t.substring(r,r+s),10);i>0;i--)n.pop();r+=s}else n.push(t[r]),r++}return e}const rv={defaultProtocol:"http",events:null,format:B6,formatHref:B6,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function p5(t,e=null){let n=_m({},rv);t&&(n=_m(n,t instanceof p5?t.o:t));const r=n.ignoreTags,o=[];for(let s=0;s<r.length;s++)o.push(r[s].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=o}p5.prototype={o:rv,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let o=this.o[t];return o&&(typeof o=="object"?(o=n.t in o?o[n.t]:rv[t],typeof o=="function"&&r&&(o=o(e,n))):typeof o=="function"&&r&&(o=o(e,n.t,n)),o)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function B6(t){return t}function UX(t,e){this.t="token",this.v=t,this.tk=e}UX.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"…":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=rv.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),o=t.get("tagName",n,e),s=this.toFormattedString(t),i={},a=t.get("className",n,e),l=t.get("target",n,e),c=t.get("rel",n,e),u=t.getObj("attributes",n,e),f=t.getObj("events",n,e);return i.href=r,a&&(i.class=a),l&&(i.target=l),c&&(i.rel=c),u&&_m(i,u),{tagName:o,attributes:i,content:s,eventListeners:f}}};function c2(t,e){class n extends UX{constructor(o,s){super(o,s),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const F6=c2("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),U6=c2("text"),a5e=c2("nl"),R0=c2("url",{isLink:!0,toHref(t=rv.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==nv&&t[1].t===uu}}),Gs=t=>new zo(t);function l5e({groups:t}){const e=t.domain.concat([A_,P_,nu,M_,D_,O_,L_,j_,Ys,a5,Gy,V_,$_,B_,Aa,U_,Ky,F_]),n=[uu,u5,Ra,d5,Gy,qy,f5,h5,x_,__,zy,Wy,v_,y_,w_,b_,C_,E_,k_,S_,T_,N_,I_,R_],r=[A_,c5,P_,M_,D_,O_,L_,j_,Ys,zy,Wy,Gy,V_,$_,B_,qy,Aa,U_,Ky,F_],o=Gs(),s=Pe(o,Ky);vt(s,r,s),vt(s,t.domain,s);const i=Gs(),a=Gs(),l=Gs();vt(o,t.domain,i),vt(o,t.scheme,a),vt(o,t.slashscheme,l),vt(i,r,s),vt(i,t.domain,i);const c=Pe(i,nu);Pe(s,nu,c),Pe(a,nu,c),Pe(l,nu,c);const u=Pe(s,Ra);vt(u,r,s),vt(u,t.domain,s);const f=Gs();vt(c,t.domain,f),vt(f,t.domain,f);const h=Pe(f,Ra);vt(h,t.domain,f);const p=Gs(F6);vt(h,t.tld,p),vt(h,t.utld,p),Pe(c,nv,p);const m=Pe(f,Ys);Pe(m,Ys,m),vt(m,t.domain,f),vt(p,t.domain,f),Pe(p,Ra,h),Pe(p,Ys,m);const y=Pe(p,uu);vt(y,t.numeric,F6);const x=Pe(i,Ys),b=Pe(i,Ra);Pe(x,Ys,x),vt(x,t.domain,i),vt(b,r,s),vt(b,t.domain,i);const C=Gs(R0);vt(b,t.tld,C),vt(b,t.utld,C),vt(C,t.domain,i),vt(C,r,s),Pe(C,Ra,b),Pe(C,Ys,x),Pe(C,nu,c);const E=Pe(C,uu),R=Gs(R0);vt(E,t.numeric,R);const D=Gs(R0),O=Gs();vt(D,e,D),vt(D,n,O),vt(O,e,D),vt(O,n,O),Pe(C,Aa,D),Pe(R,Aa,D);const T=Pe(a,uu),I=Pe(l,uu),P=Pe(I,Aa),L=Pe(P,Aa);vt(a,t.domain,i),Pe(a,Ra,b),Pe(a,Ys,x),vt(l,t.domain,i),Pe(l,Ra,b),Pe(l,Ys,x),vt(T,t.domain,D),Pe(T,Aa,D),Pe(T,qy,D),vt(L,t.domain,D),vt(L,e,D),Pe(L,Aa,D);const $=[[zy,Wy],[y_,v_],[w_,b_],[x_,__],[C_,E_],[k_,S_],[T_,N_],[I_,R_]];for(let F=0;F<$.length;F++){const[V,be]=$[F],ge=Pe(D,V);Pe(O,V,ge),Pe(ge,be,D);const le=Gs(R0);vt(ge,e,le);const Q=Gs();vt(ge,n),vt(le,e,le),vt(le,n,Q),vt(Q,e,le),vt(Q,n,Q),Pe(le,be,D),Pe(Q,be,D)}return Pe(o,nv,C),Pe(o,l5,a5e),{start:o,tokens:BX}}function c5e(t,e,n){let r=n.length,o=0,s=[],i=[];for(;o<r;){let a=t,l=null,c=null,u=0,f=null,h=-1;for(;o<r&&!(l=a.go(n[o].t));)i.push(n[o++]);for(;o<r&&(c=l||a.go(n[o].t));)l=null,a=c,a.accepts()?(h=0,f=a):h>=0&&h++,o++,u++;if(h<0)o-=u,o<r&&(i.push(n[o]),o++);else{i.length>0&&(s.push(JS(U6,e,i)),i=[]),o-=h,u-=h;const p=f.t,m=n.slice(o-u,o);s.push(JS(p,e,m))}}return i.length>0&&s.push(JS(U6,e,i)),s}function JS(t,e,n){const r=n[0].s,o=n[n.length-1].e,s=e.slice(r,o);return new t(s,n)}const u5e=typeof console<"u"&&console&&console.warn||(()=>{}),d5e="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Cn={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function f5e(){return zo.groups={},Cn.scanner=null,Cn.parser=null,Cn.tokenQueue=[],Cn.pluginQueue=[],Cn.customSchemes=[],Cn.initialized=!1,Cn}function H6(t,e=!1){if(Cn.initialized&&u5e(`linkifyjs: already initialized - will not register custom scheme "${t}" ${d5e}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Cn.customSchemes.push([t,e])}function h5e(){Cn.scanner=s5e(Cn.customSchemes);for(let t=0;t<Cn.tokenQueue.length;t++)Cn.tokenQueue[t][1]({scanner:Cn.scanner});Cn.parser=l5e(Cn.scanner.tokens);for(let t=0;t<Cn.pluginQueue.length;t++)Cn.pluginQueue[t][1]({scanner:Cn.scanner,parser:Cn.parser});return Cn.initialized=!0,Cn}function m5(t){return Cn.initialized||h5e(),c5e(Cn.parser.start,t,FX(Cn.scanner.start,t))}m5.scan=FX;function HX(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new p5(n),o=m5(t),s=[];for(let i=0;i<o.length;i++){const a=o[i];a.isLink&&(!e||a.t===e)&&r.check(a)&&s.push(a.toFormattedObject(r))}return s}function p5e(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function m5e(t){return new kt({key:new Ht("autolink"),appendTransaction:(e,n,r)=>{const o=e.some(c=>c.docChanged)&&!n.doc.eq(r.doc),s=e.some(c=>c.getMeta("preventAutolink"));if(!o||s)return;const{tr:i}=r,a=SY(n.doc,[...e]);if(IY(a).forEach(({newRange:c})=>{const u=TY(r.doc,c,p=>p.isTextblock);let f,h;if(u.length>1?(f=u[0],h=r.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ")):u.length&&r.doc.textBetween(c.from,c.to," "," ").endsWith(" ")&&(f=u[0],h=r.doc.textBetween(f.pos,c.to,void 0," ")),f&&h){const p=h.split(" ").filter(b=>b!=="");if(p.length<=0)return!1;const m=p[p.length-1],y=f.pos+h.lastIndexOf(m);if(!m)return!1;const x=m5(m).map(b=>b.toObject(t.defaultProtocol));if(!p5e(x))return!1;x.filter(b=>b.isLink).map(b=>({...b,from:y+b.start+1,to:y+b.end+1})).filter(b=>r.schema.marks.code?!r.doc.rangeHasMark(b.from,b.to,r.schema.marks.code):!0).filter(b=>t.validate(b.value)).filter(b=>t.shouldAutoLink(b.value)).forEach(b=>{N3(b.from,b.to,r.doc).some(C=>C.mark.type===t.type)||i.addMark(b.from,b.to,t.type.create({href:b.href}))})}}),!!i.steps.length)return i}})}function g5e(t){return new kt({key:new Ht("handleClickLink"),props:{handleClick:(e,n,r)=>{var o,s;if(r.button!==0||!e.editable)return!1;let i=r.target;const a=[];for(;i.nodeName!=="DIV";)a.push(i),i=i.parentNode;if(!a.find(h=>h.nodeName==="A"))return!1;const l=NY(e.state,t.type.name),c=r.target,u=(o=c==null?void 0:c.href)!==null&&o!==void 0?o:l.href,f=(s=c==null?void 0:c.target)!==null&&s!==void 0?s:l.target;return c&&u?(window.open(u,f),!0):!1}}})}function y5e(t){return new kt({key:new Ht("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:o}=e,{selection:s}=o,{empty:i}=s;if(i)return!1;let a="";r.content.forEach(c=>{a+=c.textContent});const l=HX(a,{defaultProtocol:t.defaultProtocol}).find(c=>c.isLink&&c.value===a);return!a||!l?!1:t.editor.commands.setMark(t.type,{href:l.href})}}})}const v5e=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function jd(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const o=typeof r=="string"?r:r.scheme;o&&n.push(o)}),!t||t.replace(v5e,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z+.-]+(?:[^a-z+.-:]|$))`,"i"))}const w5e=As.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){H6(t);return}H6(t.scheme,t.optionalSlashes)})},onDestroy(){f5e()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!jd(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!jd(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!jd(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",gi(this.options.HTMLAttributes,t),0]:["a",gi(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!jd(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!jd(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Bf({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,o=HX(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:i=>!!jd(i,n),protocols:n,defaultProtocol:r}));o.length&&o.forEach(s=>e.push({text:s.value,data:{href:s.href},index:s.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(m5e({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:o=>!!jd(o,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(g5e({type:this.type})),this.options.linkOnPaste&&t.push(y5e({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),b5e=fa.create({name:"text",group:"inline"});function x5e(t={}){return new kt({view(e){return new _5e(e,t)}})}class _5e{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let s=i=>{this[o](i)};return e.dom.addEventListener(o,s),{name:o,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),f=a?u.bottom:u.top;a&&l&&(f=(f+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:f-this.width/2,bottom:f+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let o=this.editorView.dom.offsetParent;this.element||(this.element=o.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let s,i;if(!o||o==document.body&&getComputedStyle(o).position=="static")s=-pageXOffset,i=-pageYOffset;else{let a=o.getBoundingClientRect();s=a.left-o.scrollLeft,i=a.top-o.scrollTop}this.element.style.left=r.left-s+"px",this.element.style.top=r.top-i+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),o=r&&r.type.spec.disableDropCursor,s=typeof o=="function"?o(this.editorView,n,e):o;if(n&&!s){let i=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=vK(this.editorView.state.doc,i,this.editorView.dragging.slice);a!=null&&(i=a)}this.setCursor(i),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}var C5e=Object.defineProperty,E5e=(t,e,n)=>e in t?C5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pe=(t,e,n)=>E5e(t,typeof e!="symbol"?e+"":e,n);const k5e={slash_menu:{heading:{title:"Heading 1",subtext:"Top-level heading",aliases:["h","heading1","h1"],group:"Headings"},heading_2:{title:"Heading 2",subtext:"Key section heading",aliases:["h2","heading2","subheading"],group:"Headings"},heading_3:{title:"Heading 3",subtext:"Subsection and group heading",aliases:["h3","heading3","subheading"],group:"Headings"},numbered_list:{title:"Numbered List",subtext:"List with ordered items",aliases:["ol","li","list","numberedlist","numbered list"],group:"Basic blocks"},bullet_list:{title:"Bullet List",subtext:"List with unordered items",aliases:["ul","li","list","bulletlist","bullet list"],group:"Basic blocks"},check_list:{title:"Check List",subtext:"List with checkboxes",aliases:["ul","li","list","checklist","check list","checked list","checkbox"],group:"Basic blocks"},paragraph:{title:"Paragraph",subtext:"The body of your document",aliases:["p","paragraph"],group:"Basic blocks"},code_block:{title:"Code Block",subtext:"Code block with syntax highlighting",aliases:["code","pre"],group:"Basic blocks"},page_break:{title:"Page Break",subtext:"Page separator",aliases:["page","break","separator"],group:"Basic blocks"},table:{title:"Table",subtext:"Table with editable cells",aliases:["table"],group:"Advanced"},image:{title:"Image",subtext:"Resizable image with caption",aliases:["image","imageUpload","upload","img","picture","media","url"],group:"Media"},video:{title:"Video",subtext:"Resizable video with caption",aliases:["video","videoUpload","upload","mp4","film","media","url"],group:"Media"},audio:{title:"Audio",subtext:"Embedded audio with caption",aliases:["audio","audioUpload","upload","mp3","sound","media","url"],group:"Media"},file:{title:"File",subtext:"Embedded file",aliases:["file","upload","embed","media","url"],group:"Media"},emoji:{title:"Emoji",subtext:"Search for and insert an emoji",aliases:["emoji","emote","emotion","face"],group:"Others"}},placeholders:{default:"Enter text or type '/' for commands",heading:"Heading",bulletListItem:"List",numberedListItem:"List",checkListItem:"List"},file_blocks:{image:{add_button_text:"Add image"},video:{add_button_text:"Add video"},audio:{add_button_text:"Add audio"},file:{add_button_text:"Add file"}},side_menu:{add_block_label:"Add block",drag_handle_label:"Open block menu"},drag_handle:{delete_menuitem:"Delete",colors_menuitem:"Colors"},table_handle:{delete_column_menuitem:"Delete column",delete_row_menuitem:"Delete row",add_left_menuitem:"Add column left",add_right_menuitem:"Add column right",add_above_menuitem:"Add row above",add_below_menuitem:"Add row below"},suggestion_menu:{no_items_title:"No items found",loading:"Loading…"},color_picker:{text_title:"Text",background_title:"Background",colors:{default:"Default",gray:"Gray",brown:"Brown",red:"Red",orange:"Orange",yellow:"Yellow",green:"Green",blue:"Blue",purple:"Purple",pink:"Pink"}},formatting_toolbar:{bold:{tooltip:"Bold",secondary_tooltip:"Mod+B"},italic:{tooltip:"Italic",secondary_tooltip:"Mod+I"},underline:{tooltip:"Underline",secondary_tooltip:"Mod+U"},strike:{tooltip:"Strike",secondary_tooltip:"Mod+Shift+S"},code:{tooltip:"Code",secondary_tooltip:""},colors:{tooltip:"Colors"},link:{tooltip:"Create link",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Edit caption",input_placeholder:"Edit caption"},file_replace:{tooltip:{image:"Replace image",video:"Replace video",audio:"Replace audio",file:"Replace file"}},file_rename:{tooltip:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"},input_placeholder:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"}},file_download:{tooltip:{image:"Download image",video:"Download video",audio:"Download audio",file:"Download file"}},file_delete:{tooltip:{image:"Delete image",video:"Delete video",audio:"Delete audio",file:"Delete file"}},file_preview_toggle:{tooltip:"Toggle preview"},nest:{tooltip:"Nest block",secondary_tooltip:"Tab"},unnest:{tooltip:"Unnest block",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Align text left"},align_center:{tooltip:"Align text center"},align_right:{tooltip:"Align text right"},align_justify:{tooltip:"Justify text"}},file_panel:{upload:{title:"Upload",file_placeholder:{image:"Upload image",video:"Upload video",audio:"Upload audio",file:"Upload file"},upload_error:"Error: Upload failed"},embed:{title:"Embed",embed_button:{image:"Embed image",video:"Embed video",audio:"Embed audio",file:"Embed file"},url_placeholder:"Enter URL"}},link_toolbar:{delete:{tooltip:"Remove link"},edit:{text:"Edit link",tooltip:"Edit"},open:{tooltip:"Open in new tab"},form:{title_placeholder:"Edit title",url_placeholder:"Edit URL"}},generic:{ctrl_shortcut:"Ctrl"}};let ol=class extends Error{constructor(e){super(`Unreachable case: ${e}`)}};function zt(t,e=!0){const{"data-test":n,...r}=t;if(Object.keys(r).length>0&&e)throw new Error("Object must be empty "+JSON.stringify(t))}function S5e(t,e=JSON.stringify){const n={};return t.filter(r=>{const o=e(r);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function T5e(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return S5e(e)}const u2=sn.create({name:"uniqueID",priority:1e4,addOptions(){return{attributeName:"id",types:[],setIdAttribute:!1,generateID:()=>{if(typeof window<"u"&&window.__TEST_OPTIONS){const t=window.__TEST_OPTIONS;return t.mockID===void 0?t.mockID=0:t.mockID++,t.mockID.toString()}return pTe()},filterTransaction:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{[this.options.attributeName]:{default:null,parseHTML:t=>t.getAttribute(`data-${this.options.attributeName}`),renderHTML:t=>{const e={[`data-${this.options.attributeName}`]:t[this.options.attributeName]};return this.options.setIdAttribute?{...e,id:t[this.options.attributeName]}:e}}}}]},addProseMirrorPlugins(){let t=null,e=!1;return[new kt({key:new Ht("uniqueID"),appendTransaction:(n,r,o)=>{const s=n.some(p=>p.docChanged)&&!r.doc.eq(o.doc),i=this.options.filterTransaction&&n.some(p=>{let m,y;return!(!((y=(m=this.options).filterTransaction)===null||y===void 0)&&y.call(m,p))});if(!s||i)return;const{tr:a}=o,{types:l,attributeName:c,generateID:u}=this.options,f=SY(r.doc,n),{mapping:h}=f;if(IY(f).forEach(({newRange:p})=>{const m=TY(o.doc,p,b=>l.includes(b.type.name)),y=m.map(({node:b})=>b.attrs[c]).filter(b=>b!==null),x=T5e(y);m.forEach(({node:b,pos:C})=>{let E;const R=(E=a.doc.nodeAt(C))===null||E===void 0?void 0:E.attrs[c];if(R===null){const O=r.doc.type.createAndFill().content;if(r.doc.content.findDiffStart(O)===null){const T=JSON.parse(JSON.stringify(o.doc.toJSON()));if(T.content[0].content[0].attrs.id="initialBlockId",JSON.stringify(T.content)===JSON.stringify(O.toJSON())){a.setNodeMarkup(C,void 0,{...b.attrs,[c]:"initialBlockId"});return}}a.setNodeMarkup(C,void 0,{...b.attrs,[c]:u()});return}const{deleted:D}=h.invert().mapResult(C);D&&x.includes(R)&&a.setNodeMarkup(C,void 0,{...b.attrs,[c]:u()})})}),!!a.steps.length)return a},view(n){const r=o=>{let s;t=!((s=n.dom.parentElement)===null||s===void 0)&&s.contains(o.target)?n.dom.parentElement:null};return window.addEventListener("dragstart",r),{destroy(){window.removeEventListener("dragstart",r)}}},props:{handleDOMEvents:{drop:(n,r)=>{let o;return(t!==n.dom.parentElement||((o=r.dataTransfer)===null||o===void 0?void 0:o.effectAllowed)==="copy")&&(t=null,e=!0),!1},paste:()=>(e=!0,!1)},transformPasted:n=>{if(!e)return n;const{types:r,attributeName:o}=this.options,s=i=>{const a=[];return i.forEach(l=>{if(l.isText){a.push(l);return}if(!r.includes(l.type.name)){a.push(l.copy(s(l.content)));return}const c=l.type.create({...l.attrs,[o]:null},s(l.content),l.marks);a.push(c)}),_e.from(a)};return e=!1,new je(s(n.content),n.openStart,n.openEnd)}}})]}});function z6(t){return t.type==="link"}function N5e(t){return typeof t!="string"&&t.type==="link"}function H_(t){return typeof t!="string"&&t.type==="text"}function W6(t,e,n){const r=[];for(const[o,s]of Object.entries(t.styles)){const i=n[o];if(!i)throw new Error(`style ${o} not found in styleSchema`);if(i.propSchema==="boolean")r.push(e.mark(o));else if(i.propSchema==="string")r.push(e.mark(o,{stringValue:s}));else throw new ol(i.propSchema)}return t.text.split(/(\n)/g).filter(o=>o.length>0).map(o=>o===`
`?e.nodes.hardBreak.createChecked():e.text(o,r))}function I5e(t,e,n){const r=e.marks.link.create({href:t.href});return NR(t.content,e,n).map(o=>{if(o.type.name==="text")return o.mark([...o.marks,r]);if(o.type.name==="hardBreak")return o;throw new Error("unexpected node type")})}function NR(t,e,n){const r=[];if(typeof t=="string")return r.push(...W6({type:"text",text:t,styles:{}},e,n)),r;for(const o of t)r.push(...W6(o,e,n));return r}function sl(t,e,n){const r=[];for(const o of t)typeof o=="string"?r.push(...NR(o,e,n)):N5e(o)?r.push(...I5e(o,e,n)):H_(o)?r.push(...NR([o],e,n)):r.push(zX(o,e,n));return r}function d2(t,e,n){var r;const o=[];for(const s of t.rows){const i=[];for(let l=0;l<s.cells.length;l++){const c=s.cells[l];let u;if(!c)u=e.nodes.tableParagraph.createChecked({});else if(typeof c=="string")u=e.nodes.tableParagraph.createChecked({},e.text(c));else{const h=sl(c,e,n);u=e.nodes.tableParagraph.createChecked({},h)}const f=e.nodes.tableCell.createChecked({colwidth:(r=t.columnWidths)!=null&&r[l]?[t.columnWidths[l]]:null},u);i.push(f)}const a=e.nodes.tableRow.createChecked({},i);o.push(a)}return o}function zX(t,e,n){let r,o=t.type;if(o===void 0&&(o="paragraph"),!e.nodes[o])throw new Error(`node type ${o} not found in schema`);if(!t.content)r=e.nodes[o].createChecked(t.props);else if(typeof t.content=="string"){const s=sl([t.content],e,n);r=e.nodes[o].createChecked(t.props,s)}else if(Array.isArray(t.content)){const s=sl(t.content,e,n);r=e.nodes[o].createChecked(t.props,s)}else if(t.content.type==="tableContent"){const s=d2(t.content,e,n);r=e.nodes[o].createChecked(t.props,s)}else throw new ol(t.content.type);return r}function rh(t,e,n){let r=t.id;r===void 0&&(r=u2.options.generateID());const o=[];if(t.children)for(const i of t.children)o.push(rh(i,e,n));const s=e.nodes[t.type];if(s.isInGroup("blockContent")){const i=zX(t,e,n),a=o.length>0?e.nodes.blockGroup.createChecked({},o):void 0;return e.nodes.blockContainer.createChecked({id:r,...t.props},a?[i,a]:i)}else{if(s.isInGroup("bnBlock"))return e.nodes[t.type].createChecked({id:r,...t.props},o);throw new Error(`block type ${t.type} doesn't match blockContent or bnBlock group`)}}function WX(t){const e=[...t.classList].filter(n=>!n.startsWith("bn-"));e.length>0?t.className=e.join(" "):t.removeAttribute("class")}function GX(t,e,n,r){let o;if(e)if(typeof e=="string")o=sl([e],t.pmSchema,t.schema.styleSchema);else if(Array.isArray(e))o=sl(e,t.pmSchema,t.schema.styleSchema);else if(e.type==="tableContent")o=d2(e,t.pmSchema,t.schema.styleSchema);else throw new ol(e.type);else throw new Error("blockContent is required");const s=n.serializeFragment(_e.from(o),r);return s.nodeType===1&&WX(s),s}function R5e(t,e,n,r,o,s,i){var a,l,c,u,f,h,p,m;const y=(i==null?void 0:i.document)??document,x=e.pmSchema.nodes.blockContainer;let b=n.props;if(!n.props){b={};for(const[O,T]of Object.entries(e.schema.blockSchema[n.type].propSchema))T.default!==void 0&&(b[O]=T.default)}const C=[...((l=(a=x.spec)==null?void 0:a.toDOM)==null?void 0:l.call(a,x.create({id:n.id,...b}))).dom.attributes],E=e.blockImplementations[n.type].implementation.toExternalHTML({...n,props:b},e),R=y.createDocumentFragment();if(E.dom.classList.contains("bn-block-content")){const O=[...C,...E.dom.attributes].filter(T=>T.name.startsWith("data")&&T.name!=="data-content-type"&&T.name!=="data-file-block"&&T.name!=="data-node-view-wrapper"&&T.name!=="data-node-type"&&T.name!=="data-id"&&T.name!=="data-index"&&T.name!=="data-editable");for(const T of O)E.dom.firstChild.setAttribute(T.name,T.value);WX(E.dom.firstChild),R.append(...E.dom.childNodes)}else R.append(E.dom);if(E.contentDOM&&n.content){const O=GX(e,n.content,r,i);E.contentDOM.appendChild(O)}let D;if(o.has(n.type)?D="OL":s.has(n.type)&&(D="UL"),D){if(((c=t.lastChild)==null?void 0:c.nodeName)!==D){const T=y.createElement(D);D==="OL"&&b!=null&&b.start&&(b==null?void 0:b.start)!==1&&T.setAttribute("start",b.start+""),t.append(T)}const O=y.createElement("li");O.append(R),t.lastChild.appendChild(O)}else t.append(R);if(n.children&&n.children.length>0){const O=y.createDocumentFragment();if(qX(O,e,n.children,r,o,s,i),((u=t.lastChild)==null?void 0:u.nodeName)==="UL"||((f=t.lastChild)==null?void 0:f.nodeName)==="OL")for(;((h=O.firstChild)==null?void 0:h.nodeName)==="UL"||((p=O.firstChild)==null?void 0:p.nodeName)==="OL";)t.lastChild.lastChild.appendChild(O.firstChild);e.pmSchema.nodes[n.type].isInGroup("blockContent")?t.append(O):(m=E.contentDOM)==null||m.append(O)}}const qX=(t,e,n,r,o,s,i)=>{for(const a of n)R5e(t,e,a,r,o,s,i)},A5e=(t,e,n,r,o,s)=>{const i=((s==null?void 0:s.document)??document).createDocumentFragment();return qX(i,t,e,n,r,o,s),i},f2=(t,e)=>{const n=Nc.fromSchema(t);return{exportBlocks:(r,o)=>{const s=A5e(e,r,n,new Set(["numberedListItem"]),new Set(["bulletListItem","checkListItem"]),o),i=document.createElement("div");return i.append(s),i.innerHTML},exportInlineContent:(r,o)=>{const s=GX(e,r,n,o),i=document.createElement("div");return i.append(s.cloneNode(!0)),i.innerHTML}}};function P5e(t,e,n,r){let o;if(e)if(typeof e=="string")o=sl([e],t.pmSchema,t.schema.styleSchema);else if(Array.isArray(e))o=sl(e,t.pmSchema,t.schema.styleSchema);else if(e.type==="tableContent")o=d2(e,t.pmSchema,t.schema.styleSchema);else throw new ol(e.type);else throw new Error("blockContent is required");return n.serializeFragment(_e.from(o),r)}function M5e(t,e,n,r,o){var s,i,a,l,c;const u=t.pmSchema.nodes.blockContainer;let f=e.props;if(!e.props){f={};for(const[m,y]of Object.entries(t.schema.blockSchema[e.type].propSchema))y.default!==void 0&&(f[m]=y.default)}const h=t.blockImplementations[e.type].implementation.toInternalHTML({...e,props:f},t);if(e.type==="numberedListItem"&&h.dom.setAttribute("data-index",r.toString()),h.contentDOM&&e.content){const m=P5e(t,e.content,n,o);h.contentDOM.appendChild(m)}if(t.pmSchema.nodes[e.type].isInGroup("bnBlock")){if(e.children&&e.children.length>0){const m=KX(t,e.children,n,o);(s=h.contentDOM)==null||s.append(m)}return h.dom}const p=(a=(i=u.spec)==null?void 0:i.toDOM)==null?void 0:a.call(i,u.create({id:e.id,...f}));return(l=p.contentDOM)==null||l.appendChild(h.dom),e.children&&e.children.length>0&&((c=p.contentDOM)==null||c.appendChild(YX(t,e.children,n,o))),p.dom}function KX(t,e,n,r){const o=((r==null?void 0:r.document)??document).createDocumentFragment();let s=0;for(const i of e){i.type==="numberedListItem"?s++:s=0;const a=M5e(t,i,n,s,r);o.appendChild(a)}return o}const YX=(t,e,n,r)=>{var o;const s=t.pmSchema.nodes.blockGroup,i=s.spec.toDOM(s.create({})),a=KX(t,e,n,r);return(o=i.contentDOM)==null||o.appendChild(a),i.dom},D5e=(t,e)=>{const n=Nc.fromSchema(t);return{serializeBlocks:(r,o)=>YX(e,r,n,o).outerHTML}};function Zu(t,e){const n=t.resolve(e);if(n.nodeAfter&&n.nodeAfter.type.isInGroup("bnBlock"))return{posBeforeNode:n.pos,node:n.nodeAfter};let r=n.depth,o=n.node(r);for(;r>0;){if(o.type.isInGroup("bnBlock"))return{posBeforeNode:n.before(r),node:o};r--,o=n.node(r)}const s=[];t.descendants((a,l)=>{a.type.isInGroup("bnBlock")&&s.push(l)}),console.warn(`Position ${e} is not within a blockContainer node.`);const i=t.resolve(s.find(a=>a>=e)||s[s.length-1]);return{posBeforeNode:i.pos,node:i.nodeAfter}}function g5(t,e){if(!t.type.isInGroup("bnBlock"))throw new Error(`Attempted to get bnBlock node at position but found node of different type ${t.type}`);const n=t,r=e,o=r+n.nodeSize,s={node:n,beforePos:r,afterPos:o};if(n.type.name==="blockContainer"){let i,a;if(n.forEach((l,c)=>{if(l.type.spec.group==="blockContent"){const u=l,f=r+c+1,h=f+l.nodeSize;i={node:u,beforePos:f,afterPos:h}}else if(l.type.name==="blockGroup"){const u=l,f=r+c+1,h=f+l.nodeSize;a={node:u,beforePos:f,afterPos:h}}}),!i)throw new Error(`blockContainer node does not contain a blockContent node in its children: ${n}`);return{isBlockContainer:!0,bnBlock:s,blockContent:i,childContainer:a,blockNoteType:i.node.type.name}}else{if(!s.node.type.isInGroup("childContainer"))throw new Error(`bnBlock node is not in the childContainer group: ${s.node}`);return{isBlockContainer:!1,bnBlock:s,childContainer:s,blockNoteType:s.node.type.name}}}function ed(t){return g5(t.node,t.posBeforeNode)}function ow(t){if(!t.nodeAfter)throw new Error(`Attempted to get blockContainer node at position ${t.pos} but a node at this position does not exist`);return g5(t.nodeAfter,t.pos)}function gn(t){const e=Zu(t.doc,t.selection.anchor);return ed(e)}function Ms(t,e){let n,r;if(e.firstChild.descendants((o,s)=>n?!1:!o.type.isInGroup("bnBlock")||o.attrs.id!==t?!0:(n=o,r=s+1,!1)),!(n===void 0||r===void 0))return{node:n,posBeforeNode:r}}const O5e=()=>typeof navigator<"u"&&(/Mac/.test(navigator.platform)||/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent));function Qs(t,e="Ctrl"){return O5e()?t.replace("Mod","⌘"):t.replace("Mod",e)}function Ds(...t){return t.filter(e=>e).join(" ")}const IR=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent);function Cc(t,e,n,r){const o=document.createElement("div");o.className=Ds("bn-block-content",n.class),o.setAttribute("data-content-type",t);for(const[i,a]of Object.entries(n))i!=="class"&&o.setAttribute(i,a);const s=document.createElement(e);s.className=Ds("bn-inline-content",r.class);for(const[i,a]of Object.entries(r))i!=="class"&&s.setAttribute(i,a);return o.appendChild(s),{dom:o,contentDOM:s}}const G6=(t,e)=>{let n=rh(t,e.pmSchema,e.schema.styleSchema);n.type.name==="blockContainer"&&(n=n.firstChild);const r=e.pmSchema.nodes[n.type.name].spec.toDOM;if(r===void 0)throw new Error("This block has no default HTML serialization as its corresponding TipTap node doesn't implement `renderHTML`.");const o=r(n);if(typeof o!="object"||!("dom"in o))throw new Error("Cannot use this block's default HTML serialization as its corresponding TipTap node's `renderHTML` function does not return an object with the `dom` property.");return o},_r={backgroundColor:{default:"default"},textColor:{default:"default"},textAlignment:{default:"left",values:["left","center","right","justify"]}},y5=["backgroundColor","textColor"];function z_(t){return"data-"+t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function q6(t){const e=t.split("/");return!e.length||e[e.length-1]===""?t:e[e.length-1]}function sw(t){const e={};return Object.entries(t).filter(([n,r])=>!y5.includes(n)).forEach(([n,r])=>{e[n]={default:r.default,keepOnSplit:!0,parseHTML:o=>{const s=o.getAttribute(z_(n));if(s===null)return null;if(r.default===void 0&&r.type==="boolean"||r.default!==void 0&&typeof r.default=="boolean")return s==="true"?!0:s==="false"?!1:null;if(r.default===void 0&&r.type==="number"||r.default!==void 0&&typeof r.default=="number"){const i=parseFloat(s);return!Number.isNaN(i)&&Number.isFinite(i)?i:null}return s},renderHTML:o=>o[n]!==r.default?{[z_(n)]:o[n]}:{}}}),e}function QX(t,e,n,r){if(typeof t=="boolean")throw new Error("Cannot find node position as getPos is a boolean, not a function.");const o=t(),s=n.state.doc.resolve(o).node().attrs.id;if(!s)throw new Error("Block doesn't have id");const i=e.getBlock(s);if(i.type!==r)throw new Error("Block type does not match");return i}function my(t,e,n,r,o=!1,s){const i=document.createElement("div");if(s!==void 0)for(const[a,l]of Object.entries(s))a!=="class"&&i.setAttribute(a,l);i.className=Ds("bn-block-content",(s==null?void 0:s.class)||""),i.setAttribute("data-content-type",e);for(const[a,l]of Object.entries(n)){const c=r[a].default;!y5.includes(a)&&l!==c&&i.setAttribute(z_(a),l)}return o&&i.setAttribute("data-file-block",""),i.appendChild(t.dom),t.contentDOM!==void 0&&(t.contentDOM.className=Ds("bn-inline-content",t.contentDOM.className),t.contentDOM.setAttribute("data-editable","")),{...t,dom:i}}function Ac(t){return fa.create(t)}function v5(t,e){return{config:t,implementation:e}}function oh(t,e,n){return v5({type:t.name,content:t.config.content==="inline*"?"inline":t.config.content==="tableRow+"?"table":"none",propSchema:e},{node:t,requiredExtensions:n,toInternalHTML:G6,toExternalHTML:G6})}function XX(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,n.config]))}function JX(t,e){t.stopEvent=n=>(n.type==="mousedown"&&setTimeout(()=>{e.view.dom.blur()},10),!0)}function ZX(t,e){const n=[{tag:"[data-content-type="+t.type+"]",contentElement:"[data-editable]"}];return e&&n.push({tag:"*",getAttrs(r){if(typeof r=="string")return!1;const o=e==null?void 0:e(r);return o===void 0?!1:o}}),n}function iw(t,e){const n=Ac({name:t.type,content:t.content==="inline"?"inline*":"",group:"blockContent",selectable:t.isSelectable??!0,isolating:!0,addAttributes(){return sw(t.propSchema)},parseHTML(){return ZX(t,e.parse)},renderHTML({HTMLAttributes:r}){const o=document.createElement("div");return my({dom:o,contentDOM:t.content==="inline"?o:void 0},t.type,{},t.propSchema,t.isFileBlock,r)},addNodeView(){return({getPos:r})=>{var o;const s=this.options.editor,i=QX(r,s,this.editor,t.type),a=((o=this.options.domAttributes)==null?void 0:o.blockContent)||{},l=e.render(i,s),c=my(l,i.type,i.props,t.propSchema,a);return t.isSelectable===!1&&JX(c,this.editor),c}}});if(n.name!==t.type)throw new Error("Node name does not match block type. This is a bug in BlockNote.");return v5(t,{node:n,toInternalHTML:(r,o)=>{var s;const i=((s=n.options.domAttributes)==null?void 0:s.blockContent)||{},a=e.render(r,o);return my(a,r.type,r.props,t.propSchema,t.isFileBlock,i)},toExternalHTML:(r,o)=>{var s,i;const a=((s=n.options.domAttributes)==null?void 0:s.blockContent)||{};let l=(i=e.toExternalHTML)==null?void 0:i.call(e,r,o);return l===void 0&&(l=e.render(r,o)),my(l,r.type,r.props,t.propSchema,a)}})}function eJ(t,e,n){const r={type:"tableContent",columnWidths:[],rows:[]};return t.content.forEach((o,s,i)=>{const a={cells:[]};i===0&&o.content.forEach(l=>{var c;r.columnWidths.push(((c=l.attrs.colwidth)==null?void 0:c[0])||void 0)}),o.content.forEach(l=>{a.cells.push(h2(l.firstChild,e,n))}),r.rows.push(a)}),r}function h2(t,e,n){const r=[];let o;return t.content.forEach(s=>{if(s.type.name==="hardBreak"){if(o)if(H_(o))o.text+=`
`;else if(z6(o))o.content[o.content.length-1].text+=`
`;else throw new Error("unexpected");else o={type:"text",text:`
`,styles:{}};return}if(s.type.name!=="link"&&s.type.name!=="text"&&e[s.type.name]){o&&(r.push(o),o=void 0),r.push(L5e(s,e,n));return}const i={};let a;for(const l of s.marks)if(l.type.name==="link")a=l;else{const c=n[l.type.name];if(!c)throw new Error(`style ${l.type.name} not found in styleSchema`);if(c.propSchema==="boolean")i[c.type]=!0;else if(c.propSchema==="string")i[c.type]=l.attrs.stringValue;else throw new ol(c.propSchema)}o?H_(o)?a?(r.push(o),o={type:"link",href:a.attrs.href,content:[{type:"text",text:s.textContent,styles:i}]}):JSON.stringify(o.styles)===JSON.stringify(i)?o.text+=s.textContent:(r.push(o),o={type:"text",text:s.textContent,styles:i}):z6(o)&&(a?o.href===a.attrs.href?JSON.stringify(o.content[o.content.length-1].styles)===JSON.stringify(i)?o.content[o.content.length-1].text+=s.textContent:o.content.push({type:"text",text:s.textContent,styles:i}):(r.push(o),o={type:"link",href:a.attrs.href,content:[{type:"text",text:s.textContent,styles:i}]}):(r.push(o),o={type:"text",text:s.textContent,styles:i})):a?o={type:"link",href:a.attrs.href,content:[{type:"text",text:s.textContent,styles:i}]}:o={type:"text",text:s.textContent,styles:i}}),o&&r.push(o),r}function L5e(t,e,n){if(t.type.name==="text"||t.type.name==="link")throw new Error("unexpected");const r={},o=e[t.type.name];for(const[i,a]of Object.entries(t.attrs)){if(!o)throw Error("ic node is of an unrecognized type: "+t.type.name);const l=o.propSchema;i in l&&(r[i]=a)}let s;return o.content==="styled"?s=h2(t,e,n):s=void 0,{type:t.type.name,props:r,content:s}}function Zn(t,e,n,r,o){var s;if(!t.type.isInGroup("bnBlock"))throw Error("Node must be in bnBlock group, but is of type"+t.type.name);const i=o==null?void 0:o.get(t);if(i)return i;const a=g5(t,0);let l=a.bnBlock.node.attrs.id;l===null&&(l=u2.options.generateID());const c=e[a.blockNoteType];if(!c)throw Error("Block is of an unrecognized type: "+a.blockNoteType);const u={};for(const[y,x]of Object.entries({...t.attrs,...a.isBlockContainer?a.blockContent.node.attrs:{}})){const b=c.propSchema;y in b&&!(b[y].default===void 0&&x===void 0)&&(u[y]=x)}const f=e[a.blockNoteType],h=[];(s=a.childContainer)==null||s.node.forEach(y=>{h.push(Zn(y,e,n,r,o))});let p;if(f.content==="inline"){if(!a.isBlockContainer)throw new Error("impossible");p=h2(a.blockContent.node,n,r)}else if(f.content==="table"){if(!a.isBlockContainer)throw new Error("impossible");p=eJ(a.blockContent.node,n,r)}else if(f.content==="none")p=void 0;else throw new ol(f.content);const m={id:l,type:f.type,props:u,content:p,children:h};return o==null||o.set(t,m),m}function tJ(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,n.config]))}function j5e(t,e){return{config:t,implementation:e}}function Gd(t,e){return j5e({type:t.name,propSchema:e},{mark:t})}function nJ(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,n.config]))}const p2=(t,e)=>{const n=t.querySelector(e);if(!n)return;const r=t.querySelector("figcaption"),o=(r==null?void 0:r.textContent)??void 0;return{targetElement:n,caption:o}},V5e=(t,e,n,r)=>{const o=document.createElement("div");o.className="bn-add-file-button";const s=document.createElement("div");s.className="bn-add-file-button-icon",r?s.appendChild(r):s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',o.appendChild(s);const i=document.createElement("p");i.className="bn-add-file-button-text",i.innerHTML=n||e.dictionary.file_blocks.file.add_button_text,o.appendChild(i);const a=c=>{c.preventDefault()},l=()=>{e.dispatch(e._tiptapEditor.state.tr.setMeta(e.filePanel.plugin,{block:t}))};return o.addEventListener("mousedown",a,!0),o.addEventListener("click",l,!0),{dom:o,destroy:()=>{o.removeEventListener("mousedown",a,!0),o.removeEventListener("click",l,!0)}}},$5e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',B5e=t=>{const e=document.createElement("div");e.className="bn-file-name-with-icon";const n=document.createElement("div");n.className="bn-file-icon",n.innerHTML=$5e,e.appendChild(n);const r=document.createElement("p");return r.className="bn-file-name",r.textContent=t.props.name,e.appendChild(r),{dom:e}},w5=(t,e,n,r,o)=>{const s=document.createElement("div");if(s.className="bn-file-block-content-wrapper",t.props.url===""){const a=V5e(t,e,r,o);s.appendChild(a.dom);const l=e.onUploadStart(c=>{if(c===t.id){s.removeChild(a.dom);const u=document.createElement("div");u.className="bn-file-loading-preview",u.textContent="Loading...",s.appendChild(u)}});return{dom:s,destroy:()=>{l(),a.destroy()}}}const i={dom:s};if(t.props.showPreview===!1||!n){const a=B5e(t);s.appendChild(a.dom),i.destroy=()=>{var l;(l=a.destroy)==null||l.call(a)}}else s.appendChild(n.dom);if(t.props.caption){const a=document.createElement("p");a.className="bn-file-caption",a.textContent=t.props.caption,s.appendChild(a)}return i},b5=(t,e)=>{const n=document.createElement("figure"),r=document.createElement("figcaption");return r.textContent=e,n.appendChild(t),n.appendChild(r),{dom:n}},m2=(t,e)=>{const n=document.createElement("div"),r=document.createElement("p");return r.textContent=e,n.appendChild(t),n.appendChild(r),{dom:n}},K6=t=>({url:t.src||void 0}),F5e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"></path></svg>',U5e={backgroundColor:_r.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0}},rJ={type:"audio",propSchema:U5e,content:"none",isFileBlock:!0,fileBlockAccept:["audio/*"]},H5e=(t,e)=>{const n=document.createElement("div");n.innerHTML=F5e;const r=document.createElement("audio");return r.className="bn-audio",e.resolveFileUrl?e.resolveFileUrl(t.props.url).then(o=>{r.src=o}):r.src=t.props.url,r.controls=!0,r.contentEditable="false",r.draggable=!1,w5(t,e,{dom:r},e.dictionary.file_blocks.audio.add_button_text,n.firstElementChild)},oJ=t=>{if(t.tagName==="AUDIO")return K6(t);if(t.tagName==="FIGURE"){const e=p2(t,"audio");if(!e)return;const{targetElement:n,caption:r}=e;return{...K6(n),caption:r}}},z5e=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add audio",{dom:n}}let e;return t.props.showPreview?(e=document.createElement("audio"),e.src=t.props.url):(e=document.createElement("a"),e.href=t.props.url,e.textContent=t.props.name||t.props.url),t.props.caption?t.props.showPreview?b5(e,t.props.caption):m2(e,t.props.caption):{dom:e}},W5e=iw(rJ,{render:H5e,parse:oJ,toExternalHTML:z5e}),sJ=[{id:"text",name:"Plain Text",match:["text","txt","plain"]},...KE.filter(t=>["c","cpp","css","glsl","graphql","haml","html","java","javascript","json","jsonc","jsonl","jsx","julia","less","markdown","mdx","php","postcss","pug","python","r","regexp","sass","scss","shellscript","sql","svelte","typescript","vue","vue-html","wasm","wgsl","xml","yaml"].includes(t.id)).map(t=>({match:[t.id,...t.aliases||[]],id:t.id,name:t.name})),{id:"tsx",name:"TSX",match:["tsx","typescriptreact"]},{id:"haskell",name:"Haskell",match:["haskell","hs"]},{id:"csharp",name:"C#",match:["c#","csharp","cs"]},{id:"latex",name:"LaTeX",match:["latex"]},{id:"lua",name:"Lua",match:["lua"]},{id:"mermaid",name:"Mermaid",match:["mermaid","mmd"]},{id:"ruby",name:"Ruby",match:["ruby","rb"]},{id:"rust",name:"Rust",match:["rust","rs"]},{id:"scala",name:"Scala",match:["scala"]},{id:"swift",name:"Swift",match:["swift"]},{id:"kotlin",name:"Kotlin",match:["kotlin","kt","kts"]},{id:"objective-c",name:"Objective C",match:["objective-c","objc"]}],Y6=Symbol.for("blocknote.shikiParser"),ZS=Symbol.for("blocknote.shikiHighlighterPromise"),G5e={language:{default:"javascript",values:[...sJ.map(t=>t.id)]}},q5e=Ac({name:"codeBlock",content:"inline*",group:"blockContent",marks:"",code:!0,defining:!0,addOptions(){return{defaultLanguage:"javascript",indentLineWithTab:!0,supportedLanguages:sJ}},addAttributes(){const t=this.options.supportedLanguages;return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var n;let r=e,o=null;(r==null?void 0:r.tagName)==="DIV"&&(r==null?void 0:r.dataset.contentType)==="codeBlock"&&(r=r.children[0]),(r==null?void 0:r.tagName)==="PRE"&&(r=r==null?void 0:r.children[0]);const s=r==null?void 0:r.getAttribute("data-language");if(s)o=s.toLowerCase();else{const i=[...(r==null?void 0:r.className.split(" "))||[]].filter(a=>a.startsWith("language-")).map(a=>a.replace("language-",""));i.length>0&&(o=i[0].toLowerCase())}return o?((n=t.find(({match:i})=>i.includes(o)))==null?void 0:n.id)||this.options.defaultLanguage:null},renderHTML:e=>e.language&&e.language!=="text"?{class:`language-${e.language}`}:{}}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:"code"},{tag:"pre",contentElement:"code",preserveWhitespace:"full"}]},renderHTML({HTMLAttributes:t}){var e,n;const r=document.createElement("pre"),{dom:o,contentDOM:s}=Cc(this.name,"code",((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},{...((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{},...t});return o.removeChild(s),o.appendChild(r),r.appendChild(s),{dom:o,contentDOM:s}},addNodeView(){const t=this.options.supportedLanguages;return({editor:e,node:n,getPos:r,HTMLAttributes:o})=>{var s,i;const a=document.createElement("pre"),l=document.createElement("select"),c=document.createElement("div"),{dom:u,contentDOM:f}=Cc(this.name,"code",{...((s=this.options.domAttributes)==null?void 0:s.blockContent)||{},...o},((i=this.options.domAttributes)==null?void 0:i.inlineContent)||{}),h=p=>{const m=p.target.value;e.commands.command(({tr:y})=>(y.setNodeAttribute(r(),"language",m),!0))};return t.forEach(({id:p,name:m})=>{const y=document.createElement("option");y.value=p,y.text=m,l.appendChild(y)}),c.contentEditable="false",l.value=n.attrs.language||this.options.defaultLanguage,u.removeChild(f),u.appendChild(c),u.appendChild(a),a.appendChild(f),c.appendChild(l),l.addEventListener("change",h),{dom:u,contentDOM:f,update:p=>p.type===this.type,destroy:()=>{l.removeEventListener("change",h)}}}},addProseMirrorPlugins(){const t=this.options.supportedLanguages,e=globalThis;let n,r;return[gTe({parser:o=>{if(!n)return e[ZS]=e[ZS]||CRe({themes:["github-dark"],langs:[]}),e[ZS].then(i=>{n=i});const s=o.language;return s&&s!=="text"&&!n.getLoadedLanguages().includes(s)&&t.find(({id:i})=>i===s)&&KE.find(({id:i})=>i===s)?n.loadLanguage(s):(r||(r=e[Y6]||ERe(n),e[Y6]=r),r(o))},languageExtractor:o=>o.attrs.language,nodeTypes:[this.name]})]},addInputRules(){const t=this.options.supportedLanguages;return[new $f({find:/^```(.*?)\s$/,handler:({state:e,range:n,match:r})=>{var o;const s=e.doc.resolve(n.from),i=r[1].trim(),a={language:((o=t.find(({match:l})=>l.includes(i)))==null?void 0:o.id)||this.options.defaultLanguage};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),this.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,this.type,a).setSelection(Ze.create(e.tr.doc,n.from))}})]},addKeyboardShortcuts(){return{Delete:({editor:t})=>{const{selection:e}=t.state,{$from:n}=e;if(t.isActive(this.name)&&!n.parent.textContent&&zE(e)){const r=n.pos-n.parentOffset-2;return t.chain().setNodeSelection(r).deleteSelection().run(),!0}return!1},Tab:({editor:t})=>this.options.indentLineWithTab&&t.isActive(this.name)?(t.commands.insertContent("  "),!0):!1,Enter:({editor:t})=>{const{$from:e}=t.state.selection;if(!t.isActive(this.name))return!1;const n=e.parentOffset===e.parent.nodeSize-2,r=e.parent.textContent.endsWith(`

`);return!n||!r?(t.commands.insertContent(`
`),!0):t.chain().command(({tr:o})=>(o.delete(e.pos-2,e.pos),!0)).exitCode().run()},"Shift-Enter":({editor:t})=>{const{$from:e}=t.state.selection;return t.isActive(this.name)?(t.chain().insertContentAt(e.pos-e.parentOffset+e.parent.nodeSize,{type:"paragraph"}).run(),!0):!1}}}}),K5e=oh(q5e,G5e),Y5e={type:"pageBreak",propSchema:{},content:"none",isFileBlock:!1,isSelectable:!1},Q5e=()=>{const t=document.createElement("div");return t.className="bn-page-break",t.setAttribute("data-page-break",""),{dom:t}},X5e=t=>{if(t.tagName==="DIV"&&t.hasAttribute("data-page-break"))return{type:"pageBreak"}},J5e=()=>{const t=document.createElement("div");return t.setAttribute("data-page-break",""),{dom:t}},Z5e=iw(Y5e,{render:Q5e,parse:X5e,toExternalHTML:J5e}),eMe=As.create({name:"backgroundColor",addAttributes(){return{stringValue:{default:void 0,parseHTML:t=>t.getAttribute("data-background-color"),renderHTML:t=>({"data-background-color":t.stringValue})}}},parseHTML(){return[{tag:"span",getAttrs:t=>typeof t=="string"?!1:t.hasAttribute("data-background-color")?{stringValue:t.getAttribute("data-background-color")}:!1}]},renderHTML({HTMLAttributes:t}){return["span",t,0]}}),tMe=Gd(eMe,"string"),nMe=As.create({name:"textColor",addAttributes(){return{stringValue:{default:void 0,parseHTML:t=>t.getAttribute("data-text-color"),renderHTML:t=>({"data-text-color":t.stringValue})}}},parseHTML(){return[{tag:"span",getAttrs:t=>typeof t=="string"?!1:t.hasAttribute("data-text-color")?{stringValue:t.getAttribute("data-text-color")}:!1}]},renderHTML({HTMLAttributes:t}){return["span",t,0]}}),rMe=Gd(nMe,"string"),Q6=t=>({url:t.src||void 0}),oMe={backgroundColor:_r.backgroundColor,name:{default:""},url:{default:""},caption:{default:""}},iJ={type:"file",propSchema:oMe,content:"none",isFileBlock:!0},sMe=(t,e)=>w5(t,e),aJ=t=>{if(t.tagName==="EMBED")return Q6(t);if(t.tagName==="FIGURE"){const e=p2(t,"embed");if(!e)return;const{targetElement:n,caption:r}=e;return{...Q6(n),caption:r}}},iMe=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add file",{dom:n}}const e=document.createElement("a");return e.href=t.props.url,e.textContent=t.props.name||t.props.url,t.props.caption?m2(e,t.props.caption):{dom:e}},aMe=iw(iJ,{render:sMe,parse:aJ,toExternalHTML:iMe}),fo=(t,e,n)=>({state:r,dispatch:o})=>{const s=ow(r.doc.resolve(e));if(o){const i=r.schema.nodes[s.blockNoteType],a=r.schema.nodes[n.type||s.blockNoteType],l=a.isInGroup("bnBlock")?a:r.schema.nodes.blockContainer;if(s.isBlockContainer&&a.isInGroup("blockContent"))X6(n,r,t,s),lMe(n,r,t,i,a,s);else if(!s.isBlockContainer&&a.isInGroup("bnBlock"))X6(n,r,t,s);else{const c=Zn(s.bnBlock.node,t.schema.blockSchema,t.schema.inlineContentSchema,t.schema.styleSchema,t.blockCache);return r.tr.replaceWith(s.bnBlock.beforePos,s.bnBlock.afterPos,rh({children:c.children,...n},r.schema,t.schema.styleSchema)),!0}r.tr.setNodeMarkup(s.bnBlock.beforePos,l,{...s.bnBlock.node.attrs,...n.props})}return!0};function lMe(t,e,n,r,o,s){let i="keep";if(t.content)if(typeof t.content=="string")i=sl([t.content],e.schema,n.schema.styleSchema);else if(Array.isArray(t.content))i=sl(t.content,e.schema,n.schema.styleSchema);else if(t.content.type==="tableContent")i=d2(t.content,e.schema,n.schema.styleSchema);else throw new ol(t.content.type);else r.spec.content===""||o.spec.content!==r.spec.content&&(i=[]);i==="keep"?e.tr.setNodeMarkup(s.blockContent.beforePos,t.type===void 0?void 0:e.schema.nodes[t.type],{...s.blockContent.node.attrs,...t.props}):e.tr.replaceWith(s.blockContent.beforePos,s.blockContent.afterPos,o.createChecked({...s.blockContent.node.attrs,...t.props},i))}function X6(t,e,n,r){if(t.children!==void 0){const o=t.children.map(s=>rh(s,e.schema,n.schema.styleSchema));if(r.childContainer)e.tr.step(new vr(r.childContainer.beforePos+1,r.childContainer.afterPos-1,new je(_e.from(o),0,0)));else{if(!r.isBlockContainer)throw new Error("impossible");e.tr.insert(r.blockContent.afterPos,e.schema.nodes.blockGroup.createChecked({},o))}}}function cMe(t,e,n){const r=t._tiptapEditor,o=typeof e=="string"?e:e.id,s=Ms(o,r.state.doc);if(!s)throw new Error(`Block with ID ${o} not found`);r.commands.command(({state:a,dispatch:l})=>(fo(t,s.posBeforeNode,n)({state:a,dispatch:l}),!0));const i=r.state.doc.resolve(s.posBeforeNode+1).node();return Zn(i,t.schema.blockSchema,t.schema.inlineContentSchema,t.schema.styleSchema,t.blockCache)}const lJ={..._r,level:{default:1,values:[1,2,3]}},uMe=Ac({name:"heading",content:"inline*",group:"blockContent",addAttributes(){return sw(lJ)},addInputRules(){return[...[1,2,3].map(t=>new $f({find:new RegExp(`^(#{${t}})\\s$`),handler:({state:e,chain:n,range:r})=>{const o=gn(e);!o.isBlockContainer||o.blockContent.node.type.spec.content!=="inline*"||n().command(fo(this.options.editor,o.bnBlock.beforePos,{type:"heading",props:{level:t}})).deleteRange({from:r.from,to:r.to}).run()}}))]},addKeyboardShortcuts(){return{"Mod-Alt-1":()=>{const t=gn(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(fo(this.options.editor,t.bnBlock.beforePos,{type:"heading",props:{level:1}}))},"Mod-Alt-2":()=>{const t=gn(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(fo(this.options.editor,t.bnBlock.beforePos,{type:"heading",props:{level:2}}))},"Mod-Alt-3":()=>{const t=gn(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(fo(this.options.editor,t.bnBlock.beforePos,{type:"heading",props:{level:3}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]"},{tag:"h1",attrs:{level:1},node:"heading"},{tag:"h2",attrs:{level:2},node:"heading"},{tag:"h3",attrs:{level:3},node:"heading"}]},renderHTML({node:t,HTMLAttributes:e}){var n,r;return Cc(this.name,`h${t.attrs.level}`,{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{})}}),dMe=oh(uMe,lJ),cJ=(t,e,n,r,o,s)=>{const{dom:i,destroy:a}=w5(t,e,n,o,s),l=i;t.props.url&&t.props.showPreview&&(l.style.width=`${t.props.previewWidth}px`);const c=document.createElement("div");c.className="bn-resize-handle",c.style.left="4px";const u=document.createElement("div");u.className="bn-resize-handle",u.style.right="4px";let f,h=t.props.previewWidth;const p=E=>{if(!f){!e.isEditable&&r.contains(c)&&r.contains(u)&&(r.removeChild(c),r.removeChild(u));return}let R;t.props.textAlignment==="center"?f.handleUsed==="left"?R=f.initialWidth+(f.initialClientX-E.clientX)*2:R=f.initialWidth+(E.clientX-f.initialClientX)*2:f.handleUsed==="left"?R=f.initialWidth+f.initialClientX-E.clientX:R=f.initialWidth+E.clientX-f.initialClientX,h=Math.max(R,64),l.style.width=`${h}px`},m=E=>{(!E.target||!l.contains(E.target)||!e.isEditable)&&r.contains(c)&&r.contains(u)&&(r.removeChild(c),r.removeChild(u)),f&&(f=void 0,e.updateBlock(t,{props:{previewWidth:h}}))},y=()=>{e.isEditable&&(r.appendChild(c),r.appendChild(u))},x=E=>{E.relatedTarget===c||E.relatedTarget===u||f||e.isEditable&&r.contains(c)&&r.contains(u)&&(r.removeChild(c),r.removeChild(u))},b=E=>{E.preventDefault(),f={handleUsed:"left",initialWidth:l.clientWidth,initialClientX:E.clientX}},C=E=>{E.preventDefault(),f={handleUsed:"right",initialWidth:l.clientWidth,initialClientX:E.clientX}};return window.addEventListener("mousemove",p),window.addEventListener("mouseup",m),l.addEventListener("mouseenter",y),l.addEventListener("mouseleave",x),c.addEventListener("mousedown",b),u.addEventListener("mousedown",C),{dom:l,destroy:()=>{a==null||a(),window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",m),l.removeEventListener("mouseenter",y),l.removeEventListener("mouseleave",x),c.removeEventListener("mousedown",b),u.removeEventListener("mousedown",C)}}},J6=t=>{const e=t.src||void 0,n=t.width||void 0;return{url:e,previewWidth:n}},fMe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"></path></svg>',hMe={textAlignment:_r.textAlignment,backgroundColor:_r.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:512}},uJ={type:"image",propSchema:hMe,content:"none",isFileBlock:!0,fileBlockAccept:["image/*"]},pMe=(t,e)=>{const n=document.createElement("div");n.innerHTML=fMe;const r=document.createElement("div");r.className="bn-visual-media-wrapper";const o=document.createElement("img");return o.className="bn-visual-media",e.resolveFileUrl?e.resolveFileUrl(t.props.url).then(s=>{o.src=s}):o.src=t.props.url,o.alt=t.props.name||t.props.caption||"BlockNote image",o.contentEditable="false",o.draggable=!1,r.appendChild(o),cJ(t,e,{dom:r},r,e.dictionary.file_blocks.image.add_button_text,n.firstElementChild)},dJ=t=>{if(t.tagName==="IMG")return J6(t);if(t.tagName==="FIGURE"){const e=p2(t,"img");if(!e)return;const{targetElement:n,caption:r}=e;return{...J6(n),caption:r}}},mMe=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add image",{dom:n}}let e;return t.props.showPreview?(e=document.createElement("img"),e.src=t.props.url,e.alt=t.props.name||t.props.caption||"BlockNote image",e.width=t.props.previewWidth):(e=document.createElement("a"),e.href=t.props.url,e.textContent=t.props.name||t.props.url),t.props.caption?t.props.showPreview?b5(e,t.props.caption):m2(e,t.props.caption):{dom:e}},gMe=iw(uJ,{render:pMe,parse:dJ,toExternalHTML:mMe}),fJ=(t,e,n)=>({state:r,dispatch:o})=>{const s=Zu(r.doc,t),i=ed(s);if(!i.isBlockContainer)throw new Error(`BlockContainer expected when calling splitBlock, position ${t}`);const a=[{type:i.bnBlock.node.type,attrs:n?{...i.bnBlock.node.attrs,id:void 0}:{}},{type:e?i.blockContent.node.type:r.schema.nodes.paragraph,attrs:n?{...i.blockContent.node.attrs}:{}}];return o&&r.tr.split(t,2,a),!0},x5=t=>{const e=t._tiptapEditor,n=gn(e.state);if(!n.isBlockContainer)return!1;const{bnBlock:r,blockContent:o}=n,s=e.state.selection.anchor===e.state.selection.head;return!(o.node.type.name==="bulletListItem"||o.node.type.name==="numberedListItem"||o.node.type.name==="checkListItem")||!s?!1:e.commands.first(({state:i,chain:a,commands:l})=>[()=>l.command(()=>o.node.childCount===0?l.command(fo(t,r.beforePos,{type:"paragraph",props:{}})):!1),()=>l.command(()=>o.node.childCount>0?(a().deleteSelection().command(fJ(i.selection.from,!0)).run(),!0):!1)])},yMe={..._r},vMe=Ac({name:"bulletListItem",content:"inline*",group:"blockContent",priority:90,addInputRules(){return[new $f({find:new RegExp("^[-+*]\\s$"),handler:({state:t,chain:e,range:n})=>{const r=gn(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||e().command(fo(this.options.editor,r.bnBlock.beforePos,{type:"bulletListItem",props:{}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{Enter:()=>x5(this.options.editor),"Mod-Shift-8":()=>{const t=gn(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(fo(this.options.editor,t.bnBlock.beforePos,{type:"bulletListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]"},{tag:"li",getAttrs:t=>{if(typeof t=="string")return!1;const e=t.parentElement;return e===null?!1:e.tagName==="UL"||e.tagName==="DIV"&&e.parentElement.tagName==="UL"?{}:!1},node:"bulletListItem"},{tag:"p",getAttrs:t=>{if(typeof t=="string")return!1;const e=t.parentElement;return e===null?!1:e.getAttribute("data-content-type")==="bulletListItem"?{}:!1},priority:300,node:"bulletListItem"}]},renderHTML({HTMLAttributes:t}){var e,n;return Cc(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),wMe=oh(vMe,yMe),hJ={..._r,checked:{default:!1}},bMe=Ac({name:"checkListItem",content:"inline*",group:"blockContent",addAttributes(){return sw(hJ)},addInputRules(){return[new $f({find:new RegExp("\\[\\s*\\]\\s$"),handler:({state:t,chain:e,range:n})=>{const r=gn(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||e().command(fo(this.options.editor,r.bnBlock.beforePos,{type:"checkListItem",props:{checked:!1}})).deleteRange({from:n.from,to:n.to})}}),new $f({find:new RegExp("\\[[Xx]\\]\\s$"),handler:({state:t,chain:e,range:n})=>{const r=gn(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||e().command(fo(this.options.editor,r.bnBlock.beforePos,{type:"checkListItem",props:{checked:!0}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{Enter:()=>x5(this.options.editor),"Mod-Shift-9":()=>{const t=gn(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(fo(this.options.editor,t.bnBlock.beforePos,{type:"checkListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]"},{tag:"input",getAttrs:t=>typeof t=="string"?!1:t.type==="checkbox"?{checked:t.checked}:!1,node:"checkListItem"},{tag:"li",getAttrs:t=>{if(typeof t=="string")return!1;const e=t.parentElement;if(e===null)return!1;if(e.tagName==="UL"||e.tagName==="DIV"&&e.parentElement.tagName==="UL"){const n=t.querySelector("input[type=checkbox]")||null;return n===null?!1:{checked:n.checked}}return!1},node:"checkListItem"}]},renderHTML({node:t,HTMLAttributes:e}){var n,r;const o=document.createElement("input");o.type="checkbox",o.checked=t.attrs.checked,t.attrs.checked&&o.setAttribute("checked","");const{dom:s,contentDOM:i}=Cc(this.name,"p",{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{});return s.insertBefore(o,i),{dom:s,contentDOM:i}},addNodeView(){return({node:t,getPos:e,editor:n,HTMLAttributes:r})=>{var o,s;const i=document.createElement("div"),a=document.createElement("div");a.contentEditable="false";const l=document.createElement("input");l.type="checkbox",l.checked=t.attrs.checked,t.attrs.checked&&l.setAttribute("checked","");const c=()=>{if(!n.isEditable){l.checked=!l.checked;return}if(typeof e!="boolean"){const h=Zu(n.state.doc,e());if(h.node.type.name!=="blockContainer")throw new Error(`Expected blockContainer node, got ${h.node.type.name}`);this.editor.commands.command(fo(this.options.editor,h.posBeforeNode,{type:"checkListItem",props:{checked:l.checked}}))}};l.addEventListener("change",c);const{dom:u,contentDOM:f}=Cc(this.name,"p",{...((o=this.options.domAttributes)==null?void 0:o.blockContent)||{},...r},((s=this.options.domAttributes)==null?void 0:s.inlineContent)||{});if(typeof e!="boolean"){const h="label-"+this.editor.state.doc.resolve(e()).node().attrs.id;l.setAttribute("aria-labelledby",h),f.id=h}return u.removeChild(f),u.appendChild(i),i.appendChild(a),i.appendChild(f),a.appendChild(l),{dom:u,contentDOM:f,destroy:()=>{l.removeEventListener("change",c)}}}}}),xMe=oh(bMe,hJ),_Me=new Ht("numbered-list-indexing"),CMe=()=>new kt({key:_Me,appendTransaction:(t,e,n)=>{const r=n.tr;r.setMeta("numberedListIndexing",!0);let o=!1;return n.doc.descendants((s,i)=>{var a;if(s.type.name==="blockContainer"&&s.firstChild.type.name==="numberedListItem"){let l=`${s.firstChild.attrs.start||1}`;const c=ed({posBeforeNode:i,node:s});if(!c.isBlockContainer)throw new Error("impossible");const u=r.doc.resolve(c.bnBlock.beforePos).nodeBefore;if(u){const m=ed({posBeforeNode:c.bnBlock.beforePos-u.nodeSize,node:u});if(m.blockNoteType==="numberedListItem"){if(!m.isBlockContainer)throw new Error("impossible");const y=m.blockContent.node.attrs.index;l=(parseInt(y)+1).toString()}}const f=c.blockContent.node,h=f.attrs.index,p=((a=u==null?void 0:u.firstChild)==null?void 0:a.type.name)!=="numberedListItem";if(h!==l||f.attrs.start&&!p){o=!0;const{start:m,...y}=f.attrs;r.setNodeMarkup(c.blockContent.beforePos,void 0,{...y,index:l,...typeof m=="number"&&p&&{start:m}})}}}),o?r:null}}),pJ={..._r,start:{default:void 0,type:"number"}},EMe=Ac({name:"numberedListItem",content:"inline*",group:"blockContent",priority:90,addAttributes(){return{...sw(pJ),index:{default:null,parseHTML:t=>t.getAttribute("data-index"),renderHTML:t=>({"data-index":t.index})}}},addInputRules(){return[new $f({find:new RegExp("^(\\d+)\\.\\s$"),handler:({state:t,chain:e,range:n,match:r})=>{const o=gn(t);if(!o.isBlockContainer||o.blockContent.node.type.spec.content!=="inline*"||o.blockNoteType==="numberedListItem")return;const s=parseInt(r[1]);e().command(fo(this.options.editor,o.bnBlock.beforePos,{type:"numberedListItem",props:s===1&&{}||{start:s}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{Enter:()=>x5(this.options.editor),"Mod-Shift-7":()=>{const t=gn(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(fo(this.options.editor,t.bnBlock.beforePos,{type:"numberedListItem",props:{}}))}}},addProseMirrorPlugins(){return[CMe()]},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]"},{tag:"li",getAttrs:t=>{if(typeof t=="string")return!1;const e=t.parentElement;if(e===null)return!1;if(e.tagName==="OL"||e.tagName==="DIV"&&e.parentElement.tagName==="OL"){const n=parseInt(e.getAttribute("start")||"1")||1;return t.previousSibling||n===1?{}:{start:n}}return!1},node:"numberedListItem"},{tag:"p",getAttrs:t=>{if(typeof t=="string")return!1;const e=t.parentElement;return e===null?!1:e.getAttribute("data-content-type")==="numberedListItem"?{}:!1},priority:300,node:"numberedListItem"}]},renderHTML({HTMLAttributes:t}){var e,n;return Cc(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),kMe=oh(EMe,pJ),SMe={..._r},TMe=Ac({name:"paragraph",content:"inline*",group:"blockContent",addKeyboardShortcuts(){return{"Mod-Alt-0":()=>{const t=gn(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(fo(this.options.editor,t.bnBlock.beforePos,{type:"paragraph",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]"},{tag:"p",priority:200,getAttrs:t=>{var e;return typeof t=="string"||!((e=t.textContent)!=null&&e.trim())?!1:{}},node:"paragraph"}]},renderHTML({HTMLAttributes:t}){var e,n;return Cc(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),NMe=oh(TMe,SMe),IMe=35,_5=120,RMe=31,AMe=sn.create({name:"BlockNoteTableExtension",addProseMirrorPlugins:()=>[mAe({cellMinWidth:IMe,defaultCellMinWidth:_5,View:null}),kAe()],addKeyboardShortcuts(){return{Enter:()=>this.editor.state.selection.empty&&this.editor.state.selection.$head.parent.type.name==="tableParagraph"?(this.editor.commands.setHardBreak(),!0):!1,Backspace:()=>{const t=this.editor.state.selection,e=t.empty,n=t.$head.parentOffset===0,r=t.$head.node().type.name==="tableParagraph";return e&&n&&r},Tab:()=>this.editor.commands.command(({state:t,dispatch:e,view:n})=>YL(1)(t,e,n)),"Shift-Tab":()=>this.editor.commands.command(({state:t,dispatch:e,view:n})=>YL(-1)(t,e,n))}},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:It(Qe(t,"tableRole",e))}}}),PMe={textColor:_r.textColor},MMe=Ac({name:"table",content:"tableRow+",group:"blockContent",tableRole:"table",isolating:!0,parseHTML(){return[{tag:"table"}]},renderHTML({HTMLAttributes:t}){var e,n;return Cc(this.name,"table",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})},addNodeView(){return({node:t,HTMLAttributes:e})=>{var n;class r extends IQ{constructor(s,i,a){super(s,i),this.node=s,this.cellMinWidth=i,this.blockContentHTMLAttributes=a;const l=document.createElement("div");l.className=Ds("bn-block-content",a.class),l.setAttribute("data-content-type","table");for(const[h,p]of Object.entries(a))h!=="class"&&l.setAttribute(h,p);const c=this.dom,u=document.createElement("div");u.className="tableWrapper-inner",u.appendChild(c.firstChild),c.appendChild(u),l.appendChild(c);const f=document.createElement("div");f.className="table-widgets-container",f.style.position="relative",c.appendChild(f),this.dom=l}ignoreMutation(s){return!s.target.closest(".tableWrapper-inner")||super.ignoreMutation(s)}}return new r(t,_5,{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e})}}}),DMe=fa.create({name:"tableParagraph",group:"tableContent",content:"inline*",parseHTML(){return[{preserveWhitespace:"full",priority:210,context:"tableContent",tag:"p",getAttrs:t=>({})},{tag:"p",getAttrs:t=>{if(typeof t=="string"||!t.textContent)return!1;const e=t.parentElement;return e===null?!1:e.tagName==="TD"?{}:!1}}]},renderHTML({HTMLAttributes:t}){return["p",t,0]}}),OMe=oh(MMe,PMe,[AMe,DMe,HRe.extend({content:"tableContent"}),URe.extend({content:"tableContent"}),zRe]),Z6=t=>{const e=t.src||void 0,n=t.width||void 0;return{url:e,previewWidth:n}},LMe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"></path></svg>',jMe={textAlignment:_r.textAlignment,backgroundColor:_r.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:512}},mJ={type:"video",propSchema:jMe,content:"none",isFileBlock:!0,fileBlockAccept:["video/*"]},VMe=(t,e)=>{const n=document.createElement("div");n.innerHTML=LMe;const r=document.createElement("div");r.className="bn-visual-media-wrapper";const o=document.createElement("video");return o.className="bn-visual-media",e.resolveFileUrl?e.resolveFileUrl(t.props.url).then(s=>{o.src=s}):o.src=t.props.url,o.controls=!0,o.contentEditable="false",o.draggable=!1,o.width=t.props.previewWidth,r.appendChild(o),cJ(t,e,{dom:r},r,e.dictionary.file_blocks.video.add_button_text,n.firstElementChild)},gJ=t=>{if(t.tagName==="VIDEO")return Z6(t);if(t.tagName==="FIGURE"){const e=p2(t,"video");if(!e)return;const{targetElement:n,caption:r}=e;return{...Z6(n),caption:r}}},$Me=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add video",{dom:n}}let e;return t.props.showPreview?(e=document.createElement("video"),e.src=t.props.url,e.width=t.props.previewWidth):(e=document.createElement("a"),e.href=t.props.url,e.textContent=t.props.name||t.props.url),t.props.caption?t.props.showPreview?b5(e,t.props.caption):m2(e,t.props.caption):{dom:e}},BMe=iw(mJ,{render:VMe,parse:gJ,toExternalHTML:$Me}),yJ={paragraph:NMe,heading:dMe,codeBlock:K5e,bulletListItem:wMe,numberedListItem:kMe,checkListItem:xMe,table:OMe,file:aMe,image:gMe,video:BMe,audio:W5e},FMe=XX(yJ),vJ={bold:Gd(IRe,"boolean"),italic:Gd(jRe,"boolean"),underline:Gd(FRe,"boolean"),strike:Gd(BRe,"boolean"),code:Gd(PRe,"boolean"),textColor:rMe,backgroundColor:tMe};nJ(vJ);const wJ={text:{config:"text",implementation:{}},link:{config:"link",implementation:{}}},UMe=tJ(wJ);function fs(t,e){return t in e.schema.blockSchema&&e.schema.blockSchema[t]===FMe[t]}function HMe(t,e){return t in e.schema.inlineContentSchema&&e.schema.inlineContentSchema[t]===UMe[t]}function zMe(t,e,n){return e.type===t&&e.type in n.schema.blockSchema&&fs(e.type,n)}function aw(t,e){return t.type in e.schema.blockSchema&&e.schema.blockSchema[t.type].isFileBlock||!1}function WMe(t,e){return t.type in e.schema.blockSchema&&e.schema.blockSchema[t.type].isFileBlock&&"showPreview"in e.schema.blockSchema[t.type].propSchema||!1}function lw(t,e){return e.schema.blockSchema[t.type].isFileBlock&&!t.props.url}function mp(t,e,n){return e in n.schema.blockSchema&&t in n.schema.blockSchema[e].propSchema&&n.schema.blockSchema[e].propSchema[t]===_r[t]}function RR(t,e,n){return mp(t,e.type,n)}function GMe(t){let e=t.getTextCursorPosition().block,n=t.schema.blockSchema[e.type].content;for(;n==="none";)e=t.getTextCursorPosition().nextBlock,n=t.schema.blockSchema[e.type].content,t.setTextCursorPosition(e,"end")}function us(t,e){const n=t.getTextCursorPosition().block;if(n.content===void 0)throw new Error("Slash Menu open in a block that doesn't contain content.");let r;return Array.isArray(n.content)&&(n.content.length===1&&H_(n.content[0])&&n.content[0].type==="text"&&n.content[0].text==="/"||n.content.length===0)?(r=t.updateBlock(n,e),t.setTextCursorPosition(r)):(r=t.insertBlocks([e],n,"after")[0],t.setTextCursorPosition(t.getTextCursorPosition().nextBlock)),GMe(t),r}function qMe(t){const e=[];return fs("heading",t)&&e.push({onItemClick:()=>{us(t,{type:"heading",props:{level:1}})},badge:Qs("Mod-Alt-1"),key:"heading",...t.dictionary.slash_menu.heading},{onItemClick:()=>{us(t,{type:"heading",props:{level:2}})},badge:Qs("Mod-Alt-2"),key:"heading_2",...t.dictionary.slash_menu.heading_2},{onItemClick:()=>{us(t,{type:"heading",props:{level:3}})},badge:Qs("Mod-Alt-3"),key:"heading_3",...t.dictionary.slash_menu.heading_3}),fs("numberedListItem",t)&&e.push({onItemClick:()=>{us(t,{type:"numberedListItem"})},badge:Qs("Mod-Shift-7"),key:"numbered_list",...t.dictionary.slash_menu.numbered_list}),fs("bulletListItem",t)&&e.push({onItemClick:()=>{us(t,{type:"bulletListItem"})},badge:Qs("Mod-Shift-8"),key:"bullet_list",...t.dictionary.slash_menu.bullet_list}),fs("checkListItem",t)&&e.push({onItemClick:()=>{us(t,{type:"checkListItem"})},badge:Qs("Mod-Shift-9"),key:"check_list",...t.dictionary.slash_menu.check_list}),fs("paragraph",t)&&e.push({onItemClick:()=>{us(t,{type:"paragraph"})},badge:Qs("Mod-Alt-0"),key:"paragraph",...t.dictionary.slash_menu.paragraph}),fs("codeBlock",t)&&e.push({onItemClick:()=>{us(t,{type:"codeBlock"})},badge:Qs("Mod-Alt-c"),key:"code_block",...t.dictionary.slash_menu.code_block}),fs("table",t)&&e.push({onItemClick:()=>{us(t,{type:"table",content:{type:"tableContent",rows:[{cells:["","",""]},{cells:["","",""]}]}})},badge:void 0,key:"table",...t.dictionary.slash_menu.table}),fs("image",t)&&e.push({onItemClick:()=>{const n=us(t,{type:"image"});t.dispatch(t._tiptapEditor.state.tr.setMeta(t.filePanel.plugin,{block:n}))},key:"image",...t.dictionary.slash_menu.image}),fs("video",t)&&e.push({onItemClick:()=>{const n=us(t,{type:"video"});t.dispatch(t._tiptapEditor.state.tr.setMeta(t.filePanel.plugin,{block:n}))},key:"video",...t.dictionary.slash_menu.video}),fs("audio",t)&&e.push({onItemClick:()=>{const n=us(t,{type:"audio"});t.dispatch(t._tiptapEditor.state.tr.setMeta(t.filePanel.plugin,{block:n}))},key:"audio",...t.dictionary.slash_menu.audio}),fs("file",t)&&e.push({onItemClick:()=>{const n=us(t,{type:"file"});t.dispatch(t._tiptapEditor.state.tr.setMeta(t.filePanel.plugin,{block:n}))},key:"file",...t.dictionary.slash_menu.file}),e.push({onItemClick:()=>{t.openSuggestionMenu(":",{deleteTriggerCharacter:!0,ignoreQueryLength:!0})},key:"emoji",...t.dictionary.slash_menu.emoji}),e}function KMe(t,e){return t.filter(({title:n,aliases:r})=>n.toLowerCase().includes(e.toLowerCase())||r&&r.filter(o=>o.toLowerCase().includes(e.toLowerCase())).length!==0)}function eT(t){return t&&Object.fromEntries(Object.entries(t).filter(([,e])=>e!==void 0))}let bJ=class xJ{constructor(e){pe(this,"blockSpecs"),pe(this,"inlineContentSpecs"),pe(this,"styleSpecs"),pe(this,"blockSchema"),pe(this,"inlineContentSchema"),pe(this,"styleSchema"),pe(this,"BlockNoteEditor","only for types"),pe(this,"Block","only for types"),pe(this,"PartialBlock","only for types"),this.blockSpecs=eT(e==null?void 0:e.blockSpecs)||yJ,this.inlineContentSpecs=eT(e==null?void 0:e.inlineContentSpecs)||wJ,this.styleSpecs=eT(e==null?void 0:e.styleSpecs)||vJ,this.blockSchema=XX(this.blockSpecs),this.inlineContentSchema=tJ(this.inlineContentSpecs),this.styleSchema=nJ(this.styleSpecs)}static create(e){return new xJ(e)}};bJ.create({blockSpecs:{pageBreak:Z5e}});function YMe(t,e,n,r="before"){const o=typeof n=="string"?n:n.id,s=[];for(const l of e)s.push(rh(l,t.pmSchema,t.schema.styleSchema));const i=Ms(o,t._tiptapEditor.state.doc);if(!i)throw new Error(`Block with ID ${o} not found`);r==="before"&&t.dispatch(t._tiptapEditor.state.tr.insert(i.posBeforeNode,s)),r==="after"&&t.dispatch(t._tiptapEditor.state.tr.insert(i.posBeforeNode+i.node.nodeSize,s));const a=[];for(const l of s)a.push(Zn(l,t.schema.blockSchema,t.schema.inlineContentSchema,t.schema.styleSchema,t.blockCache));return a}function QMe(t){const e=t._tiptapEditor.state,n=e.selection,r=Zu(e.doc,n.anchor);if(n instanceof tr)return{type:"cell",anchorBlockId:r.node.attrs.id,anchorCellOffset:n.$anchorCell.pos-r.posBeforeNode,headCellOffset:n.$headCell.pos-r.posBeforeNode};if(t._tiptapEditor.state.selection instanceof Je)return{type:"node",anchorBlockId:r.node.attrs.id};{const o=Zu(e.doc,n.head);return{type:"text",anchorBlockId:r.node.attrs.id,headBlockId:o.node.attrs.id,anchorOffset:n.anchor-r.posBeforeNode,headOffset:n.head-o.posBeforeNode}}}function XMe(t,e){var n,r;const o=(n=Ms(e.anchorBlockId,t._tiptapEditor.state.doc))==null?void 0:n.posBeforeNode;if(o===void 0)throw new Error(`Could not find block with ID ${e.anchorBlockId} to update selection`);let s;if(e.type==="cell")s=tr.create(t._tiptapEditor.state.doc,o+e.anchorCellOffset,o+e.headCellOffset);else if(e.type==="node")s=Je.create(t._tiptapEditor.state.doc,o+1);else{const i=(r=Ms(e.headBlockId,t._tiptapEditor.state.doc))==null?void 0:r.posBeforeNode;if(i===void 0)throw new Error(`Could not find block with ID ${e.headBlockId} to update selection`);s=Ze.create(t._tiptapEditor.state.doc,o+e.anchorOffset,i+e.headOffset)}t.dispatch(t._tiptapEditor.state.tr.setSelection(s))}function AR(t){return t.map(e=>e.type==="columnList"?e.children.map(n=>AR(n.children)).flat():{...e,children:AR(e.children)}).flat()}function _J(t,e,n){var r;const o=((r=t.getSelection())==null?void 0:r.blocks)||[t.getTextCursorPosition().block],s=QMe(t);t.removeBlocks(o),t.insertBlocks(AR(o),e,n),XMe(t,s)}function CJ(t){return!t||t.type!=="columnList"}function EJ(t,e,n){let r,o;if(e?e.children.length>0?(r=e.children[e.children.length-1],o="after"):(r=e,o="before"):n&&(r=n,o="before"),!r||!o)return;const s=t.getParentBlock(r);return CJ(s)?{referenceBlock:r,placement:o}:EJ(t,o==="after"?r:t.getPrevBlock(r),s)}function kJ(t,e,n){let r,o;if(e?e.children.length>0?(r=e.children[0],o="before"):(r=e,o="after"):n&&(r=n,o="after"),!r||!o)return;const s=t.getParentBlock(r);return CJ(s)?{referenceBlock:r,placement:o}:kJ(t,o==="before"?r:t.getNextBlock(r),s)}function JMe(t){const e=t.getSelection(),n=(e==null?void 0:e.blocks[0])||t.getTextCursorPosition().block,r=EJ(t,t.getPrevBlock(n),t.getParentBlock(n));r&&_J(t,r.referenceBlock,r.placement)}function ZMe(t){const e=t.getSelection(),n=(e==null?void 0:e.blocks[(e==null?void 0:e.blocks.length)-1])||t.getTextCursorPosition().block,r=kJ(t,t.getNextBlock(n),t.getParentBlock(n));r&&_J(t,r.referenceBlock,r.placement)}function e9e(t,e){return function({state:n,dispatch:r}){const{$from:o,$to:s}=n.selection,i=o.blockRange(s,c=>c.childCount>0&&(c.type.name==="blockGroup"||c.type.name==="column"));if(!i)return!1;const a=i.startIndex;if(a===0)return!1;const l=i.parent.child(a-1);if(l.type!==t)return!1;if(r){const c=l.lastChild&&l.lastChild.type===e,u=_e.from(c?t.create():null),f=new je(_e.from(t.create(null,_e.from(e.create(null,u)))),c?3:1,0),h=i.start,p=i.end;r(n.tr.step(new er(h-(c?3:1),p,h,p,f,1,!0)).scrollIntoView())}return!0}}function SJ(t){return t._tiptapEditor.commands.command(e9e(t._tiptapEditor.schema.nodes.blockContainer,t._tiptapEditor.schema.nodes.blockGroup))}function t9e(t){t._tiptapEditor.commands.liftListItem("blockContainer")}function n9e(t){const{bnBlock:e}=gn(t._tiptapEditor.state);return t._tiptapEditor.state.doc.resolve(e.beforePos).nodeBefore!==null}function r9e(t){const{bnBlock:e}=gn(t._tiptapEditor.state);return t._tiptapEditor.state.doc.resolve(e.beforePos).depth>1}function TJ(t,e,n){const r=t._tiptapEditor;let o=r.state.tr;const s=[];for(const f of n)s.push(rh(f,t.pmSchema,t.schema.styleSchema));const i=new Set(e.map(f=>typeof f=="string"?f:f.id)),a=[],l=typeof e[0]=="string"?e[0]:e[0].id;let c=0;if(r.state.doc.descendants((f,h)=>{if(i.size===0)return!1;if(!f.type.isInGroup("bnBlock")||!i.has(f.attrs.id))return!0;if(a.push(Zn(f,t.schema.blockSchema,t.schema.inlineContentSchema,t.schema.styleSchema,t.blockCache)),i.delete(f.attrs.id),n.length>0&&f.attrs.id===l){const x=o.doc.nodeSize;o=o.insert(h,s);const b=o.doc.nodeSize;c+=x-b}const p=o.doc.nodeSize,m=o.doc.resolve(h-c);m.node().type.name==="blockGroup"&&m.node(m.depth-1).type.name!=="doc"&&m.node().childCount===1?o=o.delete(m.before(),m.after()):o=o.delete(h-c,h-c+f.nodeSize);const y=o.doc.nodeSize;return c+=p-y,!1}),i.size>0){const f=[...i].join(`
`);throw Error("Blocks with the following IDs could not be found in the editor: "+f)}t.dispatch(o);const u=[];for(const f of s)u.push(Zn(f,t.schema.blockSchema,t.schema.inlineContentSchema,t.schema.styleSchema,t.blockCache));return{insertedBlocks:u,removedBlocks:a}}function o9e(t,e,n){return TJ(t,e,n)}function s9e(t,e){return TJ(t,e,[]).removedBlocks}function i9e(t,e){const n=typeof e=="string"?e:e.id,r=Ms(n,t._tiptapEditor.state.doc);if(r)return Zn(r.node,t.schema.blockSchema,t.schema.inlineContentSchema,t.schema.styleSchema,t.blockCache)}function a9e(t,e){const n=typeof e=="string"?e:e.id,r=Ms(n,t._tiptapEditor.state.doc);if(!r)return;const o=t._tiptapEditor.state.doc.resolve(r.posBeforeNode).nodeBefore;if(o)return Zn(o,t.schema.blockSchema,t.schema.inlineContentSchema,t.schema.styleSchema,t.blockCache)}function l9e(t,e){const n=typeof e=="string"?e:e.id,r=Ms(n,t._tiptapEditor.state.doc);if(!r)return;const o=t._tiptapEditor.state.doc.resolve(r.posBeforeNode+r.node.nodeSize).nodeAfter;if(o)return Zn(o,t.schema.blockSchema,t.schema.inlineContentSchema,t.schema.styleSchema,t.blockCache)}function c9e(t,e){const n=typeof e=="string"?e:e.id,r=Ms(n,t._tiptapEditor.state.doc);if(!r)return;const o=t._tiptapEditor.state.doc.resolve(r.posBeforeNode),s=o.node(),i=o.node(-1),a=i.type.name!=="doc"?s.type.name==="blockGroup"?i:s:void 0;if(a)return Zn(a,t.schema.blockSchema,t.schema.inlineContentSchema,t.schema.styleSchema,t.blockCache)}function u9e(t,e,n,r={updateSelection:!0}){const o=n._tiptapEditor.state.tr;let{from:s,to:i}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},a=!0,l=!0,c="";if(e.forEach(u=>{u.check(),a&&u.isText&&u.marks.length===0?c+=u.text:a=!1,l=l?u.isBlock:!1}),s===i&&l){const{parent:u}=o.doc.resolve(s);u.isTextblock&&!u.type.spec.code&&!u.childCount&&(s-=1,i+=1)}return a?o.insertText(c,s,i):o.replaceWith(s,i,e),r.updateSelection&&CY(o,o.steps.length-1,-1),n.dispatch(o),!0}function d9e(t){const e=t._tiptapEditor.state;if(e.selection.empty||"node"in e.selection)return;const n=e.doc.resolve(Zu(e.doc,e.selection.from).posBeforeNode),r=e.doc.resolve(Zu(e.doc,e.selection.to).posBeforeNode),o=(c,u)=>{const f=n.posAtIndex(c,u),h=e.doc.resolve(f).nodeAfter;if(!h)throw new Error(`Error getting selection - node not found at position ${f}`);return Zn(h,t.schema.blockSchema,t.schema.inlineContentSchema,t.schema.styleSchema,t.blockCache)},s=[],i=n.sharedDepth(r.pos),a=n.index(i),l=r.index(i);if(n.depth>i){s.push(Zn(n.nodeAfter,t.schema.blockSchema,t.schema.inlineContentSchema,t.schema.styleSchema,t.blockCache));for(let c=n.depth;c>i;c--)if(n.node(c).type.isInGroup("childContainer")){const u=n.index(c)+1,f=n.node(c).childCount;for(let h=u;h<f;h++)s.push(o(h,c))}}else s.push(o(a,i));for(let c=a+1;c<=l;c++)s.push(o(c,i));if(s.length===0)throw new Error(`Error getting selection - selection doesn't span any blocks (${e.selection})`);return{blocks:s}}function f9e(t,e,n){const r=typeof e=="string"?e:e.id,o=typeof n=="string"?n:n.id;if(r===o)throw new Error(`Attempting to set selection with the same anchor and head blocks (id ${r})`);const s=t._tiptapEditor.state.doc,i=Ms(r,s);if(!i)throw new Error(`Block with ID ${r} not found`);const a=Ms(o,s);if(!a)throw new Error(`Block with ID ${o} not found`);const l=ed(i),c=ed(a),u=t.schema.blockSchema[l.blockNoteType],f=t.schema.blockSchema[c.blockNoteType];if(!l.isBlockContainer||u.content==="none")throw new Error(`Attempting to set selection anchor in block without content (id ${r})`);if(!c.isBlockContainer||f.content==="none")throw new Error(`Attempting to set selection anchor in block without content (id ${o})`);let h,p;if(u.content==="table"){const m=Wn.get(l.blockContent.node);h=l.blockContent.beforePos+m.positionAt(0,0,l.blockContent.node)+1+2}else h=l.blockContent.beforePos+1;if(f.content==="table"){const m=Wn.get(c.blockContent.node),y=c.blockContent.beforePos+m.positionAt(m.height-1,m.width-1,c.blockContent.node)+1,x=s.resolve(y).nodeAfter.nodeSize;p=y+x-2}else p=c.blockContent.afterPos-1;t._tiptapEditor.dispatch(t._tiptapEditor.state.tr.setSelection(Ze.create(t._tiptapEditor.state.doc,h,p)))}function h9e(t){const{bnBlock:e}=gn(t._tiptapEditor.state),n=t._tiptapEditor.state.doc.resolve(e.beforePos),r=n.nodeBefore,o=t._tiptapEditor.state.doc.resolve(e.afterPos).nodeAfter;let s;return n.depth>1&&(s=n.node(),s.type.isInGroup("bnBlock")||(s=n.node(n.depth-1))),{block:Zn(e.node,t.schema.blockSchema,t.schema.inlineContentSchema,t.schema.styleSchema,t.blockCache),prevBlock:r===null?void 0:Zn(r,t.schema.blockSchema,t.schema.inlineContentSchema,t.schema.styleSchema,t.blockCache),nextBlock:o===null?void 0:Zn(o,t.schema.blockSchema,t.schema.inlineContentSchema,t.schema.styleSchema,t.blockCache),parentBlock:s===void 0?void 0:Zn(s,t.schema.blockSchema,t.schema.inlineContentSchema,t.schema.styleSchema,t.blockCache)}}function NJ(t,e,n="start"){const r=typeof e=="string"?e:e.id,o=Ms(r,t._tiptapEditor.state.doc);if(!o)throw new Error(`Block with ID ${r} not found`);const s=ed(o),i=t.schema.blockSchema[s.blockNoteType].content;if(s.isBlockContainer){const a=s.blockContent;if(i==="none"){t._tiptapEditor.commands.setNodeSelection(a.beforePos);return}if(i==="inline")n==="start"?t._tiptapEditor.commands.setTextSelection(a.beforePos+1):t._tiptapEditor.commands.setTextSelection(a.afterPos-1);else if(i==="table")n==="start"?t._tiptapEditor.commands.setTextSelection(a.beforePos+4):t._tiptapEditor.commands.setTextSelection(a.afterPos-4);else throw new ol(i)}else{const a=n==="start"?s.childContainer.node.firstChild:s.childContainer.node.lastChild;NJ(t,a.attrs.id,n)}}let gp;async function C5(){if(gp)return gp;const t=await Promise.all([U(()=>import("./index-C6vzxoEx.js"),__vite__mapDeps([93,94])),U(()=>import("./index-D6fXkEW9.js"),[]),U(()=>import("./index-DP9TtJwO.js"),__vite__mapDeps([95,96,97])),U(()=>import("./index-CR_sUmWB.js"),__vite__mapDeps([98,94])),U(()=>import("./index-C4H34dfw.js"),__vite__mapDeps([99,96,100,101,102])),U(()=>import("./index-BPI5n_yu.js"),__vite__mapDeps([103,104,105,106,107])),U(()=>import("./index-BSyA59RR.js"),__vite__mapDeps([108,106,107,101,102,100])),U(()=>import("./index-D0Zq5UJG.js"),__vite__mapDeps([109,104,105,107,97,102])),U(()=>import("./index-BOaxcqHz.js"),__vite__mapDeps([110,105,101])),U(()=>import("./index-CnI6dEJw.js"),[])]);return gp={rehypeParse:t[0],rehypeStringify:t[1],unified:t[2],hastUtilFromDom:t[3],rehypeRemark:t[4],remarkGfm:t[5],remarkStringify:t[6],remarkParse:t[7],remarkRehype:t[8],rehypeFormat:t[9]},gp}function p9e(){const t=e=>{let n=e.children.length;for(let r=0;r<n;r++){const o=e.children[r];if(o.type==="element"&&(t(o),o.tagName==="u"))if(o.children.length>0){e.children.splice(r,1,...o.children);const s=o.children.length-1;n+=s,r+=s}else e.children.splice(r,1),n--,r--}};return t}function m9e(){const t=gp;if(!t)throw new Error("addSpacesToCheckboxes requires ESM dependencies to be initialized");const e=n=>{var r;if(n.children&&"length"in n.children&&n.children.length)for(let o=n.children.length-1;o>=0;o--){const s=n.children[o],i=o+1<n.children.length?n.children[o+1]:void 0;s.type==="element"&&s.tagName==="input"&&((r=s.properties)==null?void 0:r.type)==="checkbox"&&(i==null?void 0:i.type)==="element"&&i.tagName==="p"?(i.tagName="span",i.children.splice(0,0,t.hastUtilFromDom.fromDom(document.createTextNode(" ")))):e(s)}};return e}function E5(t){const e=gp;if(!e)throw new Error("cleanHTMLToMarkdown requires ESM dependencies to be initialized");return e.unified.unified().use(e.rehypeParse.default,{fragment:!0}).use(p9e).use(m9e).use(e.rehypeRemark.default).use(e.remarkGfm.default).use(e.remarkStringify.default,{handlers:{text:n=>n.value}}).processSync(t).value}async function g9e(t,e,n,r){await C5();const o=f2(e,n).exportBlocks(t,r);return E5(o)}function y9e(t){return Array.prototype.indexOf.call(t.parentElement.childNodes,t)}function v9e(t){return t.nodeType===3&&!/\S/.test(t.nodeValue||"")}function w9e(t){t.querySelectorAll("li > ul, li > ol").forEach(e=>{const n=y9e(e),r=e.parentElement,o=Array.from(r.childNodes).slice(n+1);e.remove(),o.forEach(s=>{s.remove()}),r.insertAdjacentElement("afterend",e),o.reverse().forEach(s=>{if(v9e(s))return;const i=document.createElement("li");i.append(s),e.insertAdjacentElement("afterend",i)}),r.childNodes.length===0&&r.remove()})}function b9e(t){t.querySelectorAll("li + ul, li + ol").forEach(e=>{var n,r;const o=e.previousElementSibling,s=document.createElement("div");o.insertAdjacentElement("afterend",s),s.append(o);const i=document.createElement("div");for(i.setAttribute("data-node-type","blockGroup"),s.append(i);((n=s.nextElementSibling)==null?void 0:n.nodeName)==="UL"||((r=s.nextElementSibling)==null?void 0:r.nodeName)==="OL";)i.append(s.nextElementSibling)})}let ej=null;function x9e(){return ej||(ej=document.implementation.createHTMLDocument("title"))}function IJ(t){if(typeof t=="string"){const e=x9e().createElement("div");e.innerHTML=t,t=e}return w9e(t),b9e(t),t}async function RJ(t,e,n,r,o){const s=IJ(t),i=ff.fromSchema(o).parse(s,{topNode:o.nodes.blockGroup.create()}),a=[];for(let l=0;l<i.childCount;l++)a.push(Zn(i.child(l),e,n,r));return a}function _9e(t,e){const n=e.value?e.value:"",r={};e.lang&&(r["data-language"]=e.lang);let o={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(o.data={meta:e.meta}),t.patch(e,o),o=t.applyData(e,o),o={type:"element",tagName:"pre",properties:{},children:[o]},t.patch(e,o),o}async function C9e(t,e,n,r,o){const s=await C5(),i=s.unified.unified().use(s.remarkParse.default).use(s.remarkGfm.default).use(s.remarkRehype.default,{handlers:{...s.remarkRehype.defaultHandlers,code:_9e}}).use(s.rehypeStringify.default).processSync(t);return RJ(i.value,e,n,r,o)}const k5=["vscode-editor-data","blocknote/html","text/html","text/plain","Files"];function E9e(t,e){if(!t.startsWith(".")||!e.startsWith("."))throw new Error("The strings provided are not valid file extensions.");return t===e}function k9e(t,e){const n=t.split("/"),r=e.split("/");if(n.length!==2)throw new Error(`The string ${t} is not a valid MIME type.`);if(r.length!==2)throw new Error(`The string ${e} is not a valid MIME type.`);return n[1]==="*"||r[1]==="*"?n[0]===r[0]:(n[0]==="*"||r[0]==="*"||n[0]===r[0])&&n[1]===r[1]}async function AJ(t,e){var n;if(!e.uploadFile){console.warn("Attempted ot insert file, but uploadFile is not set in the BlockNote editor options");return}const r="dataTransfer"in t?t.dataTransfer:t.clipboardData;if(r===null)return;let o=null;for(const a of k5)if(r.types.includes(a)){o=a;break}if(o!=="Files")return;const s=r.items;if(!s)return;t.preventDefault();const i=Object.values(e.schema.blockSchema).filter(a=>a.isFileBlock);for(let a=0;a<s.length;a++){let l="file";for(const u of i)for(const f of u.fileBlockAccept||[]){const h=f.startsWith("."),p=s[a].getAsFile();if(p&&(!h&&p.type&&k9e(s[a].type,f)||h&&E9e("."+p.name.split(".").pop(),f))){l=u.type;break}}const c=s[a].getAsFile();if(c){const u={type:l,props:{name:c.name}};let f;if(t.type==="paste")f=e.insertBlocks([u],e.getTextCursorPosition().block,"after")[0].id;else if(t.type==="drop"){const m={left:t.clientX,top:t.clientY},y=(n=e.prosemirrorView)==null?void 0:n.posAtCoords(m);if(!y)return;const x=Zu(e._tiptapEditor.state.doc,y.pos),b=ed(x);f=e.insertBlocks([u],b.bnBlock.node.attrs.id,"after")[0].id}else return;const h=await e.uploadFile(c,f),p=typeof h=="string"?{props:{url:h}}:{...h};e.updateBlock(f,p)}}}const S9e=t=>sn.create({name:"dropFile",addProseMirrorPlugins(){return[new kt({props:{handleDOMEvents:{drop(e,n){if(!t.isEditable)return;let r=null;for(const o of k5)if(n.dataTransfer.types.includes(o)){r=o;break}return r===null?!0:r==="Files"?(AJ(n,t),!0):!1}}}})]}});async function T9e(t,e){const{schema:n}=e.state;if(!t.clipboardData)return!1;const r=t.clipboardData.getData("text/plain");if(!r)return!1;if(!n.nodes.codeBlock)return e.pasteText(r),!0;const o=t.clipboardData.getData("vscode-editor-data"),s=o?JSON.parse(o):void 0,i=s==null?void 0:s.mode;return i?(e.pasteHTML(`<pre><code class="language-${i}">${r.replace(/\r\n?/g,`
`)}</code></pre>`),!0):!1}const N9e=t=>sn.create({name:"pasteFromClipboard",addProseMirrorPlugins(){return[new kt({props:{handleDOMEvents:{paste(e,n){if(n.preventDefault(),!t.isEditable)return;let r;for(const s of k5)if(n.clipboardData.types.includes(s)){r=s;break}if(!r)return!0;if(r==="vscode-editor-data")return T9e(n,e),!0;if(r==="Files")return AJ(n,t),!0;let o=n.clipboardData.getData(r);return r==="blocknote/html"?(e.pasteHTML(o),!0):r==="text/html"?(o=IJ(o.trim()).innerHTML,e.pasteHTML(o),!0):(e.pasteText(o),!0)}}}})]}});function PJ(t,e){const n=[];return t.descendants(r=>{var o,s;return r.type.name==="blockContainer"&&((o=r.firstChild)==null?void 0:o.type.name)==="blockGroup"?!0:r.type.name==="columnList"&&r.childCount===1?((s=r.firstChild)==null||s.forEach(i=>{n.push(Zn(i,e.blockSchema,e.inlineContentSchema,e.styleSchema))}),!1):r.type.isInGroup("bnBlock")?(n.push(Zn(r,e.blockSchema,e.inlineContentSchema,e.styleSchema)),!1):!0}),n}function I9e(t,e,n){var r;let o=!1;const s=t.state.selection instanceof tr;if(!s){const l=t.state.doc.slice(t.state.selection.from,t.state.selection.to,!1).content,c=[];for(let u=0;u<l.childCount;u++)c.push(l.child(u));o=c.find(u=>u.type.isInGroup("bnBlock")||u.type.name==="blockGroup"||u.type.spec.group==="blockContent")===void 0,o&&(e=l)}let i;const a=f2(t.state.schema,n);if(s){((r=e.firstChild)==null?void 0:r.type.name)==="table"&&(e=e.firstChild.content);const l=eJ(e,n.schema.inlineContentSchema,n.schema.styleSchema);i=`<table>${a.exportInlineContent(l,{})}</table>`}else if(o){const l=h2(e,n.schema.inlineContentSchema,n.schema.styleSchema);i=a.exportInlineContent(l,{})}else{const l=PJ(e,n.schema);i=a.exportBlocks(l,{})}return i}function MJ(t,e){"node"in t.state.selection&&t.state.selection.node.type.spec.group==="blockContent"&&e.dispatch(e._tiptapEditor.state.tr.setSelection(new Je(t.state.doc.resolve(t.state.selection.from-1))));const n=sY(t,t.state.selection.content()).dom.innerHTML,r=t.state.selection.content().content,o=I9e(t,r,e),s=E5(o);return{clipboardHTML:n,externalHTML:o,markdown:s}}const tj=(t,e,n)=>{n.preventDefault(),n.clipboardData.clearData();const{clipboardHTML:r,externalHTML:o,markdown:s}=MJ(e,t);n.clipboardData.setData("blocknote/html",r),n.clipboardData.setData("text/html",o),n.clipboardData.setData("text/plain",s)},R9e=t=>sn.create({name:"copyToClipboard",addProseMirrorPlugins(){return[new kt({props:{handleDOMEvents:{copy(e,n){return tj(t,e,n),!0},cut(e,n){return tj(t,e,n),e.editable&&e.dispatch(e.state.tr.deleteSelection()),!0},dragstart(e,n){if(!("node"in e.state.selection)||e.state.selection.node.type.spec.group!=="blockContent")return;t.dispatch(t._tiptapEditor.state.tr.setSelection(new Je(e.state.doc.resolve(e.state.selection.from-1)))),n.preventDefault(),n.dataTransfer.clearData();const{clipboardHTML:r,externalHTML:o,markdown:s}=MJ(e,t);return n.dataTransfer.setData("blocknote/html",r),n.dataTransfer.setData("text/html",o),n.dataTransfer.setData("text/plain",s),!0}}}})]}}),A9e=sn.create({name:"blockBackgroundColor",addGlobalAttributes(){return[{types:["blockContainer"],attributes:{backgroundColor:{default:_r.backgroundColor.default,parseHTML:t=>t.hasAttribute("data-background-color")?t.getAttribute("data-background-color"):_r.backgroundColor.default,renderHTML:t=>t.backgroundColor===_r.backgroundColor.default?{}:{"data-background-color":t.backgroundColor}}}}]}});let eg=class{constructor(){pe(this,"callbacks",{})}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),()=>this.off(e,n)}emit(e,...n){const r=this.callbacks[e];r&&r.forEach(o=>o.apply(this,n))}off(e,n){const r=this.callbacks[e];r&&(n?this.callbacks[e]=r.filter(o=>o!==n):delete this.callbacks[e])}removeAllListeners(){this.callbacks={}}};class P9e{constructor(e,n,r,o){pe(this,"state"),pe(this,"emitUpdate"),pe(this,"mouseDownHandler",()=>{var s;(s=this.state)!=null&&s.show&&(this.state.show=!1,this.emitUpdate())}),pe(this,"dragstartHandler",()=>{var s;(s=this.state)!=null&&s.show&&(this.state.show=!1,this.emitUpdate())}),pe(this,"scrollHandler",()=>{var s;if((s=this.state)!=null&&s.show){const i=this.pmView.root.querySelector(`[data-node-type="blockContainer"][data-id="${this.state.block.id}"]`);if(!i)return;this.state.referencePos=i.getBoundingClientRect(),this.emitUpdate()}}),pe(this,"closeMenu",()=>{var s;(s=this.state)!=null&&s.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pluginKey=n,this.pmView=r,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized file panel");o(this.state)},r.dom.addEventListener("mousedown",this.mouseDownHandler),r.dom.addEventListener("dragstart",this.dragstartHandler),r.root.addEventListener("scroll",this.scrollHandler,!0)}update(e,n){var r,o;const s=this.pluginKey.getState(e.state);if(!((r=this.state)!=null&&r.show)&&s.block&&this.editor.isEditable){const i=this.pmView.root.querySelector(`[data-node-type="blockContainer"][data-id="${s.block.id}"]`);if(!i)return;this.state={show:!0,referencePos:i.getBoundingClientRect(),block:s.block},this.emitUpdate();return}(!e.state.selection.eq(n.selection)||!e.state.doc.eq(n.doc)||!this.editor.isEditable)&&(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}destroy(){this.pmView.dom.removeEventListener("mousedown",this.mouseDownHandler),this.pmView.dom.removeEventListener("dragstart",this.dragstartHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}}const tT=new Ht("FilePanelPlugin");class M9e extends eg{constructor(e){super(),pe(this,"view"),pe(this,"plugin"),pe(this,"closeMenu",()=>{var n;return(n=this.view)==null?void 0:n.closeMenu()}),this.plugin=new kt({key:tT,view:n=>(this.view=new P9e(e,tT,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>{var o;return r.key==="Escape"&&this.shown?((o=this.view)==null||o.closeMenu(),!0):!1}},state:{init:()=>({block:void 0}),apply:n=>{var r;return{block:(r=n.getMeta(tT))==null?void 0:r.block}}}})}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}onUpdate(e){return this.on("update",e)}}class D9e{constructor(e,n,r){pe(this,"state"),pe(this,"emitUpdate"),pe(this,"preventHide",!1),pe(this,"preventShow",!1),pe(this,"shouldShow",({state:o,from:s,to:i,view:a})=>{const{doc:l,selection:c}=o,{empty:u}=c,f=!l.textBetween(s,i).length&&zE(o.selection);return c.$from.parent.type.spec.code||CL(c)&&c.node.type.spec.code?!1:!(!a.hasFocus()||u||f)}),pe(this,"blurHandler",o=>{var s;if(this.preventHide){this.preventHide=!1;return}const i=this.pmView.dom.parentElement;o&&o.relatedTarget&&(i===o.relatedTarget||i.contains(o.relatedTarget)||o.relatedTarget.matches(".bn-ui-container, .bn-ui-container *"))||(s=this.state)!=null&&s.show&&(this.state.show=!1,this.emitUpdate())}),pe(this,"viewMousedownHandler",()=>{this.preventShow=!0}),pe(this,"viewMouseupHandler",()=>{this.preventShow=!1,setTimeout(()=>this.update(this.pmView))}),pe(this,"dragHandler",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),pe(this,"scrollHandler",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.referencePos=this.getSelectionBoundingBox(),this.emitUpdate())}),pe(this,"closeMenu",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized formatting toolbar");r(this.state)},n.dom.addEventListener("mousedown",this.viewMousedownHandler),n.dom.addEventListener("mouseup",this.viewMouseupHandler),n.dom.addEventListener("dragstart",this.dragHandler),n.dom.addEventListener("dragover",this.dragHandler),n.dom.addEventListener("blur",this.blurHandler),n.root.addEventListener("scroll",this.scrollHandler,!0)}update(e,n){var r,o;const{state:s,composing:i}=e,{selection:a}=s,l=n&&n.selection.from===s.selection.from&&n.selection.to===s.selection.to;if(i||l)return;const{ranges:c}=a,u=Math.min(...c.map(p=>p.$from.pos)),f=Math.max(...c.map(p=>p.$to.pos)),h=(r=this.shouldShow)==null?void 0:r.call(this,{view:e,state:s,from:u,to:f});if(!this.preventShow&&(h||this.preventHide)){this.state={show:!0,referencePos:this.getSelectionBoundingBox()},this.emitUpdate();return}if((o=this.state)!=null&&o.show&&!this.preventHide&&(!h||this.preventShow||!this.editor.isEditable)){this.state.show=!1,this.emitUpdate();return}}destroy(){this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.dom.removeEventListener("mouseup",this.viewMouseupHandler),this.pmView.dom.removeEventListener("dragstart",this.dragHandler),this.pmView.dom.removeEventListener("dragover",this.dragHandler),this.pmView.dom.removeEventListener("blur",this.blurHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}getSelectionBoundingBox(){const{state:e}=this.pmView,{selection:n}=e,{ranges:r}=n,o=Math.min(...r.map(i=>i.$from.pos)),s=Math.max(...r.map(i=>i.$to.pos));if(CL(n)){const i=this.pmView.nodeDOM(o);if(i)return i.getBoundingClientRect()}return BI(this.pmView,o,s)}}const O9e=new Ht("FormattingToolbarPlugin");class L9e extends eg{constructor(e){super(),pe(this,"view"),pe(this,"plugin"),pe(this,"closeMenu",()=>this.view.closeMenu()),this.plugin=new kt({key:O9e,view:n=>(this.view=new D9e(e,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>r.key==="Escape"&&this.shown?(this.view.closeMenu(),!0):!1}})}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}onUpdate(e){return this.on("update",e)}}const nj=(t,e)=>{const n=t.resolve(e);if(n.depth<=1)return;const r=n.posAtIndex(n.index(n.depth-1),n.depth-1);return ow(t.resolve(r))},PR=(t,e)=>{const n=t.resolve(e),r=n.index();if(r===0)return;const o=n.posAtIndex(r-1);return ow(t.resolve(o))},DJ=(t,e)=>{for(;e.childContainer;){const n=e.childContainer.node,r=t.resolve(e.childContainer.beforePos+1).posAtIndex(n.childCount-1);e=ow(t.resolve(r))}return e},j9e=(t,e)=>t.isBlockContainer&&t.blockContent.node.type.spec.content==="inline*"&&t.blockContent.node.childCount>0&&e.isBlockContainer&&e.blockContent.node.type.spec.content==="inline*",V9e=(t,e,n,r)=>{if(!r.isBlockContainer)throw new Error(`Attempted to merge block at position ${r.bnBlock.beforePos} into previous block at position ${n.bnBlock.beforePos}, but next block is not a block container`);if(r.childContainer){const o=t.doc.resolve(r.childContainer.beforePos+1),s=t.doc.resolve(r.childContainer.afterPos-1),i=o.blockRange(s);if(e){const a=t.doc.resolve(r.bnBlock.beforePos);t.tr.lift(i,a.depth)}}if(e){if(!n.isBlockContainer)throw new Error(`Attempted to merge block at position ${r.bnBlock.beforePos} into previous block at position ${n.bnBlock.beforePos}, but previous block is not a block container`);e(t.tr.delete(n.blockContent.afterPos-1,r.blockContent.beforePos+1))}return!0},rj=t=>({state:e,dispatch:n})=>{const r=e.doc.resolve(t),o=ow(r),s=PR(e.doc,o.bnBlock.beforePos);if(!s)return!1;const i=DJ(e.doc,s);return j9e(i,o)?V9e(e,n,i,o):!1},$9e=sn.create({priority:50,addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.first(({chain:t,commands:e})=>[()=>e.deleteSelection(),()=>e.undoInputRule(),()=>e.command(({state:n})=>{const r=gn(n);if(!r.isBlockContainer)return!1;const o=n.selection.from===r.blockContent.beforePos+1,s=r.blockContent.node.type.name==="paragraph";return o&&!s?e.command(fo(this.options.editor,r.bnBlock.beforePos,{type:"paragraph",props:{}})):!1}),()=>e.command(({state:n})=>{const r=gn(n);if(!r.isBlockContainer)return!1;const{blockContent:o}=r;return n.selection.from===o.beforePos+1?e.liftListItem("blockContainer"):!1}),()=>e.command(({state:n})=>{const r=gn(n);if(!r.isBlockContainer)return!1;const{bnBlock:o,blockContent:s}=r,i=n.selection.from===s.beforePos+1,a=n.selection.empty,l=o.beforePos;return i&&a?t().command(rj(l)).scrollIntoView().run():!1}),()=>e.command(({state:n,dispatch:r})=>{const o=gn(n);if(!o.isBlockContainer||n.selection.from!==o.blockContent.beforePos+1||PR(n.doc,o.bnBlock.beforePos))return!1;const s=nj(n.doc,o.bnBlock.beforePos);if((s==null?void 0:s.blockNoteType)!=="column")return!1;const i=s,a=nj(n.doc,i.bnBlock.beforePos);if((a==null?void 0:a.blockNoteType)!=="columnList")throw new Error("parent of column is not a column list");const l=i.childContainer.node.childCount===1,c=l&&a.childContainer.node.childCount===2,u=a.childContainer.node.firstChild===i.bnBlock.node;if(r){const f=n.doc.slice(o.bnBlock.beforePos,o.bnBlock.afterPos,!1);if(c)if(u){n.tr.step(new er(a.bnBlock.beforePos,a.bnBlock.afterPos,i.bnBlock.afterPos+1,a.bnBlock.afterPos-2,f,f.size,!1));const h=n.tr.doc.resolve(i.bnBlock.beforePos);n.tr.setSelection(Ze.between(h,h))}else{n.tr.step(new er(a.bnBlock.beforePos,a.bnBlock.afterPos,a.bnBlock.beforePos+2,i.bnBlock.beforePos-1,f,0,!1));const h=n.tr.doc.resolve(n.tr.mapping.map(i.bnBlock.beforePos-1));n.tr.setSelection(Ze.between(h,h))}else if(l)if(u){n.tr.delete(i.bnBlock.beforePos,i.bnBlock.afterPos),n.tr.insert(a.bnBlock.beforePos,f.content);const h=n.tr.doc.resolve(a.bnBlock.beforePos);n.tr.setSelection(Ze.between(h,h))}else n.tr.delete(i.bnBlock.beforePos-1,i.bnBlock.beforePos+1);else{n.tr.delete(o.bnBlock.beforePos,o.bnBlock.afterPos),u?n.tr.insert(a.bnBlock.beforePos-1,f.content):n.tr.insert(i.bnBlock.beforePos-1,f.content);const h=n.tr.doc.resolve(i.bnBlock.beforePos-1);n.tr.setSelection(Ze.between(h,h))}}return!0}),()=>e.command(({state:n})=>{const r=gn(n);if(!r.isBlockContainer)throw new Error("todo");const o=n.selection.from===r.blockContent.beforePos+1,s=n.selection.empty,i=PR(n.doc,r.bnBlock.beforePos);if(i&&o&&s){const a=DJ(n.doc,i);if(!a.isBlockContainer)throw new Error("todo");if(a.blockContent.node.type.spec.content===""||a.blockContent.node.type.spec.content==="inline*"&&a.blockContent.node.childCount===0)return t().cut({from:r.bnBlock.beforePos,to:r.bnBlock.afterPos},a.bnBlock.afterPos).deleteRange({from:a.bnBlock.beforePos,to:a.bnBlock.afterPos}).run()}return!1})]),Delete:()=>this.editor.commands.first(({commands:t})=>[()=>t.deleteSelection(),()=>t.command(({state:e})=>{const n=gn(e);if(!n.isBlockContainer)return!1;const{bnBlock:r,blockContent:o,childContainer:s}=n,{depth:i}=e.doc.resolve(r.beforePos),a=r.afterPos===e.doc.nodeSize-3,l=e.selection.from===o.afterPos-1,c=e.selection.empty;if(!a&&l&&c&&s===void 0){let u=i,f=r.afterPos+1,h=e.doc.resolve(f).depth;for(;h<u;)u=h,f+=2,h=e.doc.resolve(f).depth;return t.command(rj(f-1))}return!1})]),Enter:()=>this.editor.commands.first(({commands:t})=>[()=>t.command(({state:e})=>{const n=gn(e);if(!n.isBlockContainer)return!1;const{bnBlock:r,blockContent:o}=n,{depth:s}=e.doc.resolve(r.beforePos),i=e.selection.$anchor.parentOffset===0,a=e.selection.anchor===e.selection.head,l=o.node.childCount===0,c=s>1;return i&&a&&l&&c?t.liftListItem("blockContainer"):!1}),()=>t.command(({state:e,dispatch:n})=>{const r=gn(e);if(!r.isBlockContainer)return!1;const{bnBlock:o,blockContent:s}=r,i=e.selection.$anchor.parentOffset===0,a=e.selection.anchor===e.selection.head,l=s.node.childCount===0;if(i&&a&&l){const c=o.afterPos,u=c+2;if(n){const f=e.schema.nodes.blockContainer.createAndFill();e.tr.insert(c,f).scrollIntoView(),e.tr.setSelection(new Ze(e.doc.resolve(u)))}return!0}return!1}),()=>t.command(({state:e,chain:n})=>{const r=gn(e);if(!r.isBlockContainer)return!1;const{blockContent:o}=r,s=e.selection.$anchor.parentOffset===0;return o.node.childCount===0?!1:(n().deleteSelection().command(fJ(e.selection.from,s,s)).run(),!0)})]),Tab:()=>{var t,e,n;return this.options.tabBehavior!=="prefer-indent"&&((t=this.options.editor.formattingToolbar)!=null&&t.shown||(e=this.options.editor.linkToolbar)!=null&&e.shown||(n=this.options.editor.filePanel)!=null&&n.shown)?!1:SJ(this.options.editor)},"Shift-Tab":()=>{var t,e,n;return this.options.tabBehavior!=="prefer-indent"&&((t=this.options.editor.formattingToolbar)!=null&&t.shown||(e=this.options.editor.linkToolbar)!=null&&e.shown||(n=this.options.editor.filePanel)!=null&&n.shown)?!1:(this.editor.commands.liftListItem("blockContainer"),!0)},"Shift-Mod-ArrowUp":()=>(this.options.editor.moveBlocksUp(),!0),"Shift-Mod-ArrowDown":()=>(this.options.editor.moveBlocksDown(),!0)}}});class B9e{constructor(e,n,r){pe(this,"state"),pe(this,"emitUpdate"),pe(this,"menuUpdateTimer"),pe(this,"startMenuUpdateTimer"),pe(this,"stopMenuUpdateTimer"),pe(this,"mouseHoveredLinkMark"),pe(this,"mouseHoveredLinkMarkRange"),pe(this,"keyboardHoveredLinkMark"),pe(this,"keyboardHoveredLinkMarkRange"),pe(this,"linkMark"),pe(this,"linkMarkRange"),pe(this,"mouseOverHandler",o=>{if(this.mouseHoveredLinkMark=void 0,this.mouseHoveredLinkMarkRange=void 0,this.stopMenuUpdateTimer(),o.target instanceof HTMLAnchorElement&&o.target.nodeName==="A"){const s=o.target,i=this.pmView.posAtDOM(s,0)+1,a=this.pmView.state.doc.resolve(i),l=a.marks();for(const c of l)if(c.type.name===this.pmView.state.schema.mark("link").type.name){this.mouseHoveredLinkMark=c,this.mouseHoveredLinkMarkRange=j1(a,c.type,c.attrs)||void 0;break}}return this.startMenuUpdateTimer(),!1}),pe(this,"clickHandler",o=>{var s;const i=this.pmView.dom.parentElement;this.linkMark&&o&&o.target&&!(i===o.target||i.contains(o.target))&&(s=this.state)!=null&&s.show&&(this.state.show=!1,this.emitUpdate())}),pe(this,"scrollHandler",()=>{var o;this.linkMark!==void 0&&(o=this.state)!=null&&o.show&&(this.state.referencePos=BI(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),this.emitUpdate())}),pe(this,"closeMenu",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized link toolbar");r(this.state)},this.startMenuUpdateTimer=()=>{this.menuUpdateTimer=setTimeout(()=>{this.update(this.pmView)},250)},this.stopMenuUpdateTimer=()=>(this.menuUpdateTimer&&(clearTimeout(this.menuUpdateTimer),this.menuUpdateTimer=void 0),!1),this.pmView.dom.addEventListener("mouseover",this.mouseOverHandler),this.pmView.root.addEventListener("click",this.clickHandler,!0),this.pmView.root.addEventListener("scroll",this.scrollHandler,!0)}editLink(e,n){var r;const o=this.pmView.state.tr.insertText(n,this.linkMarkRange.from,this.linkMarkRange.to);o.addMark(this.linkMarkRange.from,this.linkMarkRange.from+n.length,this.pmView.state.schema.mark("link",{href:e})),this.editor.dispatch(o),this.pmView.focus(),(r=this.state)!=null&&r.show&&(this.state.show=!1,this.emitUpdate())}deleteLink(){var e;this.editor.dispatch(this.pmView.state.tr.removeMark(this.linkMarkRange.from,this.linkMarkRange.to,this.linkMark.type).setMeta("preventAutolink",!0)),this.pmView.focus(),(e=this.state)!=null&&e.show&&(this.state.show=!1,this.emitUpdate())}update(e,n){var r;const{state:o}=e;if(n&&n.selection.from===o.selection.from&&n.selection.to===o.selection.to||!this.pmView.hasFocus())return;const s=this.linkMark;if(this.linkMark=void 0,this.linkMarkRange=void 0,this.keyboardHoveredLinkMark=void 0,this.keyboardHoveredLinkMarkRange=void 0,this.pmView.state.selection.empty){const i=this.pmView.state.selection.$from.marks();for(const a of i)if(a.type.name===this.pmView.state.schema.mark("link").type.name){this.keyboardHoveredLinkMark=a,this.keyboardHoveredLinkMarkRange=j1(this.pmView.state.selection.$from,a.type,a.attrs)||void 0;break}}if(this.mouseHoveredLinkMark&&(this.linkMark=this.mouseHoveredLinkMark,this.linkMarkRange=this.mouseHoveredLinkMarkRange),this.keyboardHoveredLinkMark&&(this.linkMark=this.keyboardHoveredLinkMark,this.linkMarkRange=this.keyboardHoveredLinkMarkRange),this.linkMark&&this.editor.isEditable){this.state={show:!0,referencePos:BI(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),url:this.linkMark.attrs.href,text:this.pmView.state.doc.textBetween(this.linkMarkRange.from,this.linkMarkRange.to)},this.emitUpdate();return}if((r=this.state)!=null&&r.show&&s&&(!this.linkMark||!this.editor.isEditable)){this.state.show=!1,this.emitUpdate();return}}destroy(){this.pmView.dom.removeEventListener("mouseover",this.mouseOverHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0),this.pmView.root.removeEventListener("click",this.clickHandler,!0)}}const F9e=new Ht("LinkToolbarPlugin");class U9e extends eg{constructor(e){super(),pe(this,"view"),pe(this,"plugin"),pe(this,"editLink",(n,r)=>{this.view.editLink(n,r)}),pe(this,"deleteLink",()=>{this.view.deleteLink()}),pe(this,"startHideTimer",()=>{this.view.startMenuUpdateTimer()}),pe(this,"stopHideTimer",()=>{this.view.stopMenuUpdateTimer()}),pe(this,"closeMenu",()=>this.view.closeMenu()),this.plugin=new kt({key:F9e,view:n=>(this.view=new B9e(e,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>r.key==="Escape"&&this.shown?(this.view.closeMenu(),!0):!1}})}onUpdate(e){return this.on("update",e)}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}}const OJ=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"],LJ="https",H9e=new Ht("node-selection-keyboard");class z9e{constructor(){pe(this,"plugin"),this.plugin=new kt({key:H9e,props:{handleKeyDown:(e,n)=>{if("node"in e.state.selection){if(n.ctrlKey||n.metaKey)return!1;if(n.key.length===1)return n.preventDefault(),!0;if(n.key==="Enter"&&!n.shiftKey&&!n.altKey&&!n.ctrlKey&&!n.metaKey){const r=e.state.tr;return e.dispatch(r.insert(e.state.tr.selection.$to.after(),e.state.schema.nodes.paragraph.createChecked()).setSelection(new Ze(r.doc.resolve(e.state.tr.selection.$to.after()+1)))),!0}}return!1}}})}}const W9e=new Ht("blocknote-placeholder");class G9e{constructor(e,n){pe(this,"plugin"),this.plugin=new kt({key:W9e,view:()=>{var r,o;const s=document.createElement("style"),i=e._tiptapEditor.options.injectNonce;i&&s.setAttribute("nonce",i),((r=e.prosemirrorView)==null?void 0:r.root)instanceof ShadowRoot?e.prosemirrorView.root.append(s):(o=e.prosemirrorView)==null||o.root.head.appendChild(s);const a=s.sheet,l=(u="")=>`.bn-block-content${u} .bn-inline-content:has(> .ProseMirror-trailingBreak:only-child):before`,c=(u,f=!0)=>{const h=f?"[data-is-empty-and-focused]":"";if(u==="default")return l(h);const p=`[data-content-type="${u}"]`;return l(h+p)};for(const[u,f]of Object.entries(n)){const h=u==="default";try{a.insertRule(`${c(u,h)} { content: ${JSON.stringify(f)}; }`),h||a.insertRule(`${c(u,!0)} { content: ${JSON.stringify(f)}; }`)}catch(p){console.warn("Failed to insert placeholder CSS rule - this is likely due to the browser not supporting certain CSS pseudo-element selectors (:has, :only-child:, or :before)",p)}}return{destroy:()=>{var u,f;((u=e.prosemirrorView)==null?void 0:u.root)instanceof ShadowRoot?e.prosemirrorView.root.removeChild(s):(f=e.prosemirrorView)==null||f.root.head.removeChild(s)}}},props:{decorations:r=>{const{doc:o,selection:s}=r;if(!e.isEditable||!s.empty||s.$from.parent.type.spec.code)return;const i=s.$anchor,a=i.parent;if(a.content.size>0)return null;const l=i.before(),c=Mn.node(l,l+a.nodeSize,{"data-is-empty-and-focused":"true"});return Gt.create(o,[c])}}})}}const oj=new Ht("previous-blocks"),q9e={index:"index",level:"level",type:"type",depth:"depth","depth-change":"depth-change"};class K9e{constructor(){pe(this,"plugin");let e;this.plugin=new kt({key:oj,view(n){return{update:async(r,o)=>{var s;((s=this.key)==null?void 0:s.getState(r.state).updatedBlocks.size)>0&&(e=setTimeout(()=>{r.dispatch(r.state.tr.setMeta(oj,{clearUpdate:!0}))},0))},destroy:()=>{e&&clearTimeout(e)}}},state:{init(){return{prevTransactionOldBlockAttrs:{},currentTransactionOldBlockAttrs:{},updatedBlocks:new Set}},apply(n,r,o,s){if(r.currentTransactionOldBlockAttrs={},r.updatedBlocks.clear(),!n.docChanged||o.doc.eq(s.doc))return r;const i={},a=xL(o.doc,u=>u.attrs.id),l=new Map(a.map(u=>[u.node.attrs.id,u])),c=xL(s.doc,u=>u.attrs.id);for(const u of c){const f=l.get(u.node.attrs.id),h=f==null?void 0:f.node.firstChild,p=u.node.firstChild;if(f&&h&&p){const m={index:p.attrs.index,level:p.attrs.level,type:p.type.name,depth:s.doc.resolve(u.pos).depth};let y={index:h.attrs.index,level:h.attrs.level,type:h.type.name,depth:o.doc.resolve(f.pos).depth};i[u.node.attrs.id]=y,n.getMeta("numberedListIndexing")&&(u.node.attrs.id in r.prevTransactionOldBlockAttrs&&(y=r.prevTransactionOldBlockAttrs[u.node.attrs.id]),m.type==="numberedListItem"&&(y.index=m.index)),r.currentTransactionOldBlockAttrs[u.node.attrs.id]=y,JSON.stringify(y)!==JSON.stringify(m)&&(y["depth-change"]=y.depth-m.depth,r.updatedBlocks.add(u.node.attrs.id))}}return r.prevTransactionOldBlockAttrs=i,r}},props:{decorations(n){const r=this.getState(n);if(r.updatedBlocks.size===0)return;const o=[];return n.doc.descendants((s,i)=>{if(!s.attrs.id||!r.updatedBlocks.has(s.attrs.id))return;const a=r.currentTransactionOldBlockAttrs[s.attrs.id],l={};for(const[u,f]of Object.entries(a))l["data-prev-"+q9e[u]]=f||"none";const c=Mn.node(i,i+s.nodeSize,{...l});o.push(c)}),Gt.create(n.doc,o)}}})}}function jJ(t,e){for(var n,r;t&&t.parentElement&&t.parentElement!==e.dom&&((n=t.getAttribute)==null?void 0:n.call(t,"data-node-type"))!=="blockContainer";)t=t.parentElement;if(((r=t.getAttribute)==null?void 0:r.call(t,"data-node-type"))==="blockContainer")return{node:t,id:t.getAttribute("data-id")}}class Hp extends nt{constructor(e,n){super(e,n),pe(this,"nodes");const r=e.node();this.nodes=[],e.doc.nodesBetween(e.pos,n.pos,(o,s,i)=>{if(i!==null&&i.eq(r))return this.nodes.push(o),!1})}static create(e,n,r=n){return new Hp(e.resolve(n),e.resolve(r))}content(){return new je(_e.from(this.nodes),0,0)}eq(e){if(!(e instanceof Hp)||this.nodes.length!==e.nodes.length||this.from!==e.from||this.to!==e.to)return!1;for(let n=0;n<this.nodes.length;n++)if(!this.nodes[n].eq(e.nodes[n]))return!1;return!0}map(e,n){const r=n.mapResult(this.from),o=n.mapResult(this.to);return o.deleted?nt.near(e.resolve(r.pos)):r.deleted?nt.near(e.resolve(o.pos)):new Hp(e.resolve(r.pos),e.resolve(o.pos))}toJSON(){return{type:"node",anchor:this.anchor,head:this.head}}}let La;function Y9e(t,e){let n,r;const o=e.resolve(t.from).node().type.spec.group==="blockContent",s=e.resolve(t.to).node().type.spec.group==="blockContent",i=Math.min(t.$anchor.depth,t.$head.depth);if(o&&s){const a=t.$from.start(i-1),l=t.$to.end(i-1);n=e.resolve(a-1).pos,r=e.resolve(l+1).pos}else n=t.from,r=t.to;return{from:n,to:r}}function sj(t,e,n=e){e===n&&(n+=t.state.doc.resolve(e+1).node().nodeSize);const r=t.domAtPos(e).node.cloneNode(!0),o=t.domAtPos(e).node,s=(c,u)=>Array.prototype.indexOf.call(c.children,u),i=s(o,t.domAtPos(e+1).node.parentElement),a=s(o,t.domAtPos(n-1).node.parentElement);for(let c=o.childElementCount-1;c>=0;c--)(c>a||c<i)&&r.removeChild(r.children[c]);VJ(t.root),La=r;const l=t.dom.className.split(" ").filter(c=>c!=="ProseMirror"&&c!=="bn-root"&&c!=="bn-editor").join(" ");La.className=La.className+" bn-drag-preview "+l,t.root instanceof ShadowRoot?t.root.appendChild(La):t.root.body.appendChild(La)}function VJ(t){La!==void 0&&(t instanceof ShadowRoot?t.removeChild(La):t.body.removeChild(La),La=void 0)}function Q9e(t,e,n){if(!t.dataTransfer)return;const r=n.prosemirrorView;if(!r)return;const o=Ms(e.id,r.state.doc);if(!o)throw new Error(`Block with ID ${e.id} not found`);const s=o.posBeforeNode;if(s!=null){const i=r.state.selection,a=r.state.doc,{from:l,to:c}=Y9e(i,a),u=l<=s&&s<c,f=i.$anchor.node()!==i.$head.node()||i instanceof Hp;u&&f?(r.dispatch(r.state.tr.setSelection(Hp.create(a,l,c))),sj(r,l,c)):(r.dispatch(r.state.tr.setSelection(Je.create(r.state.doc,s))),sj(r,s));const h=r.state.selection.content(),p=n.pmSchema,m=sY(r,h).dom.innerHTML,y=f2(p,n),x=PJ(h.content,n.schema),b=y.exportBlocks(x,{}),C=E5(b);t.dataTransfer.clearData(),t.dataTransfer.setData("blocknote/html",m),t.dataTransfer.setData("text/html",b),t.dataTransfer.setData("text/plain",C),t.dataTransfer.effectAllowed="move",t.dataTransfer.setDragImage(La,0,0)}}const qg=.1;function MR(t,e,n,r=!0){const o=t.root.elementsFromPoint(e.left+(n==="editor"?50:0),e.top);for(const s of o)if(t.dom.contains(s))return r&&s.closest("[data-node-type=columnList]")?MR(t,{left:e.left+50,top:e.top},n,!1):jJ(s,t)}function X9e(t,e,n){if(!e.dom.firstChild)return;const r=e.dom.firstChild.getBoundingClientRect(),o={left:t.x,top:t.y},s=o.left<r.left,i=o.left>r.right;n==="viewport"&&(s&&(o.left=r.left+10),i&&(o.left=r.right-10));let a=MR(e,o,n);if(!i&&a){const l=a.node.getBoundingClientRect();o.left=l.right-10,a=MR(e,o,"viewport",!1)}return a}class J9e{constructor(e,n,r,o){pe(this,"state"),pe(this,"emitUpdate"),pe(this,"mousePos"),pe(this,"hoveredBlock"),pe(this,"menuFrozen",!1),pe(this,"isDragOrigin",!1),pe(this,"updateState",s=>{this.state=s,this.emitUpdate(this.state)}),pe(this,"updateStateFromMousePos",()=>{var s,i,a,l;if(this.menuFrozen||!this.mousePos)return;const c=X9e(this.mousePos,this.pmView,this.sideMenuDetection);if(!c||!this.editor.isEditable){(s=this.state)!=null&&s.show&&(this.state.show=!1,this.updateState(this.state));return}if((i=this.state)!=null&&i.show&&(a=this.hoveredBlock)!=null&&a.hasAttribute("data-id")&&((l=this.hoveredBlock)==null?void 0:l.getAttribute("data-id"))===c.id)return;this.hoveredBlock=c.node;const u=c.node.firstChild;if(u&&this.editor.isEditable){const f=u.getBoundingClientRect(),h=c.node.closest("[data-node-type=column]");this.updateState({show:!0,referencePos:new DOMRect(h?h.firstElementChild.getBoundingClientRect().x:this.pmView.dom.firstChild.getBoundingClientRect().x,f.y,f.width,f.height),block:this.editor.getBlock(this.hoveredBlock.getAttribute("data-id"))})}}),pe(this,"onDrop",s=>{var i;if(this.editor._tiptapEditor.commands.blur(),this.isDragOrigin&&!this.pmView.dom.contains(s.target)&&this.pmView.dispatch(this.pmView.state.tr.deleteSelection()),this.sideMenuDetection==="editor"||s.synthetic||!((i=s.dataTransfer)!=null&&i.types.includes("blocknote/html")))return;const a=this.pmView.posAtCoords({left:s.clientX,top:s.clientY});if(!a||a.inside===-1){const l=this.createSyntheticEvent(s);this.pmView.dom.dispatchEvent(l)}}),pe(this,"onDragStart",s=>{var i;if(!this.pmView.dragging){const a=(i=s.dataTransfer)==null?void 0:i.getData("blocknote/html");if(!a)return;const l=document.createElement("div");l.innerHTML=a;const c=ff.fromSchema(this.pmView.state.schema).parse(l,{topNode:this.pmView.state.schema.nodes.blockGroup.create()});this.pmView.dragging={slice:new je(c.content,0,0),move:!0}}}),pe(this,"onDragOver",s=>{var i;if(this.sideMenuDetection==="editor"||s.synthetic||!((i=s.dataTransfer)!=null&&i.types.includes("blocknote/html")))return;const a=this.pmView.posAtCoords({left:s.clientX,top:s.clientY});if(!a||a.inside===-1&&this.pmView.dom.firstChild){const l=this.createSyntheticEvent(s);this.pmView.dom.dispatchEvent(l)}}),pe(this,"onKeyDown",s=>{var i;(i=this.state)!=null&&i.show&&this.editor.isFocused()&&(this.state.show=!1,this.emitUpdate(this.state))}),pe(this,"onMouseMove",s=>{var i;if(this.menuFrozen)return;this.mousePos={x:s.clientX,y:s.clientY};const a=this.pmView.dom.getBoundingClientRect(),l=this.mousePos.x>a.left&&this.mousePos.x<a.right&&this.mousePos.y>a.top&&this.mousePos.y<a.bottom,c=this.pmView.dom.parentElement;if(l&&s&&s.target&&!(c===s.target||c.contains(s.target))){(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate(this.state));return}this.updateStateFromMousePos()}),pe(this,"onScroll",()=>{var s;(s=this.state)!=null&&s.show&&(this.state.referencePos=this.hoveredBlock.getBoundingClientRect(),this.emitUpdate(this.state))}),this.editor=e,this.sideMenuDetection=n,this.pmView=r,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized side menu");o(this.state)},this.pmView.root.addEventListener("dragstart",this.onDragStart),this.pmView.root.addEventListener("dragover",this.onDragOver),this.pmView.root.addEventListener("drop",this.onDrop,!0),C5(),this.pmView.root.addEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.addEventListener("keydown",this.onKeyDown,!0),r.root.addEventListener("scroll",this.onScroll,!0)}createSyntheticEvent(e){const n=new Event(e.type,e),r=this.pmView.dom.firstChild.getBoundingClientRect();return n.clientX=e.clientX,n.clientY=e.clientY,e.clientX<r.left&&e.clientX>r.left-r.width*qg?n.clientX=r.left+r.width*qg/2:e.clientX>r.right&&e.clientX<r.right+r.width*qg?n.clientX=r.right-r.width*qg/2:(e.clientX<r.left||e.clientX>r.right)&&(n.clientX=r.left+qg*r.width*2),n.clientY=Math.min(Math.max(e.clientY,r.top),r.top+r.height),n.dataTransfer=e.dataTransfer,n.preventDefault=()=>e.preventDefault(),n.synthetic=!0,n}update(e,n){var r;!n.doc.eq(this.pmView.state.doc)&&(r=this.state)!=null&&r.show&&this.updateStateFromMousePos()}destroy(){var e;(e=this.state)!=null&&e.show&&(this.state.show=!1,this.emitUpdate(this.state)),this.pmView.root.removeEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.removeEventListener("dragstart",this.onDragStart),this.pmView.root.removeEventListener("dragover",this.onDragOver),this.pmView.root.removeEventListener("drop",this.onDrop,!0),this.pmView.root.removeEventListener("keydown",this.onKeyDown,!0),this.pmView.root.removeEventListener("scroll",this.onScroll,!0)}}const Z9e=new Ht("SideMenuPlugin");class eDe extends eg{constructor(e,n){super(),pe(this,"view"),pe(this,"plugin"),pe(this,"blockDragStart",(r,o)=>{this.view&&(this.view.isDragOrigin=!0),Q9e(r,o,this.editor)}),pe(this,"blockDragEnd",()=>{this.editor.prosemirrorView&&VJ(this.editor.prosemirrorView.root),this.view&&(this.view.isDragOrigin=!1)}),pe(this,"freezeMenu",()=>{this.view.menuFrozen=!0,this.view.state.show=!0,this.view.emitUpdate(this.view.state)}),pe(this,"unfreezeMenu",()=>{this.view.menuFrozen=!1,this.view.state.show=!1,this.view.emitUpdate(this.view.state)}),this.editor=e,this.plugin=new kt({key:Z9e,view:r=>(this.view=new J9e(e,n,r,o=>{this.emit("update",o)}),this.view)})}onUpdate(e){return this.on("update",e)}}const tDe=qE(t=>t.type.name==="blockContainer");class nDe{constructor(e,n){pe(this,"state"),pe(this,"emitUpdate"),pe(this,"rootEl"),pe(this,"pluginState"),pe(this,"handleScroll",()=>{var s,i;if((s=this.state)!=null&&s.show){const a=(i=this.rootEl)==null?void 0:i.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);if(!a)return;this.state.referencePos=a.getBoundingClientRect(),this.emitUpdate(this.pluginState.triggerCharacter)}}),pe(this,"closeMenu",()=>{this.editor.dispatch(this.editor._tiptapEditor.state.tr.setMeta(zp,null))}),pe(this,"clearQuery",()=>{this.pluginState!==void 0&&this.editor._tiptapEditor.chain().focus().deleteRange({from:this.pluginState.queryStartPos-(this.pluginState.deleteTriggerCharacter?this.pluginState.triggerCharacter.length:0),to:this.editor._tiptapEditor.state.selection.from}).run()});var r,o;this.editor=e,this.pluginState=void 0,this.emitUpdate=s=>{var i;if(!this.state)throw new Error("Attempting to update uninitialized suggestions menu");n(s,{...this.state,ignoreQueryLength:(i=this.pluginState)==null?void 0:i.ignoreQueryLength})},this.rootEl=(r=this.editor.prosemirrorView)==null?void 0:r.root,(o=this.rootEl)==null||o.addEventListener("scroll",this.handleScroll,!0)}update(e,n){var r;const o=zp.getState(n),s=zp.getState(e.state),i=o===void 0&&s!==void 0,a=o!==void 0&&s===void 0;if(!i&&!(o!==void 0&&s!==void 0)&&!a)return;if(this.pluginState=a?o:s,a||!this.editor.isEditable){this.state.show=!1,this.emitUpdate(this.pluginState.triggerCharacter);return}const l=(r=this.rootEl)==null?void 0:r.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);this.editor.isEditable&&l&&(this.state={show:!0,referencePos:l.getBoundingClientRect(),query:this.pluginState.query},this.emitUpdate(this.pluginState.triggerCharacter))}destroy(){var e;(e=this.rootEl)==null||e.removeEventListener("scroll",this.handleScroll,!0)}}const zp=new Ht("SuggestionMenuPlugin");class rDe extends eg{constructor(e){super(),pe(this,"view"),pe(this,"plugin"),pe(this,"triggerCharacters",[]),pe(this,"addTriggerCharacter",r=>{this.triggerCharacters.push(r)}),pe(this,"removeTriggerCharacter",r=>{this.triggerCharacters=this.triggerCharacters.filter(o=>o!==r)}),pe(this,"closeMenu",()=>this.view.closeMenu()),pe(this,"clearQuery",()=>this.view.clearQuery());const n=this.triggerCharacters;this.plugin=new kt({key:zp,view:()=>(this.view=new nDe(e,(r,o)=>{this.emit(`update ${r}`,o)}),this.view),state:{init(){},apply(r,o,s,i){if(r.getMeta("orderedListIndexing")!==void 0||r.selection.$from.parent.type.spec.code)return o;const a=r.getMeta(zp);if(typeof a=="object"&&a!==null&&o===void 0)return{triggerCharacter:a.triggerCharacter,deleteTriggerCharacter:a.deleteTriggerCharacter!==!1,queryStartPos:i.selection.from,query:"",decorationId:`id_${Math.floor(Math.random()*4294967295)}`,ignoreQueryLength:a==null?void 0:a.ignoreQueryLength};if(o===void 0)return o;if(i.selection.from!==i.selection.to||a===null||r.getMeta("focus")||r.getMeta("blur")||r.getMeta("pointer")||o.triggerCharacter!==void 0&&i.selection.from<o.queryStartPos)return;const l={...o};return l.query=i.doc.textBetween(o.queryStartPos,i.selection.from),l}},props:{handleTextInput(r,o,s,i){const a=this.getState(r.state);return n.includes(i)&&a===void 0?(r.dispatch(r.state.tr.insertText(i).scrollIntoView().setMeta(zp,{triggerCharacter:i})),!0):!1},decorations(r){const o=this.getState(r);if(o===void 0)return null;if(!o.deleteTriggerCharacter){const s=tDe(r.selection);if(s)return Gt.create(r.doc,[Mn.node(s.pos,s.pos+s.node.nodeSize,{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":o.decorationId})])}return Gt.create(r.doc,[Mn.inline(o.queryStartPos-o.triggerCharacter.length,o.queryStartPos,{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":o.decorationId})])}}})}onUpdate(e,n){return this.triggerCharacters.includes(e)||this.addTriggerCharacter(e),this.on(`update ${e}`,n)}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}}let Uo;function ij(t){Uo||(Uo=document.createElement("div"),Uo.innerHTML="_",Uo.style.opacity="0",Uo.style.height="1px",Uo.style.width="1px",t instanceof Document?t.body.appendChild(Uo):t.appendChild(Uo))}function oDe(t){Uo&&(t instanceof Document?t.body.removeChild(Uo):t.removeChild(Uo),Uo=void 0)}function A0(t){return Array.prototype.indexOf.call(t.parentElement.childNodes,t)}function sDe(t){let e=t;for(;e&&e.nodeName!=="TD"&&e.nodeName!=="TH"&&!e.classList.contains("tableWrapper");){if(e.classList.contains("ProseMirror"))return;const n=e.parentNode;if(!n||!(n instanceof Element))return;e=n}return e.nodeName==="TD"||e.nodeName==="TH"?{type:"cell",domNode:e,tbodyNode:e.closest("tbody")}:{type:"wrapper",domNode:e,tbodyNode:e.querySelector("tbody")}}function iDe(t,e){const n=e.querySelectorAll(t);for(let r=0;r<n.length;r++)n[r].style.visibility="hidden"}class aDe{constructor(e,n,r){pe(this,"state"),pe(this,"emitUpdate"),pe(this,"tableId"),pe(this,"tablePos"),pe(this,"tableElement"),pe(this,"menuFrozen",!1),pe(this,"mouseState","up"),pe(this,"prevWasEditable",null),pe(this,"viewMousedownHandler",()=>{this.mouseState="down"}),pe(this,"mouseUpHandler",o=>{this.mouseState="up",this.mouseMoveHandler(o)}),pe(this,"mouseMoveHandler",o=>{var s,i,a,l;if(this.menuFrozen||this.mouseState==="selecting"||!(o.target instanceof Element)||!this.pmView.dom.contains(o.target))return;const c=sDe(o.target);if((c==null?void 0:c.type)==="cell"&&this.mouseState==="down"&&!((s=this.state)!=null&&s.draggingState)){this.mouseState="selecting",(i=this.state)!=null&&i.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate());return}if(!c||!this.editor.isEditable){(a=this.state)!=null&&a.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate());return}if(!c.tbodyNode)return;const u=c.tbodyNode.getBoundingClientRect(),f=jJ(c.domNode,this.pmView);if(!f)return;this.tableElement=f.node;let h;const p=Ms(f.id,this.editor._tiptapEditor.state.doc);if(!p)throw new Error(`Block with ID ${f.id} not found`);const m=Zn(p.node,this.editor.schema.blockSchema,this.editor.schema.inlineContentSchema,this.editor.schema.styleSchema,this.editor.blockCache);if(zMe("table",m,this.editor)&&(this.tablePos=p.posBeforeNode+1,h=m),!h)return;this.tableId=f.id;const y=(l=c.domNode.closest(".tableWrapper"))==null?void 0:l.querySelector(".table-widgets-container");if((c==null?void 0:c.type)==="wrapper"){const x=o.clientY>=u.bottom-1&&o.clientY<u.bottom+20,b=o.clientX>=u.right-1&&o.clientX<u.right+20,C=o.clientX>u.right||o.clientY>u.bottom;this.state={...this.state,show:!0,showAddOrRemoveRowsButton:x,showAddOrRemoveColumnsButton:b,referencePosTable:u,block:h,widgetContainer:y,colIndex:C?void 0:this.state.colIndex,rowIndex:C?void 0:this.state.rowIndex,referencePosCell:C?void 0:this.state.referencePosCell}}else{const x=A0(c.domNode),b=A0(c.domNode.parentElement),C=c.domNode.getBoundingClientRect();if(this.state!==void 0&&this.state.show&&this.tableId===f.id&&this.state.rowIndex===b&&this.state.colIndex===x)return;this.state={show:!0,showAddOrRemoveColumnsButton:x===h.content.rows[0].cells.length-1,showAddOrRemoveRowsButton:b===h.content.rows.length-1,referencePosTable:u,block:h,draggingState:void 0,referencePosCell:C,colIndex:x,rowIndex:b,widgetContainer:y}}return this.emitUpdate(),!1}),pe(this,"dragOverHandler",o=>{var s;if(((s=this.state)==null?void 0:s.draggingState)===void 0)return;o.preventDefault(),o.dataTransfer.dropEffect="move",iDe(".prosemirror-dropcursor-block, .prosemirror-dropcursor-inline",this.pmView.root);const i={left:Math.min(Math.max(o.clientX,this.state.referencePosTable.left+1),this.state.referencePosTable.right-1),top:Math.min(Math.max(o.clientY,this.state.referencePosTable.top+1),this.state.referencePosTable.bottom-1)},a=this.pmView.root.elementsFromPoint(i.left,i.top).filter(y=>y.tagName==="TD"||y.tagName==="TH");if(a.length===0)throw new Error("Could not find table cell element that the mouse cursor is hovering over.");const l=a[0];let c=!1;const u=A0(l.parentElement),f=A0(l),h=this.state.draggingState.draggedCellOrientation==="row"?this.state.rowIndex:this.state.colIndex,p=(this.state.draggingState.draggedCellOrientation==="row"?u:f)!==h;(this.state.rowIndex!==u||this.state.colIndex!==f)&&(this.state.rowIndex=u,this.state.colIndex=f,this.state.referencePosCell=l.getBoundingClientRect(),c=!0);const m=this.state.draggingState.draggedCellOrientation==="row"?i.top:i.left;this.state.draggingState.mousePos!==m&&(this.state.draggingState.mousePos=m,c=!0),c&&this.emitUpdate(),p&&this.editor.dispatch(this.pmView.state.tr.setMeta(gy,!0))}),pe(this,"dropHandler",o=>{if(this.mouseState="up",this.state===void 0||this.state.draggingState===void 0)return;if(this.state.rowIndex===void 0||this.state.colIndex===void 0)throw new Error("Attempted to drop table row or column, but no table block was hovered prior.");o.preventDefault();const{draggingState:s,colIndex:i,rowIndex:a}=this.state,l=this.state.block.content.rows;if(s.draggedCellOrientation==="row"){const c=l[s.originalIndex];l.splice(s.originalIndex,1),l.splice(a,0,c)}else{const c=l.map(u=>u.cells[s.originalIndex]);l.forEach((u,f)=>{u.cells.splice(s.originalIndex,1),u.cells.splice(i,0,c[f])})}this.editor.updateBlock(this.state.block,{type:"table",content:{type:"tableContent",rows:l}}),this.editor.setTextCursorPosition(this.state.block.id)}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized image toolbar");r(this.state)},n.dom.addEventListener("mousemove",this.mouseMoveHandler),n.dom.addEventListener("mousedown",this.viewMousedownHandler),window.addEventListener("mouseup",this.mouseUpHandler),n.root.addEventListener("dragover",this.dragOverHandler),n.root.addEventListener("drop",this.dropHandler)}update(){if(!this.state||!this.state.show)return;if(this.state.block=this.editor.getBlock(this.state.block.id),!this.state.block){this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate();return}const e=this.state.block.content.rows.length,n=this.state.block.content.rows[0].cells.length;this.state.rowIndex!==void 0&&this.state.colIndex!==void 0&&(this.state.rowIndex>=e&&(this.state.rowIndex=e-1),this.state.colIndex>=n&&(this.state.colIndex=n-1));const r=this.tableElement.querySelector("tbody");if(!r)throw new Error("Table block does not contain a 'tbody' HTML element. This should never happen.");if(this.state.rowIndex!==void 0&&this.state.colIndex!==void 0){const o=r.children[this.state.rowIndex].children[this.state.colIndex];this.state.referencePosCell=o.getBoundingClientRect()}this.state.referencePosTable=r.getBoundingClientRect(),this.emitUpdate()}destroy(){this.pmView.dom.removeEventListener("mousemove",this.mouseMoveHandler),window.removeEventListener("mouseup",this.mouseUpHandler),this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("dragover",this.dragOverHandler),this.pmView.root.removeEventListener("drop",this.dropHandler)}}const gy=new Ht("TableHandlesPlugin");class lDe extends eg{constructor(e){super(),pe(this,"view"),pe(this,"plugin"),pe(this,"colDragStart",n=>{if(this.view.state===void 0||this.view.state.colIndex===void 0)throw new Error("Attempted to drag table column, but no table block was hovered prior.");if(this.view.state.draggingState={draggedCellOrientation:"col",originalIndex:this.view.state.colIndex,mousePos:n.clientX},this.view.emitUpdate(),this.editor.dispatch(this.editor._tiptapEditor.state.tr.setMeta(gy,{draggedCellOrientation:this.view.state.draggingState.draggedCellOrientation,originalIndex:this.view.state.colIndex,newIndex:this.view.state.colIndex,tablePos:this.view.tablePos})),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");ij(this.editor.prosemirrorView.root),n.dataTransfer.setDragImage(Uo,0,0),n.dataTransfer.effectAllowed="move"}),pe(this,"rowDragStart",n=>{if(this.view.state===void 0||this.view.state.rowIndex===void 0)throw new Error("Attempted to drag table row, but no table block was hovered prior.");if(this.view.state.draggingState={draggedCellOrientation:"row",originalIndex:this.view.state.rowIndex,mousePos:n.clientY},this.view.emitUpdate(),this.editor.dispatch(this.editor._tiptapEditor.state.tr.setMeta(gy,{draggedCellOrientation:this.view.state.draggingState.draggedCellOrientation,originalIndex:this.view.state.rowIndex,newIndex:this.view.state.rowIndex,tablePos:this.view.tablePos})),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");ij(this.editor.prosemirrorView.root),n.dataTransfer.setDragImage(Uo,0,0),n.dataTransfer.effectAllowed="copyMove"}),pe(this,"dragEnd",()=>{if(this.view.state===void 0)throw new Error("Attempted to drag table row, but no table block was hovered prior.");if(this.view.state.draggingState=void 0,this.view.emitUpdate(),this.editor.dispatch(this.editor._tiptapEditor.state.tr.setMeta(gy,null)),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");oDe(this.editor.prosemirrorView.root)}),pe(this,"freezeHandles",()=>{this.view.menuFrozen=!0}),pe(this,"unfreezeHandles",()=>{this.view.menuFrozen=!1}),this.editor=e,this.plugin=new kt({key:gy,view:n=>(this.view=new aDe(e,n,r=>{this.emit("update",r)}),this.view),props:{decorations:n=>{if(this.view===void 0||this.view.state===void 0||this.view.state.draggingState===void 0||this.view.tablePos===void 0)return;const r=this.view.state.draggingState.draggedCellOrientation==="row"?this.view.state.rowIndex:this.view.state.colIndex;if(r===void 0)return;const o=[];if(r===this.view.state.draggingState.originalIndex)return Gt.create(n.doc,o);const s=n.doc.resolve(this.view.tablePos+1),i=s.node();if(this.view.state.draggingState.draggedCellOrientation==="row"){const a=n.doc.resolve(s.posAtIndex(r)+1),l=a.node();for(let c=0;c<l.childCount;c++){const u=n.doc.resolve(a.posAtIndex(c)+1),f=u.node(),h=u.pos+(r>this.view.state.draggingState.originalIndex?f.nodeSize-2:0);o.push(Mn.widget(h,()=>{const p=document.createElement("div");return p.className="bn-table-drop-cursor",p.style.left="0",p.style.right="0",r>this.view.state.draggingState.originalIndex?p.style.bottom="-2px":p.style.top="-3px",p.style.height="4px",p}))}}else for(let a=0;a<i.childCount;a++){const l=n.doc.resolve(s.posAtIndex(a)+1),c=n.doc.resolve(l.posAtIndex(r)+1),u=c.node(),f=c.pos+(r>this.view.state.draggingState.originalIndex?u.nodeSize-2:0);o.push(Mn.widget(f,()=>{const h=document.createElement("div");return h.className="bn-table-drop-cursor",h.style.top="0",h.style.bottom="0",r>this.view.state.draggingState.originalIndex?h.style.right="-2px":h.style.left="-3px",h.style.width="4px",h}))}return Gt.create(n.doc,o)}}})}onUpdate(e){return this.on("update",e)}}const cDe=sn.create({name:"textAlignment",addGlobalAttributes(){return[{types:["paragraph","heading","bulletListItem","numberedListItem","checkListItem"],attributes:{textAlignment:{default:"left",parseHTML:t=>t.getAttribute("data-text-alignment"),renderHTML:t=>t.textAlignment==="left"?{}:{"data-text-alignment":t.textAlignment}}}}]}}),uDe=sn.create({name:"blockTextColor",addGlobalAttributes(){return[{types:["blockContainer"],attributes:{textColor:{default:_r.textColor.default,parseHTML:t=>t.hasAttribute("data-text-color")?t.getAttribute("data-text-color"):_r.textColor.default,renderHTML:t=>t.textColor===_r.textColor.default?{}:{"data-text-color":t.textColor}}}}]}}),dDe=sn.create({name:"trailingNode",addProseMirrorPlugins(){const t=new Ht(this.name);return[new kt({key:t,appendTransaction:(e,n,r)=>{const{doc:o,tr:s,schema:i}=r,a=t.getState(r),l=o.content.size-2,c=i.nodes.blockContainer,u=i.nodes.paragraph;if(a)return s.insert(l,c.create(void 0,u.create()))},state:{init:(e,n)=>{},apply:(e,n)=>{if(!e.docChanged)return n;let r=e.doc.lastChild;if(!r||r.type.name!=="blockGroup")throw new Error("Expected blockGroup");if(r=r.lastChild,!r||r.type.name!=="blockContainer")return!0;const o=r.firstChild;if(!o)throw new Error("Expected blockContent");return r.nodeSize>4||o.type.spec.content!=="inline*"}}})]}}),fDe={blockColor:"data-block-color",blockStyle:"data-block-style",id:"data-id",depth:"data-depth",depthChange:"data-depth-change"},hDe=fa.create({name:"blockContainer",group:"blockGroupChild bnBlock",content:"blockContent blockGroup?",priority:50,defining:!0,parseHTML(){return[{tag:"div",getAttrs:t=>{if(typeof t=="string")return!1;const e={};for(const[n,r]of Object.entries(fDe))t.getAttribute(r)&&(e[n]=t.getAttribute(r));return t.getAttribute("data-node-type")==="blockContainer"?e:!1}}]},renderHTML({HTMLAttributes:t}){var e;const n=document.createElement("div");n.className="bn-block-outer",n.setAttribute("data-node-type","blockOuter");for(const[s,i]of Object.entries(t))s!=="class"&&n.setAttribute(s,i);const r={...((e=this.options.domAttributes)==null?void 0:e.block)||{},...t},o=document.createElement("div");o.className=Ds("bn-block",r.class),o.setAttribute("data-node-type",this.name);for(const[s,i]of Object.entries(r))s!=="class"&&o.setAttribute(s,i);return n.appendChild(o),{dom:n,contentDOM:o}}}),pDe=fa.create({name:"blockGroup",group:"childContainer",content:"blockGroupChild+",parseHTML(){return[{tag:"div",getAttrs:t=>typeof t=="string"?!1:t.getAttribute("data-node-type")==="blockGroup"?null:!1}]},renderHTML({HTMLAttributes:t}){var e;const n={...((e=this.options.domAttributes)==null?void 0:e.blockGroup)||{},...t},r=document.createElement("div");r.className=Ds("bn-block-group",n.class),r.setAttribute("data-node-type","blockGroup");for(const[o,s]of Object.entries(n))o!=="class"&&r.setAttribute(o,s);return{dom:r,contentDOM:r}}}),mDe=fa.create({name:"doc",topNode:!0,content:"blockGroup"}),gDe=t=>{const e={},n=yDe(t);for(const o of n)e[o.name]=o;e.formattingToolbar=new L9e(t.editor),e.linkToolbar=new U9e(t.editor),e.sideMenu=new eDe(t.editor,t.sideMenuDetection),e.suggestionMenus=new rDe(t.editor),e.filePanel=new M9e(t.editor),e.placeholder=new G9e(t.editor,t.placeholders),(t.animations??!0)&&(e.animations=new K9e),t.tableHandles&&(e.tableHandles=new lDe(t.editor)),e.dropCursor={plugin:t.dropCursor({width:5,color:"#ddeeff",editor:t.editor})},e.nodeSelectionKeyboard=new z9e;const r=t.disableExtensions||[];for(const o of r)delete e[o];return e},yDe=t=>{var e;const n=[Hg.ClipboardTextSerializer,Hg.Commands,Hg.Editable,Hg.FocusEvents,Hg.Tabindex,$3e,u2.configure({types:["blockContainer","columnList","column"],setIdAttribute:t.setIdAttribute}),B3e.extend({priority:10}),b5e,w5e.extend({inclusive:!1}).configure({defaultProtocol:LJ,protocols:OJ}),...Object.values(t.styleSpecs).map(r=>r.implementation.mark),uDe,A9e,cDe,sn.create({name:"OverrideEscape",addKeyboardShortcuts(){return{Escape:()=>t.editor.suggestionMenus.shown?!1:this.editor.commands.blur()}}}),mDe,hDe.configure({editor:t.editor,domAttributes:t.domAttributes}),$9e.configure({editor:t.editor,tabBehavior:t.tabBehavior}),pDe.configure({domAttributes:t.domAttributes}),...Object.values(t.inlineContentSpecs).filter(r=>r.config!=="link"&&r.config!=="text").map(r=>r.implementation.node.configure({editor:t.editor})),...Object.values(t.blockSpecs).flatMap(r=>[...(r.implementation.requiredExtensions||[]).map(o=>o.configure({editor:t.editor,domAttributes:t.domAttributes})),r.implementation.node.configure({editor:t.editor,domAttributes:t.domAttributes})]),R9e(t.editor),N9e(t.editor),S9e(t.editor),...t.trailingBlock===void 0||t.trailingBlock?[dDe]:[]];if(t.collaboration){n.push(R3e.configure({fragment:t.collaboration.fragment}));const r=(e=t.collaboration)==null?void 0:e.provider.awareness;if(r){const o=new Map;t.collaboration.showCursorLabels!=="always"&&r.on("change",({updated:a})=>{for(const l of a){const c=o.get(l);c&&(c.element.setAttribute("data-active",""),c.hideTimeout&&clearTimeout(c.hideTimeout),o.set(l,{element:c.element,hideTimeout:setTimeout(()=>{c.element.removeAttribute("data-active")},2e3)}))}});const s=(a,l,c)=>{var u,f;const h=document.createElement("span");h.classList.add("collaboration-cursor__caret"),h.setAttribute("style",`border-color: ${c}`),((u=t.collaboration)==null?void 0:u.showCursorLabels)==="always"&&h.setAttribute("data-active","");const p=document.createElement("span");return p.classList.add("collaboration-cursor__label"),p.setAttribute("style",`background-color: ${c}`),p.insertBefore(document.createTextNode(l),null),h.insertBefore(document.createTextNode("⁠"),null),h.insertBefore(p,null),h.insertBefore(document.createTextNode("⁠"),null),o.set(a,{element:h,hideTimeout:void 0}),((f=t.collaboration)==null?void 0:f.showCursorLabels)!=="always"&&(h.addEventListener("mouseenter",()=>{const m=o.get(a);m.element.setAttribute("data-active",""),m.hideTimeout&&(clearTimeout(m.hideTimeout),o.set(a,{element:m.element,hideTimeout:void 0}))}),h.addEventListener("mouseleave",()=>{const m=o.get(a);o.set(a,{element:m.element,hideTimeout:setTimeout(()=>{m.element.removeAttribute("data-active")},2e3)})})),o.get(a)},i=a=>{const l=[...r.getStates().entries()].find(u=>u[1].user===a);if(!l)throw new Error("Could not find client state for user");const c=l[0];return(o.get(c)||s(c,a.name,a.color)).element};n.push(A3e.configure({user:t.collaboration.user,render:t.collaboration.renderCursor||i,provider:t.collaboration.provider}))}}else n.push(Q3e);return n};function vDe(t,e){const n=[];return t.forEach((r,o,s)=>{s!==e&&n.push(r)}),_e.from(n)}function wDe(t,e){const n=[];for(let r=0;r<t.childCount;r++)if(t.child(r).type.name==="tableRow")if(n.length>0&&n[n.length-1].type.name==="table"){const o=n[n.length-1],s=o.copy(o.content.addToEnd(t.child(r)));n[n.length-1]=s}else{const o=e.nodes.table.createChecked(void 0,t.child(r));n.push(o)}else n.push(t.child(r));return t=_e.from(n),t}function bDe(t,e){let n=_e.from(t.content);if(n=wDe(n,e.state.schema),!xDe(n,e))return new je(n,t.openStart,t.openEnd);for(let r=0;r<n.childCount;r++)if(n.child(r).type.spec.group==="blockContent"){const o=[n.child(r)];if(r+1<n.childCount&&n.child(r+1).type.name==="blockGroup"){const i=n.child(r+1).child(0).child(0);(i.type.name==="bulletListItem"||i.type.name==="numberedListItem"||i.type.name==="checkListItem")&&(o.push(n.child(r+1)),n=vDe(n,r+1))}const s=e.state.schema.nodes.blockContainer.createChecked(void 0,o);n=n.replaceChild(r,s)}return new je(n,t.openStart,t.openEnd)}function xDe(t,e){var n,r;const o=t.childCount===1,s=((n=t.firstChild)==null?void 0:n.type.spec.content)==="inline*",i=((r=t.firstChild)==null?void 0:r.type.spec.content)==="tableRow+";if(o){if(s)return!1;if(i){const a=gn(e.state);if(a.isBlockContainer)return a.blockContent.node.type.spec.content!=="tableRow+"}}return!0}const DR=class extends aTe{constructor(e,n){super({...e,content:void 0}),pe(this,"_state"),pe(this,"_creating",!1),pe(this,"mount",a=>{a?(this.options.element=a,this.createViewAlternative()):(this.destroy(),this._creating=!1)});const r=this.schema;let o;const s=r.nodes.doc.createAndFill;r.nodes.doc.createAndFill=(...a)=>{if(o)return o;const l=s.apply(r.nodes.doc,a),c=JSON.parse(JSON.stringify(l.toJSON()));return c.content[0].content[0].attrs.id="initialBlockId",o=oc.fromJSON(r,c),o};let i;try{const a=e==null?void 0:e.content.map(l=>rh(l,this.schema,n).toJSON());i=Kx({type:"doc",content:[{type:"blockGroup",content:a}]},this.schema,this.options.parseOptions)}catch(a){throw console.error("Error creating document from blocks passed as `initialContent`. Caused by exception: ",a),new Error("Error creating document from blocks passed as `initialContent`:\n"+ +JSON.stringify(e.content))}this._state=Zd.create({doc:i,schema:this.schema})}get state(){return this.view&&(this._state=this.view.state),this._state}dispatch(e){this.view?this.view.dispatch(e):this._state=this.state.apply(e)}createViewAlternative(){this._creating=!0,queueMicrotask(()=>{if(!this._creating)return;this.view=new iY({mount:this.options.element},{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:this.state});const e=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(e),this.createNodeViews(),this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0,this._creating=!1})}};pe(DR,"create",(t,e)=>{var n,r;const o=(n=globalThis==null?void 0:globalThis.window)==null?void 0:n.setTimeout;typeof((r=globalThis==null?void 0:globalThis.window)==null?void 0:r.setTimeout)<"u"&&(globalThis.window.setTimeout=()=>0);try{return new DR(t,e)}finally{o&&(globalThis.window.setTimeout=o)}});let $J=DR;$J.prototype.createView=function(){this.options.onPaste=this.options.onDrop=void 0};const _De={enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!1};let CDe=class BJ{constructor(e){pe(this,"_pmSchema"),pe(this,"extensions",{}),pe(this,"headless",!1),pe(this,"_tiptapEditor"),pe(this,"elementRenderer",null),pe(this,"blockCache",new WeakMap),pe(this,"dictionary"),pe(this,"schema"),pe(this,"blockImplementations"),pe(this,"inlineContentImplementations"),pe(this,"styleImplementations"),pe(this,"formattingToolbar"),pe(this,"linkToolbar"),pe(this,"sideMenu"),pe(this,"suggestionMenus"),pe(this,"filePanel"),pe(this,"tableHandles"),pe(this,"uploadFile"),pe(this,"onUploadStartCallbacks",[]),pe(this,"onUploadEndCallbacks",[]),pe(this,"resolveFileUrl"),pe(this,"mount",m=>{this._tiptapEditor.mount(m)});var n,r,o,s,i,a,l;this.options=e;const c=e;if(c.onEditorContentChange)throw new Error("onEditorContentChange initialization option is deprecated, use <BlockNoteView onChange={...} />, the useEditorChange(...) hook, or editor.onChange(...)");if(c.onTextCursorPositionChange)throw new Error("onTextCursorPositionChange initialization option is deprecated, use <BlockNoteView onSelectionChange={...} />, the useEditorSelectionChange(...) hook, or editor.onSelectionChange(...)");if(c.onEditorReady)throw new Error("onEditorReady is deprecated. Editor is immediately ready for use after creation.");if(c.editable)throw new Error("editable initialization option is deprecated, use <BlockNoteView editable={true/false} />, or alternatively editor.isEditable = true/false");this.dictionary=e.dictionary||k5e;const u={defaultStyles:!0,schema:e.schema||bJ.create(),_headless:!1,...e,placeholders:{...this.dictionary.placeholders,...e.placeholders}};if(this.schema=u.schema,this.blockImplementations=u.schema.blockSpecs,this.inlineContentImplementations=u.schema.inlineContentSpecs,this.styleImplementations=u.schema.styleSpecs,this.extensions=gDe({editor:this,domAttributes:u.domAttributes||{},blockSpecs:this.schema.blockSpecs,styleSpecs:this.schema.styleSpecs,inlineContentSpecs:this.schema.inlineContentSpecs,collaboration:u.collaboration,trailingBlock:u.trailingBlock,disableExtensions:u.disableExtensions,setIdAttribute:u.setIdAttribute,animations:u.animations??!0,tableHandles:fs("table",this),dropCursor:this.options.dropCursor??x5e,placeholders:u.placeholders,tabBehavior:u.tabBehavior,sideMenuDetection:u.sideMenuDetection||"viewport"}),(((n=u._tiptapOptions)==null?void 0:n.extensions)||[]).forEach(m=>{this.extensions[m.name]=m}),Object.entries(u._extensions||{}).forEach(([m,y])=>{typeof y=="function"&&(y=y(this)),this.extensions[m]=y}),this.formattingToolbar=this.extensions.formattingToolbar,this.linkToolbar=this.extensions.linkToolbar,this.sideMenu=this.extensions.sideMenu,this.suggestionMenus=this.extensions.suggestionMenus,this.filePanel=this.extensions.filePanel,this.tableHandles=this.extensions.tableHandles,u.uploadFile){const m=u.uploadFile;this.uploadFile=async(y,x)=>{this.onUploadStartCallbacks.forEach(b=>b.apply(this,[x]));try{return await m(y,x)}finally{this.onUploadEndCallbacks.forEach(b=>b.apply(this,[x]))}}}this.resolveFileUrl=u.resolveFileUrl,this.headless=u._headless,u.collaboration&&u.initialContent&&console.warn("When using Collaboration, initialContent might cause conflicts, because changes should come from the collaboration provider");const f=u.initialContent||(e.collaboration?[{type:"paragraph",id:"initialBlockId"}]:[{type:"paragraph",id:u2.options.generateID()}]);if(!Array.isArray(f)||f.length===0)throw new Error("initialContent must be a non-empty array of blocks, received: "+f);const h=[...Object.entries(this.extensions).map(([m,y])=>{if(y instanceof sn||y instanceof fa||y instanceof As)return y;if(!y.plugin)throw new Error("Extension should either be a TipTap extension or a ProseMirror plugin in a plugin property");return sn.create({name:m,addProseMirrorPlugins:()=>[y.plugin]})})],p={..._De,...u._tiptapOptions,content:f,extensions:h,editorProps:{...(r=u._tiptapOptions)==null?void 0:r.editorProps,attributes:{tabIndex:"0",...(s=(o=u._tiptapOptions)==null?void 0:o.editorProps)==null?void 0:s.attributes,...(i=u.domAttributes)==null?void 0:i.editor,class:Ds("bn-editor",u.defaultStyles?"bn-default-styles":"",((l=(a=u.domAttributes)==null?void 0:a.editor)==null?void 0:l.class)||"")},transformPasted:bDe}};this.headless?this._pmSchema=MSe(p.extensions):(this._tiptapEditor=$J.create(p,this.schema.styleSchema),this._pmSchema=this._tiptapEditor.schema)}get pmSchema(){return this._pmSchema}static create(e={}){return new BJ(e)}dispatch(e){this._tiptapEditor.dispatch(e)}get prosemirrorView(){return this._tiptapEditor.view}get domElement(){var e;return(e=this.prosemirrorView)==null?void 0:e.dom}isFocused(){var e;return((e=this.prosemirrorView)==null?void 0:e.hasFocus())||!1}focus(){var e;(e=this.prosemirrorView)==null||e.focus()}onUploadStart(e){return this.onUploadStartCallbacks.push(e),()=>{const n=this.onUploadStartCallbacks.indexOf(e);n>-1&&this.onUploadStartCallbacks.splice(n,1)}}onUploadEnd(e){return this.onUploadEndCallbacks.push(e),()=>{const n=this.onUploadEndCallbacks.indexOf(e);n>-1&&this.onUploadEndCallbacks.splice(n,1)}}get topLevelBlocks(){return this.document}get document(){const e=[];return this._tiptapEditor.state.doc.firstChild.descendants(n=>(e.push(Zn(n,this.schema.blockSchema,this.schema.inlineContentSchema,this.schema.styleSchema,this.blockCache)),!1)),e}getBlock(e){return i9e(this,e)}getPrevBlock(e){return a9e(this,e)}getNextBlock(e){return l9e(this,e)}getParentBlock(e){return c9e(this,e)}forEachBlock(e,n=!1){const r=this.document.slice();n&&r.reverse();function o(s){for(const i of s){if(e(i)===!1)return!1;const a=n?i.children.slice().reverse():i.children;if(!o(a))return!1}return!0}o(r)}onEditorContentChange(e){this._tiptapEditor.on("update",e)}onEditorSelectionChange(e){this._tiptapEditor.on("selectionUpdate",e)}getTextCursorPosition(){return h9e(this)}setTextCursorPosition(e,n="start"){NJ(this,e,n)}getSelection(){return d9e(this)}setSelection(e,n){f9e(this,e,n)}get isEditable(){if(!this._tiptapEditor){if(!this.headless)throw new Error("no editor, but also not headless?");return!1}return this._tiptapEditor.isEditable===void 0?!0:this._tiptapEditor.isEditable}set isEditable(e){if(!this._tiptapEditor){if(!this.headless)throw new Error("no editor, but also not headless?");return}this._tiptapEditor.options.editable!==e&&this._tiptapEditor.setEditable(e)}insertBlocks(e,n,r="before"){return YMe(this,e,n,r)}updateBlock(e,n){return cMe(this,e,n)}removeBlocks(e){return s9e(this,e)}replaceBlocks(e,n){return o9e(this,e,n)}insertInlineContent(e){const n=sl(e,this.pmSchema,this.schema.styleSchema);u9e({from:this._tiptapEditor.state.selection.from,to:this._tiptapEditor.state.selection.to},n,this)}getActiveStyles(){const e={},n=this._tiptapEditor.state.selection.$to.marks();for(const r of n){const o=this.schema.styleSchema[r.type.name];if(!o){r.type.name!=="link"&&console.warn("mark not found in styleschema",r.type.name);continue}o.propSchema==="boolean"?e[o.type]=!0:e[o.type]=r.attrs.stringValue}return e}addStyles(e){for(const[n,r]of Object.entries(e)){const o=this.schema.styleSchema[n];if(!o)throw new Error(`style ${n} not found in styleSchema`);if(o.propSchema==="boolean")this._tiptapEditor.commands.setMark(n);else if(o.propSchema==="string")this._tiptapEditor.commands.setMark(n,{stringValue:r});else throw new ol(o.propSchema)}}removeStyles(e){for(const n of Object.keys(e))this._tiptapEditor.commands.unsetMark(n)}toggleStyles(e){for(const[n,r]of Object.entries(e)){const o=this.schema.styleSchema[n];if(!o)throw new Error(`style ${n} not found in styleSchema`);if(o.propSchema==="boolean")this._tiptapEditor.commands.toggleMark(n);else if(o.propSchema==="string")this._tiptapEditor.commands.toggleMark(n,{stringValue:r});else throw new ol(o.propSchema)}}getSelectedText(){return this._tiptapEditor.state.doc.textBetween(this._tiptapEditor.state.selection.from,this._tiptapEditor.state.selection.to)}getSelectedLinkUrl(){return this._tiptapEditor.getAttributes("link").href}createLink(e,n){if(e==="")return;const{from:r,to:o}=this._tiptapEditor.state.selection;n||(n=this._tiptapEditor.state.doc.textBetween(r,o));const s=this.pmSchema.mark("link",{href:e});this.dispatch(this._tiptapEditor.state.tr.insertText(n,r,o).addMark(r,r+n.length,s))}canNestBlock(){return n9e(this)}nestBlock(){SJ(this)}canUnnestBlock(){return r9e(this)}unnestBlock(){t9e(this)}moveBlocksUp(){JMe(this)}moveBlocksDown(){ZMe(this)}async blocksToHTMLLossy(e=this.document){return f2(this.pmSchema,this).exportBlocks(e,{})}async blocksToFullHTML(e){return D5e(this.pmSchema,this).serializeBlocks(e,{})}async tryParseHTMLToBlocks(e){return RJ(e,this.schema.blockSchema,this.schema.inlineContentSchema,this.schema.styleSchema,this.pmSchema)}async blocksToMarkdownLossy(e=this.document){return g9e(e,this.pmSchema,this,{})}async tryParseMarkdownToBlocks(e){return C9e(e,this.schema.blockSchema,this.schema.inlineContentSchema,this.schema.styleSchema,this.pmSchema)}updateCollaborationUserInfo(e){if(!this.options.collaboration)throw new Error("Cannot update collaboration user info when collaboration is disabled.");this._tiptapEditor.commands.updateUser(e)}onChange(e){if(this.headless)return;const n=()=>{e(this)};return this._tiptapEditor.on("update",n),()=>{this._tiptapEditor.off("update",n)}}onSelectionChange(e){if(this.headless)return;const n=()=>{e(this)};return this._tiptapEditor.on("selectionUpdate",n),()=>{this._tiptapEditor.off("selectionUpdate",n)}}openSuggestionMenu(e,n){var r;const o=(r=this.prosemirrorView)==null?void 0:r.state.tr;if(!o)return;const s=n&&n.deleteTriggerCharacter?o.insertText(e):o;this.prosemirrorView.focus(),this.prosemirrorView.dispatch(s.scrollIntoView().setMeta(this.suggestionMenus.plugin,{triggerCharacter:e,deleteTriggerCharacter:(n==null?void 0:n.deleteTriggerCharacter)||!1,ignoreQueryLength:(n==null?void 0:n.ignoreQueryLength)||!1}))}},P0,nT;async function EDe(t,e){if(!HMe("text",t))return[];if(!P0){P0=U(()=>import("./native-B5Vb9Oiz.js"),[]),nT=await U(()=>import("./module-BvCTiNll.js"),[]);const r=(await P0).default;await nT.init({data:r})}const n=(await P0).default;return(e.trim()===""?Object.values(n.emojis):await nT.SearchIndex.search(e)).map(r=>({id:r.skins[0].native,onItemClick:()=>t.insertInlineContent(r.skins[0].native+" ")}))}function OR(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function Cm(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&XN(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function FJ(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function UJ(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function kDe(t){return TDe()?!1:!aj()&&t.width===0&&t.height===0||aj()&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function HJ(){return/apple/i.test(navigator.vendor)}function aj(){const t=/android/i;return t.test(FJ())||t.test(UJ())}function SDe(){return FJ().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function TDe(){return UJ().includes("jsdom/")}function LR(t,e){const n=["mouse","pen"];return n.push("",void 0),n.includes(t)}function NDe(t){return"nativeEvent"in t}function IDe(t){return t.matches("html,body")}function vu(t){return(t==null?void 0:t.ownerDocument)||document}function rT(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function Zh(t){return"composedPath"in t?t.composedPath()[0]:t.target}const RDe="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function ADe(t){return Is(t)&&t.matches(RDe)}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var PDe=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],jR=PDe.join(","),zJ=typeof Element>"u",ov=zJ?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,W_=!zJ&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},G_=function t(e,n){var r;n===void 0&&(n=!0);var o=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=o===""||o==="true",i=s||n&&e&&t(e.parentNode);return i},MDe=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},DDe=function(e,n,r){if(G_(e))return[];var o=Array.prototype.slice.apply(e.querySelectorAll(jR));return n&&ov.call(e,jR)&&o.unshift(e),o=o.filter(r),o},ODe=function t(e,n,r){for(var o=[],s=Array.from(e);s.length;){var i=s.shift();if(!G_(i,!1))if(i.tagName==="SLOT"){var a=i.assignedElements(),l=a.length?a:i.children,c=t(l,!0,r);r.flatten?o.push.apply(o,c):o.push({scopeParent:i,candidates:c})}else{var u=ov.call(i,jR);u&&r.filter(i)&&(n||!e.includes(i))&&o.push(i);var f=i.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(i),h=!G_(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(i));if(f&&h){var p=t(f===!0?i.children:f.children,!0,r);r.flatten?o.push.apply(o,p):o.push({scopeParent:i,candidates:p})}else s.unshift.apply(s,i.children)}}return o},WJ=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},GJ=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||MDe(e))&&!WJ(e)?0:e.tabIndex},LDe=function(e,n){var r=GJ(e);return r<0&&n&&!WJ(e)?0:r},jDe=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},qJ=function(e){return e.tagName==="INPUT"},VDe=function(e){return qJ(e)&&e.type==="hidden"},$De=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},BDe=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},FDe=function(e){if(!e.name)return!0;var n=e.form||W_(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(e.name));else try{o=r(e.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var s=BDe(o,e.form);return!s||s===e},UDe=function(e){return qJ(e)&&e.type==="radio"},HDe=function(e){return UDe(e)&&!FDe(e)},zDe=function(e){var n,r=e&&W_(e),o=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==e){var i,a,l;for(s=!!((i=o)!==null&&i!==void 0&&(a=i.ownerDocument)!==null&&a!==void 0&&a.contains(o)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&o;){var c,u,f;r=W_(o),o=(c=r)===null||c===void 0?void 0:c.host,s=!!((u=o)!==null&&u!==void 0&&(f=u.ownerDocument)!==null&&f!==void 0&&f.contains(o))}}return s},lj=function(e){var n=e.getBoundingClientRect(),r=n.width,o=n.height;return r===0&&o===0},WDe=function(e,n){var r=n.displayCheck,o=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=ov.call(e,"details>summary:first-of-type"),i=s?e.parentElement:e;if(ov.call(i,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof o=="function"){for(var a=e;e;){var l=e.parentElement,c=W_(e);if(l&&!l.shadowRoot&&o(l)===!0)return lj(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(zDe(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return lj(e);return!1},GDe=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var o=n.children.item(r);if(o.tagName==="LEGEND")return ov.call(n,"fieldset[disabled] *")?!0:!o.contains(e)}return!0}n=n.parentElement}return!1},qDe=function(e,n){return!(n.disabled||G_(n)||VDe(n)||WDe(n,e)||$De(n)||GDe(n))},cj=function(e,n){return!(HDe(n)||GJ(n)<0||!qDe(e,n))},KDe=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},YDe=function t(e){var n=[],r=[];return e.forEach(function(o,s){var i=!!o.scopeParent,a=i?o.scopeParent:o,l=LDe(a,i),c=i?t(o.candidates):a;l===0?i?n.push.apply(n,c):n.push(a):r.push({documentOrder:s,tabIndex:l,item:o,isScope:i,content:c})}),r.sort(jDe).reduce(function(o,s){return s.isScope?o.push.apply(o,s.content):o.push(s.content),o},[]).concat(n)},KJ=function(e,n){n=n||{};var r;return n.getShadowRoot?r=ODe([e],n.includeContainer,{filter:cj.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:KDe}):r=DDe(e,n.includeContainer,cj.bind(null,n)),YDe(r)};const YJ={...XR},QDe=YJ.useInsertionEffect,XDe=QDe||(t=>t());function Ul(t){const e=g.useRef(()=>{});return XDe(()=>{e.current=t}),g.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.current==null?void 0:e.current(...r)},[])}var mo=typeof document<"u"?g.useLayoutEffect:g.useEffect;function VR(){return VR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VR.apply(this,arguments)}let uj=!1,JDe=0;const dj=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+JDe++;function ZDe(){const[t,e]=g.useState(()=>uj?dj():void 0);return mo(()=>{t==null&&e(dj())},[]),g.useEffect(()=>{uj=!0},[]),t}const eOe=YJ.useId,S5=eOe||ZDe;function tOe(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(o=>o(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(o=>o!==n))||[])}}}const nOe=g.createContext(null),rOe=g.createContext(null),T5=()=>{var t;return((t=g.useContext(nOe))==null?void 0:t.id)||null},N5=()=>g.useContext(rOe);function cw(t){return"data-floating-ui-"+t}function af(t){const e=g.useRef(t);return mo(()=>{e.current=t}),e}const fj=cw("safe-polygon");function Ib(t,e,n){return n&&!LR(n)?0:typeof t=="number"?t:t==null?void 0:t[e]}function oOe(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:o,events:s,elements:i}=t,{enabled:a=!0,delay:l=0,handleClose:c=null,mouseOnly:u=!1,restMs:f=0,move:h=!0}=e,p=N5(),m=T5(),y=af(c),x=af(l),b=af(n),C=g.useRef(),E=g.useRef(-1),R=g.useRef(),D=g.useRef(-1),O=g.useRef(!0),T=g.useRef(!1),I=g.useRef(()=>{}),P=g.useRef(!1),L=g.useCallback(()=>{var Q;const H=(Q=o.current.openEvent)==null?void 0:Q.type;return(H==null?void 0:H.includes("mouse"))&&H!=="mousedown"},[o]);g.useEffect(()=>{if(!a)return;function Q(H){let{open:Y}=H;Y||(clearTimeout(E.current),clearTimeout(D.current),O.current=!0,P.current=!1)}return s.on("openchange",Q),()=>{s.off("openchange",Q)}},[a,s]),g.useEffect(()=>{if(!a||!y.current||!n)return;function Q(Y){L()&&r(!1,Y,"hover")}const H=vu(i.floating).documentElement;return H.addEventListener("mouseleave",Q),()=>{H.removeEventListener("mouseleave",Q)}},[i.floating,n,r,a,y,L]);const $=g.useCallback(function(Q,H,Y){H===void 0&&(H=!0),Y===void 0&&(Y="hover");const ue=Ib(x.current,"close",C.current);ue&&!R.current?(clearTimeout(E.current),E.current=window.setTimeout(()=>r(!1,Q,Y),ue)):H&&(clearTimeout(E.current),r(!1,Q,Y))},[x,r]),F=Ul(()=>{I.current(),R.current=void 0}),V=Ul(()=>{if(T.current){const Q=vu(i.floating).body;Q.style.pointerEvents="",Q.removeAttribute(fj),T.current=!1}}),be=Ul(()=>o.current.openEvent?["click","mousedown"].includes(o.current.openEvent.type):!1);g.useEffect(()=>{if(!a)return;function Q(W){if(clearTimeout(E.current),O.current=!1,u&&!LR(C.current)||f>0&&!Ib(x.current,"open"))return;const G=Ib(x.current,"open",C.current);G?E.current=window.setTimeout(()=>{b.current||r(!0,W,"hover")},G):n||r(!0,W,"hover")}function H(W){if(be())return;I.current();const G=vu(i.floating);if(clearTimeout(D.current),P.current=!1,y.current&&o.current.floatingContext){n||clearTimeout(E.current),R.current=y.current({...o.current.floatingContext,tree:p,x:W.clientX,y:W.clientY,onClose(){V(),F(),be()||$(W,!0,"safe-polygon")}});const ye=R.current;G.addEventListener("mousemove",ye),I.current=()=>{G.removeEventListener("mousemove",ye)};return}(C.current==="touch"?!Cm(i.floating,W.relatedTarget):!0)&&$(W)}function Y(W){be()||o.current.floatingContext&&(y.current==null||y.current({...o.current.floatingContext,tree:p,x:W.clientX,y:W.clientY,onClose(){V(),F(),be()||$(W)}})(W))}if(yn(i.domReference)){var ue;const W=i.domReference;return n&&W.addEventListener("mouseleave",Y),(ue=i.floating)==null||ue.addEventListener("mouseleave",Y),h&&W.addEventListener("mousemove",Q,{once:!0}),W.addEventListener("mouseenter",Q),W.addEventListener("mouseleave",H),()=>{var G;n&&W.removeEventListener("mouseleave",Y),(G=i.floating)==null||G.removeEventListener("mouseleave",Y),h&&W.removeEventListener("mousemove",Q),W.removeEventListener("mouseenter",Q),W.removeEventListener("mouseleave",H)}}},[i,a,t,u,f,h,$,F,V,r,n,b,p,x,y,o,be]),mo(()=>{var Q;if(a&&n&&(Q=y.current)!=null&&Q.__options.blockPointerEvents&&L()){T.current=!0;const Y=i.floating;if(yn(i.domReference)&&Y){var H;const ue=vu(i.floating).body;ue.setAttribute(fj,"");const W=i.domReference,G=p==null||(H=p.nodesRef.current.find(ie=>ie.id===m))==null||(H=H.context)==null?void 0:H.elements.floating;return G&&(G.style.pointerEvents=""),ue.style.pointerEvents="none",W.style.pointerEvents="auto",Y.style.pointerEvents="auto",()=>{ue.style.pointerEvents="",W.style.pointerEvents="",Y.style.pointerEvents=""}}}},[a,n,m,i,p,y,L]),mo(()=>{n||(C.current=void 0,P.current=!1,F(),V())},[n,F,V]),g.useEffect(()=>()=>{F(),clearTimeout(E.current),clearTimeout(D.current),V()},[a,i.domReference,F,V]);const ge=g.useMemo(()=>{function Q(H){C.current=H.pointerType}return{onPointerDown:Q,onPointerEnter:Q,onMouseMove(H){const{nativeEvent:Y}=H;function ue(){!O.current&&!b.current&&r(!0,Y,"hover")}u&&!LR(C.current)||n||f===0||P.current&&H.movementX**2+H.movementY**2<2||(clearTimeout(D.current),C.current==="touch"?ue():(P.current=!0,D.current=window.setTimeout(ue,f)))}}},[u,r,n,b,f]),le=g.useMemo(()=>({onMouseEnter(){clearTimeout(E.current)},onMouseLeave(Q){be()||$(Q.nativeEvent,!1)}}),[$,be]);return g.useMemo(()=>a?{reference:ge,floating:le}:{},[a,ge,le])}const $R=()=>{},QJ=g.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:$R,setState:$R,isInstantPhase:!1}),sOe=()=>g.useContext(QJ);function iOe(t){const{children:e,delay:n,timeoutMs:r=0}=t,[o,s]=g.useReducer((l,c)=>({...l,...c}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),i=g.useRef(null),a=g.useCallback(l=>{s({currentId:l})},[]);return mo(()=>{o.currentId?i.current===null?i.current=o.currentId:o.isInstantPhase||s({isInstantPhase:!0}):(o.isInstantPhase&&s({isInstantPhase:!1}),i.current=null)},[o.currentId,o.isInstantPhase]),g.createElement(QJ.Provider,{value:g.useMemo(()=>({...o,setState:s,setCurrentId:a}),[o,a])},e)}function aOe(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,floatingId:o}=t,{id:s,enabled:i=!0}=e,a=s??o,l=sOe(),{currentId:c,setCurrentId:u,initialDelay:f,setState:h,timeoutMs:p}=l;return mo(()=>{i&&c&&(h({delay:{open:1,close:Ib(f,"close")}}),c!==a&&r(!1))},[i,a,r,h,c,f]),mo(()=>{function m(){r(!1),h({delay:f,currentId:null})}if(i&&c&&!n&&c===a){if(p){const y=window.setTimeout(m,p);return()=>{clearTimeout(y)}}m()}},[i,n,h,c,a,r,f,p]),mo(()=>{i&&(u===$R||!n||u(a))},[i,n,u,a]),l}function oT(t,e){let n=t.filter(o=>{var s;return o.parentId===e&&((s=o.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=t.filter(o=>{var s;return(s=r)==null?void 0:s.some(i=>{var a;return o.parentId===i.id&&((a=o.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const XJ=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function JJ(t,e){const n=KJ(t,XJ());e==="prev"&&n.reverse();const r=n.indexOf(OR(vu(t)));return n.slice(r+1)[0]}function lOe(){return JJ(document.body,"next")}function cOe(){return JJ(document.body,"prev")}function sT(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!Cm(n,r)}function uOe(t){KJ(t,XJ()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function hj(t){t.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const ZJ={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let dOe;function pj(t){t.key==="Tab"&&(t.target,clearTimeout(dOe))}const mj=g.forwardRef(function(e,n){const[r,o]=g.useState();mo(()=>(HJ()&&o("button"),document.addEventListener("keydown",pj),()=>{document.removeEventListener("keydown",pj)}),[]);const s={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[cw("focus-guard")]:"",style:ZJ};return g.createElement("span",VR({},e,s))}),eZ=g.createContext(null),gj=cw("portal");function fOe(t){t===void 0&&(t={});const{id:e,root:n}=t,r=S5(),o=pOe(),[s,i]=g.useState(null),a=g.useRef(null);return mo(()=>()=>{s==null||s.remove(),queueMicrotask(()=>{a.current=null})},[s]),mo(()=>{if(!r||a.current)return;const l=e?document.getElementById(e):null;if(!l)return;const c=document.createElement("div");c.id=r,c.setAttribute(gj,""),l.appendChild(c),a.current=c,i(c)},[e,r]),mo(()=>{if(n===null||!r||a.current)return;let l=n||(o==null?void 0:o.portalNode);l&&!yn(l)&&(l=l.current),l=l||document.body;let c=null;e&&(c=document.createElement("div"),c.id=e,l.appendChild(c));const u=document.createElement("div");u.id=r,u.setAttribute(gj,""),l=c||l,l.appendChild(u),a.current=u,i(u)},[e,n,r,o]),s}function hOe(t){const{children:e,id:n,root:r,preserveTabOrder:o=!0}=t,s=fOe({id:n,root:r}),[i,a]=g.useState(null),l=g.useRef(null),c=g.useRef(null),u=g.useRef(null),f=g.useRef(null),h=i==null?void 0:i.modal,p=i==null?void 0:i.open,m=!!i&&!i.modal&&i.open&&o&&!!(r||s);return g.useEffect(()=>{if(!s||!o||h)return;function y(x){s&&sT(x)&&(x.type==="focusin"?hj:uOe)(s)}return s.addEventListener("focusin",y,!0),s.addEventListener("focusout",y,!0),()=>{s.removeEventListener("focusin",y,!0),s.removeEventListener("focusout",y,!0)}},[s,o,h]),g.useEffect(()=>{s&&(p||hj(s))},[p,s]),g.createElement(eZ.Provider,{value:g.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:l,afterOutsideRef:c,beforeInsideRef:u,afterInsideRef:f,portalNode:s,setFocusManagerState:a}),[o,s])},m&&s&&g.createElement(mj,{"data-type":"outside",ref:l,onFocus:y=>{if(sT(y,s)){var x;(x=u.current)==null||x.focus()}else{const b=cOe()||(i==null?void 0:i.refs.domReference.current);b==null||b.focus()}}}),m&&s&&g.createElement("span",{"aria-owns":s.id,style:ZJ}),s&&yo.createPortal(e,s),m&&s&&g.createElement(mj,{"data-type":"outside",ref:c,onFocus:y=>{if(sT(y,s)){var x;(x=f.current)==null||x.focus()}else{const b=lOe()||(i==null?void 0:i.refs.domReference.current);b==null||b.focus(),i!=null&&i.closeOnFocusOut&&(i==null||i.onOpenChange(!1,y.nativeEvent,"focus-out"))}}}))}const pOe=()=>g.useContext(eZ),mOe="data-floating-ui-focusable",gOe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},yOe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},yj=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function tZ(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:o,dataRef:s}=t,{enabled:i=!0,escapeKey:a=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:u=!1,referencePressEvent:f="pointerdown",ancestorScroll:h=!1,bubbles:p,capture:m}=e,y=N5(),x=Ul(typeof l=="function"?l:()=>!1),b=typeof l=="function"?x:l,C=g.useRef(!1),E=g.useRef(!1),{escapeKey:R,outsidePress:D}=yj(p),{escapeKey:O,outsidePress:T}=yj(m),I=g.useRef(!1),P=Ul(ge=>{var le;if(!n||!i||!a||ge.key!=="Escape"||I.current)return;const Q=(le=s.current.floatingContext)==null?void 0:le.nodeId,H=y?oT(y.nodesRef.current,Q):[];if(!R&&(ge.stopPropagation(),H.length>0)){let Y=!0;if(H.forEach(ue=>{var W;if((W=ue.context)!=null&&W.open&&!ue.context.dataRef.current.__escapeKeyBubbles){Y=!1;return}}),!Y)return}r(!1,NDe(ge)?ge.nativeEvent:ge,"escape-key")}),L=Ul(ge=>{var le;const Q=()=>{var H;P(ge),(H=Zh(ge))==null||H.removeEventListener("keydown",Q)};(le=Zh(ge))==null||le.addEventListener("keydown",Q)}),$=Ul(ge=>{var le;const Q=C.current;C.current=!1;const H=E.current;if(E.current=!1,c==="click"&&H||Q||typeof b=="function"&&!b(ge))return;const Y=Zh(ge),ue="["+cw("inert")+"]",W=vu(o.floating).querySelectorAll(ue);let G=yn(Y)?Y:null;for(;G&&!qu(G);){const we=xc(G);if(qu(we)||!yn(we))break;G=we}if(W.length&&yn(Y)&&!IDe(Y)&&!Cm(Y,o.floating)&&Array.from(W).every(we=>!Cm(G,we)))return;if(Is(Y)&&be){const we=Y.clientWidth>0&&Y.scrollWidth>Y.clientWidth,ve=Y.clientHeight>0&&Y.scrollHeight>Y.clientHeight;let Te=ve&&ge.offsetX>Y.clientWidth;if(ve&&mi(Y).direction==="rtl"&&(Te=ge.offsetX<=Y.offsetWidth-Y.clientWidth),Te||we&&ge.offsetY>Y.clientHeight)return}const ie=(le=s.current.floatingContext)==null?void 0:le.nodeId,ye=y&&oT(y.nodesRef.current,ie).some(we=>{var ve;return rT(ge,(ve=we.context)==null?void 0:ve.elements.floating)});if(rT(ge,o.floating)||rT(ge,o.domReference)||ye)return;const he=y?oT(y.nodesRef.current,ie):[];if(he.length>0){let we=!0;if(he.forEach(ve=>{var Te;if((Te=ve.context)!=null&&Te.open&&!ve.context.dataRef.current.__outsidePressBubbles){we=!1;return}}),!we)return}r(!1,ge,"outside-press")}),F=Ul(ge=>{var le;const Q=()=>{var H;$(ge),(H=Zh(ge))==null||H.removeEventListener(c,Q)};(le=Zh(ge))==null||le.addEventListener(c,Q)});g.useEffect(()=>{if(!n||!i)return;s.current.__escapeKeyBubbles=R,s.current.__outsidePressBubbles=D;let ge=-1;function le(W){r(!1,W,"ancestor-scroll")}function Q(){window.clearTimeout(ge),I.current=!0}function H(){ge=window.setTimeout(()=>{I.current=!1},eE()?5:0)}const Y=vu(o.floating);a&&(Y.addEventListener("keydown",O?L:P,O),Y.addEventListener("compositionstart",Q),Y.addEventListener("compositionend",H)),b&&Y.addEventListener(c,T?F:$,T);let ue=[];return h&&(yn(o.domReference)&&(ue=nc(o.domReference)),yn(o.floating)&&(ue=ue.concat(nc(o.floating))),!yn(o.reference)&&o.reference&&o.reference.contextElement&&(ue=ue.concat(nc(o.reference.contextElement)))),ue=ue.filter(W=>{var G;return W!==((G=Y.defaultView)==null?void 0:G.visualViewport)}),ue.forEach(W=>{W.addEventListener("scroll",le,{passive:!0})}),()=>{a&&(Y.removeEventListener("keydown",O?L:P,O),Y.removeEventListener("compositionstart",Q),Y.removeEventListener("compositionend",H)),b&&Y.removeEventListener(c,T?F:$,T),ue.forEach(W=>{W.removeEventListener("scroll",le)}),window.clearTimeout(ge)}},[s,o,a,b,c,n,r,h,i,R,D,P,O,L,$,T,F]),g.useEffect(()=>{C.current=!1},[b,c]);const V=g.useMemo(()=>({onKeyDown:P,[gOe[f]]:ge=>{u&&r(!1,ge.nativeEvent,"reference-press")}}),[P,r,u,f]),be=g.useMemo(()=>({onKeyDown:P,onMouseDown(){E.current=!0},onMouseUp(){E.current=!0},[yOe[c]]:()=>{C.current=!0}}),[P,c]);return g.useMemo(()=>i?{reference:V,floating:be}:{},[i,V,be])}function vOe(t){const{open:e=!1,onOpenChange:n,elements:r}=t,o=S5(),s=g.useRef({}),[i]=g.useState(()=>tOe()),a=T5()!=null,[l,c]=g.useState(r.reference),u=Ul((p,m,y)=>{s.current.openEvent=p?m:void 0,i.emit("openchange",{open:p,event:m,reason:y,nested:a}),n==null||n(p,m,y)}),f=g.useMemo(()=>({setPositionReference:c}),[]),h=g.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return g.useMemo(()=>({dataRef:s,open:e,onOpenChange:u,elements:h,events:i,floatingId:o,refs:f}),[e,u,h,i,o,f])}function tg(t){t===void 0&&(t={});const{nodeId:e}=t,n=vOe({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,o=r.elements,[s,i]=g.useState(null),[a,l]=g.useState(null),u=(o==null?void 0:o.domReference)||s,f=g.useRef(null),h=N5();mo(()=>{u&&(f.current=u)},[u]);const p=vH({...t,elements:{...o,...a&&{reference:a}}}),m=g.useCallback(E=>{const R=yn(E)?{getBoundingClientRect:()=>E.getBoundingClientRect(),contextElement:E}:E;l(R),p.refs.setReference(R)},[p.refs]),y=g.useCallback(E=>{(yn(E)||E===null)&&(f.current=E,i(E)),(yn(p.refs.reference.current)||p.refs.reference.current===null||E!==null&&!yn(E))&&p.refs.setReference(E)},[p.refs]),x=g.useMemo(()=>({...p.refs,setReference:y,setPositionReference:m,domReference:f}),[p.refs,y,m]),b=g.useMemo(()=>({...p.elements,domReference:u}),[p.elements,u]),C=g.useMemo(()=>({...p,...r,refs:x,elements:b,nodeId:e}),[p,x,b,e,r]);return mo(()=>{r.dataRef.current.floatingContext=C;const E=h==null?void 0:h.nodesRef.current.find(R=>R.id===e);E&&(E.context=C)}),g.useMemo(()=>({...p,context:C,refs:x,elements:b}),[p,x,b,C])}function wOe(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:o,dataRef:s,elements:i}=t,{enabled:a=!0,visibleOnly:l=!0}=e,c=g.useRef(!1),u=g.useRef(),f=g.useRef(!0);g.useEffect(()=>{if(!a)return;const p=Zo(i.domReference);function m(){!n&&Is(i.domReference)&&i.domReference===OR(vu(i.domReference))&&(c.current=!0)}function y(){f.current=!0}return p.addEventListener("blur",m),p.addEventListener("keydown",y,!0),()=>{p.removeEventListener("blur",m),p.removeEventListener("keydown",y,!0)}},[i.domReference,n,a]),g.useEffect(()=>{if(!a)return;function p(m){let{reason:y}=m;(y==="reference-press"||y==="escape-key")&&(c.current=!0)}return o.on("openchange",p),()=>{o.off("openchange",p)}},[o,a]),g.useEffect(()=>()=>{clearTimeout(u.current)},[]);const h=g.useMemo(()=>({onPointerDown(p){kDe(p.nativeEvent)||(f.current=!1)},onMouseLeave(){c.current=!1},onFocus(p){if(c.current)return;const m=Zh(p.nativeEvent);if(l&&yn(m))try{if(HJ()&&SDe())throw Error();if(!m.matches(":focus-visible"))return}catch{if(!f.current&&!ADe(m))return}r(!0,p.nativeEvent,"focus")},onBlur(p){c.current=!1;const m=p.relatedTarget,y=p.nativeEvent,x=yn(m)&&m.hasAttribute(cw("focus-guard"))&&m.getAttribute("data-type")==="outside";u.current=window.setTimeout(()=>{var b;const C=OR(i.domReference?i.domReference.ownerDocument:document);!m&&C===i.domReference||Cm((b=s.current.floatingContext)==null?void 0:b.refs.floating.current,C)||Cm(i.domReference,C)||x||r(!1,y,"focus")})}}),[s,i.domReference,r,l]);return g.useMemo(()=>a?{reference:h}:{},[a,h])}const vj="active",wj="selected";function iT(t,e,n){const r=new Map,o=n==="item";let s=t;if(o&&t){const{[vj]:i,[wj]:a,...l}=t;s=l}return{...n==="floating"&&{tabIndex:-1,[mOe]:""},...s,...e.map(i=>{const a=i?i[n]:null;return typeof a=="function"?t?a(t):null:a}).concat(t).reduce((i,a)=>(a&&Object.entries(a).forEach(l=>{let[c,u]=l;if(!(o&&[vj,wj].includes(c)))if(c.indexOf("on")===0){if(r.has(c)||r.set(c,[]),typeof u=="function"){var f;(f=r.get(c))==null||f.push(u),i[c]=function(){for(var h,p=arguments.length,m=new Array(p),y=0;y<p;y++)m[y]=arguments[y];return(h=r.get(c))==null?void 0:h.map(x=>x(...m)).find(x=>x!==void 0)}}}else i[c]=u}),i),{})}}function nZ(t){t===void 0&&(t=[]);const e=t.map(a=>a==null?void 0:a.reference),n=t.map(a=>a==null?void 0:a.floating),r=t.map(a=>a==null?void 0:a.item),o=g.useCallback(a=>iT(a,t,"reference"),e),s=g.useCallback(a=>iT(a,t,"floating"),n),i=g.useCallback(a=>iT(a,t,"item"),r);return g.useMemo(()=>({getReferenceProps:o,getFloatingProps:s,getItemProps:i}),[o,s,i])}const bOe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function xOe(t,e){var n;e===void 0&&(e={});const{open:r,floatingId:o}=t,{enabled:s=!0,role:i="dialog"}=e,a=(n=bOe.get(i))!=null?n:i,l=S5(),u=T5()!=null,f=g.useMemo(()=>a==="tooltip"||i==="label"?{["aria-"+(i==="label"?"labelledby":"describedby")]:r?o:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?o:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:l},...a==="menu"&&u&&{role:"menuitem"},...i==="select"&&{"aria-autocomplete":"none"},...i==="combobox"&&{"aria-autocomplete":"list"}},[a,o,u,r,l,i]),h=g.useMemo(()=>{const m={id:o,...a&&{role:a}};return a==="tooltip"||i==="label"?m:{...m,...a==="menu"&&{"aria-labelledby":l}}},[a,o,l,i]),p=g.useCallback(m=>{let{active:y,selected:x}=m;const b={role:"option",...y&&{id:o+"-option"}};switch(i){case"select":return{...b,"aria-selected":y&&x};case"combobox":return{...b,...y&&{"aria-selected":!0}}}return{}},[o,i]);return g.useMemo(()=>s?{reference:f,floating:h,item:p}:{},[s,f,h,p])}const bj=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function Fh(t,e){return typeof t=="function"?t(e):t}function _Oe(t,e){const[n,r]=g.useState(t);return t&&!n&&r(!0),g.useEffect(()=>{if(!t&&n){const o=setTimeout(()=>r(!1),e);return()=>clearTimeout(o)}},[t,n,e]),n}function COe(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:o=250}=e,i=(typeof o=="number"?o:o.close)||0,[a,l]=g.useState("unmounted"),c=_Oe(n,i);return!c&&a==="close"&&l("unmounted"),mo(()=>{if(r){if(n){l("initial");const u=requestAnimationFrame(()=>{l("open")});return()=>{cancelAnimationFrame(u)}}l("close")}},[n,r]),{isMounted:c,status:a}}function I5(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:o,common:s,duration:i=250}=e,a=t.placement,l=a.split("-")[0],c=g.useMemo(()=>({side:l,placement:a}),[l,a]),u=typeof i=="number",f=(u?i:i.open)||0,h=(u?i:i.close)||0,[p,m]=g.useState(()=>({...Fh(s,c),...Fh(n,c)})),{isMounted:y,status:x}=COe(t,{duration:i}),b=af(n),C=af(r),E=af(o),R=af(s);return mo(()=>{const D=Fh(b.current,c),O=Fh(E.current,c),T=Fh(R.current,c),I=Fh(C.current,c)||Object.keys(D).reduce((P,L)=>(P[L]="",P),{});if(x==="initial"&&m(P=>({transitionProperty:P.transitionProperty,...T,...D})),x==="open"&&m({transitionProperty:Object.keys(I).map(bj).join(","),transitionDuration:f+"ms",...T,...I}),x==="close"){const P=O||D;m({transitionProperty:Object.keys(P).map(bj).join(","),transitionDuration:h+"ms",...T,...P})}},[h,E,b,C,R,f,x,c]),{isMounted:y,styles:p}}var rZ={exports:{}},aT={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xj;function EOe(){if(xj)return aT;xj=1;var t=dt;function e(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,o=t.useEffect,s=t.useLayoutEffect,i=t.useDebugValue;function a(f,h){var p=h(),m=r({inst:{value:p,getSnapshot:h}}),y=m[0].inst,x=m[1];return s(function(){y.value=p,y.getSnapshot=h,l(y)&&x({inst:y})},[f,p,h]),o(function(){return l(y)&&x({inst:y}),f(function(){l(y)&&x({inst:y})})},[f]),i(p),p}function l(f){var h=f.getSnapshot;f=f.value;try{var p=h();return!n(f,p)}catch{return!0}}function c(f,h){return h()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return aT.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,aT}rZ.exports=EOe();var oZ=rZ.exports;const kOe=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},SOe=({contentComponent:t})=>{const e=oZ.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return dt.createElement(dt.Fragment,null,Object.values(e))};function TOe(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:fv.createPortal(r.reactElement,r.element,n)},t.forEach(o=>o())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(o=>o())}}}class NOe extends dt.Component{constructor(e){var n;super(e),this.editorContentRef=dt.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=TOe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return dt.createElement(dt.Fragment,null,dt.createElement("div",{ref:kOe(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&dt.createElement(SOe,{contentComponent:e.contentComponent}))}}const IOe=g.forwardRef((t,e)=>{const n=dt.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return dt.createElement(NOe,{key:n,innerRef:e,...t})});dt.memo(IOe);var lT={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _j;function ROe(){if(_j)return lT;_j=1;var t=dt,e=oZ;function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,o=e.useSyncExternalStore,s=t.useRef,i=t.useEffect,a=t.useMemo,l=t.useDebugValue;return lT.useSyncExternalStoreWithSelector=function(c,u,f,h,p){var m=s(null);if(m.current===null){var y={hasValue:!1,value:null};m.current=y}else y=m.current;m=a(function(){function b(O){if(!C){if(C=!0,E=O,O=h(O),p!==void 0&&y.hasValue){var T=y.value;if(p(T,O))return R=T}return R=O}if(T=R,r(E,O))return T;var I=h(O);return p!==void 0&&p(T,I)?T:(E=O,R=I)}var C=!1,E,R,D=f===void 0?null:f;return[function(){return b(u())},D===null?void 0:function(){return b(D())}]},[u,f,h,p]);var x=o(c,m[0],m[1]);return i(function(){y.hasValue=!0,y.value=x},[x]),l(x),x},lT}ROe();const AOe=g.createContext({editor:null});AOe.Consumer;const sZ=g.createContext({onDragStart:void 0}),iZ=()=>g.useContext(sZ),POe=dt.forwardRef((t,e)=>{const{onDragStart:n}=iZ(),r=t.as||"div";return dt.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});function MOe(t){return!!(typeof t=="function"&&t.prototype&&t.prototype.isReactComponent)}function DOe(t){var e;return typeof t=="object"&&((e=t.$$typeof)===null||e===void 0?void 0:e.toString())==="Symbol(react.forward_ref)"}class OOe{constructor(e,{editor:n,props:r={},as:o="div",className:s=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=e,this.editor=n,this.props=r,this.element=document.createElement(o),this.element.classList.add("react-renderer"),s&&this.element.classList.add(...s.split(" ")),this.editor.isInitialized?yo.flushSync(()=>{this.render()}):this.render()}render(){var e;const n=this.component,r=this.props,o=this.editor;(MOe(n)||DOe(n))&&(r.ref=s=>{this.ref=s}),this.reactElement=dt.createElement(n,{...r}),(e=o==null?void 0:o.contentComponent)===null||e===void 0||e.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e;const n=this.editor;(e=n==null?void 0:n.contentComponent)===null||e===void 0||e.removeRenderer(this.id)}updateAttributes(e){Object.keys(e).forEach(n=>{this.element.setAttribute(n,e[n])})}}class LOe extends lTe{mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(c={})=>this.updateAttributes(c),deleteNode:()=>this.deleteNode()};if(!this.component.displayName){const c=u=>u.charAt(0).toUpperCase()+u.substring(1);this.component.displayName=c(this.extension.name)}const o={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:c=>{c&&this.contentDOMElement&&c.firstChild!==this.contentDOMElement&&c.appendChild(this.contentDOMElement)}},s=this.component,i=dt.memo(c=>dt.createElement(sZ.Provider,{value:o},dt.createElement(s,c)));i.displayName="ReactNodeView",this.node.isLeaf?this.contentDOMElement=null:this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.style.whiteSpace="inherit");let a=this.node.isInline?"span":"div";this.options.as&&(a=this.options.as);const{className:l=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new OOe(i,{editor:this.editor,props:e,as:a,className:`node-${this.node.type.name} ${l}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!(!((e=this.renderer.element.firstElementChild)===null||e===void 0)&&e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){const{from:e,to:n}=this.editor.state.selection,r=this.getPos();if(typeof r=="number")if(e<=r&&n>=r+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(e,n,r){const o=s=>{this.renderer.updateProps(s),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const s=this.node,i=this.decorations,a=this.innerDecorations;return this.node=e,this.decorations=n,this.innerDecorations=r,this.options.update({oldNode:s,oldDecorations:i,newNode:e,newDecorations:n,oldInnerDecorations:a,innerDecorations:r,updateProps:()=>o({node:e,decorations:n,innerDecorations:r})})}return e===this.node&&this.decorations===n&&this.innerDecorations===r||(this.node=e,this.decorations=n,this.innerDecorations=r,o({node:e,decorations:n,innerDecorations:r})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let e={};if(typeof this.options.attrs=="function"){const n=this.editor.extensionManager.attributes,r=Wx(this.node,n);e=this.options.attrs({node:this.node,HTMLAttributes:r})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}}function jOe(t,e){return n=>n.editor.contentComponent?new LOe(t,n,e):{}}const aZ=g.createContext(void 0);function Pc(t){return g.useContext(aZ)}function Mt(t){const e=Pc();if(!(e!=null&&e.editor))throw new Error("useBlockNoteEditor was called outside of a BlockNoteContext provider or BlockNoteView component");return e.editor}function ng(t,e,n,r){const{refs:o,update:s,context:i,floatingStyles:a}=tg({open:t,...r}),{isMounted:l,styles:c}=I5(i),u=tZ(i),{getReferenceProps:f,getFloatingProps:h}=nZ([u]);return g.useEffect(()=>{s()},[e,s]),g.useEffect(()=>{e!==null&&o.setReference({getBoundingClientRect:()=>e})},[e,o]),g.useMemo(()=>({isMounted:l,ref:o.setFloating,style:{display:"flex",...c,...a,zIndex:n},getFloatingProps:h,getReferenceProps:f}),[a,l,o.setFloating,c,n,h,f])}function sh(t){const[e,n]=g.useState();return g.useEffect(()=>t(r=>{n({...r})}),[t]),e}const lZ=g.createContext(void 0);function St(){return g.useContext(lZ)}function qt(){return Pc().editor.dictionary}const VOe=t=>{const e=St(),n=qt(),{block:r}=t,o=Mt(),[s,i]=g.useState(""),a=g.useCallback(u=>{i(u.currentTarget.value)},[]),l=g.useCallback(u=>{u.key==="Enter"&&(u.preventDefault(),o.updateBlock(r,{props:{name:q6(s),url:s}}))},[o,r,s]),c=g.useCallback(()=>{o.updateBlock(r,{props:{name:q6(s),url:s}})},[o,r,s]);return d.jsxs(e.FilePanel.TabPanel,{className:"bn-tab-panel",children:[d.jsx(e.FilePanel.TextInput,{className:"bn-text-input",placeholder:n.file_panel.embed.url_placeholder,value:s,onChange:a,onKeyDown:l,"data-test":"embed-input"}),d.jsx(e.FilePanel.Button,{className:"bn-button",onClick:c,"data-test":"embed-input-button",children:n.file_panel.embed.embed_button[r.type]||n.file_panel.embed.embed_button.file})]})},$Oe=t=>{var e;const n=St(),r=qt(),{block:o,setLoading:s}=t,i=Mt(),[a,l]=g.useState(!1);g.useEffect(()=>{a&&setTimeout(()=>{l(!1)},3e3)},[a]);const c=g.useCallback(h=>{if(h===null)return;async function p(m){if(s(!0),i.uploadFile!==void 0)try{let y=await i.uploadFile(m);typeof y=="string"&&(y={props:{name:m.name,url:y}}),i.updateBlock(o,y)}catch{l(!0)}finally{s(!1)}}p(h)},[o,i,s]),u=i.schema.blockSchema[o.type],f=u.isFileBlock&&(e=u.fileBlockAccept)!=null&&e.length?u.fileBlockAccept.join(","):"*/*";return d.jsxs(n.FilePanel.TabPanel,{className:"bn-tab-panel",children:[d.jsx(n.FilePanel.FileInput,{className:"bn-file-input","data-test":"upload-input",accept:f,placeholder:r.file_panel.upload.file_placeholder[o.type]||r.file_panel.upload.file_placeholder.file,value:null,onChange:c}),a&&d.jsx("div",{className:"bn-error-text",children:r.file_panel.upload.upload_error})]})},cZ=t=>{const e=St(),n=qt(),r=Mt(),[o,s]=g.useState(!1),i=t.tabs??[...r.uploadFile!==void 0?[{name:n.file_panel.upload.title,tabPanel:d.jsx($Oe,{block:t.block,setLoading:s})}]:[],{name:n.file_panel.embed.title,tabPanel:d.jsx(VOe,{block:t.block})}],[a,l]=g.useState(t.defaultOpenTab||i[0].name);return d.jsx(e.FilePanel.Root,{className:"bn-panel",defaultOpenTab:a,openTab:a,setOpenTab:l,tabs:i,loading:o})},BOe=t=>{const e=Mt();if(!e.filePanel)throw new Error("FileToolbarController can only be used when BlockNote editor schema contains file block");const n=sh(e.filePanel.onUpdate.bind(e.filePanel)),{isMounted:r,ref:o,style:s,getFloatingProps:i}=ng((n==null?void 0:n.show)||!1,(n==null?void 0:n.referencePos)||null,5e3,{placement:"bottom",middleware:[Tc(10),Ja()],onOpenChange:f=>{f||(e.filePanel.closeMenu(),e.focus())},...t.floatingOptions});if(!r||!n)return null;const{show:a,referencePos:l,...c}=n,u=t.filePanel||cZ;return d.jsx("div",{ref:o,style:s,...i(),children:d.jsx(u,{...c})})};function uZ(t,e){const n=Pc();e||(e=n==null?void 0:n.editor),g.useEffect(()=>{if(!e)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return e.onChange(t)},[t,e])}function dZ(t,e){const n=Pc();e||(e=n==null?void 0:n.editor),g.useEffect(()=>{if(!e)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return e.onSelectionChange(t)},[t,e])}function md(t,e){uZ(t,e),dZ(t,e)}function FOe(t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var fZ={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Cj=dt.createContext&&dt.createContext(fZ),UOe=["attr","size","title"];function HOe(t,e){if(t==null)return{};var n=zOe(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function zOe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function q_(){return q_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},q_.apply(this,arguments)}function Ej(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function K_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ej(Object(n),!0).forEach(function(r){WOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ej(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WOe(t,e,n){return e=GOe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GOe(t){var e=qOe(t,"string");return typeof e=="symbol"?e:e+""}function qOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hZ(t){return t&&t.map((e,n)=>dt.createElement(e.tag,K_({key:n},e.attr),hZ(e.child)))}function Tt(t){return e=>dt.createElement(KOe,q_({attr:K_({},t.attr)},e),hZ(t.child))}function KOe(t){var e=n=>{var{attr:r,size:o,title:s}=t,i=HOe(t,UOe),a=o||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),dt.createElement("svg",q_({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,i,{className:l,style:K_(K_({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&dt.createElement("title",null,s),t.children)};return Cj!==void 0?dt.createElement(Cj.Consumer,null,n=>e(n)):e(fZ)}function YOe(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M23 12L15.9289 19.0711L14.5147 17.6569L20.1716 12L14.5147 6.34317L15.9289 4.92896L23 12ZM3.82843 12L9.48528 17.6569L8.07107 19.0711L1 12L8.07107 4.92896L9.48528 6.34317L3.82843 12Z"},child:[]}]})(t)}function R5(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"},child:[]}]})(t)}function QOe(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM5 19H19V21H5V19ZM3 14H21V16H3V14ZM5 9H19V11H5V9Z"},child:[]}]})(t)}function XOe(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM3 14H21V16H3V14ZM3 9H21V11H3V9Z"},child:[]}]})(t)}function JOe(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H17V21H3V19ZM3 14H21V16H3V14ZM3 9H17V11H3V9Z"},child:[]}]})(t)}function ZOe(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM7 19H21V21H7V19ZM3 14H21V16H3V14ZM7 9H21V11H7V9Z"},child:[]}]})(t)}function e8e(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 11H12.5C13.8807 11 15 9.88071 15 8.5C15 7.11929 13.8807 6 12.5 6H8V11ZM18 15.5C18 17.9853 15.9853 20 13.5 20H6V4H12.5C14.9853 4 17 6.01472 17 8.5C17 9.70431 16.5269 10.7981 15.7564 11.6058C17.0979 12.3847 18 13.837 18 15.5ZM8 13V18H13.5C14.8807 18 16 16.8807 16 15.5C16 14.1193 14.8807 13 13.5 13H8Z"},child:[]}]})(t)}function t8e(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3.41436 5.99995L5.70726 3.70706L4.29304 2.29285L0.585938 5.99995L4.29304 9.70706L5.70726 8.29285L3.41436 5.99995ZM9.58594 5.99995L7.29304 3.70706L8.70726 2.29285L12.4144 5.99995L8.70726 9.70706L7.29304 8.29285L9.58594 5.99995ZM14.0002 2.99995H21.0002C21.5524 2.99995 22.0002 3.44767 22.0002 3.99995V20C22.0002 20.5522 21.5524 21 21.0002 21H3.00015C2.44787 21 2.00015 20.5522 2.00015 20V12H4.00015V19H20.0002V4.99995H14.0002V2.99995Z"},child:[]}]})(t)}function kj(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5.55397 22H3.3999L10.9999 3H12.9999L20.5999 22H18.4458L16.0458 16H7.95397L5.55397 22ZM8.75397 14H15.2458L11.9999 5.88517L8.75397 14Z"},child:[]}]})(t)}function pZ(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 20H11V13H4V20H2V4H4V11H11V4H13V20ZM21.0005 8V20H19.0005L19 10.204L17 10.74V8.67L19.5005 8H21.0005Z"},child:[]}]})(t)}function mZ(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 4V11H11V4H13V20H11V13H4V20H2V4H4ZM18.5 8C20.5711 8 22.25 9.67893 22.25 11.75C22.25 12.6074 21.9623 13.3976 21.4781 14.0292L21.3302 14.2102L18.0343 18H22V20H15L14.9993 18.444L19.8207 12.8981C20.0881 12.5908 20.25 12.1893 20.25 11.75C20.25 10.7835 19.4665 10 18.5 10C17.5818 10 16.8288 10.7071 16.7558 11.6065L16.75 11.75H14.75C14.75 9.67893 16.4289 8 18.5 8Z"},child:[]}]})(t)}function gZ(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 8L21.9984 10L19.4934 12.883C21.0823 13.3184 22.25 14.7728 22.25 16.5C22.25 18.5711 20.5711 20.25 18.5 20.25C16.674 20.25 15.1528 18.9449 14.8184 17.2166L16.7821 16.8352C16.9384 17.6413 17.6481 18.25 18.5 18.25C19.4665 18.25 20.25 17.4665 20.25 16.5C20.25 15.5335 19.4665 14.75 18.5 14.75C18.214 14.75 17.944 14.8186 17.7056 14.9403L16.3992 13.3932L19.3484 10H15V8H22ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4Z"},child:[]}]})(t)}function n8e(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM3 12.5L7 9V16L3 12.5Z"},child:[]}]})(t)}function r8e(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM7 12.5L3 16V9L7 12.5Z"},child:[]}]})(t)}function Sj(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 5H11V19H8V21H16V19H13V5H16V3H8V5ZM2 7C1.44772 7 1 7.44772 1 8V16C1 16.5523 1.44772 17 2 17H8V15H3V9H8V7H2ZM16 9H21V15H16V17H22C22.5523 17 23 16.5523 23 16V8C23 7.44772 22.5523 7 22 7H16V9Z"},child:[]}]})(t)}function o8e(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M15 20H7V18H9.92661L12.0425 6H9V4H17V6H14.0734L11.9575 18H15V20Z"},child:[]}]})(t)}function s8e(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 17H22V19H19V22H17V17ZM7 7H2V5H5V2H7V7ZM18.364 15.5355L16.9497 14.1213L18.364 12.7071C20.3166 10.7545 20.3166 7.58866 18.364 5.63604C16.4113 3.68342 13.2455 3.68342 11.2929 5.63604L9.87868 7.05025L8.46447 5.63604L9.87868 4.22183C12.6123 1.48816 17.0445 1.48816 19.7782 4.22183C22.5118 6.9555 22.5118 11.3877 19.7782 14.1213L18.364 15.5355ZM15.5355 18.364L14.1213 19.7782C11.3877 22.5118 6.9555 22.5118 4.22183 19.7782C1.48816 17.0445 1.48816 12.6123 4.22183 9.87868L5.63604 8.46447L7.05025 9.87868L5.63604 11.2929C3.68342 13.2455 3.68342 16.4113 5.63604 18.364C7.58866 20.3166 10.7545 20.3166 12.7071 18.364L14.1213 16.9497L15.5355 18.364ZM14.8284 7.75736L16.2426 9.17157L9.17157 16.2426L7.75736 14.8284L14.8284 7.75736Z"},child:[]}]})(t)}function yZ(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18.3638 15.5355L16.9496 14.1213L18.3638 12.7071C20.3164 10.7545 20.3164 7.58866 18.3638 5.63604C16.4112 3.68341 13.2453 3.68341 11.2927 5.63604L9.87849 7.05025L8.46428 5.63604L9.87849 4.22182C12.6122 1.48815 17.0443 1.48815 19.778 4.22182C22.5117 6.95549 22.5117 11.3876 19.778 14.1213L18.3638 15.5355ZM15.5353 18.364L14.1211 19.7782C11.3875 22.5118 6.95531 22.5118 4.22164 19.7782C1.48797 17.0445 1.48797 12.6123 4.22164 9.87868L5.63585 8.46446L7.05007 9.87868L5.63585 11.2929C3.68323 13.2455 3.68323 16.4113 5.63585 18.364C7.58847 20.3166 10.7543 20.3166 12.7069 18.364L14.1211 16.9497L15.5353 18.364ZM14.8282 7.75736L16.2425 9.17157L9.17139 16.2426L7.75717 14.8284L14.8282 7.75736Z"},child:[]}]})(t)}function vZ(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8.00008 6V9H5.00008V6H8.00008ZM3.00008 4V11H10.0001V4H3.00008ZM13.0001 4H21.0001V6H13.0001V4ZM13.0001 11H21.0001V13H13.0001V11ZM13.0001 18H21.0001V20H13.0001V18ZM10.7072 16.2071L9.29297 14.7929L6.00008 18.0858L4.20718 16.2929L2.79297 17.7071L6.00008 20.9142L10.7072 16.2071Z"},child:[]}]})(t)}function wZ(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM5 3V6H6V7H3V6H4V4H3V3H5ZM3 14V11.5H5V11H3V10H6V12.5H4V13H6V14H3ZM5 19.5H3V18.5H5V18H3V17H6V21H3V20H5V19.5ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(t)}function bZ(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM4.5 6.5C3.67157 6.5 3 5.82843 3 5C3 4.17157 3.67157 3.5 4.5 3.5C5.32843 3.5 6 4.17157 6 5C6 5.82843 5.32843 6.5 4.5 6.5ZM4.5 13.5C3.67157 13.5 3 12.8284 3 12C3 11.1716 3.67157 10.5 4.5 10.5C5.32843 10.5 6 11.1716 6 12C6 12.8284 5.32843 13.5 4.5 13.5ZM4.5 20.4C3.67157 20.4 3 19.7284 3 18.9C3 18.0716 3.67157 17.4 4.5 17.4C5.32843 17.4 6 18.0716 6 18.9C6 19.7284 5.32843 20.4 4.5 20.4ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(t)}function i8e(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17.1538 14C17.3846 14.5161 17.5 15.0893 17.5 15.7196C17.5 17.0625 16.9762 18.1116 15.9286 18.867C14.8809 19.6223 13.4335 20 11.5862 20C9.94674 20 8.32335 19.6185 6.71592 18.8555V16.6009C8.23538 17.4783 9.7908 17.917 11.3822 17.917C13.9333 17.917 15.2128 17.1846 15.2208 15.7196C15.2208 15.0939 15.0049 14.5598 14.5731 14.1173C14.5339 14.0772 14.4939 14.0381 14.4531 14H3V12H21V14H17.1538ZM13.076 11H7.62908C7.4566 10.8433 7.29616 10.6692 7.14776 10.4778C6.71592 9.92084 6.5 9.24559 6.5 8.45207C6.5 7.21602 6.96583 6.165 7.89749 5.299C8.82916 4.43299 10.2706 4 12.2219 4C13.6934 4 15.1009 4.32808 16.4444 4.98426V7.13591C15.2448 6.44921 13.9293 6.10587 12.4978 6.10587C10.0187 6.10587 8.77917 6.88793 8.77917 8.45207C8.77917 8.87172 8.99709 9.23796 9.43293 9.55079C9.86878 9.86362 10.4066 10.1135 11.0463 10.3004C11.6665 10.4816 12.3431 10.7148 13.076 11H13.076Z"},child:[]}]})(t)}function a8e(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 10V14H19V10H13ZM11 10H5V14H11V10ZM13 19H19V16H13V19ZM11 19V16H5V19H11ZM13 5V8H19V5H13ZM11 5H5V8H11V5ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3Z"},child:[]}]})(t)}function A5(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 6V21H11V6H5V4H19V6H13Z"},child:[]}]})(t)}function l8e(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 3V12C8 14.2091 9.79086 16 12 16C14.2091 16 16 14.2091 16 12V3H18V12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12V3H8ZM4 20H20V22H4V20Z"},child:[]}]})(t)}function c8e(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"},child:[]}]})(t)}function xZ(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"},child:[]}]})(t)}function u8e(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 15V18H24V20H21V23H19V20H16V18H19V15H21ZM21.0082 3C21.556 3 22 3.44495 22 3.9934L22.0007 13.3417C21.3749 13.1204 20.7015 13 20 13V5H4L4.001 19L13.2929 9.70715C13.6528 9.34604 14.22 9.31823 14.6123 9.62322L14.7065 9.70772L18.2521 13.2586C15.791 14.0069 14 16.2943 14 19C14 19.7015 14.1204 20.3749 14.3417 21.0007L2.9918 21C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082ZM8 7C9.10457 7 10 7.89543 10 9C10 10.1046 9.10457 11 8 11C6.89543 11 6 10.1046 6 9C6 7.89543 6.89543 7 8 7Z"},child:[]}]})(t)}function d8e(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V5.757L19 7.757V5H5V13.1L9 9.1005L13.328 13.429L12.0012 14.7562L11.995 18.995L16.2414 19.0012L17.571 17.671L18.8995 19H19V16.242L21 14.242V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM21.7782 7.80761L23.1924 9.22183L15.4142 17L13.9979 16.9979L14 15.5858L21.7782 7.80761ZM15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7Z"},child:[]}]})(t)}function f8e(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 3.9934C3 3.44476 3.44495 3 3.9934 3H20.0066C20.5552 3 21 3.44495 21 3.9934V20.0066C21 20.5552 20.5551 21 20.0066 21H3.9934C3.44476 21 3 20.5551 3 20.0066V3.9934ZM10.6219 8.41459C10.5562 8.37078 10.479 8.34741 10.4 8.34741C10.1791 8.34741 10 8.52649 10 8.74741V15.2526C10 15.3316 10.0234 15.4088 10.0672 15.4745C10.1897 15.6583 10.4381 15.708 10.6219 15.5854L15.5008 12.3328C15.5447 12.3035 15.5824 12.2658 15.6117 12.2219C15.7343 12.0381 15.6846 11.7897 15.5008 11.6672L10.6219 8.41459Z"},child:[]}]})(t)}function _Z(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"},child:[]}]})(t)}function h8e(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M11 11V5H13V11H19V13H13V19H11V13H5V11H11Z"},child:[]}]})(t)}function p8e(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 4V6H15V4H9Z"},child:[]}]})(t)}function m8e(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 19H20V12H22V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V12H4V19ZM14 9H19L12 16L5 9H10V3H14V9Z"},child:[]}]})(t)}function g8e(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M10 6V8H5V19H16V14H18V20C18 20.5523 17.5523 21 17 21H4C3.44772 21 3 20.5523 3 20V7C3 6.44772 3.44772 6 4 6H10ZM21 3V12L17.206 8.207L11.2071 14.2071L9.79289 12.7929L15.792 6.793L12 3H21Z"},child:[]}]})(t)}function y8e(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM8 13C8 15.2091 9.79086 17 12 17C14.2091 17 16 15.2091 16 13H8ZM8 11C8.82843 11 9.5 10.3284 9.5 9.5C9.5 8.67157 8.82843 8 8 8C7.17157 8 6.5 8.67157 6.5 9.5C6.5 10.3284 7.17157 11 8 11ZM16 11C16.8284 11 17.5 10.3284 17.5 9.5C17.5 8.67157 16.8284 8 16 8C15.1716 8 14.5 8.67157 14.5 9.5C14.5 10.3284 15.1716 11 16 11Z"},child:[]}]})(t)}function Vs(t){const e=Pc();if(t||(t=e==null?void 0:e.editor),!t)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");const n=t,[r,o]=g.useState(()=>{var s;return((s=n.getSelection())==null?void 0:s.blocks)||[n.getTextCursorPosition().block]});return md(()=>{var s;return o(((s=n.getSelection())==null?void 0:s.blocks)||[n.getTextCursorPosition().block])},n),r}const v8e={bold:e8e,italic:o8e,underline:l8e,strike:i8e,code:YOe};function w8e(t,e){return t in e.schema.styleSchema&&e.schema.styleSchema[t].type===t&&e.schema.styleSchema[t].propSchema==="boolean"}const M0=t=>{const e=qt(),n=St(),r=Mt(),o=w8e(t.basicTextStyle,r),s=Vs(r),[i,a]=g.useState(t.basicTextStyle in r.getActiveStyles());md(()=>{o&&a(t.basicTextStyle in r.getActiveStyles())},r);const l=u=>{if(r.focus(),!!o){if(r.schema.styleSchema[u].propSchema!=="boolean")throw new Error("can only toggle boolean styles");r.toggleStyles({[u]:!0})}};if(!g.useMemo(()=>o?!!s.find(u=>u.content!==void 0):!1,[o,s])||!r.isEditable)return null;const c=v8e[t.basicTextStyle];return d.jsx(n.FormattingToolbar.Button,{className:"bn-button","data-test":t.basicTextStyle,onClick:()=>l(t.basicTextStyle),isSelected:i,label:e.formatting_toolbar[t.basicTextStyle].tooltip,mainTooltip:e.formatting_toolbar[t.basicTextStyle].tooltip,secondaryTooltip:Qs(e.formatting_toolbar[t.basicTextStyle].secondary_tooltip,e.generic.ctrl_shortcut),icon:d.jsx(c,{})})},BR=t=>{const e=t.textColor||"default",n=t.backgroundColor||"default",r=t.size||16,o=g.useMemo(()=>({pointerEvents:"none",fontSize:(r*.75).toString()+"px",height:r.toString()+"px",lineHeight:r.toString()+"px",textAlign:"center",width:r.toString()+"px"}),[r]);return d.jsx("div",{className:"bn-color-icon","data-background-color":n,"data-text-color":e,style:o,children:"A"})},Tj=["default","gray","brown","red","orange","yellow","green","blue","purple","pink"],CZ=t=>{const e=St(),n=qt();return d.jsxs(d.Fragment,{children:[d.jsx(()=>t.text?d.jsxs(d.Fragment,{children:[d.jsx(e.Generic.Menu.Label,{children:n.color_picker.text_title}),Tj.map(r=>d.jsx(e.Generic.Menu.Item,{onClick:()=>{t.onClick&&t.onClick(),t.text.setColor(r)},"data-test":"text-color-"+r,icon:d.jsx(BR,{textColor:r,size:t.iconSize}),checked:t.text.color===r,children:n.color_picker.colors[r]},"text-color-"+r))]}):null,{}),d.jsx(()=>t.background?d.jsxs(d.Fragment,{children:[d.jsx(e.Generic.Menu.Label,{children:n.color_picker.background_title}),Tj.map(r=>d.jsx(e.Generic.Menu.Item,{onClick:()=>{t.onClick&&t.onClick(),t.background.setColor(r)},"data-test":"background-color-"+r,icon:d.jsx(BR,{backgroundColor:r,size:t.iconSize}),checked:t.background.color===r,children:n.color_picker.colors[r]},"background-color-"+r))]}):null,{})]})};function Nj(t,e){return`${t}Color`in e.schema.styleSchema&&e.schema.styleSchema[`${t}Color`].type===`${t}Color`&&e.schema.styleSchema[`${t}Color`].propSchema==="string"}const b8e=()=>{const t=St(),e=qt(),n=Mt(),r=Nj("text",n),o=Nj("background",n),s=Vs(n),[i,a]=g.useState(r&&n.getActiveStyles().textColor||"default"),[l,c]=g.useState(o&&n.getActiveStyles().backgroundColor||"default");md(()=>{r&&a(n.getActiveStyles().textColor||"default"),o&&c(n.getActiveStyles().backgroundColor||"default")},n);const u=g.useCallback(h=>{if(!r)throw Error("Tried to set text color, but style does not exist in editor schema.");h==="default"?n.removeStyles({textColor:h}):n.addStyles({textColor:h}),setTimeout(()=>{n.focus()})},[n,r]),f=g.useCallback(h=>{if(!o)throw Error("Tried to set background color, but style does not exist in editor schema.");h==="default"?n.removeStyles({backgroundColor:h}):n.addStyles({backgroundColor:h}),setTimeout(()=>{n.focus()})},[o,n]);return!g.useMemo(()=>{if(!r&&!o)return!1;for(const h of s)if(h.content!==void 0)return!0;return!1},[o,s,r])||!n.isEditable?null:d.jsxs(t.Generic.Menu.Root,{children:[d.jsx(t.Generic.Menu.Trigger,{children:d.jsx(t.FormattingToolbar.Button,{className:"bn-button","data-test":"colors",label:e.formatting_toolbar.colors.tooltip,mainTooltip:e.formatting_toolbar.colors.tooltip,icon:d.jsx(BR,{textColor:i,backgroundColor:l,size:20})})}),d.jsx(t.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-color-picker-dropdown",children:d.jsx(CZ,{text:r?{color:i,setColor:u}:void 0,background:o?{color:l,setColor:f}:void 0})})]})},Ij=t=>{for(const e of OJ)if(t.startsWith(e))return t;return`${LJ}://${t}`},EZ=t=>{const e=St(),n=qt(),{url:r,text:o,editLink:s}=t,[i,a]=g.useState(r),[l,c]=g.useState(o);g.useEffect(()=>{a(r),c(o)},[o,r]);const u=g.useCallback(m=>{m.key==="Enter"&&(m.preventDefault(),s(Ij(i),l))},[s,i,l]),f=g.useCallback(m=>a(m.currentTarget.value),[]),h=g.useCallback(m=>c(m.currentTarget.value),[]),p=g.useCallback(()=>s(Ij(i),l),[s,i,l]);return d.jsxs(e.Generic.Form.Root,{children:[d.jsx(e.Generic.Form.TextInput,{className:"bn-text-input",name:"url",icon:d.jsx(yZ,{}),autoFocus:!0,placeholder:n.link_toolbar.form.url_placeholder,value:i,onKeyDown:u,onChange:f,onSubmit:p}),d.jsx(e.Generic.Form.TextInput,{className:"bn-text-input",name:"title",icon:d.jsx(A5,{}),placeholder:n.link_toolbar.form.title_placeholder,value:l,onKeyDown:u,onChange:h,onSubmit:p})]})};function x8e(t){return"link"in t.schema.inlineContentSchema&&t.schema.inlineContentSchema.link==="link"}const _8e=()=>{var t;const e=Mt(),n=St(),r=qt(),o=x8e(e),s=Vs(e),[i,a]=g.useState(!1),[l,c]=g.useState(e.getSelectedLinkUrl()||""),[u,f]=g.useState(e.getSelectedText());md(()=>{a(!1),f(e.getSelectedText()||""),c(e.getSelectedLinkUrl()||"")},e),g.useEffect(()=>{var p;const m=y=>{(y.ctrlKey||y.metaKey)&&y.key==="k"&&(a(!0),y.preventDefault())};return(p=e.prosemirrorView)==null||p.dom.addEventListener("keydown",m),()=>{var y;(y=e.prosemirrorView)==null||y.dom.removeEventListener("keydown",m)}},[(t=e.prosemirrorView)==null?void 0:t.dom]);const h=g.useCallback((p,m)=>{e.createLink(p,m),e.focus()},[e]);return!g.useMemo(()=>{if(!o)return!1;for(const p of s)if(p.content===void 0)return!1;return!0},[o,s])||!("link"in e.schema.inlineContentSchema)||!e.isEditable?null:d.jsxs(n.Generic.Popover.Root,{opened:i,children:[d.jsx(n.Generic.Popover.Trigger,{children:d.jsx(n.FormattingToolbar.Button,{className:"bn-button","data-test":"createLink",label:r.formatting_toolbar.link.tooltip,mainTooltip:r.formatting_toolbar.link.tooltip,secondaryTooltip:Qs(r.formatting_toolbar.link.secondary_tooltip,r.generic.ctrl_shortcut),icon:d.jsx(yZ,{}),onClick:()=>a(!0)})}),d.jsx(n.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:d.jsx(EZ,{url:l,text:u,editLink:h})})]})},C8e=()=>{const t=qt(),e=St(),n=Mt(),[r,o]=g.useState(),s=Vs(n),i=g.useMemo(()=>{if(s.length!==1)return;const c=s[0];if(aw(c,n))return o(c.props.caption),c},[n,s]),a=g.useCallback(c=>{i&&c.key==="Enter"&&(c.preventDefault(),n.updateBlock(i,{props:{caption:r}}))},[r,n,i]),l=g.useCallback(c=>o(c.currentTarget.value),[]);return!i||lw(i,n)||!n.isEditable?null:d.jsxs(e.Generic.Popover.Root,{children:[d.jsx(e.Generic.Popover.Trigger,{children:d.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_caption.tooltip,mainTooltip:t.formatting_toolbar.file_caption.tooltip,icon:d.jsx(Sj,{}),isSelected:i.props.caption!==""})}),d.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:d.jsx(e.Generic.Form.Root,{children:d.jsx(e.Generic.Form.TextInput,{name:"file-caption",icon:d.jsx(Sj,{}),value:r||"",autoFocus:!0,placeholder:t.formatting_toolbar.file_caption.input_placeholder,onKeyDown:a,onChange:l})})})]})},E8e=()=>{const t=qt(),e=St(),n=Mt(),r=Vs(n),o=g.useMemo(()=>{if(r.length!==1)return;const i=r[0];if(aw(i,n))return i},[n,r]),s=g.useCallback(()=>{n.focus(),n.removeBlocks([o])},[n,o]);return!o||lw(o,n)||!n.isEditable?null:d.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_delete.tooltip[o.type]||t.formatting_toolbar.file_delete.tooltip.file,mainTooltip:t.formatting_toolbar.file_delete.tooltip[o.type]||t.formatting_toolbar.file_delete.tooltip.file,icon:d.jsx(p8e,{}),onClick:s})},k8e=()=>{const t=qt(),e=St(),n=Mt(),[r,o]=g.useState(),s=Vs(n),i=g.useMemo(()=>{if(s.length!==1)return;const c=s[0];if(aw(c,n))return o(c.props.name),c},[n,s]),a=g.useCallback(c=>{i&&c.key==="Enter"&&(c.preventDefault(),n.updateBlock(i,{props:{name:r}}))},[r,n,i]),l=g.useCallback(c=>o(c.currentTarget.value),[]);return!i||lw(i,n)||!n.isEditable?null:d.jsxs(e.Generic.Popover.Root,{children:[d.jsx(e.Generic.Popover.Trigger,{children:d.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_rename.tooltip[i.type]||t.formatting_toolbar.file_rename.tooltip.file,mainTooltip:t.formatting_toolbar.file_rename.tooltip[i.type]||t.formatting_toolbar.file_rename.tooltip.file,icon:d.jsx(kj,{})})}),d.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:d.jsx(e.Generic.Form.Root,{children:d.jsx(e.Generic.Form.TextInput,{name:"file-name",icon:d.jsx(kj,{}),value:r||"",autoFocus:!0,placeholder:t.formatting_toolbar.file_rename.input_placeholder[i.type]||t.formatting_toolbar.file_rename.input_placeholder.file,onKeyDown:a,onChange:l})})})]})},S8e=()=>{const t=qt(),e=St(),n=Mt(),r=Vs(n),[o,s]=g.useState(!1);g.useEffect(()=>{s(!1)},[r]);const i=r.length===1?r[0]:void 0;return i===void 0||!aw(i,n)||!n.isEditable?null:d.jsxs(e.Generic.Popover.Root,{opened:o,position:"bottom",children:[d.jsx(e.Generic.Popover.Trigger,{children:d.jsx(e.FormattingToolbar.Button,{className:"bn-button",onClick:()=>s(!o),isSelected:o,mainTooltip:t.formatting_toolbar.file_replace.tooltip[i.type]||t.formatting_toolbar.file_replace.tooltip.file,label:t.formatting_toolbar.file_replace.tooltip[i.type]||t.formatting_toolbar.file_replace.tooltip.file,icon:d.jsx(d8e,{})})}),d.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-panel-popover",variant:"panel-popover",children:d.jsx(cZ,{block:i})})]})},T8e=()=>{const t=qt(),e=St(),n=Mt(),r=Vs(n),[o,s]=g.useState(()=>n.canNestBlock());md(()=>{s(n.canNestBlock())},n);const i=g.useCallback(()=>{n.focus(),n.nestBlock()},[n]);return!g.useMemo(()=>!r.find(a=>n.schema.blockSchema[a.type].content!=="inline"),[n.schema.blockSchema,r])||!n.isEditable?null:d.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":"nestBlock",onClick:i,isDisabled:!o,label:t.formatting_toolbar.nest.tooltip,mainTooltip:t.formatting_toolbar.nest.tooltip,secondaryTooltip:Qs(t.formatting_toolbar.nest.secondary_tooltip,t.generic.ctrl_shortcut),icon:d.jsx(r8e,{})})},N8e=()=>{const t=qt(),e=St(),n=Mt(),r=Vs(n),[o,s]=g.useState(()=>n.canUnnestBlock());md(()=>{s(n.canUnnestBlock())},n);const i=g.useCallback(()=>{n.focus(),n.unnestBlock()},[n]);return!g.useMemo(()=>!r.find(a=>n.schema.blockSchema[a.type].content!=="inline"),[n.schema.blockSchema,r])||!n.isEditable?null:d.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":"unnestBlock",onClick:i,isDisabled:!o,label:t.formatting_toolbar.unnest.tooltip,mainTooltip:t.formatting_toolbar.unnest.tooltip,secondaryTooltip:Qs(t.formatting_toolbar.unnest.secondary_tooltip,t.generic.ctrl_shortcut),icon:d.jsx(n8e,{})})},I8e=t=>[{name:t.slash_menu.paragraph.title,type:"paragraph",icon:A5,isSelected:e=>e.type==="paragraph"},{name:t.slash_menu.heading.title,type:"heading",props:{level:1},icon:pZ,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===1},{name:t.slash_menu.heading_2.title,type:"heading",props:{level:2},icon:mZ,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===2},{name:t.slash_menu.heading_3.title,type:"heading",props:{level:3},icon:gZ,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===3},{name:t.slash_menu.bullet_list.title,type:"bulletListItem",icon:bZ,isSelected:e=>e.type==="bulletListItem"},{name:t.slash_menu.numbered_list.title,type:"numberedListItem",icon:wZ,isSelected:e=>e.type==="numberedListItem"},{name:t.slash_menu.check_list.title,type:"checkListItem",icon:vZ,isSelected:e=>e.type==="checkListItem"}],R8e=t=>{const e=St(),n=qt(),r=Mt(),o=Vs(r),[s,i]=g.useState(r.getTextCursorPosition().block),a=g.useMemo(()=>(t.items||I8e(n)).filter(u=>u.type in r.schema.blockSchema),[r,n,t.items]),l=g.useMemo(()=>a.find(u=>u.type===s.type)!==void 0,[s.type,a]),c=g.useMemo(()=>{const u=f=>{r.focus();for(const h of o)r.updateBlock(h,{type:f.type,props:f.props})};return a.map(f=>{const h=f.icon;return{text:f.name,icon:d.jsx(h,{size:16}),onClick:()=>u(f),isSelected:f.isSelected(s)}})},[s,a,r,o]);return md(()=>{i(r.getTextCursorPosition().block)},r),!l||!r.isEditable?null:d.jsx(e.FormattingToolbar.Select,{className:"bn-select",items:c})};function FR(t,e){try{const n=new URL(t,e);if(n.protocol!=="javascript:")return n.href}catch{}return"#"}const A8e=()=>{const t=qt(),e=St(),n=Mt(),r=Vs(n),o=g.useMemo(()=>{if(r.length!==1)return;const i=r[0];if(aw(i,n))return i},[n,r]),s=g.useCallback(()=>{o&&o.props.url&&(n.focus(),n.resolveFileUrl?n.resolveFileUrl(o.props.url).then(i=>window.open(FR(i,window.location.href))):window.open(FR(o.props.url,window.location.href)))},[n,o]);return!o||lw(o,n)?null:d.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_download.tooltip[o.type]||t.formatting_toolbar.file_download.tooltip.file,mainTooltip:t.formatting_toolbar.file_download.tooltip[o.type]||t.formatting_toolbar.file_download.tooltip.file,icon:d.jsx(m8e,{}),onClick:s})},P8e=()=>{const t=qt(),e=St(),n=Mt(),r=Vs(n),o=g.useMemo(()=>{if(r.length!==1)return;const i=r[0];if(WMe(i,n))return i},[n,r]),s=g.useCallback(()=>{o&&n.updateBlock(o,{props:{showPreview:!o.props.showPreview}})},[n,o]);return!o||lw(o,n)||!n.isEditable?null:d.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:"Toggle preview",mainTooltip:t.formatting_toolbar.file_preview_toggle.tooltip,icon:d.jsx(u8e,{}),isSelected:o.props.showPreview,onClick:s})},M8e={left:JOe,center:QOe,right:ZOe,justify:XOe},cT=t=>{const e=St(),n=qt(),r=Mt(),o=Vs(r),s=g.useMemo(()=>{const l=o[0];if(RR("textAlignment",l,r))return l.props.textAlignment},[r,o]),i=g.useCallback(l=>{r.focus();for(const c of o)mp("textAlignment",c.type,r)&&r.updateBlock(c,{props:{textAlignment:l}})},[r,o]);if(!g.useMemo(()=>!!o.find(l=>"textAlignment"in l.props),[o])||!r.isEditable)return null;const a=M8e[t.textAlignment];return d.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":`alignText${t.textAlignment.slice(0,1).toUpperCase()+t.textAlignment.slice(1)}`,onClick:()=>i(t.textAlignment),isSelected:s===t.textAlignment,label:n.formatting_toolbar[`align_${t.textAlignment}`].tooltip,mainTooltip:n.formatting_toolbar[`align_${t.textAlignment}`].tooltip,icon:d.jsx(a,{})})},D8e=t=>[d.jsx(R8e,{items:t},"blockTypeSelect"),d.jsx(C8e,{},"fileCaptionButton"),d.jsx(S8e,{},"replaceFileButton"),d.jsx(k8e,{},"fileRenameButton"),d.jsx(E8e,{},"fileDeleteButton"),d.jsx(A8e,{},"fileDownloadButton"),d.jsx(P8e,{},"filePreviewButton"),d.jsx(M0,{basicTextStyle:"bold"},"boldStyleButton"),d.jsx(M0,{basicTextStyle:"italic"},"italicStyleButton"),d.jsx(M0,{basicTextStyle:"underline"},"underlineStyleButton"),d.jsx(M0,{basicTextStyle:"strike"},"strikeStyleButton"),d.jsx(cT,{textAlignment:"left"},"textAlignLeftButton"),d.jsx(cT,{textAlignment:"center"},"textAlignCenterButton"),d.jsx(cT,{textAlignment:"right"},"textAlignRightButton"),d.jsx(b8e,{},"colorStyleButton"),d.jsx(T8e,{},"nestBlockButton"),d.jsx(N8e,{},"unnestBlockButton"),d.jsx(_8e,{},"createLinkButton")],O8e=t=>{const e=St();return d.jsx(e.FormattingToolbar.Root,{className:"bn-toolbar bn-formatting-toolbar",children:t.children||D8e(t.blockTypeSelectItems)})},Rj=t=>{switch(t){case"left":return"top-start";case"center":return"top";case"right":return"top-end";default:return"top-start"}},L8e=t=>{const e=g.useRef(null),n=Mt(),[r,o]=g.useState(()=>{const h=n.getTextCursorPosition().block;return"textAlignment"in h.props?Rj(h.props.textAlignment):"top-start"});md(()=>{const h=n.getTextCursorPosition().block;"textAlignment"in h.props?o(Rj(h.props.textAlignment)):o("top-start")},n);const s=sh(n.formattingToolbar.onUpdate.bind(n.formattingToolbar)),{isMounted:i,ref:a,style:l,getFloatingProps:c}=ng((s==null?void 0:s.show)||!1,(s==null?void 0:s.referencePos)||null,3e3,{placement:r,middleware:[Tc(10),Um(),Ja()],onOpenChange:(h,p)=>{h||(n.formattingToolbar.closeMenu(),n.focus())},...t.floatingOptions}),u=g.useMemo(()=>FOe([e,a]),[e,a]);if(!i||!s)return null;if(!s.show&&e.current)return d.jsx("div",{ref:u,style:l,dangerouslySetInnerHTML:{__html:e.current.innerHTML}});const f=t.formattingToolbar||O8e;return d.jsx("div",{ref:u,style:l,...c(),children:d.jsx(f,{})})},j8e=t=>{const e=St(),n=qt();return d.jsx(e.LinkToolbar.Button,{className:"bn-button",label:n.link_toolbar.delete.tooltip,mainTooltip:n.link_toolbar.delete.tooltip,isSelected:!1,onClick:t.deleteLink,icon:d.jsx(s8e,{})})},V8e=t=>{const e=St(),n=qt();return d.jsxs(e.Generic.Popover.Root,{children:[d.jsx(e.Generic.Popover.Trigger,{children:d.jsx(e.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.edit.tooltip,isSelected:!1,children:n.link_toolbar.edit.text})}),d.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:d.jsx(EZ,{...t})})]})},$8e=t=>{const e=St(),n=qt();return d.jsx(e.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.open.tooltip,label:n.link_toolbar.open.tooltip,isSelected:!1,onClick:()=>{window.open(FR(t.url,window.location.href),"_blank")},icon:d.jsx(g8e,{})})},B8e=t=>{const e=St();return t.children?d.jsx(e.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",children:t.children}):d.jsxs(e.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",onMouseEnter:t.stopHideTimer,onMouseLeave:t.startHideTimer,children:[d.jsx(V8e,{url:t.url,text:t.text,editLink:t.editLink}),d.jsx($8e,{url:t.url}),d.jsx(j8e,{deleteLink:t.deleteLink})]})},F8e=t=>{const e=Mt(),n={deleteLink:e.linkToolbar.deleteLink,editLink:e.linkToolbar.editLink,startHideTimer:e.linkToolbar.startHideTimer,stopHideTimer:e.linkToolbar.stopHideTimer},r=sh(e.linkToolbar.onUpdate.bind(e.linkToolbar)),{isMounted:o,ref:s,style:i,getFloatingProps:a}=ng((r==null?void 0:r.show)||!1,(r==null?void 0:r.referencePos)||null,4e3,{placement:"top-start",middleware:[Tc(10),Ja()],onOpenChange:h=>{h||(e.linkToolbar.closeMenu(),e.focus())},...t.floatingOptions});if(!o||!r)return null;const{show:l,referencePos:c,...u}=r,f=t.linkToolbar||B8e;return d.jsx("div",{ref:s,style:i,...a(),children:d.jsx(f,{...u,...n})})};function U8e(t){return Tt({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8Z"},child:[]},{tag:"path",attr:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8Z"},child:[]}]})(t)}const H8e=t=>{const e=St(),n=qt(),r=Mt(),o=g.useCallback(()=>{const s=t.block.content;if(s!==void 0&&Array.isArray(s)&&s.length===0)r.setTextCursorPosition(t.block),r.openSuggestionMenu("/");else{const i=r.insertBlocks([{type:"paragraph"}],t.block,"after")[0];r.setTextCursorPosition(i),r.openSuggestionMenu("/")}},[r,t.block]);return d.jsx(e.SideMenu.Button,{className:"bn-button",label:n.side_menu.add_block_label,icon:d.jsx(U8e,{size:24,onClick:o,"data-test":"dragHandleAdd"})})};function kZ(t){return Tt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(t)}const z8e=t=>{const e=St(),n=Mt();return!mp("textColor",t.block.type,n)&&!mp("backgroundColor",t.block.type,n)?null:d.jsxs(e.Generic.Menu.Root,{position:"right",sub:!0,children:[d.jsx(e.Generic.Menu.Trigger,{sub:!0,children:d.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children})}),d.jsx(e.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:d.jsx(CZ,{iconSize:18,text:mp("textColor",t.block.type,n)&&RR("textColor",t.block,n)?{color:t.block.props.textColor,setColor:r=>n.updateBlock(t.block,{type:t.block.type,props:{textColor:r}})}:void 0,background:mp("backgroundColor",t.block.type,n)&&RR("backgroundColor",t.block,n)?{color:t.block.props.backgroundColor,setColor:r=>n.updateBlock(t.block,{props:{backgroundColor:r}})}:void 0})})]})},W8e=t=>{const e=St(),n=Mt();return d.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",onClick:()=>n.removeBlocks([t.block]),children:t.children})},G8e=t=>{const e=St(),n=qt();return d.jsx(e.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:t.children||d.jsxs(d.Fragment,{children:[d.jsx(W8e,{...t,children:n.drag_handle.delete_menuitem}),d.jsx(z8e,{...t,children:n.drag_handle.colors_menuitem})]})})},q8e=t=>{const e=St(),n=qt(),r=t.dragHandleMenu||G8e;return d.jsxs(e.Generic.Menu.Root,{onOpenChange:o=>{o?t.freezeMenu():t.unfreezeMenu()},position:"left",children:[d.jsx(e.Generic.Menu.Trigger,{children:d.jsx(e.SideMenu.Button,{label:n.side_menu.drag_handle_label,draggable:!0,onDragStart:o=>t.blockDragStart(o,t.block),onDragEnd:t.blockDragEnd,className:"bn-button",icon:d.jsx(kZ,{size:24,"data-test":"dragHandle"})})}),d.jsx(r,{block:t.block})]})},K8e=t=>{const e=St(),n=g.useMemo(()=>{const r={"data-block-type":t.block.type};return t.block.type==="heading"&&(r["data-level"]=t.block.props.level.toString()),t.editor.schema.blockSchema[t.block.type].isFileBlock&&(t.block.props.url?r["data-url"]="true":r["data-url"]="false"),r},[t.block,t.editor.schema.blockSchema]);return d.jsx(e.SideMenu.Root,{className:"bn-side-menu",...n,children:t.children||d.jsxs(d.Fragment,{children:[d.jsx(H8e,{...t}),d.jsx(q8e,{...t})]})})},Y8e=t=>{const e=Mt(),n={blockDragStart:e.sideMenu.blockDragStart,blockDragEnd:e.sideMenu.blockDragEnd,freezeMenu:e.sideMenu.freezeMenu,unfreezeMenu:e.sideMenu.unfreezeMenu},r=sh(e.sideMenu.onUpdate.bind(e.sideMenu)),{isMounted:o,ref:s,style:i,getFloatingProps:a}=ng((r==null?void 0:r.show)||!1,(r==null?void 0:r.referencePos)||null,1e3,{placement:"left-start",...t.floatingOptions});if(!o||!r)return null;const{show:l,referencePos:c,...u}=r,f=t.sideMenu||K8e;return d.jsx("div",{ref:s,style:i,...a(),children:d.jsx(f,{...u,...n,editor:e})})};async function Q8e(t,e){return(await EDe(t,e)).map(({id:n,onItemClick:r})=>({id:n,onItemClick:r,icon:n}))}function X8e(t){const e=St(),n=qt(),{items:r,loadingState:o,selectedIndex:s,onItemClick:i,columns:a}=t,l=o==="loading-initial"||o==="loading"?d.jsx(e.GridSuggestionMenu.Loader,{className:"bn-grid-suggestion-menu-loader",columns:a,children:n.suggestion_menu.loading}):null,c=g.useMemo(()=>{const u=[];for(let f=0;f<r.length;f++){const h=r[f];u.push(d.jsx(e.GridSuggestionMenu.Item,{className:"bn-grid-suggestion-menu-item",item:h,id:`bn-grid-suggestion-menu-item-${f}`,isSelected:f===s,onClick:()=>i==null?void 0:i(h)},h.id))}return u},[e,r,i,s]);return d.jsxs(e.GridSuggestionMenu.Root,{id:"bn-grid-suggestion-menu",columns:a,className:"bn-grid-suggestion-menu",children:[l,c,c.length===0&&t.loadingState==="loaded"&&d.jsx(e.GridSuggestionMenu.EmptyItem,{className:"bn-grid-suggestion-menu-empty-item",columns:a,children:n.suggestion_menu.no_items_title})]})}function SZ(t,e,n,r=3){const o=g.useRef(0);g.useEffect(()=>{e!==void 0&&(t.length>0?o.current=e.length:e.length-o.current>r&&n())},[n,r,t.length,e])}function TZ(t,e){const[n,r]=g.useState([]),[o,s]=g.useState(!1),i=g.useRef(),a=g.useRef();return g.useEffect(()=>{const l=t;i.current=t,s(!0),e(t).then(c=>{i.current===l&&(r(c),s(!1),a.current=l)})},[t,e]),{items:n||[],usedQuery:a.current,loadingState:a.current===void 0?"loading-initial":o?"loading":"loaded"}}function J8e(t,e,n,r,o){const[s,i]=g.useState(0),a=r!==void 0&&r>1;return g.useEffect(()=>{var l;const c=u=>(u.key==="ArrowLeft"&&(u.preventDefault(),n.length&&i((s-1+n.length)%n.length)),u.key==="ArrowRight"&&(u.preventDefault(),n.length&&i((s+1+n.length)%n.length)),u.key==="ArrowUp"?(u.preventDefault(),n.length&&i((s-r+n.length)%n.length),!0):u.key==="ArrowDown"?(u.preventDefault(),n.length&&i((s+r)%n.length),!0):u.key==="Enter"&&!u.isComposing?(u.preventDefault(),n.length&&(o==null||o(n[s])),!0):!1);return(l=t.domElement)==null||l.addEventListener("keydown",c,!0),()=>{var u;(u=t.domElement)==null||u.removeEventListener("keydown",c,!0)}},[t.domElement,n,s,o,r,a]),g.useEffect(()=>{i(0)},[e]),{selectedIndex:n.length===0?void 0:s}}function Z8e(t){const e=Pc().setContentEditableProps,n=Mt(),{getItems:r,gridSuggestionMenuComponent:o,query:s,clearQuery:i,closeMenu:a,onItemClick:l,columns:c}=t,u=g.useCallback(y=>{a(),i(),l==null||l(y)},[l,a,i]),{items:f,usedQuery:h,loadingState:p}=TZ(s,r);SZ(f,h,a);const{selectedIndex:m}=J8e(n,s,f,c,u);return g.useEffect(()=>(e(y=>({...y,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{e(y=>({...y,"aria-expanded":!1,"aria-controls":void 0}))}),[e]),g.useEffect(()=>(e(y=>({...y,"aria-activedescendant":m?"bn-suggestion-menu-item-"+m:void 0})),()=>{e(y=>({...y,"aria-activedescendant":void 0}))}),[e,m]),d.jsx(o,{items:f,onItemClick:u,loadingState:p,selectedIndex:m,columns:c})}function eLe(t){const e=Mt(),{triggerCharacter:n,gridSuggestionMenuComponent:r,columns:o,minQueryLength:s,onItemClick:i,getItems:a,floatingOptions:l}=t,c=g.useMemo(()=>i||(C=>{C.onItemClick(e)}),[e,i]),u=g.useMemo(()=>a||(async C=>await Q8e(e,C)),[e,a]),f={closeMenu:e.suggestionMenus.closeMenu,clearQuery:e.suggestionMenus.clearQuery},h=g.useCallback(C=>e.suggestionMenus.onUpdate(n,C),[e.suggestionMenus,n]),p=sh(h),{isMounted:m,ref:y,style:x,getFloatingProps:b}=ng((p==null?void 0:p.show)||!1,(p==null?void 0:p.referencePos)||null,2e3,{placement:"bottom-start",middleware:[Tc(10),Ja(),Rv({apply({availableHeight:C,elements:E}){Object.assign(E.floating.style,{maxHeight:`${C-10}px`})}})],onOpenChange(C){C||e.suggestionMenus.closeMenu()},...l});return!m||!p||!(p!=null&&p.ignoreQueryLength)&&s&&(p.query.startsWith(" ")||p.query.length<s)?null:d.jsx("div",{ref:y,style:x,...b(),children:d.jsx(Z8e,{query:p.query,closeMenu:f.closeMenu,clearQuery:f.clearQuery,getItems:u,columns:o,gridSuggestionMenuComponent:r||X8e,onItemClick:c})})}function tLe(t){const e=St(),n=qt(),{items:r,loadingState:o,selectedIndex:s,onItemClick:i}=t,a=o==="loading-initial"||o==="loading"?d.jsx(e.SuggestionMenu.Loader,{className:"bn-suggestion-menu-loader",children:n.suggestion_menu.loading}):null,l=g.useMemo(()=>{let c;const u=[];for(let f=0;f<r.length;f++){const h=r[f];h.group!==c&&(c=h.group,u.push(d.jsx(e.SuggestionMenu.Label,{className:"bn-suggestion-menu-label",children:c},c))),u.push(d.jsx(e.SuggestionMenu.Item,{className:"bn-suggestion-menu-item",item:h,id:`bn-suggestion-menu-item-${f}`,isSelected:f===s,onClick:()=>i==null?void 0:i(h)},h.title))}return u},[e,r,i,s]);return d.jsxs(e.SuggestionMenu.Root,{id:"bn-suggestion-menu",className:"bn-suggestion-menu",children:[l,l.length===0&&(t.loadingState==="loading"||t.loadingState==="loaded")&&d.jsx(e.SuggestionMenu.EmptyItem,{className:"bn-suggestion-menu-item",children:n.suggestion_menu.no_items_title}),a]})}function nLe(t,e,n,r){const[o,s]=g.useState(0);return g.useEffect(()=>{var i;const a=l=>l.key==="ArrowUp"?(l.preventDefault(),n.length&&s((o-1+n.length)%n.length),!0):l.key==="ArrowDown"?(l.preventDefault(),n.length&&s((o+1)%n.length),!0):l.key==="Enter"&&!l.isComposing?(l.preventDefault(),l.stopPropagation(),n.length&&(r==null||r(n[o])),!0):!1;return(i=t.domElement)==null||i.addEventListener("keydown",a,!0),()=>{var l;(l=t.domElement)==null||l.removeEventListener("keydown",a,!0)}},[t.domElement,n,o,r]),g.useEffect(()=>{s(0)},[e]),{selectedIndex:n.length===0?void 0:o}}function rLe(t){const e=Pc().setContentEditableProps,n=Mt(),{getItems:r,suggestionMenuComponent:o,query:s,clearQuery:i,closeMenu:a,onItemClick:l}=t,c=g.useCallback(m=>{a(),i(),l==null||l(m)},[l,a,i]),{items:u,usedQuery:f,loadingState:h}=TZ(s,r);SZ(u,f,a);const{selectedIndex:p}=nLe(n,s,u,c);return g.useEffect(()=>(e(m=>({...m,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{e(m=>({...m,"aria-expanded":!1,"aria-controls":void 0}))}),[e]),g.useEffect(()=>(e(m=>({...m,"aria-activedescendant":p?"bn-suggestion-menu-item-"+p:void 0})),()=>{e(m=>({...m,"aria-activedescendant":void 0}))}),[e,p]),d.jsx(o,{items:u,onItemClick:c,loadingState:h,selectedIndex:p})}const oLe={heading:pZ,heading_2:mZ,heading_3:gZ,numbered_list:wZ,bullet_list:bZ,check_list:vZ,paragraph:A5,table:a8e,image:xZ,video:c8e,audio:_Z,file:R5,emoji:y8e,code_block:t8e};function sLe(t){return qMe(t).map(e=>{const n=oLe[e.key];return{...e,icon:d.jsx(n,{size:18})}})}function iLe(t){const e=Mt(),{triggerCharacter:n,suggestionMenuComponent:r,minQueryLength:o,onItemClick:s,getItems:i,floatingOptions:a}=t,l=g.useMemo(()=>s||(b=>{b.onItemClick(e)}),[e,s]),c=g.useMemo(()=>i||(async b=>KMe(sLe(e),b)),[e,i]),u={closeMenu:e.suggestionMenus.closeMenu,clearQuery:e.suggestionMenus.clearQuery},f=g.useCallback(b=>e.suggestionMenus.onUpdate(n,b),[e.suggestionMenus,n]),h=sh(f),{isMounted:p,ref:m,style:y,getFloatingProps:x}=ng((h==null?void 0:h.show)||!1,(h==null?void 0:h.referencePos)||null,2e3,{placement:"bottom-start",middleware:[Tc(10),Ja({mainAxis:!0,crossAxis:!1}),Um(),Rv({apply({availableHeight:b,elements:C}){Object.assign(C.floating.style,{maxHeight:`${b-10}px`})}})],onOpenChange(b){b||e.suggestionMenus.closeMenu()},...a});return!p||!h||!(h!=null&&h.ignoreQueryLength)&&o&&(h.query.startsWith(" ")||h.query.length<o)?null:d.jsx("div",{ref:m,style:y,...x(),children:d.jsx(rLe,{query:h.query,closeMenu:u.closeMenu,clearQuery:u.clearQuery,getItems:c,suggestionMenuComponent:r||tLe,onItemClick:l})})}function aLe(t,e){let n=0;if(e==="columns")for(let o=t.rows[0].cells.length-1;o>=0&&t.rows.every(s=>s.cells[o].length===0);o--)n++;const r=[];for(let o=t.rows.length-1;o>=0;o--)e==="rows"&&r.length===0&&t.rows[o].cells.every(s=>s.length===0)||r.unshift({cells:t.rows[o].cells.slice(0,t.rows[0].cells.length-n)});return{...t,rows:r}}const lLe=(t,e=.3)=>{const n=Math.floor(t)+e,r=Math.ceil(t)-e;return t>=n&&t<=r?Math.round(t):t<n?Math.floor(t):Math.ceil(t)},Aj=(t,e,n)=>{const r={cells:Array(n).fill([])},o=[];for(let s=0;s<e;s++)o.push(r);return{type:"tableContent",columnWidths:t.columnWidths,rows:[...t.rows,...o]}},Pj=(t,e)=>{const n=[],r=[];for(let o=0;o<e;o++)r.push(n);return{type:"tableContent",columnWidths:t.columnWidths?[...t.columnWidths,...r.map(()=>{})]:void 0,rows:t.rows.map(o=>({cells:[...o.cells,...r]}))}},cLe=t=>{const e=St(),n=g.useRef(!1),[r,o]=g.useState(),s=g.useCallback(a=>{t.onMouseDown(),o({originalContent:t.block.content,originalCroppedContent:aLe(t.block.content,t.orientation==="addOrRemoveColumns"?"columns":"rows"),startPos:t.orientation==="addOrRemoveColumns"?a.clientX:a.clientY}),n.current=!1,a.preventDefault()},[t]),i=g.useCallback(()=>{n.current||t.editor.updateBlock(t.block,{type:"table",content:t.orientation==="addOrRemoveColumns"?Pj(t.block.content,1):Aj(t.block.content,1,t.block.content.rows[0].cells.length)})},[t.block,t.orientation,t.editor]);return g.useEffect(()=>{const a=l=>{var c,u;if(!r)throw new Error("editingState is undefined");n.current=!0;const f=(t.orientation==="addOrRemoveColumns"?l.clientX:l.clientY)-r.startPos,h=t.orientation==="addOrRemoveColumns"?((c=r.originalCroppedContent.rows[0])==null?void 0:c.cells.length)??0:r.originalCroppedContent.rows.length,p=t.orientation==="addOrRemoveColumns"?((u=r.originalContent.rows[0])==null?void 0:u.cells.length)??0:r.originalContent.rows.length,m=t.orientation==="addOrRemoveColumns"?t.block.content.rows[0].cells.length:t.block.content.rows.length,y=p+lLe(f/(t.orientation==="addOrRemoveColumns"?_5:RMe),.3);y>=h&&y>0&&y!==m&&(t.editor.updateBlock(t.block,{type:"table",content:t.orientation==="addOrRemoveColumns"?Pj(r.originalCroppedContent,y-h):Aj(r.originalCroppedContent,y-h,r.originalContent.rows[0].cells.length)}),t.block.content&&t.editor.setTextCursorPosition(t.block))};return r&&window.addEventListener("mousemove",a),()=>{window.removeEventListener("mousemove",a)}},[r,t.block,t.editor,t.orientation]),g.useEffect(()=>{const a=t.onMouseUp,l=()=>{o(void 0),a()};return r&&window.addEventListener("mouseup",l),()=>{window.removeEventListener("mouseup",l)}},[r,t.onMouseUp]),d.jsx(e.TableHandle.ExtendButton,{className:Ds("bn-extend-button",t.orientation==="addOrRemoveColumns"?"bn-extend-button-add-remove-columns":"bn-extend-button-add-remove-rows",r!==null?"bn-extend-button-editing":""),onClick:i,onMouseDown:s,children:t.children||d.jsx(h8e,{size:18,"data-test":"extendButton"})})},uLe=t=>{const e=St(),n=qt(),r=Mt();return d.jsx(e.Generic.Menu.Item,{onClick:()=>{const o=t.block.content.rows[t.index].cells.map(()=>[]),s=[...t.block.content.rows];s.splice(t.index+(t.side==="below"?1:0),0,{cells:o}),r.updateBlock(t.block,{type:"table",content:{type:"tableContent",columnWidths:t.block.content.columnWidths,rows:s}}),r.setTextCursorPosition(t.block)},children:n.table_handle[`add_${t.side}_menuitem`]})},dLe=t=>{const e=St(),n=qt(),r=Mt();return d.jsx(e.Generic.Menu.Item,{onClick:()=>{const o=[...t.block.content.columnWidths];o.splice(t.index+(t.side==="right"?1:0),0,void 0);const s={type:"tableContent",columnWidths:o,rows:t.block.content.rows.map(i=>{const a=[...i.cells];return a.splice(t.index+(t.side==="right"?1:0),0,[]),{cells:a}})};r.updateBlock(t.block,{type:"table",content:s}),r.setTextCursorPosition(t.block)},children:n.table_handle[`add_${t.side}_menuitem`]})},Mj=t=>t.orientation==="row"?d.jsx(uLe,{...t,side:t.side}):d.jsx(dLe,{...t,side:t.side}),fLe=t=>{const e=St(),n=qt(),r=Mt();return d.jsx(e.Generic.Menu.Item,{onClick:()=>{const o={type:"tableContent",columnWidths:t.block.content.columnWidths,rows:t.block.content.rows.filter((s,i)=>i!==t.index)};r.updateBlock(t.block,{type:"table",content:o}),r.setTextCursorPosition(t.block)},children:n.table_handle.delete_row_menuitem})},hLe=t=>{const e=St(),n=qt(),r=Mt();return d.jsx(e.Generic.Menu.Item,{onClick:()=>{const o={type:"tableContent",columnWidths:t.block.content.columnWidths.filter((s,i)=>i!==t.index),rows:t.block.content.rows.map(s=>({cells:s.cells.filter((i,a)=>a!==t.index)}))};r.updateBlock(t.block,{type:"table",content:o}),r.setTextCursorPosition(t.block)},children:n.table_handle.delete_column_menuitem})},pLe=t=>t.orientation==="row"?d.jsx(fLe,{...t}):d.jsx(hLe,{...t}),mLe=t=>{const e=St();return d.jsx(e.Generic.Menu.Dropdown,{className:"bn-table-handle-menu",children:t.children||d.jsxs(d.Fragment,{children:[d.jsx(pLe,{orientation:t.orientation,block:t.block,index:t.index}),d.jsx(Mj,{orientation:t.orientation,block:t.block,index:t.index,side:t.orientation==="row"?"above":"left"}),d.jsx(Mj,{orientation:t.orientation,block:t.block,index:t.index,side:t.orientation==="row"?"below":"right"})]})})},gLe=t=>{const e=St(),[n,r]=g.useState(!1),o=t.tableHandleMenu||mLe;return d.jsxs(e.Generic.Menu.Root,{onOpenChange:s=>{s?(t.freezeHandles(),t.hideOtherSide()):(t.unfreezeHandles(),t.showOtherSide(),t.editor.focus())},position:"right",children:[d.jsx(e.Generic.Menu.Trigger,{children:d.jsx(e.TableHandle.Root,{className:Ds("bn-table-handle",n?"bn-table-handle-dragging":""),draggable:!0,onDragStart:s=>{r(!0),t.dragStart(s)},onDragEnd:()=>{t.dragEnd(),r(!1)},style:t.orientation==="column"?{transform:"rotate(0.25turn)"}:void 0,children:t.children||d.jsx(kZ,{size:24,"data-test":"tableHandle"})})}),yo.createPortal(d.jsx(o,{orientation:t.orientation,block:t.block,index:t.index}),t.menuContainer)]})};function Dj(t,e,n){const{refs:r,update:o,context:s,floatingStyles:i}=tg({open:e,placement:t==="addOrRemoveColumns"?"right":"bottom",middleware:[Rv({apply({rects:c,elements:u}){Object.assign(u.floating.style,t==="addOrRemoveColumns"?{height:`${c.reference.height}px`}:{width:`${c.reference.width}px`})}})]}),{isMounted:a,styles:l}=I5(s);return g.useEffect(()=>{o()},[n,o]),g.useEffect(()=>{n!==null&&r.setReference({getBoundingClientRect:()=>n})},[t,n,r]),g.useMemo(()=>({isMounted:a,ref:r.setFloating,style:{display:"flex",...l,...i}}),[i,a,r.setFloating,l])}function yLe(t,e,n){const r=Dj("addOrRemoveRows",e,n),o=Dj("addOrRemoveColumns",t,n);return g.useMemo(()=>({addOrRemoveRowsButton:r,addOrRemoveColumnsButton:o}),[o,r])}function vLe(t,e,n){return n&&n.draggedCellOrientation==="row"?new DOMRect(e.x,n.mousePos,e.width,0):new DOMRect(e.x,t.y,e.width,t.height)}function wLe(t,e,n){return n&&n.draggedCellOrientation==="col"?new DOMRect(n.mousePos,e.y,0,e.height):new DOMRect(t.x,e.y,t.width,e.height)}function Oj(t,e,n,r,o){const{refs:s,update:i,context:a,floatingStyles:l}=tg({open:e,placement:t==="row"?"left":"top",middleware:[Tc(t==="row"?-10:-12)]}),{isMounted:c,styles:u}=I5(a);return g.useEffect(()=>{i()},[n,r,i]),g.useEffect(()=>{n===null||r===null||s.setReference({getBoundingClientRect:()=>(t==="row"?vLe:wLe)(n,r,o)})},[o,t,n,r,s]),g.useMemo(()=>({isMounted:c,ref:s.setFloating,style:{display:"flex",...u,...l}}),[l,c,s.setFloating,u])}function bLe(t,e,n,r){const o=Oj("row",t,e,n,r),s=Oj("col",t,e,n,r);return g.useMemo(()=>({rowHandle:o,colHandle:s}),[s,o])}const xLe=t=>{var e,n;const r=Mt(),[o,s]=g.useState(null);if(!r.tableHandles)throw new Error("TableHandlesController can only be used when BlockNote editor schema contains table block");const i={rowDragStart:r.tableHandles.rowDragStart,colDragStart:r.tableHandles.colDragStart,dragEnd:r.tableHandles.dragEnd,freezeHandles:r.tableHandles.freezeHandles,unfreezeHandles:r.tableHandles.unfreezeHandles},{freezeHandles:a,unfreezeHandles:l}=i,c=g.useCallback(()=>{a(),R(!0),C(!0)},[a]),u=g.useCallback(()=>{l(),R(!1),C(!1)},[l]),f=sh(r.tableHandles.onUpdate.bind(r.tableHandles)),h=g.useMemo(()=>{var T,I;return f!=null&&f.draggingState?{draggedCellOrientation:(T=f==null?void 0:f.draggingState)==null?void 0:T.draggedCellOrientation,mousePos:(I=f==null?void 0:f.draggingState)==null?void 0:I.mousePos}:void 0},[f==null?void 0:f.draggingState,(e=f==null?void 0:f.draggingState)==null?void 0:e.draggedCellOrientation,(n=f==null?void 0:f.draggingState)==null?void 0:n.mousePos]),{rowHandle:p,colHandle:m}=bLe((f==null?void 0:f.show)||!1,(f==null?void 0:f.referencePosCell)||null,(f==null?void 0:f.referencePosTable)||null,h),{addOrRemoveColumnsButton:y,addOrRemoveRowsButton:x}=yLe((f==null?void 0:f.showAddOrRemoveColumnsButton)||!1,(f==null?void 0:f.showAddOrRemoveRowsButton)||!1,(f==null?void 0:f.referencePosTable)||null),[b,C]=g.useState(!1),[E,R]=g.useState(!1);if(!f)return null;const D=t.tableHandle||gLe,O=t.extendButton||cLe;return d.jsxs(d.Fragment,{children:[d.jsx("div",{ref:s}),d.jsxs(hOe,{root:f.widgetContainer,children:[!b&&o&&p.isMounted&&f.rowIndex!==void 0&&d.jsx("div",{ref:p.ref,style:p.style,children:d.jsx(D,{editor:r,orientation:"row",showOtherSide:()=>R(!1),hideOtherSide:()=>R(!0),index:f.rowIndex,block:f.block,dragStart:i.rowDragStart,dragEnd:i.dragEnd,freezeHandles:i.freezeHandles,unfreezeHandles:i.unfreezeHandles,menuContainer:o})}),!E&&o&&m.isMounted&&f.colIndex!==void 0&&d.jsx("div",{ref:m.ref,style:m.style,children:d.jsx(D,{editor:r,orientation:"column",showOtherSide:()=>C(!1),hideOtherSide:()=>C(!0),index:f.colIndex,block:f.block,dragStart:i.colDragStart,dragEnd:i.dragEnd,freezeHandles:i.freezeHandles,unfreezeHandles:i.unfreezeHandles,menuContainer:o})}),d.jsx("div",{ref:x.ref,style:x.style,children:d.jsx(O,{editor:r,orientation:"addOrRemoveRows",block:f.block,onMouseDown:c,onMouseUp:u})}),d.jsx("div",{ref:y.ref,style:y.style,children:d.jsx(O,{editor:r,orientation:"addOrRemoveColumns",block:f.block,onMouseDown:c,onMouseUp:u})})]})]})};function _Le(t){const e=Mt();if(!e)throw new Error("BlockNoteDefaultUI must be used within a BlockNoteContext.Provider");return d.jsxs(d.Fragment,{children:[t.formattingToolbar!==!1&&d.jsx(L8e,{}),t.linkToolbar!==!1&&d.jsx(F8e,{}),t.slashMenu!==!1&&d.jsx(iLe,{triggerCharacter:"/"}),t.emojiPicker!==!1&&d.jsx(eLe,{triggerCharacter:":",columns:10,minQueryLength:2}),t.sideMenu!==!1&&d.jsx(Y8e,{}),e.filePanel&&t.filePanel!==!1&&d.jsx(BOe,{}),e.tableHandles&&t.tableHandles!==!1&&d.jsx(xLe,{})]})}const NZ=()=>{const t=g.useMemo(()=>{var i;return(i=window.matchMedia)==null?void 0:i.call(window,"(prefers-color-scheme: dark)")},[]),e=g.useMemo(()=>{var i;return(i=window.matchMedia)==null?void 0:i.call(window,"(prefers-color-scheme: light)")},[]),n=t==null?void 0:t.matches,r=e==null?void 0:e.matches,[o,s]=g.useState(n?"dark":r?"light":"no-preference");return g.useEffect(()=>{s(n?"dark":r?"light":"no-preference")},[n,r]),g.useEffect(()=>{if(typeof(t==null?void 0:t.addEventListener)=="function"){const i=({matches:l})=>l&&s("dark"),a=({matches:l})=>l&&s("light");return t==null||t.addEventListener("change",i),e==null||e.addEventListener("change",a),()=>{t==null||t.removeEventListener("change",i),e==null||e.removeEventListener("change",a)}}else{const i=()=>s(t.matches?"dark":e.matches?"light":"no-preference");return t==null||t.addEventListener("change",i),e==null||e.addEventListener("change",i),()=>{t==null||t.removeEventListener("change",i),e==null||e.removeEventListener("change",i)}}},[t,e]),o},CLe=({renderers:t})=>d.jsx(d.Fragment,{children:Object.entries(t).map(([e,n])=>yo.createPortal(n.reactElement,n.element,e))});function ELe(t){const[e,n]=g.useState({});return g.useEffect(()=>(t.editor._tiptapEditor.contentComponent={setRenderer(r,o){n(s=>({...s,[r]:o}))},removeRenderer(r){n(o=>{const s={...o};return delete s[r],s})}},queueMicrotask(()=>{t.editor._tiptapEditor.createNodeViews()}),()=>{t.editor._tiptapEditor.contentComponent=null}),[t.editor._tiptapEditor]),d.jsxs(d.Fragment,{children:[d.jsx(CLe,{renderers:e}),t.children]})}const kLe=g.forwardRef((t,e)=>{const[n,r]=g.useState();return g.useImperativeHandle(e,()=>(o,s)=>{yo.flushSync(()=>{r({node:o,container:s})}),r(void 0)},[]),d.jsx(d.Fragment,{children:n&&yo.createPortal(n.node,n.container)})}),Lj=()=>{};function SLe(t,e){const{editor:n,className:r,theme:o,children:s,editable:i,onSelectionChange:a,onChange:l,formattingToolbar:c,linkToolbar:u,slashMenu:f,emojiPicker:h,sideMenu:p,filePanel:m,tableHandles:y,...x}=t,[b,C]=g.useState(),E=Pc(),R=NZ(),D=(E==null?void 0:E.colorSchemePreference)||R,O=o||(D==="dark"?"dark":"light");uZ(l||Lj,n),dZ(a||Lj,n),g.useEffect(()=>{n.isEditable=i!==!1},[i,n]);const T=g.useMemo(()=>d.jsxs(d.Fragment,{children:[s,d.jsx(_Le,{formattingToolbar:c,linkToolbar:u,slashMenu:f,emojiPicker:h,sideMenu:p,filePanel:m,tableHandles:y})]}),[s,c,u,f,h,p,m,y]),I=g.useMemo(()=>({...E,editor:n,setContentEditableProps:C}),[E,n]),P=g.useCallback(L=>{n.elementRenderer=L},[n]);return d.jsxs(aZ.Provider,{value:I,children:[d.jsx(kLe,{ref:P}),!n.headless&&d.jsx(ELe,{editor:n,children:d.jsxs("div",{className:Ds("bn-container",O||"",r||""),"data-color-scheme":O,...x,ref:e,children:[d.jsx("div",{"aria-autocomplete":"list","aria-haspopup":"listbox",ref:n.mount,...b}),T]})})]})}const TLe=dt.forwardRef(SLe);var IZ,jj=fv;IZ=jj.createRoot,jj.hydrateRoot;function Vj(t,e){let n;const r=document.createElement("div");let o;if(e!=null&&e.elementRenderer?e.elementRenderer(t(l=>n=l||void 0),r):(o=IZ(r),yo.flushSync(()=>{o.render(t(l=>n=l||void 0))})),!r.childElementCount)return console.warn("ReactInlineContentSpec: renderHTML() failed"),{dom:document.createElement("span")};n==null||n.setAttribute("data-tmp-find","true");const s=r.cloneNode(!0),i=s.firstElementChild,a=s.querySelector("[data-tmp-find]");return a==null||a.removeAttribute("data-tmp-find"),o==null||o.unmount(),{dom:i,contentDOM:a||void 0}}function uT(t){var e;return d.jsx(POe,{...Object.fromEntries(Object.entries(t.domAttributes||{}).filter(([n])=>n!=="class")),className:Ds("bn-block-content",((e=t.domAttributes)==null?void 0:e.class)||""),"data-content-type":t.blockType,...Object.fromEntries(Object.entries(t.blockProps).filter(([n,r])=>{const o=t.propSchema[n];return!y5.includes(n)&&r!==o.default}).map(([n,r])=>[z_(n),r])),"data-file-block":t.isFileBlock===!0||void 0,children:t.children})}function g2(t,e){const n=Ac({name:t.type,content:t.content==="inline"?"inline*":"",group:"blockContent",selectable:t.isSelectable??!0,isolating:!0,addAttributes(){return sw(t.propSchema)},parseHTML(){return ZX(t,e.parse)},renderHTML({HTMLAttributes:r}){const o=document.createElement("div");return my({dom:o,contentDOM:t.content==="inline"?o:void 0},t.type,{},t.propSchema,t.isFileBlock,r)},addNodeView(){return r=>{const o=jOe(s=>{var i;const a=this.options.editor,l=QX(s.getPos,a,this.editor,t.type),c=((i=this.options.domAttributes)==null?void 0:i.blockContent)||{},u=iZ().nodeViewContentRef;if(!u)throw new Error("nodeViewContentRef is not set");const f=e.render;return d.jsx(uT,{blockType:l.type,blockProps:l.props,propSchema:t.propSchema,isFileBlock:t.isFileBlock,domAttributes:c,children:d.jsx(f,{block:l,editor:a,contentRef:u})})},{className:"bn-react-node-view-renderer"})(r);return t.isSelectable===!1&&JX(o,this.editor),o}}});return v5(t,{node:n,toInternalHTML:(r,o)=>{var s,i;const a=((s=n.options.domAttributes)==null?void 0:s.blockContent)||{},l=e.render,c=Vj(u=>d.jsx(uT,{blockType:r.type,blockProps:r.props,propSchema:t.propSchema,domAttributes:a,children:d.jsx(l,{block:r,editor:o,contentRef:u})}),o);return(i=c.contentDOM)==null||i.setAttribute("data-editable",""),c},toExternalHTML:(r,o)=>{var s,i;const a=((s=n.options.domAttributes)==null?void 0:s.blockContent)||{},l=e.toExternalHTML||e.render,c=Vj(u=>d.jsx(uT,{blockType:r.type,blockProps:r.props,propSchema:t.propSchema,domAttributes:a,children:d.jsx(l,{block:r,editor:o,contentRef:u})}),o);return(i=c.contentDOM)==null||i.setAttribute("data-editable",""),c}})}function P5(t){const e=Mt(),[n,r]=g.useState("loading"),[o,s]=g.useState();if(g.useEffect(()=>{let i=!0;return(async()=>{let a="";r("loading");try{a=e.resolveFileUrl?await e.resolveFileUrl(t):t}catch{r("error");return}i&&(r("loaded"),s(a))})(),()=>{i=!1}},[e,t]),n!=="loaded")return{loadingState:n};if(!o)throw new Error("Finished fetching file but did not get download URL.");return{loadingState:n,downloadUrl:o}}const M5=t=>d.jsxs("figure",{children:[t.children,d.jsx("figcaption",{children:t.caption})]});function NLe(t){const e=Mt();g.useEffect(()=>e.onUploadEnd(t),[t,e])}function ILe(t){const e=Mt();g.useEffect(()=>e.onUploadStart(t),[t,e])}function RZ(t){const[e,n]=g.useState(!1);return ILe(r=>{r===t&&n(!0)}),NLe(r=>{r===t&&n(!1)}),e}const RLe=t=>{const e=qt(),n=g.useCallback(o=>{o.preventDefault()},[]),r=g.useCallback(()=>{t.editor.dispatch(t.editor._tiptapEditor.state.tr.setMeta(t.editor.filePanel.plugin,{block:t.block}))},[t.block,t.editor]);return d.jsxs("div",{className:"bn-add-file-button",onMouseDown:n,onClick:r,children:[d.jsx("div",{className:"bn-add-file-button-icon",children:t.buttonIcon||d.jsx(R5,{size:24})}),d.jsx("div",{className:"bn-add-file-button-text",children:t.buttonText||e.file_blocks.file.add_button_text})]})},ALe=t=>d.jsxs("div",{className:"bn-file-name-with-icon",contentEditable:!1,draggable:!1,children:[d.jsx("div",{className:"bn-file-icon",children:d.jsx(R5,{size:24})}),d.jsx("p",{className:"bn-file-name",children:t.block.props.name})]}),D5=t=>{const e=RZ(t.block.id);return d.jsx("div",{className:"bn-file-block-content-wrapper",onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,style:t.style,children:e?d.jsx("div",{className:"bn-file-loading-preview",children:"Loading..."}):t.block.props.url===""?d.jsx(RLe,{...t}):d.jsxs(d.Fragment,{children:[t.block.props.showPreview===!1||!t.children?d.jsx(ALe,{...t}):t.children,t.block.props.caption&&d.jsx("p",{className:"bn-file-caption",children:t.block.props.caption})]})})},y2=t=>d.jsxs("div",{children:[t.children,d.jsx("p",{children:t.caption})]}),PLe=t=>{const e=P5(t.block.props.url);return d.jsx("audio",{className:"bn-audio",src:e.loadingState==="loading"?t.block.props.url:e.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})},MLe=t=>{if(!t.block.props.url)return d.jsx("p",{children:"Add audio"});const e=t.block.props.showPreview?d.jsx("audio",{src:t.block.props.url}):d.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?t.block.props.showPreview?d.jsx(M5,{caption:t.block.props.caption,children:e}):d.jsx(y2,{caption:t.block.props.caption,children:e}):e},DLe=t=>d.jsx(D5,{...t,buttonText:t.editor.dictionary.file_blocks.audio.add_button_text,buttonIcon:d.jsx(_Z,{size:24}),children:d.jsx(PLe,{...t})});g2(rJ,{render:DLe,parse:oJ,toExternalHTML:MLe});const OLe=t=>{if(!t.block.props.url)return d.jsx("p",{children:"Add file"});const e=d.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?d.jsx(y2,{caption:t.block.props.caption,children:e}):e},LLe=t=>d.jsx(D5,{...t});g2(iJ,{render:LLe,parse:aJ,toExternalHTML:OLe});const AZ=t=>{const[e,n]=g.useState(void 0),[r,o]=g.useState(t.block.props.previewWidth),[s,i]=g.useState(!1),a=g.useRef(null);g.useEffect(()=>{const p=y=>{let x;t.block.props.textAlignment==="center"?e.handleUsed==="left"?x=e.initialWidth+(e.initialClientX-y.clientX)*2:x=e.initialWidth+(y.clientX-e.initialClientX)*2:e.handleUsed==="left"?x=e.initialWidth+e.initialClientX-y.clientX:x=e.initialWidth+y.clientX-e.initialClientX;const b=64;x<b?o(b):o(x)},m=()=>{n(void 0),t.editor.updateBlock(t.block,{props:{previewWidth:r}})};return e&&(window.addEventListener("mousemove",p),window.addEventListener("mouseup",m)),()=>{window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",m)}},[t,e,r]);const l=g.useCallback(()=>{t.editor.isEditable&&i(!0)},[t.editor.isEditable]),c=g.useCallback(()=>{i(!1)},[]),u=g.useCallback(p=>{p.preventDefault(),n({handleUsed:"left",initialWidth:a.current.clientWidth,initialClientX:p.clientX})},[]),f=g.useCallback(p=>{p.preventDefault(),n({handleUsed:"right",initialWidth:a.current.clientWidth,initialClientX:p.clientX})},[]),h=RZ(t.block.id);return d.jsx(D5,{...t,onMouseEnter:l,onMouseLeave:c,style:t.block.props.url&&!h&&t.block.props.showPreview?{width:`${r}px`}:void 0,children:d.jsxs("div",{className:"bn-visual-media-wrapper",ref:a,children:[t.children,(s||e)&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"bn-resize-handle",style:{left:"4px"},onMouseDown:u}),d.jsx("div",{className:"bn-resize-handle",style:{right:"4px"},onMouseDown:f})]})]})})},jLe=t=>{const e=P5(t.block.props.url);return d.jsx("img",{className:"bn-visual-media",src:e.loadingState==="loading"?t.block.props.url:e.downloadUrl,alt:t.block.props.caption||"BlockNote image",contentEditable:!1,draggable:!1})},VLe=t=>{if(!t.block.props.url)return d.jsx("p",{children:"Add image"});const e=t.block.props.showPreview?d.jsx("img",{src:t.block.props.url,alt:t.block.props.name||t.block.props.caption||"BlockNote image",width:t.block.props.previewWidth}):d.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?t.block.props.showPreview?d.jsx(M5,{caption:t.block.props.caption,children:e}):d.jsx(y2,{caption:t.block.props.caption,children:e}):e},$Le=t=>d.jsx(AZ,{...t,buttonText:t.editor.dictionary.file_blocks.image.add_button_text,buttonIcon:d.jsx(xZ,{size:24}),children:d.jsx(jLe,{...t})});g2(uJ,{render:$Le,parse:dJ,toExternalHTML:VLe});const BLe=t=>{const e=P5(t.block.props.url);return d.jsx("video",{className:"bn-visual-media",src:e.loadingState==="loading"?t.block.props.url:e.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})},FLe=t=>{if(!t.block.props.url)return d.jsx("p",{children:"Add video"});const e=t.block.props.showPreview?d.jsx("video",{src:t.block.props.url}):d.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?t.block.props.showPreview?d.jsx(M5,{caption:t.block.props.caption,children:e}):d.jsx(y2,{caption:t.block.props.caption,children:e}):e},ULe=t=>d.jsx(AZ,{...t,buttonText:t.editor.dictionary.file_blocks.video.add_button_text,buttonIcon:d.jsx(f8e,{size:24}),children:d.jsx(BLe,{...t})});g2(mJ,{render:ULe,parse:gJ,toExternalHTML:FLe});const HLe=(t={},e=[])=>g.useMemo(()=>{const n=CDe.create(t);return window&&(window.ProseMirror=n._tiptapEditor),n},e);function PZ(t,e){const n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),o=n.top<r.top,s=n.bottom>r.bottom;return o&&s?"both":o?"top":s?"bottom":"none"}function Ka(t){return Object.keys(t)}function dT(t){return t&&typeof t=="object"&&!Array.isArray(t)}function O5(t,e){const n={...t},r=e;return dT(t)&&dT(e)&&Object.keys(e).forEach(o=>{dT(r[o])&&o in t?n[o]=O5(n[o],r[o]):n[o]=r[o]}),n}function zLe(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function WLe(t){var e;return typeof t!="string"||!t.includes("var(--mantine-scale)")?t:(e=t.match(/^calc\((.*?)\)$/))==null?void 0:e[1].split("*")[0].trim()}function GLe(t){const e=WLe(t);return typeof e=="number"?e:typeof e=="string"?e.includes("calc")||e.includes("var")?e:e.includes("px")?Number(e.replace("px","")):e.includes("rem")?Number(e.replace("rem",""))*16:e.includes("em")?Number(e.replace("em",""))*16:Number(e):NaN}function fT(t){return t==="0rem"?"0rem":`calc(${t} * var(--mantine-scale))`}function MZ(t,{shouldScale:e=!1}={}){function n(r){if(r===0||r==="0")return`0${t}`;if(typeof r=="number"){const o=`${r/16}${t}`;return e?fT(o):o}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(t))return e?fT(r):r;const o=r.replace("px","");if(!Number.isNaN(Number(o))){const s=`${Number(o)/16}${t}`;return e?fT(s):s}}return r}return n}const Ae=MZ("rem",{shouldScale:!0}),$j=MZ("em");function L5(t){return Object.keys(t).reduce((e,n)=>(t[n]!==void 0&&(e[n]=t[n]),e),{})}function DZ(t){if(typeof t=="number")return!0;if(typeof t=="string"){if(t.startsWith("calc(")||t.startsWith("var(")||t.includes(" ")&&t.trim()!=="")return!0;const e=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return t.trim().split(/\s+/).every(r=>e.test(r))}return!1}function uw(t){return Array.isArray(t)||t===null?!1:typeof t=="object"?t.type!==g.Fragment:!1}function j5(t){const e=g.createContext(null);return[({children:o,value:s})=>d.jsx(e.Provider,{value:s,children:o}),()=>{const o=g.useContext(e);if(o===null)throw new Error(t);return o}]}function OZ(t=null){const e=g.createContext(t);return[({children:o,value:s})=>d.jsx(e.Provider,{value:s,children:o}),()=>g.useContext(e)]}function Bj(t,e){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(e);return`${t}-${n}`}}function Y_(t,e){let n=t;for(;(n=n.parentElement)&&!n.matches(e););return n}function qLe(t,e,n){for(let r=t-1;r>=0;r-=1)if(!e[r].disabled)return r;if(n){for(let r=e.length-1;r>-1;r-=1)if(!e[r].disabled)return r}return t}function KLe(t,e,n){for(let r=t+1;r<e.length;r+=1)if(!e[r].disabled)return r;if(n){for(let r=0;r<e.length;r+=1)if(!e[r].disabled)return r}return t}function YLe(t,e,n){return Y_(t,n)===Y_(e,n)}function LZ({parentSelector:t,siblingSelector:e,onKeyDown:n,loop:r=!0,activateOnFocus:o=!1,dir:s="rtl",orientation:i}){return a=>{var m;n==null||n(a);const l=Array.from(((m=Y_(a.currentTarget,t))==null?void 0:m.querySelectorAll(e))||[]).filter(y=>YLe(a.currentTarget,y,t)),c=l.findIndex(y=>a.currentTarget===y),u=KLe(c,l,r),f=qLe(c,l,r),h=s==="rtl"?f:u,p=s==="rtl"?u:f;switch(a.key){case"ArrowRight":{i==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[h].focus(),o&&l[h].click());break}case"ArrowLeft":{i==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[p].focus(),o&&l[p].click());break}case"ArrowUp":{i==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[f].focus(),o&&l[f].click());break}case"ArrowDown":{i==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[u].focus(),o&&l[u].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!l[0].disabled&&l[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const y=l.length-1;!l[y].disabled&&l[y].focus();break}}}}const QLe={app:100,modal:200,popover:300,overlay:400,max:9999};function dw(t){return QLe[t]}const XLe=()=>{};function JLe(t,e={active:!0}){return typeof t!="function"||!e.active?e.onKeyDown||XLe:n=>{var r;n.key==="Escape"&&(t(n),(r=e.onTrigger)==null||r.call(e))}}function Cr(t,e="size",n=!0){if(t!==void 0)return DZ(t)?n?Ae(t):t:`var(--${e}-${t})`}function V5(t){return Cr(t,"mantine-spacing")}function _i(t){return t===void 0?"var(--mantine-radius-default)":Cr(t,"mantine-radius")}function Ss(t){return Cr(t,"mantine-font-size")}function ZLe(t){return Cr(t,"mantine-line-height",!1)}function e6e(t){if(t)return Cr(t,"mantine-shadow",!1)}function Ba(t,e){return n=>{t==null||t(n),e==null||e(n)}}function t6e(t,e,n){var r;return n?Array.from(((r=Y_(n,e))==null?void 0:r.querySelectorAll(t))||[]).findIndex(o=>o===n):null}function n6e(){const[t,e]=g.useState(-1);return[t,{setHovered:e,resetHovered:()=>e(-1)}]}function r6e(t="mantine-"){return`${t}${Math.random().toString(36).slice(2,11)}`}const Fj=["mousedown","touchstart"];function o6e(t,e,n){const r=g.useRef(null);return g.useEffect(()=>{const o=s=>{const{target:i}=s??{};if(Array.isArray(n)){const a=(i==null?void 0:i.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(i)&&i.tagName!=="HTML";n.every(c=>!!c&&!s.composedPath().includes(c))&&!a&&t()}else r.current&&!r.current.contains(i)&&t()};return(e||Fj).forEach(s=>document.addEventListener(s,o)),()=>{(e||Fj).forEach(s=>document.removeEventListener(s,o))}},[r,t,n]),r}function s6e(t,e){try{return t.addEventListener("change",e),()=>t.removeEventListener("change",e)}catch{return t.addListener(e),()=>t.removeListener(e)}}function i6e(t,e){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(t).matches:!1}function a6e(t,e,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,o]=g.useState(n?e:i6e(t)),s=g.useRef(null);return g.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(t),o(s.current.matches),s6e(s.current,i=>o(i.matches))},[t]),r}const v2=typeof document<"u"?g.useLayoutEffect:g.useEffect;function td(t,e){const n=g.useRef(!1);g.useEffect(()=>()=>{n.current=!1},[]),g.useEffect(()=>{if(n.current)return t();n.current=!0},e)}function l6e({opened:t,shouldReturnFocus:e=!0}){const n=g.useRef(null),r=()=>{var o;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((o=n.current)==null||o.focus({preventScroll:!0}))};return td(()=>{let o=-1;const s=i=>{i.key==="Tab"&&window.clearTimeout(o)};return document.addEventListener("keydown",s),t?n.current=document.activeElement:e&&(o=window.setTimeout(r,10)),()=>{window.clearTimeout(o),document.removeEventListener("keydown",s)}},[t,e]),r}const c6e=/input|select|textarea|button|object/,jZ="a, input, select, textarea, button, object, [tabindex]";function u6e(t){return t.style.display==="none"}function d6e(t){if(t.getAttribute("aria-hidden")||t.getAttribute("hidden")||t.getAttribute("type")==="hidden")return!1;let n=t;for(;n&&!(n===document.body||n.nodeType===11);){if(u6e(n))return!1;n=n.parentNode}return!0}function VZ(t){let e=t.getAttribute("tabindex");return e===null&&(e=void 0),parseInt(e,10)}function UR(t){const e=t.nodeName.toLowerCase(),n=!Number.isNaN(VZ(t));return(c6e.test(e)&&!t.disabled||t instanceof HTMLAnchorElement&&t.href||n)&&d6e(t)}function $Z(t){const e=VZ(t);return(Number.isNaN(e)||e>=0)&&UR(t)}function f6e(t){return Array.from(t.querySelectorAll(jZ)).filter($Z)}function h6e(t,e){const n=f6e(t);if(!n.length){e.preventDefault();return}const r=n[e.shiftKey?0:n.length-1],o=t.getRootNode();let s=r===o.activeElement||t===o.activeElement;const i=o.activeElement;if(i.tagName==="INPUT"&&i.getAttribute("type")==="radio"&&(s=n.filter(u=>u.getAttribute("type")==="radio"&&u.getAttribute("name")===i.getAttribute("name")).includes(r)),!s)return;e.preventDefault();const l=n[e.shiftKey?n.length-1:0];l&&l.focus()}function BZ(t=!0){const e=g.useRef(null),n=o=>{let s=o.querySelector("[data-autofocus]");if(!s){const i=Array.from(o.querySelectorAll(jZ));s=i.find($Z)||i.find(UR)||null,!s&&UR(o)&&(s=o)}s&&s.focus({preventScroll:!0})},r=g.useCallback(o=>{t&&o!==null&&e.current!==o&&(o?(setTimeout(()=>{o.getRootNode()&&n(o)}),e.current=o):e.current=null)},[t]);return g.useEffect(()=>{if(!t)return;e.current&&setTimeout(()=>n(e.current));const o=s=>{s.key==="Tab"&&e.current&&h6e(e.current,s)};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[t]),r}const p6e=dt.useId||(()=>{});function m6e(){const t=p6e();return t?`mantine-${t.replace(/:/g,"")}`:""}function w2(t){const e=m6e(),[n,r]=g.useState(e);return v2(()=>{r(r6e())},[]),typeof t=="string"?t:typeof window>"u"?e:n}function Q_(t,e){if(typeof t=="function")return t(e);typeof t=="object"&&t!==null&&"current"in t&&(t.current=e)}function fw(...t){const e=new Map;return n=>{if(t.forEach(r=>{const o=Q_(r,n);o&&e.set(r,o)}),e.size>0)return()=>{t.forEach(r=>{const o=e.get(r);o?o():Q_(r,null)}),e.clear()}}}function Mc(...t){return g.useCallback(fw(...t),t)}function b2({value:t,defaultValue:e,finalValue:n,onChange:r=()=>{}}){const[o,s]=g.useState(e!==void 0?e:n),i=(a,...l)=>{s(a),r==null||r(a,...l)};return t!==void 0?[t,r,!0]:[o,i,!1]}function g6e(t,e){return a6e("(prefers-reduced-motion: reduce)",t,e)}function y6e(t){return t.currentTarget instanceof HTMLElement&&t.relatedTarget instanceof HTMLElement?t.currentTarget.contains(t.relatedTarget):!1}function v6e({onBlur:t,onFocus:e}={}){const n=g.useRef(null),[r,o]=g.useState(!1),s=g.useRef(!1),i=c=>{o(c),s.current=c},a=c=>{s.current||(i(!0),e==null||e(c))},l=c=>{s.current&&!y6e(c)&&(i(!1),t==null||t(c))};return g.useEffect(()=>{const c=n.current;if(c)return c.addEventListener("focusin",a),c.addEventListener("focusout",l),()=>{c==null||c.removeEventListener("focusin",a),c==null||c.removeEventListener("focusout",l)}},[a,l]),{ref:n,focused:r}}function $5(t){var n;const e=dt.version;return typeof dt.version!="string"||e.startsWith("18.")?t==null?void 0:t.ref:(n=t==null?void 0:t.props)==null?void 0:n.ref}const w6e={};function b6e(t){const e={};return t.forEach(n=>{Object.entries(n).forEach(([r,o])=>{e[r]?e[r]=ca(e[r],o):e[r]=o})}),e}function x2({theme:t,classNames:e,props:n,stylesCtx:r}){const s=(Array.isArray(e)?e:[e]).map(i=>typeof i=="function"?i(t,n,r):i||w6e);return b6e(s)}function X_({theme:t,styles:e,props:n,stylesCtx:r}){return(Array.isArray(e)?e:[e]).reduce((s,i)=>typeof i=="function"?{...s,...i(t,n,r)}:{...s,...i},{})}const FZ=g.createContext(null);function ih(){const t=g.useContext(FZ);if(!t)throw new Error("[@mantine/core] MantineProvider was not found in tree");return t}function x6e(){return ih().cssVariablesResolver}function _6e(){return ih().classNamesPrefix}function B5(){return ih().getStyleNonce}function C6e(){return ih().withStaticClasses}function E6e(){return ih().headless}function k6e(){var t;return(t=ih().stylesTransform)==null?void 0:t.sx}function S6e(){var t;return(t=ih().stylesTransform)==null?void 0:t.styles}function T6e(t){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(t)}function N6e(t){let e=t.replace("#","");if(e.length===3){const i=e.split("");e=[i[0],i[0],i[1],i[1],i[2],i[2]].join("")}if(e.length===8){const i=parseInt(e.slice(6,8),16)/255;return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16),a:i}}const n=parseInt(e,16),r=n>>16&255,o=n>>8&255,s=n&255;return{r,g:o,b:s,a:1}}function I6e(t){const[e,n,r,o]=t.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:e,g:n,b:r,a:o||1}}function R6e(t){const e=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=t.match(e);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),o=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,i=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*o,l=r/60,c=a*(1-Math.abs(l%2-1)),u=s-a/2;let f,h,p;return l>=0&&l<1?(f=a,h=c,p=0):l>=1&&l<2?(f=c,h=a,p=0):l>=2&&l<3?(f=0,h=a,p=c):l>=3&&l<4?(f=0,h=c,p=a):l>=4&&l<5?(f=c,h=0,p=a):(f=a,h=0,p=c),{r:Math.round((f+u)*255),g:Math.round((h+u)*255),b:Math.round((p+u)*255),a:i||1}}function F5(t){return T6e(t)?N6e(t):t.startsWith("rgb")?I6e(t):t.startsWith("hsl")?R6e(t):{r:0,g:0,b:0,a:1}}function D0(t,e){if(t.startsWith("var("))return`color-mix(in srgb, ${t}, black ${e*100}%)`;const{r:n,g:r,b:o,a:s}=F5(t),i=1-e,a=l=>Math.round(l*i);return`rgba(${a(n)}, ${a(r)}, ${a(o)}, ${s})`}function sv(t,e){return typeof t.primaryShade=="number"?t.primaryShade:e==="dark"?t.primaryShade.dark:t.primaryShade.light}function hT(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function A6e(t){const e=t.match(/oklch\((.*?)%\s/);return e?parseFloat(e[1]):null}function P6e(t){if(t.startsWith("oklch("))return(A6e(t)||0)/100;const{r:e,g:n,b:r}=F5(t),o=e/255,s=n/255,i=r/255,a=hT(o),l=hT(s),c=hT(i);return .2126*a+.7152*l+.0722*c}function Kg(t,e=.179){return t.startsWith("var(")?!1:P6e(t)>e}function rg({color:t,theme:e,colorScheme:n}){if(typeof t!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof t}`);if(t==="bright")return{color:t,value:n==="dark"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Kg(n==="dark"?e.white:e.black,e.luminanceThreshold),variable:"--mantine-color-bright"};if(t==="dimmed")return{color:t,value:n==="dark"?e.colors.dark[2]:e.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:Kg(n==="dark"?e.colors.dark[2]:e.colors.gray[6],e.luminanceThreshold),variable:"--mantine-color-dimmed"};if(t==="white"||t==="black")return{color:t,value:t==="white"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Kg(t==="white"?e.white:e.black,e.luminanceThreshold),variable:`--mantine-color-${t}`};const[r,o]=t.split("."),s=o?Number(o):void 0,i=r in e.colors;if(i){const a=s!==void 0?e.colors[r][s]:e.colors[r][sv(e,n||"light")];return{color:r,value:a,shade:s,isThemeColor:i,isLight:Kg(a,e.luminanceThreshold),variable:o?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:t,value:t,isThemeColor:i,isLight:Kg(t,e.luminanceThreshold),shade:s,variable:void 0}}function Ec(t,e){const n=rg({color:t||e.primaryColor,theme:e});return n.variable?`var(${n.variable})`:t}function HR(t,e){const n={from:(t==null?void 0:t.from)||e.defaultGradient.from,to:(t==null?void 0:t.to)||e.defaultGradient.to,deg:(t==null?void 0:t.deg)||e.defaultGradient.deg||0},r=Ec(n.from,e),o=Ec(n.to,e);return`linear-gradient(${n.deg}deg, ${r} 0%, ${o} 100%)`}function Pa(t,e){if(typeof t!="string"||e>1||e<0)return"rgba(0, 0, 0, 1)";if(t.startsWith("var(")){const s=(1-e)*100;return`color-mix(in srgb, ${t}, transparent ${s}%)`}if(t.startsWith("oklch"))return t.includes("/")?t.replace(/\/\s*[\d.]+\s*\)/,`/ ${e})`):t.replace(")",` / ${e})`);const{r:n,g:r,b:o}=F5(t);return`rgba(${n}, ${r}, ${o}, ${e})`}const Uh=Pa,M6e=({color:t,theme:e,variant:n,gradient:r,autoContrast:o})=>{const s=rg({color:t,theme:e}),i=typeof o=="boolean"?o:e.autoContrast;if(n==="filled"){const a=i&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${t}-filled)`,hover:`var(--mantine-color-${t}-filled-hover)`,color:a,border:`${Ae(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Ae(1)} solid transparent`}:{background:t,hover:D0(t,.1),color:a,border:`${Ae(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${t}-light)`,hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${Ae(1)} solid transparent`};const a=e.colors[s.color][s.shade];return{background:Pa(a,.1),hover:Pa(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ae(1)} solid transparent`}}return{background:Pa(t,.1),hover:Pa(t,.12),color:t,border:`${Ae(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${t}-outline-hover)`,color:`var(--mantine-color-${t}-outline)`,border:`${Ae(1)} solid var(--mantine-color-${t}-outline)`}:{background:"transparent",hover:Pa(e.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Ae(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:Pa(t,.05),color:t,border:`${Ae(1)} solid ${t}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${Ae(1)} solid transparent`};const a=e.colors[s.color][s.shade];return{background:"transparent",hover:Pa(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ae(1)} solid transparent`}}return{background:"transparent",hover:Pa(t,.12),color:t,border:`${Ae(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${t}-light-color)`,border:`${Ae(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ae(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:t,border:`${Ae(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:D0(e.white,.01),color:`var(--mantine-color-${t}-filled)`,border:`${Ae(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:D0(e.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Ae(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:D0(e.white,.01),color:t,border:`${Ae(1)} solid transparent`}:n==="gradient"?{background:HR(r,e),hover:HR(r,e),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Ae(1)} solid var(--mantine-color-default-border)`}:{}},D6e={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},Uj="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",U5={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:D6e,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:M6e,autoContrast:!1,luminanceThreshold:.3,fontFamily:Uj,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:Uj,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Ae(34),lineHeight:"1.3"},h2:{fontSize:Ae(26),lineHeight:"1.35"},h3:{fontSize:Ae(22),lineHeight:"1.4"},h4:{fontSize:Ae(18),lineHeight:"1.45"},h5:{fontSize:Ae(16),lineHeight:"1.5"},h6:{fontSize:Ae(14),lineHeight:"1.5"}}},fontSizes:{xs:Ae(12),sm:Ae(14),md:Ae(16),lg:Ae(18),xl:Ae(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Ae(2),sm:Ae(4),md:Ae(8),lg:Ae(16),xl:Ae(32)},spacing:{xs:Ae(10),sm:Ae(12),md:Ae(16),lg:Ae(20),xl:Ae(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Ae(1)} ${Ae(3)} rgba(0, 0, 0, 0.05), 0 ${Ae(1)} ${Ae(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Ae(1)} ${Ae(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ae(10)} ${Ae(15)} ${Ae(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ae(7)} ${Ae(7)} ${Ae(-5)}`,md:`0 ${Ae(1)} ${Ae(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ae(20)} ${Ae(25)} ${Ae(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ae(10)} ${Ae(10)} ${Ae(-5)}`,lg:`0 ${Ae(1)} ${Ae(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ae(28)} ${Ae(23)} ${Ae(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ae(12)} ${Ae(12)} ${Ae(-7)}`,xl:`0 ${Ae(1)} ${Ae(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ae(36)} ${Ae(28)} ${Ae(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ae(17)} ${Ae(17)} ${Ae(-7)}`},other:{},components:{}};function Hj(t){return t==="auto"||t==="dark"||t==="light"}function O6e({key:t="mantine-color-scheme-value"}={}){let e;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(t);return Hj(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(t,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{e=r=>{r.storageArea===window.localStorage&&r.key===t&&Hj(r.newValue)&&n(r.newValue)},window.addEventListener("storage",e)},unsubscribe:()=>{window.removeEventListener("storage",e)},clear:()=>{window.localStorage.removeItem(t)}}}const L6e="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more – https://mantine.dev/theming/colors/#primary-color",zj="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function pT(t){return t<0||t>9?!1:parseInt(t.toString(),10)===t}function Wj(t){if(!(t.primaryColor in t.colors))throw new Error(L6e);if(typeof t.primaryShade=="object"&&(!pT(t.primaryShade.dark)||!pT(t.primaryShade.light)))throw new Error(zj);if(typeof t.primaryShade=="number"&&!pT(t.primaryShade))throw new Error(zj)}function j6e(t,e){var r;if(!e)return Wj(t),t;const n=O5(t,e);return e.fontFamily&&!((r=e.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=e.fontFamily),Wj(n),n}const H5=g.createContext(null),V6e=()=>g.useContext(H5)||U5;function Ci(){const t=g.useContext(H5);if(!t)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return t}function UZ({theme:t,children:e,inherit:n=!0}){const r=V6e(),o=g.useMemo(()=>j6e(n?r:U5,t),[t,r,n]);return d.jsx(H5.Provider,{value:o,children:e})}UZ.displayName="@mantine/core/MantineThemeProvider";function $6e(){const t=Ci(),e=B5(),n=Ka(t.breakpoints).reduce((r,o)=>{const s=t.breakpoints[o].includes("px"),i=GLe(t.breakpoints[o]),a=s?`${i-.1}px`:$j(i-.1),l=s?`${i}px`:$j(i);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${o} {display: none !important;}}@media (min-width: ${l}) {.mantine-hidden-from-${o} {display: none !important;}}`},"");return d.jsx("style",{"data-mantine-styles":"classes",nonce:e==null?void 0:e(),dangerouslySetInnerHTML:{__html:n}})}function mT(t){return Object.entries(t).map(([e,n])=>`${e}: ${n};`).join("")}function Yg(t,e){return(Array.isArray(t)?t:[t]).reduce((r,o)=>`${o}{${r}}`,e)}function B6e(t,e){const n=mT(t.variables),r=n?Yg(e,n):"",o=mT(t.dark),s=mT(t.light),i=o?Yg(e===":host"?`${e}([data-mantine-color-scheme="dark"])`:`${e}[data-mantine-color-scheme="dark"]`,o):"",a=s?Yg(e===":host"?`${e}([data-mantine-color-scheme="light"])`:`${e}[data-mantine-color-scheme="light"]`,s):"";return`${r}${i}${a}`}function HZ({color:t,theme:e,autoContrast:n}){return(typeof n=="boolean"?n:e.autoContrast)&&rg({color:t||e.primaryColor,theme:e}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function Gj(t,e){return HZ({color:t.colors[t.primaryColor][sv(t,e)],theme:t,autoContrast:null})}function O0({theme:t,color:e,colorScheme:n,name:r=e,withColorValues:o=!0}){if(!t.colors[e])return{};if(n==="light"){const a=sv(t,"light"),l={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:Uh(t.colors[e][a],.1),[`--mantine-color-${r}-light-hover`]:Uh(t.colors[e][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:Uh(t.colors[e][a],.05)};return o?{[`--mantine-color-${r}-0`]:t.colors[e][0],[`--mantine-color-${r}-1`]:t.colors[e][1],[`--mantine-color-${r}-2`]:t.colors[e][2],[`--mantine-color-${r}-3`]:t.colors[e][3],[`--mantine-color-${r}-4`]:t.colors[e][4],[`--mantine-color-${r}-5`]:t.colors[e][5],[`--mantine-color-${r}-6`]:t.colors[e][6],[`--mantine-color-${r}-7`]:t.colors[e][7],[`--mantine-color-${r}-8`]:t.colors[e][8],[`--mantine-color-${r}-9`]:t.colors[e][9],...l}:l}const s=sv(t,"dark"),i={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:Uh(t.colors[e][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:Uh(t.colors[e][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:Uh(t.colors[e][Math.max(s-4,0)],.05)};return o?{[`--mantine-color-${r}-0`]:t.colors[e][0],[`--mantine-color-${r}-1`]:t.colors[e][1],[`--mantine-color-${r}-2`]:t.colors[e][2],[`--mantine-color-${r}-3`]:t.colors[e][3],[`--mantine-color-${r}-4`]:t.colors[e][4],[`--mantine-color-${r}-5`]:t.colors[e][5],[`--mantine-color-${r}-6`]:t.colors[e][6],[`--mantine-color-${r}-7`]:t.colors[e][7],[`--mantine-color-${r}-8`]:t.colors[e][8],[`--mantine-color-${r}-9`]:t.colors[e][9],...i}:i}function F6e(t){return!!t&&typeof t=="object"&&"mantine-virtual-color"in t}function Hh(t,e,n){Ka(e).forEach(r=>Object.assign(t,{[`--mantine-${n}-${r}`]:e[r]}))}const zZ=t=>{const e=sv(t,"light"),n=t.defaultRadius in t.radius?t.radius[t.defaultRadius]:Ae(t.defaultRadius),r={variables:{"--mantine-scale":t.scale.toString(),"--mantine-cursor-type":t.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":t.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":t.fontSmoothing?"grayscale":"unset","--mantine-color-white":t.white,"--mantine-color-black":t.black,"--mantine-line-height":t.lineHeights.md,"--mantine-font-family":t.fontFamily,"--mantine-font-family-monospace":t.fontFamilyMonospace,"--mantine-font-family-headings":t.headings.fontFamily,"--mantine-heading-font-weight":t.headings.fontWeight,"--mantine-heading-text-wrap":t.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${t.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${t.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${t.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${t.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${t.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":Gj(t,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":t.black,"--mantine-color-body":t.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-${e})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":Gj(t,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};Hh(r.variables,t.breakpoints,"breakpoint"),Hh(r.variables,t.spacing,"spacing"),Hh(r.variables,t.fontSizes,"font-size"),Hh(r.variables,t.lineHeights,"line-height"),Hh(r.variables,t.shadows,"shadow"),Hh(r.variables,t.radius,"radius"),t.colors[t.primaryColor].forEach((s,i)=>{r.variables[`--mantine-primary-color-${i}`]=`var(--mantine-color-${t.primaryColor}-${i})`}),Ka(t.colors).forEach(s=>{const i=t.colors[s];if(F6e(i)){Object.assign(r.light,O0({theme:t,name:i.name,color:i.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,O0({theme:t,name:i.name,color:i.dark,colorScheme:"dark",withColorValues:!0}));return}i.forEach((a,l)=>{r.variables[`--mantine-color-${s}-${l}`]=a}),Object.assign(r.light,O0({theme:t,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,O0({theme:t,color:s,colorScheme:"dark",withColorValues:!1}))});const o=t.headings.sizes;return Ka(o).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=o[s].fontSize,r.variables[`--mantine-${s}-line-height`]=o[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=o[s].fontWeight||t.headings.fontWeight}),r};function U6e({theme:t,generator:e}){const n=zZ(t),r=e==null?void 0:e(t);return r?O5(n,r):n}const gT=zZ(U5);function H6e(t){const e={variables:{},light:{},dark:{}};return Ka(t.variables).forEach(n=>{gT.variables[n]!==t.variables[n]&&(e.variables[n]=t.variables[n])}),Ka(t.light).forEach(n=>{gT.light[n]!==t.light[n]&&(e.light[n]=t.light[n])}),Ka(t.dark).forEach(n=>{gT.dark[n]!==t.dark[n]&&(e.dark[n]=t.dark[n])}),e}function z6e(t){return`
  ${t}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${t}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function WZ({cssVariablesSelector:t,deduplicateCssVariables:e}){const n=Ci(),r=B5(),o=x6e(),s=U6e({theme:n,generator:o}),i=t===":root"&&e,a=i?H6e(s):s,l=B6e(a,t);return l?d.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${l}${i?"":z6e(t)}`}}):null}WZ.displayName="@mantine/CssVariables";function W6e(){const t=console.error;console.error=(...e)=>{e.length>1&&typeof e[0]=="string"&&e[0].toLowerCase().includes("extra attributes from the server")&&typeof e[1]=="string"&&e[1].toLowerCase().includes("data-mantine-color-scheme")||t(...e)}}function zh(t,e){var o,s;const n=typeof window<"u"&&"matchMedia"in window&&((o=window.matchMedia("(prefers-color-scheme: dark)"))==null?void 0:o.matches),r=t!=="auto"?t:n?"dark":"light";(s=e())==null||s.setAttribute("data-mantine-color-scheme",r)}function G6e({manager:t,defaultColorScheme:e,getRootElement:n,forceColorScheme:r}){const o=g.useRef(null),[s,i]=g.useState(()=>t.get(e)),a=r||s,l=g.useCallback(u=>{r||(zh(u,n),i(u),t.set(u))},[t.set,a,r]),c=g.useCallback(()=>{i(e),zh(e,n),t.clear()},[t.clear,e]);return g.useEffect(()=>(t.subscribe(l),t.unsubscribe),[t.subscribe,t.unsubscribe]),v2(()=>{zh(t.get(e),n)},[]),g.useEffect(()=>{var f;if(r)return zh(r,n),()=>{};r===void 0&&zh(s,n),typeof window<"u"&&"matchMedia"in window&&(o.current=window.matchMedia("(prefers-color-scheme: dark)"));const u=h=>{s==="auto"&&zh(h.matches?"dark":"light",n)};return(f=o.current)==null||f.addEventListener("change",u),()=>{var h;return(h=o.current)==null?void 0:h.removeEventListener("change",u)}},[s,r]),{colorScheme:a,setColorScheme:l,clearColorScheme:c}}function q6e({respectReducedMotion:t,getRootElement:e}){v2(()=>{var n;t&&((n=e())==null||n.setAttribute("data-respect-reduced-motion","true"))},[t])}W6e();function GZ({theme:t,children:e,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:o=!0,deduplicateCssVariables:s=!0,withCssVariables:i=!0,cssVariablesSelector:a=":root",classNamesPrefix:l="mantine",colorSchemeManager:c=O6e(),defaultColorScheme:u="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:h,forceColorScheme:p,stylesTransform:m}){const{colorScheme:y,setColorScheme:x,clearColorScheme:b}=G6e({defaultColorScheme:u,forceColorScheme:p,manager:c,getRootElement:f});return q6e({respectReducedMotion:(t==null?void 0:t.respectReducedMotion)||!1,getRootElement:f}),d.jsx(FZ.Provider,{value:{colorScheme:y,setColorScheme:x,clearColorScheme:b,getRootElement:f,classNamesPrefix:l,getStyleNonce:n,cssVariablesResolver:h,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:m},children:d.jsxs(UZ,{theme:t,children:[i&&d.jsx(WZ,{cssVariablesSelector:a,deduplicateCssVariables:s}),o&&d.jsx($6e,{}),e]})})}GZ.displayName="@mantine/core/MantineProvider";function _2({classNames:t,styles:e,props:n,stylesCtx:r}){const o=Ci();return{resolvedClassNames:x2({theme:o,classNames:t,props:n,stylesCtx:r||void 0}),resolvedStyles:X_({theme:o,styles:e,props:n,stylesCtx:r||void 0})}}const K6e={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function Y6e({theme:t,options:e,unstyled:n}){return ca((e==null?void 0:e.focusable)&&!n&&(t.focusClassName||K6e[t.focusRing]),(e==null?void 0:e.active)&&!n&&t.activeClassName)}function Q6e({selector:t,stylesCtx:e,options:n,props:r,theme:o}){return x2({theme:o,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:e})[t]}function qj({selector:t,stylesCtx:e,theme:n,classNames:r,props:o}){return x2({theme:n,classNames:r,props:o,stylesCtx:e})[t]}function X6e({rootSelector:t,selector:e,className:n}){return t===e?n:void 0}function J6e({selector:t,classes:e,unstyled:n}){return n?void 0:e[t]}function Z6e({themeName:t,classNamesPrefix:e,selector:n,withStaticClass:r}){return r===!1?[]:t.map(o=>`${e}-${o}-${n}`)}function eje({themeName:t,theme:e,selector:n,props:r,stylesCtx:o}){return t.map(s=>{var i,a;return(a=x2({theme:e,classNames:(i=e.components[s])==null?void 0:i.classNames,props:r,stylesCtx:o}))==null?void 0:a[n]})}function tje({options:t,classes:e,selector:n,unstyled:r}){return t!=null&&t.variant&&!r?e[`${n}--${t.variant}`]:void 0}function nje({theme:t,options:e,themeName:n,selector:r,classNamesPrefix:o,classNames:s,classes:i,unstyled:a,className:l,rootSelector:c,props:u,stylesCtx:f,withStaticClasses:h,headless:p,transformedStyles:m}){return ca(Y6e({theme:t,options:e,unstyled:a||p}),eje({theme:t,themeName:n,selector:r,props:u,stylesCtx:f}),tje({options:e,classes:i,selector:r,unstyled:a}),qj({selector:r,stylesCtx:f,theme:t,classNames:s,props:u}),qj({selector:r,stylesCtx:f,theme:t,classNames:m,props:u}),Q6e({selector:r,stylesCtx:f,options:e,props:u,theme:t}),X6e({rootSelector:c,selector:r,className:l}),J6e({selector:r,classes:i,unstyled:a||p}),h&&!p&&Z6e({themeName:n,classNamesPrefix:o,selector:r,withStaticClass:e==null?void 0:e.withStaticClass}),e==null?void 0:e.className)}function rje({theme:t,themeName:e,props:n,stylesCtx:r,selector:o}){return e.map(s=>{var i;return X_({theme:t,styles:(i=t.components[s])==null?void 0:i.styles,props:n,stylesCtx:r})[o]}).reduce((s,i)=>({...s,...i}),{})}function zR({style:t,theme:e}){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...zR({style:r,theme:e})}),{}):typeof t=="function"?t(e):t??{}}function oje(t){return t.reduce((e,n)=>(n&&Object.keys(n).forEach(r=>{e[r]={...e[r],...L5(n[r])}}),e),{})}function sje({vars:t,varsResolver:e,theme:n,props:r,stylesCtx:o,selector:s,themeName:i,headless:a}){var l;return(l=oje([a?{}:e==null?void 0:e(n,r,o),...i.map(c=>{var u,f,h;return(h=(f=(u=n.components)==null?void 0:u[c])==null?void 0:f.vars)==null?void 0:h.call(f,n,r,o)}),t==null?void 0:t(n,r,o)]))==null?void 0:l[s]}function ije({theme:t,themeName:e,selector:n,options:r,props:o,stylesCtx:s,rootSelector:i,styles:a,style:l,vars:c,varsResolver:u,headless:f,withStylesTransform:h}){return{...!h&&rje({theme:t,themeName:e,props:o,stylesCtx:s,selector:n}),...!h&&X_({theme:t,styles:a,props:o,stylesCtx:s})[n],...!h&&X_({theme:t,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||o,stylesCtx:s})[n],...sje({theme:t,props:o,stylesCtx:s,vars:c,varsResolver:u,selector:n,themeName:e,headless:f}),...i===n?zR({style:l,theme:t}):null,...zR({style:r==null?void 0:r.style,theme:t})}}function aje({props:t,stylesCtx:e,themeName:n}){var i;const r=Ci(),o=(i=S6e())==null?void 0:i();return{getTransformedStyles:a=>o?[...a.map(c=>o(c,{props:t,theme:r,ctx:e})),...n.map(c=>{var u;return o((u=r.components[c])==null?void 0:u.styles,{props:t,theme:r,ctx:e})})].filter(Boolean):[],withStylesTransform:!!o}}function hn({name:t,classes:e,props:n,stylesCtx:r,className:o,style:s,rootSelector:i="root",unstyled:a,classNames:l,styles:c,vars:u,varsResolver:f}){const h=Ci(),p=_6e(),m=C6e(),y=E6e(),x=(Array.isArray(t)?t:[t]).filter(E=>E),{withStylesTransform:b,getTransformedStyles:C}=aje({props:n,stylesCtx:r,themeName:x});return(E,R)=>({className:nje({theme:h,options:R,themeName:x,selector:E,classNamesPrefix:p,classNames:l,classes:e,unstyled:a,className:o,rootSelector:i,props:n,stylesCtx:r,withStaticClasses:m,headless:y,transformedStyles:C([R==null?void 0:R.styles,c])}),style:ije({theme:h,themeName:x,selector:E,options:R,props:n,stylesCtx:r,rootSelector:i,styles:c,style:s,vars:u,varsResolver:f,headless:y,withStylesTransform:b})})}function lje(t,e){return typeof t=="boolean"?t:e.autoContrast}function rt(t,e,n){var i;const r=Ci(),o=(i=r.components[t])==null?void 0:i.defaultProps,s=typeof o=="function"?o(r):o;return{...e,...s,...L5(n)}}function yT(t){return Ka(t).reduce((e,n)=>t[n]!==void 0?`${e}${zLe(n)}:${t[n]};`:e,"").trim()}function cje({selector:t,styles:e,media:n,container:r}){const o=e?yT(e):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${t}{${yT(a.styles)}}}`):[],i=Array.isArray(r)?r.map(a=>`@container ${a.query}{${t}{${yT(a.styles)}}}`):[];return`${o?`${t}{${o}}`:""}${s.join("")}${i.join("")}`.trim()}function uje(t){const e=B5();return d.jsx("style",{"data-mantine-styles":"inline",nonce:e==null?void 0:e(),dangerouslySetInnerHTML:{__html:cje(t)}})}function z5(t){const{m:e,mx:n,my:r,mt:o,mb:s,ml:i,mr:a,me:l,ms:c,p:u,px:f,py:h,pt:p,pb:m,pl:y,pr:x,pe:b,ps:C,bd:E,bg:R,c:D,opacity:O,ff:T,fz:I,fw:P,lts:L,ta:$,lh:F,fs:V,tt:be,td:ge,w:le,miw:Q,maw:H,h:Y,mih:ue,mah:W,bgsz:G,bgp:ie,bgr:ye,bga:he,pos:we,top:ve,left:Te,bottom:xe,right:ae,inset:Ie,display:Re,flex:at,hiddenFrom:Nt,visibleFrom:Ft,lightHidden:Gn,darkHidden:kr,sx:rs,...Jt}=t;return{styleProps:L5({m:e,mx:n,my:r,mt:o,mb:s,ml:i,mr:a,me:l,ms:c,p:u,px:f,py:h,pt:p,pb:m,pl:y,pr:x,pe:b,ps:C,bd:E,bg:R,c:D,opacity:O,ff:T,fz:I,fw:P,lts:L,ta:$,lh:F,fs:V,tt:be,td:ge,w:le,miw:Q,maw:H,h:Y,mih:ue,mah:W,bgsz:G,bgp:ie,bgr:ye,bga:he,pos:we,top:ve,left:Te,bottom:xe,right:ae,inset:Ie,display:Re,flex:at,hiddenFrom:Nt,visibleFrom:Ft,lightHidden:Gn,darkHidden:kr,sx:rs}),rest:Jt}}const dje={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function W5(t,e){const n=rg({color:t,theme:e});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function fje(t,e){const n=rg({color:t,theme:e});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:W5(t,e)}function hje(t,e){if(typeof t=="number")return Ae(t);if(typeof t=="string"){const[n,r,...o]=t.split(" ").filter(i=>i.trim()!=="");let s=`${Ae(n)}`;return r&&(s+=` ${r}`),o.length>0&&(s+=` ${W5(o.join(" "),e)}`),s.trim()}return t}const Kj={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function pje(t){return typeof t=="string"&&t in Kj?Kj[t]:t}const mje=["h1","h2","h3","h4","h5","h6"];function gje(t,e){return typeof t=="string"&&t in e.fontSizes?`var(--mantine-font-size-${t})`:typeof t=="string"&&mje.includes(t)?`var(--mantine-${t}-font-size)`:typeof t=="number"||typeof t=="string"?Ae(t):t}function yje(t){return t}const vje=["h1","h2","h3","h4","h5","h6"];function wje(t,e){return typeof t=="string"&&t in e.lineHeights?`var(--mantine-line-height-${t})`:typeof t=="string"&&vje.includes(t)?`var(--mantine-${t}-line-height)`:t}function bje(t){return typeof t=="number"?Ae(t):t}function xje(t,e){if(typeof t=="number")return Ae(t);if(typeof t=="string"){const n=t.replace("-","");if(!(n in e.spacing))return Ae(t);const r=`--mantine-spacing-${n}`;return t.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return t}const vT={color:W5,textColor:fje,fontSize:gje,spacing:xje,identity:yje,size:bje,lineHeight:wje,fontFamily:pje,border:hje};function Yj(t){return t.replace("(min-width: ","").replace("em)","")}function _je({media:t,...e}){const r=Object.keys(t).sort((o,s)=>Number(Yj(o))-Number(Yj(s))).map(o=>({query:o,styles:t[o]}));return{...e,media:r}}function Cje(t){if(typeof t!="object"||t===null)return!1;const e=Object.keys(t);return!(e.length===1&&e[0]==="base")}function Eje(t){return typeof t=="object"&&t!==null?"base"in t?t.base:void 0:t}function kje(t){return typeof t=="object"&&t!==null?Ka(t).filter(e=>e!=="base"):[]}function Sje(t,e){return typeof t=="object"&&t!==null&&e in t?t[e]:t}function Tje({styleProps:t,data:e,theme:n}){return _je(Ka(t).reduce((r,o)=>{if(o==="hiddenFrom"||o==="visibleFrom"||o==="sx")return r;const s=e[o],i=Array.isArray(s.property)?s.property:[s.property],a=Eje(t[o]);if(!Cje(t[o]))return i.forEach(c=>{r.inlineStyles[c]=vT[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const l=kje(t[o]);return i.forEach(c=>{a&&(r.styles[c]=vT[s.type](a,n)),l.forEach(u=>{const f=`(min-width: ${n.breakpoints[u]})`;r.media[f]={...r.media[f],[c]:vT[s.type](Sje(t[o],u),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function Nje(){return`__m__-${g.useId().replace(/:/g,"")}`}function qZ(t,e){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...qZ(r,e)}),{}):typeof t=="function"?t(e):t??{}}function KZ(t){return t.startsWith("data-")?t:`data-${t}`}function Ije(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return r===void 0||r===""||r===!1||r===null||(e[KZ(n)]=t[n]),e},{})}function YZ(t){return t?typeof t=="string"?{[KZ(t)]:!0}:Array.isArray(t)?[...t].reduce((e,n)=>({...e,...YZ(n)}),{}):Ije(t):null}function WR(t,e){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...WR(r,e)}),{}):typeof t=="function"?t(e):t??{}}function Rje({theme:t,style:e,vars:n,styleProps:r}){const o=WR(e,t),s=WR(n,t);return{...o,...s,...r}}const QZ=g.forwardRef(({component:t,style:e,__vars:n,className:r,variant:o,mod:s,size:i,hiddenFrom:a,visibleFrom:l,lightHidden:c,darkHidden:u,renderRoot:f,__size:h,...p},m)=>{var I;const y=Ci(),x=t||"div",{styleProps:b,rest:C}=z5(p),E=k6e(),R=(I=E==null?void 0:E())==null?void 0:I(b.sx),D=Nje(),O=Tje({styleProps:b,theme:y,data:dje}),T={ref:m,style:Rje({theme:y,style:e,vars:n,styleProps:O.inlineStyles}),className:ca(r,R,{[D]:O.hasResponsiveStyles,"mantine-light-hidden":c,"mantine-dark-hidden":u,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${l}`]:l}),"data-variant":o,"data-size":DZ(i)?void 0:i||void 0,size:h,...YZ(s),...C};return d.jsxs(d.Fragment,{children:[O.hasResponsiveStyles&&d.jsx(uje,{selector:`.${D}`,styles:O.styles,media:O.media}),typeof f=="function"?f(T):d.jsx(x,{...T})]})});QZ.displayName="@mantine/core/Box";const Et=QZ;function XZ(t){return t}function an(t){const e=g.forwardRef(t);return e.extend=XZ,e.withProps=n=>{const r=g.forwardRef((o,s)=>d.jsx(e,{...n,...o,ref:s}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r},e}function cl(t){const e=g.forwardRef(t);return e.withProps=n=>{const r=g.forwardRef((o,s)=>d.jsx(e,{...n,...o,ref:s}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r},e.extend=XZ,e}const Aje=g.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function hw(){return g.useContext(Aje)}var JZ={root:"m_87cf2631"};const Pje={__staticSelector:"UnstyledButton"},ah=cl((t,e)=>{const n=rt("UnstyledButton",Pje,t),{className:r,component:o="button",__staticSelector:s,unstyled:i,classNames:a,styles:l,style:c,...u}=n,f=hn({name:s,props:n,classes:JZ,className:r,style:c,classNames:a,styles:l,unstyled:i});return d.jsx(Et,{...f("root",{focusable:!0}),component:o,ref:e,type:o==="button"?"button":void 0,...u})});ah.classes=JZ;ah.displayName="@mantine/core/UnstyledButton";var ZZ={root:"m_515a97f8"};const Mje={},G5=an((t,e)=>{const n=rt("VisuallyHidden",Mje,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,...c}=n,u=hn({name:"VisuallyHidden",classes:ZZ,props:n,className:o,style:s,classNames:r,styles:i,unstyled:a});return d.jsx(Et,{component:"span",ref:e,...u("root"),...c})});G5.classes=ZZ;G5.displayName="@mantine/core/VisuallyHidden";function eee(t,e){if(t==="rtl"&&(e.includes("right")||e.includes("left"))){const[n,r]=e.split("-"),o=n==="right"?"left":"right";return r===void 0?o:`${o}-${r}`}return e}function Qj(t,e,n,r){return t==="center"||r==="center"?{top:e}:t==="end"?{bottom:n}:t==="start"?{top:n}:{}}function Xj(t,e,n,r,o){return t==="center"||r==="center"?{left:e}:t==="end"?{[o==="ltr"?"right":"left"]:n}:t==="start"?{[o==="ltr"?"left":"right"]:n}:{}}const Dje={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function Oje({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:o,arrowX:s,arrowY:i,dir:a}){const[l,c="center"]=t.split("-"),u={width:e,height:e,transform:"rotate(45deg)",position:"absolute",[Dje[l]]:r},f=-e/2;return l==="left"?{...u,...Qj(c,i,n,o),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:l==="right"?{...u,...Qj(c,i,n,o),left:f,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:l==="top"?{...u,...Xj(c,s,n,o,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:l==="bottom"?{...u,...Xj(c,s,n,o,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const q5=g.forwardRef(({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:o,visible:s,arrowX:i,arrowY:a,style:l,...c},u)=>{const{dir:f}=hw();return s?d.jsx("div",{...c,ref:u,style:{...l,...Oje({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:o,dir:f,arrowX:i,arrowY:a})}}):null});q5.displayName="@mantine/core/FloatingArrow";var tee={root:"m_9814e45f"};const Lje={zIndex:dw("modal")},jje=(t,{gradient:e,color:n,backgroundOpacity:r,blur:o,radius:s,zIndex:i})=>({root:{"--overlay-bg":e||(n!==void 0||r!==void 0)&&Pa(n||"#000",r??.6)||void 0,"--overlay-filter":o?`blur(${Ae(o)})`:void 0,"--overlay-radius":s===void 0?void 0:_i(s),"--overlay-z-index":i==null?void 0:i.toString()}}),iv=cl((t,e)=>{const n=rt("Overlay",Lje,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,fixed:c,center:u,children:f,radius:h,zIndex:p,gradient:m,blur:y,color:x,backgroundOpacity:b,mod:C,...E}=n,R=hn({name:"Overlay",props:n,classes:tee,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:jje});return d.jsx(Et,{ref:e,...R("root"),mod:[{center:u,fixed:c},C],...E,children:f})});iv.classes=tee;iv.displayName="@mantine/core/Overlay";function Vje(t){const e=document.createElement("div");return e.setAttribute("data-portal","true"),typeof t.className=="string"&&e.classList.add(...t.className.split(" ").filter(Boolean)),typeof t.style=="object"&&Object.assign(e.style,t.style),typeof t.id=="string"&&e.setAttribute("id",t.id),e}const $je={},nee=g.forwardRef((t,e)=>{const{children:n,target:r,...o}=rt("Portal",$je,t),[s,i]=g.useState(!1),a=g.useRef(null);return v2(()=>(i(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:Vje(o),Q_(e,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:yo.createPortal(d.jsx(d.Fragment,{children:n}),a.current)});nee.displayName="@mantine/core/Portal";function pw({withinPortal:t=!0,children:e,...n}){return t?d.jsx(nee,{...n,children:e}):d.jsx(d.Fragment,{children:e})}pw.displayName="@mantine/core/OptionalPortal";const Qg=t=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${t==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),L0={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...Qg("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...Qg("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...Qg("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...Qg("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...Qg("top"),common:{transformOrigin:"top right"}}},Jj={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function Bje({transition:t,state:e,duration:n,timingFunction:r}){const o={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof t=="string"?t in L0?{transitionProperty:L0[t].transitionProperty,...o,...L0[t].common,...L0[t][Jj[e]]}:{}:{transitionProperty:t.transitionProperty,...o,...t.common,...t[Jj[e]]}}function Fje({duration:t,exitDuration:e,timingFunction:n,mounted:r,onEnter:o,onExit:s,onEntered:i,onExited:a,enterDelay:l,exitDelay:c}){const u=Ci(),f=g6e(),h=u.respectReducedMotion?f:!1,[p,m]=g.useState(h?0:t),[y,x]=g.useState(r?"entered":"exited"),b=g.useRef(-1),C=g.useRef(-1),E=g.useRef(-1),R=O=>{const T=O?o:s,I=O?i:a;window.clearTimeout(b.current);const P=h?0:O?t:e;m(P),P===0?(typeof T=="function"&&T(),typeof I=="function"&&I(),x(O?"entered":"exited")):E.current=requestAnimationFrame(()=>{fv.flushSync(()=>{x(O?"pre-entering":"pre-exiting")}),E.current=requestAnimationFrame(()=>{typeof T=="function"&&T(),x(O?"entering":"exiting"),b.current=window.setTimeout(()=>{typeof I=="function"&&I(),x(O?"entered":"exited")},P)})})},D=O=>{if(window.clearTimeout(C.current),typeof(O?l:c)!="number"){R(O);return}C.current=window.setTimeout(()=>{R(O)},O?l:c)};return td(()=>{D(r)},[r]),g.useEffect(()=>()=>{window.clearTimeout(b.current),cancelAnimationFrame(E.current)},[]),{transitionDuration:p,transitionStatus:y,transitionTimingFunction:n||"ease"}}function lh({keepMounted:t,transition:e="fade",duration:n=250,exitDuration:r=n,mounted:o,children:s,timingFunction:i="ease",onExit:a,onEntered:l,onEnter:c,onExited:u,enterDelay:f,exitDelay:h}){const{transitionDuration:p,transitionStatus:m,transitionTimingFunction:y}=Fje({mounted:o,exitDuration:r,duration:n,timingFunction:i,onExit:a,onEntered:l,onEnter:c,onExited:u,enterDelay:f,exitDelay:h});return p===0?o?d.jsx(d.Fragment,{children:s({})}):t?s({display:"none"}):null:m==="exited"?t?s({display:"none"}):null:d.jsx(d.Fragment,{children:s(Bje({transition:e,duration:p,state:m,timingFunction:y}))})}lh.displayName="@mantine/core/Transition";const[Uje,ree]=j5("Popover component was not found in the tree");function K5({children:t,active:e=!0,refProp:n="ref",innerRef:r}){const o=BZ(e),s=Mc(o,r);return uw(t)?g.cloneElement(t,{[n]:s}):t}function oee(t){return d.jsx(G5,{tabIndex:-1,"data-autofocus":!0,...t})}K5.displayName="@mantine/core/FocusTrap";oee.displayName="@mantine/core/FocusTrapInitialFocus";K5.InitialFocus=oee;var see={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const Hje={},C2=an((t,e)=>{var x,b,C,E;const n=rt("PopoverDropdown",Hje,t),{className:r,style:o,vars:s,children:i,onKeyDownCapture:a,variant:l,classNames:c,styles:u,...f}=n,h=ree(),p=l6e({opened:h.opened,shouldReturnFocus:h.returnFocus}),m=h.withRoles?{"aria-labelledby":h.getTargetId(),id:h.getDropdownId(),role:"dialog",tabIndex:-1}:{},y=Mc(e,h.floating);return h.disabled?null:d.jsx(pw,{...h.portalProps,withinPortal:h.withinPortal,children:d.jsx(lh,{mounted:h.opened,...h.transitionProps,transition:((x=h.transitionProps)==null?void 0:x.transition)||"fade",duration:((b=h.transitionProps)==null?void 0:b.duration)??150,keepMounted:h.keepMounted,exitDuration:typeof((C=h.transitionProps)==null?void 0:C.exitDuration)=="number"?h.transitionProps.exitDuration:(E=h.transitionProps)==null?void 0:E.duration,children:R=>d.jsx(K5,{active:h.trapFocus&&h.opened,innerRef:y,children:d.jsxs(Et,{...m,...f,variant:l,onKeyDownCapture:JLe(h.onClose,{active:h.closeOnEscape,onTrigger:p,onKeyDown:a}),"data-position":h.placement,"data-fixed":h.floatingStrategy==="fixed"||void 0,...h.getStyles("dropdown",{className:r,props:n,classNames:c,styles:u,style:[{...R,zIndex:h.zIndex,top:h.y??0,left:h.x??0,width:h.width==="target"?void 0:Ae(h.width)},h.resolvedStyles.dropdown,u==null?void 0:u.dropdown,o]}),children:[i,d.jsx(q5,{ref:h.arrowRef,arrowX:h.arrowX,arrowY:h.arrowY,visible:h.withArrow,position:h.placement,arrowSize:h.arrowSize,arrowRadius:h.arrowRadius,arrowOffset:h.arrowOffset,arrowPosition:h.arrowPosition,...h.getStyles("arrow",{props:n,classNames:c,styles:u})})]})})})})});C2.classes=see;C2.displayName="@mantine/core/PopoverDropdown";const zje={refProp:"ref",popupType:"dialog"},Y5=an((t,e)=>{const{children:n,refProp:r,popupType:o,...s}=rt("PopoverTarget",zje,t);if(!uw(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const i=s,a=ree(),l=Mc(a.reference,$5(n),e),c=a.withRoles?{"aria-haspopup":o,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return g.cloneElement(n,{...i,...c,...a.targetProps,className:ca(a.targetProps.className,i.className,n.props.className),[r]:l,...a.controlled?null:{onClick:a.onToggle}})});Y5.displayName="@mantine/core/PopoverTarget";function iee({opened:t,floating:e,position:n,positionDependencies:r}){const[o,s]=g.useState(0);g.useEffect(()=>{if(e.refs.reference.current&&e.refs.floating.current&&t)return gH(e.refs.reference.current,e.refs.floating.current,e.update)},[e.refs.reference.current,e.refs.floating.current,t,o,n]),td(()=>{e.update()},r),td(()=>{s(i=>i+1)},[t])}function Wje(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function Gje(t,e){const n=Wje(t.middlewares),r=[Tc(t.offset)];return n.shift&&r.push(Um(typeof n.shift=="boolean"?{limiter:ZN(),padding:5}:{limiter:ZN(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?Ja():Ja(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?Py():Py(n.inline)),r.push(lP({element:t.arrowRef,padding:t.arrowOffset})),(n.size||t.width==="target")&&r.push(Rv({...typeof n.size=="boolean"?{}:n.size,apply({rects:o,availableWidth:s,availableHeight:i,...a}){var u;const c=((u=e().refs.floating.current)==null?void 0:u.style)??{};n.size&&(typeof n.size=="object"&&n.size.apply?n.size.apply({rects:o,availableWidth:s,availableHeight:i,...a}):Object.assign(c,{maxWidth:`${s}px`,maxHeight:`${i}px`})),t.width==="target"&&Object.assign(c,{width:`${o.reference.width}px`})}})),r}function qje(t){const[e,n]=b2({value:t.opened,defaultValue:t.defaultOpened,finalValue:!1,onChange:t.onChange}),r=g.useRef(e),o=()=>{e&&n(!1)},s=()=>n(!e),i=tg({strategy:t.strategy,placement:t.position,middleware:Gje(t,()=>i)});return iee({opened:e,position:t.position,positionDependencies:t.positionDependencies||[],floating:i}),td(()=>{var a;(a=t.onPositionChange)==null||a.call(t,i.placement)},[i.placement]),td(()=>{var a,l;e!==r.current&&(e?(l=t.onOpen)==null||l.call(t):(a=t.onClose)==null||a.call(t)),r.current=e},[e,t.onClose,t.onOpen]),{floating:i,controlled:typeof t.opened=="boolean",opened:e,onClose:o,onToggle:s}}const Kje={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:dw("popover"),__staticSelector:"Popover",width:"max-content"},Yje=(t,{radius:e,shadow:n})=>({dropdown:{"--popover-radius":e===void 0?void 0:_i(e),"--popover-shadow":e6e(n)}});function gd(t){var dl,Si,ln,pn,Ti,Ni;const e=rt("Popover",Kje,t),{children:n,position:r,offset:o,onPositionChange:s,positionDependencies:i,opened:a,transitionProps:l,onExitTransitionEnd:c,onEnterTransitionEnd:u,width:f,middlewares:h,withArrow:p,arrowSize:m,arrowOffset:y,arrowRadius:x,arrowPosition:b,unstyled:C,classNames:E,styles:R,closeOnClickOutside:D,withinPortal:O,portalProps:T,closeOnEscape:I,clickOutsideEvents:P,trapFocus:L,onClose:$,onOpen:F,onChange:V,zIndex:be,radius:ge,shadow:le,id:Q,defaultOpened:H,__staticSelector:Y,withRoles:ue,disabled:W,returnFocus:G,variant:ie,keepMounted:ye,vars:he,floatingStrategy:we,withOverlay:ve,overlayProps:Te,...xe}=e,ae=hn({name:Y,props:e,classes:see,classNames:E,styles:R,unstyled:C,rootSelector:"dropdown",vars:he,varsResolver:Yje}),{resolvedStyles:Ie}=_2({classNames:E,styles:R,props:e}),Re=g.useRef(null),[at,Nt]=g.useState(null),[Ft,Gn]=g.useState(null),{dir:kr}=hw(),rs=w2(Q),Jt=qje({middlewares:h,width:f,position:eee(kr,r),offset:typeof o=="number"?o+(p?m/2:0):o,arrowRef:Re,arrowOffset:y,onPositionChange:s,positionDependencies:i,opened:a,defaultOpened:H,onChange:V,onOpen:F,onClose:$,strategy:we});o6e(()=>D&&Jt.onClose(),P,[at,Ft]);const pa=g.useCallback(nr=>{Nt(nr),Jt.floating.refs.setReference(nr)},[Jt.floating.refs.setReference]),xo=g.useCallback(nr=>{Gn(nr),Jt.floating.refs.setFloating(nr)},[Jt.floating.refs.setFloating]),ch=g.useCallback(()=>{var nr;(nr=l==null?void 0:l.onExited)==null||nr.call(l),c==null||c()},[l==null?void 0:l.onExited,c]),ki=g.useCallback(()=>{var nr;(nr=l==null?void 0:l.onEntered)==null||nr.call(l),u==null||u()},[l==null?void 0:l.onEntered,u]);return d.jsxs(Uje,{value:{returnFocus:G,disabled:W,controlled:Jt.controlled,reference:pa,floating:xo,x:Jt.floating.x,y:Jt.floating.y,arrowX:(ln=(Si=(dl=Jt.floating)==null?void 0:dl.middlewareData)==null?void 0:Si.arrow)==null?void 0:ln.x,arrowY:(Ni=(Ti=(pn=Jt.floating)==null?void 0:pn.middlewareData)==null?void 0:Ti.arrow)==null?void 0:Ni.y,opened:Jt.opened,arrowRef:Re,transitionProps:{...l,onExited:ch,onEntered:ki},width:f,withArrow:p,arrowSize:m,arrowOffset:y,arrowRadius:x,arrowPosition:b,placement:Jt.floating.placement,trapFocus:L,withinPortal:O,portalProps:T,zIndex:be,radius:ge,shadow:le,closeOnEscape:I,onClose:Jt.onClose,onToggle:Jt.onToggle,getTargetId:()=>`${rs}-target`,getDropdownId:()=>`${rs}-dropdown`,withRoles:ue,targetProps:xe,__staticSelector:Y,classNames:E,styles:R,unstyled:C,variant:ie,keepMounted:ye,getStyles:ae,resolvedStyles:Ie,floatingStrategy:we},children:[n,ve&&d.jsx(lh,{transition:"fade",mounted:Jt.opened,duration:(l==null?void 0:l.duration)||250,exitDuration:(l==null?void 0:l.exitDuration)||250,children:nr=>d.jsx(pw,{withinPortal:O,children:d.jsx(iv,{...Te,...ae("overlay",{className:Te==null?void 0:Te.className,style:[nr,Te==null?void 0:Te.style]})})})})]})}gd.Target=Y5;gd.Dropdown=C2;gd.displayName="@mantine/core/Popover";gd.extend=t=>t;var Wi={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const aee=g.forwardRef(({className:t,...e},n)=>d.jsxs(Et,{component:"span",className:ca(Wi.barsLoader,t),...e,ref:n,children:[d.jsx("span",{className:Wi.bar}),d.jsx("span",{className:Wi.bar}),d.jsx("span",{className:Wi.bar})]}));aee.displayName="@mantine/core/Bars";const lee=g.forwardRef(({className:t,...e},n)=>d.jsxs(Et,{component:"span",className:ca(Wi.dotsLoader,t),...e,ref:n,children:[d.jsx("span",{className:Wi.dot}),d.jsx("span",{className:Wi.dot}),d.jsx("span",{className:Wi.dot})]}));lee.displayName="@mantine/core/Dots";const cee=g.forwardRef(({className:t,...e},n)=>d.jsx(Et,{component:"span",className:ca(Wi.ovalLoader,t),...e,ref:n}));cee.displayName="@mantine/core/Oval";const uee={bars:aee,oval:cee,dots:lee},Qje={loaders:uee,type:"oval"},Xje=(t,{size:e,color:n})=>({root:{"--loader-size":Cr(e,"loader-size"),"--loader-color":n?Ec(n,t):void 0}}),yd=an((t,e)=>{const n=rt("Loader",Qje,t),{size:r,color:o,type:s,vars:i,className:a,style:l,classNames:c,styles:u,unstyled:f,loaders:h,variant:p,children:m,...y}=n,x=hn({name:"Loader",props:n,classes:Wi,className:a,style:l,classNames:c,styles:u,unstyled:f,vars:i,varsResolver:Xje});return m?d.jsx(Et,{...x("root"),ref:e,...y,children:m}):d.jsx(Et,{...x("root"),ref:e,component:h[s],variant:p,size:r,...y})});yd.defaultLoaders=uee;yd.classes=Wi;yd.displayName="@mantine/core/Loader";var og={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const Zj={orientation:"horizontal"},Jje=(t,{borderWidth:e})=>({group:{"--ai-border-width":Ae(e)}}),Q5=an((t,e)=>{const n=rt("ActionIconGroup",Zj,t),{className:r,style:o,classNames:s,styles:i,unstyled:a,orientation:l,vars:c,borderWidth:u,variant:f,mod:h,...p}=rt("ActionIconGroup",Zj,t),m=hn({name:"ActionIconGroup",props:n,classes:og,className:r,style:o,classNames:s,styles:i,unstyled:a,vars:c,varsResolver:Jje,rootSelector:"group"});return d.jsx(Et,{...m("group"),ref:e,variant:f,mod:[{"data-orientation":l},h],role:"group",...p})});Q5.classes=og;Q5.displayName="@mantine/core/ActionIconGroup";const e7={},Zje=(t,{radius:e,color:n,gradient:r,variant:o,autoContrast:s,size:i})=>{const a=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:s});return{groupSection:{"--section-height":Cr(i,"section-height"),"--section-padding-x":Cr(i,"section-padding-x"),"--section-fz":Ss(i),"--section-radius":e===void 0?void 0:_i(e),"--section-bg":n||o?a.background:void 0,"--section-color":a.color,"--section-bd":n||o?a.border:void 0}}},X5=an((t,e)=>{const n=rt("ActionIconGroupSection",e7,t),{className:r,style:o,classNames:s,styles:i,unstyled:a,vars:l,variant:c,gradient:u,radius:f,autoContrast:h,...p}=rt("ActionIconGroupSection",e7,t),m=hn({name:"ActionIconGroupSection",props:n,classes:og,className:r,style:o,classNames:s,styles:i,unstyled:a,vars:l,varsResolver:Zje,rootSelector:"groupSection"});return d.jsx(Et,{...m("groupSection"),ref:e,variant:c,...p})});X5.classes=og;X5.displayName="@mantine/core/ActionIconGroupSection";const e7e={},t7e=(t,{size:e,radius:n,variant:r,gradient:o,color:s,autoContrast:i})=>{const a=t.variantColorResolver({color:s||t.primaryColor,theme:t,gradient:o,variant:r||"filled",autoContrast:i});return{root:{"--ai-size":Cr(e,"ai-size"),"--ai-radius":n===void 0?void 0:_i(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},sg=cl((t,e)=>{const n=rt("ActionIcon",e7e,t),{className:r,unstyled:o,variant:s,classNames:i,styles:a,style:l,loading:c,loaderProps:u,size:f,color:h,radius:p,__staticSelector:m,gradient:y,vars:x,children:b,disabled:C,"data-disabled":E,autoContrast:R,mod:D,...O}=n,T=hn({name:["ActionIcon",m],props:n,className:r,style:l,classes:og,classNames:i,styles:a,unstyled:o,vars:x,varsResolver:t7e});return d.jsxs(ah,{...T("root",{active:!C&&!c&&!E}),...O,unstyled:o,variant:s,size:f,disabled:C||c,ref:e,mod:[{loading:c,disabled:C||E},D],children:[d.jsx(lh,{mounted:!!c,transition:"slide-down",duration:150,children:I=>d.jsx(Et,{component:"span",...T("loader",{style:I}),"aria-hidden":!0,children:d.jsx(yd,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...u})})}),d.jsx(Et,{component:"span",mod:{loading:c},...T("icon"),children:b})]})});sg.classes=og;sg.displayName="@mantine/core/ActionIcon";sg.Group=Q5;sg.GroupSection=X5;const dee=g.forwardRef(({size:t="var(--cb-icon-size, 70%)",style:e,...n},r)=>d.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:t,height:t},ref:r,...n,children:d.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));dee.displayName="@mantine/core/CloseIcon";var fee={root:"m_86a44da5","root--subtle":"m_220c80f2"};const n7e={variant:"subtle"},r7e=(t,{size:e,radius:n,iconSize:r})=>({root:{"--cb-size":Cr(e,"cb-size"),"--cb-radius":n===void 0?void 0:_i(n),"--cb-icon-size":Ae(r)}}),E2=cl((t,e)=>{const n=rt("CloseButton",n7e,t),{iconSize:r,children:o,vars:s,radius:i,className:a,classNames:l,style:c,styles:u,unstyled:f,"data-disabled":h,disabled:p,variant:m,icon:y,mod:x,__staticSelector:b,...C}=n,E=hn({name:b||"CloseButton",props:n,className:a,style:c,classes:fee,classNames:l,styles:u,unstyled:f,vars:s,varsResolver:r7e});return d.jsxs(ah,{ref:e,...C,unstyled:f,variant:m,disabled:p,mod:[{disabled:p||h},x],...E("root",{variant:m,active:!p&&!h}),children:[y||d.jsx(dee,{}),o]})});E2.classes=fee;E2.displayName="@mantine/core/CloseButton";function o7e(t){return g.Children.toArray(t).filter(Boolean)}var hee={root:"m_4081bf90"};const s7e={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},i7e=(t,{grow:e,preventGrowOverflow:n,gap:r,align:o,justify:s,wrap:i},{childWidth:a})=>({root:{"--group-child-width":e&&n?a:void 0,"--group-gap":V5(r),"--group-align":o,"--group-justify":s,"--group-wrap":i}}),Ts=an((t,e)=>{const n=rt("Group",s7e,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,children:l,gap:c,align:u,justify:f,wrap:h,grow:p,preventGrowOverflow:m,vars:y,variant:x,__size:b,mod:C,...E}=n,R=o7e(l),D=R.length,O=V5(c??"md"),I={childWidth:`calc(${100/D}% - (${O} - ${O} / ${D}))`},P=hn({name:"Group",props:n,stylesCtx:I,className:o,style:s,classes:hee,classNames:r,styles:i,unstyled:a,vars:y,varsResolver:i7e});return d.jsx(Et,{...P("root"),ref:e,variant:x,mod:[{grow:p},C],size:b,...E,children:R})});Ts.classes=hee;Ts.displayName="@mantine/core/Group";const[a7e,l7e]=OZ({size:"sm"}),c7e={},pee=an((t,e)=>{const n=rt("InputClearButton",c7e,t),{size:r,variant:o,vars:s,classNames:i,styles:a,...l}=n,c=l7e(),{resolvedClassNames:u,resolvedStyles:f}=_2({classNames:i,styles:a,props:n});return d.jsx(E2,{variant:o||"transparent",ref:e,size:r||(c==null?void 0:c.size)||"sm",classNames:u,styles:f,__staticSelector:"InputClearButton",...l})});pee.displayName="@mantine/core/InputClearButton";const[u7e,k2]=OZ({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Ei={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const t7={},d7e=(t,{size:e})=>({description:{"--input-description-size":e===void 0?void 0:`calc(${Ss(e)} - ${Ae(2)})`}}),S2=an((t,e)=>{const n=rt("InputDescription",t7,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,size:c,__staticSelector:u,__inheritStyles:f=!0,variant:h,...p}=rt("InputDescription",t7,n),m=k2(),y=hn({name:["InputWrapper",u],props:n,classes:Ei,className:o,style:s,classNames:r,styles:i,unstyled:a,rootSelector:"description",vars:l,varsResolver:d7e}),x=f&&(m==null?void 0:m.getStyles)||y;return d.jsx(Et,{component:"p",ref:e,variant:h,size:c,...x("description",m!=null&&m.getStyles?{className:o,style:s}:void 0),...p})});S2.classes=Ei;S2.displayName="@mantine/core/InputDescription";const f7e={},h7e=(t,{size:e})=>({error:{"--input-error-size":e===void 0?void 0:`calc(${Ss(e)} - ${Ae(2)})`}}),T2=an((t,e)=>{const n=rt("InputError",f7e,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,size:c,__staticSelector:u,__inheritStyles:f=!0,variant:h,...p}=n,m=hn({name:["InputWrapper",u],props:n,classes:Ei,className:o,style:s,classNames:r,styles:i,unstyled:a,rootSelector:"error",vars:l,varsResolver:h7e}),y=k2(),x=f&&(y==null?void 0:y.getStyles)||m;return d.jsx(Et,{component:"p",ref:e,variant:h,size:c,...x("error",y!=null&&y.getStyles?{className:o,style:s}:void 0),...p})});T2.classes=Ei;T2.displayName="@mantine/core/InputError";const n7={labelElement:"label"},p7e=(t,{size:e})=>({label:{"--input-label-size":Ss(e),"--input-asterisk-color":void 0}}),N2=an((t,e)=>{const n=rt("InputLabel",n7,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,labelElement:c,size:u,required:f,htmlFor:h,onMouseDown:p,children:m,__staticSelector:y,variant:x,mod:b,...C}=rt("InputLabel",n7,n),E=hn({name:["InputWrapper",y],props:n,classes:Ei,className:o,style:s,classNames:r,styles:i,unstyled:a,rootSelector:"label",vars:l,varsResolver:p7e}),R=k2(),D=(R==null?void 0:R.getStyles)||E;return d.jsxs(Et,{...D("label",R!=null&&R.getStyles?{className:o,style:s}:void 0),component:c,variant:x,size:u,ref:e,htmlFor:c==="label"?h:void 0,mod:[{required:f},b],onMouseDown:O=>{p==null||p(O),!O.defaultPrevented&&O.detail>1&&O.preventDefault()},...C,children:[m,f&&d.jsx("span",{...D("required"),"aria-hidden":!0,children:" *"})]})});N2.classes=Ei;N2.displayName="@mantine/core/InputLabel";const r7={},J5=an((t,e)=>{const n=rt("InputPlaceholder",r7,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,__staticSelector:c,variant:u,error:f,mod:h,...p}=rt("InputPlaceholder",r7,n),m=hn({name:["InputPlaceholder",c],props:n,classes:Ei,className:o,style:s,classNames:r,styles:i,unstyled:a,rootSelector:"placeholder"});return d.jsx(Et,{...m("placeholder"),mod:[{error:!!f},h],component:"span",variant:u,ref:e,...p})});J5.classes=Ei;J5.displayName="@mantine/core/InputPlaceholder";function m7e(t,{hasDescription:e,hasError:n}){const r=t.findIndex(l=>l==="input"),o=t.slice(0,r),s=t.slice(r+1),i=e&&o.includes("description")||n&&o.includes("error");return{offsetBottom:e&&s.includes("description")||n&&s.includes("error"),offsetTop:i}}const g7e={labelElement:"label",inputContainer:t=>t,inputWrapperOrder:["label","description","input","error"]},y7e=(t,{size:e})=>({label:{"--input-label-size":Ss(e),"--input-asterisk-color":void 0},error:{"--input-error-size":e===void 0?void 0:`calc(${Ss(e)} - ${Ae(2)})`},description:{"--input-description-size":e===void 0?void 0:`calc(${Ss(e)} - ${Ae(2)})`}}),Z5=an((t,e)=>{const n=rt("InputWrapper",g7e,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,size:c,variant:u,__staticSelector:f,inputContainer:h,inputWrapperOrder:p,label:m,error:y,description:x,labelProps:b,descriptionProps:C,errorProps:E,labelElement:R,children:D,withAsterisk:O,id:T,required:I,__stylesApiProps:P,mod:L,...$}=n,F=hn({name:["InputWrapper",f],props:P||n,classes:Ei,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:y7e}),V={size:c,variant:u,__staticSelector:f},be=w2(T),ge=typeof O=="boolean"?O:I,le=(E==null?void 0:E.id)||`${be}-error`,Q=(C==null?void 0:C.id)||`${be}-description`,H=be,Y=!!y&&typeof y!="boolean",ue=!!x,W=`${Y?le:""} ${ue?Q:""}`,G=W.trim().length>0?W.trim():void 0,ie=(b==null?void 0:b.id)||`${be}-label`,ye=m&&d.jsx(N2,{labelElement:R,id:ie,htmlFor:H,required:ge,...V,...b,children:m},"label"),he=ue&&d.jsx(S2,{...C,...V,size:(C==null?void 0:C.size)||V.size,id:(C==null?void 0:C.id)||Q,children:x},"description"),we=d.jsx(g.Fragment,{children:h(D)},"input"),ve=Y&&g.createElement(T2,{...E,...V,size:(E==null?void 0:E.size)||V.size,key:"error",id:(E==null?void 0:E.id)||le},y),Te=p.map(xe=>{switch(xe){case"label":return ye;case"input":return we;case"description":return he;case"error":return ve;default:return null}});return d.jsx(u7e,{value:{getStyles:F,describedBy:G,inputId:H,labelId:ie,...m7e(p,{hasDescription:ue,hasError:Y})},children:d.jsx(Et,{ref:e,variant:u,size:c,mod:[{error:!!y},L],...F("root"),...$,children:Te})})});Z5.classes=Ei;Z5.displayName="@mantine/core/InputWrapper";const v7e={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},w7e=(t,e,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":Cr(e.size,"input-height"),"--input-fz":Ss(e.size),"--input-radius":e.radius===void 0?void 0:_i(e.radius),"--input-left-section-width":e.leftSectionWidth!==void 0?Ae(e.leftSectionWidth):void 0,"--input-right-section-width":e.rightSectionWidth!==void 0?Ae(e.rightSectionWidth):void 0,"--input-padding-y":e.multiline?Cr(e.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":e.leftSectionPointerEvents,"--input-right-section-pointer-events":e.rightSectionPointerEvents}}),Os=cl((t,e)=>{const n=rt("Input",v7e,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,required:l,__staticSelector:c,__stylesApiProps:u,size:f,wrapperProps:h,error:p,disabled:m,leftSection:y,leftSectionProps:x,leftSectionWidth:b,rightSection:C,rightSectionProps:E,rightSectionWidth:R,rightSectionPointerEvents:D,leftSectionPointerEvents:O,variant:T,vars:I,pointer:P,multiline:L,radius:$,id:F,withAria:V,withErrorStyles:be,mod:ge,inputSize:le,__clearSection:Q,__clearable:H,__defaultRightSection:Y,...ue}=n,{styleProps:W,rest:G}=z5(ue),ie=k2(),ye={offsetBottom:ie==null?void 0:ie.offsetBottom,offsetTop:ie==null?void 0:ie.offsetTop},he=hn({name:["Input",c],props:u||n,classes:Ei,className:o,style:s,classNames:r,styles:i,unstyled:a,stylesCtx:ye,rootSelector:"wrapper",vars:I,varsResolver:w7e}),we=V?{required:l,disabled:m,"aria-invalid":!!p,"aria-describedby":ie==null?void 0:ie.describedBy,id:(ie==null?void 0:ie.inputId)||F}:{},ve=C||H&&Q||Y;return d.jsx(a7e,{value:{size:f||"sm"},children:d.jsxs(Et,{...he("wrapper"),...W,...h,mod:[{error:!!p&&be,pointer:P,disabled:m,multiline:L,"data-with-right-section":!!C,"data-with-left-section":!!y},ge],variant:T,size:f,children:[y&&d.jsx("div",{...x,"data-position":"left",...he("section",{className:x==null?void 0:x.className,style:x==null?void 0:x.style}),children:y}),d.jsx(Et,{component:"input",...G,...we,ref:e,required:l,mod:{disabled:m,error:!!p&&be},variant:T,__size:le,...he("input")}),ve&&d.jsx("div",{...E,"data-position":"right",...he("section",{className:E==null?void 0:E.className,style:E==null?void 0:E.style}),children:ve})]})})});Os.classes=Ei;Os.Wrapper=Z5;Os.Label=N2;Os.Error=T2;Os.Description=S2;Os.Placeholder=J5;Os.ClearButton=pee;Os.displayName="@mantine/core/Input";function b7e(t,e,n){const r=rt(t,e,n),{label:o,description:s,error:i,required:a,classNames:l,styles:c,className:u,unstyled:f,__staticSelector:h,__stylesApiProps:p,errorProps:m,labelProps:y,descriptionProps:x,wrapperProps:b,id:C,size:E,style:R,inputContainer:D,inputWrapperOrder:O,withAsterisk:T,variant:I,vars:P,mod:L,...$}=r,{styleProps:F,rest:V}=z5($),be={label:o,description:s,error:i,required:a,classNames:l,className:u,__staticSelector:h,__stylesApiProps:p||r,errorProps:m,labelProps:y,descriptionProps:x,unstyled:f,styles:c,size:E,style:R,inputContainer:D,inputWrapperOrder:O,withAsterisk:T,variant:I,id:C,mod:L,...b};return{...V,classNames:l,styles:c,unstyled:f,wrapperProps:{...be,...F},inputProps:{required:a,classNames:l,styles:c,unstyled:f,size:E,__staticSelector:h,__stylesApiProps:p||r,error:i,variant:I,id:C}}}const x7e={__staticSelector:"InputBase",withAria:!0},ig=cl((t,e)=>{const{inputProps:n,wrapperProps:r,...o}=b7e("InputBase",x7e,t);return d.jsx(Os.Wrapper,{...r,children:d.jsx(Os,{...n,...o,ref:e})})});ig.classes={...Os.classes,...Os.Wrapper.classes};ig.displayName="@mantine/core/InputBase";var mee={root:"m_b6d8b162"};function _7e(t){if(t==="start")return"start";if(t==="end"||t)return"end"}const C7e={inherit:!1},E7e=(t,{variant:e,lineClamp:n,gradient:r,size:o,color:s})=>({root:{"--text-fz":Ss(o),"--text-lh":ZLe(o),"--text-gradient":e==="gradient"?HR(r,t):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?Ec(s,t):void 0}}),Em=cl((t,e)=>{const n=rt("Text",C7e,t),{lineClamp:r,truncate:o,inline:s,inherit:i,gradient:a,span:l,__staticSelector:c,vars:u,className:f,style:h,classNames:p,styles:m,unstyled:y,variant:x,mod:b,size:C,...E}=n,R=hn({name:["Text",c],props:n,classes:mee,className:f,style:h,classNames:p,styles:m,unstyled:y,vars:u,varsResolver:E7e});return d.jsx(Et,{...R("root",{focusable:!0}),ref:e,component:l?"span":"p",variant:x,mod:[{"data-truncate":_7e(o),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":i},b],size:C,...E})});Em.classes=mee;Em.displayName="@mantine/core/Text";function gee({size:t,style:e,...n}){const r=t!==void 0?{width:Ae(t),height:Ae(t),...e}:e;return d.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:d.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var yee={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const k7e={},S7e=(t,{radius:e,color:n,gradient:r,variant:o,size:s,autoContrast:i})=>{const a=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:i});return{root:{"--badge-height":Cr(s,"badge-height"),"--badge-padding-x":Cr(s,"badge-padding-x"),"--badge-fz":Cr(s,"badge-fz"),"--badge-radius":e===void 0?void 0:_i(e),"--badge-bg":n||o?a.background:void 0,"--badge-color":n||o?a.color:void 0,"--badge-bd":n||o?a.border:void 0,"--badge-dot-color":o==="dot"?Ec(n,t):void 0}}},eM=cl((t,e)=>{const n=rt("Badge",k7e,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,radius:c,color:u,gradient:f,leftSection:h,rightSection:p,children:m,variant:y,fullWidth:x,autoContrast:b,circle:C,mod:E,...R}=n,D=hn({name:"Badge",props:n,classes:yee,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:S7e});return d.jsxs(Et,{variant:y,mod:[{block:x,circle:C,"with-right-section":!!p,"with-left-section":!!h},E],...D("root",{variant:y}),ref:e,...R,children:[h&&d.jsx("span",{...D("section"),"data-position":"left",children:h}),d.jsx("span",{...D("label"),children:m}),p&&d.jsx("span",{...D("section"),"data-position":"right",children:p})]})});eM.classes=yee;eM.displayName="@mantine/core/Badge";var ag={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const o7={orientation:"horizontal"},T7e=(t,{borderWidth:e})=>({group:{"--button-border-width":Ae(e)}}),tM=an((t,e)=>{const n=rt("ButtonGroup",o7,t),{className:r,style:o,classNames:s,styles:i,unstyled:a,orientation:l,vars:c,borderWidth:u,variant:f,mod:h,...p}=rt("ButtonGroup",o7,t),m=hn({name:"ButtonGroup",props:n,classes:ag,className:r,style:o,classNames:s,styles:i,unstyled:a,vars:c,varsResolver:T7e,rootSelector:"group"});return d.jsx(Et,{...m("group"),ref:e,variant:f,mod:[{"data-orientation":l},h],role:"group",...p})});tM.classes=ag;tM.displayName="@mantine/core/ButtonGroup";const s7={},N7e=(t,{radius:e,color:n,gradient:r,variant:o,autoContrast:s,size:i})=>{const a=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:s});return{groupSection:{"--section-height":Cr(i,"section-height"),"--section-padding-x":Cr(i,"section-padding-x"),"--section-fz":i!=null&&i.includes("compact")?Ss(i.replace("compact-","")):Ss(i),"--section-radius":e===void 0?void 0:_i(e),"--section-bg":n||o?a.background:void 0,"--section-color":a.color,"--section-bd":n||o?a.border:void 0}}},nM=an((t,e)=>{const n=rt("ButtonGroupSection",s7,t),{className:r,style:o,classNames:s,styles:i,unstyled:a,vars:l,variant:c,gradient:u,radius:f,autoContrast:h,...p}=rt("ButtonGroupSection",s7,t),m=hn({name:"ButtonGroupSection",props:n,classes:ag,className:r,style:o,classNames:s,styles:i,unstyled:a,vars:l,varsResolver:N7e,rootSelector:"groupSection"});return d.jsx(Et,{...m("groupSection"),ref:e,variant:c,...p})});nM.classes=ag;nM.displayName="@mantine/core/ButtonGroupSection";const I7e={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Ae(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},R7e={},A7e=(t,{radius:e,color:n,gradient:r,variant:o,size:s,justify:i,autoContrast:a})=>{const l=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:a});return{root:{"--button-justify":i,"--button-height":Cr(s,"button-height"),"--button-padding-x":Cr(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?Ss(s.replace("compact-","")):Ss(s),"--button-radius":e===void 0?void 0:_i(e),"--button-bg":n||o?l.background:void 0,"--button-hover":n||o?l.hover:void 0,"--button-color":l.color,"--button-bd":n||o?l.border:void 0,"--button-hover-color":n||o?l.hoverColor:void 0}}},ul=cl((t,e)=>{const n=rt("Button",R7e,t),{style:r,vars:o,className:s,color:i,disabled:a,children:l,leftSection:c,rightSection:u,fullWidth:f,variant:h,radius:p,loading:m,loaderProps:y,gradient:x,classNames:b,styles:C,unstyled:E,"data-disabled":R,autoContrast:D,mod:O,...T}=n,I=hn({name:"Button",props:n,classes:ag,className:s,style:r,classNames:b,styles:C,unstyled:E,vars:o,varsResolver:A7e}),P=!!c,L=!!u;return d.jsxs(ah,{ref:e,...I("root",{active:!a&&!m&&!R}),unstyled:E,variant:h,disabled:a||m,mod:[{disabled:a||R,loading:m,block:f,"with-left-section":P,"with-right-section":L},O],...T,children:[d.jsx(lh,{mounted:!!m,transition:I7e,duration:150,children:$=>d.jsx(Et,{component:"span",...I("loader",{style:$}),"aria-hidden":!0,children:d.jsx(yd,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...y})})}),d.jsxs("span",{...I("inner"),children:[c&&d.jsx(Et,{component:"span",...I("section"),mod:{position:"left"},children:c}),d.jsx(Et,{component:"span",mod:{loading:m},...I("label"),children:l}),u&&d.jsx(Et,{component:"span",...I("section"),mod:{position:"right"},children:u})]})]})});ul.classes=ag;ul.displayName="@mantine/core/Button";ul.Group=tM;ul.GroupSection=nM;const P7e={multiple:!1},vee=g.forwardRef((t,e)=>{const{onChange:n,children:r,multiple:o,accept:s,name:i,form:a,resetRef:l,disabled:c,capture:u,inputProps:f,...h}=rt("FileButton",P7e,t),p=g.useRef(null),m=()=>{var b;!c&&((b=p.current)==null||b.click())},y=b=>{n(o?Array.from(b.currentTarget.files):b.currentTarget.files[0]||null)};return Q_(l,()=>{p.current&&(p.current.value="")}),d.jsxs(d.Fragment,{children:[r({onClick:m,...h}),d.jsx("input",{style:{display:"none"},type:"file",accept:s,multiple:o,onChange:y,ref:Mc(e,p),name:i,form:a,capture:u,...f})]})});vee.displayName="@mantine/core/FileButton";const M7e=({value:t})=>d.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Array.isArray(t)?t.map(e=>e.name).join(", "):t==null?void 0:t.name}),D7e={valueComponent:M7e},rM=an((t,e)=>{const n=rt("FileInput",D7e,t),{unstyled:r,vars:o,onChange:s,value:i,defaultValue:a,multiple:l,accept:c,name:u,form:f,valueComponent:h,clearable:p,clearButtonProps:m,readOnly:y,capture:x,fileInputProps:b,rightSection:C,size:E,placeholder:R,component:D,resetRef:O,classNames:T,styles:I,...P}=n,L=g.useRef(null),{resolvedClassNames:$,resolvedStyles:F}=_2({classNames:T,styles:I,props:n}),[V,be]=b2({value:i,defaultValue:a,onChange:s,finalValue:l?[]:null}),ge=Array.isArray(V)?V.length!==0:V!==null,le=C||(p&&ge&&!y?d.jsx(E2,{...m,variant:"subtle",onClick:()=>be(l?[]:null),size:E,unstyled:r}):null);g.useEffect(()=>{var H;(Array.isArray(V)&&V.length===0||V===null)&&((H=L.current)==null||H.call(L))},[V]);const Q=h;return d.jsx(vee,{onChange:be,multiple:l,accept:c,name:u,form:f,resetRef:Mc(L,O),disabled:y,capture:x,inputProps:b,children:H=>d.jsx(ig,{component:D||"button",ref:e,rightSection:le,...H,...P,__staticSelector:"FileInput",multiline:!0,type:"button",pointer:!0,__stylesApiProps:n,unstyled:r,size:E,classNames:T,styles:I,children:ge?d.jsx(Q,{value:V}):d.jsx(Os.Placeholder,{__staticSelector:"FileInput",classNames:$,styles:F,children:R})})})});rM.classes=ig.classes;rM.displayName="@mantine/core/FileInput";const O7e=rM;function L7e({open:t,close:e,openDelay:n,closeDelay:r}){const o=g.useRef(-1),s=g.useRef(-1),i=()=>{window.clearTimeout(o.current),window.clearTimeout(s.current)},a=()=>{i(),n===0||n===void 0?t():o.current=window.setTimeout(t,n)},l=()=>{i(),r===0||r===void 0?e():s.current=window.setTimeout(e,r)};return g.useEffect(()=>i,[]),{openDropdown:a,closeDropdown:l}}var wee={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const i7={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:dw("overlay")},j7e=(t,{zIndex:e})=>({root:{"--lo-z-index":e==null?void 0:e.toString()}}),oM=an((t,e)=>{const n=rt("LoadingOverlay",i7,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,transitionProps:c,loaderProps:u,overlayProps:f,visible:h,zIndex:p,...m}=n,y=Ci(),x=hn({name:"LoadingOverlay",classes:wee,props:n,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:j7e}),b={...i7.overlayProps,...f};return d.jsx(lh,{transition:"fade",...c,mounted:!!h,children:C=>d.jsxs(Et,{...x("root",{style:C}),ref:e,...m,children:[d.jsx(yd,{...x("loader"),unstyled:a,...u}),d.jsx(iv,{...b,...x("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||y.white}),d.jsx(iv,{...b,...x("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||y.colors.dark[5]})]})})});oM.classes=wee;oM.displayName="@mantine/core/LoadingOverlay";const[V7e,mw]=j5("Menu component was not found in the tree");var lg={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const $7e={},sM=an((t,e)=>{const{classNames:n,className:r,style:o,styles:s,vars:i,...a}=rt("MenuDivider",$7e,t),l=mw();return d.jsx(Et,{ref:e,...l.getStyles("divider",{className:r,style:o,styles:s,classNames:n}),...a})});sM.classes=lg;sM.displayName="@mantine/core/MenuDivider";const B7e={},iM=an((t,e)=>{const{classNames:n,className:r,style:o,styles:s,vars:i,onMouseEnter:a,onMouseLeave:l,onKeyDown:c,children:u,...f}=rt("MenuDropdown",B7e,t),h=g.useRef(null),p=mw(),m=Ba(c,b=>{var C,E;(b.key==="ArrowUp"||b.key==="ArrowDown")&&(b.preventDefault(),(E=(C=h.current)==null?void 0:C.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||E.focus())}),y=Ba(a,()=>(p.trigger==="hover"||p.trigger==="click-hover")&&p.openDropdown()),x=Ba(l,()=>(p.trigger==="hover"||p.trigger==="click-hover")&&p.closeDropdown());return d.jsxs(gd.Dropdown,{...f,onMouseEnter:y,onMouseLeave:x,role:"menu","aria-orientation":"vertical",ref:Mc(e,h),...p.getStyles("dropdown",{className:r,style:o,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:m,children:[p.withInitialFocusPlaceholder&&d.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),u]})});iM.classes=lg;iM.displayName="@mantine/core/MenuDropdown";const F7e={},aM=cl((t,e)=>{const{classNames:n,className:r,style:o,styles:s,vars:i,color:a,closeMenuOnClick:l,leftSection:c,rightSection:u,children:f,disabled:h,"data-disabled":p,...m}=rt("MenuItem",F7e,t),y=mw(),x=Ci(),{dir:b}=hw(),C=g.useRef(null),E=y.getItemIndex(C.current),R=m,D=Ba(R.onMouseLeave,()=>y.setHovered(-1)),O=Ba(R.onMouseEnter,()=>y.setHovered(y.getItemIndex(C.current))),T=Ba(R.onClick,()=>{p||(typeof l=="boolean"?l&&y.closeDropdownImmediately():y.closeOnItemClick&&y.closeDropdownImmediately())}),I=Ba(R.onFocus,()=>y.setHovered(y.getItemIndex(C.current))),P=a?x.variantColorResolver({color:a,theme:x,variant:"light"}):void 0,L=a?rg({color:a,theme:x}):null;return d.jsxs(ah,{...m,unstyled:y.unstyled,tabIndex:y.menuItemTabIndex,onFocus:I,...y.getStyles("item",{className:r,style:o,styles:s,classNames:n}),ref:Mc(C,e),role:"menuitem",disabled:h,"data-menu-item":!0,"data-disabled":h||p||void 0,"data-hovered":y.hovered===E?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:O,onMouseLeave:D,onClick:T,onKeyDown:LZ({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:y.loop,dir:b,orientation:"vertical",onKeyDown:R.onKeyDown}),__vars:{"--menu-item-color":L!=null&&L.isThemeColor&&(L==null?void 0:L.shade)===void 0?`var(--mantine-color-${L.color}-6)`:P==null?void 0:P.color,"--menu-item-hover":P==null?void 0:P.hover},children:[c&&d.jsx("div",{...y.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:c}),f&&d.jsx("div",{...y.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),u&&d.jsx("div",{...y.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:u})]})});aM.classes=lg;aM.displayName="@mantine/core/MenuItem";const U7e={},lM=an((t,e)=>{const{classNames:n,className:r,style:o,styles:s,vars:i,...a}=rt("MenuLabel",U7e,t),l=mw();return d.jsx(Et,{ref:e,...l.getStyles("label",{className:r,style:o,styles:s,classNames:n}),...a})});lM.classes=lg;lM.displayName="@mantine/core/MenuLabel";const H7e={refProp:"ref"},bee=g.forwardRef((t,e)=>{const{children:n,refProp:r,...o}=rt("MenuTarget",H7e,t);if(!uw(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=mw(),i=n.props,a=Ba(i.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),l=Ba(i.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),c=Ba(i.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return d.jsx(gd.Target,{refProp:r,popupType:"menu",ref:e,...o,children:g.cloneElement(n,{onClick:a,onMouseEnter:l,onMouseLeave:c,"data-expanded":s.opened?!0:void 0})})});bee.displayName="@mantine/core/MenuTarget";const z7e={trapFocus:!0,closeOnItemClick:!0,withInitialFocusPlaceholder:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function ur(t){const e=rt("Menu",z7e,t),{children:n,onOpen:r,onClose:o,opened:s,defaultOpened:i,trapFocus:a,onChange:l,closeOnItemClick:c,loop:u,closeOnEscape:f,trigger:h,openDelay:p,closeDelay:m,classNames:y,styles:x,unstyled:b,variant:C,vars:E,menuItemTabIndex:R,keepMounted:D,withInitialFocusPlaceholder:O,...T}=e,I=hn({name:"Menu",classes:lg,props:e,classNames:y,styles:x,unstyled:b}),[P,{setHovered:L,resetHovered:$}]=n6e(),[F,V]=b2({value:s,defaultValue:i,finalValue:!1,onChange:l}),[be,ge]=g.useState(!1),le=()=>{V(!1),ge(!1),F&&(o==null||o())},Q=()=>{V(!0),!F&&(r==null||r())},H=()=>{F?le():Q()},{openDropdown:Y,closeDropdown:ue}=L7e({open:Q,close:le,closeDelay:m,openDelay:p}),W=ye=>t6e("[data-menu-item]","[data-menu-dropdown]",ye),{resolvedClassNames:G,resolvedStyles:ie}=_2({classNames:y,styles:x,props:e});return td(()=>{$()},[F]),d.jsx(V7e,{value:{getStyles:I,opened:F,toggleDropdown:H,getItemIndex:W,hovered:P,setHovered:L,openedViaClick:be,setOpenedViaClick:ge,closeOnItemClick:c,closeDropdown:h==="click"?le:ue,openDropdown:h==="click"?Q:Y,closeDropdownImmediately:le,loop:u,trigger:h,unstyled:b,menuItemTabIndex:R,withInitialFocusPlaceholder:O},children:d.jsx(gd,{...T,opened:F,onChange:H,defaultOpened:i,trapFocus:D?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:G,styles:ie,unstyled:b,variant:C,keepMounted:D,children:n})})}ur.extend=t=>t;ur.classes=lg;ur.displayName="@mantine/core/Menu";ur.Item=aM;ur.Label=lM;ur.Dropdown=iM;ur.Target=bee;ur.Divider=sM;const W7e={duration:100,transition:"fade"};function G7e(t,e){return{...W7e,...e,...t}}function q7e({offset:t,position:e,defaultOpened:n}){const[r,o]=g.useState(n),s=g.useRef(null),{x:i,y:a,elements:l,refs:c,update:u,placement:f}=tg({placement:e,middleware:[Um({crossAxis:!0,padding:5,rootBoundary:"document"})]}),h=f.includes("right")?t:e.includes("left")?t*-1:0,p=f.includes("bottom")?t:e.includes("top")?t*-1:0,m=g.useCallback(({clientX:y,clientY:x})=>{c.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:y,y:x,left:y+h,top:x+p,right:y,bottom:x}}})},[l.reference]);return g.useEffect(()=>{if(c.floating.current){const y=s.current;y.addEventListener("mousemove",m);const x=nc(c.floating.current);return x.forEach(b=>{b.addEventListener("scroll",u)}),()=>{y.removeEventListener("mousemove",m),x.forEach(b=>{b.removeEventListener("scroll",u)})}}},[l.reference,c.floating.current,u,m,r]),{handleMouseMove:m,x:i,y:a,opened:r,setOpened:o,boundaryRef:s,floating:c.setFloating}}var I2={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const K7e={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:dw("popover")},Y7e=(t,{radius:e,color:n})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:_i(e),"--tooltip-bg":n?Ec(n,t):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),cM=an((t,e)=>{const n=rt("TooltipFloating",K7e,t),{children:r,refProp:o,withinPortal:s,style:i,className:a,classNames:l,styles:c,unstyled:u,radius:f,color:h,label:p,offset:m,position:y,multiline:x,zIndex:b,disabled:C,defaultOpened:E,variant:R,vars:D,portalProps:O,...T}=n,I=Ci(),P=hn({name:"TooltipFloating",props:n,classes:I2,className:a,style:i,classNames:l,styles:c,unstyled:u,rootSelector:"tooltip",vars:D,varsResolver:Y7e}),{handleMouseMove:L,x:$,y:F,opened:V,boundaryRef:be,floating:ge,setOpened:le}=q7e({offset:m,position:y,defaultOpened:E});if(!uw(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const Q=Mc(be,$5(r),e),H=r.props,Y=W=>{var G;(G=H.onMouseEnter)==null||G.call(H,W),L(W),le(!0)},ue=W=>{var G;(G=H.onMouseLeave)==null||G.call(H,W),le(!1)};return d.jsxs(d.Fragment,{children:[d.jsx(pw,{...O,withinPortal:s,children:d.jsx(Et,{...T,...P("tooltip",{style:{...qZ(i,I),zIndex:b,display:!C&&V?"block":"none",top:(F&&Math.round(F))??"",left:($&&Math.round($))??""}}),variant:R,ref:ge,mod:{multiline:x},children:p})}),g.cloneElement(r,{...H,[o]:Q,onMouseEnter:Y,onMouseLeave:ue})]})});cM.classes=I2;cM.displayName="@mantine/core/TooltipFloating";const xee=g.createContext(!1),Q7e=xee.Provider,X7e=()=>g.useContext(xee),J7e={openDelay:0,closeDelay:0};function uM(t){const{openDelay:e,closeDelay:n,children:r}=rt("TooltipGroup",J7e,t);return d.jsx(Q7e,{value:!0,children:d.jsx(iOe,{delay:{open:e,close:n},children:r})})}uM.displayName="@mantine/core/TooltipGroup";uM.extend=t=>t;function Z7e(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function eVe(t){const e=Z7e(t.middlewares),n=[Tc(t.offset)];return e.shift&&n.push(Um(typeof e.shift=="boolean"?{padding:8}:{padding:8,...e.shift})),e.flip&&n.push(typeof e.flip=="boolean"?Ja():Ja(e.flip)),n.push(lP({element:t.arrowRef,padding:t.arrowOffset})),e.inline?n.push(typeof e.inline=="boolean"?Py():Py(e.inline)):t.inline&&n.push(Py()),n}function tVe(t){var O,T,I;const[e,n]=g.useState(t.defaultOpened),o=typeof t.opened=="boolean"?t.opened:e,s=X7e(),i=w2(),a=g.useCallback(P=>{n(P),P&&C(i)},[i]),{x:l,y:c,context:u,refs:f,update:h,placement:p,middlewareData:{arrow:{x:m,y}={}}}=tg({strategy:t.strategy,placement:t.position,open:o,onOpenChange:a,middleware:eVe(t)}),{delay:x,currentId:b,setCurrentId:C}=aOe(u,{id:i}),{getReferenceProps:E,getFloatingProps:R}=nZ([oOe(u,{enabled:(O=t.events)==null?void 0:O.hover,delay:s?x:{open:t.openDelay,close:t.closeDelay},mouseOnly:!((T=t.events)!=null&&T.touch)}),wOe(u,{enabled:(I=t.events)==null?void 0:I.focus,visibleOnly:!0}),xOe(u,{role:"tooltip"}),tZ(u,{enabled:typeof t.opened>"u"})]);iee({opened:o,position:t.position,positionDependencies:t.positionDependencies,floating:{refs:f,update:h}}),td(()=>{var P;(P=t.onPositionChange)==null||P.call(t,p)},[p]);const D=o&&b&&b!==i;return{x:l,y:c,arrowX:m,arrowY:y,reference:f.setReference,floating:f.setFloating,getFloatingProps:R,getReferenceProps:E,isGroupPhase:D,opened:o,placement:p}}const a7={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:dw("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},nVe=(t,{radius:e,color:n})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:_i(e),"--tooltip-bg":n?Ec(n,t):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),gw=an((t,e)=>{const n=rt("Tooltip",a7,t),{children:r,position:o,refProp:s,label:i,openDelay:a,closeDelay:l,onPositionChange:c,opened:u,defaultOpened:f,withinPortal:h,radius:p,color:m,classNames:y,styles:x,unstyled:b,style:C,className:E,withArrow:R,arrowSize:D,arrowOffset:O,arrowRadius:T,arrowPosition:I,offset:P,transitionProps:L,multiline:$,events:F,zIndex:V,disabled:be,positionDependencies:ge,onClick:le,onMouseEnter:Q,onMouseLeave:H,inline:Y,variant:ue,keepMounted:W,vars:G,portalProps:ie,mod:ye,floatingStrategy:he,middlewares:we,...ve}=rt("Tooltip",a7,n),{dir:Te}=hw(),xe=g.useRef(null),ae=tVe({position:eee(Te,o),closeDelay:l,openDelay:a,onPositionChange:c,opened:u,defaultOpened:f,events:F,arrowRef:xe,arrowOffset:O,offset:typeof P=="number"?P+(R?D/2:0):P,positionDependencies:[...ge,r],inline:Y,strategy:he,middlewares:we}),Ie=hn({name:"Tooltip",props:n,classes:I2,className:E,style:C,classNames:y,styles:x,unstyled:b,rootSelector:"tooltip",vars:G,varsResolver:nVe});if(!uw(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const Re=Mc(ae.reference,$5(r),e),at=G7e(L,{duration:100,transition:"fade"}),Nt=r.props;return d.jsxs(d.Fragment,{children:[d.jsx(pw,{...ie,withinPortal:h,children:d.jsx(lh,{...at,keepMounted:W,mounted:!be&&!!ae.opened,duration:ae.isGroupPhase?10:at.duration,children:Ft=>d.jsxs(Et,{...ve,"data-fixed":he==="fixed"||void 0,variant:ue,mod:[{multiline:$},ye],...ae.getFloatingProps({ref:ae.floating,className:Ie("tooltip").className,style:{...Ie("tooltip").style,...Ft,zIndex:V,top:ae.y??0,left:ae.x??0}}),children:[i,d.jsx(q5,{ref:xe,arrowX:ae.arrowX,arrowY:ae.arrowY,visible:R,position:ae.placement,arrowSize:D,arrowOffset:O,arrowRadius:T,arrowPosition:I,...Ie("arrow")})]})})}),g.cloneElement(r,ae.getReferenceProps({onClick:le,onMouseEnter:Q,onMouseLeave:H,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:Re,className:ca(E,Nt.className),...Nt}))]})});gw.classes=I2;gw.displayName="@mantine/core/Tooltip";gw.Floating=cM;gw.Group=uM;var _ee={root:"m_6d731127"};const rVe={gap:"md",align:"stretch",justify:"flex-start"},oVe=(t,{gap:e,align:n,justify:r})=>({root:{"--stack-gap":V5(e),"--stack-align":n,"--stack-justify":r}}),yw=an((t,e)=>{const n=rt("Stack",rVe,t),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:l,align:c,justify:u,gap:f,variant:h,...p}=n,m=hn({name:"Stack",props:n,classes:_ee,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:l,varsResolver:oVe});return d.jsx(Et,{ref:e,...m("root"),variant:h,...p})});yw.classes=_ee;yw.displayName="@mantine/core/Stack";const[sVe,dM]=j5("Tabs component was not found in the tree");var vw={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const iVe={},fM=an((t,e)=>{const n=rt("TabsList",iVe,t),{children:r,className:o,grow:s,justify:i,classNames:a,styles:l,style:c,mod:u,...f}=n,h=dM();return d.jsx(Et,{...f,...h.getStyles("list",{className:o,style:c,classNames:a,styles:l,props:n,variant:h.variant}),ref:e,role:"tablist",variant:h.variant,mod:[{grow:s,orientation:h.orientation,placement:h.orientation==="vertical"&&h.placement,inverted:h.inverted},u],"aria-orientation":h.orientation,__vars:{"--tabs-justify":i},children:r})});fM.classes=vw;fM.displayName="@mantine/core/TabsList";const aVe={},hM=an((t,e)=>{const n=rt("TabsPanel",aVe,t),{children:r,className:o,value:s,classNames:i,styles:a,style:l,mod:c,keepMounted:u,...f}=n,h=dM(),p=h.value===s,m=h.keepMounted||u||p?r:null;return d.jsx(Et,{...f,...h.getStyles("panel",{className:o,classNames:i,styles:a,style:[l,p?void 0:{display:"none"}],props:n}),ref:e,mod:[{orientation:h.orientation},c],role:"tabpanel",id:h.getPanelId(s),"aria-labelledby":h.getTabId(s),children:m})});hM.classes=vw;hM.displayName="@mantine/core/TabsPanel";const lVe={},pM=an((t,e)=>{const n=rt("TabsTab",lVe,t),{className:r,children:o,rightSection:s,leftSection:i,value:a,onClick:l,onKeyDown:c,disabled:u,color:f,style:h,classNames:p,styles:m,vars:y,mod:x,tabIndex:b,...C}=n,E=Ci(),{dir:R}=hw(),D=dM(),O=a===D.value,T=P=>{D.onChange(D.allowTabDeactivation&&a===D.value?null:a),l==null||l(P)},I={classNames:p,styles:m,props:n};return d.jsxs(ah,{...C,...D.getStyles("tab",{className:r,style:h,variant:D.variant,...I}),disabled:u,unstyled:D.unstyled,variant:D.variant,mod:[{active:O,disabled:u,orientation:D.orientation,inverted:D.inverted,placement:D.orientation==="vertical"&&D.placement},x],ref:e,role:"tab",id:D.getTabId(a),"aria-selected":O,tabIndex:b!==void 0?b:O||D.value===null?0:-1,"aria-controls":D.getPanelId(a),onClick:T,__vars:{"--tabs-color":f?Ec(f,E):void 0},onKeyDown:LZ({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:D.activateTabWithKeyboard,loop:D.loop,orientation:D.orientation||"horizontal",dir:R,onKeyDown:c}),children:[i&&d.jsx("span",{...D.getStyles("tabSection",I),"data-position":"left",children:i}),o&&d.jsx("span",{...D.getStyles("tabLabel",I),children:o}),s&&d.jsx("span",{...D.getStyles("tabSection",I),"data-position":"right",children:s})]})});pM.classes=vw;pM.displayName="@mantine/core/TabsTab";const l7="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",cVe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},uVe=(t,{radius:e,color:n,autoContrast:r})=>({root:{"--tabs-radius":_i(e),"--tabs-color":Ec(n,t),"--tabs-text-color":lje(r,t)?HZ({color:n,theme:t,autoContrast:r}):void 0}}),Jl=an((t,e)=>{const n=rt("Tabs",cVe,t),{defaultValue:r,value:o,onChange:s,orientation:i,children:a,loop:l,id:c,activateTabWithKeyboard:u,allowTabDeactivation:f,variant:h,color:p,radius:m,inverted:y,placement:x,keepMounted:b,classNames:C,styles:E,unstyled:R,className:D,style:O,vars:T,autoContrast:I,mod:P,...L}=n,$=w2(c),[F,V]=b2({value:o,defaultValue:r,finalValue:null,onChange:s}),be=hn({name:"Tabs",props:n,classes:vw,className:D,style:O,classNames:C,styles:E,unstyled:R,vars:T,varsResolver:uVe});return d.jsx(sVe,{value:{placement:x,value:F,orientation:i,id:$,loop:l,activateTabWithKeyboard:u,getTabId:Bj(`${$}-tab`,l7),getPanelId:Bj(`${$}-panel`,l7),onChange:V,allowTabDeactivation:f,variant:h,color:p,radius:m,inverted:y,keepMounted:b,unstyled:R,getStyles:be},children:d.jsx(Et,{ref:e,id:$,variant:h,mod:[{orientation:i,inverted:i==="horizontal"&&y,placement:i==="vertical"&&x},P],...be("root"),...L,children:a})})});Jl.classes=vw;Jl.displayName="@mantine/core/Tabs";Jl.Tab=pM;Jl.Panel=hM;Jl.List=fM;const dVe={},R2=an((t,e)=>{const n=rt("TextInput",dVe,t);return d.jsx(ig,{component:"input",ref:e,...n,__staticSelector:"TextInput"})});R2.classes=ig.classes;R2.displayName="@mantine/core/TextInput";const Cee=(t,e,n=!1)=>{const r=[];function o(s,i="--bn"){for(const a in s){const l=a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),c=`${i}-${l}`;typeof s[a]!="object"?(typeof s[a]=="number"&&(s[a]=`${s[a]}px`),n?e.style.removeProperty(c):e.style.setProperty(c,s[a].toString())):o(s[a],c)}}return o(t),r},c7=(t,e)=>Cee(t,e),fVe={colors:{editor:{text:void 0,background:void 0},menu:{text:void 0,background:void 0},tooltip:{text:void 0,background:void 0},hovered:{text:void 0,background:void 0},selected:{text:void 0,background:void 0},disabled:{text:void 0,background:void 0},shadow:void 0,border:void 0,sideMenu:void 0,highlights:{gray:{text:void 0,background:void 0},brown:{text:void 0,background:void 0},red:{text:void 0,background:void 0},orange:{text:void 0,background:void 0},yellow:{text:void 0,background:void 0},green:{text:void 0,background:void 0},blue:{text:void 0,background:void 0},purple:{text:void 0,background:void 0},pink:{text:void 0,background:void 0}}},borderRadius:void 0,fontFamily:void 0},hVe=t=>Cee(fVe,t,!0),pVe=g.forwardRef((t,e)=>{const{className:n,name:r,label:o,icon:s,value:i,autoFocus:a,placeholder:l,onKeyDown:c,onChange:u,onSubmit:f,...h}=t;return zt(h),d.jsx(R2,{size:"xs",className:n,ref:e,name:r,label:o,leftSection:s,value:i,autoFocus:a,"data-autofocus":a?"true":void 0,placeholder:l,onKeyDown:c,onChange:u,onSubmit:f})});var Eee={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},u7=dt.createContext&&dt.createContext(Eee),mVe=["attr","size","title"];function gVe(t,e){if(t==null)return{};var n=yVe(t,e),r,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)r=s[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yVe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function J_(){return J_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},J_.apply(this,arguments)}function d7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Z_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?d7(Object(n),!0).forEach(function(r){vVe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vVe(t,e,n){return e=wVe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wVe(t){var e=bVe(t,"string");return typeof e=="symbol"?e:e+""}function bVe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kee(t){return t&&t.map((e,n)=>dt.createElement(e.tag,Z_({key:n},e.attr),kee(e.child)))}function See(t){return e=>dt.createElement(xVe,J_({attr:Z_({},t.attr)},e),kee(t.child))}function xVe(t){var e=n=>{var{attr:r,size:o,title:s}=t,i=gVe(t,mVe),a=o||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),dt.createElement("svg",J_({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,i,{className:l,style:Z_(Z_({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&dt.createElement("title",null,s),t.children)};return u7!==void 0?dt.createElement(u7.Consumer,null,n=>e(n)):e(Eee)}function _Ve(t){return See({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(t)}function CVe(t){return See({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(t)}const Tee=g.createContext(void 0),EVe=g.forwardRef((t,e)=>{const{children:n,onOpenChange:r,position:o,sub:s,...i}=t;zt(i);const[a,l]=g.useState(!1),c=g.useRef(null),u=g.useRef(),f=g.useCallback(()=>{u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{l(!1)},250)},[]),h=g.useCallback(()=>{u.current&&clearTimeout(u.current),l(!0)},[]);return d.jsx(Tee.Provider,{value:{onMenuMouseOver:h,onMenuMouseLeave:f},children:d.jsx(ur.Item,{className:"bn-menu-item bn-mt-sub-menu-item",ref:fw(e,c),onMouseOver:h,onMouseLeave:f,children:d.jsx(ur,{portalProps:{target:c.current?c.current.parentElement:void 0},middlewares:{flip:!0,shift:!0,inline:!1,size:!0},trigger:"hover",opened:a,onClose:()=>r==null?void 0:r(!1),onOpen:()=>r==null?void 0:r(!0),position:o,children:n})})})}),kVe=t=>{const{children:e,onOpenChange:n,position:r,sub:o,...s}=t;return zt(s),o?d.jsx(EVe,{...t}):d.jsx(ur,{withinPortal:!1,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},onClose:()=>n==null?void 0:n(!1),onOpen:()=>n==null?void 0:n(!0),position:r,children:e})},SVe=g.forwardRef((t,e)=>{const{className:n,children:r,icon:o,checked:s,subTrigger:i,onClick:a,...l}=t;return zt(l,!1),i?d.jsxs("div",{onClick:c=>{c.preventDefault(),c.stopPropagation()},ref:e,...l,children:[r,d.jsx(CVe,{size:15})]}):d.jsx(ur.Item,{className:n,ref:e,leftSection:o,rightSection:s?d.jsx(gee,{size:10}):s===!1?d.jsx("div",{className:"bn-tick-space"}):null,onClick:a,...l,children:r})}),TVe=t=>{const{children:e,sub:n,...r}=t;return zt(r),d.jsx(ur.Target,{children:e})},NVe=g.forwardRef((t,e)=>{const{className:n,children:r,sub:o,...s}=t;zt(s);const i=g.useContext(Tee);return d.jsx(ur.Dropdown,{className:n,ref:e,onMouseOver:i==null?void 0:i.onMenuMouseOver,onMouseLeave:i==null?void 0:i.onMenuMouseLeave,children:r})}),IVe=g.forwardRef((t,e)=>{const{className:n,...r}=t;return zt(r),d.jsx(ur.Divider,{className:n,ref:e})}),RVe=g.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return zt(o),d.jsx(ur.Label,{className:n,ref:e,children:r})}),AVe=g.forwardRef((t,e)=>{const{className:n,tabs:r,defaultOpenTab:o,openTab:s,setOpenTab:i,loading:a,...l}=t;return zt(l),d.jsx(Ts,{className:n,ref:e,children:d.jsxs(Jl,{value:s,defaultValue:o,onChange:i,children:[a&&d.jsx(oM,{visible:a}),d.jsx(Jl.List,{children:r.map(c=>d.jsx(Jl.Tab,{"data-test":`${c.name.toLowerCase()}-tab`,value:c.name,children:c.name},c.name))}),r.map(c=>d.jsx(Jl.Panel,{value:c.name,children:c.tabPanel},c.name))]})})}),PVe=g.forwardRef((t,e)=>{const{className:n,children:r,onClick:o,label:s,...i}=t;return zt(i),d.jsx(ul,{size:"xs","aria-label":s,className:n,ref:e,onClick:o,...i,children:r})}),MVe=g.forwardRef((t,e)=>{const{className:n,accept:r,value:o,placeholder:s,onChange:i,...a}=t;return zt(a),d.jsx(O7e,{size:"xs",className:n,ref:e,accept:r,value:o,placeholder:s,onChange:i,...a})}),DVe=g.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return zt(o),d.jsx("div",{className:n,ref:e,children:r})}),OVe=g.forwardRef((t,e)=>{const{className:n,value:r,placeholder:o,onKeyDown:s,onChange:i,...a}=t;return zt(a),d.jsx(R2,{size:"xs","data-test":"embed-input",className:n,ref:e,value:r,placeholder:o,onKeyDown:s,onChange:i})}),LVe=t=>{const{children:e,opened:n,position:r,...o}=t;return zt(o),d.jsx(gd,{withinPortal:!1,opened:n,position:r,children:e})},jVe=t=>{const{children:e,...n}=t;return zt(n),d.jsx(Y5,{children:e})},VVe=g.forwardRef((t,e)=>{const{className:n,children:r,variant:o,...s}=t;return zt(s),d.jsx(C2,{className:n,ref:e,children:r})}),$Ve=g.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return zt(o,!1),d.jsx(Ts,{align:"center",gap:0,className:n,ref:e,...o,children:r})}),BVe=g.forwardRef((t,e)=>{const{className:n,children:r,icon:o,onClick:s,onDragEnd:i,onDragStart:a,draggable:l,label:c,...u}=t;return zt(u,!1),o?d.jsx(sg,{size:24,className:n,ref:e,onClick:s,onDragEnd:i,onDragStart:a,draggable:l,"aria-label":c,...u,children:o}):d.jsx(ul,{className:n,ref:e,onClick:s,onDragEnd:i,onDragStart:a,draggable:l,"aria-label":c,...u,children:r})}),FVe=g.forwardRef((t,e)=>{const{className:n,children:r,id:o,columns:s,...i}=t;return zt(i),d.jsx("div",{className:n,style:{gridTemplateColumns:`repeat(${s}, 1fr)`},ref:e,id:o,role:"grid",children:r})}),UVe=g.forwardRef((t,e)=>{const{className:n,children:r,columns:o,...s}=t;return zt(s),d.jsx(Ts,{className:n,style:{gridColumn:`1 / ${o+1}`},ref:e,children:d.jsx(Ts,{className:"bn-mt-suggestion-menu-item-title",children:r})})}),HVe=g.forwardRef((t,e)=>{const{className:n,isSelected:r,onClick:o,item:s,id:i,...a}=t;zt(a);const l=g.useRef(null);return g.useEffect(()=>{if(!l.current||!r)return;const c=PZ(l.current,document.querySelector(".bn-grid-suggestion-menu"));c==="top"?l.current.scrollIntoView(!0):c==="bottom"&&l.current.scrollIntoView(!1)},[r]),d.jsx("div",{className:n,ref:fw(e,l),id:i,role:"option",onClick:o,"aria-selected":r||void 0,children:s.icon})}),zVe=g.forwardRef((t,e)=>{const{className:n,children:r,columns:o,...s}=t;return zt(s),d.jsx(yd,{className:n,style:{gridColumn:`1 / ${o+1}`},type:"dots",ref:e})}),WVe=g.forwardRef((t,e)=>{const{className:n,children:r,id:o,...s}=t;return zt(s),d.jsx(yw,{gap:0,className:n,ref:e,id:o,role:"listbox",children:r})}),GVe=g.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return zt(o),d.jsx(Ts,{className:n,ref:e,children:d.jsx(Ts,{className:"bn-mt-suggestion-menu-item-title",children:r})})}),qVe=g.forwardRef((t,e)=>{const{className:n,isSelected:r,onClick:o,item:s,id:i,...a}=t;zt(a);const l=g.useRef(null);return g.useEffect(()=>{if(!l.current||!r)return;const c=PZ(l.current,document.querySelector(".bn-suggestion-menu"));c==="top"?l.current.scrollIntoView(!0):c==="bottom"&&l.current.scrollIntoView(!1)},[r]),d.jsxs(Ts,{gap:0,className:n,ref:fw(e,l),id:i,role:"option",onClick:o,"aria-selected":r||void 0,children:[s.icon&&d.jsx(Ts,{className:"bn-mt-suggestion-menu-item-section","data-position":"left",children:s.icon}),d.jsxs(yw,{gap:0,className:"bn-mt-suggestion-menu-item-body",children:[d.jsx(Em,{className:"bn-mt-suggestion-menu-item-title",children:s.title}),d.jsx(Em,{className:"bn-mt-suggestion-menu-item-subtitle",children:s.subtext})]}),s.badge&&d.jsx(Ts,{"data-position":"right",className:"bn-mt-suggestion-menu-item-section",children:d.jsx(eM,{size:"xs",children:s.badge})})]})}),KVe=g.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return zt(o),d.jsx(Ts,{className:n,ref:e,children:r})}),YVe=g.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return zt(o),d.jsx(yd,{className:n,type:"dots",ref:e})}),QVe=g.forwardRef((t,e)=>{const{children:n,className:r,onMouseDown:o,onClick:s,...i}=t;return zt(i,!1),d.jsx(ul,{className:r,ref:e,onMouseDown:o,onClick:s,...i,children:n})}),XVe=g.forwardRef((t,e)=>{const{className:n,children:r,draggable:o,onDragStart:s,onDragEnd:i,style:a,label:l,...c}=t;return zt(c,!1),d.jsx(ul,{className:n,ref:e,"aria-label":l,draggable:o,onDragStart:s,onDragEnd:i,style:a,...c,children:r})}),f7=g.forwardRef((t,e)=>{const{className:n,children:r,onMouseEnter:o,onMouseLeave:s,...i}=t;zt(i);const{ref:a,focused:l}=v6e(),c=BZ(l),u=fw(e,a,c);return d.jsx(Ts,{className:n,ref:u,role:"toolbar",onMouseEnter:o,onMouseLeave:s,children:r})}),JVe=t=>d.jsxs(yw,{gap:0,className:"bn-tooltip",children:[d.jsx(Em,{size:"sm",children:t.mainTooltip}),t.secondaryTooltip&&d.jsx(Em,{size:"xs",children:t.secondaryTooltip})]}),h7=g.forwardRef((t,e)=>{const{className:n,children:r,mainTooltip:o,secondaryTooltip:s,icon:i,isSelected:a,isDisabled:l,onClick:c,label:u,...f}=t;return zt(f,!1),d.jsx(gw,{withinPortal:!1,label:d.jsx(JVe,{mainTooltip:o,secondaryTooltip:s}),children:r?d.jsx(ul,{"aria-label":u,className:n,onMouseDown:h=>{IR()&&h.currentTarget.focus()},onClick:c,"aria-pressed":a,"data-selected":a||void 0,"data-test":o.slice(0,1).toLowerCase()+o.replace(/\s+/g,"").slice(1),size:"xs",disabled:l||!1,ref:e,...f,children:r}):d.jsx(sg,{className:n,"aria-label":u,onMouseDown:h=>{IR()&&h.currentTarget.focus()},onClick:c,"aria-pressed":a,"data-selected":a||void 0,"data-test":o.slice(0,1).toLowerCase()+o.replace(/\s+/g,"").slice(1),size:30,disabled:l||!1,ref:e,...f,children:i})})}),ZVe=g.forwardRef((t,e)=>{const{className:n,items:r,isDisabled:o,...s}=t;zt(s);const i=r.filter(a=>a.isSelected)[0];return i?d.jsxs(ur,{withinPortal:!1,transitionProps:{exitDuration:0},disabled:o,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},children:[d.jsx(ur.Target,{children:d.jsx(ul,{onMouseDown:a=>{IR()&&a.currentTarget.focus()},leftSection:i.icon,rightSection:d.jsx(_Ve,{}),size:"xs",variant:"subtle",disabled:o,children:i.text})}),d.jsx(ur.Dropdown,{className:n,ref:e,children:r.map(a=>d.jsx(ur.Item,{onClick:a.onClick,leftSection:a.icon,rightSection:a.isSelected?d.jsx(gee,{size:10,className:"bn-tick-icon"}):d.jsx("div",{className:"bn-tick-space"}),disabled:a.isDisabled,children:a.text},a.text))})]}):null}),e$e={FormattingToolbar:{Root:f7,Button:h7,Select:ZVe},FilePanel:{Root:AVe,Button:PVe,FileInput:MVe,TabPanel:DVe,TextInput:OVe},GridSuggestionMenu:{Root:FVe,Item:HVe,EmptyItem:UVe,Loader:zVe},LinkToolbar:{Root:f7,Button:h7},SideMenu:{Root:$Ve,Button:BVe},SuggestionMenu:{Root:WVe,Item:qVe,EmptyItem:GVe,Label:KVe,Loader:YVe},TableHandle:{Root:XVe,ExtendButton:QVe},Generic:{Form:{Root:t=>d.jsx("div",{children:t.children}),TextInput:pVe},Menu:{Root:kVe,Trigger:TVe,Dropdown:NVe,Divider:IVe,Label:RVe,Item:SVe},Popover:{Root:LVe,Trigger:jVe,Content:VVe}}},t$e={activeClassName:""},n$e=t=>{const{className:e,theme:n,...r}=t,o=Pc(),s=NZ(),i=(o==null?void 0:o.colorSchemePreference)||s,a=g.useCallback(l=>{if(l&&(hVe(l),typeof n=="object")){if("light"in n&&"dark"in n){c7(n[i==="dark"?"dark":"light"],l);return}c7(n,l);return}},[i,n]);return d.jsx(lZ.Provider,{value:e$e,children:d.jsx(GZ,{theme:t$e,cssVariablesSelector:".bn-mantine",getRootElement:()=>{},children:d.jsx(TLe,{className:Ds("bn-mantine",e||""),theme:typeof n=="object"?void 0:n,...r,ref:a})})})};function r$e(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Nee=r$e,o$e=typeof ep=="object"&&ep&&ep.Object===Object&&ep,s$e=o$e,i$e=s$e,a$e=typeof self=="object"&&self&&self.Object===Object&&self,l$e=i$e||a$e||Function("return this")(),Iee=l$e,c$e=Iee,u$e=function(){return c$e.Date.now()},d$e=u$e,f$e=/\s/;function h$e(t){for(var e=t.length;e--&&f$e.test(t.charAt(e)););return e}var p$e=h$e,m$e=p$e,g$e=/^\s+/;function y$e(t){return t&&t.slice(0,m$e(t)+1).replace(g$e,"")}var v$e=y$e,w$e=Iee,b$e=w$e.Symbol,Ree=b$e,p7=Ree,Aee=Object.prototype,x$e=Aee.hasOwnProperty,_$e=Aee.toString,Xg=p7?p7.toStringTag:void 0;function C$e(t){var e=x$e.call(t,Xg),n=t[Xg];try{t[Xg]=void 0;var r=!0}catch{}var o=_$e.call(t);return r&&(e?t[Xg]=n:delete t[Xg]),o}var E$e=C$e,k$e=Object.prototype,S$e=k$e.toString;function T$e(t){return S$e.call(t)}var N$e=T$e,m7=Ree,I$e=E$e,R$e=N$e,A$e="[object Null]",P$e="[object Undefined]",g7=m7?m7.toStringTag:void 0;function M$e(t){return t==null?t===void 0?P$e:A$e:g7&&g7 in Object(t)?I$e(t):R$e(t)}var D$e=M$e;function O$e(t){return t!=null&&typeof t=="object"}var L$e=O$e,j$e=D$e,V$e=L$e,$$e="[object Symbol]";function B$e(t){return typeof t=="symbol"||V$e(t)&&j$e(t)==$$e}var F$e=B$e,U$e=v$e,y7=Nee,H$e=F$e,v7=NaN,z$e=/^[-+]0x[0-9a-f]+$/i,W$e=/^0b[01]+$/i,G$e=/^0o[0-7]+$/i,q$e=parseInt;function K$e(t){if(typeof t=="number")return t;if(H$e(t))return v7;if(y7(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=y7(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=U$e(t);var n=W$e.test(t);return n||G$e.test(t)?q$e(t.slice(2),n?2:8):z$e.test(t)?v7:+t}var Y$e=K$e,Q$e=Nee,wT=d$e,w7=Y$e,X$e="Expected a function",J$e=Math.max,Z$e=Math.min;function eBe(t,e,n){var r,o,s,i,a,l,c=0,u=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(X$e);e=w7(e)||0,Q$e(n)&&(u=!!n.leading,f="maxWait"in n,s=f?J$e(w7(n.maxWait)||0,e):s,h="trailing"in n?!!n.trailing:h);function p(O){var T=r,I=o;return r=o=void 0,c=O,i=t.apply(I,T),i}function m(O){return c=O,a=setTimeout(b,e),u?p(O):i}function y(O){var T=O-l,I=O-c,P=e-T;return f?Z$e(P,s-I):P}function x(O){var T=O-l,I=O-c;return l===void 0||T>=e||T<0||f&&I>=s}function b(){var O=wT();if(x(O))return C(O);a=setTimeout(b,y(O))}function C(O){return a=void 0,h&&r?p(O):(r=o=void 0,i)}function E(){a!==void 0&&clearTimeout(a),c=0,r=l=o=a=void 0}function R(){return a===void 0?i:C(wT())}function D(){var O=wT(),T=x(O);if(r=arguments,o=this,l=O,T){if(a===void 0)return m(l);if(f)return clearTimeout(a),a=setTimeout(b,e),p(l)}return a===void 0&&(a=setTimeout(b,e)),i}return D.cancel=E,D.flush=R,D}var tBe=eBe;const Pee=tC(tBe);function Mee({content:t,onChange:e,onSave:n,editorRef:r}){const[o,s]=g.useState(document.documentElement.classList.contains("dark")),i=HLe({initialContent:g.useMemo(()=>t?JSON.parse(t):[{type:"paragraph",content:[]}],[t])});g.useEffect(()=>{r&&(r.current=i)},[i,r]);const a=g.useCallback(Pee(l=>{try{const c=l.document;e(c),n==null||n()}catch(c){console.error("Error saving editor content:",c)}},500),[e,n]);return g.useEffect(()=>{s(document.documentElement.classList.contains("dark"));const l=new MutationObserver(c=>{c.forEach(u=>{u.attributeName==="class"&&s(document.documentElement.classList.contains("dark"))})});return l.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>l.disconnect()},[]),g.useEffect(()=>{s(document.documentElement.classList.contains("dark"))},[]),d.jsx("div",{className:"flex flex-col flex-1 h-full w-full bg-background overflow-hidden",children:d.jsx(n$e,{editor:i,theme:o?"dark":"light",onChange:()=>a(i),className:`flex-1 h-full bg-background overflow-y-auto mobile-editor relative
    [&_.ProseMirror]:text-xl
    [&_.ProseMirror]:sm:text-2xl
    [&_.ProseMirror]:font-['Monaspace_Neon']
    `})})}const Dee={blank:{title:"Blank Note",description:"Start with a clean slate",icon:"📝",content:[{id:"blank",type:"paragraph",content:[]}]},meeting:{title:"Meeting Notes",description:"Template for meeting minutes and action items",icon:"👥",content:[{id:"meeting-1",type:"heading",content:[{type:"text",text:"Meeting Summary",styles:{bold:!0}}],props:{level:1}},{id:"meeting-2",type:"paragraph",content:[{type:"text",text:"Date: ",styles:{italic:!0}}]},{id:"meeting-3",type:"paragraph",content:[{type:"text",text:"Duration: ",styles:{italic:!0}}]},{id:"meeting-4",type:"heading",content:[{type:"text",text:"Attendees",styles:{bold:!0}}],props:{level:2}},{id:"meeting-5",type:"bulletListItem",content:[{type:"text",text:"",styles:{}}]},{id:"meeting-6",type:"heading",content:[{type:"text",text:"Key Discussion Points",styles:{bold:!0}}],props:{level:2}},{id:"meeting-7",type:"bulletListItem",content:[{type:"text",text:"",styles:{}}]},{id:"meeting-8",type:"heading",content:[{type:"text",text:"Decisions Made",styles:{bold:!0,backgroundColor:"yellow"}}],props:{level:2}},{id:"meeting-9",type:"bulletListItem",content:[{type:"text",text:"",styles:{}}]},{id:"meeting-10",type:"heading",content:[{type:"text",text:"Action Items",styles:{bold:!0,textColor:"red"}}],props:{level:2}},{id:"meeting-11",type:"checkListItem",content:[{type:"text",text:"",styles:{}}],props:{checked:!1}}]},daily:{title:"Daily Journal",description:"Template for daily reflections and tasks",icon:"📅",content:[{id:"daily-1",type:"heading",content:[{type:"text",text:"Daily Journal",styles:{bold:!0}}],props:{level:1}},{id:"daily-2",type:"paragraph",content:[{type:"text",text:"Date: ",styles:{italic:!0}}]},{id:"daily-3",type:"heading",content:[{type:"text",text:"Today's Goals",styles:{bold:!0}}],props:{level:2}},{id:"daily-4",type:"checkListItem",content:[{type:"text",text:"",styles:{}}],props:{checked:!1}},{id:"daily-5",type:"heading",content:[{type:"text",text:"Notes & Thoughts",styles:{bold:!0}}],props:{level:2}},{id:"daily-6",type:"paragraph",content:[]},{id:"daily-7",type:"heading",content:[{type:"text",text:"Tomorrow's Plan",styles:{bold:!0}}],props:{level:2}},{id:"daily-8",type:"bulletListItem",content:[{type:"text",text:"",styles:{}}]}]},project:{title:"Project Plan",description:"Structured template for project planning",icon:"📊",content:[{id:"project-1",type:"heading",content:[{type:"text",text:"Project Overview",styles:{bold:!0}}],props:{level:1}},{id:"project-2",type:"heading",content:[{type:"text",text:"Project Details",styles:{bold:!0}}],props:{level:2}},{id:"project-3",type:"paragraph",content:[{type:"text",text:"Project Name: ",styles:{bold:!0}},{type:"text",text:"",styles:{}}]},{id:"project-4",type:"paragraph",content:[{type:"text",text:"Start Date: ",styles:{bold:!0}},{type:"text",text:"",styles:{}}]},{id:"project-5",type:"paragraph",content:[{type:"text",text:"End Date: ",styles:{bold:!0}},{type:"text",text:"",styles:{}}]},{id:"project-6",type:"heading",content:[{type:"text",text:"Objectives",styles:{bold:!0}}],props:{level:2}},{id:"project-7",type:"bulletListItem",content:[{type:"text",text:"",styles:{}}]},{id:"project-8",type:"heading",content:[{type:"text",text:"Timeline & Milestones",styles:{bold:!0}}],props:{level:2}},{id:"project-9",type:"checkListItem",content:[{type:"text",text:"",styles:{}}],props:{checked:!1}}]},class:{title:"Class Notes",description:"Template for taking notes during class",icon:"📚",content:[{id:"class-1",type:"heading",content:[{type:"text",text:"Class Notes",styles:{bold:!0}}],props:{level:1}},{id:"class-2",type:"paragraph",content:[{type:"text",text:"Course: ",styles:{bold:!0}},{type:"text",text:"",styles:{}}]},{id:"class-3",type:"paragraph",content:[{type:"text",text:"Date: ",styles:{bold:!0}},{type:"text",text:"",styles:{}}]},{id:"class-4",type:"heading",content:[{type:"text",text:"Topics Covered",styles:{bold:!0}}],props:{level:2}},{id:"class-5",type:"bulletListItem",content:[{type:"text",text:"",styles:{}}]},{id:"class-6",type:"heading",content:[{type:"text",text:"Key Points",styles:{bold:!0}}],props:{level:2}},{id:"class-7",type:"bulletListItem",content:[{type:"text",text:"",styles:{}}]},{id:"class-8",type:"heading",content:[{type:"text",text:"Questions",styles:{bold:!0}}],props:{level:2}},{id:"class-9",type:"bulletListItem",content:[{type:"text",text:"",styles:{}}]}]},todo:{title:"Todo List",description:"Simple checklist for tasks and todos",icon:"✅",content:[{id:"todo-1",type:"heading",content:[{type:"text",text:"Todo List",styles:{bold:!0}}],props:{level:1}},{id:"todo-2",type:"heading",content:[{type:"text",text:"High Priority",styles:{bold:!0,textColor:"red"}}],props:{level:2}},{id:"todo-3",type:"checkListItem",content:[{type:"text",text:"",styles:{}}],props:{checked:!1}},{id:"todo-4",type:"heading",content:[{type:"text",text:"Medium Priority",styles:{bold:!0,textColor:"orange"}}],props:{level:2}},{id:"todo-5",type:"checkListItem",content:[{type:"text",text:"",styles:{}}],props:{checked:!1}},{id:"todo-6",type:"heading",content:[{type:"text",text:"Low Priority",styles:{bold:!0,textColor:"green"}}],props:{level:2}},{id:"todo-7",type:"checkListItem",content:[{type:"text",text:"",styles:{}}],props:{checked:!1}}]},codeSnippet:{title:"Code Documentation",description:"Template for code documentation with syntax highlighting",icon:"💻",content:[{id:"code-1",type:"heading",content:[{type:"text",text:"Code Documentation",styles:{bold:!0}}],props:{level:1}},{id:"code-2",type:"paragraph",content:[{type:"text",text:"Description:",styles:{bold:!0}}]},{id:"code-3",type:"paragraph",content:[{type:"text",text:"",styles:{}}]},{id:"code-4",type:"heading",content:[{type:"text",text:"Implementation",styles:{bold:!0}}],props:{level:2}},{id:"code-5",type:"codeBlock",content:[{type:"text",text:"// Add your code here",styles:{}}],props:{language:"typescript"}},{id:"code-6",type:"heading",content:[{type:"text",text:"Usage Example",styles:{bold:!0}}],props:{level:2}},{id:"code-7",type:"codeBlock",content:[{type:"text",text:"// Usage example",styles:{}}],props:{language:"typescript"}}]},research:{title:"Research Notes",description:"Template for research and study notes",icon:"🔍",content:[{id:"research-1",type:"heading",content:[{type:"text",text:"Research Topic",styles:{bold:!0}}],props:{level:1}},{id:"research-2",type:"heading",content:[{type:"text",text:"Key Concepts",styles:{bold:!0}}],props:{level:2}},{id:"research-3",type:"bulletListItem",content:[{type:"text",text:"",styles:{}}]},{id:"research-4",type:"heading",content:[{type:"text",text:"Summary",styles:{bold:!0}}],props:{level:2}},{id:"research-5",type:"paragraph",content:[{type:"text",text:"",styles:{}}]},{id:"research-6",type:"heading",content:[{type:"text",text:"References",styles:{bold:!0}}],props:{level:2}},{id:"research-7",type:"numberedListItem",content:[{type:"text",text:"",styles:{}}]}]}};function b7({onSelectTemplate:t,children:e}){const[n,r]=g.useState(!1),o=s=>{t(s),r(!1)};return d.jsxs(Mu,{open:n,onOpenChange:r,children:[d.jsx(r3,{asChild:!0,children:e}),d.jsxs(rc,{className:"sm:max-w-[425px]",children:[d.jsxs(Du,{children:[d.jsx(Ou,{children:"Choose Template"}),d.jsx(Wv,{children:"Select a template to start with or create a blank note."})]}),d.jsx(Gm,{className:"h-[300px] pr-4",children:d.jsx("div",{className:"grid gap-4",children:Object.entries(Dee).map(([s,i])=>d.jsx(Ne,{variant:"outline",className:"w-full justify-start h-auto p-4",onClick:()=>o(i),children:d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsx("span",{className:"text-2xl",children:i.icon}),d.jsxs("div",{className:"text-left",children:[d.jsx("h3",{className:"font-semibold",children:i.title}),d.jsx("p",{className:"text-sm text-muted-foreground",children:i.description})]})]})},s))})})]})]})}function nBe(){const{user:t}=vi(),e=yi(),[n,r]=g.useState(()=>{const l=localStorage.getItem("draft-note");return l?JSON.parse(l):{title:"",content:JSON.stringify(Dee.blank.content),updatedAt:new Date,createdAt:new Date,ownerUserId:(t==null?void 0:t.uid)||"",ownerEmail:(t==null?void 0:t.email)||"",ownerDisplayName:(t==null?void 0:t.displayName)||"Unknown",ownerPhotoURL:(t==null?void 0:t.photoURL)||void 0,tags:[]}}),[o,s]=g.useState(!1);g.useEffect(()=>{localStorage.setItem("draft-note",JSON.stringify(n))},[n]),g.useEffect(()=>()=>{o||localStorage.removeItem("draft-note")},[o]);const i=l=>{console.log("Selected template:",l),r(c=>({...c,title:l.title||"Untitled",content:JSON.stringify(l.content)}))},a=g.useCallback(async()=>{if(t)try{s(!0);const l=await jn.createNote({...n,updatedAt:new Date});l&&(localStorage.removeItem("draft-note"),e(`/notes/${l}`))}catch(l){console.error("Error saving note:",l)}finally{s(!1)}},[n,t,e]);return d.jsxs("div",{className:"flex flex-col h-[calc(100vh-4rem)] overflow-hidden",children:[d.jsx("div",{className:"flex items-center justify-between p-4 border-b",children:d.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[d.jsx(Pn,{type:"text",value:n.title,onChange:l=>r({...n,title:l.target.value}),className:"text-lg font-semibold bg-transparent border-0 p-0 focus:outline-none min-w-0 flex-1",placeholder:"Untitled"}),d.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[d.jsx(b7,{onSelectTemplate:i,children:d.jsx(Ne,{variant:"outline",children:"Choose Template"})}),d.jsx(Ne,{onClick:a,disabled:o,children:o?"Saving...":"Save Note"})]}),d.jsxs("div",{className:"flex md:hidden items-center gap-2",children:[d.jsx(b7,{onSelectTemplate:i,children:d.jsx(Ne,{variant:"default",size:"icon",className:"h-9 w-9",children:d.jsx(H1e,{className:"h-5 w-5"})})}),d.jsx(Ne,{variant:"secondary",size:"icon",onClick:a,disabled:o,className:"h-9 w-9",children:d.jsx(K1e,{className:"h-5 w-5"})})]})]})}),d.jsx("div",{className:"flex-1 overflow-hidden",children:d.jsx(Mee,{content:n.content,onChange:l=>{const c=JSON.stringify(l);r({...n,content:c})}},n.content)})]})}var mM="Radio",[rBe,Oee]=Lo(mM),[oBe,sBe]=rBe(mM),Lee=g.forwardRef((t,e)=>{const{__scopeRadio:n,name:r,checked:o=!1,required:s,disabled:i,value:a="on",onCheck:l,form:c,...u}=t,[f,h]=g.useState(null),p=bt(e,x=>h(x)),m=g.useRef(!1),y=f?c||!!f.closest("form"):!0;return d.jsxs(oBe,{scope:n,checked:o,disabled:i,children:[d.jsx(et.button,{type:"button",role:"radio","aria-checked":o,"data-state":$ee(o),"data-disabled":i?"":void 0,disabled:i,value:a,...u,ref:p,onClick:ze(t.onClick,x=>{o||l==null||l(),y&&(m.current=x.isPropagationStopped(),m.current||x.stopPropagation())})}),y&&d.jsx(iBe,{control:f,bubbles:!m.current,name:r,value:a,checked:o,required:s,disabled:i,form:c,style:{transform:"translateX(-100%)"}})]})});Lee.displayName=mM;var jee="RadioIndicator",Vee=g.forwardRef((t,e)=>{const{__scopeRadio:n,forceMount:r,...o}=t,s=sBe(jee,n);return d.jsx(Qr,{present:r||s.checked,children:d.jsx(et.span,{"data-state":$ee(s.checked),"data-disabled":s.disabled?"":void 0,...o,ref:e})})});Vee.displayName=jee;var iBe=t=>{const{control:e,checked:n,bubbles:r=!0,...o}=t,s=g.useRef(null),i=fE(n),a=nE(e);return g.useEffect(()=>{const l=s.current,c=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(c,"checked").set;if(i!==n&&f){const h=new Event("click",{bubbles:r});f.call(l,n),l.dispatchEvent(h)}},[i,n,r]),d.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:s,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function $ee(t){return t?"checked":"unchecked"}var aBe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],gM="RadioGroup",[lBe,rFe]=Lo(gM,[zm,Oee]),Bee=zm(),Fee=Oee(),[cBe,uBe]=lBe(gM),Uee=g.forwardRef((t,e)=>{const{__scopeRadioGroup:n,name:r,defaultValue:o,value:s,required:i=!1,disabled:a=!1,orientation:l,dir:c,loop:u=!0,onValueChange:f,...h}=t,p=Bee(n),m=$m(c),[y,x]=ea({prop:s,defaultProp:o,onChange:f});return d.jsx(cBe,{scope:n,name:r,required:i,disabled:a,value:y,onValueChange:x,children:d.jsx(hP,{asChild:!0,...p,orientation:l,dir:m,loop:u,children:d.jsx(et.div,{role:"radiogroup","aria-required":i,"aria-orientation":l,"data-disabled":a?"":void 0,dir:m,...h,ref:e})})})});Uee.displayName=gM;var Hee="RadioGroupItem",zee=g.forwardRef((t,e)=>{const{__scopeRadioGroup:n,disabled:r,...o}=t,s=uBe(Hee,n),i=s.disabled||r,a=Bee(n),l=Fee(n),c=g.useRef(null),u=bt(e,c),f=s.value===o.value,h=g.useRef(!1);return g.useEffect(()=>{const p=y=>{aBe.includes(y.key)&&(h.current=!0)},m=()=>h.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",m),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",m)}},[]),d.jsx(pP,{asChild:!0,...a,focusable:!i,active:f,children:d.jsx(Lee,{disabled:i,required:s.required,checked:f,...l,...o,name:s.name,ref:u,onCheck:()=>s.onValueChange(o.value),onKeyDown:ze(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:ze(o.onFocus,()=>{var p;h.current&&((p=c.current)==null||p.click())})})})});zee.displayName=Hee;var dBe="RadioGroupIndicator",Wee=g.forwardRef((t,e)=>{const{__scopeRadioGroup:n,...r}=t,o=Fee(n);return d.jsx(Vee,{...o,...r,ref:e})});Wee.displayName=dBe;var Gee=Uee,qee=zee,fBe=Wee;const Kee=g.forwardRef(({className:t,...e},n)=>d.jsx(Gee,{className:Ve("grid gap-2",t),...e,ref:n}));Kee.displayName=Gee.displayName;const GR=g.forwardRef(({className:t,...e},n)=>d.jsx(qee,{ref:n,className:Ve("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:d.jsx(fBe,{className:"flex items-center justify-center",children:d.jsx($z,{className:"h-3.5 w-3.5 fill-primary"})})}));GR.displayName=qee.displayName;function hBe({note:t,onShare:e,onError:n}){const{user:r}=vi(),[o,s]=g.useState(""),[i,a]=g.useState("view"),[l,c]=g.useState(!1),[u,f]=g.useState(!1),[h,p]=g.useState([]),[m,y]=g.useState(!1);g.useEffect(()=>{u&&t.firebaseId&&x()},[u,t.firebaseId]);const x=async()=>{if(t.firebaseId){y(!0);try{const E=mr(jt,"shares"),R=So(E,Nr("noteId","==",t.firebaseId)),O=(await ko(R)).docs.map(T=>{var I;return{id:T.id,email:T.data().email,access:T.data().access,createdAt:((I=T.data().createdAt)==null?void 0:I.toDate())||new Date}});p(O)}catch(E){console.error("Error loading shares:",E),n==null||n("Failed to load current shares")}finally{y(!1)}}},b=async()=>{if(!o){n==null||n("Please enter an email address");return}if(!t.firebaseId){n==null||n("Note must be saved before sharing");return}if(o===(r==null?void 0:r.email)){n==null||n("You can't share with yourself");return}try{c(!0),await jn.shareNote(t.firebaseId,o,i),s(""),a("view"),await x(),e==null||e()}catch(E){console.error("Error sharing note:",E),n==null||n(E instanceof Error?E.message:"Failed to share note")}finally{c(!1)}},C=async E=>{try{await lb(ro(jt,"shares",E)),await x()}catch(R){console.error("Error removing share:",R),n==null||n("Failed to remove share")}};return d.jsxs(Mu,{open:u,onOpenChange:f,children:[d.jsx(r3,{asChild:!0,children:d.jsx(Ne,{variant:"outline",size:"icon",children:d.jsx(Y1e,{className:"h-4 w-4"})})}),d.jsxs(rc,{className:"sm:max-w-md",children:[d.jsxs(Du,{children:[d.jsx(Ou,{children:"Share Note"}),d.jsx(Wv,{children:"Share this note with other users. They'll receive access via their email."})]}),d.jsxs("div",{className:"space-y-4 py-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(En,{htmlFor:"email",children:"Share with email"}),d.jsx(Pn,{id:"email",type:"email",placeholder:"example@email.com",value:o,onChange:E=>s(E.target.value)})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(En,{children:"Access level"}),d.jsxs(Kee,{value:i,onValueChange:E=>a(E),children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(GR,{value:"view",id:"view"}),d.jsx(En,{htmlFor:"view",children:"Can view"})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(GR,{value:"edit",id:"edit"}),d.jsx(En,{htmlFor:"edit",children:"Can edit"})]})]})]}),d.jsx(Ne,{onClick:b,disabled:l||!o,className:"w-full",children:l?"Sharing...":"Share"}),h.length>0&&d.jsxs("div",{className:"mt-6",children:[d.jsx(En,{children:"Shared with"}),d.jsx("div",{className:"mt-2 space-y-2",children:h.map(E=>d.jsxs("div",{className:"flex items-center justify-between p-2 rounded-md bg-muted",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-sm font-medium",children:E.email}),d.jsxs("p",{className:"text-xs text-muted-foreground",children:["Can ",E.access]})]}),t.ownerUserId===(r==null?void 0:r.uid)&&d.jsx(Ne,{variant:"ghost",size:"icon",onClick:()=>C(E.id),children:d.jsx(Q1e,{className:"h-4 w-4 text-muted-foreground"})})]},E.id))})]}),m&&d.jsx("div",{className:"flex justify-center",children:d.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})})]})]})]})}function pBe(){const{id:t}=loe(),e=yi(),{user:n}=vi(),{toast:r}=pE(),[o,s]=g.useState(""),[i,a]=g.useState(""),[l,c]=g.useState(!0),[u,f]=g.useState(null),[h,p]=g.useState("saved"),[m,y]=g.useState(!1),[x,b]=g.useState(null),[C,E]=g.useState(0),[R,D]=g.useState(navigator.onLine),O=g.useRef(null),[T,I]=g.useState({bold:!1,italic:!1,underline:!1,strikethrough:!1});g.useEffect(()=>{if(!t||!n)return;const W=HN(ro(jt,"notes",t),G=>{var ie,ye,he;if(G.exists()){const we=G.data(),ve={...we,firebaseId:G.id,createdAt:(ie=we.createdAt)==null?void 0:ie.toDate(),updatedAt:(ye=we.updatedAt)==null?void 0:ye.toDate(),lastEditedAt:(he=we.lastEditedAt)==null?void 0:he.toDate()};f(ve),s(ve.title),a(ve.content),c(!1)}else console.error("Note not found"),c(!1),p("error")},G=>{console.error("Error loading note:",G),c(!1),p("error")});return()=>W()},[t,n]),g.useEffect(()=>{const W=()=>D(!0),G=()=>D(!1);return window.addEventListener("online",W),window.addEventListener("offline",G),()=>{window.removeEventListener("online",W),window.removeEventListener("offline",G)}},[]);const P=g.useCallback(async(W,G)=>{if(u){p("saving");try{const ie={...u,title:W,content:G,updatedAt:new Date,lastEditedByUserId:n==null?void 0:n.uid,lastEditedByEmail:(n==null?void 0:n.email)||"",lastEditedByDisplayName:(n==null?void 0:n.displayName)||"Unknown",lastEditedByPhotoURL:(n==null?void 0:n.photoURL)||void 0,lastEditedAt:new Date};u.id&&await jn.notes.update(u.id,ie),n&&await jn.syncNote(ie),f(ie),p("saved")}catch(ie){console.error("Error saving note:",ie),p("error")}}},[u,n]),L=g.useCallback(Pee(W=>{i&&P(W,i)},500),[P,i]),$=g.useCallback(async W=>{const G=JSON.stringify(W);a(G),P(o,G)},[o,P]),F=async()=>{if(!(!(u!=null&&u.firebaseId)||!window.confirm("Are you sure you want to delete this note?")))try{u.id&&await jn.notes.delete(u.id),n&&await jn.deleteNote(u.firebaseId),e("/notes")}catch(W){console.error("Error deleting note:",W)}},V=async W=>{if(u)try{let G="";const ie=JSON.parse(u.content);switch(W){case"markdown":G=ge(ie),be(`${u.title||"Untitled"}.md`,G);break;case"txt":G=le(ie),be(`${u.title||"Untitled"}.txt`,G);break;case"html":G=Q(ie),be(`${u.title||"Untitled"}.html`,G);break}r({title:"Note exported",description:`Successfully exported as ${W.toUpperCase()}`})}catch(G){console.error("Error exporting note:",G),r({title:"Export failed",description:"Failed to export note. Please try again.",variant:"destructive"})}},be=(W,G)=>{const ie=new Blob([G],{type:"text/plain;charset=utf-8"}),ye=URL.createObjectURL(ie),he=document.createElement("a");he.href=ye,he.download=W,document.body.appendChild(he),he.click(),document.body.removeChild(he),URL.revokeObjectURL(ye)},ge=W=>{let G="";const ie=ye=>Array.isArray(ye)?ye.map(he=>{var ve,Te,xe,ae;let we=he.text||"";return(ve=he.styles)!=null&&ve.bold&&(we=`**${we}**`),(Te=he.styles)!=null&&Te.italic&&(we=`*${we}*`),(xe=he.styles)!=null&&xe.underline&&(we=`_${we}_`),(ae=he.styles)!=null&&ae.strike&&(we=`~~${we}~~`),we}).join(""):"";return W.forEach(ye=>{var he,we;switch(ye.type){case"heading":{const ve="#".repeat(((he=ye.props)==null?void 0:he.level)||1);G+=`${ve} ${ie(ye.content)}

`;break}case"paragraph":G+=`${ie(ye.content)}

`;break;case"bulletListItem":G+=`* ${ie(ye.content)}
`;break;case"numberedListItem":G+=`1. ${ie(ye.content)}
`;break;case"checkListItem":{const ve=(we=ye.props)!=null&&we.checked?"[x]":"[ ]";G+=`${ve} ${ie(ye.content)}
`;break}}}),G},le=W=>W.map(G=>{var he;const ye=(we=>Array.isArray(we)?we.map(ve=>ve.text||"").join(""):"")(G.content);switch(G.type){case"heading":return`${ye}
`;case"bulletListItem":return`• ${ye}
`;case"numberedListItem":return`1. ${ye}
`;case"checkListItem":return`${(he=G.props)!=null&&he.checked?"☒":"☐"} ${ye}
`;case"paragraph":return`${ye}
`;default:return`${ye}
`}}).join(`
`),Q=W=>{const G=ye=>Array.isArray(ye)?ye.map(he=>{var ve,Te,xe,ae;let we=he.text||"";return(ve=he.styles)!=null&&ve.bold&&(we=`<strong>${we}</strong>`),(Te=he.styles)!=null&&Te.italic&&(we=`<em>${we}</em>`),(xe=he.styles)!=null&&xe.underline&&(we=`<u>${we}</u>`),(ae=he.styles)!=null&&ae.strike&&(we=`<del>${we}</del>`),we}).join(""):"";let ie='<!DOCTYPE html><html><head><meta charset="utf-8"><title>';return ie+=(u==null?void 0:u.title)||"Untitled",ie+='</title></head><body style="max-width: 800px; margin: 40px auto; padding: 0 20px; font-family: system-ui, -apple-system, sans-serif;">',W.forEach(ye=>{var he,we,ve;switch(ye.type){case"heading":ie+=`<h${((he=ye.props)==null?void 0:he.level)||1}>${G(ye.content)}</h${((we=ye.props)==null?void 0:we.level)||1}>`;break;case"paragraph":ie+=`<p>${G(ye.content)}</p>`;break;case"bulletListItem":ie+=`<ul><li>${G(ye.content)}</li></ul>`;break;case"numberedListItem":ie+=`<ol><li>${G(ye.content)}</li></ol>`;break;case"checkListItem":{const Te=(ve=ye.props)!=null&&ve.checked?" checked":"";ie+=`<div><input type="checkbox"${Te} disabled> ${G(ye.content)}</div>`;break}}}),ie+="</body></html>",ie},H=W=>{const G=W.touches[0];b(G.clientY),E(G.clientX)},Y=async W=>{if(!x)return;const ie=W.touches[0].clientY-x,ye=W.currentTarget.scrollTop;if(ie>50&&ye===0&&!m){y(!0);try{await jn.syncNote(u),r({title:"Note refreshed",description:"Latest changes have been loaded"})}catch{r({title:"Error refreshing",description:"Failed to load latest changes",variant:"destructive"})}finally{y(!1),b(null)}}},ue=W=>{if(!C)return;W.changedTouches[0].clientX-C>100&&e("/notes"),b(null),E(0)};return g.useEffect(()=>{const W=O.current;if(!W)return;const G=()=>{const ie=W.getActiveStyles();I({bold:!!ie.bold,italic:!!ie.italic,underline:!!ie.underline,strikethrough:!!ie.strike})};W.onSelectionChange(()=>{G()}),W.onChange(()=>{G()}),G()},[O.current]),l?d.jsx("div",{className:"flex justify-center items-center h-screen",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):u?d.jsxs("div",{className:"flex flex-col h-[calc(100vh-4rem)] overflow-hidden relative",onTouchStart:H,onTouchMove:Y,onTouchEnd:ue,children:[m&&d.jsx("div",{className:"absolute top-0 left-0 right-0 flex justify-center py-2 bg-background/80 backdrop-blur z-50",children:d.jsx(Hk,{className:"h-4 w-4 animate-spin"})}),d.jsx("div",{className:"sticky top-0 z-50 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:d.jsxs("div",{className:"flex items-center justify-between p-4",children:[d.jsxs("div",{className:"flex-1 flex items-center gap-4 min-w-0",children:[d.jsxs(Ne,{variant:"ghost",size:"sm",onClick:()=>e("/notes"),className:"hidden sm:flex items-center gap-1 text-muted-foreground hover:text-foreground",children:[d.jsx(SP,{className:"h-4 w-4"}),d.jsx("span",{children:"Back"})]}),d.jsx(Pn,{type:"text",value:o,onChange:W=>{s(W.target.value),L(W.target.value)},className:"text-xl sm:text-2xl font-semibold bg-transparent border-0 p-0 focus:outline-none focus-visible:ring-0 w-full truncate placeholder:text-muted-foreground/50 placeholder:font-normal",placeholder:"Untitled"})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("div",{className:Ve("hidden sm:flex items-center gap-2 text-sm",h==="saving"&&"text-muted-foreground",h==="saved"&&"text-green-500",h==="error"&&"text-destructive"),children:[h==="saving"&&d.jsx(Hk,{className:"h-3 w-3 animate-spin"}),h==="saved"&&d.jsx(GN,{className:"h-3 w-3"}),h==="error"&&d.jsx(Ku,{className:"h-3 w-3"}),d.jsxs("span",{className:"hidden md:inline",children:[h==="saving"&&"Saving...",h==="saved"&&"All changes saved",h==="error"&&"Error saving"]})]}),d.jsxs("div",{className:"flex items-center gap-1.5",children:[d.jsxs("div",{className:"sm:hidden",children:[h==="saving"&&d.jsx(Ne,{variant:"ghost",size:"icon",className:"pointer-events-none",children:d.jsx(Hk,{className:"h-4 w-4 animate-spin text-muted-foreground"})}),h==="saved"&&d.jsx(Ne,{variant:"ghost",size:"icon",className:"pointer-events-none",children:d.jsx(GN,{className:"h-4 w-4 text-green-500"})}),h==="error"&&d.jsx(Ne,{variant:"ghost",size:"icon",className:"pointer-events-none",children:d.jsx(Ku,{className:"h-4 w-4 text-destructive"})})]}),d.jsx(hBe,{note:u,onShare:()=>{r({title:"Note shared",description:"The note has been shared successfully."})},onError:W=>{r({title:"Error sharing note",description:W,variant:"destructive"})}}),d.jsxs(zz,{children:[d.jsx(Wz,{asChild:!0,children:d.jsx(Ne,{variant:"ghost",size:"icon",children:d.jsx(W1e,{className:"h-4 w-4"})})}),d.jsxs(TP,{align:"end",children:[d.jsxs(Oa,{onClick:()=>window.print(),children:[d.jsx(q1e,{className:"h-4 w-4 mr-2"}),"Print"]}),d.jsxs(eve,{children:[d.jsxs(Gz,{children:[d.jsx(Bz,{className:"h-4 w-4 mr-2"}),"Export as..."]}),d.jsxs(qz,{children:[d.jsxs(Oa,{onClick:()=>V("markdown"),children:[d.jsx(B1e,{className:"h-4 w-4 mr-2"}),"Markdown (.md)"]}),d.jsxs(Oa,{onClick:()=>V("txt"),children:[d.jsx(F1e,{className:"h-4 w-4 mr-2"}),"Plain Text (.txt)"]}),d.jsxs(Oa,{onClick:()=>V("html"),children:[d.jsx(Vk,{className:"h-4 w-4 mr-2"}),"HTML"]})]})]}),d.jsx(Sx,{}),d.jsxs(Oa,{onClick:F,className:"text-destructive focus:text-destructive",children:[d.jsx(Zpe,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})]})]})}),d.jsxs("div",{className:"hidden sm:flex items-center gap-1 p-2 overflow-x-auto bg-muted/50 border-b",children:[d.jsx(Ne,{variant:T.bold?"default":"ghost",size:"sm",className:Ve("shrink-0 transition-colors",T.bold&&"bg-primary text-primary-foreground hover:bg-primary/90"),onClick:()=>{const W=O.current;W&&(W.focus(),W.toggleStyles({bold:!0}))},children:d.jsx(DO,{className:"h-4 w-4"})}),d.jsx(Ne,{variant:T.italic?"default":"ghost",size:"sm",className:Ve("shrink-0 transition-colors",T.italic&&"bg-primary text-primary-foreground hover:bg-primary/90"),onClick:()=>{const W=O.current;W&&(W.focus(),W.toggleStyles({italic:!0}))},children:d.jsx(VO,{className:"h-4 w-4"})}),d.jsx(Ne,{variant:T.underline?"default":"ghost",size:"sm",className:Ve("shrink-0 transition-colors",T.underline&&"bg-primary text-primary-foreground hover:bg-primary/90"),onClick:()=>{const W=O.current;W&&(W.focus(),W.toggleStyles({underline:!0}))},children:d.jsx(FO,{className:"h-4 w-4"})}),d.jsx(Ne,{variant:T.strikethrough?"default":"ghost",size:"sm",className:Ve("shrink-0 transition-colors",T.strikethrough&&"bg-primary text-primary-foreground hover:bg-primary/90"),onClick:()=>{const W=O.current;W&&(W.focus(),W.toggleStyles({strike:!0}))},children:d.jsx(BO,{className:"h-4 w-4"})}),d.jsx("div",{className:"w-px h-4 bg-border mx-1"}),d.jsx(Ne,{variant:"ghost",size:"sm",className:"shrink-0",onClick:()=>{const W=O.current;W&&(W.focus(),W.insertBlocks([{type:"heading",props:{level:1}}],W.getTextCursorPosition().block,"after"))},children:d.jsx(Bk,{className:"h-4 w-4"})}),d.jsx(Ne,{variant:"ghost",size:"sm",className:"shrink-0",onClick:()=>{const W=O.current;W&&(W.focus(),W.insertBlocks([{type:"heading",props:{level:2}}],W.getTextCursorPosition().block,"after"))},children:d.jsx(LO,{className:"h-4 w-4"})}),d.jsx(Ne,{variant:"ghost",size:"sm",className:"shrink-0",onClick:()=>{const W=O.current;W&&(W.focus(),W.insertBlocks([{type:"heading",props:{level:3}}],W.getTextCursorPosition().block,"after"))},children:d.jsx(jO,{className:"h-4 w-4"})}),d.jsx("div",{className:"w-px h-4 bg-border mx-1"}),d.jsx(Ne,{variant:"ghost",size:"sm",className:"shrink-0",onClick:()=>{const W=O.current;W&&(W.focus(),W.insertBlocks([{type:"bulletListItem"}],W.getTextCursorPosition().block,"after"))},children:d.jsx($O,{className:"h-4 w-4"})}),d.jsx(Ne,{variant:"ghost",size:"sm",className:"shrink-0",onClick:()=>{const W=O.current;W&&(W.focus(),W.insertBlocks([{type:"checkListItem",props:{checked:!1}}],W.getTextCursorPosition().block,"after"))},children:d.jsx(OO,{className:"h-4 w-4"})}),d.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>{const W=O.current;W&&(W.focus(),W.insertBlocks([{type:"codeBlock",props:{}}],W.getTextCursorPosition().block,"after"))},className:"shrink-0",children:d.jsx(Vk,{className:"h-4 w-4"})}),d.jsx("div",{className:"w-px h-4 bg-border mx-1"}),d.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>{const W=O.current;if(W){const G=W.domElement;G==null||G.scrollTo({top:0,behavior:"smooth"})}},className:"shrink-0",children:d.jsx(MO,{className:"h-4 w-4"})})]}),d.jsxs("div",{className:"sm:hidden flex items-center gap-1 p-2 overflow-x-auto bg-muted/50 border-b",children:[d.jsx(Ne,{variant:T.bold?"default":"ghost",size:"sm",className:Ve("shrink-0 transition-colors",T.bold&&"bg-primary text-primary-foreground hover:bg-primary/90"),onClick:()=>{const W=O.current;W&&(W.focus(),W.toggleStyles({bold:!0}))},children:d.jsx(DO,{className:"h-4 w-4"})}),d.jsx(Ne,{variant:T.italic?"default":"ghost",size:"sm",className:Ve("shrink-0 transition-colors",T.italic&&"bg-primary text-primary-foreground hover:bg-primary/90"),onClick:()=>{const W=O.current;W&&(W.focus(),W.toggleStyles({italic:!0}))},children:d.jsx(VO,{className:"h-4 w-4"})}),d.jsx(Ne,{variant:T.underline?"default":"ghost",size:"sm",className:Ve("shrink-0 transition-colors",T.underline&&"bg-primary text-primary-foreground hover:bg-primary/90"),onClick:()=>{const W=O.current;W&&(W.focus(),W.toggleStyles({underline:!0}))},children:d.jsx(FO,{className:"h-4 w-4"})}),d.jsx(Ne,{variant:T.strikethrough?"default":"ghost",size:"sm",className:Ve("shrink-0 transition-colors",T.strikethrough&&"bg-primary text-primary-foreground hover:bg-primary/90"),onClick:()=>{const W=O.current;W&&(W.focus(),W.toggleStyles({strike:!0}))},children:d.jsx(BO,{className:"h-4 w-4"})}),d.jsx("div",{className:"w-px h-4 bg-border mx-1"}),d.jsx(Ne,{variant:"ghost",size:"sm",className:"shrink-0",onClick:()=>{const W=O.current;W&&(W.focus(),W.insertBlocks([{type:"heading",props:{level:1}}],W.getTextCursorPosition().block,"after"))},children:d.jsx(Bk,{className:"h-4 w-4"})}),d.jsx(Ne,{variant:"ghost",size:"sm",className:"shrink-0",onClick:()=>{const W=O.current;W&&(W.focus(),W.insertBlocks([{type:"bulletListItem"}],W.getTextCursorPosition().block,"after"))},children:d.jsx($O,{className:"h-4 w-4"})}),d.jsx(Ne,{variant:"ghost",size:"sm",className:"shrink-0",onClick:()=>{const W=O.current;W&&(W.focus(),W.insertBlocks([{type:"checkListItem",props:{checked:!1}}],W.getTextCursorPosition().block,"after"))},children:d.jsx(OO,{className:"h-4 w-4"})}),d.jsx("div",{className:"w-px h-4 bg-border mx-1"}),d.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>{const W=O.current;if(W){const G=W.domElement;G==null||G.scrollTo({top:0,behavior:"smooth"})}},className:"shrink-0",children:d.jsx(MO,{className:"h-4 w-4"})})]}),d.jsx("div",{className:"flex-1 overflow-hidden",children:d.jsx(Mee,{content:i,onChange:$,editorRef:O})}),d.jsx("div",{className:"sm:hidden fixed bottom-0 left-0 right-0 border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:d.jsxs("div",{className:"flex items-center justify-between px-4 py-2",children:[d.jsxs(Ne,{variant:"ghost",size:"sm",onClick:()=>e("/notes"),className:"flex items-center gap-1",children:[d.jsx(L1e,{className:"h-4 w-4"}),d.jsx("span",{children:"Back"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>{const W=O.current;W&&(W.focus(),W.insertBlocks([{type:"heading",props:{level:1}}],W.getTextCursorPosition().block,"after"))},className:"shrink-0",children:d.jsx(Bk,{className:"h-4 w-4"})}),d.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>{const W=O.current;W&&(W.focus(),W.insertBlocks([{type:"heading",props:{level:2}}],W.getTextCursorPosition().block,"after"))},className:"shrink-0",children:d.jsx(LO,{className:"h-4 w-4"})}),d.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>{const W=O.current;W&&(W.focus(),W.insertBlocks([{type:"heading",props:{level:3}}],W.getTextCursorPosition().block,"after"))},className:"shrink-0",children:d.jsx(jO,{className:"h-4 w-4"})}),d.jsx("div",{className:"w-px h-4 bg-border mx-1"}),d.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>{const W=O.current;W&&(W.focus(),W.insertBlocks([{type:"codeBlock",props:{}}],W.getTextCursorPosition().block,"after"))},className:"shrink-0",children:d.jsx(Vk,{className:"h-4 w-4"})})]}),d.jsx("div",{className:"w-[72px]"})," "]})}),d.jsx("div",{className:"sm:hidden h-14"}),!R&&d.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-yellow-500/10 text-yellow-500 text-xs py-0.5 text-center",children:[d.jsx(J1e,{className:"h-3 w-3 inline-block mr-1"}),"Offline - Changes will sync when connected"]})]}):d.jsxs("div",{className:"text-center py-12",children:[d.jsx("p",{className:"text-muted-foreground",children:"Note not found"}),d.jsx(Ne,{variant:"outline",className:"mt-4",onClick:()=>e("/notes"),children:"Back to Notes"})]})}function mBe(){return d.jsxs("div",{className:"container mx-auto px-4 py-12",children:[d.jsx("h1",{className:"text-4xl font-bold text-center mb-8",children:"Installation Guide"}),d.jsx("p",{className:"text-muted-foreground text-center mb-12 max-w-2xl mx-auto",children:"Install Notes ig on your preferred device for the best offline-capable experience. Follow the instructions below for your platform."}),d.jsxs(hE,{defaultValue:"ios",className:"max-w-3xl mx-auto",children:[d.jsxs(Vv,{className:"grid grid-cols-3 w-full",children:[d.jsxs(ws,{value:"ios",className:"flex items-center gap-2",children:[d.jsx(O1e,{className:"h-5 w-5"})," iOS"]}),d.jsxs(ws,{value:"android",className:"flex items-center gap-2",children:[d.jsx(rI,{className:"h-5 w-5"})," Android"]}),d.jsxs(ws,{value:"desktop",className:"flex items-center gap-2",children:[d.jsx(z1e,{className:"h-5 w-5"})," Desktop"]})]}),d.jsx(zi,{value:"ios",children:d.jsxs(Zt,{children:[d.jsxs(rn,{children:[d.jsx(on,{children:"Install on iOS"}),d.jsx(un,{children:"Follow these steps to install Notes ig on your iPhone or iPad"})]}),d.jsxs(en,{className:"space-y-4",children:[d.jsxs("ol",{className:"list-decimal list-inside space-y-4",children:[d.jsx("li",{children:"Open Safari on your iOS device"}),d.jsxs("li",{children:["Visit ",d.jsx("code",{className:"bg-muted px-2 py-1 rounded",children:"notes-lemon-nine.vercel.app"})]}),d.jsx("li",{children:"Tap the Share button (rectangle with arrow pointing up)"}),d.jsx("li",{children:'Scroll down and tap "Add to Home Screen"'}),d.jsx("li",{children:'Tap "Add" in the top right corner'})]}),d.jsx("div",{className:"mt-4 p-4 bg-muted rounded-lg",children:d.jsx("p",{className:"text-sm text-muted-foreground",children:"Note: The app must be installed through Safari. Other browsers on iOS don't support PWA installation."})})]})]})}),d.jsx(zi,{value:"android",children:d.jsxs(Zt,{children:[d.jsxs(rn,{children:[d.jsx(on,{children:"Install on Android"}),d.jsx(un,{children:"Follow these steps to install Notes ig on your Android device"})]}),d.jsxs(en,{className:"space-y-4",children:[d.jsxs("ol",{className:"list-decimal list-inside space-y-4",children:[d.jsx("li",{children:"Open Chrome on your Android device"}),d.jsxs("li",{children:["Visit ",d.jsx("code",{className:"bg-muted px-2 py-1 rounded",children:"notes-lemon-nine.vercel.app"})]}),d.jsx("li",{children:"Tap the three-dot menu in the top right"}),d.jsx("li",{children:'Tap "Install app" or "Add to Home screen"'}),d.jsx("li",{children:"Follow the prompts to install"})]}),d.jsx("div",{className:"mt-4 p-4 bg-muted rounded-lg",children:d.jsx("p",{className:"text-sm text-muted-foreground",children:"You'll be able to launch the app from your home screen just like any other app."})})]})]})}),d.jsx(zi,{value:"desktop",children:d.jsxs(Zt,{children:[d.jsxs(rn,{children:[d.jsx(on,{children:"Install on Desktop"}),d.jsx(un,{children:"Follow these steps to install Notes ig on your computer"})]}),d.jsxs(en,{className:"space-y-4",children:[d.jsxs("ol",{className:"list-decimal list-inside space-y-4",children:[d.jsx("li",{children:"Open Chrome, Edge, or other Chromium-based browser"}),d.jsxs("li",{children:["Visit ",d.jsx("code",{className:"bg-muted px-2 py-1 rounded",children:"notes-lemon-nine.vercel.app"})]}),d.jsx("li",{children:"Look for the install icon (⊕) in the address bar"}),d.jsx("li",{children:'Click "Install" when prompted'})]}),d.jsx("div",{className:"mt-4 p-4 bg-muted rounded-lg",children:d.jsx("p",{className:"text-sm text-muted-foreground",children:"Once installed, you can launch Notes ig from your Start menu or dock like any other application."})})]})]})})]})]})}const eC=g.forwardRef(({className:t,...e},n)=>d.jsx("textarea",{className:Ve("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));eC.displayName="Textarea";function gBe({initialPendingEvents:t,onEventsUpdate:e}){const[n,r]=g.useState(!1),[o,s]=g.useState(t),{toast:i}=pE();g.useEffect(()=>{s(t)},[t]);const a=async()=>{var u;try{const f=await jn.getSharedEvents(),h=(u=Ut.currentUser)==null?void 0:u.email,p=f.filter(m=>{var x;const y=(x=m.sharedWith)==null?void 0:x.find(b=>b.email===h);return(y==null?void 0:y.status)==="pending"});s(p)}catch(f){console.error("Error loading shared events:",f)}};g.useEffect(()=>{n&&a()},[n]);const l=async(u,f)=>{var h;try{if(!u.firebaseId)throw new Error("Event Firebase ID is missing");await jn.updateEventShare(u.firebaseId,((h=Ut.currentUser)==null?void 0:h.email)||"",f),await a(),e(),i({title:f==="accepted"?"Event Accepted":"Event Declined",description:`You have ${f} the event "${u.title}"`}),o.length<=1&&r(!1)}catch(p){console.error("Error updating event status:",p),i({title:"Error",description:"Failed to update event status",variant:"destructive"})}},c=({event:u})=>d.jsx("div",{className:"border rounded-lg p-4 space-y-2 mb-3",children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium",children:u.title}),d.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-1",children:[d.jsx(uE,{className:"h-4 w-4"}),d.jsx("span",{children:u.allDay?ct(new Date(u.startDate),"MMM d, yyyy"):`${ct(new Date(u.startDate??""),"MMM d, yyyy h:mm a")} - 
                 ${ct(new Date(u.endDate??""),"h:mm a")}`})]}),u.location&&d.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mt-1",children:[d.jsx(dE,{className:"h-4 w-4"}),d.jsx("span",{children:u.location})]})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Ne,{size:"sm",onClick:()=>l(u,"accepted"),children:"Accept"}),d.jsx(Ne,{size:"sm",variant:"outline",onClick:()=>l(u,"declined"),children:"Decline"})]})]})});return d.jsxs(Mu,{open:n,onOpenChange:r,children:[d.jsxs(Ne,{variant:"outline",size:"sm",onClick:()=>r(!0),className:"relative",children:["Invitations",o.length>0&&d.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 text-xs flex items-center justify-center",children:o.length})]}),d.jsxs(rc,{className:"max-w-[500px]",children:[d.jsx(Du,{children:d.jsx(Ou,{children:"Calendar Invitations"})}),d.jsx(Gm,{className:"h-[400px] pr-4",children:o.length===0?d.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No pending invitations"}):o.map(u=>d.jsx(c,{event:u},u.firebaseId||u.id))})]})]})}const j0=(t,e)=>{if(!t.current)return;const n=new Date,r=n.getHours(),o=n.getMinutes(),s=(r+o/60)*80-t.current.clientHeight/2;if(e){const i=e.offsetLeft-t.current.clientWidth/2+e.offsetWidth/2;t.current.scrollLeft=i}setTimeout(()=>{t.current&&(t.current.scrollTop=Math.max(0,s))},100)},yBe=()=>{const t=[];for(let e=0;e<24;e++)for(let n=0;n<60;n+=15){const r=new Date;r.setHours(e,n,0,0),t.push({value:`${e.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`,label:ct(r,"h:mm a")})}return t},x7=({value:t,onChange:e})=>d.jsxs(am,{value:ct(t,"HH:mm"),onValueChange:n=>{const[r,o]=n.split(":").map(Number),s=new Date(t);s.setHours(r,o),e(s)},children:[d.jsx(Rf,{className:"w-24",children:d.jsx(lm,{})}),d.jsx(Af,{children:yBe().map(n=>d.jsx(Ir,{value:n.value,children:n.label},n.value))})]}),vBe=["#3b82f6","#60a5fa","#2563eb","#ef4444","#f87171","#dc2626","#22c55e","#4ade80","#16a34a","#f59e0b","#fbbf24","#d97706","#6366f1","#a855f7","#7c3aed","#ec4899","#f472b6","#db2777","#6b7280","#4b5563","#374151","#14b8a6","#2dd4bf","#0d9488"],_7=({isCreate:t,initialEvent:e,onSubmit:n,onCancel:r})=>{var y;const[o,s]=g.useState(e),[i,a]=g.useState(!1),[l,c]=g.useState(!1),[u,f]=g.useState(""),[h,p]=g.useState("view"),m=async x=>{const b=Ut.currentUser;if(!b)throw new Error("User not authenticated");const C={...x,createdBy:b.email||"",createdAt:new Date};return await jn.createTag(C)};return d.jsxs("div",{className:"flex flex-col",children:[d.jsxs("div",{className:"p-4 space-y-3",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(zpe,{className:"h-4 w-4 text-muted-foreground"}),d.jsx(Pn,{placeholder:"Add title",value:o.title||"",onChange:x=>s({...o,title:x.target.value}),className:"text-lg font-medium border-none p-0 focus-visible:ring-0"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx("div",{className:"w-16 text-muted-foreground",children:"Starts"}),d.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[d.jsx(Pn,{type:"date",value:ct(o.startDate||new Date,"yyyy-MM-dd"),onChange:x=>{const b=new Date(x.target.value),C=new Date(o.startDate||new Date);b.setHours(C.getHours(),C.getMinutes()),s({...o,startDate:b})},className:"w-36"}),!o.allDay&&d.jsx(x7,{value:o.startDate||new Date,onChange:x=>s({...o,startDate:x})})]})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx("div",{className:"w-16 text-muted-foreground",children:"Ends"}),d.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[d.jsx(Pn,{type:"date",value:ct(o.endDate||new Date,"yyyy-MM-dd"),onChange:x=>{const b=new Date(x.target.value),C=new Date(o.endDate||new Date);b.setHours(C.getHours(),C.getMinutes()),s({...o,endDate:b})},className:"w-36"}),!o.allDay&&d.jsx(x7,{value:o.endDate||new Date,onChange:x=>s({...o,endDate:x})})]})]}),d.jsxs("div",{className:"flex items-center gap-2 text-sm pl-16",children:[d.jsx(hp,{checked:o.allDay,onCheckedChange:x=>s({...o,allDay:x})}),d.jsx(En,{className:"text-muted-foreground",children:"All day"})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(En,{children:"Color"}),d.jsxs(S1,{open:l,onOpenChange:c,children:[d.jsx(T1,{asChild:!0,children:d.jsxs(Ne,{type:"button",variant:"outline",className:"w-full justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:o.color||"#3b82f6"}}),o.color||"#3b82f6"]}),d.jsx(lE,{className:"h-4 w-4"})]})}),d.jsx(dm,{className:"w-64 p-3",align:"start",children:d.jsxs("div",{className:"space-y-3",children:[d.jsx("div",{className:"grid grid-cols-5 gap-2",children:vBe.map(x=>d.jsx("button",{type:"button",className:Ve("w-8 h-8 rounded-full transition-all relative",o.color===x&&"ring-2 ring-offset-2 ring-primary"),style:{backgroundColor:x},onClick:()=>{s(b=>({...b,color:x})),c(!1)},children:o.color===x&&d.jsx(jv,{className:"h-4 w-4 text-white absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})},x))}),d.jsx(Pn,{type:"color",value:o.color||"#3b82f6",onChange:x=>s(b=>({...b,color:x.target.value})),className:"w-full h-8"})]})})]})]}),d.jsxs(Ne,{variant:"ghost",className:"w-full justify-start h-8 px-0 text-muted-foreground",onClick:()=>a(!i),children:[d.jsx(cE,{className:Ve("h-4 w-4 mr-2 transition-transform",i&&"rotate-90")}),i?"Hide details":"Add details"]}),i&&d.jsxs("div",{className:"space-y-3 animate-in slide-in-from-left",children:[d.jsxs("div",{className:"flex items-center gap-2 text-sm group",children:[d.jsx(dE,{className:"h-4 w-4 text-muted-foreground"}),d.jsx(Pn,{placeholder:"Add location",value:o.location||"",onChange:x=>s({...o,location:x.target.value}),className:"flex-1 border-none px-0 focus-visible:ring-0"})]}),d.jsx("div",{className:"space-y-2",children:d.jsx(eC,{placeholder:"Add description",value:o.description||"",onChange:x=>s({...o,description:x.target.value}),className:"min-h-[100px] resize-none"})}),d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsx(uE,{className:"h-4 w-4 text-muted-foreground"}),d.jsxs(am,{value:(y=o.reminderMinutes)==null?void 0:y.toString(),onValueChange:x=>s({...o,reminderMinutes:parseInt(x)}),children:[d.jsx(Rf,{className:"border-none px-0",children:d.jsx(lm,{placeholder:"Add reminder"})}),d.jsxs(Af,{children:[d.jsx(Ir,{value:"0",children:"At time of event"}),d.jsx(Ir,{value:"1",children:"1 minute before"}),d.jsx(Ir,{value:"3",children:"3 minutes before"}),d.jsx(Ir,{value:"5",children:"5 minutes before"}),d.jsx(Ir,{value:"15",children:"15 minutes before"}),d.jsx(Ir,{value:"30",children:"30 minutes before"}),d.jsx(Ir,{value:"60",children:"1 hour before"}),d.jsx(Ir,{value:"1440",children:"1 day before"})]})]})]}),d.jsxs("div",{className:"space-y-1",children:[d.jsx(En,{className:"text-sm",children:"Tags"}),d.jsx(pq,{selectedTags:o.tags||[],onTagsChange:x=>s({...o,tags:x}),onCreateTag:m})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(En,{className:"text-sm",children:"Share with others"}),d.jsx(eC,{placeholder:"Enter email addresses (one per line)",value:u,onChange:x=>f(x.target.value),className:"min-h-[80px] text-sm"}),d.jsxs(am,{value:h,onValueChange:x=>p(x),children:[d.jsx(Rf,{className:"h-8 text-sm",children:d.jsx(lm,{placeholder:"Select permission"})}),d.jsxs(Af,{children:[d.jsx(Ir,{value:"view",children:"Can view"}),d.jsx(Ir,{value:"edit",children:"Can edit"})]})]}),o.sharedWith&&o.sharedWith.length>0&&d.jsxs("div",{className:"mt-2 space-y-1",children:[d.jsx(En,{className:"text-xs text-muted-foreground",children:"Currently shared with:"}),o.sharedWith.map(x=>d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(sI,{className:"h-3 w-3 text-muted-foreground"}),d.jsx("span",{className:"text-xs",children:x.email})]}),d.jsx(Ne,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>{var b;s({...o,sharedWith:(b=o.sharedWith)==null?void 0:b.filter(C=>C.email!==x.email)})},children:d.jsx(Ku,{className:"h-3 w-3"})})]},x.email))]})]})]})]}),d.jsxs("div",{className:"border-t p-4 flex justify-end gap-2",children:[d.jsx(Ne,{variant:"ghost",size:"sm",onClick:r,children:"Cancel"}),d.jsx(Ne,{size:"sm",onClick:()=>{var E;const x=u.split(`
`).map(R=>R.trim()).filter(Boolean).map(R=>({email:R,permission:h,status:"pending"})),b=new Set(((E=o.sharedWith)==null?void 0:E.map(R=>R.email))||[]),C=x.filter(R=>!b.has(R.email));n({...o,sharedWith:[...o.sharedWith||[],...C]})},children:t?"Save":"Update"})]})]})},wBe=t=>{const e=t.reduce((n,r)=>{const o=new Date(r.startDate),s=o.getFullYear(),i=String(o.getMonth()+1).padStart(2,"0"),a=String(o.getDate()).padStart(2,"0"),l=`${s}-${i}-${a}`;return n[l]||(n[l]=[]),n[l].push(r),n},{});return Object.keys(e).forEach(n=>{e[n].sort((r,o)=>r.allDay&&!o.allDay?-1:!r.allDay&&o.allDay?1:new Date(r.startDate).getTime()-new Date(o.startDate).getTime())}),e},bBe=({events:t,onEventClick:e})=>{const n=ct(new Date,"yyyy-MM-dd"),r=wBe(t),o=Array.from({length:30},(i,a)=>{const l=new Date;return l.setDate(l.getDate()+a),ct(l,"yyyy-MM-dd")}),s=Object.keys(r).filter(i=>i>=n).sort((i,a)=>i.localeCompare(a));return o.forEach(i=>{r[i]||(r[i]=[])}),d.jsx(Gm,{className:"h-[calc(100vh-8rem)]",children:d.jsx("div",{className:"divide-y divide-border",children:t.length===0?d.jsxs("div",{className:"text-center text-muted-foreground py-12 px-4",children:[d.jsx(kP,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),d.jsx("p",{className:"font-medium mb-1",children:"No upcoming events"}),d.jsx("p",{className:"text-sm",children:"Click the + button to create a new event"})]}):s.map(i=>{const a=r[i],l=i===n;return d.jsxs("div",{className:Ve("transition-colors",l&&"bg-muted/30"),children:[d.jsxs("div",{className:"sticky top-0 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/75 z-10 flex items-center px-4 py-2 gap-3",children:[d.jsxs("div",{className:"flex-shrink-0 w-12 text-center",children:[d.jsx("div",{className:Ve("text-xl font-semibold leading-none",l&&"text-primary"),children:ct(new Date(i),"d")}),d.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:ct(new Date(i),"EEE")})]}),d.jsxs("div",{children:[d.jsx("h3",{className:Ve("text-sm font-medium",l&&"text-primary"),children:l?"Today":ct(new Date(i),"MMMM d, yyyy")}),d.jsx("p",{className:"text-xs text-muted-foreground",children:a.length===0?"No events scheduled":`${a.length} event${a.length===1?"":"s"}`})]})]}),d.jsx("div",{className:Ve("divide-y divide-border/50",a.length===0&&"pb-2"),children:a.map(c=>d.jsx("div",{className:Ve("px-4 py-2 hover:bg-muted/50 cursor-pointer transition-colors","sm:hover:scale-[1.002] sm:hover:shadow-sm"),onClick:()=>e(c),children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsxs("div",{className:"w-12 flex-shrink-0 pt-1 text-center",children:[d.jsx("span",{className:Ve("text-sm font-medium",l&&"text-muted-foreground"),children:c.allDay?"All day":ct(new Date(c.startDate),"h:mm")}),!c.allDay&&d.jsx("div",{className:"text-[10px] text-muted-foreground",children:ct(new Date(c.startDate),"a")})]}),d.jsx("div",{className:"flex-1 min-w-0",children:d.jsxs("div",{className:"flex items-start justify-between gap-2",children:[d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0 mt-1",style:{backgroundColor:c.color||"#3b82f6"}}),d.jsx("h4",{className:Ve("font-medium truncate",l&&"text-muted-foreground"),children:c.title})]}),!c.allDay&&d.jsx("div",{className:"text-xs text-muted-foreground mt-0.5",children:c.endDate?ct(new Date(c.endDate),"h:mm a"):""}),c.location&&d.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[d.jsx(dE,{className:"h-3 w-3 flex-shrink-0"}),d.jsx("span",{className:"truncate",children:c.location})]}),c.tags&&c.tags.length>0&&d.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5",children:c.tags.map(u=>d.jsx("div",{className:"px-1.5 py-0.5 rounded-full text-[10px] leading-none",style:{backgroundColor:u.color+"20",color:u.color},children:u.name},u.id))})]}),c.sharedWith&&c.sharedWith.length>0&&d.jsxs("div",{className:"flex -space-x-2 pt-1",children:[c.sharedWith.slice(0,2).map(u=>d.jsx("div",{className:"w-5 h-5 rounded-full bg-muted ring-2 ring-background overflow-hidden",title:u.email,children:d.jsx("span",{className:"w-full h-full flex items-center justify-center text-[10px]",children:u.email.charAt(0).toUpperCase()})},u.email)),c.sharedWith.length>2&&d.jsxs("div",{className:"w-5 h-5 rounded-full bg-muted ring-2 ring-background flex items-center justify-center text-[10px]",children:["+",c.sharedWith.length-2]})]})]})})]})},c.firebaseId||c.id))})]},i)})})})},xBe=({event:t,onEventClick:e})=>d.jsxs("div",{className:"absolute inset-x-1 rounded-sm p-1 text-xs hover:ring-2 hover:ring-primary cursor-pointer",style:{backgroundColor:t.color+"33",borderLeft:`3px solid ${t.color}`,top:"2px",minHeight:"18px"},onClick:n=>{n.stopPropagation(),e(t)},children:[d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("div",{className:"w-3 h-3 rounded-full bg-muted flex-shrink-0 overflow-hidden",title:`Created by ${t.createdBy}`,children:t.createdByPhotoURL?d.jsx("img",{src:t.createdByPhotoURL,alt:"",className:"w-full h-full object-cover"}):d.jsx("span",{className:"w-full h-full flex items-center justify-center text-sm text-muted-foreground",children:t.createdBy.charAt(0).toUpperCase()})}),d.jsx("div",{className:"flex-1 min-w-0",children:d.jsxs("div",{className:"font-medium truncate flex items-center gap-1",children:[t.title,t.sharedWith&&t.sharedWith.length>0&&d.jsx(Hz,{className:"w-3 h-3 text-muted-foreground flex-shrink-0"})]})})]}),d.jsx("div",{className:"flex items-center gap-1 text-muted-foreground",children:d.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[d.jsx(uE,{className:"w-2 h-2"}),t.startDate&&ct(new Date(t.startDate),"h:mm")," - ",t.endDate&&ct(new Date(t.endDate),"h:mm")]})})]}),_Be=({event:t,onEventClick:e})=>d.jsx("div",{className:"absolute inset-x-1 rounded-sm p-1.5 text-xs group hover:ring-2 hover:ring-primary cursor-pointer",style:{backgroundColor:t.color+"33",borderLeft:`3px solid ${t.color}`,top:"2px",minHeight:"18px"},onClick:n=>{n.stopPropagation(),e(t)},children:d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("div",{className:"w-4 h-4 rounded-full bg-muted flex-shrink-0 overflow-hidden",title:`Created by ${t.createdBy}`,children:t.createdByPhotoURL?d.jsx("img",{src:t.createdByPhotoURL,alt:"",className:"w-full h-full object-cover"}):d.jsx("span",{className:"w-full h-full flex items-center justify-center text-[8px] text-muted-foreground",children:t.createdBy.charAt(0).toUpperCase()})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"font-medium truncate flex items-center gap-1",children:[t.title,t.sharedWith&&t.sharedWith.length>0&&d.jsx(Hz,{className:"w-3 h-3 text-muted-foreground"})]}),t.location&&d.jsx("div",{className:"truncate text-muted-foreground",children:t.location}),t.startDate&&t.endDate&&d.jsxs("p",{className:"text-sm text-muted-foreground line-clamp-2 mt-1",children:[ct(new Date(t.startDate),"h:mm a")," - ",ct(new Date(t.endDate),"h:mm a")]}),t.tags&&t.tags.length>0&&d.jsx("div",{className:"flex flex-wrap gap-1",children:t.tags.map(n=>d.jsx("div",{className:"px-2 py-0.5 rounded-full text-xs",style:{backgroundColor:n.color+"20",color:n.color},children:n.name},n.id))})]})]})}),CBe=({events:t,onEventSelect:e})=>{const[n,r]=g.useState(!1),[o,s]=g.useState("");g.useEffect(()=>{const a=l=>{l.key==="k"&&(l.metaKey||l.ctrlKey)&&(l.preventDefault(),r(c=>!c))};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[]);const i=t.filter(a=>{var c,u;const l=o.toLowerCase();return a.title.toLowerCase().includes(l)||((c=a.description)==null?void 0:c.toLowerCase().includes(l))||((u=a.location)==null?void 0:u.toLowerCase().includes(l))});return d.jsxs("div",{className:"w-full max-w-3xl",children:[d.jsxs(Ne,{variant:"outline",role:"combobox","aria-expanded":n,onClick:()=>r(!0),className:"w-full justify-start text-sm text-muted-foreground",children:[d.jsx(Uz,{className:"mr-2 h-4 w-4"}),"Search events...",d.jsxs("kbd",{className:"pointer-events-none absolute right-1.5 top-1.5 hidden h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium opacity-100 sm:flex",children:[d.jsx("span",{className:"text-xs",children:"⌘"}),"K"]})]}),d.jsxs(c3,{open:n,onOpenChange:r,children:[d.jsx(NE,{placeholder:"Search events...",value:o,onValueChange:s}),d.jsxs(IE,{children:[d.jsx(RE,{children:"No events found."}),d.jsx(AE,{heading:"Events",children:i.map(a=>d.jsxs(PE,{value:a.title,onSelect:()=>{e(a),r(!1),s("")},children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:a.color||"#3b82f6"}}),d.jsx("span",{children:a.title})]}),d.jsx("div",{className:"ml-5 text-sm text-muted-foreground",children:ct(new Date(a.startDate),"MMM d, yyyy")})]},a.id))})]})]})]})};function EBe(){var we,ve,Te,xe;const[t,e]=g.useState([]),[n,r]=g.useState(new Date),[o,s]=g.useState(new Date),[i,a]=g.useState(!1),{toast:l}=pE(),[c,u]=g.useState(null),[f,h]=g.useState(!1),[p,m]=g.useState(!1),[y,x]=g.useState(""),[b,C]=g.useState("view"),[E,R]=g.useState([]),[,D]=g.useState(!0),[O,T]=g.useState({title:"",description:"",startDate:new Date,endDate:new Date,allDay:!1,reminderMinutes:30,location:"",color:"#3b82f6",sharedWith:[]}),I=Array.from({length:7},(ae,Ie)=>Pr(Cs(o),Ie)),P=Array.from({length:24},(ae,Ie)=>Ie),L=(ae,Ie)=>t.filter(Re=>{const at=new Date(Re.startDate);return Mr(at,ae)&&at.getHours()===Ie}),$=async()=>{var ae;try{const Ie=await jn.getSharedEvents(),Re=(ae=Ut.currentUser)==null?void 0:ae.email,at=Ie.filter(Nt=>{var Gn;const Ft=(Gn=Nt.sharedWith)==null?void 0:Gn.find(kr=>kr.email===Re);return(Ft==null?void 0:Ft.status)==="pending"});R(at)}catch(Ie){console.error("Error loading pending invitations:",Ie)}};g.useEffect(()=>{F(),$()},[]);async function F(){try{const ae=await jn.calendarEvents.toArray(),Re=(await jn.getSharedEvents()).filter(Nt=>{var kr,rs;const Ft=(kr=Ut.currentUser)==null?void 0:kr.email,Gn=(rs=Nt.sharedWith)==null?void 0:rs.find(Jt=>Jt.email===Ft);return(Gn==null?void 0:Gn.status)==="accepted"}),at=new Map;ae.forEach(Nt=>{at.set(Nt.firebaseId,Nt)}),Re.forEach(Nt=>{at.has(Nt.firebaseId)||at.set(Nt.firebaseId,Nt)}),e(Array.from(at.values()))}catch(ae){console.error("Error loading events:",ae),l({title:"Error",description:"Failed to load calendar events",variant:"destructive"})}}const V=async ae=>{try{const Ie=Ut.currentUser;if(!Ie)throw new Error("User not authenticated");const Re={...ae,createdBy:Ie.email||"",createdByPhotoURL:Ie.photoURL||"",lastModifiedBy:Ie.email||"",lastModifiedByPhotoURL:Ie.photoURL||"",lastModifiedByDisplayName:Ie.displayName||"",lastModifiedAt:new Date};await jn.createCalendarEvent(Re),a(!1),T({title:"",description:"",startDate:new Date,endDate:new Date,allDay:!1,reminderMinutes:30,location:"",color:"#3b82f6",sharedWith:[]}),await F(),l({title:"Event Created",description:"Your calendar event has been scheduled"})}catch{l({title:"Error",description:"Failed to create event",variant:"destructive"})}},be=(ae,Ie)=>{const Re=new Date(ae);Re.setHours(Ie,0,0,0),T({...O,startDate:Re,endDate:new Date(Re.getTime()+60*60*1e3)}),a(!0)},[ge,le]=g.useState("week"),Q=g.useRef(null),H=g.useRef(null),Y=g.useRef(null);g.useEffect(()=>{const ae=()=>{setTimeout(()=>{ge==="week"?j0(Q,Y.current):ge==="day"&&j0(H)},100)};return ae(),document.addEventListener("visibilitychange",ae),()=>document.removeEventListener("visibilitychange",ae)},[ge]),g.useEffect(()=>{const ae=document.querySelector('[role="tablist"]');if(ae){const Ie=new MutationObserver(()=>{ge==="week"?j0(Q,Y.current):ge==="day"&&j0(H)});return Ie.observe(ae,{attributes:!0,subtree:!0}),()=>Ie.disconnect()}},[ge]);const ue=()=>{const ae=new Date,Ie=(ae.getHours()+ae.getMinutes()/60)*80;return d.jsx("div",{className:"absolute left-0 right-0 z-20 pointer-events-none",style:{top:`${Ie}px`},children:d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute -left-2 w-4 h-4 rounded-full bg-red-500 -mt-2"}),d.jsx("div",{className:"border-t border-red-500"})]})})},W=()=>d.jsx("div",{className:"h-full overflow-auto",ref:H,children:d.jsxs("div",{className:"min-w-[300px] relative",children:[d.jsx("div",{className:"sticky top-0 bg-background z-10 p-4 border-b",children:d.jsx("h2",{className:"text-lg font-semibold",children:ct(n,"EEEE, MMMM d")})}),ue(),d.jsx("div",{children:P.map(ae=>d.jsxs("div",{className:"flex",children:[d.jsx("div",{className:"sticky left-0 w-16 pr-2 text-sm text-muted-foreground",style:{paddingTop:"2px"},children:ct(new Date().setHours(ae,0),"ha")}),d.jsxs("div",{className:"flex-1 h-20 border-b relative cursor-pointer hover:bg-muted/50",onClick:()=>be(n,ae),children:[d.jsx("div",{className:"absolute left-0 right-0 top-1/2 border-t border-dashed border-muted-foreground/20"}),L(n,ae).map(Ie=>d.jsx(_Be,{event:Ie,onEventClick:Re=>{u(Re),h(!0)}},Ie.firebaseId||Ie.id))]})]},ae))})]})}),[G,ie]=g.useState(!1),[ye,he]=g.useState(null);return d.jsxs("div",{className:"flex flex-col h-[calc(100vh)] overflow-hidden",children:[d.jsxs(hE,{defaultValue:"week",value:ge,onValueChange:ae=>le(ae),className:"flex flex-col h-full",children:[d.jsxs("div",{className:"shrink-0 border-b bg-background",children:[d.jsxs("div",{className:"flex flex-col gap-3 p-4",children:[d.jsxs("div",{className:"flex items-center justify-between gap-4",children:[d.jsx("div",{className:"flex-1",children:d.jsx(CBe,{events:t,onEventSelect:ae=>{u(ae),h(!0)}})}),d.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[d.jsxs(Mu,{open:i,onOpenChange:a,children:[d.jsx(r3,{asChild:!0,children:d.jsxs(Ne,{size:"sm",className:"gap-2",onClick:()=>{D(!0),T({title:"",description:"",startDate:new Date,endDate:new Date,allDay:!1,reminderMinutes:30,location:"",color:"#3b82f6",sharedWith:[]})},children:[d.jsx(G1e,{className:"h-4 w-4"}),d.jsx("span",{className:"hidden sm:inline",children:"New Event"})]})}),d.jsxs(rc,{className:"max-w-[95vw] sm:max-w-[425px] p-0",children:[d.jsx(Du,{className:"px-4 py-3 border-b",children:d.jsx(Ou,{className:"text-lg",children:"Create New Event"})}),d.jsx(_7,{isCreate:!0,initialEvent:O,onSubmit:V,onCancel:()=>a(!1)})]})]}),d.jsx(gBe,{initialPendingEvents:E,onEventsUpdate:()=>{F(),$()}})]})]}),d.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-1 -mx-4 px-4",children:[d.jsx(Ne,{variant:"ghost",size:"sm",onClick:()=>{s(new Date),r(new Date)},children:"Today"}),d.jsxs("div",{className:"flex items-center rounded-md border bg-background",children:[d.jsx(Ne,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{ge==="week"?s(b0e(o)):r(fb(n,1))},children:d.jsx(SP,{className:"h-4 w-4"})}),d.jsx(Ne,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{ge==="week"?s(E1(o,1)):r(Pr(n,1))},children:d.jsx(cE,{className:"h-4 w-4"})})]}),d.jsxs(S1,{children:[d.jsx(T1,{asChild:!0,children:d.jsxs(Ne,{variant:"outline",size:"sm",className:"h-8",children:[d.jsx(kP,{className:"mr-2 h-4 w-4"}),d.jsx("span",{className:"whitespace-nowrap",children:ge==="week"?`${ct(Cs(o),"MMM d")} - ${ct(Pr(Cs(o),6),"MMM d")}`:ct(n,"MMM d, yyyy")})]})}),d.jsx(dm,{className:"w-auto p-0",align:"start",children:d.jsxs("div",{className:"space-y-3 p-3",children:[d.jsxs(am,{value:ct(ge==="week"?o:n,"yyyy"),onValueChange:ae=>{const Ie=Ix(ge==="week"?o:n,parseInt(ae));ge==="week"?s(Ie):r(Ie)},children:[d.jsx(Rf,{children:d.jsx(lm,{placeholder:"Select year"})}),d.jsx(Af,{children:Array.from({length:10},(ae,Ie)=>{const Re=new Date().getFullYear()-5+Ie;return d.jsx(Ir,{value:Re.toString(),children:Re},Re)})})]}),d.jsx(zP,{mode:"single",selected:ge==="week"?o:n,onSelect:ae=>{ae&&(ge==="week"?s(ae):r(ae))},initialFocus:!0})]})})]})]})]}),d.jsx("div",{className:"px-4 pb-2",children:d.jsxs(Vv,{className:"w-full sm:w-auto justify-start",children:[d.jsx(ws,{value:"day",className:"flex-1 sm:flex-none",children:"Day"}),d.jsx(ws,{value:"week",className:"flex-1 sm:flex-none",children:"Week"}),d.jsx(ws,{value:"agenda",className:"flex-1 sm:flex-none",children:"Agenda"})]})})]}),d.jsxs("div",{className:"flex-1 min-h-0 relative",children:[d.jsx(zi,{value:"week",className:"absolute inset-0",children:d.jsx("div",{className:"h-full overflow-auto",ref:Q,children:d.jsxs("div",{className:"grid grid-cols-[auto_1fr] h-full min-w-[768px]",children:[d.jsxs("div",{className:"border-r sticky left-0 bg-background z-10 w-16",children:[d.jsx("div",{className:"h-[60px] border-b"}),P.map(ae=>d.jsx("div",{className:"h-20 border-b px-2 text-xs text-muted-foreground",style:{paddingTop:"2px"},children:ct(new Date().setHours(ae,0),"ha")},ae))]}),d.jsxs("div",{children:[d.jsx("div",{className:"grid grid-cols-7 border-b sticky top-0 bg-background z-10 h-[60px]",children:I.map(ae=>d.jsxs("div",{ref:Mr(ae,new Date)?Y:null,className:Ve("p-2 text-center border-r relative",Mr(ae,new Date)&&"bg-primary/5"),children:[d.jsx("div",{className:"text-sm font-medium",children:ct(ae,"EEE")}),d.jsx("div",{className:Ve("h-8 w-8 rounded-full flex items-center justify-center mx-auto text-sm",Mr(ae,new Date)&&"bg-primary text-primary-foreground"),children:ct(ae,"d")})]},ae.toISOString()))}),d.jsxs("div",{className:"relative",children:[ue(),P.map(ae=>d.jsx("div",{className:"grid grid-cols-7",children:I.map(Ie=>d.jsxs("div",{className:Ve("h-20 border-r border-b relative group cursor-pointer","hover:bg-muted/50 transition-colors"),onClick:()=>be(Ie,ae),children:[d.jsx("div",{className:"absolute left-0 right-0 top-1/2 border-t border-dashed border-muted-foreground/20"}),L(Ie,ae).map(Re=>d.jsx(xBe,{event:Re,onEventClick:at=>{u(at),h(!0)}},Re.firebaseId||Re.id))]},`${Ie.toISOString()}-${ae}`))},ae))]})]})]})})}),d.jsx(zi,{value:"day",className:"absolute inset-0",children:d.jsx("div",{className:"h-full overflow-auto",children:W()})}),d.jsx(zi,{value:"agenda",className:"absolute inset-0",children:d.jsx("div",{className:"h-full overflow-auto",children:d.jsx(bBe,{events:t,selectedDate:n,onEventClick:ae=>{u(ae),h(!0)}})})})]})]}),d.jsx(Mu,{open:f,onOpenChange:h,children:d.jsxs(rc,{className:"max-w-[95vw] sm:max-w-[425px] p-0",children:[d.jsx(Du,{className:"px-4 py-3 border-b",children:d.jsx(Ou,{className:"text-base flex items-center gap-2",children:G?"Edit Event":d.jsxs(d.Fragment,{children:[(c==null?void 0:c.createdBy)!==((we=Ut.currentUser)==null?void 0:we.email)&&d.jsx("div",{className:"w-6 h-6 rounded-full bg-muted overflow-hidden flex-shrink-0",children:c!=null&&c.createdByPhotoURL?d.jsx("img",{src:c.createdByPhotoURL,alt:"",className:"w-full h-full object-cover"}):d.jsx("span",{className:"w-full h-full flex items-center justify-center text-xs text-muted-foreground",children:c==null?void 0:c.createdBy.charAt(0).toUpperCase()})}),c==null?void 0:c.title]})})}),G?d.jsx(_7,{isCreate:!1,initialEvent:ye||c||{},onSubmit:async ae=>{if(c!=null&&c.id)try{await jn.updateCalendarEvent(c.id,ae),l({title:"Event Updated",description:"Your changes have been saved"}),F(),ie(!1),he(null),h(!1)}catch{l({title:"Error",description:"Failed to update event",variant:"destructive"})}},onCancel:()=>{ie(!1),he(null)}}):d.jsxs("div",{className:"flex flex-col",children:[d.jsxs("div",{className:"p-4 space-y-4",children:[d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsx(uE,{className:"h-4 w-4 mt-0.5 text-muted-foreground"}),d.jsxs("div",{className:"space-y-0.5",children:[d.jsx("div",{children:c!=null&&c.allDay?"All day":`${ct((c==null?void 0:c.startDate)||new Date,"h:mm a")} - 
                         ${ct((c==null?void 0:c.endDate)||new Date,"h:mm a")}`}),d.jsx("div",{className:"text-sm text-muted-foreground",children:ct((c==null?void 0:c.startDate)||new Date,"EEEE, MMMM d, yyyy")})]})]}),(c==null?void 0:c.location)&&d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsx(dE,{className:"h-4 w-4 mt-0.5 text-muted-foreground"}),d.jsx("div",{children:c.location})]}),(c==null?void 0:c.description)&&d.jsxs("div",{className:"pt-2 border-t",children:[d.jsx("div",{className:"font-medium mb-1 text-sm",children:"Description"}),d.jsx("div",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:c.description})]}),(c==null?void 0:c.tags)&&c.tags.length>0&&d.jsx("div",{className:"flex flex-wrap gap-1",children:c.tags.map(ae=>d.jsx("div",{className:"px-2 py-0.5 rounded-full text-xs",style:{backgroundColor:ae.color+"20",color:ae.color},children:ae.name},ae.id))}),(c==null?void 0:c.sharedWith)&&c.sharedWith.length>0&&d.jsxs("div",{className:"pt-4 border-t",children:[d.jsx("div",{className:"font-medium mb-2",children:"Shared with"}),d.jsx("div",{className:"space-y-2",children:c.sharedWith.map(ae=>d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(sI,{className:"h-4 w-4 text-muted-foreground"}),d.jsx("span",{children:ae.email})]}),d.jsxs("span",{className:"text-xs text-muted-foreground",children:[ae.permission," • ",ae.status]})]},ae.email))})]}),d.jsxs("div",{className:"pt-4 border-t",children:[d.jsx("div",{className:"font-medium mb-2",children:"Reminder"}),d.jsx("div",{className:"text-sm text-muted-foreground",children:c!=null&&c.reminderMinutes?`${c.reminderMinutes} minutes before`:"No reminder set"})]}),d.jsx("div",{className:"pt-4 border-t text-sm text-muted-foreground",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{children:"Created by"}),d.jsxs("div",{className:"flex items-center gap-1",children:[c!=null&&c.createdByPhotoURL?d.jsx("img",{src:c.createdByPhotoURL,alt:"",className:"w-4 h-4 rounded-full"}):d.jsx("div",{className:"w-4 h-4 rounded-full bg-muted flex items-center justify-center text-[10px]",children:c==null?void 0:c.createdBy.charAt(0).toUpperCase()}),d.jsx("span",{children:c==null?void 0:c.createdBy})]})]})})]}),d.jsxs("div",{className:"border-t p-4 flex justify-end gap-2",children:[d.jsx(Ne,{variant:"outline",onClick:()=>h(!1),children:"Close"}),((c==null?void 0:c.createdBy)===((ve=Ut.currentUser)==null?void 0:ve.email)||((Te=c==null?void 0:c.sharedWith)==null?void 0:Te.some(ae=>{var Ie;return ae.email===((Ie=Ut.currentUser)==null?void 0:Ie.email)&&ae.permission==="edit"})))&&d.jsx(Ne,{variant:"outline",onClick:()=>{D(!1),he(c),ie(!0)},children:"Edit"}),(c==null?void 0:c.createdBy)===((xe=Ut.currentUser)==null?void 0:xe.email)&&d.jsx(Ne,{variant:"destructive",onClick:async()=>{c!=null&&c.id&&(await jn.deleteCalendarEvent(c.id),F(),h(!1))},children:"Delete"})]})]})]})}),d.jsx(Mu,{open:p,onOpenChange:m,children:d.jsxs(rc,{children:[d.jsxs(Du,{children:[d.jsx(Ou,{children:"Share Event"}),d.jsx(Wv,{children:"Share this event with others via email"})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx(En,{children:"Email Addresses"}),d.jsx(eC,{placeholder:"Enter email addresses (one per line)",value:y,onChange:ae=>x(ae.target.value),className:"mt-1.5"}),d.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Separate multiple emails with new lines"})]}),d.jsxs("div",{children:[d.jsx(En,{children:"Permission"}),d.jsxs(am,{value:b,onValueChange:ae=>C(ae),children:[d.jsx(Rf,{className:"mt-1.5",children:d.jsx(lm,{})}),d.jsxs(Af,{children:[d.jsx(Ir,{value:"view",children:"Can view"}),d.jsx(Ir,{value:"edit",children:"Can edit"})]})]})]}),(c==null?void 0:c.sharedWith)&&c.sharedWith.length>0&&d.jsxs("div",{className:"border-t pt-4 mt-4",children:[d.jsx(En,{children:"Currently shared with"}),d.jsx("div",{className:"mt-2 space-y-2",children:c.sharedWith.map(ae=>d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(sI,{className:"h-4 w-4 text-muted-foreground"}),d.jsx("span",{children:ae.email})]}),d.jsxs("span",{className:"text-xs text-muted-foreground",children:[ae.permission," • ",ae.status]})]},ae.email))})]}),d.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[d.jsx(Ne,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),d.jsx(Ne,{onClick:async()=>{if(c!=null&&c.id)try{const ae=y.split(`
`).map(Ie=>Ie.trim()).filter(Boolean).map(Ie=>({email:Ie,permission:b,status:"pending"}));await jn.shareCalendarEvent(c==null?void 0:c.id,ae.map(Ie=>Ie.email),b),l({title:"Event Shared",description:`Event shared with ${ae.length} people`}),m(!1),F()}catch{l({title:"Error",description:"Failed to share event",variant:"destructive"})}},children:"Share"})]})]})]})})]})}function kBe(){const t=yi(),{user:e}=vi(),[n,r]=g.useState(!1);g.useEffect(()=>{const c=u=>{u.key==="k"&&(u.metaKey||u.ctrlKey)&&(u.preventDefault(),r(f=>!f))};return document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)},[]);const s=Sc().pathname==="/calendar",i=[{id:"home",name:"Home",shortcut:["G","H"],action:()=>{t("/"),r(!1)}},{id:"install",name:"Install App",shortcut:["G","I"],action:()=>{t("/install"),r(!1)}}],l=[{heading:"Public Pages",items:s?i.filter(c=>c.id!=="home"):i},{heading:"Authentication",items:e?[{id:"logout",name:"Logout",shortcut:["G","L"],action:()=>{t("/logout"),r(!1)}}]:[{id:"login",name:"Login",shortcut:["G","L"],action:()=>{t("/auth"),r(!1)}},{id:"signup",name:"Sign Up",shortcut:["G","S"],action:()=>{t("/signup"),r(!1)}}]},...e?[{heading:"Protected Pages",items:[{id:"notes",name:"Notes",shortcut:["G","N"],action:()=>{t("/notes"),r(!1)}},{id:"new-note",name:"New Note",shortcut:["G","M"],action:()=>{t("/notes/new"),r(!1)}},{id:"calendar",name:"Calendar",shortcut:["G","C"],action:()=>{t("/calendar"),r(!1)}},{id:"profile",name:"Profile",shortcut:["G","P"],action:()=>{t("/profile"),r(!1)}}]}]:[]];return d.jsx(c3,{open:n,onOpenChange:r,children:d.jsxs(l3,{className:"rounded-lg border shadow-md",children:[d.jsx(NE,{placeholder:"Type a command or search..."}),d.jsxs(IE,{children:[d.jsx(RE,{children:"No results found."}),l.map(c=>d.jsx(AE,{heading:c.heading,children:c.items.map(u=>d.jsxs(PE,{onSelect:u.action,children:[d.jsx("span",{children:u.name}),u.shortcut&&d.jsx("div",{className:"ml-auto flex items-center space-x-2",children:u.shortcut.map((f,h)=>d.jsx("span",{className:"rounded bg-muted px-2 py-1 text-sm",children:f},h))})]},u.id))},c.heading))]})]})})}function SBe(){const[t,e]=g.useState(()=>{const o=localStorage.getItem("theme");return o!==null?o==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches});g.useEffect(()=>{localStorage.setItem("theme",t?"dark":"light"),t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]),g.useEffect(()=>{const o=window.matchMedia("(prefers-color-scheme: dark)"),s=i=>{localStorage.getItem("theme")||e(i.matches)};return o.addEventListener("change",s),()=>o.removeEventListener("change",s)},[]);function n({children:o}){const{user:s,loading:i}=vi();return i?d.jsx("div",{children:"Loading..."}):s?d.jsx(d.Fragment,{children:o}):d.jsx(_oe,{to:"/auth"})}function r(){return d.jsxs(d.Fragment,{children:[d.jsx(kBe,{}),d.jsx(Ove,{children:d.jsx("main",{className:"flex-grow",children:d.jsxs(Eoe,{children:[d.jsx(ji,{path:"/",element:d.jsx(fve,{})}),d.jsx(ji,{path:"/auth",element:d.jsx(ive,{})}),d.jsx(ji,{path:"/signup",element:d.jsx(vve,{})}),d.jsx(ji,{path:"/notes",element:d.jsx(n,{children:d.jsx(_Ce,{})})}),d.jsx(ji,{path:"/notes/new",element:d.jsx(n,{children:d.jsx(nBe,{})})}),d.jsx(ji,{path:"/calendar",element:d.jsx(n,{children:d.jsx(EBe,{})})}),d.jsx(ji,{path:"/notes/:id",element:d.jsx(n,{children:d.jsx(pBe,{})})}),d.jsx(ji,{path:"/profile",element:d.jsx(n,{children:d.jsx(Dve,{})})}),d.jsx(ji,{path:"/logout",element:d.jsx(TBe,{})}),d.jsx(ji,{path:"/install",element:d.jsx(mBe,{})})]})})})]})}return d.jsx(Koe,{children:d.jsx("div",{className:t?"dark":"",children:d.jsxs("div",{className:"min-h-screen flex flex-col bg-background text-foreground",children:[d.jsx(rve,{darkMode:t,toggleDarkMode:()=>e(!t)}),d.jsx(ove,{darkMode:t,toggleDarkMode:()=>e(!t)}),d.jsx(r,{}),d.jsx(wve,{}),d.jsx(yve,{})]})})})}function TBe(){const t=yi();return g.useEffect(()=>{Ut.signOut().then(()=>{t("/")})},[t]),d.jsx("div",{children:"Logging out..."})}O$(document.getElementById("root")).render(d.jsx(g.StrictMode,{children:d.jsx(upe,{children:d.jsx(SBe,{})})}));export{Vp as a,sIe as b,iIe as c,VL as d,XBe as e,MNe as f,tC as g,LNe as h,KI as n,JBe as p,lQ as s,M3 as w,jNe as z};
